"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[4082],{"./packages/design-system/src/icons/checkbox.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgCheckbox=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.5.5 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147z",clipRule:"evenodd"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgCheckbox)},"./packages/design-system/src/icons/checkmark_circle.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgCheckmarkCircle=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 58 58","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852S3.853 15.11 3.853 28.999 15.112 54.146 29 54.146"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037",clipRule:"evenodd"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgCheckmarkCircle)},"./packages/design-system/src/utils/panelSections.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>STYLE_PANE_IDS,F:()=>PanelSections});var _panelTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/utils/panelTypes.ts");let STYLE_PANE_IDS=function(STYLE_PANE_IDS){return STYLE_PANE_IDS.Selection="selection",STYLE_PANE_IDS.Link="link",STYLE_PANE_IDS.Animation="animation",STYLE_PANE_IDS}({});const{Link,Animation,...panelsExcludingLinkAndAnimation}=_panelTypes__WEBPACK_IMPORTED_MODULE_0__.Z,PanelSections={[STYLE_PANE_IDS.Selection]:Object.values(panelsExcludingLinkAndAnimation),[STYLE_PANE_IDS.Link]:[Link],[STYLE_PANE_IDS.Animation]:[Animation]}},"./packages/story-editor/src/app/highlights/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").kr)({})},"./packages/story-editor/src/app/highlights/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LM:()=>provider,$q:()=>HighlightType,QM:()=>useHighlights.Z});var useHighlights=__webpack_require__("./packages/story-editor/src/app/highlights/useHighlights.ts"),src=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),useStory=__webpack_require__("./packages/story-editor/src/app/story/useStory.ts"),context=__webpack_require__("./packages/story-editor/src/app/highlights/context.ts"),panelSections=__webpack_require__("./packages/design-system/src/utils/panelSections.ts"),constants=__webpack_require__("./packages/story-editor/src/components/sidebar/constants.ts"),paneIds=__webpack_require__("./packages/story-editor/src/components/library/paneIds.ts");let HighlightType=function(HighlightType){return HighlightType.StoryTitle="STORY_TITLE",HighlightType.ElementToolbarToggle="ELEMENT_TOOLBAR_TOGGLE",HighlightType.StylePane="STYLE_PANE",HighlightType.Animation="ANIMATION",HighlightType.AssistiveText="ASSISTIVE_TEXT",HighlightType.Captions="Captions",HighlightType.Excerpt="EXCERPT",HighlightType.Link="LINK",HighlightType.PageBackground="PAGE_BACKGROUND",HighlightType.Poster="POSTER",HighlightType.PublisherLogo="PUBLISHER_LOGO",HighlightType.VideoA11yPoster="VIDEO_A11Y_POSTER",HighlightType.Style="STYLE",HighlightType.Font="FONT",HighlightType.TextColor="TEXT_COLOR",HighlightType.Media="MEDIA",HighlightType.Media3p="MEDIA3P",HighlightType.TextSet="TEXT",HighlightType.PageTemplates="PAGE_TEMPLATES",HighlightType.PageBackgroundAudio="PAGE_BACKGROUND_AUDIO",HighlightType}({});const STATES={[HighlightType.StoryTitle]:{focus:!0},[HighlightType.ElementToolbarToggle]:{focus:!0},[HighlightType.StylePane]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.Poster]:{focus:!0,tab:constants.K0},[HighlightType.PublisherLogo]:{focus:!0,tab:constants.K0},[HighlightType.Excerpt]:{focus:!0,tab:constants.K0},[HighlightType.PageBackgroundAudio]:{focus:!0,tab:constants.BI},[HighlightType.Captions]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.AssistiveText]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.PageBackground]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.Animation]:{focus:!0,tab:constants.BI,section:panelSections.C.Animation},[HighlightType.Font]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.Link]:{focus:!0,tab:constants.BI,section:panelSections.C.Link},[HighlightType.VideoA11yPoster]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.Style]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.TextColor]:{focus:!0,tab:constants.BI,section:panelSections.C.Selection},[HighlightType.Media]:{focus:!0,tab:constants.Jm,section:paneIds.h.Media},[HighlightType.Media3p]:{focus:!0,tab:constants.Jm,section:paneIds.h.Media3p},[HighlightType.TextSet]:{focus:!0,tab:constants.Jm,section:paneIds.h.Text},[HighlightType.PageTemplates]:{focus:!0,tab:constants.Jm,section:paneIds.h.PageTemplates}};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function HighlightsProvider({children}){const[highlighted,setHighlighted]=(0,src.eJ)({}),{actions:{setSelectedElementsById,setCurrentPage}}=(0,useStory.r)(),selectElement=(0,src.I4)((({elementId,elements,pageId})=>{if(pageId&&setCurrentPage({pageId}),elements?.length){const elementIds=elements.map((element=>element.id));setSelectedElementsById({elementIds})}else if(elementId){setSelectedElementsById({elementIds:[elementId]})}}),[setCurrentPage,setSelectedElementsById]),setHighlights=(0,src.I4)((({elements,elementId,pageId,highlight})=>{if((elements||elementId||pageId)&&selectElement({elements,elementId,pageId}),highlight&&STATES[highlight]){const{tab,section,...highlightState}=STATES[highlight];setHighlighted({[highlight]:{...highlightState,showEffect:!0},tab,section})}}),[selectElement]),onFocusOut=(0,src.I4)((()=>setHighlighted({})),[setHighlighted]),cancelEffect=(0,src.I4)((highlight=>setHighlighted((state=>({...state,[highlight]:{...state[highlight],showEffect:!1}})))),[]),contextValue=(0,src.Ye)((()=>({setHighlights,onFocusOut,cancelEffect,...highlighted})),[cancelEffect,onFocusOut,setHighlights,highlighted]);return(0,jsx_runtime.jsx)(context.Z.Provider,{value:contextValue,children})}HighlightsProvider.displayName="HighlightsProvider";const provider=HighlightsProvider},"./packages/story-editor/src/app/highlights/useHighlights.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/app/highlights/context.ts");const __WEBPACK_DEFAULT_EXPORT__=function useHighlights(selector=_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.yR){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.Sz)(_context__WEBPACK_IMPORTED_MODULE_1__.Z,selector)}},"./packages/story-editor/src/components/checklist/checklistContent/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G8:()=>AccessibilityChecks,s0:()=>DesignChecks,z1:()=>EmptyContent,jL:()=>emptyContent,j3:()=>PriorityChecks});__webpack_require__("./node_modules/react/index.js");var i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),countContext=__webpack_require__("./packages/story-editor/src/components/checklist/countContext/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/checklist/styles.js"),popupMountedContext=__webpack_require__("./packages/story-editor/src/components/checklist/popupMountedContext.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function DesignPanel({badgeCount=0,isOpen,maxHeight,onClick,title,children}){return(0,popupMountedContext.P)()?(0,jsx_runtime.jsxs)(styles.Y3,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,title,children:[(0,jsx_runtime.jsx)(styles.VX,{children:(0,i18n.__)("Follow best practices for Web Stories.","web-stories")}),children]}):children}function DesignChecks(props){return(0,jsx_runtime.jsx)(countContext.zf,{category:constants._r.DESIGN,children:(0,jsx_runtime.jsx)(DesignPanel,{...props,children:props.children})})}function AccessibilityPanel({children,badgeCount,isOpen,onClick,maxHeight,title}){return(0,popupMountedContext.P)()?(0,jsx_runtime.jsxs)(styles.Y3,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,title,children:[(0,jsx_runtime.jsx)(styles.VX,{children:(0,i18n.__)("Make your Web Story accessible.","web-stories")}),children]}):children}function AccessibilityChecks(props){return(0,jsx_runtime.jsx)(countContext.zf,{category:constants._r.ACCESSIBILITY,children:(0,jsx_runtime.jsx)(AccessibilityPanel,{...props,children:props.children})})}DesignChecks.displayName="DesignChecks",AccessibilityChecks.displayName="AccessibilityChecks";var src=__webpack_require__("./packages/react/src/index.ts"),tablist=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),checkpointContext=__webpack_require__("./packages/story-editor/src/components/checklist/checkpointContext/index.js");function PriorityPanel({children,badgeCount=0,isOpen,onClick,maxHeight,title}){return(0,popupMountedContext.P)()?(0,jsx_runtime.jsxs)(styles.Y3,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,status:tablist.Pk.DANGER,title,children:[(0,jsx_runtime.jsx)(styles.VX,{children:(0,i18n.__)("Make this Web Story easier to discover.","web-stories")}),children]}):children}function PriorityChecks(props){const count=(0,countContext.q3)(constants._r.PRIORITY),{updateHighPriorityCount}=(0,checkpointContext.Kf)((({actions:{updateHighPriorityCount}})=>({updateHighPriorityCount})));return(0,src.d4)((()=>{updateHighPriorityCount(count)}),[updateHighPriorityCount,count]),(0,jsx_runtime.jsx)(countContext.zf,{category:constants._r.PRIORITY,children:(0,jsx_runtime.jsx)(PriorityPanel,{...props,children:props.children})})}PriorityChecks.displayName="PriorityChecks";var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),checkmark_circle=__webpack_require__("./packages/design-system/src/icons/checkmark_circle.svg"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts");const Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(({theme})=>theme.colors.fg.secondary)),IconContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>(0,jsx_runtime.jsxs)(Wrapper,{children:[(0,jsx_runtime.jsx)(IconContainer,{children:(0,jsx_runtime.jsx)(checkmark_circle.Z,{})}),(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:(0,i18n.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories")})]});EmptyContent.displayName="EmptyContent";const emptyContent=()=>{const accessibilityCount=(0,countContext.q3)(constants._r.ACCESSIBILITY),designCount=(0,countContext.q3)(constants._r.DESIGN),priorityCount=(0,countContext.q3)(constants._r.PRIORITY),{checkpoint}=(0,checkpointContext.Kf)((({state:{checkpoint}})=>({checkpoint})));return accessibilityCount+designCount+priorityCount===0||checkpoint===constants.Q3.UNAVAILABLE?(0,jsx_runtime.jsx)(EmptyContent,{}):null}},"./packages/story-editor/src/components/checklist/checklistContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>provider,M:()=>useChecklist});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts");const context=(0,src.kr)({state:{},actions:{}});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ChecklistProvider=({children})=>{const[isOpen,setIsOpen]=(0,src.eJ)(!1),[checklistFocused,setChecklistFocused]=(0,src.eJ)(!1),[openPanel,_setOpenPanel]=(0,src.eJ)(),[isChecklistMounted,setIsChecklistMounted]=(0,src.eJ)(!1),setOpenPanel=(0,src.I4)((newOpenPanel=>{_setOpenPanel(newOpenPanel)}),[_setOpenPanel]),toggle=(0,src.I4)((()=>{(0,tracking_src.L9)("checklist_toggled",{status:isOpen?"closed":"open"}),setIsOpen((prevVal=>!prevVal))}),[isOpen]),close=(0,src.I4)((()=>{(0,tracking_src.L9)("checklist_toggled",{status:"closed"}),setIsOpen(!1)}),[]),open=(0,src.I4)((()=>{(0,tracking_src.L9)("checklist_toggled",{status:"open"}),setIsOpen(!0),setChecklistFocused(!0)}),[]),resetChecklistFocused=(0,src.I4)((()=>setChecklistFocused(!1)),[]),contextValue=(0,src.Ye)((()=>({state:{checklistFocused,isOpen,isChecklistMounted,openPanel},actions:{toggle,close,open,resetChecklistFocused,setIsChecklistMounted,setOpenPanel}})),[checklistFocused,close,openPanel,isOpen,open,resetChecklistFocused,toggle,setOpenPanel,setIsChecklistMounted,isChecklistMounted]);return(0,jsx_runtime.jsx)(context.Provider,{value:contextValue,children})};ChecklistProvider.displayName="ChecklistProvider";const provider=ChecklistProvider;function useChecklist(selector){return(0,src.Sz)(context,selector??src.yR)}},"./packages/story-editor/src/components/checklist/checkpointContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Vi:()=>ChecklistCheckpointProvider,aK:()=>CheckpointContext,Kf:()=>useCheckpoint});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PPC_CHECKPOINT_ACTION={ON_INITIAL_ELEMENT_ADDED:"story is no longer empty",ON_PUBLISH_CLICKED:"publish button is pressed",ON_STORY_HAS_2_PAGES:"story 'recommended' section enabled",ON_STORY_HAS_5_PAGES:"story 'high priority' section enabled",ON_STORY_IS_PUBLISHED:"story is published, regardless of recommendations"},machine={[constants.Q3.UNAVAILABLE]:{[PPC_CHECKPOINT_ACTION.ON_INITIAL_ELEMENT_ADDED]:constants.Q3.ONLY_RECOMMENDED,[PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED]:constants.Q3.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED]:constants.Q3.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_HAS_2_PAGES]:constants.Q3.ONLY_RECOMMENDED},[constants.Q3.ONLY_RECOMMENDED]:{[PPC_CHECKPOINT_ACTION.ON_STORY_HAS_5_PAGES]:constants.Q3.ALL,[PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED]:constants.Q3.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED]:constants.Q3.ALL},[constants.Q3.ALL]:{}},checkpointReducer=(state,action)=>machine[state][action]||state,CheckpointContext=(0,src.kr)({state:{},actions:{}});function ChecklistCheckpointProvider({children}){const[checkpointState,dispatch]=(0,src._Y)(checkpointReducer,constants.Q3.UNAVAILABLE),[highPriorityCount,setHighPriorityCount]=(0,src.eJ)(),[reviewChecklistRequested,setReviewChecklistRequested]=(0,src.eJ)(),hasHighPriorityIssues=highPriorityCount>0,storyStatus=(0,app.rB)((({state:{story}})=>story.status));(0,src.d4)((()=>{"publish"===storyStatus&&dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED)}),[storyStatus]),(0,app._Z)(app.xw.onSecondPageAdded,(0,src.I4)((()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_HAS_2_PAGES)}),[])),(0,app._Z)(app.xw.onFifthPageAdded,(0,src.I4)((()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_HAS_5_PAGES)}),[])),(0,app._Z)(app.xw.onInitialElementAdded,(0,src.I4)((()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_INITIAL_ELEMENT_ADDED)}),[]));const updateHighPriorityCount=(0,src.I4)((count=>{setHighPriorityCount(count)}),[]),showPriorityIssues=(0,src.I4)((()=>dispatch(PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED)),[]),handleReviewChecklist=(0,src.I4)((()=>{setReviewChecklistRequested(!0)}),[]),handleResetReviewChecklist=(0,src.I4)((()=>{setReviewChecklistRequested(!1)}),[]),value=(0,src.Ye)((()=>({state:{checkpoint:checkpointState,hasHighPriorityIssues,reviewChecklistRequested},actions:{updateHighPriorityCount,handleResetReviewChecklist,handleReviewChecklist,showPriorityIssues}})),[checkpointState,handleReviewChecklist,showPriorityIssues,handleResetReviewChecklist,reviewChecklistRequested,hasHighPriorityIssues,updateHighPriorityCount]);return(0,jsx_runtime.jsx)(CheckpointContext.Provider,{value,children})}function useCheckpoint(selector){return(0,src.Sz)(CheckpointContext,selector??src.yR)}ChecklistCheckpointProvider.displayName="ChecklistCheckpointProvider"},"./packages/story-editor/src/components/checklist/countContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{zf:()=>ChecklistCategoryProvider,rJ:()=>ChecklistCountProvider,q3:()=>useCategoryCount,Y4:()=>useHasChecklist});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.flat-map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var src=__webpack_require__("./packages/react/src/index.ts"),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CountContext=(0,src.kr)(null),CategoryContext=(0,src.kr)(null),INITIAL_STATE={[constants._r.PRIORITY]:{},[constants._r.DESIGN]:{},[constants._r.ACCESSIBILITY]:{}};function ChecklistCountProvider({hasChecklist,children}){const value=(0,src.eJ)({...INITIAL_STATE,hasChecklist});return(0,jsx_runtime.jsx)(CountContext.Provider,{value,children})}function ChecklistCategoryProvider({children,category}){const setCategories=(0,src.qp)(CountContext)?.[1];if(!setCategories)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");const addEntry=(0,src.I4)((entry=>setCategories((categories=>({...categories,[category]:{...categories[category],...entry}})))),[category,setCategories]);return(0,jsx_runtime.jsx)(CategoryContext.Provider,{value:addEntry,children})}function useCategoryCount(category){const categories=(0,src.qp)(CountContext)?.[0];if(!categories)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");return Object.values(categories[category]||{}).filter((isRendered=>isRendered)).length}function useHasChecklist(){const countContext=(0,src.qp)(CountContext)?.[0];if(!countContext)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist}=countContext;return hasChecklist}ChecklistCountProvider.displayName="ChecklistCountProvider",ChecklistCategoryProvider.displayName="ChecklistCategoryProvider"},"./packages/story-editor/src/components/checklist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Iy:()=>checklist_constants.Iy,W6:()=>Checklist,Vi:()=>checkpointContext.Vi,rJ:()=>countContext.rJ,yA:()=>checklistIcon,fM:()=>checklistContext.f,aK:()=>checkpointContext.aK,lC:()=>checklist_constants.lC,Q3:()=>checklist_constants.Q3,c_:()=>check_getPagesWithFailedContrast,M_:()=>checklistContext.M,Kf:()=>checkpointContext.Kf,Y4:()=>countContext.Y4});var checklistContext=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContext/index.js"),checkpointContext=__webpack_require__("./packages/story-editor/src/components/checklist/checkpointContext/index.js"),countContext=__webpack_require__("./packages/story-editor/src/components/checklist/countContext/index.js"),i18n=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./packages/i18n/src/i18n.ts")),src=__webpack_require__("./packages/react/src/index.ts"),constants=__webpack_require__("./packages/design-system/src/utils/constants.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),directionAware=__webpack_require__("./packages/story-editor/src/components/directionAware/index.js"),secondaryPopup=__webpack_require__("./packages/story-editor/src/components/secondaryPopup/index.js"),tablist=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),src_sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),icons_checkbox=__webpack_require__("./packages/design-system/src/icons/checkbox.svg"),toggleButton=__webpack_require__("./packages/story-editor/src/components/toggleButton/index.js"),checklist_constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),noop=__webpack_require__("./packages/story-editor/src/utils/noop.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Toggle({isOpen=!1,popupId="",onClick=noop.Z}){const priorityCount=(0,countContext.q3)(checklist_constants._r.PRIORITY),{checkpoint}=(0,checkpointContext.Kf)((({state:{checkpoint}})=>({checkpoint}))),notificationCount=(0,src.Ye)((()=>checkpoint===checklist_constants.Q3.ALL?priorityCount:0),[checkpoint,priorityCount]);return(0,jsx_runtime.jsx)(toggleButton.C,{"aria-owns":popupId,onClick,isOpen,MainIcon:icons_checkbox.Z,label:(0,i18n.__)("Checklist","web-stories"),"aria-label":notificationCount>0?(0,src_sprintf.Z)((0,i18n._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",notificationCount,"web-stories"),notificationCount):(0,i18n.__)("Checklist","web-stories"),notificationCount})}Toggle.displayName="Toggle";var checklistContent=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContent/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/checklist/styles.js");const Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],zIndex.FM),StyledNavigationWrapper=(0,styled_components_browser_esm.ZP)(secondaryPopup.dl).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),ThroughputPopup=(0,src.Gp)((function ThroughputPopup({isOpen,children,close},ref){const closeButtonRef=(0,src.sO)(),{checklistFocused,isChecklistMounted,resetChecklistFocused,setIsChecklistMounted}=(0,checklistContext.M)((({state:{isChecklistMounted,checklistFocused},actions:{setIsChecklistMounted,resetChecklistFocused}})=>({checklistFocused,isChecklistMounted,resetChecklistFocused,setIsChecklistMounted})));return(0,src.d4)((()=>{checklistFocused&&closeButtonRef.current&&closeButtonRef.current.focus(),resetChecklistFocused()}),[checklistFocused,resetChecklistFocused]),(0,jsx_runtime.jsx)(secondaryPopup.ZP,{popupId:checklist_constants.Uq,isOpen,ariaLabel:checklist_constants.kx,shouldKeepMounted:!0,onEnter:()=>setIsChecklistMounted(!0),onExited:()=>setIsChecklistMounted(!1),children:isChecklistMounted?(0,jsx_runtime.jsxs)(StyledNavigationWrapper,{ref,isOpen,children:[(0,jsx_runtime.jsx)(secondaryPopup._g,{ref:closeButtonRef,onClose:close,label:checklist_constants.kx,popupId:checklist_constants.Uq}),(0,jsx_runtime.jsx)(tablist.p$,{id:"pre-publish-checklist","data-isexpanded":isOpen,"aria-label":(0,i18n.__)("Potential Story issues by category","web-stories"),children}),(0,jsx_runtime.jsx)(checklistContent.jL,{})]}):children})}));function Checklist({items={}}){const{close,openPanel,toggle,isOpen,isChecklistMounted,setOpenPanel}=(0,checklistContext.M)((({actions:{close,toggle,setOpenPanel},state:{isOpen,isChecklistMounted,openPanel}})=>({close,toggle,isOpen,isChecklistMounted,openPanel,setOpenPanel}))),priorityCount=(0,countContext.q3)(checklist_constants._r.PRIORITY),designCount=(0,countContext.q3)(checklist_constants._r.DESIGN),accessibilityCount=(0,countContext.q3)(checklist_constants._r.ACCESSIBILITY),{checkpoint}=(0,checkpointContext.Kf)((({state:{checkpoint}})=>({checkpoint}))),navRef=(0,src.sO)(),handleOpenPanel=(0,src.I4)((panelName=>()=>setOpenPanel((currentOpenPanel=>currentOpenPanel===panelName?null:panelName))),[setOpenPanel]);(0,src.d4)((()=>{if(isChecklistMounted){const firstFocusableChild=navRef.current?.querySelector(constants.G.join(", "));firstFocusableChild?.focus()}}),[isChecklistMounted]),(0,src.d4)((()=>{checkpoint&&setOpenPanel(checklist_constants.mE[checkpoint])}),[checkpoint,setOpenPanel]);const visiblePanels=checklist_constants.be[checkpoint],priorityBadgeCount=visiblePanels.includes(checklist_constants._r.PRIORITY)?priorityCount:0,designBadgeCount=visiblePanels.includes(checklist_constants._r.DESIGN)?designCount:0,accessibilityBadgeCount=visiblePanels.includes(checklist_constants._r.ACCESSIBILITY)?accessibilityCount:0,maxPanelHeight=(0,styles.Ms)([priorityBadgeCount,designBadgeCount,accessibilityBadgeCount].filter((num=>Boolean(num))).length),{Priority,Design,Accessibility}=items;return(0,jsx_runtime.jsx)(directionAware.Z,{children:(0,jsx_runtime.jsxs)(Wrapper,{role:"region","aria-label":checklist_constants.kx,children:[(0,jsx_runtime.jsxs)(ThroughputPopup,{ref:navRef,close,isOpen,children:[Priority&&(0,jsx_runtime.jsx)(checklistContent.j3,{badgeCount:priorityBadgeCount,isOpen:isOpen&&openPanel===checklist_constants._r.PRIORITY,onClick:handleOpenPanel(checklist_constants._r.PRIORITY),maxHeight:maxPanelHeight,title:checklist_constants.Hs[checklist_constants._r.PRIORITY],children:(0,jsx_runtime.jsx)(Priority,{})}),Design&&(0,jsx_runtime.jsx)(checklistContent.s0,{badgeCount:designBadgeCount,isOpen:isOpen&&openPanel===checklist_constants._r.DESIGN,onClick:handleOpenPanel(checklist_constants._r.DESIGN),maxHeight:maxPanelHeight,title:checklist_constants.Hs[checklist_constants._r.DESIGN],children:(0,jsx_runtime.jsx)(Design,{})}),Accessibility&&(0,jsx_runtime.jsx)(checklistContent.G8,{badgeCount:accessibilityBadgeCount,isOpen:isOpen&&openPanel===checklist_constants._r.ACCESSIBILITY,onClick:handleOpenPanel(checklist_constants._r.ACCESSIBILITY),maxHeight:maxPanelHeight,title:checklist_constants.Hs[checklist_constants._r.ACCESSIBILITY],children:(0,jsx_runtime.jsx)(Accessibility,{})})]}),(0,jsx_runtime.jsx)(Toggle,{isOpen,onClick:toggle,popupId:checklist_constants.Uq})]})})}Checklist.displayName="Checklist";__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/story-editor/src/app/index.js"),__webpack_require__("./packages/story-editor/src/app/highlights/index.ts");var checklistCard=__webpack_require__("./packages/story-editor/src/components/checklistCard/index.js"),thumbnail=__webpack_require__("./packages/story-editor/src/components/thumbnail/index.js"),utils=__webpack_require__("./packages/story-editor/src/components/checklist/utils/index.js");__webpack_require__("./packages/story-editor/src/components/checklist/popupMountedContext.js");__webpack_require__("./packages/tracking/src/index.ts");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.some.js");var dimensions=__webpack_require__("./packages/units/src/dimensions.ts"),getBoundRect=__webpack_require__("./packages/units/src/getBoundRect.ts"),src_constants=__webpack_require__("./packages/units/src/constants.ts"),getMediaSizePositionProps=__webpack_require__("./packages/media/src/getMediaSizePositionProps.ts"),preloadImage=__webpack_require__("./packages/media/src/preloadImage.ts"),createSolidFromString=__webpack_require__("./packages/patterns/src/createSolidFromString.ts"),contrastUtils=__webpack_require__("./packages/story-editor/src/utils/contrastUtils.ts"),getMediaBaseColor=__webpack_require__("./packages/story-editor/src/utils/getMediaBaseColor.ts");const OVERLAP_RATIO=1/3;function isOverlapSignificant(overlapArea,textBoxArea){return overlapArea>=OVERLAP_RATIO*textBoxArea}function getBackgroundsForElement(textElement,potentialBackgroundElements,page){const{pageSize}=page,textPos=(0,dimensions.iz)(textElement,pageSize?.width,pageSize?.height),textBox=(0,getBoundRect.Z)([textPos]),textBoxArea=textBox.width*textBox.height,elementOverlaps=[...potentialBackgroundElements].map(((element,index)=>{const bgPos=(0,dimensions.iz)(element,pageSize?.width,pageSize?.height),bgBox=(0,getBoundRect.Z)([bgPos]),overlappingArea=function getOverlappingArea(a,b){const dx=Math.min(a.endX,b.endX)-Math.max(a.startX,b.startX),dy=Math.min(a.endY,b.endY)-Math.max(a.startY,b.startY);return dx>=0&&dy>=0?dx*dy:0}(textBox,bgBox);return{element:element.isBackground||element.isDefaultBackground?{...element,backgroundColor:page?.backgroundColor}:element,area:overlappingArea,index}})).reverse();let unoccludedArea=textBoxArea;const significantElements=[];for(const overlap of elementOverlaps){if(!isOverlapSignificant(unoccludedArea,textBoxArea))break;isOverlapSignificant(overlap.area,textBoxArea)&&significantElements.push(overlap.element),unoccludedArea-=overlap.area}return significantElements}function getTextImageBackgroundColor({background,text,page}){const{pageSize}=page,safeZoneDiff=(pageSize?.width/src_constants.Sr-pageSize?.width/src_constants.O1)/2,textPos=(0,dimensions.iz)(text,pageSize?.width,pageSize?.height),textBox=(0,getBoundRect.Z)([textPos]),{resource,scale,focalX,focalY}=background,bgBox=(0,dimensions.iz)(background,pageSize?.width,pageSize?.height),{width,height}=bgBox,bgMediaBox=(0,getMediaSizePositionProps.Z)(resource,width,height,scale,focalX,focalY);return async function getOverlapBgColor({bgImage,bgBox,overlapBox}){function getImageData(imageNode){return new Promise(((resolve,reject)=>{try{const canvas=document.createElement("canvas");canvas.width=bgImage.width,canvas.height=bgImage.height;const ctx=canvas.getContext("2d");if(bgImage.rotationAngle){const translationOffsetX=bgImage.offsetX+bgBox.width/2,translationOffsetY=bgImage.offsetY+bgBox.height/2;ctx.translate(translationOffsetX,translationOffsetY),ctx.rotate(bgImage.rotationAngle*TO_RADIANS),ctx.translate(-translationOffsetX,-translationOffsetY)}let xPos=0,yPos=0;const{flip}=bgImage;(flip.vertical||flip.horizontal)&&(xPos=flip.horizontal?-1*bgImage.width:0,yPos=flip.vertical?-1*bgImage.height:0,ctx.scale(flip.horizontal?-1:1,flip.vertical?-1:1)),ctx.drawImage(imageNode,xPos,yPos,bgImage.width,bgImage.height);resolve(ctx.getImageData(overlapBox.x,overlapBox.y,overlapBox.width,overlapBox.height))}catch(e){reject(e)}}))}const image=await(0,preloadImage.Z)({src:bgImage.src,width:bgImage.width,height:bgImage.height}),imgData=await getImageData(image),cropCanvas=document.createElement("canvas");cropCanvas.width=overlapBox.width,cropCanvas.height=overlapBox.height;cropCanvas.getContext("2d").putImageData(imgData,0,0);const hexColor=await(0,getMediaBaseColor.Z)(cropCanvas.toDataURL(),cropCanvas.width,cropCanvas.height),{color:{r,g,b}}=(0,createSolidFromString.Z)(hexColor);return{r,g,b}}({bgImage:{offsetX:bgMediaBox.offsetX,offsetY:bgMediaBox.offsetY,src:background.resource.src,width:bgMediaBox.width,height:bgMediaBox.height,rotationAngle:background.isBackground?void 0:background.rotationAngle,flip:background.flip},bgBox,overlapBox:{x:background.isBackground?bgMediaBox.offsetX+Math.abs(textBox.startX):bgMediaBox.offsetX+Math.abs(textBox.startX)-bgBox.x,y:background.isBackground?bgMediaBox.offsetY+Math.abs(textBox.startY+safeZoneDiff):bgMediaBox.offsetY+Math.abs(textBox.startY+safeZoneDiff)-(bgBox.y+safeZoneDiff),width:textBox.width,height:textBox.height}}).catch((()=>{}))}const TO_RADIANS=Math.PI/180;function getTextShapeBackgroundColor({background}){return background?.backgroundColor?.color}function getBackgroundColorByType(element){switch(element.type){case"image":return getTextImageBackgroundColor;case"shape":return getTextShapeBackgroundColor;default:return noop.Z}}async function check_getPagesWithFailedContrast(storyPages,pageSize){const promises=[];(storyPages||[]).forEach((page=>{const maybeTextContrastResult=async function pageBackgroundTextLowContrast(page){const backgroundColorPromises=[];page.elements.forEach(((element,index)=>{if("text"===element.type&&"NONE"===element.backgroundTextMode){const textStyleColors=function getTextStyleColors(element){const spans=(0,utils.u)(element.content),textStyleColors=spans.map((span=>span.style?.color)).filter(Boolean),noColorStyleOnSpans=0===textStyleColors.length&&0!==spans.length,noSpans=0!==element.content.length&&0===spans.length;return(noColorStyleOnSpans||noSpans)&&textStyleColors.push("rgb(0, 0, 0)"),textStyleColors}(element),potentialBackgroundElements=page.elements.slice(0,index),textBackgrounds=getBackgroundsForElement(element,potentialBackgroundElements,page);for(const backgroundElement of textBackgrounds){const getBackgroundColor=getBackgroundColorByType(backgroundElement)({background:backgroundElement,text:element,page}),prepare=getBackgroundColorResult=>getBackgroundColorResult&&{backgroundColor:getBackgroundColorResult,textStyleColors,fontSize:element.fontSize,id:element.id,isBackgroundElement:backgroundElement.isBackground},bgColorCompare=getBackgroundColor instanceof Promise?getBackgroundColor.then(prepare):prepare(getBackgroundColor);backgroundColorPromises.push(bgColorCompare)}}}));const bgColorComparisons=await Promise.all(backgroundColorPromises);return bgColorComparisons.map((compareObj=>function textBackgroundHasLowContrast({backgroundColor,textStyleColors,fontSize}={}){return!(!textStyleColors||!backgroundColor)&&textStyleColors.some((styleColor=>{if(!styleColor)return!1;const textLuminance=(0,contrastUtils.aD)(styleColor),backgroundLuminance=(0,contrastUtils.X5)(backgroundColor);return!(0,contrastUtils.y8)(textLuminance,backgroundLuminance,fontSize).WCAG_AA}))}(compareObj)&&{id:compareObj.id,isBackground:compareObj.isBackgroundElement})).filter((({id})=>id))}({...page,pageSize});maybeTextContrastResult instanceof Promise?promises.push(maybeTextContrastResult.then((result=>({result,page})))):promises.push(maybeTextContrastResult)}));return(await Promise.all(promises)).filter((results=>results.result.some((({id})=>id)))).map((page=>page))}__webpack_require__("./packages/story-editor/src/app/story/index.ts");function videoChecklistCard_VideoChecklistCard({elements,footer,onThumbnailClick,...props}){return(0,jsx_runtime.jsx)(checklistCard.Il,{...props,cardType:elements.length>1?checklistCard.WK.MULTIPLE_ISSUE:checklistCard.WK.SINGLE_ISSUE,footer:(0,jsx_runtime.jsx)(checklistCard.dd,{children:footer}),thumbnails:elements.map((element=>(0,jsx_runtime.jsx)(thumbnail.pl,{onClick:()=>onThumbnailClick(element.id,element.pageId),type:thumbnail.r1.VIDEO,displayBackground:(0,jsx_runtime.jsx)(thumbnail.cG,{page:element}),"aria-label":(0,i18n.__)("Go to offending video","web-stories")},element.id)))})}videoChecklistCard_VideoChecklistCard.displayName="VideoChecklistCard";__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");var button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx");__webpack_require__("./packages/story-editor/src/app/media/index.js"),__webpack_require__("./packages/story-editor/src/constants/index.ts"),__webpack_require__("./packages/story-editor/src/components/checklist/utils/filterStoryElements.js"),__webpack_require__("./packages/story-editor/src/components/checklistCard/styles.js"),__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts"),__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);var exclamation_outline=__webpack_require__("./packages/design-system/src/icons/exclamation_outline.svg");const checklistIcon=({checkpoint,...rest})=>checkpoint===checklist_constants.Q3.ALL?(0,jsx_runtime.jsx)(exclamation_outline.Z,{...rest}):null},"./packages/story-editor/src/components/checklist/popupMountedContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useIsChecklistMounted});var _checklistContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContext/index.js");function useIsChecklistMounted(){return(0,_checklistContext__WEBPACK_IMPORTED_MODULE_0__.M)((({state})=>state.isChecklistMounted))}},"./packages/story-editor/src/components/checklist/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ms:()=>getTabPanelMaxHeight,VX:()=>PanelText,Y3:()=>StyledTablistPanel});var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_tablist__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/secondaryPopup/index.js");const getTabPanelMaxHeight=buttonCount=>{if(buttonCount)return`100vh - ${_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.aj+60*buttonCount+_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.gE+_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.W0}px`},StyledTablistPanel=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP)(_tablist__WEBPACK_IMPORTED_MODULE_0__.y7).withConfig({displayName:"checklist__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(({badgeCount})=>0===badgeCount?0:"auto"),(({badgeCount})=>0===badgeCount?"hidden":"visible"),(({badgeCount})=>0===badgeCount?"none":"auto")),PanelText=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.x.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.TextSize.Small}).withConfig({displayName:"checklist__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(({theme})=>theme.colors.fg.secondary))},"./packages/story-editor/src/components/library/paneIds.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>PANE_IDS});let PANE_IDS=function(PANE_IDS){return PANE_IDS.Media="media",PANE_IDS.Media3p="media3p",PANE_IDS.Text="text",PANE_IDS.Shapes="shapes",PANE_IDS.Elements="elements",PANE_IDS.PageTemplates="pageTemplates",PANE_IDS.Shopping="shopping",PANE_IDS}({})},"./packages/story-editor/src/components/sidebar/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BI:()=>STYLE,Jm:()=>INSERT,K0:()=>DOCUMENT,k3:()=>PUBLISH_MODAL_DOCUMENT});const INSERT="insert",STYLE="design",DOCUMENT="document",PUBLISH_MODAL_DOCUMENT="publish_modal_document"},"./packages/story-editor/src/components/tablist/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>PANEL_STATES});const PANEL_STATES={NORMAL:"normal",DANGER:"danger"}},"./packages/story-editor/src/components/tablist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Pk:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.P,p$:()=>_styles__WEBPACK_IMPORTED_MODULE_2__.p$,y7:()=>_tablistPanel__WEBPACK_IMPORTED_MODULE_0__.Z});var _tablistPanel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/tablistPanel.js"),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tablist/styles.js")},"./packages/story-editor/src/components/tablist/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ct:()=>Badge,VX:()=>PanelText,Y6:()=>TabButton,kA:()=>PanelWrapper,oD:()=>ButtonText,p$:()=>Tablist,qk:()=>IconContainer,tn:()=>ScrollableContent,vw:()=>TabButtonWrapper,x4:()=>TabPanel});var prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js");const Tablist=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.attrs({role:"tablist"}).withConfig({displayName:"tablist__Tablist",componentId:"sc-oyok4o-0"})(["background:",";*{user-select:text;}"],(({theme})=>theme.colors.bg.primary));Tablist.propTypes={"aria-label":prop_types__WEBPACK_IMPORTED_MODULE_2___default().string.isRequired};const PanelText=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.s).attrs({as:"h3",size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.TextSize.XXXSmall}).withConfig({displayName:"tablist__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),TabButtonWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,:focus-visible{background-color:",";}"],(({theme})=>theme.colors.bg.secondary)),TabButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.z).attrs({variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.Wu.PLAIN}).withConfig({displayName:"tablist__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,:focus-visible{background-color:",";}",";","{opacity:0.8;}",";"],(({theme})=>theme.colors.bg.secondary),(({theme})=>_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.L(theme.colors.border.focus,theme.colors.bg.secondary)),PanelText,(({status})=>status===_constants__WEBPACK_IMPORTED_MODULE_0__.P.DANGER&&(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.iv)(["&,","{color:",";}","{background-color:",";}"],PanelText,(({theme})=>theme.colors.fg.negative),Badge,(({theme})=>theme.colors.fg.negative)))),PanelWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(({theme})=>theme.colors.bg.primary),TabButton,(({theme})=>theme.colors.divider.tertiary),(({isExpanded,theme})=>isExpanded&&(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.iv)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],TabButton,TabButtonWrapper,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.L,PanelText,theme.colors.bg.primary,ScrollableContent,TabPanel))),ButtonText=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),IconContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(({theme})=>theme.colors.fg.primary)),Badge=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(({theme})=>theme.borders.radius.round),(({theme})=>theme.colors.fg.primary),PanelText,(({theme})=>theme.colors.inverted.fg.primary)),ScrollableContent=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(({maxHeight})=>maxHeight?`calc(${maxHeight})`:"none"),(({maxHeight})=>maxHeight?"scroll":"hidden")),TabPanel=styled_components__WEBPACK_IMPORTED_MODULE_1__.ZP.div.withConfig({displayName:"tablist__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(({theme})=>theme.colors.bg.primary),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.d)},"./packages/story-editor/src/components/tablist/tablistPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/sprintf.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/icons/chevron_down_small.svg"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js"),_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/tablist/styles.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TablistPanel=({badgeCount=0,children,className,id,isExpanded,onClick,maxHeight,status=_constants__WEBPACK_IMPORTED_MODULE_2__.P.NORMAL,title})=>{const backupId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)(uuid__WEBPACK_IMPORTED_MODULE_5__.Z,[]),panelId=id||backupId;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_styles__WEBPACK_IMPORTED_MODULE_3__.kA,{className,isExpanded,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.vw,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_styles__WEBPACK_IMPORTED_MODULE_3__.Y6,{"aria-controls":panelId,"aria-selected":isExpanded,onClick,role:"tab",status,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_styles__WEBPACK_IMPORTED_MODULE_3__.oD,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.qk,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.VX,{id:`${title}-${panelId}`,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__._n)("%1$d %2$s issue","%1$d %2$s issues",badgeCount,"web-stories"),badgeCount,title),children:title})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.Ct,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.VX,{"aria-hidden":!0,children:badgeCount})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.tn,{"aria-hidden":!isExpanded,maxHeight,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_3__.x4,{id:panelId,"aria-labelledby":`${title}-${panelId}`,role:"tabpanel",children})})]})};TablistPanel.displayName="TablistPanel";const __WEBPACK_DEFAULT_EXPORT__=TablistPanel},"./packages/story-editor/src/components/toggleButton/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ToggleButton});__webpack_require__("./node_modules/react/index.js");var prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/theme/theme.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Button=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.z).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["width:auto;display:flex;align-items:center;justify-content:space-between;border-width:1px;border-style:solid;padding:0 10px;white-space:nowrap;"," > :not(svg):last-child{margin-right:0;}.main-icon{height:","px;width:auto;margin:-8px;display:block;}"],(({isOpen,hasText,height=36,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)(["height:","px;min-width:","px;color:",";border-color:",";background-color:",";",""],height,height,theme.colors.fg.primary,isOpen?theme.colors.bg.secondary:theme.colors.border.defaultNormal,isOpen?theme.colors.bg.secondary:theme.colors.bg.primary,hasText&&(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)(["",";"],_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__._({preset:{...theme.typography.presets.paragraph[_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.TextSize.Small]},theme})))),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Z.ICON_SIZE);Button.propTypes={hasText:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,isOpen:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,height:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string])};const badgeText=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.r.typography.presets.label[_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.TextSize.Small],CountBadge=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__.x.Span).withConfig({displayName:"toggleButton__CountBadge",componentId:"sc-1de7s10-1"})(["",""],(({size=22,fontSize=badgeText.size,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.iv)(["min-width:","px;width:auto;height:","px;padding:0 ","px;margin:0 8px;display:flex;align-items:center;justify-content:center;color:",";background-color:",";border-radius:9999px;font-size:","px;line-height:0;"],size,size,size/4,theme.colors.fg.primary,theme.colors.bg.quaternary,fontSize)));CountBadge.propTypes={size:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string]),fontSize:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string])};const ToggleButton=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)((({copy,isOpen=!1,notificationCount=0,MainIcon,label,shortcut,popupZIndexOverride,hasMenuList=!1,...rest},ref)=>{const hasNotifications=notificationCount>0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{hasTail:!0,title:label,placement:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.ug.Top,shortcut,popupZIndexOverride,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Button,{ref,"aria-haspopup":!0,"aria-pressed":isOpen,"aria-expanded":isOpen,hasText:Boolean(copy),isOpen,isSquare:!hasNotifications,type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.L$.Tertiary,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Wu.Rectangle,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.qE.Medium,...rest,children:[MainIcon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(MainIcon,{className:"main-icon"}),copy,hasNotifications&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(CountBadge,{children:notificationCount}),hasMenuList&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.Z,{direction:"down",$isOpen:isOpen})]})})}));ToggleButton.displayName="ToggleButton"},"./packages/units/src/calcRotatedObjectPositionAndSize.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>calcRotatedObjectPositionAndSize});var _getCorners__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/units/src/getCorners.ts");function calcRotatedObjectPositionAndSize(angle=0,x,y,width,height){if(!angle)return{x,y,width,height};const{topLeftPoint,topRightPoint,bottomRightPoint,bottomLeftPoint}=(0,_getCorners__WEBPACK_IMPORTED_MODULE_0__.Z)(angle,x,y,width,height),boundTopLeftX=Math.min(topLeftPoint.x,topRightPoint.x,bottomRightPoint.x,bottomLeftPoint.x),boundTopLeftY=Math.min(topLeftPoint.y,topRightPoint.y,bottomRightPoint.y,bottomLeftPoint.y);return{x:boundTopLeftX,y:boundTopLeftY,width:Math.max(topLeftPoint.x,topRightPoint.x,bottomRightPoint.x,bottomLeftPoint.x)-boundTopLeftX,height:Math.max(topLeftPoint.y,topRightPoint.y,bottomRightPoint.y,bottomLeftPoint.y)-boundTopLeftY}}},"./packages/units/src/getBoundRect.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _calcRotatedObjectPositionAndSize__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/units/src/calcRotatedObjectPositionAndSize.ts");const __WEBPACK_DEFAULT_EXPORT__=function getBoundRect(list){const updatedList=list.map((el=>(0,_calcRotatedObjectPositionAndSize__WEBPACK_IMPORTED_MODULE_3__.Z)(el.rotationAngle,el.x,el.y,el.width,el.height))),firstElement=updatedList[0];let startX=firstElement.x,startY=firstElement.y,endX=startX+firstElement.width,endY=startY+firstElement.height;return updatedList.slice(1).forEach((el=>{startX=Math.min(el.x,startX),startY=Math.min(el.y,startY),endX=Math.max(el.x+el.width,endX),endY=Math.max(el.y+el.height,endY)})),{startX,startY,endX,endY,width:endX-startX,height:endY-startY}}}}]);