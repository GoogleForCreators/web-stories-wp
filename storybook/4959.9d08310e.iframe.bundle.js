"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[4959],{"./packages/design-system/src/components/toggle/toggle.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/icons/checkmark_small.svg"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"toggle__Wrapper",componentId:"sc-3bc7bd-0"})(["padding:","px;"],4),Background=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"toggle__Background",componentId:"sc-3bc7bd-1"})((_ref=>{let{theme}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["position:absolute;top:-","px;left:-","px;height:","px;width:","px;background-color:transparent;border-radius:",";border:","px solid ",";pointer-events:none;transition:all 0.3s;"],1,1,20,44,theme.borders.radius.x_large,1,theme.colors.border.defaultNormal)})),Circle=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.span.withConfig({displayName:"toggle__Circle",componentId:"sc-3bc7bd-2"})((_ref2=>{let{theme}=_ref2;return(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["pointer-events:none;:after{content:'';position:absolute;top:","px;left:","px;height:","px;width:","px;background-color:",";border-radius:",";cursor:pointer;transition:background-color 0.3s,border-color 0.3s,left 0.15s;}"],-5,-5,28,28,theme.colors.fg.secondary,theme.borders.radius.round)})),IconContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"toggle__IconContainer",componentId:"sc-3bc7bd-3"})((_ref3=>{let{theme}=_ref3;return(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["position:absolute;width:","px;top:","px;left:","px;z-index:1;opacity:0;transition:opacity 0.15s;pointer-events:none;svg{color:",";}"],32,-6,19,theme.colors.standard.white)})),ToggleContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"toggle__ToggleContainer",componentId:"sc-3bc7bd-4"})((_ref4=>{let{theme}=_ref4;return(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["position:relative;height:","px;width:","px;background-color:transparent;border-radius:",";input[type='checkbox']{position:absolute;top:-","px;left:-","px;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:disabled{cursor:default;~ ","{border-color:",";}:checked ~ ","{background-color:",";border-color:",";}~ ",":after{background-color:",";}:checked ~ ",":after{background-color:",";}~ "," svg{color:",";}}&:focus-visible{~ ","{outline:none;box-shadow:0 0 0 5px ",",0 0 0 7px ",";}}:checked{~ ","{background-color:",";border-color:",";}~ ",":after{left:","px;background-color:",";}~ ","{opacity:1;}}:hover{:not(:disabled) ~ ","{border-color:",";}:checked:not(:disabled) ~ ","{background-color:",";border-color:",";}}:active{~ ","{box-shadow:0 0 0 8px ",";}}}"],20,44,theme.borders.radius.x_large,.5,.5,20,44,Background,theme.colors.fg.disable,Background,theme.colors.fg.disable,theme.colors.fg.disable,Circle,theme.colors.fg.disable,Circle,theme.colors.bg.secondary,IconContainer,theme.colors.fg.disable,Background,theme.colors.bg.primary,theme.colors.border.focus,Background,theme.colors.interactiveBg.positivePress,theme.colors.interactiveBg.positivePress,Circle,21,theme.colors.interactiveBg.positiveNormal,IconContainer,Background,theme.colors.fg.secondary,Background,theme.colors.interactiveBg.positiveHover,theme.colors.interactiveBg.positiveHover,Background,theme.colors.shadow.active)}));function Toggle(_ref5){let{className,...inputProps}=_ref5;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Wrapper,{className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(ToggleContainer,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{type:"checkbox",...inputProps}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Background,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_icons__WEBPACK_IMPORTED_MODULE_3__.Z,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Circle,{})]})})}Toggle.displayName="Toggle";const __WEBPACK_DEFAULT_EXPORT__=Toggle},"./packages/story-editor/src/components/header/buttons/buttonWithChecklistWarning.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/i18n/src/i18n.ts"),styled_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/app/index.js"),_constants_zIndex__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),_utils_useIsUploadingToStory__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/utils/useIsUploadingToStory.js"),_checklist__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/checklist/index.js"),_tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Button=(0,styled_components__WEBPACK_IMPORTED_MODULE_7__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.z).withConfig({displayName:"buttonWithChecklistWarning__Button",componentId:"sc-jm08jq-0"})(["padding:4px 6px;height:32px;svg{width:24px;height:auto;}"]),InnerButton=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)((function InnerButton(_ref,ref){let{text,checkpoint,hasHighPriorityIssues=!1,onClick,...buttonProps}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Button,{ref,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.Wu.Rectangle,type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.L$.Primary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.qE.Small,onClick:evt=>{evt.currentTarget.blur(),onClick?.(evt)},...buttonProps,children:[text,hasHighPriorityIssues&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_checklist__WEBPACK_IMPORTED_MODULE_4__.yA,{checkpoint})]})})),__WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)((function ButtonWithChecklistWarning(_ref2,ref){let{disabled,hasFutureDate,...buttonProps}=_ref2;const isUploading=(0,_utils_useIsUploadingToStory__WEBPACK_IMPORTED_MODULE_3__.Z)(),{isSaving,canPublish,status}=(0,_app__WEBPACK_IMPORTED_MODULE_2__.rB)((_ref3=>{let{state}=_ref3;return{isSaving:state.meta?.isSaving,status:state.story.status,canPublish:Boolean(state?.capabilities?.publish)}})),{checkpoint,hasHighPriorityIssues}=(0,_checklist__WEBPACK_IMPORTED_MODULE_4__.Kf)((_ref4=>{let{state:{checkpoint,hasHighPriorityIssues}}=_ref4;return{checkpoint,hasHighPriorityIssues}})),TOOLTIP_TEXT={[_checklist__WEBPACK_IMPORTED_MODULE_4__.Q3.ALL]:hasHighPriorityIssues?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Make updates before publishing to improve discoverability and performance on search engines","web-stories"):"",[_checklist__WEBPACK_IMPORTED_MODULE_4__.Q3.ONLY_RECOMMENDED]:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Review checklist to improve performance before publishing","web-stories"),[_checklist__WEBPACK_IMPORTED_MODULE_4__.Q3.UNAVAILABLE]:""},TOOLTIP_TEXT_UPLOADING=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Saving is disabled due to media currently being uploaded.","web-stories"),TOOLTIP_TEXT_REVIEW=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Submit your work for review, and an Editor will be able to approve it for you.","web-stories");let toolTip=isUploading?TOOLTIP_TEXT_UPLOADING:TOOLTIP_TEXT[checkpoint];canPublish||(toolTip=TOOLTIP_TEXT_REVIEW);const publishText=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>hasFutureDate&&"private"!==status?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Schedule","web-stories"):(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Publish","web-stories")),[hasFutureDate,status]),text=canPublish?publishText:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Submit for review","web-stories");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{title:toolTip,popupZIndexOverride:_constants_zIndex__WEBPACK_IMPORTED_MODULE_11__.ZT,hasTail:!0,placement:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.ug.BottomEnd,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(InnerButton,{ref,text,disabled:disabled||isSaving||isUploading,checkpoint,hasHighPriorityIssues,...buttonProps})})}))},"./packages/story-editor/src/components/panels/document/excerpt/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>EXCERPT_MAX_LENGTH});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),story=__webpack_require__("./packages/story-editor/src/app/story/index.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),panel=__webpack_require__("./packages/story-editor/src/components/panels/panel/index.js"),highlights=__webpack_require__("./packages/story-editor/src/app/highlights/index.ts"),styles=__webpack_require__("./packages/story-editor/src/app/highlights/styles.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const StyledText=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).withConfig({displayName:"excerpt__StyledText",componentId:"sc-t9wjp4-0"})(["color:",";margin-top:-4px;"],(_ref=>{let{theme}=_ref;return theme.colors.fg.tertiary})),EXCERPT_MAX_LENGTH=200;function ExcerptPanel(_ref2){let{nameOverride}=_ref2;const{excerpt,updateStory}=(0,story.rB)((_ref3=>{let{state:{story:{excerpt=""}},actions:{updateStory}}=_ref3;return{excerpt,updateStory}})),handleTextChange=(0,src.I4)((evt=>{updateStory({properties:{excerpt:evt.target.value}})}),[updateStory]),{highlight,resetHighlight,cancelHighlight}=(0,highlights.QM)((state=>({highlight:state[highlights.$q.Excerpt],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect})));return(0,jsx_runtime.jsxs)(_StyledSimplePanel,{onAnimationEnd:()=>resetHighlight(),name:nameOverride||"excerpt",title:(0,i18n.__)("Story Description","web-stories"),collapsedByDefault:!1,isPersistable:!highlight,$_css:highlight?.showEffect&&styles.Z.FLASH,children:[(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsx)(_StyledTextArea,{ref:node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},value:excerpt,onChange:handleTextChange,placeholder:(0,i18n.__)("Write a description of the story","web-stories"),"aria-label":(0,i18n.__)("Story Description","web-stories"),maxLength:EXCERPT_MAX_LENGTH,showCount:!0,rows:4,$_css2:highlight?.showEffect&&styles.Z.OUTLINE})}),(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsx)(StyledText,{size:types.TextSize.XSmall,children:(0,i18n.__)("Stories with a description tend to do better on search and have a wider reach","web-stories")})})]})}ExcerptPanel.displayName="ExcerptPanel";var _StyledSimplePanel=(0,styled_components_browser_esm.ZP)(panel.me).withConfig({displayName:"excerpt___StyledSimplePanel",componentId:"sc-t9wjp4-1"})(["",""],(p=>p.$_css)),_StyledTextArea=(0,styled_components_browser_esm.ZP)(components_form.Kx).withConfig({displayName:"excerpt___StyledTextArea",componentId:"sc-t9wjp4-2"})(["",""],(p=>p.$_css2))},"./packages/story-editor/src/components/panels/document/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QM:()=>pageAdvancement,JL:()=>slug});__webpack_require__("./packages/story-editor/src/components/panels/document/excerpt/index.js"),__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),story=__webpack_require__("./packages/story-editor/src/app/story/index.ts"),config=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),generalPageAdvancement=__webpack_require__("./packages/story-editor/src/components/panels/shared/generalPageAdvancement.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function PageAdvancementPanel(_ref){let{nameOverride}=_ref;const{globalPageDuration}=(0,config.ZR)(),{autoAdvance,defaultPageDuration,updateStory}=(0,story.rB)((_ref2=>{let{state:{story:{autoAdvance,defaultPageDuration}},actions:{updateStory}}=_ref2;return{autoAdvance,defaultPageDuration:defaultPageDuration||globalPageDuration,updateStory}})),onUpdate=(0,src.I4)((newProps=>{const{pageDuration,...rest}=newProps,properties={...rest,defaultPageDuration:pageDuration};updateStory({properties})}),[updateStory]);return(0,jsx_runtime.jsx)(generalPageAdvancement.Z,{panelName:nameOverride||"pageAdvancement",collapsedByDefault:!1,onUpdate,autoAdvance,pageDuration:defaultPageDuration,children:(0,i18n.__)("Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories")})}PageAdvancementPanel.displayName="PageAdvancementPanel";const pageAdvancement=PageAdvancementPanel;var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),url_src=__webpack_require__("./packages/url/src/index.ts"),cleanForSlug=__webpack_require__("./packages/story-editor/src/utils/cleanForSlug.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),panel=__webpack_require__("./packages/story-editor/src/components/panels/panel/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js");const MIN_MAX_PERMALINK={MIN:1,MAX:200},PermalinkRow=(0,styled_components_browser_esm.ZP)(components_form.X2).withConfig({displayName:"slug__PermalinkRow",componentId:"sc-12ylqoy-0"})(["margin-bottom:12px;input{color:",";:active,:focus,:focus-visible{color:",";}}"],(_ref2=>{let{theme}=_ref2;return theme.colors.fg.tertiary}),(_ref3=>{let{theme}=_ref3;return theme.colors.fg.primary})),LinkContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"slug__LinkContainer",componentId:"sc-12ylqoy-1"})(["margin-bottom:16px;"]);function SlugPanel(_ref4){let{nameOverride}=_ref4;const{slug:savedSlug,link,permalinkConfig,updateStory}=(0,story.rB)((_ref5=>{let{state:{story:{slug="",link,permalinkConfig}},actions:{updateStory}}=_ref5;return{slug:(0,url_src.eC)(slug),link,permalinkConfig,updateStory}})),[slug,setSlug]=(0,src.eJ)(savedSlug);(0,src.d4)((()=>{setSlug(savedSlug)}),[savedSlug]);const updateSlug=(0,src.I4)((value=>{const newSlug=value.slice(0,MIN_MAX_PERMALINK.MAX);updateStory({properties:{slug:(0,cleanForSlug.Z)(newSlug)}})}),[updateStory]),handleChange=(0,src.I4)((evt=>setSlug((0,cleanForSlug.Z)(evt.target.value,!0))),[]),handleBlur=(0,src.I4)((evt=>updateSlug(evt.target.value)),[updateSlug]),displayLink=slug&&permalinkConfig&&((value,_ref)=>{let{MIN,MAX}=_ref;return value>=MIN&&value<=MAX})(slug.length,MIN_MAX_PERMALINK)?permalinkConfig.prefix+slug+permalinkConfig.suffix:link;return(0,jsx_runtime.jsxs)(panel.me,{name:nameOverride||"permalink",title:(0,i18n.__)("Permalink","web-stories"),collapsedByDefault:!1,children:[permalinkConfig&&(0,jsx_runtime.jsx)(PermalinkRow,{children:(0,jsx_runtime.jsx)(input.Z,{value:String(slug),onChange:handleChange,onBlur:handleBlur,placeholder:(0,i18n.__)("Enter slug","web-stories"),"aria-label":(0,i18n.__)("URL slug","web-stories"),minLength:MIN_MAX_PERMALINK.MIN,maxLength:MIN_MAX_PERMALINK.MAX,containerStyleOverride:styles.O})}),(0,jsx_runtime.jsx)(LinkContainer,{children:(0,jsx_runtime.jsx)(typography_link.r,{rel:"noopener noreferrer",target:"_blank",href:link,size:types.TextSize.Small,children:displayLink})})]})}SlugPanel.displayName="SlugPanel";const slug=SlugPanel;var typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),backgroundAudioPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/backgroundAudioPanelContent.js");const HelperText=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).attrs({size:types.TextSize.Small}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-1n4veap-0"})(["color:",";"],(_ref=>{let{theme}=_ref;return theme.colors.fg.secondary}));function BackgroundAudioPanel(_ref2){let{nameOverride}=_ref2;const{capabilities:{hasUploadMediaAction}}=(0,app.ZR)(),{backgroundAudio,updateStory}=(0,story.rB)((_ref3=>{let{state:{story:{backgroundAudio}},actions:{updateStory}}=_ref3;return{backgroundAudio,updateStory}})),updateBackgroundAudio=(0,src.I4)((updatedBackgroundAudio=>{updateStory({properties:{backgroundAudio:updatedBackgroundAudio}})}),[updateStory]);return backgroundAudio||hasUploadMediaAction?(0,jsx_runtime.jsxs)(panel.me,{name:nameOverride||"backgroundAudio",title:(0,i18n.__)("Background Audio","web-stories"),collapsedByDefault:!0,children:[(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsx)(HelperText,{children:(0,i18n.__)("Select an audio file that plays throughout the story.","web-stories")})}),(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsx)(backgroundAudioPanelContent.Z,{backgroundAudio,updateBackgroundAudio})})]}):null}BackgroundAudioPanel.displayName="BackgroundAudioPanel";__webpack_require__("./packages/story-editor/src/components/panels/document/taxonomies/taxonomies.js")},"./packages/story-editor/src/components/panels/shared/generalPageAdvancement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/i18n/src/sprintf.ts"),uuid__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/tracking/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/components/toggle/toggle.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/units/src/range.ts"),_googleforcreators_output__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/output/src/index.js"),_form__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/form/index.js"),_panel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/components/panels/panel/index.js"),_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const SwitchRow=styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP.div.withConfig({displayName:"generalPageAdvancement__SwitchRow",componentId:"sc-12jhjbx-0"})(["margin-bottom:16px;"]),JustifyEndRow=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_form__WEBPACK_IMPORTED_MODULE_4__.X2).withConfig({displayName:"generalPageAdvancement__JustifyEndRow",componentId:"sc-12jhjbx-1"})(["justify-content:flex-end;gap:8px;"]),MutedText=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.x.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.TextSize.Small}).withConfig({displayName:"generalPageAdvancement__MutedText",componentId:"sc-12jhjbx-2"})(["color:",";"],(_ref=>{let{theme}=_ref;return theme.colors.fg.secondary})),LabelText=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.x.Label).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.TextSize.Small}).withConfig({displayName:"generalPageAdvancement__LabelText",componentId:"sc-12jhjbx-3"})(["color:",";"],(_ref2=>{let{theme}=_ref2;return theme.colors.fg.secondary})),MIN_MAX_PAGE_DURATION={MIN:1,MAX:20};function GeneralPageAdvancementPanel(_ref3){let{pageDuration=_googleforcreators_output__WEBPACK_IMPORTED_MODULE_3__.X4,autoAdvance=_googleforcreators_output__WEBPACK_IMPORTED_MODULE_3__.S_,onUpdate,allowsOverride=!1,hasOverrideEnabled=!1,children,panelName,...rest}=_ref3;const[duration,setDuration]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(pageDuration);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.d4)((()=>{setDuration(pageDuration)}),[pageDuration]);const onAdvanceChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)(((_evt,value)=>{onUpdate({autoAdvance:value}),(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_2__.L9)("change_page_advancement",{status:value?"auto":"manual",duration})}),[onUpdate,duration]),updatePageDuration=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.y1)((value=>{const newValue=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.uZ)(value,MIN_MAX_PAGE_DURATION);value!==newValue&&setDuration(newValue),pageDuration!==newValue&&(onUpdate({pageDuration:newValue}),(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_2__.L9)("change_page_advancement",{status:autoAdvance?"auto":"manual",duration:newValue}))}),800),onDurationChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)(((_evt,newValue)=>{setDuration(newValue),updatePageDuration(newValue)}),[updatePageDuration]),onOverrideChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)((()=>onUpdate({override:!hasOverrideEnabled})),[hasOverrideEnabled,onUpdate]),customAdvancementDisabled=allowsOverride&&!hasOverrideEnabled,toggleId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>`toggle_${(0,uuid__WEBPACK_IMPORTED_MODULE_12__.Z)()}`),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_panel__WEBPACK_IMPORTED_MODULE_5__.me,{name:panelName,title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Page Advancement","web-stories"),...rest,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_form__WEBPACK_IMPORTED_MODULE_4__.X2,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MutedText,{children})}),allowsOverride&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(JustifyEndRow,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(LabelText,{htmlFor:toggleId,children:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Override Story Defaults","web-stories")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.Z,{id:toggleId,checked:hasOverrideEnabled,onChange:onOverrideChange})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(SwitchRow,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_form__WEBPACK_IMPORTED_MODULE_4__.rs,{groupLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Page Advancement","web-stories"),name:"page-advancement-switch",value:autoAdvance,onLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Auto","web-stories"),offLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Manual","web-stories"),disabled:customAdvancementDisabled,onChange:onAdvanceChange})}),autoAdvance&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_form__WEBPACK_IMPORTED_MODULE_4__.X2,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__.Z,{unit:` ${(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("seconds","web-stories")}`,suffix:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Duration","web-stories"),value:duration,onChange:onDurationChange,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Default page duration in seconds","web-stories"),min:MIN_MAX_PAGE_DURATION.MIN,max:MIN_MAX_PAGE_DURATION.MAX,disabled:customAdvancementDisabled,containerStyleOverride:_styles__WEBPACK_IMPORTED_MODULE_6__.O})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MutedText,{children:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.Z)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__._n)("Duration between %1$d and %2$d second.","Duration between %1$d and %2$d seconds.",MIN_MAX_PAGE_DURATION.MAX,"web-stories"),MIN_MAX_PAGE_DURATION.MIN,MIN_MAX_PAGE_DURATION.MAX)})]})]})}GeneralPageAdvancementPanel.displayName="GeneralPageAdvancementPanel";const __WEBPACK_DEFAULT_EXPORT__=GeneralPageAdvancementPanel},"./packages/story-editor/src/components/panels/shared/media/backgroundAudioPanelContent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>backgroundAudioPanelContent});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts"),react_src=__webpack_require__("./packages/react/src/index.ts"),src_mimeTypes=__webpack_require__("./packages/media/src/mimeTypes.ts"),preloadVideo=__webpack_require__("./packages/media/src/preloadVideo.ts"),getVideoLength=__webpack_require__("./packages/media/src/getVideoLength.ts"),v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),src=__webpack_require__("./packages/tracking/src/index.ts"),config=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),useCORSProxy=__webpack_require__("./packages/story-editor/src/utils/useCORSProxy.ts"),hotlinkModal=__webpack_require__("./packages/story-editor/src/components/hotlinkModal/index.js"),noop=__webpack_require__("./packages/story-editor/src/utils/noop.ts"),captionsPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/captionsPanelContent.js"),loopPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js"),play_filled=__webpack_require__("./packages/design-system/src/icons/play_filled.svg"),stop_filled=__webpack_require__("./packages/design-system/src/icons/stop_filled.svg"),expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Play=(0,styled_components_browser_esm.ZP)(play_filled.Z).withConfig({displayName:"audioPlayer__Play",componentId:"sc-gch3p5-0"})(["width:30px !important;height:30px !important;"]),Stop=(0,styled_components_browser_esm.ZP)(stop_filled.Z).withConfig({displayName:"audioPlayer__Stop",componentId:"sc-gch3p5-1"})(["width:30px !important;height:30px !important;"]),StyledButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"audioPlayer__StyledButton",componentId:"sc-gch3p5-2"})(["",";"],(_ref=>{let{theme}=_ref;return outline.L(theme.colors.border.focus,theme.colors.bg.secondary)})),Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"audioPlayer__Wrapper",componentId:"sc-gch3p5-3"})((_ref2=>{let{theme}=_ref2;return(0,styled_components_browser_esm.iv)(["color:",";",";"],theme.colors.fg.primary,expandPresetStyles._({preset:{...theme.typography.presets.paragraph[types.TextSize.Small]},theme}))})),Audio=styled_components_browser_esm.ZP.audio.withConfig({displayName:"audioPlayer__Audio",componentId:"sc-gch3p5-4"})(["display:none;"]);function AudioPlayer(_ref3){let{src,mimeType,tracks=[],audioId,loop,playerRef}=_ref3;const[isPlaying,setIsPlaying]=(0,react_src.eJ)(!1),{getProxiedUrl}=(0,useCORSProxy.Z)(),handlePlayPause=(0,react_src.I4)((()=>{const player=playerRef.current;player&&(isPlaying?player.pause():player.play().catch(noop.Z))}),[isPlaying,playerRef]);(0,react_src.d4)((()=>{const player=playerRef.current;if(!player)return;const onAudioPlay=()=>setIsPlaying(!0),onAudioPause=()=>setIsPlaying(!1),onAudioEnd=()=>{player.currentTime=0,setIsPlaying(!1)};return player.addEventListener("play",onAudioPlay),player.addEventListener("pause",onAudioPause),player.addEventListener("ended",onAudioEnd),()=>{player.removeEventListener("play",onAudioPlay),player.removeEventListener("pause",onAudioPause),player.removeEventListener("ended",onAudioEnd)}}),[playerRef]);const buttonTitle=isPlaying?(0,i18n.__)("Pause","web-stories"):(0,i18n.__)("Play","web-stories"),tracksFormatted=tracks.map((track=>{const trackSrc=getProxiedUrl(track,track?.track);return{...track,track:trackSrc}}));return(0,jsx_runtime.jsxs)(Wrapper,{children:[(0,jsx_runtime.jsxs)(Audio,{crossOrigin:"anonymous",loop,ref:playerRef,id:audioId,children:[(0,jsx_runtime.jsx)("source",{src,type:mimeType}),tracksFormatted&&tracksFormatted.map(((_ref4,i)=>{let{srclang,label,track:trackSrc,id:key}=_ref4;return(0,jsx_runtime.jsx)("track",{srcLang:srclang,label,kind:"metadata",src:trackSrc,default:0===i},key)}))]}),(0,jsx_runtime.jsx)(tooltip.Z,{hasTail:!0,title:buttonTitle,popupZIndexOverride:zIndex.ZT,children:(0,jsx_runtime.jsx)(StyledButton,{type:constants.L$.Tertiary,size:constants.qE.Small,variant:constants.Wu.Square,"aria-label":buttonTitle,onClick:handlePlayPause,children:isPlaying?(0,jsx_runtime.jsx)(Stop,{}):(0,jsx_runtime.jsx)(Play,{})})})]})}AudioPlayer.displayName="AudioPlayer";const audioPlayer=AudioPlayer;var fileRow=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/fileRow.js");const backgroundAudioPanelContent_StyledButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"backgroundAudioPanelContent__StyledButton",componentId:"sc-t2iem8-0"})(["",";"],(_ref=>{let{theme}=_ref;return outline.L(theme.colors.border.focus,theme.colors.bg.secondary)})),UploadButton=(0,styled_components_browser_esm.ZP)(backgroundAudioPanelContent_StyledButton).withConfig({displayName:"backgroundAudioPanelContent__UploadButton",componentId:"sc-t2iem8-1"})(["padding:12px 8px;"]),ButtonRow=(0,styled_components_browser_esm.ZP)(components_form.X2).withConfig({displayName:"backgroundAudioPanelContent__ButtonRow",componentId:"sc-t2iem8-2"})(["gap:12px;"]),SectionHeading=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).attrs({size:types.TextSize.Small}).withConfig({displayName:"backgroundAudioPanelContent__SectionHeading",componentId:"sc-t2iem8-3"})(["font-weight:bold;margin-bottom:12px;"]);const backgroundAudioPanelContent=function BackgroundAudioPanelContent(_ref2){let{backgroundAudio,updateBackgroundAudio,showCaptions=!1,showLoopControl=!1,audioId}=_ref2;const{allowedMimeTypes:{audio:allowedAudioMimeTypes},capabilities:{hasUploadMediaAction},MediaUpload}=(0,config.ZR)(),[isOpen,setIsOpen]=(0,react_src.eJ)(!1),{getProxiedUrl}=(0,useCORSProxy.Z)(),allowedAudioFileTypes=(0,react_src.Ye)((()=>allowedAudioMimeTypes.map((type=>(0,src_mimeTypes.E)(type))).flat()),[allowedAudioMimeTypes]),{resource={},tracks=[],loop=!0}=backgroundAudio||{},playerRef=(0,react_src.sO)(),audioSrcProxied=getProxiedUrl(resource,resource?.src),onSelectErrorMessage=(0,sprintf.Z)((0,i18n.__)("Please choose only %s to insert into page.","web-stories"),(0,translateToExclusiveList.Z)(allowedAudioFileTypes)),onSelect=(0,react_src.I4)((_ref3=>{let{src,id,mimeType,needsProxy,length,lengthFormatted}=_ref3;const updatedBackgroundAudio={resource:{src,id,mimeType,length,lengthFormatted,needsProxy}};showCaptions&&(updatedBackgroundAudio.tracks=[]),showLoopControl&&(updatedBackgroundAudio.loop=!0),updateBackgroundAudio(updatedBackgroundAudio)}),[showCaptions,showLoopControl,updateBackgroundAudio]),onSelectHotlink=(0,react_src.I4)((async _ref4=>{let{link,hotlinkInfo,needsProxy}=_ref4;const{mimeType}=hotlinkInfo,audioProxied=getProxiedUrl({needsProxy},link),videoEl=await(0,preloadVideo.Z)(audioProxied),{length,lengthFormatted}=(0,getVideoLength.Z)(videoEl);onSelect({src:link,mimeType,length,lengthFormatted,needsProxy}),setIsOpen(!1),(0,src.L9)("hotlink_audio",{event_label:link,file_size:hotlinkInfo.fileSize,file_type:hotlinkInfo.mimeType,needs_proxy:needsProxy}),setIsOpen(!1)}),[getProxiedUrl,onSelect]),onError=(0,react_src.I4)((err=>(0,src.tz)("hotlink_audio",err?.message)),[]),updateTracks=(0,react_src.I4)((newTracks=>{updateBackgroundAudio({...backgroundAudio,tracks:newTracks})}),[backgroundAudio,updateBackgroundAudio]),onChangeLoop=(0,react_src.I4)((evt=>{updateBackgroundAudio({...backgroundAudio,loop:evt.target.checked})}),[backgroundAudio,updateBackgroundAudio]),handleRemoveTrack=(0,react_src.I4)((idToDelete=>{let newTracks=[];if(idToDelete){const trackIndex=tracks.findIndex((_ref5=>{let{id}=_ref5;return id===idToDelete}));newTracks=[...tracks.slice(0,trackIndex),...tracks.slice(trackIndex+1)]}updateTracks(newTracks)}),[tracks,updateTracks]),handleChangeTrack=(0,react_src.I4)((_ref6=>{let{src="",id,needsProxy=!1}=_ref6;const newTrack={track:src,trackId:id,id:(0,v4.Z)(),kind:"captions",srclang:"",label:"",needsProxy};updateTracks([newTrack])}),[updateTracks]),renderUploadButton=(0,react_src.I4)((open=>(0,jsx_runtime.jsx)(UploadButton,{onClick:open,type:constants.L$.Secondary,size:constants.qE.Small,variant:constants.Wu.Rectangle,children:(0,i18n.__)("Upload an audio file","web-stories")})),[]),renderUploadCaptionButton=(0,react_src.I4)((open=>(0,jsx_runtime.jsx)(UploadButton,{onClick:open,type:constants.L$.Secondary,size:constants.qE.Small,variant:constants.Wu.Rectangle,children:(0,i18n.__)("Upload audio captions","web-stories")})),[]),handleRemove=(0,react_src.I4)((()=>{playerRef.current&&playerRef.current.pause(),updateBackgroundAudio(null)}),[updateBackgroundAudio,playerRef]),options=[hasUploadMediaAction&&{label:(0,i18n.__)("Upload a file","web-stories"),value:"upload",onClick:noop.Z,mediaPickerProps:{onSelect,onSelectErrorMessage:(0,i18n.__)("Please choose a VTT file to use as caption.","web-stories"),type:allowedAudioMimeTypes,title:(0,i18n.__)("Upload an audio file","web-stories"),buttonInsertText:(0,i18n.__)("Select audio file","web-stories")}},{label:(0,i18n.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{setIsOpen(!0)}}].filter(Boolean);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!resource?.src&&(0,jsx_runtime.jsxs)(ButtonRow,{spaceBetween:!1,children:[hasUploadMediaAction&&(0,jsx_runtime.jsx)(MediaUpload,{onSelect,onSelectErrorMessage,type:allowedAudioMimeTypes,title:(0,i18n.__)("Upload an audio file","web-stories"),buttonInsertText:(0,i18n.__)("Select audio file","web-stories"),render:renderUploadButton}),(0,jsx_runtime.jsx)(UploadButton,{variant:constants.Wu.Rectangle,type:constants.L$.Secondary,size:constants.qE.Small,onClick:()=>setIsOpen(!0),children:(0,i18n.__)("Link to audio file","web-stories")})]}),resource?.src&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(fileRow.Z,{id:resource.id,src:resource.src,title:resource.src.split("/").pop(),isExternal:!resource.id,options,onRemove:handleRemove,removeItemLabel:(0,i18n.__)("Remove file","web-stories"),children:(0,jsx_runtime.jsx)(audioPlayer,{title:resource.src.substring(resource?.src.lastIndexOf("/")+1),src:audioSrcProxied,mimeType:resource.mimeType,tracks,audioId,playerRef,loop})}),showCaptions&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SectionHeading,{children:(0,i18n.__)("Caption and Subtitles","web-stories")}),(0,jsx_runtime.jsx)(captionsPanelContent.Z,{captionText:(0,i18n.__)("Upload a file","web-stories"),tracks:tracks||[],handleChangeTrack,handleRemoveTrack,renderUploadButton:renderUploadCaptionButton})]}),showLoopControl&&resource?.length>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SectionHeading,{children:(0,i18n.__)("Options","web-stories")}),(0,jsx_runtime.jsx)(components_form.X2,{spaceBetween:!1,children:(0,jsx_runtime.jsx)(loopPanelContent.Z,{loop,onChange:onChangeLoop})})]})]}),(0,jsx_runtime.jsx)(hotlinkModal.Z,{title:(0,i18n.__)("Insert external background audio","web-stories"),isOpen,onError,onSelect:onSelectHotlink,onClose:()=>setIsOpen(!1),allowedFileTypes:allowedAudioFileTypes,insertText:(0,i18n.__)("Use audio file","web-stories"),insertingText:(0,i18n.__)("Selecting audio file","web-stories"),canUseProxy:!showCaptions&&!showLoopControl})]})}},"./packages/story-editor/src/components/panels/shared/media/captionsPanelContent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");var styled_components__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./packages/media/src/mimeTypes.ts"),_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/tracking/src/index.ts"),_form__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/components/form/index.js"),_app_config__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),_constants__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),_hotlinkModal__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/story-editor/src/components/hotlinkModal/index.js"),_utils_noop__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./packages/story-editor/src/utils/noop.ts"),_fileRow__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/fileRow.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ButtonRow=(0,styled_components__WEBPACK_IMPORTED_MODULE_12__.ZP)(_form__WEBPACK_IMPORTED_MODULE_6__.X2).withConfig({displayName:"captionsPanelContent__ButtonRow",componentId:"sc-nb4jvi-0"})(["gap:12px;"]),FileName=(0,styled_components__WEBPACK_IMPORTED_MODULE_12__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.x.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.TextSize.Small}).withConfig({displayName:"captionsPanelContent__FileName",componentId:"sc-nb4jvi-1"})(["color:",";"],(_ref=>{let{theme}=_ref;return theme.colors.fg.primary})),HotlinkButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_12__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__.z).withConfig({displayName:"captionsPanelContent__HotlinkButton",componentId:"sc-nb4jvi-2"})(["padding:12px 8px;"]);const __WEBPACK_DEFAULT_EXPORT__=function CaptionsPanelContent(_ref2){let{isIndeterminate=!1,tracks=[],captionText=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Upload a file","web-stories"),handleChangeTrack,handleRemoveTrack,renderUploadButton,removeItemLabel=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Remove file","web-stories")}=_ref2;const{allowedMimeTypes:{caption:allowedCaptionMimeTypes=[]},capabilities:{hasUploadMediaAction},MediaUpload}=(0,_app_config__WEBPACK_IMPORTED_MODULE_7__.ZR)(),[isOpen,setIsOpen]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.eJ)(!1),allowedFileTypes=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>allowedCaptionMimeTypes.map((type=>(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_17__.E)(type))).flat()),[allowedCaptionMimeTypes]),onSelect=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((_ref3=>{let{link,hotlinkInfo,needsProxy}=_ref3;handleChangeTrack({src:link,needsProxy}),(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_5__.L9)("hotlink_caption",{event_label:link,file_size:hotlinkInfo.fileSize,file_type:hotlinkInfo.mimeType,needs_proxy:needsProxy}),setIsOpen(!1)}),[handleChangeTrack]),onError=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((err=>(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_5__.tz)("hotlink_caption",err?.message)),[]);if(!allowedCaptionMimeTypes?.length)return null;const options=[hasUploadMediaAction&&{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Upload a file","web-stories"),value:"upload",onClick:_utils_noop__WEBPACK_IMPORTED_MODULE_18__.Z,mediaPickerProps:{onSelect:handleChangeTrack,onSelectErrorMessage:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Please choose a VTT file to use as caption.","web-stories"),type:allowedCaptionMimeTypes,title:captionText,buttonInsertText:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Select caption","web-stories")}},{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Link to a file","web-stories"),value:"hotlink",onClick:()=>{setIsOpen(!0)}}].filter(Boolean);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[isIndeterminate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_form__WEBPACK_IMPORTED_MODULE_6__.X2,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(FileName,{children:_constants__WEBPACK_IMPORTED_MODULE_8__.nz})}),tracks.map((track=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_fileRow__WEBPACK_IMPORTED_MODULE_10__.Z,{id:track.id,src:track.track,title:track.track.split("/").pop(),isExternal:!track.trackId,options,onRemove:handleRemoveTrack,removeItemLabel},track.id))),!tracks.length&&!isIndeterminate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(ButtonRow,{spaceBetween:!1,children:[hasUploadMediaAction&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(MediaUpload,{onSelect:handleChangeTrack,onSelectErrorMessage:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Please choose a VTT file to use as caption.","web-stories"),type:allowedCaptionMimeTypes,title:captionText,buttonInsertText:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Select caption","web-stories"),render:renderUploadButton}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(HotlinkButton,{variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__.Wu.Rectangle,type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__.L$.Secondary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__.qE.Small,onClick:()=>setIsOpen(!0),children:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Link to caption file","web-stories")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_hotlinkModal__WEBPACK_IMPORTED_MODULE_9__.Z,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Insert external captions","web-stories"),isOpen,onSelect,onError,onClose:()=>setIsOpen(!1),allowedFileTypes,insertText:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Use caption","web-stories"),insertingText:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_16__.__)("Selecting caption","web-stories"),canUseProxy:!1})]})}},"./packages/story-editor/src/components/panels/shared/media/dropDownMenu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/i18n/src/i18n.ts"),uuid__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/icons/checkmark_small.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/menu/list/components.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/design-system/src/utils/noop.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/components/popup/popup.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/design-system/src/components/menu/menu.tsx"),_app__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/app/index.js"),_utils_dropDownKeyEvents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/utils/dropDownKeyEvents.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MenuButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.z).withConfig({displayName:"dropDownMenu__MenuButton",componentId:"sc-160pl0l-0"})(["top:4px;right:4px;"]),DropDownContainer=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-160pl0l-1"})(["margin-top:10px;"]),MenuContainer=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-160pl0l-2"})(["z-index:1;"]),menuStylesOverride=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.iv)(["min-width:160px;margin-top:0;"]),ActiveIcon=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Z).withConfig({displayName:"dropDownMenu__ActiveIcon",componentId:"sc-160pl0l-3"})(["position:absolute;left:4px;top:50%;transform:translateY(-50%);"]),CustomItemRenderer=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)((function CustomItemRenderer(_ref,ref){let{option,isSelected,...rest}=_ref;const{MediaUpload}=(0,_app__WEBPACK_IMPORTED_MODULE_2__.ZR)();return option.mediaPickerProps?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(MediaUpload,{...option.mediaPickerProps,render:open=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.HC,{...rest,ref,isSelected,disabled:option.disabled,"aria-disabled":option.disabled,onClick:evt=>{rest.onClick?.(evt),open(evt)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Ft,{size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.TextSize.Small,children:option.label})})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.HC,{...rest,ref,isSelected,disabled:option.disabled,"aria-disabled":option.disabled,children:[isSelected&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(ActiveIcon,{"data-testid":"dropdownMenuItem_active_icon","aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Selected","web-stories"),width:32,height:32}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Ft,{size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.TextSize.Small,children:option.label})]})}));function DropDownMenu(_ref2){let{display,isMenuOpen,onMenuOpen,onMenuClose,onMenuSelected,setParentActive=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__.Z,groups,children,ariaLabel=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("More","web-stories"),className,...rest}=_ref2;const MenuButtonRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.sO)(),onClose=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)((()=>{onMenuClose(),MenuButtonRef.current?.focus(),setParentActive()}),[onMenuClose,setParentActive]),listId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>`list-${(0,uuid__WEBPACK_IMPORTED_MODULE_12__.Z)()}`),[]),buttonId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>`button-${(0,uuid__WEBPACK_IMPORTED_MODULE_12__.Z)()}`),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(MenuContainer,{className,children:[MenuButtonRef.current&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_utils_dropDownKeyEvents__WEBPACK_IMPORTED_MODULE_3__.Z,{target:MenuButtonRef.current}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(MenuButton,{type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.L$.Tertiary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.qE.Small,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Wu.Square,ref:MenuButtonRef,onClick:onMenuOpen,"aria-label":ariaLabel,"aria-pressed":isMenuOpen,"aria-haspopup":!0,"aria-expanded":isMenuOpen,"aria-owns":isMenuOpen?listId:null,id:buttonId,$display:display,tabIndex:display||isMenuOpen?0:-1,children}),(display||isMenuOpen)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.Z,{anchor:MenuButtonRef,placement:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__.ug.BottomStart,isOpen:isMenuOpen,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(DropDownContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_16__.Z,{parentId:buttonId,listId,handleMenuItemSelect:(evt,value)=>{onMenuSelected(value)},groups,onDismissMenu:onClose,hasMenuRole:!0,menuStylesOverride,renderItem:CustomItemRenderer,...rest})})})]})}DropDownMenu.displayName="DropDownMenu";const __WEBPACK_DEFAULT_EXPORT__=DropDownMenu},"./packages/story-editor/src/components/panels/shared/media/fileRow.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js");var styled_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/icons/rotate.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/icons/link.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/design-system/src/icons/arrow_outline.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./packages/design-system/src/icons/trash.svg"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./packages/i18n/src/i18n.ts"),_form__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/form/index.js"),_tooltip__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_dropDownMenu__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/dropDownMenu.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InputRow=styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP.div.withConfig({displayName:"fileRow__InputRow",componentId:"sc-w8gml-0"})(["flex-grow:1;margin:0 8px;min-width:0;"]),ReplaceIcon=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.Z).withConfig({displayName:"fileRow__ReplaceIcon",componentId:"sc-w8gml-1"})(["vertical-align:bottom;"]),LinkIcon=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.Z).withConfig({displayName:"fileRow__LinkIcon",componentId:"sc-w8gml-2"})(["width:24px;height:24px;vertical-align:bottom;"]),UploadIcon=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__.Z).withConfig({displayName:"fileRow__UploadIcon",componentId:"sc-w8gml-3"})(["width:24px;height:24px;vertical-align:bottom;"]),Link=styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP.a.withConfig({displayName:"fileRow__Link",componentId:"sc-w8gml-4"})(["",";"],(_ref=>{let{theme}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.iv)(["color:",";text-decoration:none;cursor:pointer;:hover,:active,:focus{text-decoration:underline;color:"," !important;}",""],theme.colors.fg.primary,theme.colors.fg.primary,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.L(theme.colors.border.focus))})),StyledButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.z).withConfig({displayName:"fileRow__StyledButton",componentId:"sc-w8gml-5"})(["",";"],(_ref2=>{let{theme}=_ref2;return _googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.L(theme.colors.border.focus,theme.colors.bg.secondary)})),FileName=(0,styled_components__WEBPACK_IMPORTED_MODULE_8__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.x.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_15__.TextSize.Small}).withConfig({displayName:"fileRow__FileName",componentId:"sc-w8gml-6"})(["color:",";text-overflow:ellipsis;overflow:hidden;"],(_ref3=>{let{theme}=_ref3;return theme.colors.fg.primary}));function FileRow(_ref4){let{id,isExternal,src,title,options,removeItemLabel,onRemove,children}=_ref4;const groups=[{options}],[isMenuOpen,setIsMenuOpen]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.eJ)(!1),speak=(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_16__.Z)(),onMenuSelected=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.I4)((value=>{setIsMenuOpen(!1),options.find((item=>item.value===value))?.onClick()}),[options]),onItemRemove=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.I4)((()=>{onRemove(id),speak((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__.__)("File removed","web-stories"))}),[id,onRemove,speak]),label=isExternal?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__.__)("External file","web-stories"):(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__.__)("Local file","web-stories");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_form__WEBPACK_IMPORTED_MODULE_4__.X2,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{title:label,children:isExternal?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(LinkIcon,{title:label}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(UploadIcon,{title:label})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(InputRow,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(FileName,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Link,{href:src,rel:"noreferrer",target:"_blank",children:title})})}),children,options.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_dropDownMenu__WEBPACK_IMPORTED_MODULE_6__.Z,{onMenuOpen:()=>setIsMenuOpen(!0),isMenuOpen,onMenuSelected,display:!0,onMenuClose:()=>setIsMenuOpen(!1),groups,ariaLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__.__)("Replace file","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_17__.__)("Replace","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(ReplaceIcon,{})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_5__.Z,{hasTail:!0,title:removeItemLabel,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(StyledButton,{"aria-label":removeItemLabel,type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_18__.L$.Tertiary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_18__.qE.Small,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_18__.Wu.Square,onClick:onItemRemove,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_19__.Z,{})})})]},`row-filename-${id}`)}FileRow.displayName="FileRow";const __WEBPACK_DEFAULT_EXPORT__=FileRow},"./packages/story-editor/src/components/panels/utils/dropDownKeyEvents.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>DropDownKeyEvents});var prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),_canvas_useFocusCanvas__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/canvas/useFocusCanvas.ts"),_utils_useRovingTabIndex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/utils/useRovingTabIndex/index.js");const BUTTON_NESTING_DEPTH=3;function DropDownKeyEvents(_ref){let{target}=_ref;(0,_utils_useRovingTabIndex__WEBPACK_IMPORTED_MODULE_1__.Z)({ref:target},[],BUTTON_NESTING_DEPTH);const focusCanvas=(0,_canvas_useFocusCanvas__WEBPACK_IMPORTED_MODULE_0__.Z)();return(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__.Ew)(target,"tab",focusCanvas,[focusCanvas]),null}DropDownKeyEvents.propTypes={target:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({current:prop_types__WEBPACK_IMPORTED_MODULE_3___default().instanceOf(Element)})}},"./packages/story-editor/src/components/publishModal/publishModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>publishModal});__webpack_require__("./node_modules/react/index.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),theme=__webpack_require__("./packages/design-system/src/theme/theme.ts"),modal=__webpack_require__("./packages/design-system/src/components/modal/modal.tsx"),src=__webpack_require__("./packages/tracking/src/index.ts"),react_src=__webpack_require__("./packages/react/src/index.ts"),checklist=__webpack_require__("./packages/story-editor/src/components/checklist/index.js"),directionAware=__webpack_require__("./packages/story-editor/src/components/directionAware/index.js"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),cross=__webpack_require__("./packages/design-system/src/icons/cross.svg"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts");const INPUT_KEYS_EXCERPT="excerpt",INPUT_KEYS_TITLE="title";var buttonWithChecklistWarning=__webpack_require__("./packages/story-editor/src/components/header/buttons/buttonWithChecklistWarning.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const _Header=styled_components_browser_esm.ZP.header.withConfig({displayName:"header___Header",componentId:"sc-yxsju1-0"})(["width:100%;height:",";display:flex;align-items:center;margin-bottom:",";background-color:",";border-top-left-radius:",";border-top-right-radius:",";"],"44px","1px",(_ref=>{let{theme}=_ref;return theme.colors.bg.secondary}),(_ref2=>{let{theme}=_ref2;return theme.borders.radius.medium}),(_ref3=>{let{theme}=_ref3;return theme.borders.radius.medium})),CloseButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"header__CloseButton",componentId:"sc-yxsju1-1"})(["margin:6px auto 5px 6px;"]),PublishButtonWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"header__PublishButtonWrapper",componentId:"sc-yxsju1-2"})(["margin:6px 6px 5px auto;"]),Header=_ref4=>{let{onClose,onPublish,publishButtonDisabled,hasFutureDate}=_ref4;return(0,jsx_runtime.jsxs)(_Header,{children:[(0,jsx_runtime.jsx)(CloseButton,{variant:constants.Wu.Square,size:constants.qE.Small,type:constants.L$.Tertiary,onClick:onClose,"aria-label":(0,i18n.__)("Close","web-stories"),children:(0,jsx_runtime.jsx)(cross.Z,{})}),(0,jsx_runtime.jsx)(headline.s,{as:"h2",size:types.TextSize.XXXSmall,children:(0,i18n.__)("Story Details","web-stories")}),(0,jsx_runtime.jsx)(PublishButtonWrapper,{children:(0,jsx_runtime.jsx)(buttonWithChecklistWarning.Z,{onClick:onPublish,disabled:publishButtonDisabled,hasFutureDate})})]})};Header.displayName="Header";const header=Header;var scrollbar=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),useSidebar=__webpack_require__("./packages/story-editor/src/components/sidebar/useSidebar.js"),textArea=__webpack_require__("./packages/design-system/src/components/textArea/textArea.tsx"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),storyUpdates=__webpack_require__("./packages/story-editor/src/utils/storyUpdates.ts"),excerpt=__webpack_require__("./packages/story-editor/src/components/panels/document/excerpt/index.js");const FormSection=styled_components_browser_esm.ZP.div.withConfig({displayName:"mainStoryInfo__FormSection",componentId:"sc-1f06m84-0"})(["padding:0 4px;&:first-of-type{margin:20px 0px 0px;}"]),_TextArea=(0,styled_components_browser_esm.ZP)(textArea.Z).withConfig({displayName:"mainStoryInfo___TextArea",componentId:"sc-1f06m84-1"})(["margin:8px 0 0;& > p{margin-bottom:-4px;}"]),mainStoryInfo=()=>{const updateStory=(0,app.rB)((_ref=>{let{actions}=_ref;return actions.updateStory})),_inputValues=(0,app.rB)((_ref2=>{let{state:{story}}=_ref2;return{[INPUT_KEYS_EXCERPT]:story.excerpt,[INPUT_KEYS_TITLE]:story.title||""}})),slug=(0,app.rB)((_ref3=>{let{state:{story:{slug}}}=_ref3;return slug})),IsolatedStatusPanel=(0,useSidebar.Z)((_ref4=>{let{data}=_ref4;return data?.modalSidebarTab?.IsolatedStatusPanel})),[inputValues,setInputValues]=(0,react_src.eJ)(_inputValues),handleUpdateSlug=(0,react_src.I4)((newTitle=>{(0,storyUpdates.e)({currentSlug:slug,currentTitle:newTitle,updateStory})}),[slug,updateStory]),handleUpdateStoryInfo=(0,react_src.I4)((_ref5=>{let{target}=_ref5;const{value,name}=target;updateStory({properties:{[name]:value}}),name===INPUT_KEYS_TITLE&&handleUpdateSlug(value)}),[handleUpdateSlug,updateStory]),onInputChange=_ref6=>{let{currentTarget}=_ref6;setInputValues((prev=>({...prev,[currentTarget.name]:currentTarget.value})))};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(FormSection,{children:[(0,jsx_runtime.jsx)(headline.s,{as:"label",size:types.TextSize.XXSmall,htmlFor:"story-title",children:(0,i18n.__)("Story Title","web-stories")}),(0,jsx_runtime.jsx)(_TextArea,{name:INPUT_KEYS_TITLE,id:"story-title",showCount:!0,value:inputValues[INPUT_KEYS_TITLE],onChange:onInputChange,onBlur:handleUpdateStoryInfo,"aria-label":(0,i18n.__)("Story Title","web-stories"),placeholder:(0,i18n.__)("Add title","web-stories")})]}),(0,jsx_runtime.jsxs)(FormSection,{children:[(0,jsx_runtime.jsx)(headline.s,{as:"label",size:types.TextSize.XXSmall,htmlFor:"story-excerpt",children:(0,i18n.__)("Story Description","web-stories")}),(0,jsx_runtime.jsx)(_TextArea,{name:INPUT_KEYS_EXCERPT,id:"story-excerpt",showCount:!0,maxLength:excerpt.r,value:inputValues[INPUT_KEYS_EXCERPT],"aria-label":(0,i18n.__)("Story Description","web-stories"),placeholder:(0,i18n.__)("Write a description of the story","web-stories"),hint:(0,i18n.__)("Stories with a description tend to do better on search and have a wider reach","web-stories"),onChange:onInputChange,onBlur:handleUpdateStoryInfo})]}),IsolatedStatusPanel&&(0,jsx_runtime.jsx)(IsolatedStatusPanel,{})]})};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),mediaInput_types=__webpack_require__("./packages/design-system/src/components/mediaInput/types.ts"),src_constants=__webpack_require__("./packages/units/src/constants.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts"),src_mimeTypes=__webpack_require__("./packages/media/src/mimeTypes.ts"),story_editor_src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js");const PreviewWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__PreviewWrapper",componentId:"sc-zk17py-0"})(["width:","px;height:","px;position:relative;margin-top:8px;"],(_ref=>{let{width}=_ref;return width}),(_ref2=>{let{height}=_ref2;return height}));PreviewWrapper.propTypes={width:prop_types_default().number.isRequired,height:prop_types_default().number.isRequired};const PreviewContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__PreviewContainer",componentId:"sc-zk17py-1"})(["width:","px;height:","px;position:absolute;"],(_ref3=>{let{width}=_ref3;return width}),(_ref4=>{let{height}=_ref4;return height}));PreviewContainer.propTypes={width:prop_types_default().number.isRequired,height:prop_types_default().number.isRequired};const Image=styled_components_browser_esm.ZP.img.withConfig({displayName:"storyPreview__Image",componentId:"sc-zk17py-2"})(["height:100%;width:100%;display:block;aspect-ratio:",";object-fit:cover;border-radius:",";background:",";"],src_constants.O1,(_ref5=>{let{theme}=_ref5;return theme.borders.radius.medium}),(_ref6=>{let{theme}=_ref6;return theme.colors.interactiveBg.primaryNormal})),EmptyPlaceholder=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__EmptyPlaceholder",componentId:"sc-zk17py-3"})(["height:100%;border-radius:",";background:",";"],(_ref7=>{let{theme}=_ref7;return theme.borders.radius.medium}),(_ref8=>{let{theme}=_ref8;return theme.colors.interactiveBg.primaryNormal})),Gradient=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__Gradient",componentId:"sc-zk17py-4"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(_ref9=>{let{theme}=_ref9;return theme.borders.radius.medium}),(_ref10=>{let{theme}=_ref10;return theme.colors.gradient.posterOverlay})),ScrimWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__ScrimWrapper",componentId:"sc-zk17py-5"})(["position:absolute;top:0;box-sizing:border-box;width:100%;height:100%;border-radius:",";background:",";padding:8px;"],(_ref11=>{let{theme}=_ref11;return theme.borders.radius.medium}),(_ref12=>{let{theme}=_ref12;return theme.colors.opacity.black3})),ScrimContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__ScrimContainer",componentId:"sc-zk17py-6"})(["display:flex;height:100%;width:100%;flex-wrap:wrap;justify-content:space-between;"]),ScrimTop=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__ScrimTop",componentId:"sc-zk17py-7"})(["display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;grid-template-areas:'publisherLogo editButton';justify-content:inherit;width:100%;"]),PublisherLogo=styled_components_browser_esm.ZP.img.withConfig({displayName:"storyPreview__PublisherLogo",componentId:"sc-zk17py-8"})(["grid-area:publisherLogo;height:24px;width:24px;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.08);"]),StyledMedia=(0,styled_components_browser_esm.ZP)(components_form.pU).withConfig({displayName:"storyPreview__StyledMedia",componentId:"sc-zk17py-9"})(["grid-area:editButton;display:flex;flex-direction:row-reverse;"]),ScrimBottom=styled_components_browser_esm.ZP.div.withConfig({displayName:"storyPreview__ScrimBottom",componentId:"sc-zk17py-10"})(["width:100%;margin:auto 0 0;align-self:flex-end;"]),Title=(0,styled_components_browser_esm.ZP)(headline.s).attrs({as:"h3",size:types.TextSize.XSmall}).withConfig({displayName:"storyPreview__Title",componentId:"sc-zk17py-11"})(["max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;padding:0;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;color:",";"],(_ref13=>{let{theme}=_ref13;return theme.colors.fg.primary})),Publisher=(0,styled_components_browser_esm.ZP)(typography_text.x.Span).attrs({size:types.TextSize.Medium}).withConfig({displayName:"storyPreview__Publisher",componentId:"sc-zk17py-12"})(["display:block;margin:0;padding:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(_ref14=>{let{theme}=_ref14;return theme.colors.fg.secondary})),storyPreview=()=>{const{title,featuredMedia,publisherLogo,updateStory}=(0,app.rB)((_ref15=>{let{state:{story},actions}=_ref15;return{title:story?.title,featuredMedia:story?.featuredMedia||{},publisherLogo:story?.publisherLogo||{},updateStory:actions.updateStory}})),{allowedImageMimeTypes,hasUploadMediaAction,publisher}=(0,app.ZR)((_ref16=>{let{allowedMimeTypes,capabilities,metadata}=_ref16;return{allowedImageMimeTypes:allowedMimeTypes?.image||story_editor_src_constants.Qw,hasUploadMediaAction:capabilities?.hasUploadMediaAction,publisher:metadata?.publisher}})),allowedImageFileTypes=(0,react_src.Ye)((()=>allowedImageMimeTypes.map((type=>(0,src_mimeTypes.E)(type))).flat()),[allowedImageMimeTypes]),mediaHeight=Math.round(232/src_constants.O1),handleChangePoster=(0,react_src.I4)((newPoster=>updateStory({properties:{featuredMedia:{id:newPoster.id,url:newPoster.src,height:newPoster.height,width:newPoster.width,isExternal:newPoster.isExternal,needsProxy:newPoster.needsProxy}}})),[updateStory]);let posterErrorMessage=(0,i18n.__)("No file types are currently supported.","web-stories");allowedImageFileTypes.length&&(posterErrorMessage=(0,sprintf.Z)((0,i18n.__)("Please choose only %s as a poster.","web-stories"),(0,translateToExclusiveList.Z)(allowedImageFileTypes)));const menuOptions=[hasUploadMediaAction&&"upload","hotlink"].filter(Boolean);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(headline.s,{as:"label",size:types.TextSize.XXSmall,children:(0,i18n.__)("Cover Preview","web-stories")}),(0,jsx_runtime.jsx)(PreviewWrapper,{width:232,height:mediaHeight,children:(0,jsx_runtime.jsxs)(PreviewContainer,{width:232,height:mediaHeight,children:[featuredMedia?.url?(0,jsx_runtime.jsx)(Image,{crossOrigin:"anonymous",decoding:"async",src:featuredMedia.url,width:featuredMedia.width,height:featuredMedia.height,alt:(0,i18n.__)("Preview image","web-stories"),"data-testid":"story_preview_featured_media"}):(0,jsx_runtime.jsx)(EmptyPlaceholder,{}),(0,jsx_runtime.jsx)(Gradient,{}),(0,jsx_runtime.jsx)(ScrimWrapper,{children:(0,jsx_runtime.jsxs)(ScrimContainer,{children:[(0,jsx_runtime.jsxs)(ScrimTop,{children:[publisherLogo?.url?.length>0&&(0,jsx_runtime.jsx)(PublisherLogo,{crossOrigin:"anonymous",decoding:"async",width:publisherLogo.width,height:publisherLogo.height,src:publisherLogo.url,alt:(0,i18n.__)("Publisher Logo","web-stories")}),(0,jsx_runtime.jsx)(StyledMedia,{onChange:handleChangePoster,title:(0,i18n.__)("Select as poster image","web-stories"),hotlinkTitle:(0,i18n.__)("Use external image as poster image","web-stories"),hotlinkInsertText:(0,i18n.__)("Use image as poster image","web-stories"),hotlinkInsertingText:(0,i18n.__)("Using image as poster image","web-stories"),buttonInsertText:(0,i18n.__)("Select as poster image","web-stories"),type:allowedImageMimeTypes,ariaLabel:(0,i18n.__)("Poster image","web-stories"),onChangeErrorText:posterErrorMessage,imgProps:featuredMedia,variant:mediaInput_types.Y.None,menuOptions,cropParams:{width:640,height:853}})]}),(0,jsx_runtime.jsxs)(ScrimBottom,{children:[title&&(0,jsx_runtime.jsx)(Title,{children:title}),publisher&&(0,jsx_runtime.jsx)(Publisher,{"data-testid":"story_preview_publisher",children:publisher})]})]})})]})})]})};var icons_checkbox=__webpack_require__("./packages/design-system/src/icons/checkbox.svg"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),checklist_constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),countContext=__webpack_require__("./packages/story-editor/src/components/checklist/countContext/index.js"),toggleButton=__webpack_require__("./packages/story-editor/src/components/toggleButton/index.js");const ChecklistButton=_ref=>{let{handleReviewChecklist}=_ref;const priorityCount=(0,countContext.q3)(checklist_constants._r.PRIORITY);return(0,jsx_runtime.jsx)(toggleButton.C,{MainIcon:icons_checkbox.Z,label:(0,i18n.__)("Checklist","web-stories"),"aria-label":(0,i18n.__)("Checklist","web-stories"),popupZIndexOverride:zIndex.ZT,onClick:handleReviewChecklist,notificationCount:priorityCount})};ChecklistButton.displayName="ChecklistButton";const checklistButton=ChecklistButton,Main=styled_components_browser_esm.ZP.div.withConfig({displayName:"content__Main",componentId:"sc-1d1lm9j-0"})(["display:grid;min-width:917px;width:100%;height:calc(100% - "," - ",");grid-template-columns:30.5% 34% 35.5%;grid-template-rows:auto;grid-template-areas:'preview mainPanel sidePanel' 'footer mainPanel sidePanel';"],"1px","44px"),_StoryPreview=styled_components_browser_esm.ZP.div.withConfig({displayName:"content___StoryPreview",componentId:"sc-1d1lm9j-1"})(["grid-area:preview;margin:20px 18px 0 32px;"]),_MainStoryInfo=styled_components_browser_esm.ZP.div.withConfig({displayName:"content___MainStoryInfo",componentId:"sc-1d1lm9j-2"})(["grid-area:mainPanel;display:flex;flex-direction:column;padding:0 16px;overflow-y:scroll;gap:34px;& > section{border:none;& > h2{padding-top:0;padding-bottom:2px;& > button{height:1em;}}}"]),PanelContainer=styled_components_browser_esm.ZP.div.attrs({role:"tabpanel"}).withConfig({displayName:"content__PanelContainer",componentId:"sc-1d1lm9j-3"})(["grid-area:sidePanel;height:100%;margin-left:18px;background-color:",";border-bottom-right-radius:",";overflow-y:scroll;",";"],(_ref=>{let{theme}=_ref;return theme.colors.bg.secondary}),(_ref2=>{let{theme}=_ref2;return theme.borders.radius.medium}),scrollbar.d),Footer=styled_components_browser_esm.ZP.div.withConfig({displayName:"content__Footer",componentId:"sc-1d1lm9j-4"})(["grid-area:footer;display:flex;align-items:flex-end;margin:0 18px 20px 32px;"]),Content=_ref3=>{let{handleReviewChecklist}=_ref3;const{DocumentPane,id:paneId}=(0,useSidebar.Z)((_ref4=>{let{data}=_ref4;return data?.modalSidebarTab||{}})),hasChecklist=(0,checklist.Y4)();return(0,jsx_runtime.jsxs)(Main,{children:[(0,jsx_runtime.jsx)(_StoryPreview,{children:(0,jsx_runtime.jsx)(storyPreview,{})}),(0,jsx_runtime.jsx)(_MainStoryInfo,{children:(0,jsx_runtime.jsx)(mainStoryInfo,{})}),DocumentPane&&(0,jsx_runtime.jsx)(PanelContainer,{"aria-label":(0,i18n.__)("Story Settings","web-stories"),id:paneId,children:(0,jsx_runtime.jsx)(DocumentPane,{})}),hasChecklist&&(0,jsx_runtime.jsx)(Footer,{children:(0,jsx_runtime.jsx)(checklistButton,{handleReviewChecklist})})]})};Content.displayName="Content";const content=Content,Container=styled_components_browser_esm.ZP.div.withConfig({displayName:"publishModal__Container",componentId:"sc-16gvo2-0"})(["height:100%;color:",";background-color:",";border:",";border-radius:",";"],theme.r.colors.fg.primary,theme.r.colors.bg.primary,`1px solid ${theme.r.colors.divider.primary}`,theme.r.borders.radius.medium);function PublishModal(_ref){let{isOpen,onPublish,onClose,publishButtonDisabled,hasFutureDate}=_ref;const openChecklist=(0,checklist.Kf)((_ref2=>{let{actions}=_ref2;return actions.handleReviewChecklist}));(0,react_src.d4)((()=>{isOpen&&(0,src.L9)("publish_modal")}),[isOpen]);const handleReviewChecklist=(0,react_src.I4)((()=>{(0,src.L9)("review_prepublish_checklist"),onClose({focusPublishButton:!1}),openChecklist()}),[onClose,openChecklist]);return(0,jsx_runtime.jsx)(modal.Z,{isOpen,onClose,contentLabel:(0,i18n.__)("Story details","web-stories"),contentStyles:{display:"block",width:"71vw",minWidth:"917px",height:"66vh",minHeight:"580px",overflow:"hidden"},overlayStyles:{backgroundColor:theme.r.colors.inverted.interactiveBg.modalScrim},children:isOpen&&(0,jsx_runtime.jsx)(directionAware.Z,{children:(0,jsx_runtime.jsxs)(Container,{children:[(0,jsx_runtime.jsx)(header,{hasFutureDate,publishButtonDisabled,onClose,onPublish}),(0,jsx_runtime.jsx)(content,{handleReviewChecklist})]})})})}PublishModal.displayName="PublishModal";const publishModal=PublishModal},"./packages/story-editor/src/utils/storyUpdates.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>updateSlug});var _cleanForSlug__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/utils/cleanForSlug.ts");const updateSlug=_ref=>{let{currentSlug,currentTitle,updateStory}=_ref;if(!currentSlug){updateStory({properties:{slug:encodeURIComponent((0,_cleanForSlug__WEBPACK_IMPORTED_MODULE_0__.Z)(currentTitle))}})}}},"./packages/story-editor/src/utils/useIsUploadingToStory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.array.push.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/react/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/app/index.js");const __WEBPACK_DEFAULT_EXPORT__=function useIsUploadingToStory(){const resourceIds=(0,_app__WEBPACK_IMPORTED_MODULE_6__.rB)((_ref=>{let{state:{pages=[]}}=_ref;return pages.reduce(((acc,curr)=>(acc.push(...curr.elements.filter((_ref2=>{let{type,isExternal}=_ref2;return["image","video","gif"].includes(type)&&!isExternal})).map((_ref3=>{let{resource}=_ref3;return resource.id}))),acc)),[])})),{isCurrentResourceUploading,isCurrentResourceProcessing}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.EF)((_ref4=>{let{state:{isCurrentResourceUploading,isCurrentResourceProcessing}}=_ref4;return{isCurrentResourceUploading,isCurrentResourceProcessing}}));return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_5__.Ye)((()=>Boolean(resourceIds?.some((resourceId=>isCurrentResourceUploading(resourceId)||isCurrentResourceProcessing(resourceId))))),[resourceIds,isCurrentResourceUploading,isCurrentResourceProcessing])}}}]);