"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[5901],{"./packages/design-system/src/components/mediaInput/mediaInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>mediaInput});var _path,_circle,react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./packages/react/src/index.ts"),v4=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),pencil=__webpack_require__("./packages/design-system/src/icons/pencil.svg"),menu=__webpack_require__("./packages/design-system/src/components/menu/menu.tsx"),tooltip=__webpack_require__("./packages/design-system/src/components/tooltip/tooltip.tsx"),popup=__webpack_require__("./packages/design-system/src/components/popup/popup.tsx"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),useForwardedRef=__webpack_require__("./packages/design-system/src/utils/useForwardedRef.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgLandscape=({title,titleId,...props})=>react.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 100 93","aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,_path||(_path=react.createElement("path",{fill:"currentColor",d:"M33 52 .5 93h99L75 60 58 82z",opacity:.2})),_circle||(_circle=react.createElement("circle",{cx:79,cy:13,r:13,fill:"currentColor",opacity:.1}))),landscape=(0,react.memo)(SvgLandscape);var types=__webpack_require__("./packages/design-system/src/components/mediaInput/types.ts");function mediaInput_extends(){return mediaInput_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},mediaInput_extends.apply(this,arguments)}const MediaRectangle=styled_components_browser_esm.Ay.section.withConfig({displayName:"mediaInput__MediaRectangle",componentId:"sc-1ky1w63-0"})(["width:100%;height:100%;background-color:",";border-radius:4px;position:relative;"],(({theme})=>theme.colors.bg.primary)),MediaCircle=(0,styled_components_browser_esm.Ay)(MediaRectangle).withConfig({displayName:"mediaInput__MediaCircle",componentId:"sc-1ky1w63-1"})(["border-radius:100px;height:100%;width:100%;"]),EmptyMediaWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaInput__EmptyMediaWrapper",componentId:"sc-1ky1w63-2"})([""]),ImageWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaInput__ImageWrapper",componentId:"sc-1ky1w63-3"})(["border-radius:","px;overflow:hidden;height:100%;display:flex;"],(({variant})=>variant===types.Q.Circle?100:4)),DefaultImageWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaInput__DefaultImageWrapper",componentId:"sc-1ky1w63-4"})(["padding:8px;"]),DefaultImage=(0,styled_components_browser_esm.Ay)(landscape).withConfig({displayName:"mediaInput__DefaultImage",componentId:"sc-1ky1w63-5"})(["width:100%;height:100%;display:block;color:",";"],(({theme})=>theme.colors.standard.white)),Img=styled_components_browser_esm.Ay.img.withConfig({displayName:"mediaInput__Img",componentId:"sc-1ky1w63-6"})(["width:100%;height:100%;object-fit:cover;"]),menuStyleOverride=(0,styled_components_browser_esm.AH)(["white-space:nowrap;margin-top:0;li{display:block;}"]),Button=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"mediaInput__Button",componentId:"sc-1ky1w63-7"})((({showImage})=>(0,styled_components_browser_esm.AH)(["background-color:",";position:relative;"," &:hover{background-color:",";}"],(({theme})=>theme.colors.interactiveBg.secondaryNormal),showImage&&(0,styled_components_browser_esm.AH)(["position:absolute;bottom:-8px;right:-8px;"]),(({theme})=>theme.colors.interactiveBg.secondaryHover)))),MediaOptions={[types.Q.Rectangle]:MediaRectangle,[types.Q.Circle]:MediaCircle,[types.Q.None]:EmptyMediaWrapper},LoadingDots=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaInput__LoadingDots",componentId:"sc-1ky1w63-8"})(["position:absolute;top:0px;left:0px;width:100%;height:100%;pointer-events:none;border-radius:50%;flex-direction:column;justify-content:center;align-items:center;display:flex;&:after{pointer-events:none;color:",";content:'.';font-weight:bold;animation:"," 1s steps(5,end) infinite;margin-left:-12px;}"],(({theme})=>theme.colors.standard.white),(({theme})=>(0,styled_components_browser_esm.i7)(["0%,20%{color:transparent;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}40%{color:white;text-shadow:6px 0 0 transparent,12px 0 0 transparent;}60%{text-shadow:6px 0 0 ",",12px 0 0 transparent;}80%,100%{text-shadow:6px 0 0 ",",12px 0 0 ",";}"],theme.colors.standard.white,theme.colors.standard.white,theme.colors.standard.white))),mediaInput=(0,src.Rf)((function MediaInput({className,onBlur,alt=(0,i18n.__)("Preview image","web-stories"),value,ariaLabel=(0,i18n.__)("Choose an image","web-stories"),variant=types.Q.Rectangle,isLoading,menuOptions=[],onMenuOption,openMediaPicker,canUpload=!0,menuProps={},imgProps={},...rest},forwardedRef){const hasMenu=menuOptions?.length>0,[isMenuOpen,setIsMenuOpen]=(0,src.J0)(!1),listId=(0,src.Kr)((()=>`list-${(0,v4.A)()}`),[]),buttonId=(0,src.Kr)((()=>`button-${(0,v4.A)()}`),[]),ref=(0,useForwardedRef.A)(forwardedRef),StyledMedia=MediaOptions[variant],groups=[{options:menuOptions}];return react.createElement(StyledMedia,{className},variant!==types.Q.None&&react.createElement(ImageWrapper,{variant},value?react.createElement(Img,{src:value,alt,crossOrigin:"anonymous",decoding:"async",width:imgProps?.width,height:imgProps?.height}):react.createElement(DefaultImageWrapper,null,react.createElement(DefaultImage,null)),isLoading&&react.createElement(LoadingDots,null)),canUpload&&react.createElement(tooltip.A,{title:hasMenu?"":(0,i18n.__)("Open media picker","web-stories")},react.createElement(Button,mediaInput_extends({ref,id:buttonId,showImage:variant!==types.Q.None,variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small,"aria-label":ariaLabel,onClick:hasMenu?()=>setIsMenuOpen(!0):openMediaPicker,"aria-owns":hasMenu?listId:void 0,"aria-pressed":isMenuOpen,"aria-expanded":isMenuOpen},rest),react.createElement(pencil.A,null))),react.createElement(popup.A,{placement:popup_constants.W.BottomEnd,anchor:ref,isOpen:isMenuOpen,zIndex:11},react.createElement(menu.A,mediaInput_extends({parentId:buttonId,listId,hasMenuRole:!0,groups,handleMenuItemSelect:(evt,val)=>{onMenuOption(evt,val),setIsMenuOpen(!1)},onDismissMenu:()=>setIsMenuOpen(!1),menuStylesOverride:menuStyleOverride},menuProps))))}))},"./packages/design-system/src/components/mediaInput/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>MediaVariant});let MediaVariant=function(MediaVariant){return MediaVariant.Circle="circle",MediaVariant.Rectangle="rectangle",MediaVariant.None="none",MediaVariant}({})},"./packages/design-system/src/components/radio/radio.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_typography__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const Container=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"radio__Container",componentId:"sc-8eeopu-0"})(["display:flex;align-items:center;min-height:","px;padding:8px 0;"],44),RadioInputContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"radio__RadioInputContainer",componentId:"sc-8eeopu-1"})(["position:relative;height:","px;width:","px;"],24,24),LabelContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"radio__LabelContainer",componentId:"sc-8eeopu-2"})(["display:flex;flex-direction:column;margin:0 12px;gap:","px;"],8),RadioBorder=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.span.withConfig({displayName:"radio__RadioBorder",componentId:"sc-8eeopu-3"})((({theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.AH)(["display:inline-block;height:","px;width:","px;border:","px solid ",";border-radius:",";pointer-events:none;transition:all 0.15s;"],24,24,1,theme.colors.border.defaultNormal,theme.borders.radius.round))),InnerButton=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.span.withConfig({displayName:"radio__InnerButton",componentId:"sc-8eeopu-4"})((({theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.AH)(["pointer-events:none;display:none;:after{content:'';position:absolute;height:","px;width:","px;top:50%;left:50%;transform:translate(-50%,-50%);background-color:",";border-radius:",";}"],16,16,theme.colors.fg.primary,theme.borders.radius.round))),HiddenInput=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.input.attrs({type:"radio"}).withConfig({displayName:"radio__HiddenInput",componentId:"sc-8eeopu-5"})(["position:absolute;height:","px;width:","px;margin:0;opacity:0;cursor:pointer;:hover ~ ","{border-color:",";}:focus{outline:none;}:focus ~ ",",&:focus-visible ~ ","{",";border-color:",";}:active ~ ","{box-shadow:0 0 0 8px ",";}:checked ~ ","{display:block;}:disabled{cursor:auto;~ ","{border-color:",";}~ ","::after{background-color:",";}}"],24,24,RadioBorder,(({theme})=>theme.colors.border.defaultHover),RadioBorder,RadioBorder,(({theme})=>_theme__WEBPACK_IMPORTED_MODULE_3__.g(theme.colors.border.focus)),(({theme})=>theme.colors.border.defaultHover),RadioBorder,(({theme})=>theme.colors.shadow.active),InnerButton,RadioBorder,(({theme})=>theme.colors.border.disable),InnerButton,(({theme})=>theme.colors.fg.disable)),Hint=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_typography__WEBPACK_IMPORTED_MODULE_4__.E.Span).withConfig({displayName:"radio__Hint",componentId:"sc-8eeopu-6"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),__WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Rf)((function Radio({className,hint,id,label,...props},ref){const inputId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>id||(0,uuid__WEBPACK_IMPORTED_MODULE_5__.A)()),[id]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,{className},react__WEBPACK_IMPORTED_MODULE_0__.createElement(RadioInputContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(HiddenInput,_extends({id:inputId,ref},props)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(RadioBorder,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(InnerButton,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(LabelContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_typography__WEBPACK_IMPORTED_MODULE_4__.E.Label,{htmlFor:inputId,size:_theme__WEBPACK_IMPORTED_MODULE_6__.$.Small},label),hint&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Hint,null,hint)))}))},"./packages/design-system/src/components/switch/switch.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/core-js/modules/esnext.array.group.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_typography__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var Value=function(Value){return Value.On="ON",Value.Off="Off",Value}(Value||{});const VisuallyHiddenRadioGroupLabel=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.p.withConfig({displayName:"switch__VisuallyHiddenRadioGroupLabel",componentId:"sc-1b94qxc-0"})(["",";"],_theme__WEBPACK_IMPORTED_MODULE_4__.Q),SlidingButton=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.span.withConfig({displayName:"switch__SlidingButton",componentId:"sc-1b94qxc-1"})(["position:absolute;display:block;top:0;left:0;width:50%;height:","px;border-radius:100px;transition:all 0.15s ease-out;z-index:0;",""],32,(({hasOffset})=>hasOffset&&"left: 50%")),SwitchContainer=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"switch__SwitchContainer",componentId:"sc-1b94qxc-2"})(["position:relative;height:","px;display:flex;flex-direction:row;justify-content:center;align-items:center;appearance:none;background:",";border-radius:100px;color:",";cursor:pointer;",";"],32,(({theme,darkTheme})=>darkTheme?theme.colors.divider.secondary:theme.colors.bg.tertiary),(({theme})=>theme.colors.fg.primary),(({disabled,theme,darkTheme})=>disabled?(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.AH)(["cursor:default;background:",";","{background-color:",";}"],theme.colors.divider.tertiary,SlidingButton,theme.colors.interactiveBg.disable):(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.AH)([":hover ","{background-color:",";}"],SlidingButton,darkTheme?theme.colors.interactiveBg.primaryHover:theme.colors.interactiveBg.brandNormal))),HiddenRadioButton=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.input.attrs({type:"radio"}).withConfig({displayName:"switch__HiddenRadioButton",componentId:"sc-1b94qxc-3"})(["position:absolute;height:0;width:0;padding:0;min-width:unset;appearance:none;border:0;box-shadow:none;margin:-1px;outline:none;overflow:hidden;opacity:0;"]),RadioButtonLabel=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay)(_typography__WEBPACK_IMPORTED_MODULE_5__.E.Label).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_6__.$.Small}).withConfig({displayName:"switch__RadioButtonLabel",componentId:"sc-1b94qxc-4"})(["display:flex;align-items:center;justify-content:center;flex:1;height:","px;width:50%;padding:0px 6px;z-index:1;color:",";background-color:",";border-radius:100px;cursor:pointer;overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap;transition:all 0.15s ease-out;"," :focus-within ~ span{",";}"],32,(({isActive,theme,darkTheme})=>isActive?darkTheme?theme.colors.inverted.fg.primary:theme.colors.fg.primary:theme.colors.fg.secondary),(({isActive,theme,darkTheme})=>isActive&&(darkTheme?theme.colors.interactiveBg.primaryNormal:theme.colors.interactiveBg.brandNormal)),(({$disabled,theme})=>$disabled&&(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.AH)(["cursor:default;color:",";"],theme.colors.fg.disable)),_theme__WEBPACK_IMPORTED_MODULE_7__.g()),Switch=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Rf)((function Switch({className,disabled,groupLabel,id,offLabel,onChange,onLabel,value=!1,darkTheme=!0,...props},ref){const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)((()=>({group:id||(0,uuid__WEBPACK_IMPORTED_MODULE_8__.A)(),offInput:(0,uuid__WEBPACK_IMPORTED_MODULE_8__.A)(),onInput:(0,uuid__WEBPACK_IMPORTED_MODULE_8__.A)()})),[id]),handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)((evt=>{onChange(evt,evt.target.value===Value.On)}),[onChange]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(SwitchContainer,{ref,className,role:"radiogroup","aria-labelledby":ids.group,"aria-disabled":disabled,disabled,darkTheme},react__WEBPACK_IMPORTED_MODULE_0__.createElement(VisuallyHiddenRadioGroupLabel,{id:ids.group},groupLabel),react__WEBPACK_IMPORTED_MODULE_0__.createElement(RadioButtonLabel,{htmlFor:ids.onInput,isActive:value,disabled,darkTheme},onLabel,react__WEBPACK_IMPORTED_MODULE_0__.createElement(HiddenRadioButton,_extends({checked:value,disabled,id:ids.onInput,onChange:handleChange,value:Value.On},props))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(RadioButtonLabel,{htmlFor:ids.offInput,isActive:!value,disabled,darkTheme},offLabel,react__WEBPACK_IMPORTED_MODULE_0__.createElement(HiddenRadioButton,_extends({checked:!value,disabled,id:ids.offInput,onChange:handleChange,value:Value.Off},props))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(SlidingButton,{hasOffset:!value}))}));Switch.displayName="Switch";const __WEBPACK_DEFAULT_EXPORT__=Switch},"./packages/design-system/src/components/textArea/textArea.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_theme_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_typography__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const Container=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"textArea__Container",componentId:"sc-1wx5wxx-0"})(["position:relative;width:100%;min-width:100px;"]),CounterText=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_typography__WEBPACK_IMPORTED_MODULE_3__.E.Span).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_4__.$.XSmall}).withConfig({displayName:"textArea__CounterText",componentId:"sc-1wx5wxx-1"})(["color:",";"],(({theme})=>theme.colors.fg.tertiary)),Label=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_typography__WEBPACK_IMPORTED_MODULE_3__.E.Label).withConfig({displayName:"textArea__Label",componentId:"sc-1wx5wxx-2"})(["margin-bottom:12px;"]),Hint=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_typography__WEBPACK_IMPORTED_MODULE_3__.E.Paragraph).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_4__.$.Small}).withConfig({displayName:"textArea__Hint",componentId:"sc-1wx5wxx-3"})(["margin-top:12px;color:",";"],(({hasError,theme})=>theme.colors.fg[hasError?"negative":"tertiary"])),InputContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"textArea__InputContainer",componentId:"sc-1wx5wxx-4"})((({focused,hasError,theme,styleOverride})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.AH)(["box-sizing:border-box;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";:focus-within{",";}",";"],theme.colors.border[hasError?"negativeNormal":"defaultNormal"],theme.borders.radius.small,focused&&!hasError&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.AH)(["border-color:",";"],theme.colors.border.defaultActive),(0,_theme_helpers__WEBPACK_IMPORTED_MODULE_5__.g)(theme.colors.border.focus),styleOverride))),StyledTextArea=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.textarea.withConfig({displayName:"textArea__StyledTextArea",componentId:"sc-1wx5wxx-5"})((({theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.AH)(["height:100%;width:100%;padding:0;background-color:inherit;border:none;outline:none;color:",";resize:none;box-shadow:none;",";",";:focus{box-shadow:none;}:disabled{color:",";border-color:",";}:active{color:",";}::placeholder{color:",";}"],theme.colors.fg.primary,_theme__WEBPACK_IMPORTED_MODULE_6__.W,_theme__WEBPACK_IMPORTED_MODULE_7__.s({preset:theme.typography.presets.paragraph[_theme__WEBPACK_IMPORTED_MODULE_4__.$.Small],theme}),theme.colors.fg.disable,theme.colors.border.disable,theme.colors.fg.primary,theme.colors.fg.tertiary))),Counter=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"textArea__Counter",componentId:"sc-1wx5wxx-6"})(["text-align:right;align-self:flex-end;span{color:",";}"],(({theme})=>theme.colors.fg.tertiary)),TextArea=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Rf)((({className,disabled,hasError,hint,id,label,onBlur,onFocus,value,showCount=!1,maxLength,isIndeterminate=!1,containerStyleOverride="",...props},ref)=>{const textAreaId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>id||(0,uuid__WEBPACK_IMPORTED_MODULE_8__.A)()),[id]),hasCounter=showCount&&"number"==typeof maxLength&&maxLength>0,[isFocused,setIsFocused]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.J0)(!1),[hasBeenSelected,setHasBeenSelected]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.J0)(!1);let displayedValue=value;return isIndeterminate&&(displayedValue=""),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,{className},label&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Label,{htmlFor:textAreaId,disabled},label),react__WEBPACK_IMPORTED_MODULE_0__.createElement(InputContainer,{focused:isFocused,hasError,styleOverride:containerStyleOverride},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledTextArea,_extends({id:textAreaId,disabled,ref:input=>{"function"==typeof ref?ref(input):ref&&(ref.current=input),input&&isFocused&&!hasBeenSelected&&(input.select(),setHasBeenSelected(!0))},onFocus:e=>{onFocus?.(e),setIsFocused(!0),setHasBeenSelected(!1)},onBlur:e=>{onBlur?.(e),setIsFocused(!1)},value:displayedValue,maxLength},props)),hasCounter&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Counter,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(CounterText,null,`${String(value).length}/${maxLength}`))),hint&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Hint,{hasError},hint))}));TextArea.displayName="TextArea";const __WEBPACK_DEFAULT_EXPORT__=TextArea},"./packages/story-editor/src/app/media/utils/getResourceFromUrl.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_media__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/media/src/getTypeFromMime.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/media/src/types/resourceType.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/media/src/preloadVideo.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/media/src/seekVideo.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/media/src/getVideoLength.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/media/src/hasVideoGotAudio.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/media/src/getImageDimensions.ts"),_googleforcreators_media__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/media/src/createResource.ts");const __WEBPACK_DEFAULT_EXPORT__=async function getResourceFromUrl(resourceLike){const{src,mimeType,width=0,height=0,isMuted,length,lengthFormatted,...rest}=resourceLike,type=(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_0__.A)(mimeType);if(![_googleforcreators_media__WEBPACK_IMPORTED_MODULE_1__.v.Image,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_1__.v.Video].includes(type))throw new Error("Invalid media type.");const hasDimensions=Boolean(width&&height),videoHasMissingMetadata=!hasDimensions||null===isMuted||null===length||null===lengthFormatted,additionalData={};if(type===_googleforcreators_media__WEBPACK_IMPORTED_MODULE_1__.v.Video&&videoHasMissingMetadata){const video=await(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_2__.A)(src);await(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_3__.A)(video),additionalData.width=video.videoWidth,additionalData.height=video.videoHeight;const videoLength=(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_4__.A)(video);additionalData.length=videoLength.length,additionalData.lengthFormatted=videoLength.lengthFormatted,additionalData.isMuted=!(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_5__.A)(video)}if(type===_googleforcreators_media__WEBPACK_IMPORTED_MODULE_1__.v.Image&&!hasDimensions){const dimensions=await(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_6__.A)(src);additionalData.width=dimensions.width,additionalData.height=dimensions.height}return(0,_googleforcreators_media__WEBPACK_IMPORTED_MODULE_7__.A)({type,width,height,isMuted,length,lengthFormatted,src,isExternal:!0,mimeType,...rest,...additionalData})}},"./packages/story-editor/src/components/directionAware/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),stylis_plugin_rtl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/stylis-plugin-rtl/dist/stylis-rtl.js"),_app__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/app/index.js");Object.defineProperty(stylis_plugin_rtl__WEBPACK_IMPORTED_MODULE_1__.Ay,"name",{value:"stylisRTLPlugin"});const withRTLPlugins=[stylis_plugin_rtl__WEBPACK_IMPORTED_MODULE_1__.Ay],withoutRTLPlugins=[];const __WEBPACK_DEFAULT_EXPORT__=function DirectionAware({children}){const{isRTL}=(0,_app__WEBPACK_IMPORTED_MODULE_2__.UK)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(styled_components__WEBPACK_IMPORTED_MODULE_3__.ID,{stylisPlugins:isRTL?withRTLPlugins:withoutRTLPlugins},children)}},"./packages/story-editor/src/components/form/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_utils_noop__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/utils/noop.ts");const __WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.q6)({isMultiple:!1,registerPresubmitHandler:_utils_noop__WEBPACK_IMPORTED_MODULE_1__.l})},"./packages/story-editor/src/components/form/filterToggle/filterToggle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_panels_shared_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const fillCss=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.AH)(["width:100%;height:100%;position:absolute;top:0;left:0;border-radius:",";"],(({theme})=>theme.borders.radius.small)),Overlay=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"filterToggle__Overlay",componentId:"sc-1xtaed1-0"})(["",";"],fillCss),Filter=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"filterToggle__Filter",componentId:"sc-1xtaed1-1"})(["",";",";"],fillCss,(({filter})=>(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.A)(filter))),Button=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.button.withConfig({displayName:"filterToggle__Button",componentId:"sc-1xtaed1-2"})((({theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.AH)(["border-radius:",";width:100%;height:48px;position:relative;display:flex;align-items:center;justify-content:space-around;box-sizing:border-box;padding:0;margin:0;background:transparent;border:none;cursor:pointer;",";img{width:100%;height:100%;border-radius:",";}","{",";}&:active > ","{box-shadow:0px 0px 0 2px ",",0px 0px 0 3px ",";}&:disabled{pointer-events:none;","{background-color:",";}}transition:background-color ",",color ",";"],theme.borders.radius.small,_panels_shared_styles__WEBPACK_IMPORTED_MODULE_3__.Y,theme.borders.radius.small,Overlay,(({isToggled})=>isToggled&&`\n        box-shadow:\n          0px 0px 0 2px ${theme.colors.bg.secondary},\n          0px 0px 0 3px ${theme.colors.fg.primary}`),Overlay,theme.colors.bg.secondary,theme.colors.fg.primary,Overlay,theme.colors.opacity.black64,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.QB,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.QB))),Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"filterToggle__Wrapper",componentId:"sc-1xtaed1-3"})(["width:60px;"]),StyledText=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.E.Span).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.$.Small}).withConfig({displayName:"filterToggle__StyledText",componentId:"sc-1xtaed1-4"})(["color:",";margin-top:8px;text-align:center;width:100%;display:block;"],(({theme})=>theme.colors.border.defaultActive));const __WEBPACK_DEFAULT_EXPORT__=function FilterToggle({isToggled,filter=null,children,label,...rest}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,_extends({},rest,{isToggled,"aria-pressed":isToggled}),children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Filter,{filter}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Overlay,null)),label&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledText,null,label))}},"./packages/story-editor/src/components/form/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q1:()=>color.A,HG:()=>filterToggle.A,Cc:()=>hierarchical,qY:()=>linkIcon,Z3:()=>form_link,$U:()=>media,c4:()=>mediaUploadButton,fI:()=>row.A,l6:()=>select_select,dO:()=>form_switch,fs:()=>form_textArea,FY:()=>makeFlatOptionTree,jm:()=>usePresubmitHandler.A});var color=__webpack_require__("./packages/story-editor/src/components/form/color/index.js"),filterToggle=__webpack_require__("./packages/story-editor/src/components/form/filterToggle/filterToggle.js"),react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.flat-map.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),src=__webpack_require__("./packages/react/src/index.ts"),src_mimeTypes=__webpack_require__("./packages/media/src/mimeTypes.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts"),types=__webpack_require__("./packages/design-system/src/components/mediaInput/types.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),mediaInput=__webpack_require__("./packages/design-system/src/components/mediaInput/mediaInput.tsx"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),hotlinkModal=__webpack_require__("./packages/story-editor/src/components/hotlinkModal/index.js"),v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),getResourceFromUrl=__webpack_require__("./packages/story-editor/src/app/media/utils/getResourceFromUrl.ts"),useCORSProxy=__webpack_require__("./packages/story-editor/src/utils/useCORSProxy.ts");const form_useHotlink=function useHotlink({onChange,type,canUseProxy}){const[isOpen,setIsOpen]=(0,src.J0)(!1),allowedFileTypes=(0,src.Kr)((()=>Array.isArray(type)?type.flatMap((_type=>(0,src_mimeTypes.n)(_type))):[]),[type]),{getProxiedUrl}=(0,useCORSProxy.A)();return{actions:{onSelect:(0,src.hb)((async({link,hotlinkInfo,needsProxy})=>{const{mimeType,fileName:originalFileName}=hotlinkInfo,proxiedUrl=needsProxy&&canUseProxy?getProxiedUrl({needsProxy},link):link,resourceLike={id:(0,v4.A)(),src:proxiedUrl,mimeType,needsProxy,alt:originalFileName,height:hotlinkInfo?.height,width:hotlinkInfo?.width},resource=await(0,getResourceFromUrl.A)(resourceLike);resource.src=link,onChange(resource),setIsOpen(!1)}),[canUseProxy,getProxiedUrl,onChange]),openHotlink:()=>setIsOpen(!0),onCloseHotlink:()=>setIsOpen(!1)},state:{allowedFileTypes,isOpen}}};function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const StyledInput=(0,styled_components_browser_esm.Ay)(mediaInput.A).withConfig({displayName:"media__StyledInput",componentId:"sc-17cx4v4-0"})(["button:focus{","}"],(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),MediaInputField=({open,openHotlink,dropdownOptions,onChange,forwardedRef,value,...rest})=>{const onMenuOption=(0,src.hb)(((evt,opt)=>{switch(opt){case"upload":open(evt);break;case"hotlink":openHotlink(evt);break;case"remove":case"reset":onChange(null)}}),[onChange,open,openHotlink]);return react.createElement(StyledInput,_extends({onMenuOption,menuOptions:dropdownOptions,openMediaPicker:open,ref:forwardedRef,value:value===constants.jW?null:value},rest))};const media=(0,src.Rf)((function MediaInput({buttonInsertText=(0,i18n.__)("Choose an image","web-stories"),hotlinkTitle=(0,i18n.__)("Use external image","web-stories"),hotlinkInsertText=(0,i18n.__)("Use image","web-stories"),hotlinkInsertingText=(0,i18n.__)("Using image","web-stories"),menuOptions=[],onChange,onChangeErrorText=(0,i18n.__)("Unable to use this file type, please select a valid image type.","web-stories"),title=(0,i18n.__)("Choose an image","web-stories"),type="image",value,cropParams,canUseProxy=!1,...rest},forwardedRef){const{MediaUpload}=(0,app.UK)(),{actions:{onSelect,openHotlink,onCloseHotlink},state:{allowedFileTypes,isOpen}}=form_useHotlink({onChange,type,canUseProxy}),renderMediaIcon=(0,src.hb)((open=>{const availableMenuOptions=[{label:(0,i18n.__)("Upload a file","web-stories"),value:"upload"},{label:(0,i18n.__)("Link to a file","web-stories"),value:"hotlink"},{label:(0,i18n.__)("Remove","web-stories"),value:"remove"},{label:(0,i18n.__)("Reset","web-stories"),value:"reset"}],dropdownOptions=value===constants.jW?[]:availableMenuOptions.filter((({value:option})=>menuOptions.includes(option)));return react.createElement(MediaInputField,_extends({open,openHotlink,onChange,dropdownOptions,forwardedRef,value},rest))}),[value,openHotlink,onChange,forwardedRef,rest,menuOptions]);return react.createElement(react.Fragment,null,react.createElement(hotlinkModal.A,{isOpen,title:hotlinkTitle,onSelect,onClose:onCloseHotlink,insertText:hotlinkInsertText,insertingText:hotlinkInsertingText,allowedFileTypes,canUseProxy,requiredImgDimensions:cropParams}),react.createElement(MediaUpload,{title,buttonInsertText,onSelect:onChange,onSelectErrorMessage:onChangeErrorText,type,cropParams,render:renderMediaIcon}))}));function linkIcon_extends(){return linkIcon_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},linkIcon_extends.apply(this,arguments)}const StyledMedia=(0,styled_components_browser_esm.Ay)(media).withConfig({displayName:"linkIcon__StyledMedia",componentId:"sc-1078kj7-0"})(["width:54px;height:54px;"]);const linkIcon=function LinkIcon({handleChange,icon,isLoading=!1,...rest}){const{allowedMimeTypes:{image:allowedImageMimeTypes},capabilities:{hasUploadMediaAction}}=(0,app.UK)(),allowedImageFileTypes=(0,src.Kr)((()=>allowedImageMimeTypes.flatMap((type=>(0,src_mimeTypes.n)(type)))),[allowedImageMimeTypes]),iconErrorMessage=(0,src.Kr)((()=>{let message=(0,i18n.__)("No image file types are currently supported.","web-stories");return allowedImageFileTypes.length&&(message=(0,sprintf.A)((0,i18n.__)("Please choose only %s as an icon.","web-stories"),(0,translateToExclusiveList.A)(allowedImageFileTypes))),message}),[allowedImageFileTypes]),options=[hasUploadMediaAction&&"upload","hotlink",icon&&"remove"].filter(Boolean);return react.createElement(StyledMedia,linkIcon_extends({value:icon||"",cropParams:{width:96,height:96},onChange:handleChange,onChangeErrorText:iconErrorMessage,title:(0,i18n.__)("Select as link icon","web-stories"),ariaLabel:(0,i18n.__)("Edit link icon","web-stories"),buttonInsertText:(0,i18n.__)("Select as link icon","web-stories"),hotlinkTitle:(0,i18n.__)("Use external image as link icon","web-stories"),hotlinkInsertText:(0,i18n.__)("Use image as link icon","web-stories"),hotlinkInsertingText:(0,i18n.__)("Using image as link icon","web-stories"),type:allowedImageMimeTypes,isLoading,variant:types.Q.Circle,canUpload:0!==options.length,menuOptions:options},rest))};var input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),url=__webpack_require__("./packages/url/src/url.ts"),styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),row=__webpack_require__("./packages/story-editor/src/components/form/row.js");function link_extends(){return link_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},link_extends.apply(this,arguments)}const MIN_MAX_URL={MIN:2,MAX:2048},form_link=(0,src.Rf)((function LinkInput({onChange,onBlur,onFocus,value="",hint,hasError,...rest},ref){const trimmedValue=(value||"").trim(),isValid=(0,url.AY)((0,url.x6)(trimmedValue)),isNotValid=trimmedValue.length>0&&!isValid;return react.createElement(row.A,null,react.createElement(input.A,link_extends({ref,placeholder:(0,i18n.__)("Web address","web-stories"),onChange:evt=>onChange(evt.target.value),onBlur:()=>{if(trimmedValue?.length){const urlWithProtocol=(0,url.x6)(trimmedValue);urlWithProtocol!==trimmedValue&&onChange(urlWithProtocol)}onBlur&&onBlur()},onFocus,value:value||"",minLength:MIN_MAX_URL.MIN,maxLength:MIN_MAX_URL.MAX,hasError:isNotValid||hasError,hint:isNotValid?(0,i18n.__)("Invalid web address.","web-stories"):hint,containerStyleOverride:styles.t,type:"url"},rest)))}));var useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),useFFmpeg=__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts"),app_media=__webpack_require__("./packages/story-editor/src/app/media/index.js");const mediaUploadButton=function MediaUploadButton({onInsert,renderButton,buttonInsertText}){const{allowedMimeTypes:{image:allowedImageMimeTypes,vector:allowedVectorMimeTypes,video:allowedVideoMimeTypes},MediaUpload}=(0,app.UK)(),allowedUploadMimeTypes=(0,src.Kr)((()=>[...allowedImageMimeTypes,...allowedVectorMimeTypes,...allowedVideoMimeTypes]),[allowedImageMimeTypes,allowedVectorMimeTypes,allowedVideoMimeTypes]),allowedFileTypes=(0,src.Kr)((()=>allowedUploadMimeTypes.flatMap((type=>(0,src_mimeTypes.n)(type)))),[allowedUploadMimeTypes]),{canTranscodeResource,resetWithFetch,postProcessingResource,optimizeVideo,optimizeGif}=(0,app.HZ)((({state:{canTranscodeResource},actions:{resetWithFetch,postProcessingResource,optimizeVideo,optimizeGif}})=>({canTranscodeResource,resetWithFetch,postProcessingResource,optimizeVideo,optimizeGif}))),{isTranscodingEnabled}=(0,useFFmpeg.A)(),{showSnackbar}=(0,useSnackbar.d)(),allowedMimeTypes=(0,src.Kr)((()=>isTranscodingEnabled?[...app_media.sX,...allowedImageMimeTypes,...allowedVectorMimeTypes,...allowedVideoMimeTypes]:[...allowedImageMimeTypes,...allowedVectorMimeTypes,...allowedVideoMimeTypes]),[allowedImageMimeTypes,allowedVectorMimeTypes,allowedVideoMimeTypes,isTranscodingEnabled]);let onSelectErrorMessage=(0,i18n.__)("No file types are currently supported.","web-stories");allowedFileTypes.length&&(onSelectErrorMessage=(0,sprintf.A)((0,i18n.__)("Please choose only %s to insert into page.","web-stories"),(0,translateToExclusiveList.A)(allowedFileTypes)));const onSelect=(0,src.hb)((resource=>{try{isTranscodingEnabled&&canTranscodeResource(resource)&&(!resource.isOptimized&&app_media.sX.includes(resource.mimeType)&&optimizeVideo({resource}),"image/gif"===resource.mimeType&&optimizeGif({resource})),onInsert(resource),postProcessingResource(resource)}catch(e){showSnackbar({message:e.message,dismissible:!0})}}),[isTranscodingEnabled,canTranscodeResource,onInsert,optimizeGif,optimizeVideo,postProcessingResource,showSnackbar]);return react.createElement(MediaUpload,{onSelect,onSelectErrorMessage,onClose:resetWithFetch,type:allowedMimeTypes,render:renderButton,buttonInsertText})};var switch_switch=__webpack_require__("./packages/design-system/src/components/switch/switch.tsx"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx");function switch_extends(){return switch_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},switch_extends.apply(this,arguments)}const StyledSwitch=(0,styled_components_browser_esm.Ay)(switch_switch.A).withConfig({displayName:"switch__StyledSwitch",componentId:"sc-xytur2-0"})(["label:focus-within ~ span{",";}"],(({theme})=>`box-shadow: 0px 0px 0 2px ${theme.colors.bg.secondary}, 0px 0px 0 4px ${theme.colors.border.focus} !important;`));const form_switch=function Switch({offLabel=(0,i18n.__)("Off","web-stories"),onChange,onLabel=(0,i18n.__)("On","web-stories"),value,...props}){const switchRef=(0,src.li)(null),handleToggleValue=(0,src.hb)((evt=>{onChange(evt,!value)}),[onChange,value]);return(0,keyboard._h)(switchRef,["space","enter","left","right","up","down"],handleToggleValue,[handleToggleValue,value]),react.createElement(StyledSwitch,switch_extends({ref:switchRef,offLabel,onChange,onLabel,value},props))};var textArea=__webpack_require__("./packages/design-system/src/components/textArea/textArea.tsx");function textArea_extends(){return textArea_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},textArea_extends.apply(this,arguments)}const TextArea=(0,src.Rf)((({className,placeholder,value,disabled,rows=2,onChange,onBlur,...rest},ref)=>{const[currentValue,setCurrentValue]=(0,src.J0)(value),handleChange=(0,src.hb)((evt=>{currentValue!==value&&onChange(evt)}),[currentValue,onChange,value]);(0,src.vJ)((()=>{setCurrentValue(value)}),[value]);const handleBlur=(0,src.hb)((e=>{handleChange(e),onBlur&&onBlur(e)}),[onBlur,handleChange]);return react.createElement(textArea.A,textArea_extends({placeholder,value:currentValue},rest,{rows,containerStyleOverride:styles.t,onChange:evt=>setCurrentValue(evt.target.value),onBlur:handleBlur,ref}))}));TextArea.displayName="TextArea";const form_textArea=TextArea;var usePresubmitHandler=__webpack_require__("./packages/story-editor/src/components/form/usePresubmitHandler.js"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),numericInput=(__webpack_require__("./packages/story-editor/src/utils/useFocusTrapping.js"),__webpack_require__("./packages/story-editor/src/utils/useRovingTabIndex/index.js"),__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx")),typography_text=(__webpack_require__("./packages/date/src/index.ts"),__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"));__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");styled_components_browser_esm.Ay.div.withConfig({displayName:"timeZone__Wrapper",componentId:"sc-1n80l1r-0"})(["white-space:nowrap;"]),(0,styled_components_browser_esm.Ay)(typography_text.E.Span).withConfig({displayName:"timeZone__StyledText",componentId:"sc-1n80l1r-1"})(["color:",";line-height:30px;"],(({theme})=>theme.colors.fg.tertiary));styled_components_browser_esm.Ay.div.withConfig({displayName:"timePicker__TimeWrapper",componentId:"sc-14og2kb-0"})(["margin-bottom:1em;padding:0 20px;"]),styled_components_browser_esm.Ay.fieldset.withConfig({displayName:"timePicker__Fieldset",componentId:"sc-14og2kb-1"})(["margin-top:0.5em;position:relative;"]),styled_components_browser_esm.Ay.legend.withConfig({displayName:"timePicker__Legend",componentId:"sc-14og2kb-2"})(["position:absolute;top:-999em;left:-999em;"]),styled_components_browser_esm.Ay.div.withConfig({displayName:"timePicker__InputRow",componentId:"sc-14og2kb-3"})(["display:flex;"]),(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"timePicker__NumberInput",componentId:"sc-14og2kb-4"})(["background-color:",";color:",";margin-right:4px;width:50%;max-width:50px;div{height:32px;}input{text-align:center;}"],(({theme})=>theme.colors.bg.tertiary),(({theme})=>theme.colors.fg.tertiary)),styled_components_browser_esm.Ay.span.withConfig({displayName:"timePicker__TimeSeparator",componentId:"sc-14og2kb-5"})(["padding:0 3px 0 0;color:#555d66;"]),styled_components_browser_esm.Ay.div.withConfig({displayName:"timePicker__InputGroup",componentId:"sc-14og2kb-6"})(["flex-basis:100%;"]),(0,styled_components_browser_esm.Ay)(form_switch).withConfig({displayName:"timePicker__StyledSwitch",componentId:"sc-14og2kb-7"})(["width:100px;"]);var expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),theme_types=__webpack_require__("./packages/design-system/src/theme/types.ts");styled_components_browser_esm.Ay.div.withConfig({displayName:"calendarWrapper__CalendarWrapper",componentId:"sc-u1av1j-0"})(["min-height:236px;.react-calendar{width:350px;max-width:100%;background-color:",";"," color:",";button{margin:0;border:0;outline:none;"," color:",";&:enabled:hover{cursor:pointer;}}}.react-calendar,.react-calendar *,.react-calendar *:before,.react-calendar *:after{box-sizing:border-box;}.react-calendar .react-calendar__navigation{display:flex;height:44px;margin-bottom:1em;button{min-width:44px;background:none;color:",";&:disabled{background-color:transparent;}&:enabled:hover,&:enabled:focus{background-color:",";color:",";}}}.react-calendar__month-view__weekdays{text-align:center;text-transform:uppercase;font-weight:bold;font-size:10px;}.react-calendar__month-view__weekdays__weekday{padding:0.5em;}.react-calendar .react-calendar__month-view__days__day--weekend{color:",";}.react-calendar .react-calendar__month-view__days__day--neighboringMonth{color:",";}.react-calendar__tile{max-width:100%;padding:10px 6.6667px;background:none;text-align:center;line-height:16px;&:disabled{background-color:",";}&:enabled:hover,&:enabled:focus{background-color:",";color:",";}}.react-calendar__year-view .react-calendar__tile,.react-calendar__decade-view .react-calendar__tile,.react-calendar__century-view .react-calendar__tile{padding:1.2em 0.5em;}.react-calendar button.react-calendar__tile--now{background:",";color:",";&:enabled:hover,&:enabled:focus{background-color:",";color:",";}}.react-calendar button.react-calendar__tile--active,.react-calendar button.react-calendar__tile--hasActive{background:",";color:",";&:enabled:hover,&:enabled:focus{background-color:",";color:",";}}"],(({theme})=>theme.colors.bg.primary),(({theme})=>expandPresetStyles.s({preset:theme.typography.presets.label[theme_types.$.Small],theme})),(({theme})=>theme.colors.fg.primary),(({theme})=>expandPresetStyles.s({preset:theme.typography.presets.label[theme_types.$.Small],theme})),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.colors.fg.secondary),(({theme})=>theme.colors.bg.secondary),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.colors.fg.secondary),(({theme})=>theme.colors.fg.tertiary),(({theme})=>theme.colors.bg.tertiary),(({theme})=>theme.colors.interactiveBg.tertiaryHover),(({theme})=>theme.colors.interactiveFg.active),(({theme})=>theme.colors.bg.tertiary),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.colors.interactiveBg.secondaryHover),(({theme})=>theme.colors.interactiveFg.active),(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.colors.interactiveFg.brandNormal),(({theme})=>theme.colors.interactiveBg.brandHover),(({theme})=>theme.colors.interactiveFg.brandHover)),(0,src.RZ)((()=>__webpack_require__.e(3995).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-calendar/dist/esm/index.js")))),styled_components_browser_esm.Ay.div.withConfig({displayName:"datePicker__FallbackCalendar",componentId:"sc-9qun1q-0"})(["height:256px;width:350px;display:flex;align-items:center;justify-content:center;"]);styled_components_browser_esm.Ay.div.withConfig({displayName:"dateTime__DateTimeWrapper",componentId:"sc-15cbv9f-0"})(["background-color:",";border-radius:",";border:1px solid ",";width:100%;padding:4px;"],(({theme})=>theme.colors.bg.primary),(({theme})=>theme.borders.radius.small),(({theme})=>theme.colors.divider.primary)),(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"dateTime__StyledButton",componentId:"sc-15cbv9f-1"})(["margin:5px 0;color:",";&:hover{color:",";}"],(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.colors.interactiveBg.brandHover));styled_components_browser_esm.Ay.div.withConfig({displayName:"required__RequiredWrapper",componentId:"sc-19c61h7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;"]),(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({as:"span",size:theme_types.$.XSmall}).withConfig({displayName:"required__StyledText",componentId:"sc-19c61h7-1"})(["color:",";font-size:12px;"],(({theme})=>theme.colors.fg.secondary));__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var visuallyHidden=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),radio_radio=__webpack_require__("./packages/design-system/src/components/radio/radio.tsx");__webpack_require__("./packages/story-editor/src/components/form/shared/useRadioNavigation.js");styled_components_browser_esm.Ay.h3.withConfig({displayName:"radioGroup__VisuallyHiddenLabel",componentId:"sc-k5v4js-0"})(["",";"],visuallyHidden.Q),(0,styled_components_browser_esm.Ay)(radio_radio.A).withConfig({displayName:"radioGroup__StyledRadio",componentId:"sc-k5v4js-1"})(["input:focus + span,input:focus-visible + span{",";}"],(({theme})=>`box-shadow: 0px 0px 0 2px ${theme.colors.bg.secondary}, 0px 0px 0 4px ${theme.colors.border.focus} !important;`));var dropdown=__webpack_require__("./packages/design-system/src/components/dropDown/dropdown.tsx");function select_extends(){return select_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},select_extends.apply(this,arguments)}const Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"select__Container",componentId:"sc-1pv4s6p-0"})(["position:relative;width:100%;"]),StyledDropDown=(0,styled_components_browser_esm.Ay)(dropdown.A).withConfig({displayName:"select__StyledDropDown",componentId:"sc-1pv4s6p-1"})(["background-color:transparent;border:0;width:auto;"]),menuStylesOverride=(0,styled_components_browser_esm.AH)(["top:-14px;right:unset;width:auto;"]),selectButtonStylesOverride=(0,styled_components_browser_esm.AH)(["border:none;width:auto;margin-right:auto;padding-left:0;",";"],styles.Y),selectValueStylesOverride=(0,styled_components_browser_esm.AH)(["margin-right:0;"]);const select_select=function Select(props){return react.createElement(Container,null,react.createElement(StyledDropDown,select_extends({isInline:!0,hasSearch:!1,menuStylesOverride,selectButtonStylesOverride,selectValueStylesOverride},props)))};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js");var scrollbar=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),checkbox_checkbox=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),utils_constants=__webpack_require__("./packages/design-system/src/utils/constants.ts"),directionAware=__webpack_require__("./packages/story-editor/src/components/directionAware/index.js");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const fillTree=(groupedOptionsByParent,options=[])=>options.map((option=>{const children=groupedOptionsByParent[option.id];return{...option,options:children&&children.length?fillTree(groupedOptionsByParent,children):[]}})),buildOptionsTree=flatOptions=>{const formattedOptions=flatOptions.map((option=>({options:[],parent:0,...option}))),groupedOptionsByParent=(key="parent",formattedOptions.reduce(((prev,arrItem)=>(prev[arrItem[key]]?prev[arrItem[key]].push(arrItem):prev[arrItem[key]]=[arrItem],prev)),{}));var key;return fillTree(groupedOptionsByParent,groupedOptionsByParent[0])},filterOption=(option,labelText="")=>{const{options,...rest}=option;let newChildren=[];if(options)for(let i=0;i<options.length;i++)newChildren=newChildren.concat(filterOption(options[i],labelText));const newOption={...rest,options:newChildren};return option.label.toLowerCase().includes(labelText.trim().toLowerCase())||newChildren.length?[newOption]:[]},filterOptionsByLabelText=(options,labelText)=>options.reduce(((all,option)=>all.concat(filterOption(option,labelText))),[]);function flattenOptionTree(optionTree=[],level=0){return optionTree.flatMap((({options,...option})=>[{...option,$level:level},...flattenOptionTree(options,level+1)]))}function makeFlatOptionTree(categories,labelText=""){const optionTree=buildOptionsTree(categories);return flattenOptionTree(filterOptionsByLabelText(optionTree,labelText))}function hierarchical_extends(){return hierarchical_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},hierarchical_extends.apply(this,arguments)}const hierarchical_Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"hierarchical__Container",componentId:"sc-1pgjcwl-0"})(["margin-bottom:8px;display:block;"]),Label=(0,styled_components_browser_esm.Ay)(typography_text.E.Label).attrs({size:theme_types.$.Small}).withConfig({displayName:"hierarchical__Label",componentId:"sc-1pgjcwl-1"})(["margin:0 12px;"]),Border=styled_components_browser_esm.Ay.div.withConfig({displayName:"hierarchical__Border",componentId:"sc-1pgjcwl-2"})(["padding-top:4px;margin-top:-4px;border:1px solid ",";border-top:none;border-radius:",";"],(({theme})=>theme.colors.border.defaultNormal),(({theme})=>`0 0 ${theme.borders.radius.small} ${theme.borders.radius.small}`)),CheckboxArea=styled_components_browser_esm.Ay.ul.withConfig({displayName:"hierarchical__CheckboxArea",componentId:"sc-1pgjcwl-3"})(["max-height:175px;padding:12px 12px 0 12px;overflow-y:scroll;margin-top:4px;margin-bottom:0;",";:focus-within{",";}"],scrollbar.W,(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),CheckboxContainer=styled_components_browser_esm.Ay.li.withConfig({displayName:"hierarchical__CheckboxContainer",componentId:"sc-1pgjcwl-4"})(["display:flex;align-items:center;margin-bottom:8px;margin-left:","px;"],(({$level})=>20*$level)),NoResultsText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"hierarchical__NoResultsText",componentId:"sc-1pgjcwl-5"})(["margin-bottom:12px;color:",";"],(({theme})=>theme.colors.fg.secondary)),buildOptionId=id=>`hierarchical_term_option_${id}`,Option=({optionRefs={current:{}},$level=0,...option})=>{const{id,label,onBlur,onChange,onFocus,checked,value}=option,optionId=buildOptionId(option.id),optionName=`hierarchical_term_${option.label}`;return react.createElement(CheckboxContainer,{"aria-selected":checked,role:"treeitem",$level},react.createElement(checkbox_checkbox.A,{id:optionId,ref:node=>{optionRefs.current[id]=node},value,checked,name:optionName,onChange:evt=>onChange(evt,option),onBlur,onFocus,tabIndex:-1}),react.createElement(Label,{htmlFor:optionId},label))},hierarchical=({className,inputValue,onInputChange,label,noOptionsText,options,onChange,...inputProps})=>{const speak=(0,useLiveRegion.A)("assertive"),debouncedSpeak=(0,src.YQ)(speak,500),checkboxListRef=(0,src.li)(null),inputRef=(0,src.li)(null),[focusedCheckboxId,setFocusedCheckboxId]=(0,src.J0)(-1),optionRefs=(0,src.li)({}),handleListboxFocus=(0,src.hb)((evt=>{if(document.activeElement===checkboxListRef.current){if(!options.length)return;if(checkboxListRef.current.contains(evt.relatedTarget))return void inputRef.current?.focus();if(-1===focusedCheckboxId){const firstCheckedOption=options.find((option=>option.checked))?.id;setFocusedCheckboxId(firstCheckedOption||0)}else optionRefs.current[focusedCheckboxId]?.focus()}}),[focusedCheckboxId,options]),handleKeyDown=(0,src.hb)((evt=>{const currentSelectedIndex=options.findIndex((option=>option.id===focusedCheckboxId));switch(evt.key){case utils_constants.R.UP:currentSelectedIndex>0&&setFocusedCheckboxId(options[currentSelectedIndex-1].id);break;case utils_constants.R.DOWN:currentSelectedIndex<options.length-1&&setFocusedCheckboxId(options[currentSelectedIndex+1].id)}}),[options,focusedCheckboxId]),handleInputChange=(0,src.hb)((evt=>{onInputChange(evt.target.value)}),[onInputChange]),handleCheckboxChange=(0,src.hb)(((evt,option)=>{onChange(evt,{id:option.id,checked:!option.checked})}),[onChange]),previousInput=(0,src.ZC)(inputValue);(0,src.vJ)((()=>{if(previousInput!==inputValue){const count=options.length,message=(0,sprintf.A)((0,i18n._n)("%d result found.","%d results found.",count,"web-stories"),count);debouncedSpeak(message)}}),[debouncedSpeak,options,inputValue,previousInput]),(0,keyboard._h)(checkboxListRef,{key:["up","down","shift+up","shift+down"]},handleKeyDown,[handleKeyDown]),(0,src.vJ)((()=>{checkboxListRef.current?.contains(document.activeElement)&&optionRefs.current[focusedCheckboxId]?.focus()}),[focusedCheckboxId]);const showOptionArea=Boolean(options.length)||Boolean(inputValue.length);return react.createElement(hierarchical_Container,{className},react.createElement(input.A,hierarchical_extends({ref:inputRef,value:inputValue,onChange:handleInputChange,label,type:"search",placeholder:(0,i18n.__)("Search","web-stories")},inputProps)),showOptionArea&&react.createElement(Border,null,react.createElement(directionAware.A,null,react.createElement(CheckboxArea,{id:"checkbox_list",ref:checkboxListRef,tabIndex:0,onFocus:handleListboxFocus,role:"tree","aria-activedescendant":-1!==focusedCheckboxId?buildOptionId(focusedCheckboxId):void 0,"aria-multiselectable":!0},options.length?options.map((option=>react.createElement(Option,hierarchical_extends({key:option.id},option,{onChange:handleCheckboxChange,optionRefs})))):react.createElement(NoResultsText,{role:"treeitem",size:theme_types.$.Small},noOptionsText)))))}},"./packages/story-editor/src/components/form/shared/useRadioNavigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx");const __WEBPACK_DEFAULT_EXPORT__=function useRadioNavigation(ref){const changeCurrent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.hb)((direction=>{const radioGroup=ref.current;if(!radioGroup)return;const list=Array.from(radioGroup.querySelectorAll('input[type="radio"]')),currentIndex=list.indexOf(document.activeElement);if(-1===currentIndex)return;const newIndex=currentIndex+direction;newIndex<0||newIndex>=list.length||(list[newIndex].focus(),list[newIndex].click())}),[ref]),handlePrevious=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.hb)((()=>changeCurrent(-1)),[changeCurrent]);(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__._h)(ref,["up","left"],handlePrevious,[handlePrevious]);const handleNext=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.hb)((()=>changeCurrent(1)),[changeCurrent]);(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__._h)(ref,["down","right"],handleNext,[handleNext])}},"./packages/story-editor/src/components/form/usePresubmitHandler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>form_usePresubmitHandler});var src=__webpack_require__("./packages/react/src/index.ts"),context=__webpack_require__("./packages/story-editor/src/components/form/context.js");const form_useFormContext=function useFormContext(selector){return(0,src.i7)(context.A,selector??src.D_)};const form_usePresubmitHandler=function usePresubmitHandler(handler,deps=void 0){const registerPresubmitHandler=form_useFormContext((value=>value.registerPresubmitHandler));(0,src.vJ)((()=>registerPresubmitHandler(handler)),[registerPresubmitHandler].concat(deps||[]))}},"./packages/story-editor/src/components/hotlinkModal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>hotlinkModal});var react=__webpack_require__("./node_modules/react/index.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./packages/react/src/index.ts"),dialog=__webpack_require__("./packages/story-editor/src/components/dialog/index.js"),url=__webpack_require__("./packages/url/src/url.ts"),getImageDimensions=__webpack_require__("./packages/media/src/getImageDimensions.ts"),useCORSProxy=__webpack_require__("./packages/story-editor/src/utils/useCORSProxy.ts"),useAPI=__webpack_require__("./packages/story-editor/src/app/api/useAPI.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts"),translateWithMarkup=__webpack_require__("./packages/i18n/src/translateWithMarkup.tsx"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx"),types=__webpack_require__("./packages/design-system/src/theme/types.ts");function isValidUrlForHotlinking(url){try{return"/"!==new URL(url).pathname}catch{return!1}}function CORSMessage(){return react.createElement(translateWithMarkup.A,{mapping:{a:react.createElement(typography_link.N,{size:types.$.Medium,href:"https://wp.stories.google/docs/troubleshooting/common-issues/",target:"_blank",rel:"noopener noreferrer",onClick:evt=>(0,tracking_src.MP)(evt,"click_cors_check_docs")})}},(0,i18n.__)("Unable to load media. Make sure CORS is set up correctly for the file. <a>Learn more</a>.","web-stories"))}const hotlinkModal_useHotlinkModal=function useHotlinkModal({onSelect,onClose,onError,allowedFileTypes,canUseProxy,requiredImgDimensions}){const[isInserting,setIsInserting]=(0,src.J0)(!1),[link,setLink]=(0,src.J0)(""),[errorMsg,setErrorMsg]=(0,src.J0)(null),{actions:{getHotlinkInfo}}=(0,useAPI.A)(),{checkResourceAccess,getProxiedUrl}=(0,useCORSProxy.A)(),isDisabled=errorMsg||!link||isInserting,description=function getHotlinkDescription(allowedFileTypes){let description=(0,i18n.__)("No file types are currently supported.","web-stories");return allowedFileTypes.length&&(description=(0,sprintf.A)((0,i18n.__)("You can insert %s.","web-stories"),(0,translateToExclusiveList.A)(allowedFileTypes))),description}(allowedFileTypes),onBlur=(0,src.hb)((()=>{if(link?.length>0){const newLink=(0,url.x6)(link.trim());setLink(newLink),isValidUrlForHotlinking(newLink)||setErrorMsg((0,i18n.__)("Invalid link.","web-stories"))}}),[link,setErrorMsg,setLink]),onChange=(0,src.hb)((({target:{value}})=>{errorMsg&&setErrorMsg(null),setLink(value)}),[errorMsg,setLink,setErrorMsg]),onCloseDialog=(0,src.hb)((()=>{onClose(),setLink(""),setErrorMsg(null),setIsInserting(!1)}),[onClose]),onInsert=(0,src.hb)((async()=>{if(link)if(isValidUrlForHotlinking(link)){setIsInserting(!0);try{const hotlinkInfo=await getHotlinkInfo(link);if(!allowedFileTypes.includes(hotlinkInfo?.ext))return void setErrorMsg((0,i18n.__)("Invalid link.","web-stories"));const needsProxy=await checkResourceAccess(link);if(needsProxy&&!canUseProxy)return void setErrorMsg(react.createElement(CORSMessage,null));if("image"===hotlinkInfo?.type&&requiredImgDimensions){const proxiedUrl=needsProxy?getProxiedUrl({needsProxy},link):link,dimensions=await(0,getImageDimensions.A)(proxiedUrl),errorMessage=function checkImageDimensions(suppliedWidth,suppliedHeight,requiredWidth,requiredHeight){return requiredHeight&&requiredHeight!==suppliedHeight&&requiredWidth&&requiredWidth!==suppliedWidth?(0,sprintf.A)((0,i18n.__)("Image dimensions (%1$s) do not match required image dimensions (%2$s).","web-stories"),`${suppliedWidth}x${suppliedHeight}px`,`${requiredWidth}x${requiredHeight}px`):requiredHeight&&requiredHeight!==suppliedHeight?(0,sprintf.A)((0,i18n.__)("Image height (%1$s) does not match required image height (%2$s).","web-stories"),`${suppliedHeight}px`,`${requiredHeight}px`):requiredWidth&&requiredWidth!==suppliedWidth?(0,sprintf.A)((0,i18n.__)("Image width (%1$s) does not match required image width (%2$s).","web-stories"),`${suppliedWidth}px`,`${requiredWidth}px`):null}(dimensions.width,dimensions.height,requiredImgDimensions?.width,requiredImgDimensions?.height);if(errorMessage)return void setErrorMsg(errorMessage);hotlinkInfo.width=dimensions.width,hotlinkInfo.height=dimensions.height}await onSelect({link,hotlinkInfo,needsProxy}),setLink(""),setErrorMsg(null)}catch(err){onError&&onError(err),setErrorMsg(function getErrorMessage(code,description){switch(code){case"rest_invalid_param":case"rest_invalid_url":return(0,i18n.__)("Invalid link.","web-stories");case"rest_invalid_ext":return(0,sprintf.A)((0,i18n.__)("Invalid link. %s","web-stories"),description);default:return(0,i18n.__)("Media failed to load. Please ensure the link is valid and the site allows linking from external sites.","web-stories")}}(err.code,description))}finally{setIsInserting(!1)}}else setErrorMsg((0,i18n.__)("Invalid link.","web-stories"))}),[link,getHotlinkInfo,allowedFileTypes,checkResourceAccess,canUseProxy,requiredImgDimensions,onSelect,getProxiedUrl,onError,description]);return{action:{onChange,onSubmit:(0,src.hb)((evt=>{evt.preventDefault(),isDisabled||onInsert()}),[isDisabled,onInsert]),onBlur,onCloseDialog,onInsert},state:{description,isInserting,link,errorMsg,isDisabled}}},InputWrapper=styled_components_browser_esm.Ay.form.withConfig({displayName:"hotlinkModal__InputWrapper",componentId:"sc-21vzo8-0"})(["margin:16px 4px;width:470px;height:100px;"]);const hotlinkModal=function HotlinkModal({isOpen,onClose,onSelect,onError,allowedFileTypes=[],insertText=(0,i18n.__)("Insert","web-stories"),insertingText=(0,i18n.__)("Inserting","web-stories"),title,canUseProxy=!0,requiredImgDimensions={}}){const inputRef=(0,src.li)(null),{action:{onSubmit,onBlur,onChange,onCloseDialog,onInsert},state:{errorMsg,isInserting,link,description,isDisabled}}=hotlinkModal_useHotlinkModal({allowedFileTypes,onClose,onError,onSelect,canUseProxy,requiredImgDimensions}),primaryText=isInserting?insertingText:insertText;return(0,src.Nf)((()=>{const timeout=setTimeout((()=>{isOpen&&inputRef.current&&inputRef.current.focus()}));return()=>clearTimeout(timeout)}),[isOpen,inputRef]),react.createElement(dialog.A,{onClose:onCloseDialog,isOpen,title,onPrimary:onInsert,primaryText,secondaryText:(0,i18n.__)("Cancel","web-stories"),primaryRest:{disabled:isDisabled}},react.createElement(InputWrapper,{onSubmit},react.createElement(input.A,{ref:inputRef,onChange,value:link,hint:errorMsg||description,hasError:Boolean(errorMsg),onBlur,label:(0,i18n.__)("URL","web-stories"),type:"url",required:!0})))}},"./packages/story-editor/src/constants/zIndex.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GM:()=>Z_INDEX_FOOTER,Gu:()=>Z_INDEX_RECORDING_MODE,PK:()=>Z_INDEX_GRID_VIEW_SLIDER,Ry:()=>Z_INDEX_FLOATING_MENU,VT:()=>Z_INDEX_CANVAS_SIDE_MENU_RECORDING_MODE,Vg:()=>Z_INDEX_EDIT_LAYER,Xl:()=>Z_INDEX_STORY_DETAILS,ll:()=>Z_INDEX_CANVAS_SIDE_MENU,mD:()=>Z_INDEX_NAV_LAYER,qR:()=>Z_INDEX_LIBRARY_ACTION_BUTTON});const Z_INDEX_STORY_DETAILS=10,Z_INDEX_CANVAS_SIDE_MENU=3,Z_INDEX_FLOATING_MENU=4,Z_INDEX_EDIT_LAYER=3,Z_INDEX_NAV_LAYER=5,Z_INDEX_RECORDING_MODE=6,Z_INDEX_CANVAS_SIDE_MENU_RECORDING_MODE=7,Z_INDEX_FOOTER=3,Z_INDEX_GRID_VIEW_SLIDER=11,Z_INDEX_LIBRARY_ACTION_BUTTON=20}}]);