"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[87],{"./packages/design-system/src/icons/trash.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgTrash=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14 9.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V11h-4V9.5ZM13 11H8.5a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1H19V9.5A1.5 1.5 0 0 0 17.5 8h-3A1.5 1.5 0 0 0 13 9.5V11Zm-2.5 3a.5.5 0 0 1 .5.5v7a1.5 1.5 0 0 0 1.5 1.5h7a1.5 1.5 0 0 0 1.5-1.5v-7a.5.5 0 0 1 1 0v7a2.5 2.5 0 0 1-2.5 2.5h-7a2.5 2.5 0 0 1-2.5-2.5v-7a.5.5 0 0 1 .5-.5Zm3.5.5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5Zm4.5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgTrash)},"./packages/i18n/src/translateToExclusiveList.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _sprintf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/src/sprintf.ts"),_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/src/i18n.ts");const __WEBPACK_DEFAULT_EXPORT__=function translateToExclusiveList(options){switch(options.length){case 0:return"";case 1:return options[0];case 2:return(0,_sprintf__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("%1$s or %2$s","web-stories"),options[0],options[1]);default:return(0,_sprintf__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("%1$s, or %2$s","web-stories"),options.slice(0,options.length-1).join((0,_i18n__WEBPACK_IMPORTED_MODULE_1__.__)(", ","web-stories")),options[options.length-1])}}},"./packages/url/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{jv:()=>isValidUrl,eC:()=>safeDecodeURIComponent,BY:()=>toAbsoluteUrl,Ac:()=>withProtocol,fs:()=>withoutProtocol});__webpack_require__("./node_modules/core-js/modules/web.url-search-params.delete.js"),__webpack_require__("./node_modules/core-js/modules/web.url-search-params.has.js"),__webpack_require__("./node_modules/core-js/modules/web.url-search-params.size.js");function toAbsoluteUrl(base,path){try{return new URL(path,base).href}catch(error){return path}}function isValidUrl(url){try{return new URL(url),!0}catch{return!1}}function withProtocol(url){let protocol=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https";return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(url)?url:`${protocol}://${url}`}function withoutProtocol(url){return url.replace(/^(http:\/\/|https:\/\/|tel:|mailto:)/,"")}function safeDecodeURIComponent(uriComponent){try{return decodeURIComponent(uriComponent)}catch(uriComponentError){return uriComponent}}},"./packages/wp-dashboard/src/components/editorSettings/customFonts/stories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_default:()=>_default,default:()=>stories});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");var src=__webpack_require__("./packages/react/src/index.ts");const rawCustomFonts=[{id:1,url:"https://font.test/font-url-1.ttf",family:"Dummy Font 1"},{id:2,url:"https://font.test/font-url-2.otf",family:"Dummy Font 2"},{id:3,url:"https://font.test/font-url-3.woff",family:"Dummy Font 3"}];__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts"),url_src=__webpack_require__("./packages/url/src/index.ts"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),trash=__webpack_require__("./packages/design-system/src/icons/trash.svg"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),dashboard_src=__webpack_require__("./packages/dashboard/src/index.js"),components=__webpack_require__("./packages/wp-dashboard/src/components/editorSettings/components.js"),src_constants=__webpack_require__("./packages/wp-dashboard/src/constants/index.js"),theme=__webpack_require__("./packages/design-system/src/theme/theme.ts"),dialog=__webpack_require__("./packages/design-system/src/components/dialog/dialog.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ConfirmationDialog(_ref){let{onClose,onPrimary}=_ref;return(0,jsx_runtime.jsx)(styled_components_browser_esm.f6,{theme:theme.r,children:(0,jsx_runtime.jsx)(dialog.Z,{isOpen:!0,onClose,title:(0,i18n.__)("Delete Font","web-stories"),actions:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(button_button.z,{type:constants.L$.Tertiary,size:constants.qE.Small,onClick:()=>onClose(),children:(0,i18n.__)("Cancel","web-stories")}),(0,jsx_runtime.jsx)(button_button.z,{type:constants.L$.Primary,size:constants.qE.Small,onClick:()=>onPrimary(),children:(0,i18n.__)("Delete Font","web-stories")})]}),children:(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:(0,i18n.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories")})})})}ConfirmationDialog.displayName="ConfirmationDialog";const confirmationDialog=ConfirmationDialog;const utils_getFontDataFromUrl=async function getFontDataFromUrl(fontURL){const{load}=await Promise.all([__webpack_require__.e(4422),__webpack_require__.e(2794)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/opentype.js/dist/opentype.module.js")),fontInfo=await load(fontURL);return{name:fontInfo.names.fullName.en,family:fontInfo.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:fontInfo.unitsPerEm,asc:fontInfo.ascender,des:fontInfo.descender,tAsc:fontInfo.tables.os2.sTypoAscender,tDes:fontInfo.tables.os2.sTypoDescender,tLGap:fontInfo.tables.os2.sTypoLineGap,wAsc:fontInfo.tables.os2.usWinAscent,wDes:fontInfo.tables.os2.usWinDescent,xH:fontInfo.tables.os2.sxHeight,capH:fontInfo.tables.os2.sCapHeight,yMin:fontInfo.tables.head.yMin,yMax:fontInfo.tables.head.yMax,hAsc:fontInfo.tables.hhea.ascender,hDes:fontInfo.tables.hhea.descender,lGap:fontInfo.tables.hhea.lineGap}}},TEXT={ADD_CONTEXT:(0,i18n.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,i18n.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,i18n.__)("Custom Fonts","web-stories"),LABEL:(0,i18n.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,i18n.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,i18n.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,i18n.__)("Add Font","web-stories"),FONTS_HEADING:(0,i18n.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,i18n.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},AddButton=(0,styled_components_browser_esm.ZP)(components.k$).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),InputsWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),FontsWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),ListHeading=(0,styled_components_browser_esm.ZP)(typography_text.x.Span).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),FontsList=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(_ref=>{let{theme}=_ref;return`1px solid ${theme.colors.divider.primary}`}),(_ref2=>{let{theme}=_ref2;return outline.R(theme.colors.border.focus)})),DeleteButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(_ref3=>{let{theme}=_ref3;return outline.R(theme.colors.border.focus)})),FontRow=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(_ref4=>{let{theme}=_ref4;return theme.colors.bg.secondary})),FontData=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);align-items:center;"]),StyledText=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),FontUrl=(0,styled_components_browser_esm.ZP)(StyledText).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(_ref5=>{let{theme}=_ref5;return theme.colors.fg.tertiary})),Divider=styled_components_browser_esm.ZP.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(_ref6=>{let{theme}=_ref6;return theme.colors.standard.black}),(_ref7=>{let{theme}=_ref7;return theme.borders.radius.round})),ALLOWED_FONT_TYPES=[".otf",".ttf",".woff"];function CustomFontsSettings(_ref8){let{customFonts=[],addCustomFont,deleteCustomFont}=_ref8;const speak=(0,useLiveRegion.Z)(),[fontUrl,setFontUrl]=(0,src.eJ)(""),[inputError,setInputError]=(0,src.eJ)(""),[showDialog,setShowDialog]=(0,src.eJ)(!1),[toDelete,setToDelete]=(0,src.eJ)(null),canSave=!inputError&&fontUrl,currentFontsContainerRef=(0,src.sO)(null),currentFontsRowsRef=(0,src.sO)([]),[currentFontsFocusIndex,setCurrentFontsFocusIndex]=(0,src.eJ)(0),[currentFontsActiveId,setCurrentFontsActiveId]=(0,src.eJ)(),{showSnackbar}=(0,useSnackbar.D)(),handleUpdateFontUrl=(0,src.I4)((event=>{const{value}=event.target;setFontUrl(value),0===value.length||(0,url_src.jv)((0,url_src.Ac)(value))?setInputError(""):setInputError(TEXT.INPUT_ERROR)}),[]),handleDelete=(0,src.I4)((async()=>{try{await deleteCustomFont(toDelete),speak((0,i18n.__)("Font deleted","web-stories"))}catch(err){(0,tracking_src.tz)("remove_custom_font",err?.message),showSnackbar({"aria-label":src_constants.Sg.REMOVE_FONT.MESSAGE,message:src_constants.Sg.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{setToDelete(null),setShowDialog(!1),setInputError("")}}),[deleteCustomFont,toDelete,showSnackbar,speak]),handleOnSave=(0,src.I4)((async()=>{if(canSave){const urlWithProtocol=(0,url_src.Ac)(fontUrl);try{await fetch(urlWithProtocol,{method:"HEAD"})}catch(err){return(0,tracking_src.tz)("add_custom_font",err?.message),void setInputError((0,i18n.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let fontData;try{if((0,tracking_src.L9)("add_custom_font",{url:urlWithProtocol}),fontData=await utils_getFontDataFromUrl(urlWithProtocol),!fontData.family)return void setInputError((0,i18n.__)("Something went wrong, please try again.","web-stories"))}catch(err){return(0,tracking_src.tz)("add_custom_font",err?.message),void setInputError((0,sprintf.Z)((0,i18n.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,translateToExclusiveList.Z)(ALLOWED_FONT_TYPES)))}try{await addCustomFont({...fontData,url:urlWithProtocol}),setFontUrl("")}catch(err){(0,tracking_src.tz)("add_custom_font",err?.message),setInputError((0,sprintf.Z)((0,i18n.__)("A font with the name %s already exists.","web-stories"),fontData.family))}}}),[addCustomFont,canSave,fontUrl]),handleOnKeyDown=(0,src.I4)((e=>{"Enter"===e.key&&(e.preventDefault(),handleOnSave())}),[handleOnSave]);(0,src.d4)((()=>{const el=currentFontsRowsRef.current[`row-${currentFontsFocusIndex}`];el&&(el.focus(),setCurrentFontsActiveId(el.id))}),[currentFontsFocusIndex]);const isListBoxActiveRow=index=>currentFontsFocusIndex===index,handleListBoxNav=(0,src.I4)((evt=>{const{key}=evt;"ArrowUp"===key?(evt.preventDefault(),setCurrentFontsFocusIndex((index=>Math.max(0,index-1)))):"ArrowDown"===key&&(evt.preventDefault(),setCurrentFontsFocusIndex((index=>Math.min(customFonts.length-1,index+1))))}),[customFonts]);return(0,jsx_runtime.jsxs)(components.O3,{onSubmit:e=>e.preventDefault(),children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(components.B5,{as:"h3",children:TEXT.SECTION_HEADING}),(0,jsx_runtime.jsx)(components.xs,{size:types.TextSize.Small,children:TEXT.ADD_CONTEXT}),(0,jsx_runtime.jsx)(components.xs,{size:types.TextSize.Small,children:TEXT.REMOVAL})]}),(0,jsx_runtime.jsxs)(InputsWrapper,{children:[(0,jsx_runtime.jsxs)(components.yN,{children:[(0,jsx_runtime.jsx)(components.CG,{value:fontUrl,onChange:handleUpdateFontUrl,onKeyDown:handleOnKeyDown,hasError:Boolean(inputError),hint:inputError,label:TEXT.LABEL}),(0,jsx_runtime.jsx)(AddButton,{type:constants.L$.Primary,size:constants.qE.Small,disabled:!canSave,onClick:handleOnSave,children:TEXT.SUBMIT_BUTTON})]}),(0,jsx_runtime.jsx)(components.rJ,{size:types.TextSize.Small,children:TEXT.INPUT_CONTEXT}),customFonts?.length>0&&(0,jsx_runtime.jsxs)(FontsWrapper,{children:[(0,jsx_runtime.jsx)(ListHeading,{children:TEXT.FONTS_HEADING}),(0,jsx_runtime.jsx)(FontsList,{ref:currentFontsContainerRef,role:"listbox",tabIndex:0,onKeyDown:handleListBoxNav,"aria-activedescendant":currentFontsActiveId||customFonts[0]?.id,children:customFonts.map(((_ref9,index)=>{let{id,family,url}=_ref9;return(0,jsx_runtime.jsxs)(FontRow,{id:`font-${id}`,ref:el=>currentFontsRowsRef.current[`row-${index}`]=el,role:"option",onClick:()=>{setCurrentFontsFocusIndex(index)},"aria-selected":isListBoxActiveRow(index),children:[(0,jsx_runtime.jsxs)(FontData,{children:[(0,jsx_runtime.jsx)(StyledText,{children:family}),(0,jsx_runtime.jsx)(Divider,{}),(0,jsx_runtime.jsx)(FontUrl,{children:url})]}),(0,jsx_runtime.jsx)(dashboard_src.u,{hasTail:!0,title:(0,i18n.__)("Delete font","web-stories"),children:(0,jsx_runtime.jsx)(DeleteButton,{"aria-label":(0,sprintf.Z)((0,i18n.__)("Delete %s","web-stories"),family),type:constants.L$.Tertiary,size:constants.qE.Small,variant:constants.Wu.Square,onClick:()=>{setToDelete(id),setShowDialog(!0)},children:(0,jsx_runtime.jsx)(trash.Z,{})})})]},family)}))}),(0,jsx_runtime.jsx)(components.rJ,{size:types.TextSize.Small,children:TEXT.FONTS_CONTEXT})]})]}),showDialog&&(0,jsx_runtime.jsx)(confirmationDialog,{onClose:()=>setShowDialog(!1),onPrimary:handleDelete})]})}CustomFontsSettings.displayName="CustomFontsSettings";const customFonts=CustomFontsSettings,stories={title:"Dashboard/Views/EditorSettings/CustomFonts",component:CustomFontsSettings,argTypes:{onSubmit:{action:"onSubmitFired"},onDelete:{action:"onDelete fired"}}},_default={render:function Render(args){const[addedFonts,setAddedFonts]=(0,src.eJ)(rawCustomFonts),demoId=(0,src.sO)(4),handleAddFont=(0,src.I4)((_ref=>{let{url}=_ref;args.onSubmit(url);const fontData={id:demoId,family:`Demo font ${demoId.current}`,url};setAddedFonts([fontData,...addedFonts]),demoId.current=demoId.current+1}),[addedFonts,args]),deleteFont=(0,src.I4)((toDelete=>{args.onDelete(toDelete),setAddedFonts((currentFonts=>currentFonts.filter((_ref2=>{let{id}=_ref2;return id!==toDelete}))))}),[args]);return(0,jsx_runtime.jsx)(customFonts,{addCustomFont:handleAddFont,customFonts:addedFonts,deleteCustomFont:deleteFont})}}},"./packages/wp-dashboard/src/constants/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aH:()=>AD_NETWORK_TYPE,bV:()=>ARCHIVE_TYPE,Sg:()=>ERRORS,Gs:()=>SHOPPING_PROVIDER_TYPE});var i18n=__webpack_require__("./packages/i18n/src/i18n.ts");(0,i18n.__)("Setting saved.","web-stories");const ERRORS={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,i18n.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,i18n.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,i18n.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,i18n.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,i18n.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,i18n.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,i18n.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,i18n.__)("Unable to update settings data","web-stories")}},AD_NETWORK_TYPE=((0,i18n.__)("Settings","web-stories"),(0,i18n.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),(0,i18n.__)("Support","web-stories"),{NONE:"none",ADSENSE:"adsense",ADMANAGER:"admanager",MGID:"mgid"}),ARCHIVE_TYPE={DEFAULT:"default",DISABLED:"disabled",CUSTOM:"custom"},SHOPPING_PROVIDER_TYPE={NONE:"none",WOOCOMMERCE:"woocommerce",SHOPIFY:"shopify"}},"./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>esm_browser_v4});const esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]}const esm_browser_v4=function v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}}}]);