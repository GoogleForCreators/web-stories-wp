"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[2593],{"./packages/design-system/src/icons/arrow_down.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgArrowDown=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 21.282 4.645-4.704a.5.5 0 0 1 .711.702l-5.5 5.571a.5.5 0 0 1-.712 0l-5.5-5.57a.5.5 0 0 1 .712-.703l4.644 4.704V9.5a.5.5 0 0 1 1 0z",clipRule:"evenodd"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgArrowDown)},"./packages/dashboard/src/app/views/myStories/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),router=__webpack_require__("./packages/dashboard/src/app/router/index.ts"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/utils/useStoryView.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),arrow_down=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./packages/design-system/src/icons/arrow_down.svg")),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),date_src=__webpack_require__("./packages/date/src/index.ts"),story_menu_generator=__webpack_require__("./packages/dashboard/src/components/popoverMenu/story-menu-generator.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),lock_closed=__webpack_require__("./packages/design-system/src/icons/lock_closed.svg");const PreviewImage=styled_components_browser_esm.Ay.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(({theme})=>theme.colors.gradient.placeholder),src_constants.y$[src_constants.FR.THUMBNAIL],src_constants.y$[src_constants.FR.THUMBNAIL]/(3/4),(({theme})=>theme.borders.radius.small)),PreviewWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),LockIcon=(0,styled_components_browser_esm.Ay)(lock_closed.A).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.colors.standard.white),(({theme})=>theme.borders.radius.round)),StyledTableRow=(0,styled_components_browser_esm.Ay)(components.Hj).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],components.AY,components.AY),TitleTableCellContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],components.AY,components.AY,components.AY);function onFocusSelectAll(e){window.getSelection().selectAllChildren(e.target)}function onBlurDeselectAll(){window.getSelection().removeAllRanges()}const StoryListItem=({story,renameStory,userId,storyMenu,storyStatus})=>{const isLocked=(0,src.Kr)((()=>story?.locked&&userId!==story?.lockUser.id),[story,userId]),formattedTitle=(0,utils.Te)(story.title),generatedMenuItems=(0,src.Kr)((()=>(0,story_menu_generator.Y)({menuItems:storyMenu.menuItems,story,isLocked})),[storyMenu,story,isLocked]),memoizedStoryMenu=(0,src.Kr)((()=>generatedMenuItems.length?react.createElement(components.l_,{menuLabel:(0,sprintf.A)((0,i18n.__)("Context menu for %s","web-stories"),formattedTitle),onMoreButtonSelected:(_,id)=>storyMenu.handleMenuToggle(id),contextMenuId:storyMenu.contextMenuId,storyId:story.id,menuItems:generatedMenuItems,verticalAlign:"center"}):null),[generatedMenuItems,formattedTitle,storyMenu,story]);return react.createElement(StyledTableRow,{"data-testid":`story-list-item-${story.id}`},react.createElement(components.rR,null,react.createElement(components.m_,{title:isLocked&&story?.lockUser.name?(0,sprintf.A)((0,i18n.__)("%s is currently editing this story","web-stories"),story?.lockUser.name):""},react.createElement(PreviewWrapper,null,react.createElement(PreviewImage,story.featuredMediaUrl?{src:story.featuredMediaUrl,alt:(0,sprintf.A)((0,i18n.__)("%s Poster image","web-stories"),formattedTitle),as:"img",decoding:"async"}:null),isLocked&&react.createElement(LockIcon,null)))),react.createElement(components.nA,null,react.createElement(TitleTableCellContainer,null,renameStory.id===story.id?react.createElement(components.W3,{onEditComplete:newTitle=>renameStory.handleOnRenameStory(story,newTitle),onEditCancel:renameStory.handleCancelRename,value:story.title,id:story.id,label:(0,i18n.__)("Rename story","web-stories")}):react.createElement(react.Fragment,null,react.createElement(headline.$,{tabIndex:0,onFocus:onFocusSelectAll,onBlur:onBlurDeselectAll,size:types.$.XXXSmall,as:"h3","aria-label":isLocked?(0,sprintf.A)((0,i18n.__)("%1$s (locked by %2$s)","web-stories"),formattedTitle,story?.lockUser.name):formattedTitle},formattedTitle),memoizedStoryMenu))),react.createElement(components.nA,null,react.createElement(typography_text.E.Span,{size:types.$.Small},story.author?.name||"â€”")),react.createElement(components.nA,null,react.createElement(typography_text.E.Span,{size:types.$.Small},(0,date_src.h3)(story.createdGmt))),react.createElement(components.nA,null,react.createElement(typography_text.E.Span,{size:types.$.Small},(0,date_src.h3)(story.modifiedGmt))),storyStatus!==src_constants.fD.DRAFT&&react.createElement(components.r7,null,react.createElement(typography_text.E.Span,{size:types.$.Small},src_constants.u6[story?.status])))};var helpers=__webpack_require__("./packages/design-system/src/theme/helpers/index.ts");const{focusableOutlineCSS}=helpers,ListView=styled_components_browser_esm.Ay.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),ArrowIcon=styled_components_browser_esm.Ay.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(({theme})=>theme.colors.fg.primary),(({active})=>active?"visible":"hidden"),(({asc})=>asc&&(0,styled_components_browser_esm.AH)(["transform:rotate(180deg);"]))),EmptyIconSpace=styled_components_browser_esm.Ay.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),ArrowIconWithTitle=(0,styled_components_browser_esm.Ay)(ArrowIcon).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],(({active})=>!active&&"display: none;"),(({theme})=>theme.breakpoint.mobile)),SelectableTitle=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(({theme})=>theme.colors.blue[70]),(({theme})=>focusableOutlineCSS(theme.colors.border.focus,theme.colors.bg.secondary))),toggleSortLookup={[src_constants.Pg.DESC]:src_constants.Pg.ASC,[src_constants.Pg.ASC]:src_constants.Pg.DESC};function StoryListView({hideStoryList,renameStory,stories,storyMenu}){const{userId,styleConstants:{topOffset}}=(0,config.U)(),{filters,sortObject,updateSort}=(0,useStoryFilters.A)((({state:{filters,sortObject},actions:{updateSort}})=>({filters,sortObject,updateSort}))),[storySort,sortDirection]=(0,src.Kr)((()=>[sortObject?.orderby,sortObject?.order]),[sortObject]),statusFilterValue=(0,src.Kr)((()=>filters.filter((({key})=>"status"===key)).filterId),[filters]),onSortTitleSelected=(0,src.hb)((orderby=>{updateSort(orderby!==storySort?{orderby,order:src_constants.qp[orderby]}:{order:toggleSortLookup[sortDirection]})}),[updateSort,storySort,sortDirection]),onKeyDownSort=(0,src.hb)((({key},sortBy)=>{"Enter"===key&&onSortTitleSelected(sortBy)}),[onSortTitleSelected]),tableContents=(0,src.Kr)((()=>!hideStoryList&&stories.map((story=>react.createElement(StoryListItem,{key:`story-${story.id}`,story,userId,renameStory,storyStatus:statusFilterValue,storyMenu})))),[hideStoryList,renameStory,stories,statusFilterValue,storyMenu,userId]);return react.createElement(ListView,{"data-testid":"story-list-view"},react.createElement(components.XI,{"aria-label":(0,i18n.__)("List view of created stories","web-stories")},react.createElement(components.Ty,{topOffset},react.createElement(components.Hj,null,react.createElement(components.G,{onClick:()=>onSortTitleSelected(src_constants._r.NAME),onKeyDown:e=>onKeyDownSort(e,src_constants._r.NAME)},react.createElement(SelectableTitle,{"aria-label":(0,i18n.__)("Title, select to sort table by story title","web-stories"),size:types.$.Small,isBold:!0},(0,i18n.__)("Title","web-stories"))),react.createElement(components.Uw,{onClick:()=>onSortTitleSelected(src_constants._r.NAME),onKeyDown:e=>onKeyDownSort(e,src_constants._r.NAME)},react.createElement(SelectableTitle,{"aria-hidden":!0,active:storySort===src_constants._r.NAME,size:types.$.Small,isBold:!0},(0,i18n.__)("Title","web-stories")),react.createElement(ArrowIcon,{active:storySort===src_constants._r.NAME,asc:sortDirection===src_constants.Pg.ASC},react.createElement(arrow_down.A,null))),react.createElement(components.Xf,null,react.createElement(SelectableTitle,{"aria-label":(0,i18n.__)("Author, select to sort table by story author","web-stories"),onClick:()=>onSortTitleSelected(src_constants._r.CREATED_BY),onKeyDown:e=>onKeyDownSort(e,src_constants._r.CREATED_BY),active:storySort===src_constants._r.CREATED_BY,size:types.$.Small,isBold:!0},(0,i18n.__)("Author","web-stories")),react.createElement(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants._r.CREATED_BY,asc:sortDirection===src_constants.Pg.ASC},storySort===src_constants._r.CREATED_BY?react.createElement(arrow_down.A,null):react.createElement(EmptyIconSpace,null))),react.createElement(components.Uq,null,react.createElement(SelectableTitle,{"aria-label":(0,i18n.__)("Creation date, select to sort table by date story was created","web-stories"),onClick:()=>onSortTitleSelected(src_constants._r.DATE_CREATED),onKeyDown:e=>onKeyDownSort(e,src_constants._r.DATE_CREATED),active:storySort===src_constants._r.DATE_CREATED,size:types.$.Small,isBold:!0},(0,i18n.__)("Date Created","web-stories")),react.createElement(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants._r.DATE_CREATED,asc:sortDirection===src_constants.Pg.ASC},react.createElement(arrow_down.A,null))),react.createElement(components.Uq,null,react.createElement(SelectableTitle,{"aria-label":(0,i18n.__)("Modification date, select to sort table by date story was last modified","web-stories"),onClick:()=>onSortTitleSelected(src_constants._r.LAST_MODIFIED),onKeyDown:e=>onKeyDownSort(e,src_constants._r.LAST_MODIFIED),active:storySort===src_constants._r.LAST_MODIFIED,size:types.$.Small,isBold:!0},(0,i18n.__)("Last Modified","web-stories")),react.createElement(ArrowIconWithTitle,{"aria-hidden":!0,active:storySort===src_constants._r.LAST_MODIFIED,asc:sortDirection===src_constants.Pg.ASC},react.createElement(arrow_down.A,null))),statusFilterValue!==src_constants.fD.DRAFT&&react.createElement(components.Qr,null,react.createElement(typography_text.E.Span,{isBold:!0,size:types.$.Small},(0,i18n.__)("Publish State","web-stories"))))),react.createElement(components.BF,null,tableContents)))}var storyGridView=__webpack_require__("./packages/dashboard/src/app/views/myStories/content/storyGridView/index.js");const storiesView=function StoriesView({loading,storyActions,stories,view}){const[contextMenuId,setContextMenuId]=(0,src.J0)(-1),[titleRenameId,setTitleRenameId]=(0,src.J0)(-1),[activeDialog,setActiveDialog]=(0,src.J0)(""),[activeStory,setActiveStory]=(0,src.J0)(null),[focusedStory,setFocusedStory]=(0,src.J0)({}),[returnStoryFocusId,setReturnStoryFocusId]=(0,src.J0)(null),{showSnackbar}=(0,useSnackbar.d)(),isActiveDeleteStoryDialog="DELETE_STORY"===activeDialog&&activeStory,storiesById=(0,src.Kr)((()=>stories.map((({id})=>id))),[stories]);(0,src.vJ)((()=>{if(focusedStory.id&&!returnStoryFocusId){const storyArrayIndex=storiesById.indexOf(focusedStory.id),isDeletedAdjustmentDirection=storyArrayIndex>0?-1:1,adjustedIndex=focusedStory.isDeleted?isDeletedAdjustmentDirection:0,storyIdToFocus=storiesById[storyArrayIndex+adjustedIndex];storyIdToFocus&&setReturnStoryFocusId(storyIdToFocus)}}),[focusedStory,returnStoryFocusId,storiesById]),(0,src.vJ)((()=>{activeDialog||setActiveStory(null)}),[activeDialog,setActiveStory]),(0,src.vJ)((()=>{activeDialog&&(setFocusedStory({}),setReturnStoryFocusId(null))}),[activeDialog]);const handleOnRenameStory=(0,src.hb)(((story,newTitle)=>{setTitleRenameId(-1),(0,tracking_src.sx)("rename_story"),storyActions.updateStory({...story,title:{raw:newTitle}})}),[storyActions]),handleOnDeleteStory=(0,src.hb)((()=>{(0,tracking_src.sx)("delete_story"),storyActions.trashStory(activeStory),setFocusedStory({id:activeStory.id,isDeleted:!0}),setActiveDialog("")}),[storyActions,activeStory]),handleOpenStoryInEditor=(0,src.hb)((()=>{setContextMenuId(-1),(0,tracking_src.sx)("open_in_editor")}),[]),handleRenameStory=(0,src.hb)((story=>{setContextMenuId(-1),setTitleRenameId(story.id)}),[]),handleDuplicateStory=(0,src.hb)((story=>{setContextMenuId(-1),(0,tracking_src.sx)("duplicate_story"),storyActions.duplicateStory(story),setFocusedStory({id:story.id})}),[storyActions]),handleDeleteStory=(0,src.hb)((story=>{setContextMenuId(-1),setActiveStory(story),setActiveDialog("DELETE_STORY")}),[]),handleCopyStoryLink=(0,src.hb)((story=>{setContextMenuId(-1),window.navigator.clipboard.writeText(story.link),showSnackbar({message:(0,sprintf.A)((0,i18n.__)("%s has been copied to your clipboard.","web-stories"),(0,utils.Te)(story.title)),dismissible:!0}),setFocusedStory({id:story.id})}),[showSnackbar]),menuItems=src_constants.TU.map((item=>{switch(item?.value){case src_constants.GO.COPY_STORY_LINK:item.action=handleCopyStoryLink;break;case src_constants.GO.DELETE:item.action=handleDeleteStory;break;case src_constants.GO.DUPLICATE:item.action=handleDuplicateStory;break;case src_constants.GO.OPEN_STORY_LINK:item.action=handleOpenStoryInEditor;break;case src_constants.GO.RENAME:item.action=handleRenameStory;break;default:item.action=()=>setContextMenuId(-1)}return item})),storyMenu=(0,src.Kr)((()=>({handleMenuToggle:setContextMenuId,contextMenuId,menuItems})),[contextMenuId,menuItems,setContextMenuId]),renameStory=(0,src.Kr)((()=>({id:titleRenameId,handleOnRenameStory,handleCancelRename:()=>setTitleRenameId(-1)})),[handleOnRenameStory,setTitleRenameId,titleRenameId]),ActiveView=(0,src.Kr)((()=>view.style===src_constants._D.LIST?react.createElement(StoryListView,{hideStoryList:loading?.isLoading&&!loading?.showStoriesWhileLoading.current,pageSize:view.pageSize,renameStory,stories,storyMenu}):!loading?.isLoading||loading?.isLoading&&loading?.showStoriesWhileLoading.current?react.createElement(storyGridView.A,{isLoading:loading?.isLoading,pageSize:view.pageSize,renameStory,storyMenu,stories,returnStoryFocusId:{value:returnStoryFocusId,set:setReturnStoryFocusId}}):null),[loading,renameStory,returnStoryFocusId,stories,storyMenu,view]);return react.createElement(react.Fragment,null,ActiveView,loading?.isLoading&&!loading?.showStoriesWhileLoading.current&&react.createElement(components.YM,null,react.createElement(loadingSpinner.A,null)),isActiveDeleteStoryDialog&&react.createElement(components.lG,{isOpen:!0,contentLabel:(0,i18n.__)("Dialog to confirm deleting a story","web-stories"),title:(0,i18n.__)("Delete Story","web-stories"),onClose:()=>{setFocusedStory({id:activeStory.id}),setActiveDialog("")},secondaryText:(0,i18n.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,sprintf.A)((0,i18n.__)('Cancel deleting story "%s"',"web-stories"),(0,utils.Te)(activeStory.title))},primaryText:(0,i18n.__)("Delete","web-stories"),onPrimary:handleOnDeleteStory,primaryRest:{"aria-label":(0,sprintf.A)((0,i18n.__)('Confirm deleting story "%s"',"web-stories"),(0,utils.Te)(activeStory.title))}},react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,sprintf.A)((0,i18n.__)('Are you sure you want to delete "%s"?',"web-stories"),(0,utils.Te)(activeStory.title)))))};function NoAvailableContent({filtersObject}){const{search}=filtersObject;return search?(0,sprintf.A)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):0!==Object.keys(filtersObject).length?(0,i18n.__)("Sorry, we couldn't find any results","web-stories"):(0,i18n.__)("Start telling Stories.","web-stories")}NoAvailableContent.propTypes={filtersObject:prop_types_default().object};const content=function Content({allPagesFetched,canViewDefaultTemplates,filtersObject={},loading,page,stories,storyActions,view}){return react.createElement(components.PE.Scrollable,null,react.createElement(components.Zo,null,stories.length>0?react.createElement(react.Fragment,null,react.createElement(storiesView,{storyActions,stories,view,loading}),react.createElement(infiniteScroller.A,{canLoadMore:!allPagesFetched,isLoading:loading?.isLoading,allDataLoadedMessage:(0,i18n.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more stories","web-stories"),onLoadMore:page.requestNextPage})):!loading?.isLoading&&react.createElement(shared.Gh,null,react.createElement(headline.$,{size:types.$.Small,as:"h3"},react.createElement(NoAvailableContent,{filtersObject})),0===Object.keys(filtersObject).length&&canViewDefaultTemplates&&react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Medium,href:(0,router.ie)(src_constants.vc.TEMPLATES_GALLERY)},(0,i18n.__)("Explore Templates","web-stories")))))}},"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(({theme})=>theme.colors.fg.tertiary)),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_5__.Q);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;const __WEBPACK_DEFAULT_EXPORT__=function InfiniteScroller({allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}){const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.li)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.li)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.WO)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>loadState===State.LoadingExternal?null:canLoadMore?react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_loadingSpinner__WEBPACK_IMPORTED_MODULE_8__.A,loadingSpinnerProps)):allDataLoadedMessage?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_typography__WEBPACK_IMPORTED_MODULE_6__.E.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_7__.$.Small},allDataLoadedMessage):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef},loadingAlert&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(AriaOnlyAlert,{role:"status"},loadingAlert),loadingContent)}},"./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const TAU=2*Math.PI,AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.span.withConfig({displayName:"loadingSpinner__AriaOnlyAlert",componentId:"sc-10eor9p-0"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_4__.Q),Container=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"loadingSpinner__Container",componentId:"sc-10eor9p-1"})(["position:relative;height:","px;width:","px;color:",";"],(({animationSize})=>animationSize),(({animationSize})=>animationSize),(({theme})=>theme.colors.interactiveBg.brandNormal)),Circle=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"loadingSpinner__Circle",componentId:"sc-10eor9p-2"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) ",";height:","px;width:","px;background-color:",";border-radius:",";animation-name:",";animation-fill-mode:both;animation-duration:","s;animation-iteration-count:infinite;animation-timing-function:",";"],(({$position:{x,y}})=>`translate(${x}px, ${y}px)`),(({circleSize})=>circleSize),(({circleSize})=>circleSize),(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.borders.radius.round),(({circleIndex,numCircles})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.i7)(["0%{opacity:1}","{opacity:1}","{opacity:0.3}","{opacity:1}"],100*circleIndex/numCircles+"%",100*(circleIndex+1)/numCircles+"%",100*(circleIndex+1)/numCircles+1+"%")),.85,_theme__WEBPACK_IMPORTED_MODULE_5__.U.inOutQuad);const __WEBPACK_DEFAULT_EXPORT__=function LoadingSpinner({animationSize=95,circleSize=12,loadingMessage=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Loading","web-stories"),numCircles=11,...props}){const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)((()=>Array.from({length:numCircles}).fill(1).map((()=>(0,uuid__WEBPACK_IMPORTED_MODULE_7__.A)()))),[numCircles]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,_extends({animationSize},props),loadingMessage&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(AriaOnlyAlert,{role:"status"},loadingMessage),ids.map(((id,index)=>{const angle=((index,numCircles)=>TAU*index/numCircles)(index,numCircles),position=((angle,animationSize)=>{const radius=animationSize/2,x=Math.sin(angle)*radius,y=-Math.cos(angle)*radius;return{x:x.toFixed(1),y:y.toFixed(1)}})(angle,animationSize);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Circle,{key:id,circleIndex:index,circleSize,numCircles,$position:position})})))}},"./packages/design-system/src/contexts/snackbar/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").q6)({showSnackbar:()=>!1,clearSnackbar:()=>!1,removeSnack:()=>!1,currentSnacks:[],placement:""})},"./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./packages/react/src/index.ts")),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_context__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/contexts/snackbar/context.ts");const __WEBPACK_DEFAULT_EXPORT__=function SnackbarProvider({children,placement="bottom"}){const[notifications,setNotifications]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.J0)([]),remove=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((toRemove=>{setNotifications((currentNotifications=>currentNotifications.filter((item=>Array.isArray(toRemove)?!toRemove.find((({id})=>id===item.id)):item.id!==toRemove.id))))}),[]),create=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((notification=>{const newNotification={id:(0,uuid__WEBPACK_IMPORTED_MODULE_5__.A)(),...notification};setNotifications((currentNotifications=>[...currentNotifications,newNotification]))}),[]),clear=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((()=>{setNotifications([])}),[]),state=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>({showSnackbar:create,clearSnackbar:clear,removeSnack:remove,currentSnacks:notifications,placement})),[create,clear,remove,notifications,placement]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context__WEBPACK_IMPORTED_MODULE_6__.A.Provider,{value:state},children)}},"./packages/design-system/src/contexts/snackbar/useSnackbar.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>useSnackbar});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/contexts/snackbar/context.ts");function useSnackbar(selector=_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.D_){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.i7)(_context__WEBPACK_IMPORTED_MODULE_1__.A,selector)}},"./packages/design-system/src/theme/helpers/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{focusableOutlineCSS:()=>_outline__WEBPACK_IMPORTED_MODULE_0__.Q});var _outline__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts")}}]);