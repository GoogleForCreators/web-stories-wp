(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[5280],{"./.storybook/stories/playground/story-editor/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>LOCAL_STORAGE_PREVIEW_MARKUP_KEY,c:()=>LOCAL_STORAGE_CONTENT_KEY});const LOCAL_STORAGE_CONTENT_KEY="web_stories_json_content",LOCAL_STORAGE_PREVIEW_MARKUP_KEY="web_stories_preview_markup"},"./.storybook/stories/playground/story-editor/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_default:()=>_default,default:()=>story_editor});var react=__webpack_require__("./node_modules/react/index.js"),dialog=(__webpack_require__("./node_modules/core-js/modules/esnext.json.parse.js"),__webpack_require__("./packages/story-editor/src/components/dialog/index.js")),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),stylis_rtl=__webpack_require__("./node_modules/stylis-plugin-rtl/dist/stylis-rtl.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),deepMerge=__webpack_require__("./packages/design-system/src/utils/deepMerge.ts"),styles=__webpack_require__("./packages/design-system/src/components/modal/styles.ts"),popupProvider=__webpack_require__("./packages/design-system/src/contexts/popup/popupProvider.ts"),snackbarProvider=__webpack_require__("./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var FeatureFlagsContext=(0,react.createContext)({});function transformFlags(features){return Array.isArray(features)?Object.fromEntries(features.map((function(feature){return[feature,!0]}))):features}function FlagsProvider(_ref){var a,b,_ref$features=_ref.features,features=void 0===_ref$features?{}:_ref$features,children=_ref.children,currentFeatures=useFeatures();return(0,react.createElement)(FeatureFlagsContext.Provider,{value:(a=transformFlags(currentFeatures),b=transformFlags(features),_extends({},a,b))},children)}function useFeatures(){return(0,react.useContext)(FeatureFlagsContext)}function useFeature(name){var features=useFeatures();return Array.isArray(features)?features.includes(name):"boolean"==typeof features[name]?features[name]:name.split("/").reduce((function(featureGroup,featureName){return"boolean"==typeof featureGroup?featureGroup:void 0!==featureGroup[featureName]&&featureGroup[featureName]}),features)}var src=__webpack_require__("./packages/transform/src/index.ts"),moveable_src=__webpack_require__("./packages/moveable/src/index.ts"),theme=__webpack_require__("./packages/design-system/src/theme/theme.ts"),scrollbar=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),react_src=__webpack_require__("./packages/react/src/index.ts");const GlobalStyle=(0,styled_components_browser_esm.DU)(["ul#adminmenu a.wp-has-current-submenu::after{border-right-color:",";}.web-stories-content b,.web-stories-content strong{font-weight:bold;}body.edit-story #wpbody *{",";}"],theme.w.colors.bg.secondary,scrollbar.W);const src_theme=theme.w;var tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),app_story=__webpack_require__("./packages/story-editor/src/app/story/index.ts");function CopyStoryDataToClipboard(){const $=(0,dist.c)(9),{pages,current,selection,story}=(0,app_story.P3)(_temp);let t0,t1;$[0]!==current||$[1]!==pages||$[2]!==selection||$[3]!==story?(t0=async()=>{const jsonStr=JSON.stringify({pages,current,selection,story},null,2);try{await navigator.clipboard.writeText(jsonStr),alert((0,i18n.__)("Copied to clipboard","web-stories"))}catch{alert((0,i18n.__)("Failed to copy story data","web-stories"))}},t1=[pages,current,selection,story],$[0]=current,$[1]=pages,$[2]=selection,$[3]=story,$[4]=t0,$[5]=t1):(t0=$[4],t1=$[5]);const copyToClipboard=(0,react_src.hb)(t0,t1);if(!(pages&&current&&selection&&story))return null;let t2,t3;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Copy story data","web-stories"),$[6]=t2):t2=$[6],$[7]!==copyToClipboard?(t3=react.createElement(button_button.$,{onClick:copyToClipboard,variant:constants.Ak.Rectangle,type:constants.VQ.Quaternary,size:constants.Mp.Small},t2),$[7]=copyToClipboard,$[8]=t3):t3=$[8],t3}function _temp(t0){const{internal}=t0;return{pages:internal.reducerState.pages,current:internal.reducerState.current,selection:internal.reducerState.selection,story:internal.reducerState.story}}const copyStoryDataToClipboard=CopyStoryDataToClipboard;CopyStoryDataToClipboard.__docgenInfo={description:"",methods:[],displayName:"CopyStoryDataToClipboard"};const Message=styled_components_browser_esm.Ay.div.withConfig({displayName:"errorActions__Message",componentId:"sc-mspoll-0"})(["color:#fff;font-size:16px;font-weight:300;line-height:1.6;padding:20px;button{margin-right:6px;}"]),TextArea=styled_components_browser_esm.Ay.textarea.withConfig({displayName:"errorActions__TextArea",componentId:"sc-mspoll-1"})(["width:100%;min-height:200px;"]),P=styled_components_browser_esm.Ay.p.withConfig({displayName:"errorActions__P",componentId:"sc-mspoll-2"})(["margin:0 0 8px 0;"]),Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"errorActions__Wrapper",componentId:"sc-mspoll-3"})(["display:flex;"]);function ErrorActions(t0){const $=(0,dist.c)(13),{error,errorInfo}=t0,textAreaContent=`${error}\n${errorInfo.componentStack}`,reload=errorActions_temp;let t1,t2,t3,t4,t5,t6,t7,t8,t9;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(P,null,(0,i18n.__)("Something went wrong!","web-stories")),$[0]=t1):t1=$[0],$[1]===Symbol.for("react.memo_cache_sentinel")?(t2=react.createElement(P,null,(0,i18n.__)("The editor has crashed. Please try reloading the page and report the error using the button below.","web-stories")),$[1]=t2):t2=$[1],$[2]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(P,null,(0,i18n.__)("Apologies for the inconvenience.","web-stories")),$[2]=t3):t3=$[2],$[3]!==textAreaContent.length?(t4=e=>e.target.setSelectionRange(0,textAreaContent.length),$[3]=textAreaContent.length,$[4]=t4):t4=$[4],$[5]!==t4||$[6]!==textAreaContent?(t5=react.createElement(P,null,react.createElement(TextArea,{readOnly:!0,value:textAreaContent,onFocus:t4})),$[5]=t4,$[6]=textAreaContent,$[7]=t5):t5=$[7],$[8]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(button_button.$,{variant:constants.Ak.Rectangle,type:constants.VQ.Quaternary,size:constants.Mp.Small,onClick:reload},(0,i18n.__)("Reload","web-stories")),t7=react.createElement(copyStoryDataToClipboard,null),$[8]=t6,$[9]=t7):(t6=$[8],t7=$[9]),$[10]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(Wrapper,null,t6,t7,react.createElement(button_button.x,{variant:constants.Ak.Rectangle,type:constants.VQ.Primary,size:constants.Mp.Small,href:"https://wordpress.org/support/plugin/web-stories/#new-topic-0",target:"_blank",rel:"noreferrer"},(0,i18n.__)("Report Error","web-stories"))),$[10]=t8):t8=$[10],$[11]!==t5?(t9=react.createElement(Message,null,t1,t2,t3,t5,t8),$[11]=t5,$[12]=t9):t9=$[12],t9}function errorActions_temp(){window.location.reload(!0)}ErrorActions.propTypes={error:prop_types_default().instanceOf(Error),errorInfo:prop_types_default().object};const errorActions=ErrorActions;ErrorActions.__docgenInfo={description:"",methods:[],displayName:"ErrorActions",props:{error:{description:"",type:{name:"instanceOf",value:"Error"},required:!1},errorInfo:{description:"",type:{name:"object"},required:!1}}};class ErrorBoundary extends react_src.uA{state={error:null,errorInfo:null};componentDidCatch(error,errorInfo){this.setState({error,errorInfo});const msg=errorInfo?`${error.message}\n\n${errorInfo.componentName}\n${errorInfo.componentStack}`:error.message;(0,tracking_src.Oz)("editor_error_boundary",msg,!0)}render(){const{error,errorInfo}=this.state;return error?react.createElement(errorActions,{error,errorInfo}):this.props.children}}const errorBoundary=ErrorBoundary;var app_config=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),api=__webpack_require__("./packages/story-editor/src/app/api/index.ts"),media3p_api=__webpack_require__("./packages/story-editor/src/app/media/media3p/api/index.js"),app_history=__webpack_require__("./packages/story-editor/src/app/history/index.ts"),font=__webpack_require__("./packages/story-editor/src/app/font/index.ts"),media=__webpack_require__("./packages/story-editor/src/app/media/index.js"),currentUser=__webpack_require__("./packages/story-editor/src/app/currentUser/index.ts"),taxonomy=__webpack_require__("./packages/story-editor/src/app/taxonomy/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),useIsUploadingToStory=__webpack_require__("./packages/story-editor/src/utils/useIsUploadingToStory.js");const autoSaveHandler=function AutoSaveHandler(){const{autoSaveInterval}=(0,app.UK)(),{state:{hasNewChanges}}=(0,app.W6)(),{autoSave,isSaving}=(0,app.P3)((({actions,state})=>({isSaving:state.meta.isSaving,autoSave:actions.autoSave}))),isUploading=(0,useIsUploadingToStory.A)(),cachedSaveStoryRef=(0,react_src.li)(autoSave);return(0,react_src.vJ)((()=>{cachedSaveStoryRef.current=autoSave}),[autoSave]),(0,react_src.vJ)((()=>{if(!hasNewChanges||!autoSaveInterval||isUploading||isSaving)return;const timeout=setTimeout((()=>cachedSaveStoryRef.current()),1e3*autoSaveInterval);return()=>clearTimeout(timeout)}),[autoSaveInterval,hasNewChanges,isUploading,isSaving]),null};var sessionStore=__webpack_require__("./packages/design-system/src/utils/sessionStore.ts"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),getSessionStorageKey=__webpack_require__("./packages/story-editor/src/utils/getSessionStorageKey.ts");function LocalAutoSave(){const{localAutoSaveInterval=15}=(0,app.UK)(),{state:{hasNewChanges}}=(0,app.W6)(),isUploading=(0,useIsUploadingToStory.A)(),{isAutoSavingStory}=(0,app.P3)((({state})=>({isAutoSavingStory:state.meta.isAutoSavingStory}))),{story,pages,restoreLocalAutoSave}=(0,app.P3)((({state:state_0,actions})=>({story:state_0.story,pages:state_0.pages,restoreLocalAutoSave:actions.restoreLocalAutoSave}))),{storyId,status}=story,isNew="auto-draft"===status,[backup,setBackup]=(0,react_src.J0)(null),storyRef=(0,react_src.li)(),pagesRef=(0,react_src.li)();(0,react_src.vJ)((()=>{storyRef.current=story,pagesRef.current=pages}),[story,pages]),(0,react_src.vJ)((()=>{if(!hasNewChanges||!localAutoSaveInterval||isUploading||isAutoSavingStory)return;const timeout=setTimeout((()=>sessionStore.eA.setItemByKey((0,getSessionStorageKey.A)(storyId,isNew),{story,pages})),1e3*localAutoSaveInterval);return()=>clearTimeout(timeout)}),[localAutoSaveInterval,hasNewChanges,isUploading,pages,story,storyId,isNew,isAutoSavingStory]);const onClose=()=>{sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(storyId,isNew)),setBackup(null)},didAutoSaveRef=(0,react_src.li)(isAutoSavingStory);(0,react_src.vJ)((()=>{isAutoSavingStory?didAutoSaveRef.current=!0:didAutoSaveRef.current&&!backup&&(sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(storyId,!1)),didAutoSaveRef.current=!1)}),[isAutoSavingStory,backup,storyId]);const handleNewChangesRef=(0,react_src.li)(!1),wasNewRef=(0,react_src.li)(isNew);if((0,react_src.vJ)((()=>{hasNewChanges?handleNewChangesRef.current=!0:handleNewChangesRef.current&&!backup&&(wasNewRef.current?sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(null,!0)):sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(storyId,!1)),handleNewChangesRef.current=!1,wasNewRef.current=isNew)}),[hasNewChanges,backup,storyId,isNew]),(0,react_src.vJ)((()=>{const existingAutoSave=sessionStore.eA.getItemByKey((0,getSessionStorageKey.A)(storyId,isNew));if(!existingAutoSave)return;JSON.stringify(existingAutoSave.pages)!==JSON.stringify(pagesRef.current)&&JSON.stringify(existingAutoSave.story)!==JSON.stringify(storyRef.current)?setBackup(existingAutoSave):sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(storyId,isNew))}),[setBackup,isNew,storyId]),!backup)return null;return react.createElement(dialog.A,{isOpen:!0,secondaryText:(0,i18n.__)("Dismiss","web-stories"),onClose,actions:react.createElement(react.Fragment,null,react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,onClick:onClose},(0,i18n.__)("Dismiss","web-stories")),react.createElement(button_button.$,{type:constants.VQ.Primary,size:constants.Mp.Small,onClick:()=>{restoreLocalAutoSave(),sessionStore.eA.deleteItemByKey((0,getSessionStorageKey.A)(storyId,isNew)),setBackup(null)}},(0,i18n.__)("Restore Backup","web-stories")))},react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,i18n.__)("The backup of this story in your browser is different from the current version.","web-stories")))}const localAutoSave=LocalAutoSave;LocalAutoSave.__docgenInfo={description:"",methods:[],displayName:"LocalAutoSave"};var dropTargets=__webpack_require__("./packages/story-editor/src/components/dropTargets/index.js"),helpCenter=__webpack_require__("./packages/story-editor/src/app/helpCenter/index.ts"),noop=__webpack_require__("./packages/story-editor/src/utils/noop.ts");const context=(0,react_src.q6)({state:{dataUrls:{}},actions:{queuePageImageGeneration:noop.l}});const pageDataUrls_usePageDataUrls=function usePageDataUrls(t0){const selector=void 0===t0?react_src.D_:t0;return(0,react_src.i7)(context,selector)};var useIdleTaskQueue=__webpack_require__("./packages/story-editor/src/utils/useIdleTaskQueue.ts"),src_constants=__webpack_require__("./packages/units/src/constants.ts"),storyPageToNode=__webpack_require__("./packages/story-editor/src/app/pageCanvas/utils/storyPageToNode.tsx");const utils_storyPageToDataUrl=async function storyPageToDataUrl(page,{width=400,...options}){const htmlToImage=await __webpack_require__.e(4622).then(__webpack_require__.bind(__webpack_require__,"./node_modules/html-to-image/es/index.js")),[node,cleanup]=await(0,storyPageToNode.A)(page,width),dataUrl=await htmlToImage.toJpeg(node,{...options,width,height:width*(1/src_constants.iZ),canvasHeight:width*(1/src_constants.iZ),canvasWidth:width});return cleanup(),dataUrl};function PageDataUrlProvider({children}){const[dataUrls,setDataUrls]=(0,react_src.J0)({}),queueIdleTask=(0,useIdleTaskQueue.A)(),queuePageImageGeneration=(0,react_src.hb)((storyPage=>{const idleTaskUid=storyPage.id,clearQueueOfPageTask=queueIdleTask({taskId:idleTaskUid,task:async()=>{try{const dataUrl=await utils_storyPageToDataUrl(storyPage,{});setDataUrls((state=>({...state,[storyPage?.id]:dataUrl})))}catch{}}});return()=>{clearQueueOfPageTask()}}),[queueIdleTask]),value=(0,react_src.Kr)((()=>({state:{dataUrls},actions:{queuePageImageGeneration}})),[queuePageImageGeneration,dataUrls]);return react.createElement(context.Provider,{value},children)}const pageDataUrlsProvider=PageDataUrlProvider;PageDataUrlProvider.__docgenInfo={description:"",methods:[],displayName:"PageDataUrlProvider"};var pageCanvas=__webpack_require__("./packages/story-editor/src/app/pageCanvas/index.ts"),migration_src=(__webpack_require__("./node_modules/core-js/modules/web.dom-exception.stack.js"),__webpack_require__("./packages/migration/src/index.ts")),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),dummyData=__webpack_require__("./packages/story-editor/src/components/devTools/dummyData.js");const Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"devTools__Container",componentId:"sc-1mo3vwv-0"})(["position:fixed;z-index:2147483646;bottom:0;left:0;display:flex;flex-direction:column;width:35%;height:50%;border:6px solid ",";background:",";color:",";"],(({theme})=>theme.colors.bg.secondary),(({theme})=>theme.colors.bg.primary),(({theme})=>theme.colors.fg.secondary)),Textarea=styled_components_browser_esm.Ay.textarea.withConfig({displayName:"devTools__Textarea",componentId:"sc-1mo3vwv-1"})(["flex:1;border:0;background:",";color:",";white-space:nowrap;overflow:auto;"],(({theme})=>theme.colors.bg.primary),(({theme})=>theme.colors.fg.secondary)),Options=styled_components_browser_esm.Ay.div.withConfig({displayName:"devTools__Options",componentId:"sc-1mo3vwv-2"})(["display:flex;justify-content:space-between;padding:6px;"]),Label=styled_components_browser_esm.Ay.label.withConfig({displayName:"devTools__Label",componentId:"sc-1mo3vwv-3"})(["margin-right:6px;"]),Button=styled_components_browser_esm.Ay.button.withConfig({displayName:"devTools__Button",componentId:"sc-1mo3vwv-4"})(["margin-left:6px;"]),replaceResourcesWithDummy=state=>{const videosToReload=[];return[{...state,pages:state.pages.map((page=>({...page,elements:page.elements.map((element=>{const newElement={...element};return"resource"in element&&(newElement.resource={...element.resource},"video"===element.type&&(newElement.resource.mimeType="video/mp4",newElement.resource.src=dummyData.g,newElement.resource.poster=dummyData.w,videosToReload.push(newElement.id)),"image"===element.type&&(newElement.resource.mimeType="image/png",newElement.resource.src=dummyData.w)),newElement}))})))},videosToReload]},getResourceFileName=src=>{if(!src.length)return src;const matchedPaths=src.match(/\/([^/?#]+)[^/]*$/);return matchedPaths.length>1?`__WEB_STORIES_TEMPLATE_BASE_URL__/images/templates/%%templateName%%/${matchedPaths[1]}`:src};function DevTools(){const $=(0,dist.c)(33),[isVisible,setIsVisible]=(0,react_src.J0)(!1),[isBase64,setIsBase64]=(0,react_src.J0)(!1),[isDummyResources,setIsDummyResources]=(0,react_src.J0)(!1),[isTemplate,setIsTemplate]=(0,react_src.J0)(!1),{showSnackbar}=(0,useSnackbar.d)(),textareaRef=(0,react_src.li)(),{reducerState,restore}=(0,app_story.P3)(devTools_temp),{pages,current,selection,story:t0}=reducerState,{globalStoryStyles}=t0,reducerStateSlice={current,selection,story:{globalStoryStyles},version:migration_src.I,pages},storyData=isDummyResources?replaceResourcesWithDummy(reducerStateSlice)[0]:isTemplate?(state=reducerStateSlice,{...state,pages:state.pages.map((page=>({...page,elements:page.elements.map((element=>{const newElement={...element};return"resource"in element&&(newElement.resource={...element.resource},"video"===element.type&&(newElement.resource.id=0,newElement.resource.posterId=0,newElement.resource.src=getResourceFileName(newElement.resource.src),newElement.resource.poster=getResourceFileName(newElement.resource.poster)),"image"===element.type&&(newElement.resource.id=0,newElement.resource.sizes=[],newElement.resource.src=getResourceFileName(newElement.resource.src))),newElement})),pageTemplateType:page?.pageTemplateType??""})))}):reducerStateSlice;var state;let t1;$[0]!==setIsDummyResources?(t1=()=>setIsDummyResources(_temp2),$[0]=setIsDummyResources,$[1]=t1):t1=$[1];const toggleDummyResources=t1;let t2;$[2]!==setIsTemplate?(t2=()=>setIsTemplate(_temp3),$[2]=setIsTemplate,$[3]=t2):t2=$[3];const toggleTemplate=t2;let t3;$[4]!==setIsBase64?(t3=()=>setIsBase64(_temp4),$[4]=setIsBase64,$[5]=t3):t3=$[5];const toggleBase64=t3;let t4;$[6]!==setIsVisible?(t4=()=>setIsVisible(_temp5),$[6]=setIsVisible,$[7]=t4):t4=$[7];const toggleVisible=t4;let t5;$[8]!==showSnackbar||$[9]!==textareaRef.current?(t5=()=>{textareaRef.current.select(),document.execCommand("copy"),textareaRef.current.setSelectionRange(0,0),showSnackbar({message:"Copied to clipboard",timeout:1200})},$[8]=showSnackbar,$[9]=textareaRef.current,$[10]=t5):t5=$[10];const copyToClipboard=t5,loadFromInput=()=>{let input=output;try{input=window.atob(input)}catch(t6){}const inputState=JSON.parse(input),stateToRestore={...inputState,story:{...reducerState.story,...inputState.story},capabilities:reducerState.capabilities},[stateWithDummyResources,videosToReload]=isDummyResources?replaceResourcesWithDummy(stateToRestore):[stateToRestore,[]];restore(stateWithDummyResources),videosToReload.length>0&&videosToReload.forEach(_temp6),showSnackbar({message:"Story restored from input",timeout:1200})};let t7;$[11]===Symbol.for("react.memo_cache_sentinel")?(t7={key:"mod+shift+alt+j",editable:!0},$[11]=t7):t7=$[11],(0,keyboard.pP)(t7,toggleVisible);const jsonStr=JSON.stringify(storyData,null,2),defaultOutput=isBase64?window.btoa(jsonStr):jsonStr,[t8,setOutput]=(0,react_src.J0)(defaultOutput),output=t8;let t9,t10,t11;$[12]!==defaultOutput||$[13]!==setOutput?(t9=()=>setOutput(defaultOutput),$[12]=defaultOutput,$[13]=setOutput,$[14]=t9):t9=$[14],$[15]!==defaultOutput?(t10=[defaultOutput],$[15]=defaultOutput,$[16]=t10):t10=$[16],(0,react_src.vJ)(t9,t10),$[17]!==setOutput?(t11=evt=>setOutput(evt.target.value),$[17]=setOutput,$[18]=t11):t11=$[18];const changeTextarea=t11;let t12;return $[19]!==changeTextarea||$[20]!==copyToClipboard||$[21]!==isBase64||$[22]!==isDummyResources||$[23]!==isTemplate||$[24]!==isVisible||$[25]!==loadFromInput||$[26]!==output||$[27]!==textareaRef||$[28]!==toggleBase64||$[29]!==toggleDummyResources||$[30]!==toggleTemplate||$[31]!==toggleVisible?(t12=isVisible?react.createElement(Container,null,react.createElement(Options,null,react.createElement("div",null,react.createElement(Label,{title:"For easier sharing thru various channels"},react.createElement("input",{type:"checkbox",checked:isBase64,onChange:toggleBase64}),"Base64"),react.createElement(Label,{title:"Replace resources with dummy resources"},react.createElement("input",{type:"checkbox",checked:isDummyResources,onChange:toggleDummyResources}),"Dummy resources"),react.createElement(Label,{title:"Export as Template"},react.createElement("input",{type:"checkbox",checked:isTemplate,onChange:toggleTemplate}),"Template")),react.createElement("div",null,react.createElement(Button,{"aria-label":"Load data from input",onClick:loadFromInput},"Load"),react.createElement(Button,{"aria-label":"Copy data to clipboard",onClick:copyToClipboard},"Copy"),react.createElement(Button,{"aria-label":"Close DevTools",onClick:toggleVisible},"X"))),react.createElement(Textarea,{ref:textareaRef,className:"mousetrap",value:output,onChange:changeTextarea})):null,$[19]=changeTextarea,$[20]=copyToClipboard,$[21]=isBase64,$[22]=isDummyResources,$[23]=isTemplate,$[24]=isVisible,$[25]=loadFromInput,$[26]=output,$[27]=textareaRef,$[28]=toggleBase64,$[29]=toggleDummyResources,$[30]=toggleTemplate,$[31]=toggleVisible,$[32]=t12):t12=$[32],t12}function _temp6(videoId){const videoEl=document.getElementById(`video-${videoId}`);videoEl&&videoEl.load()}function _temp5(v_2){return!v_2}function _temp4(v_1){return!v_1}function _temp3(v_0){return!v_0}function _temp2(v){return!v}function devTools_temp(t0){const{internal}=t0;return{reducerState:internal.reducerState,restore:internal.restore}}const devTools=DevTools;DevTools.__docgenInfo={description:"",methods:[],displayName:"DevTools"};var keyboardOnlyOutline=__webpack_require__("./packages/story-editor/src/utils/keyboardOnlyOutline.js");const src_getDefaultConfig=()=>({locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},allowedMimeTypes:{audio:["audio/mpeg","audio/aac","audio/wav","audio/ogg"],image:["image/png","image/jpeg","image/jpg","image/gif","image/webp"],caption:["text/vtt"],vector:["image/svg+xml"],video:["video/mp4","video/webm"]},isRTL:!1,storyId:1,cdnURL:"https://wp.stories.google/static/main/",maxUpload:314572800,capabilities:{hasUploadMediaAction:!1,canManageSettings:!1},metadata:{publisher:""},canViewDefaultTemplates:!0,showMedia3p:!0,encodeMarkup:!0,ffmpegCoreUrl:"https://wp.stories.google/static/main/js/@ffmpeg/core@0.11.0/dist/ffmpeg-core.js",apiCallbacks:{},MediaUpload:()=>null,styleConstants:{topOffset:0,leftOffset:0}});function StoryEditor(t0){const $=(0,dist.c)(34),{config,initialEdits,children}=t0;let t1;$[0]!==config?(t1=(0,deepMerge.A)(src_getDefaultConfig(),config),$[0]=config,$[1]=t1):t1=$[1];const _config=t1,{storyId,isRTL,flags,styleConstants:t2}=_config;let t3;$[2]!==t2?(t3=void 0===t2?{}:t2,$[2]=t2,$[3]=t3):t3=$[3];const{leftOffset,topOffset}=t3;let t4,t5,t6,t7,t10,t11,t12,t13,t8,t9,t14,t15,t16,t17,t18;return $[4]!==isRTL?(t4=isRTL?[stylis_rtl.Ay]:[],$[4]=isRTL,$[5]=t4):t4=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(localAutoSave,null),t6=react.createElement(autoSaveHandler,null),$[6]=t5,$[7]=t6):(t5=$[6],t6=$[7]),$[8]!==isRTL||$[9]!==leftOffset||$[10]!==topOffset?(t7={isRTL,leftOffset,topOffset},$[8]=isRTL,$[9]=leftOffset,$[10]=topOffset,$[11]=t7):t7=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(GlobalStyle,null),t9=react.createElement(devTools,null),t10=react.createElement(moveable_src.$v,null),t11=react.createElement(moveable_src.sK,null),t12=react.createElement(styles.E,null),t13=react.createElement(keyboardOnlyOutline.Ay,null),$[12]=t10,$[13]=t11,$[14]=t12,$[15]=t13,$[16]=t8,$[17]=t9):(t10=$[12],t11=$[13],t12=$[14],t13=$[15],t8=$[16],t9=$[17]),$[18]!==children||$[19]!==t7?(t14=react.createElement(taxonomy.r,null,react.createElement(currentUser.Qd,null,react.createElement(font.pK,null,react.createElement(media.YE,null,t5,t6,react.createElement(src.gS,null,react.createElement(dropTargets.l,null,react.createElement(helpCenter.i,null,react.createElement(pageCanvas.Vz,null,react.createElement(pageDataUrlsProvider,null,react.createElement(popupProvider.A,{value:t7},t8,t9,t10,t11,t12,t13,children)))))))))),$[18]=children,$[19]=t7,$[20]=t14):t14=$[20],$[21]!==initialEdits||$[22]!==storyId||$[23]!==t14?(t15=react.createElement(api.c4,null,react.createElement(media3p_api.b,null,react.createElement(app_history.os,{size:50},react.createElement(snackbarProvider.A,null,react.createElement(app_story.Zx,{storyId,initialEdits},t14))))),$[21]=initialEdits,$[22]=storyId,$[23]=t14,$[24]=t15):t15=$[24],$[25]!==_config||$[26]!==t15?(t16=react.createElement(styled_components_browser_esm.NP,{theme:src_theme},react.createElement(errorBoundary,null,react.createElement(app_config.sG,{config:_config},t15))),$[25]=_config,$[26]=t15,$[27]=t16):t16=$[27],$[28]!==t16||$[29]!==t4?(t17=react.createElement(styled_components_browser_esm.ID,{stylisPlugins:t4},t16),$[28]=t16,$[29]=t4,$[30]=t17):t17=$[30],$[31]!==flags||$[32]!==t17?(t18=react.createElement(FlagsProvider,{features:flags},t17),$[31]=flags,$[32]=t17,$[33]=t18):t18=$[33],t18}Object.defineProperty(stylis_rtl.Ay,"name",{value:"stylisRTLPlugin"}),StoryEditor.propTypes={config:prop_types_default().object.isRequired,initialEdits:prop_types_default().object,children:prop_types_default().node};const storyEditor=StoryEditor;StoryEditor.__docgenInfo={description:"",methods:[],displayName:"StoryEditor",props:{config:{description:"",type:{name:"object"},required:!0},initialEdits:{description:"",type:{name:"object"},required:!1},children:{description:"",type:{name:"node"},required:!1}}};var generatePatternStyles=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),animation_src=__webpack_require__("./packages/animation/src/index.ts"),propTypes=__webpack_require__("./packages/story-editor/src/propTypes.js"),displayElement=__webpack_require__("./packages/story-editor/src/components/canvas/displayElement.js");const previewPageElements=(0,react_src.ph)((function PreviewPageElements({page}){return page.elements.map((element=>react.createElement(displayElement.A,{previewMode:!0,key:element.id,page,element,isAnimatable:!0})))})),FullBleedPreviewWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"previewPage__FullBleedPreviewWrapper",componentId:"sc-1r5t7dq-0"})(["height:",";width:100%;overflow:hidden;position:relative;display:flex;align-items:center;background-color:white;",";"],(({pageSize})=>`${pageSize.containerHeight}px`),(({background})=>(0,generatePatternStyles.A)(background))),PreviewSafeZone=styled_components_browser_esm.Ay.div.withConfig({displayName:"previewPage__PreviewSafeZone",componentId:"sc-1r5t7dq-1"})(["width:100%;height:",";overflow:visible;position:absolute;margin:0;"],(({pageSize})=>`${pageSize.height}px`));function PreviewPageAnimationController(t0){const $=(0,dist.c)(7),{animationState}=t0,WAAPIAnimationMethods=(0,animation_src.oB)(previewPage_temp);let t1,t2,t3,t4;return $[0]!==WAAPIAnimationMethods||$[1]!==animationState?(t1=()=>{switch(animationState){case animation_src.TR.Playing:return WAAPIAnimationMethods.play(),noop.l;case animation_src.TR.Reset:return WAAPIAnimationMethods.reset(),noop.l;case animation_src.TR.Scrubbing:case animation_src.TR.Paused:return WAAPIAnimationMethods.pause(),noop.l;default:return noop.l}},t2=[animationState,WAAPIAnimationMethods],$[0]=WAAPIAnimationMethods,$[1]=animationState,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]),(0,react_src.vJ)(t1,t2),$[4]!==WAAPIAnimationMethods?(t3=()=>()=>WAAPIAnimationMethods.reset(),t4=[WAAPIAnimationMethods],$[4]=WAAPIAnimationMethods,$[5]=t3,$[6]=t4):(t3=$[5],t4=$[6]),(0,react_src.vJ)(t3,t4),null}function previewPage_temp(t0){const{actions}=t0;return actions.WAAPIAnimationMethods}const PreviewPageDisplay=(0,react_src.ph)((0,react_src.Rf)((function PreviewPageDisplay(t0,ref){const $=(0,dist.c)(10),{page,pageSize}=t0;let t1,t2,t3;return $[0]!==page?(t1=react.createElement(previewPageElements,{page}),$[0]=page,$[1]=t1):t1=$[1],$[2]!==pageSize||$[3]!==t1?(t2=react.createElement(PreviewSafeZone,{pageSize},t1),$[2]=pageSize,$[3]=t1,$[4]=t2):t2=$[4],$[5]!==page.backgroundColor||$[6]!==pageSize||$[7]!==ref||$[8]!==t2?(t3=react.createElement(FullBleedPreviewWrapper,{ref,pageSize,background:page.backgroundColor},t2),$[5]=page.backgroundColor,$[6]=pageSize,$[7]=ref,$[8]=t2,$[9]=t3):t3=$[9],t3}))),PreviewPage=(0,react_src.Rf)((function PreviewPage(t0,ref){const $=(0,dist.c)(13),{page,pageSize,animationState:t1,onAnimationComplete}=t0,animationState=void 0===t1?animation_src.TR.Reset:t1;let t2,t3,t4,t5;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[0]=t2):t2=$[0],$[1]!==page||$[2]!==pageSize||$[3]!==ref?(t3=react.createElement(PreviewPageDisplay,{ref,page,pageSize}),$[1]=page,$[2]=pageSize,$[3]=ref,$[4]=t3):t3=$[4],$[5]!==animationState?(t4=react.createElement(PreviewPageAnimationController,{animationState}),$[5]=animationState,$[6]=t4):t4=$[6],$[7]!==onAnimationComplete||$[8]!==page.animations||$[9]!==page.elements||$[10]!==t3||$[11]!==t4?(t5=react.createElement(styled_components_browser_esm.ID,{stylisPlugins:t2},react.createElement(animation_src.S,{animations:page.animations,elements:page.elements,onWAAPIFinish:onAnimationComplete},t3,t4)),$[7]=onAnimationComplete,$[8]=page.animations,$[9]=page.elements,$[10]=t3,$[11]=t4,$[12]=t5):t5=$[12],t5}));PreviewPage.propTypes={page:propTypes.Ed.page.isRequired,pageSize:propTypes.Gn.isRequired,animationState:prop_types_default().oneOf(Object.values(animation_src.TR)),onAnimationComplete:prop_types_default().func},PreviewPageDisplay.propTypes={page:propTypes.Ed.page.isRequired,pageSize:propTypes.Gn.isRequired},PreviewPageAnimationController.propTypes={animationState:prop_types_default().oneOf(Object.values(animation_src.TR))};PreviewPage.__docgenInfo={description:"",methods:[],displayName:"PreviewPage",props:{animationState:{defaultValue:{value:"StoryAnimationState.Reset",computed:!0},description:"",type:{name:"enum",computed:!0,value:"Object.values(StoryAnimationState)"},required:!1},page:{description:"",type:{name:"custom",raw:"StoryPropTypes.page.isRequired"},required:!1},pageSize:{description:"",type:{name:"custom",raw:"PageSizePropType.isRequired"},required:!1},onAnimationComplete:{description:"",type:{name:"func"},required:!1}}};class PreviewErrorBoundary extends react_src.uA{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(error,errorInfo){console.error(error,errorInfo)}render(){return this.state.hasError?react.createElement("div",null):this.props.children}}PreviewErrorBoundary.__docgenInfo={description:"",methods:[],displayName:"PreviewErrorBoundary",props:{children:{description:"",type:{name:"node"},required:!0}}};__webpack_require__("./packages/design-system/src/icons/arrow_down_left_curved.svg"),__webpack_require__("./packages/design-system/src/icons/arrow_down_right_curved.svg");var components_tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");function historyButtons_extends(){return historyButtons_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},historyButtons_extends.apply(null,arguments)}function HistoryButton(t0){const $=(0,dist.c)(12);let children,rest,shortcut,title,t1,t2;return $[0]!==t0?(({title,shortcut,children,...rest}=t0),$[0]=t0,$[1]=children,$[2]=rest,$[3]=shortcut,$[4]=title):(children=$[1],rest=$[2],shortcut=$[3],title=$[4]),$[5]!==children||$[6]!==rest?(t1=react.createElement(button_button.$,historyButtons_extends({variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small},rest),children),$[5]=children,$[6]=rest,$[7]=t1):t1=$[7],$[8]!==shortcut||$[9]!==t1||$[10]!==title?(t2=react.createElement(components_tooltip.A,{title,shortcut,hasTail:!0},t1),$[8]=shortcut,$[9]=t1,$[10]=title,$[11]=t2):t2=$[11],t2}HistoryButton.propTypes={title:prop_types_default().string.isRequired,shortcut:prop_types_default().string.isRequired,children:prop_types_default().node.isRequired};var eye=__webpack_require__("./packages/design-system/src/icons/eye.svg"),dom_src=__webpack_require__("./packages/dom/src/index.ts");function PreviewErrorDialog(t0){const $=(0,dist.c)(8),{isOpen,onClose,onRetry}=t0;let t1,t2,t3,t4,t5;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=(0,i18n.__)("Open preview","web-stories"),t2=(0,i18n.__)("Cancel","web-stories"),$[0]=t1,$[1]=t2):(t1=$[0],t2=$[1]),$[2]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Try again","web-stories"),$[2]=t3):t3=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,i18n.__)("The preview window failed to open.","web-stories")),$[3]=t4):t4=$[3],$[4]!==isOpen||$[5]!==onClose||$[6]!==onRetry?(t5=react.createElement(dialog.A,{isOpen,onClose,title:t1,secondaryText:t2,onPrimary:onRetry,primaryText:t3},t4),$[4]=isOpen,$[5]=onClose,$[6]=onRetry,$[7]=t5):t5=$[7],t5}PreviewErrorDialog.propTypes={isOpen:prop_types_default().bool.isRequired,onClose:prop_types_default().func.isRequired,onRetry:prop_types_default().func.isRequired};const previewErrorDialog=PreviewErrorDialog;PreviewErrorDialog.__docgenInfo={description:"",methods:[],displayName:"PreviewErrorDialog",props:{isOpen:{description:"",type:{name:"bool"},required:!0},onClose:{description:"",type:{name:"func"},required:!0},onRetry:{description:"",type:{name:"func"},required:!0}}};function PreviewButton({forceIsSaving=!1}){const{isSaving:isSaving_0,previewLink:previewLink_0,status:status_0,autoSave:autoSave_0,saveStory:saveStory_0}=(0,app.P3)((({state:{meta:{isSaving},story:{status,previewLink}},actions:{autoSave,saveStory}})=>({isSaving,status,previewLink,autoSave,saveStory}))),isUploading=(0,useIsUploadingToStory.A)(),[previewLinkToOpenViaDialog,setPreviewLinkToOpenViaDialog]=(0,react_src.J0)(null),isDraft=["draft","auto-draft"].includes(status_0)||!status_0,decoratePreviewLink=urlString=>{const url=new URL(urlString);return url.hash="#development=1",url.toString()},openPreviewLink=(0,react_src.hb)((async()=>{let popup;(0,tracking_src.sx)("preview_story");try{if(popup=window.open("about:blank","story-preview"),popup){popup.document.write("<!DOCTYPE html><html><head>"),popup.document.write("<title>"),popup.document.write((0,dom_src.Zn)((0,i18n.__)("Generating the preview…","web-stories"))),popup.document.write("</title>"),popup.document.write("</head><body>"),popup.document.write((0,dom_src.Zn)((0,i18n.__)("Please wait. Generating the preview…","web-stories")));const decoratedPreviewLink=decoratePreviewLink(previewLink_0);popup.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(decoratedPreviewLink)});\n            }, 5000);\n          <\/script>`)}}catch{}const updateFunc=isDraft?saveStory_0:autoSave_0;try{const update=await updateFunc();if(popup&&!popup.closed&&popup.location.href){const updatedPreviewLink=decoratePreviewLink(update?.previewLink??previewLink_0);popup.location.replace(updatedPreviewLink)}}catch{setPreviewLinkToOpenViaDialog(previewLink_0)}}),[autoSave_0,isDraft,previewLink_0,saveStory_0]),openPreviewLinkSync=(0,react_src.hb)((evt=>{setPreviewLinkToOpenViaDialog(null);const decoratedPreviewLink_0=decoratePreviewLink(previewLinkToOpenViaDialog);window.open(decoratedPreviewLink_0,"story-preview"+Math.random()),evt.preventDefault()}),[previewLinkToOpenViaDialog]),onDialogClose=(0,react_src.hb)((()=>setPreviewLinkToOpenViaDialog(null)),[]),label=(0,i18n.__)("Preview","web-stories");return react.createElement(react.Fragment,null,react.createElement(components_tooltip.A,{title:label,hasTail:!0},react.createElement(button_button.$,{variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small,onClick:openPreviewLink,disabled:isSaving_0||forceIsSaving||isUploading,"aria-label":label},react.createElement(eye.A,null))),react.createElement(previewErrorDialog,{isOpen:Boolean(previewLinkToOpenViaDialog),onClose:onDialogClose,onRetry:openPreviewLinkSync}))}PreviewButton.__docgenInfo={description:"",methods:[],displayName:"PreviewButton",props:{forceIsSaving:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var date_src=__webpack_require__("./packages/date/src/index.ts"),useRefreshPostEditURL=__webpack_require__("./packages/story-editor/src/utils/useRefreshPostEditURL.ts"),checklist=__webpack_require__("./packages/story-editor/src/components/checklist/index.js"),publishModal=__webpack_require__("./packages/story-editor/src/components/publishModal/publishModal.js"),buttonWithChecklistWarning=__webpack_require__("./packages/story-editor/src/components/header/buttons/buttonWithChecklistWarning.js");function PublishButton(t0){const $=(0,dist.c)(38),{forceIsSaving}=t0,{date:date_0,storyId:storyId_0,saveStory:saveStory_0,titleLength,editLink:editLink_0,canPublish}=(0,app.P3)(publish_temp),showPriorityIssues_0=(0,checklist.Em)(publish_temp2),[showDialog,setShowDialog]=(0,react_src.J0)(!1),publishButtonRef=(0,react_src.li)(),refreshPostEditURL=(0,useRefreshPostEditURL.A)(storyId_0,editLink_0);let t1;$[0]!==date_0?(t1=(0,date_src.dS)((0,date_src.Yu)((0,date_src.ay)(date_0,(0,date_src.$E)()),1),(0,date_src.ay)(new Date,(0,date_src.$E)())),$[0]=date_0,$[1]=t1):t1=$[1];const hasFutureDate=t1;let t2,t3;$[2]!==canPublish||$[3]!==hasFutureDate||$[4]!==refreshPostEditURL||$[5]!==saveStory_0||$[6]!==setShowDialog||$[7]!==titleLength?(t2=()=>{let newStatus="pending";canPublish&&(newStatus=hasFutureDate?"future":"publish"),(0,tracking_src.sx)("publish_story",{status:newStatus,title_length:titleLength}),setShowDialog(!1),saveStory_0({status:newStatus}),refreshPostEditURL()},$[2]=canPublish,$[3]=hasFutureDate,$[4]=refreshPostEditURL,$[5]=saveStory_0,$[6]=setShowDialog,$[7]=titleLength,$[8]=t2):t2=$[8],$[9]!==canPublish||$[10]!==hasFutureDate||$[11]!==refreshPostEditURL||$[12]!==saveStory_0||$[13]!==titleLength?(t3=[refreshPostEditURL,saveStory_0,hasFutureDate,titleLength,canPublish],$[9]=canPublish,$[10]=hasFutureDate,$[11]=refreshPostEditURL,$[12]=saveStory_0,$[13]=titleLength,$[14]=t3):t3=$[14];const publish=(0,react_src.hb)(t2,t3);let t4,t5;$[15]!==setShowDialog||$[16]!==showPriorityIssues_0?(t4=()=>{showPriorityIssues_0(),setShowDialog(!0)},$[15]=setShowDialog,$[16]=showPriorityIssues_0,$[17]=t4):t4=$[17],$[18]!==showPriorityIssues_0?(t5=[showPriorityIssues_0],$[18]=showPriorityIssues_0,$[19]=t5):t5=$[19];const handlePublish=(0,react_src.hb)(t4,t5);let t6,t7;$[20]!==publishButtonRef||$[21]!==setShowDialog?(t6=t7=>{const{focusPublishButton:t8}=void 0===t7?{}:t7,focusPublishButton=void 0===t8||t8;setShowDialog(!1),focusPublishButton&&publishButtonRef.current?.focus()},$[20]=publishButtonRef,$[21]=setShowDialog,$[22]=t6):t6=$[22],$[23]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[23]=t7):t7=$[23];const closeDialog=(0,react_src.hb)(t6,t7);let t8,t9,t10;return $[24]!==forceIsSaving||$[25]!==handlePublish||$[26]!==hasFutureDate||$[27]!==publishButtonRef?(t8=react.createElement(buttonWithChecklistWarning.A,{ref:publishButtonRef,onClick:handlePublish,disabled:forceIsSaving,hasFutureDate}),$[24]=forceIsSaving,$[25]=handlePublish,$[26]=hasFutureDate,$[27]=publishButtonRef,$[28]=t8):t8=$[28],$[29]!==closeDialog||$[30]!==forceIsSaving||$[31]!==hasFutureDate||$[32]!==publish||$[33]!==showDialog?(t9=react.createElement(publishModal.A,{isOpen:showDialog,onPublish:publish,onClose:closeDialog,hasFutureDate,publishButtonDisabled:forceIsSaving}),$[29]=closeDialog,$[30]=forceIsSaving,$[31]=hasFutureDate,$[32]=publish,$[33]=showDialog,$[34]=t9):t9=$[34],$[35]!==t8||$[36]!==t9?(t10=react.createElement(react.Fragment,null,t8,t9),$[35]=t8,$[36]=t9,$[37]=t10):t10=$[37],t10}function publish_temp2(t0){const{actions:t1}=t0,{showPriorityIssues}=t1;return showPriorityIssues}function publish_temp(t0){const{state:t1,actions:t2}=t0,{story:t3,capabilities}=t1,{date,storyId,title,editLink}=t3,{saveStory}=t2;return{date,storyId,saveStory,titleLength:title?.length||0,editLink,canPublish:Boolean(capabilities?.publish)}}PublishButton.propTypes={forceIsSaving:prop_types_default().bool};PublishButton.__docgenInfo={description:"",methods:[],displayName:"PublishButton",props:{forceIsSaving:{description:"",type:{name:"bool"},required:!1}}};var page_swap=__webpack_require__("./packages/design-system/src/icons/page_swap.svg");function SwitchToDraftButton(t0){const $=(0,dist.c)(8),{forceIsSaving:t1}=t0,forceIsSaving=void 0!==t1&&t1,{isSaving:isSaving_0,saveStory:saveStory_0}=(0,app.P3)(switchToDraft_temp),isUploading=(0,useIsUploadingToStory.A)();let t2,t3;$[0]!==saveStory_0?(t2=()=>{saveStory_0({status:"draft"})},t3=[saveStory_0],$[0]=saveStory_0,$[1]=t2,$[2]=t3):(t2=$[1],t3=$[2]);const handleUnPublish=(0,react_src.hb)(t2,t3);let t4;$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Switch to Draft","web-stories"),$[3]=t4):t4=$[3];const label=t4,t5=isSaving_0||forceIsSaving||isUploading;let t6,t7;return $[4]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(page_swap.A,null),$[4]=t6):t6=$[4],$[5]!==handleUnPublish||$[6]!==t5?(t7=react.createElement(components_tooltip.A,{title:label,hasTail:!0},react.createElement(button_button.$,{variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small,onClick:handleUnPublish,disabled:t5,"aria-label":label},t6)),$[5]=handleUnPublish,$[6]=t5,$[7]=t7):t7=$[7],t7}function switchToDraft_temp(t0){const{state:t1,actions:t2}=t0,{meta:t3}=t1,{isSaving}=t3,{saveStory}=t2;return{isSaving,saveStory}}SwitchToDraftButton.propTypes={forceIsSaving:prop_types_default().bool};SwitchToDraftButton.__docgenInfo={description:"",methods:[],displayName:"SwitchToDraftButton",props:{forceIsSaving:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var floppy_disk=__webpack_require__("./packages/design-system/src/icons/floppy_disk.svg");function PlainButton(t0){const $=(0,dist.c)(8),{text,onClick,disabled}=t0;let t1,t2,t3;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(floppy_disk.A,null),$[0]=t1):t1=$[0],$[1]!==disabled||$[2]!==onClick||$[3]!==text?(t2=react.createElement(button_button.$,{variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small,onClick,disabled,"aria-label":text},t1),$[1]=disabled,$[2]=onClick,$[3]=text,$[4]=t2):t2=$[4],$[5]!==t2||$[6]!==text?(t3=react.createElement(components_tooltip.A,{title:text,hasTail:!0},t2),$[5]=t2,$[6]=text,$[7]=t3):t3=$[7],t3}function UpdateButton(t0){const $=(0,dist.c)(31),{hasUpdates:t1,forceIsSaving:t2}=t0,hasUpdates=void 0!==t1&&t1,forceIsSaving=void 0!==t2&&t2,{isSaving:_isSaving,status:status_0,date:date_0,saveStory:saveStory_0,canPublish}=(0,app.P3)(update_temp),isSaving_0=_isSaving||forceIsSaving,isUploading=(0,useIsUploadingToStory.A)(),{state:t3}=(0,app.W6)(),{hasNewChanges}=t3;let t4,t5,t6;$[0]===Symbol.for("react.memo_cache_sentinel")?(t4={key:["mod+s"]},$[0]=t4):t4=$[0],$[1]!==isSaving_0||$[2]!==isUploading||$[3]!==saveStory_0?(t5=event=>{event.preventDefault(),isSaving_0||isUploading||saveStory_0()},t6=[saveStory_0,isSaving_0,isUploading],$[1]=isSaving_0,$[2]=isUploading,$[3]=saveStory_0,$[4]=t5,$[5]=t6):(t5=$[4],t6=$[5]),(0,keyboard.pP)(t4,t5,t6);const isEnabled=!isSaving_0&&!isUploading&&(hasNewChanges||hasUpdates),isPending="pending"===status_0,isDraft=["draft","auto-draft"].includes(status_0)||!status_0;if(isPending){let t7;$[6]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Save as pending","web-stories"),$[6]=t7):t7=$[6];const t8=!isEnabled;let t9,t10;return $[7]!==saveStory_0?(t9=()=>saveStory_0(),$[7]=saveStory_0,$[8]=t9):t9=$[8],$[9]!==t8||$[10]!==t9?(t10=react.createElement(PlainButton,{text:t7,disabled:t8,onClick:t9}),$[9]=t8,$[10]=t9,$[11]=t10):t10=$[11],t10}if(isDraft){let t7;$[12]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Save draft","web-stories"),$[12]=t7):t7=$[12];const t8=!isEnabled;let t9,t10;return $[13]!==saveStory_0?(t9=()=>saveStory_0(),$[13]=saveStory_0,$[14]=t9):t9=$[14],$[15]!==t8||$[16]!==t9?(t10=react.createElement(PlainButton,{text:t7,disabled:t8,onClick:t9}),$[15]=t8,$[16]=t9,$[17]=t10):t10=$[17],t10}let t7;$[18]!==date_0?(t7=(0,date_src.dS)((0,date_src.Yu)((0,date_src.ay)(date_0,(0,date_src.$E)()),1),(0,date_src.ay)(new Date,(0,date_src.$E)())),$[18]=date_0,$[19]=t7):t7=$[19];const hasFutureDate=t7;let t8;$[20]!==hasFutureDate||$[21]!==status_0?(t8=hasFutureDate&&"private"!==status_0?(0,i18n.__)("Schedule","web-stories"):(0,i18n.__)("Update","web-stories"),$[20]=hasFutureDate,$[21]=status_0,$[22]=t8):t8=$[22];const text=t8;let t9;$[23]!==saveStory_0?(t9=()=>saveStory_0(),$[23]=saveStory_0,$[24]=t9):t9=$[24];const t10=!isEnabled;let t11;return $[25]!==canPublish||$[26]!==isUploading||$[27]!==t10||$[28]!==t9||$[29]!==text?(t11=react.createElement(buttonWithChecklistWarning.A,{text,onClick:t9,disabled:t10,isUploading,canPublish}),$[25]=canPublish,$[26]=isUploading,$[27]=t10,$[28]=t9,$[29]=text,$[30]=t11):t11=$[30],t11}function update_temp(t0){const{state:t1,actions:t2}=t0,{meta:t3,story:t4,capabilities}=t1,{isSaving}=t3,{status,date}=t4,{saveStory}=t2;return{isSaving,status,date,saveStory,canPublish:Boolean(capabilities?.publish)}}PlainButton.propTypes={text:prop_types_default().string,onClick:prop_types_default().func,disabled:prop_types_default().bool},UpdateButton.propTypes={hasUpdates:prop_types_default().bool,forceIsSaving:prop_types_default().bool};UpdateButton.__docgenInfo={description:"",methods:[],displayName:"UpdateButton",props:{hasUpdates:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},forceIsSaving:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),storyUpdates=__webpack_require__("./packages/story-editor/src/utils/storyUpdates.ts"),highlights=__webpack_require__("./packages/story-editor/src/app/highlights/index.ts"),highlights_styles=__webpack_require__("./packages/story-editor/src/app/highlights/styles.js");const Input=styled_components_browser_esm.Ay.input.withConfig({displayName:"title__Input",componentId:"sc-jcmnyx-0"})(["color:",";margin:0;"," background:",";border:none !important;text-align:start;min-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:",";",";",""],(({theme})=>`${theme.colors.fg.primary} !important`),expandPresetStyles.x((({paragraph},{Medium})=>paragraph[Medium])),(({isHighlighted})=>!isHighlighted&&"none !important"),(({theme})=>theme.borders.radius.small),outline.Q,(({isHighlighted})=>isHighlighted&&(0,styled_components_browser_esm.AH)([""," ",""],highlights_styles.A.OUTLINE,highlights_styles.A.FLASH)));function HeaderTitle(){const $=(0,dist.c)(23),{title:title_0,slug:slug_0,updateStory:updateStory_0}=(0,app_story.P3)(title_temp),{highlight,resetHighlight,cancelHighlight}=(0,highlights.N)(title_temp2);let t0,t1;$[0]!==updateStory_0?(t0=evt=>updateStory_0({properties:{title:evt.target.value}}),t1=[updateStory_0],$[0]=updateStory_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleChange=(0,react_src.hb)(t0,t1);let t2,t3;$[3]!==slug_0||$[4]!==title_0||$[5]!==updateStory_0?(t2=()=>{(0,storyUpdates.H)({currentSlug:slug_0,currentTitle:title_0,updateStory:updateStory_0})},t3=[slug_0,title_0,updateStory_0],$[3]=slug_0,$[4]=title_0,$[5]=updateStory_0,$[6]=t2,$[7]=t3):(t2=$[6],t3=$[7]);const handleBlur=(0,react_src.hb)(t2,t3);if("string"!=typeof title_0)return null;let t4,t5,t6;$[8]!==cancelHighlight||$[9]!==highlight?.focus||$[10]!==highlight?.showEffect?(t4=node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},$[8]=cancelHighlight,$[9]=highlight?.focus,$[10]=highlight?.showEffect,$[11]=t4):t4=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Add title","web-stories"),t6=(0,i18n.__)("Story title","web-stories"),$[12]=t5,$[13]=t6):(t5=$[12],t6=$[13]);const t7=highlight?.showEffect;let t8,t9;return $[14]!==resetHighlight?(t8=()=>resetHighlight(),$[14]=resetHighlight,$[15]=t8):t8=$[15],$[16]!==handleBlur||$[17]!==handleChange||$[18]!==t4||$[19]!==t7||$[20]!==t8||$[21]!==title_0?(t9=react.createElement(Input,{ref:t4,value:title_0,type:"text",onBlur:handleBlur,onChange:handleChange,placeholder:t5,"aria-label":t6,isHighlighted:t7,onAnimationEnd:t8}),$[16]=handleBlur,$[17]=handleChange,$[18]=t4,$[19]=t7,$[20]=t8,$[21]=title_0,$[22]=t9):t9=$[22],t9}function title_temp2(state){return{highlight:state[highlights.xP.StoryTitle],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}function title_temp(t0){const{state:t1,actions:t2}=t0,{story:t3}=t1,{title,slug}=t3,{updateStory}=t2;return{title,slug,updateStory}}const title=HeaderTitle;HeaderTitle.__docgenInfo={description:"",methods:[],displayName:"HeaderTitle"};__webpack_require__("./packages/story-editor/src/components/panels/document/index.js");var components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),panel=__webpack_require__("./packages/story-editor/src/components/panels/panel/index.js"),shared=__webpack_require__("./packages/story-editor/src/components/panels/shared/index.js"),shared_styles=(__webpack_require__("./packages/story-editor/src/components/fontPicker/index.js"),__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js")),snackbarContainer=(__webpack_require__("./packages/story-editor/src/components/checklistCard/index.js"),__webpack_require__("./packages/story-editor/src/app/story/utils/getStoryPropsToSave.ts"),__webpack_require__("./packages/story-editor/src/app/font/context.ts"),__webpack_require__("./packages/story-editor/src/app/font/actions/useLoadFontFiles.ts"),__webpack_require__("./packages/design-system/src/components/snackbar/snackbarContainer.tsx")),rich_text_src=__webpack_require__("./packages/rich-text/src/index.ts"),uploadDropTarget=__webpack_require__("./packages/story-editor/src/components/uploadDropTarget/index.js"),tabview=__webpack_require__("./packages/story-editor/src/components/tabview/index.js"),useHighlights=__webpack_require__("./packages/story-editor/src/app/highlights/useHighlights.ts"),useSidebar=__webpack_require__("./packages/story-editor/src/components/sidebar/useSidebar.js");const getTabId=id=>`sidebar-tab-${id}`,SidebarPane=styled_components_browser_esm.Ay.div.attrs({role:"tabpanel"}).withConfig({displayName:"sidebarContent__SidebarPane",componentId:"sc-1f2hu7i-0"})(["height:100%;overflow:auto;"]),SidebarPanes=styled_components_browser_esm.Ay.section.withConfig({displayName:"sidebarContent__SidebarPanes",componentId:"sc-1f2hu7i-1"})(["height:100%;"]);function Sidebar(){const $=(0,dist.c)(7),{tab:tab_0,tabs:tabs_0}=(0,useSidebar.A)(sidebarContent_temp);let t0,t1;if($[0]!==tab_0||$[1]!==tabs_0){let t1;$[3]!==tab_0?(t1=t2=>{const{id,Pane}=t2;return react.createElement(SidebarPane,{"aria-labelledby":id,id:getTabId(id),key:id,hidden:id!==tab_0},id===tab_0&&react.createElement(Pane,null))},$[3]=tab_0,$[4]=t1):t1=$[4],t0=tabs_0.map(t1),$[0]=tab_0,$[1]=tabs_0,$[2]=t0}else t0=$[2];return $[5]!==t0?(t1=react.createElement(SidebarPanes,null,t0),$[5]=t0,$[6]=t1):t1=$[6],t1}function sidebarContent_temp(t0){const{state:t1,data:t2}=t0,{tab}=t1,{tabs}=t2;return{tab,tabs}}const sidebarContent=Sidebar;Sidebar.__docgenInfo={description:"",methods:[],displayName:"Sidebar"};const Layout=styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Sidebar","web-stories")}).withConfig({displayName:"sidebarLayout__Layout",componentId:"sc-hpe4no-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";"],(({theme})=>theme.colors.bg.secondary),(({theme})=>theme.colors.fg.secondary)),SidebarContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"sidebarLayout__SidebarContainer",componentId:"sc-hpe4no-1"})(["height:100%;padding:0;overflow:auto;"]),UnjustifiedTabView=(0,styled_components_browser_esm.Ay)(tabview.Ay).withConfig({displayName:"sidebarLayout__UnjustifiedTabView",componentId:"sc-hpe4no-2"})(["justify-content:center;"]);function SidebarLayout(){const $=(0,dist.c)(17),{tab:tab_0,tabRefs:tabRefs_0,setSidebarContentNode:setSidebarContentNode_0,setTab:setTab_0,sidebar:sidebar_0,tabs:tabs_0}=(0,useSidebar.A)(sidebarLayout_temp),{resetHighlight}=(0,useHighlights.A)(sidebarLayout_temp2);let t0,t1;$[0]!==resetHighlight||$[1]!==setTab_0?(t0=id=>{setTab_0(id),resetHighlight(),(0,tracking_src.sx)("inspector_tab_change",{name:id})},t1=[setTab_0,resetHighlight],$[0]=resetHighlight,$[1]=setTab_0,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const onTabChange=(0,react_src.hb)(t0,t1);let t2,t3,t4,t5,t6;return(0,keyboard.A0)(sidebar_0),$[4]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Sidebar Selection","web-stories"),$[4]=t2):t2=$[4],$[5]!==onTabChange||$[6]!==tabRefs_0||$[7]!==tab_0||$[8]!==tabs_0?(t3=react.createElement(UnjustifiedTabView,{label:t2,tabs:tabs_0,tab:tab_0,tabRefs:tabRefs_0,onTabChange,getAriaControlsId:getTabId,shortcut:"mod+option+3"}),$[5]=onTabChange,$[6]=tabRefs_0,$[7]=tab_0,$[8]=tabs_0,$[9]=t3):t3=$[9],$[10]===Symbol.for("react.memo_cache_sentinel")?(t4=react.createElement(sidebarContent,null),$[10]=t4):t4=$[10],$[11]!==setSidebarContentNode_0?(t5=react.createElement(SidebarContainer,{ref:setSidebarContentNode_0},t4),$[11]=setSidebarContentNode_0,$[12]=t5):t5=$[12],$[13]!==sidebar_0||$[14]!==t3||$[15]!==t5?(t6=react.createElement(Layout,{ref:sidebar_0},t3,t5),$[13]=sidebar_0,$[14]=t3,$[15]=t5,$[16]=t6):t6=$[16],t6}function sidebarLayout_temp2(state){return{resetHighlight:state.onFocusOut}}function sidebarLayout_temp(t0){const{state:t1,actions:t2,refs:t3,data:t4}=t0,{tab,tabRefs}=t1,{setSidebarContentNode,setTab}=t2,{sidebar}=t3,{tabs}=t4;return{tab,tabRefs,setSidebarContentNode,setTab,sidebar,tabs}}const sidebarLayout=SidebarLayout;function sidebar_Sidebar(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(uploadDropTarget._G,{disabled:!0},react.createElement(sidebarLayout,null)),$[0]=t0):t0=$[0],t0}SidebarLayout.__docgenInfo={description:"",methods:[],displayName:"SidebarLayout"};const sidebar=sidebar_Sidebar;sidebar_Sidebar.__docgenInfo={description:"",methods:[],displayName:"Sidebar"};var canvas=__webpack_require__("./packages/story-editor/src/components/canvas/index.js"),getVideoLengthDisplay=__webpack_require__("./packages/media/src/getVideoLengthDisplay.ts"),formatMsToHMS=__webpack_require__("./packages/media/src/formatMsToHMS.ts"),videoTrimContext=__webpack_require__("./packages/story-editor/src/components/videoTrim/videoTrimContext.js");const src_getMsFromHMS=function getMsFromHMS(time){if(!time)return 0;const parts=time.split(":");if(3!==parts.length)return 0;const seconds=Number.parseFloat(parts[2])+60*Number.parseInt(parts[1])+3600*Number.parseInt(parts[0]);return Math.round(1e3*seconds)};var useFFmpeg=__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts");function useVideoTrimMode_temp3(t0){const{state:t1}=t0,{isCurrentResourceUploading}=t1;return{isCurrentResourceUploading}}function useVideoTrimMode_temp2(t0){const{state:t1}=t0,{selectedElements}=t1,selectedElement=1===selectedElements.length?selectedElements[0]:null;return{selectedElement,selectedId:selectedElement?selectedElement?.id:null,selectedResource:selectedElement?.resource||{},isVideo:"video"===selectedElement?.type}}function useVideoTrimMode_temp(t0){const{state:t1,actions:t2}=t0,{isEditing,editingElementState:t3}=t1,{isTrimMode}=void 0===t3?{}:t3,{setEditingElementWithState,clearEditing}=t2;return{isEditing,isTrimMode,setEditingElementWithState,clearEditing}}const videoTrim_useVideoTrimMode=function useVideoTrimMode(){const $=(0,dist.c)(32),{isEditing:isEditing_0,isTrimMode:isTrimMode_0,setEditingElementWithState:setEditingElementWithState_0,clearEditing:clearEditing_0}=(0,app.yu)(useVideoTrimMode_temp),{selectedElement:selectedElement_0,selectedId,selectedResource,isVideo}=(0,app.P3)(useVideoTrimMode_temp2),{actions:t0}=(0,app.M1)(),{getMediaById}=t0,[videoData,setVideoData]=(0,react_src.J0)(null),{isCurrentResourceUploading:isCurrentResourceUploading_0}=(0,app.HZ)(useVideoTrimMode_temp3);let t1,t2;$[0]!==getMediaById||$[1]!==selectedElement_0||$[2]!==selectedResource||$[3]!==setVideoData?(t1=()=>{const{trimData}=selectedResource,defaultVideoData={element:selectedElement_0,resource:selectedResource,start:0,end:null};getMediaById&&trimData?.original?(setVideoData(null),getMediaById(trimData.original).then((originalResource=>({element:selectedElement_0,resource:originalResource,start:src_getMsFromHMS(trimData.start),end:src_getMsFromHMS(trimData.end)})),(()=>defaultVideoData)).then((data=>setVideoData(data)))):setVideoData(defaultVideoData)},$[0]=getMediaById,$[1]=selectedElement_0,$[2]=selectedResource,$[3]=setVideoData,$[4]=t1):t1=$[4],$[5]!==getMediaById||$[6]!==selectedElement_0||$[7]!==selectedResource?(t2=[getMediaById,selectedElement_0,selectedResource],$[5]=getMediaById,$[6]=selectedElement_0,$[7]=selectedResource,$[8]=t2):t2=$[8];const getVideoData=(0,react_src.hb)(t1,t2);let t3,t4;$[9]!==clearEditing_0||$[10]!==getVideoData||$[11]!==isEditing_0||$[12]!==selectedId||$[13]!==setEditingElementWithState_0?(t3=()=>{isEditing_0?clearEditing_0():selectedId&&(setEditingElementWithState_0(selectedId,{isTrimMode:!0,hasEditMenu:!0,showOverflow:!1}),getVideoData()),(0,tracking_src.sx)("video_trim_mode_toggled",{status:isEditing_0?"closed":"open"})},t4=[isEditing_0,clearEditing_0,setEditingElementWithState_0,selectedId,getVideoData],$[9]=clearEditing_0,$[10]=getVideoData,$[11]=isEditing_0,$[12]=selectedId,$[13]=setEditingElementWithState_0,$[14]=t3,$[15]=t4):(t3=$[14],t4=$[15]);const toggleTrimMode=(0,react_src.hb)(t3,t4),{isTranscodingEnabled}=(0,useFFmpeg.A)();let t5,t6;$[16]!==isCurrentResourceUploading_0||$[17]!==isTranscodingEnabled||$[18]!==isVideo||$[19]!==selectedResource.id||$[20]!==selectedResource.isExternal?(t5=()=>!!isVideo&&(isTranscodingEnabled&&!selectedResource.isExternal&&!isCurrentResourceUploading_0(selectedResource.id)),$[16]=isCurrentResourceUploading_0,$[17]=isTranscodingEnabled,$[18]=isVideo,$[19]=selectedResource.id,$[20]=selectedResource.isExternal,$[21]=t5):t5=$[21],$[22]!==isCurrentResourceUploading_0||$[23]!==isTranscodingEnabled||$[24]!==isVideo||$[25]!==selectedResource?(t6=[isVideo,selectedResource,isTranscodingEnabled,isCurrentResourceUploading_0],$[22]=isCurrentResourceUploading_0,$[23]=isTranscodingEnabled,$[24]=isVideo,$[25]=selectedResource,$[26]=t6):t6=$[26];const hasTrimMode=(0,react_src.Kr)(t5,t6),t7=Boolean(isEditing_0&&isTrimMode_0);let t8;return $[27]!==hasTrimMode||$[28]!==t7||$[29]!==toggleTrimMode||$[30]!==videoData?(t8={isTrimMode:t7,hasTrimMode,toggleTrimMode,videoData},$[27]=hasTrimMode,$[28]=t7,$[29]=toggleTrimMode,$[30]=videoData,$[31]=t8):t8=$[31],t8};var useVideoNode=__webpack_require__("./packages/story-editor/src/components/videoTrim/useVideoNode.js");function VideoTrimProvider(t0){const $=(0,dist.c)(30),{children}=t0,{trimExistingVideo:trimExistingVideo_0}=(0,app.HZ)(provider_temp),{isTrimMode,hasTrimMode,toggleTrimMode,videoData}=videoTrim_useVideoTrimMode(),{hasChanged,currentTime,startOffset,endOffset,maxOffset,videoNode,setStartOffset,setEndOffset,setVideoNode,setIsDraggingHandles}=(0,useVideoNode.A)(videoData);let t1,t2;$[0]!==endOffset||$[1]!==startOffset||$[2]!==toggleTrimMode||$[3]!==trimExistingVideo_0||$[4]!==videoData?(t1=()=>{const{resource,element}=videoData;if(!resource)return;const lengthInSeconds=Math.round(endOffset/1e3-startOffset/1e3);trimExistingVideo_0({resource:{...resource,length:lengthInSeconds,lengthFormatted:(0,getVideoLengthDisplay.A)(lengthInSeconds)},canvasResourceId:element.resource.id,elementId:element.id,start:(0,formatMsToHMS.A)(startOffset),end:(0,formatMsToHMS.A)(endOffset)}),(0,tracking_src.sx)("video_trim",{original_length:resource.length,new_length:lengthInSeconds,start_offset:startOffset,end_offset:endOffset}),toggleTrimMode()},t2=[endOffset,startOffset,trimExistingVideo_0,toggleTrimMode,videoData],$[0]=endOffset,$[1]=startOffset,$[2]=toggleTrimMode,$[3]=trimExistingVideo_0,$[4]=videoData,$[5]=t1,$[6]=t2):(t1=$[5],t2=$[6]);const performTrim=(0,react_src.hb)(t1,t2);let t3,t4,t5;$[7]!==currentTime||$[8]!==endOffset||$[9]!==hasChanged||$[10]!==hasTrimMode||$[11]!==isTrimMode||$[12]!==maxOffset||$[13]!==startOffset||$[14]!==videoData||$[15]!==videoNode?(t3={videoData,hasChanged,isTrimMode,hasTrimMode,currentTime,startOffset,endOffset,maxOffset,videoNode},$[7]=currentTime,$[8]=endOffset,$[9]=hasChanged,$[10]=hasTrimMode,$[11]=isTrimMode,$[12]=maxOffset,$[13]=startOffset,$[14]=videoData,$[15]=videoNode,$[16]=t3):t3=$[16],$[17]!==performTrim||$[18]!==setEndOffset||$[19]!==setIsDraggingHandles||$[20]!==setStartOffset||$[21]!==setVideoNode||$[22]!==toggleTrimMode?(t4={performTrim,toggleTrimMode,setVideoNode,setStartOffset,setEndOffset,setIsDraggingHandles},$[17]=performTrim,$[18]=setEndOffset,$[19]=setIsDraggingHandles,$[20]=setStartOffset,$[21]=setVideoNode,$[22]=toggleTrimMode,$[23]=t4):t4=$[23],$[24]!==t3||$[25]!==t4?(t5={state:t3,actions:t4},$[24]=t3,$[25]=t4,$[26]=t5):t5=$[26];const value=t5;let t6;return $[27]!==children||$[28]!==value?(t6=react.createElement(videoTrimContext.A.Provider,{value},children),$[27]=children,$[28]=value,$[29]=t6):t6=$[29],t6}function provider_temp(t0){const{actions:t1}=t0,{trimExistingVideo}=t1;return{trimExistingVideo}}VideoTrimProvider.propTypes={children:prop_types_default().node.isRequired};const provider=VideoTrimProvider;VideoTrimProvider.__docgenInfo={description:"",methods:[],displayName:"VideoTrimProvider",props:{children:{description:"",type:{name:"node"},required:!0}}};const Area=styled_components_browser_esm.Ay.div.withConfig({displayName:"layout__Area",componentId:"sc-1encx56-0"})(["grid-area:",";position:relative;overflow:hidden;z-index:",";"],(({area})=>area),(({zIndex})=>zIndex)),CanvasArea=(0,styled_components_browser_esm.Ay)(Area).attrs({area:"canv",zIndex:1}).withConfig({displayName:"layout__CanvasArea",componentId:"sc-1encx56-1"})([""]),SidebarArea=(0,styled_components_browser_esm.Ay)(Area).attrs({area:"sidebar",zIndex:2}).withConfig({displayName:"layout__SidebarArea",componentId:"sc-1encx56-2"})([""]);function Workspace(t0){const $=(0,dist.c)(7),{header,footer}=t0,{editingElementState}=(0,app.yu)(workspace_temp);let t1,t2,t3;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(SidebarArea,null,react.createElement(errorBoundary,null,react.createElement(sidebar,null))),$[0]=t1):t1=$[0],$[1]!==footer||$[2]!==header?(t2=react.createElement(CanvasArea,null,react.createElement(errorBoundary,null,react.createElement(canvas.Ay,{header,footer}))),$[1]=footer,$[2]=header,$[3]=t2):t2=$[3],$[4]!==editingElementState||$[5]!==t2?(t3=react.createElement(provider,null,react.createElement(rich_text_src.LB,{editingState:editingElementState},t1,t2)),$[4]=editingElementState,$[5]=t2,$[6]=t3):t3=$[6],t3}function workspace_temp(state){return{editingElementState:state.state.editingElementState}}Workspace.propTypes={header:prop_types_default().node,footer:prop_types_default().object};const workspace=Workspace;Workspace.__docgenInfo={description:"",methods:[],displayName:"Workspace",props:{header:{description:"",type:{name:"node"},required:!1},footer:{description:"",type:{name:"object"},required:!1}}};var story_editor_src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),app_canvas=__webpack_require__("./packages/story-editor/src/app/canvas/index.ts"),layoutProvider=__webpack_require__("./packages/story-editor/src/app/layout/layoutProvider.tsx"),useRightClickMenu=__webpack_require__("./packages/story-editor/src/app/rightClickMenu/useRightClickMenu.js"),rightClickMenu_context=__webpack_require__("./packages/story-editor/src/app/rightClickMenu/context.js");const ACTION_TYPES_OPEN_MENU="OPEN_MENU",ACTION_TYPES_CLOSE_MENU="CLOSE_MENU",ACTION_TYPES_RESET="RESET",DEFAULT_RIGHT_CLICK_MENU_STATE={isMenuOpen:!1,menuPosition:{x:0,y:0}};const reducer=function rightClickMenuReducer(state,action){switch(action.type){case ACTION_TYPES_CLOSE_MENU:return{...state,isMenuOpen:!1,menuPosition:DEFAULT_RIGHT_CLICK_MENU_STATE.menuPosition};case ACTION_TYPES_OPEN_MENU:return{...state,isMenuOpen:!0,menuPosition:action.payload};case ACTION_TYPES_RESET:return{...DEFAULT_RIGHT_CLICK_MENU_STATE};default:return state}};var v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),updateProperties=__webpack_require__("./packages/story-editor/src/components/style/updateProperties.js"),useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js"),getUpdatedSizeAndPosition=__webpack_require__("./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js");const styleManager_useApplyStyle=function useApplyStyle({pushUpdate}){(0,components_form.jm)(getUpdatedSizeAndPosition.A,[]);const selectedTextElements=(0,app.P3)((({state:{selectedElements}})=>selectedElements?selectedElements?.filter((({type})=>"text"===type)):story_editor_src_constants.qW)),extraPropsToAddRef=(0,react_src.li)(null),push=(0,react_src.hb)((updater=>{const extraProps=extraPropsToAddRef.current||{};extraPropsToAddRef.current=null,pushUpdate((oldProps=>({...updater(oldProps),...extraProps})),!0)}),[pushUpdate]),{handlers:{handleSetColor,handleSetLetterSpacing,handleClickUnderline,handleClickItalic,handleSelectFontWeight}}=(0,useRichTextFormatting.A)(selectedTextElements,push),handleApplyStyle=(0,react_src.hb)((preset=>{const{color,fontWeight,isItalic,isUnderline,letterSpacing,...rest}=preset;extraPropsToAddRef.current=rest,handleSetColor(color),handleSetLetterSpacing(letterSpacing),handleSelectFontWeight(fontWeight),handleClickUnderline(isUnderline),handleClickItalic(isItalic)}),[handleSetColor,handleSetLetterSpacing,handleClickUnderline,handleClickItalic,handleSelectFontWeight]);return handleApplyStyle};var presetUtils=__webpack_require__("./packages/story-editor/src/utils/presetUtils.js"),utils=__webpack_require__("./packages/design-system/src/components/keyboard/utils.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts");const UNDO_HELP_TEXT=(0,sprintf.A)((0,i18n.__)("Press %s to undo the last change","web-stories"),(0,utils.KV)("mod+z"));const hooks_useCopyPasteActions=()=>{const undo=(0,app.W6)((({actions})=>actions.undo)),{addAnimations,copySelectedElement,copiedElementState,selectedElement,selectedElementType,selectedElementAnimations,updateSelectedElements,isSelectedElementBackground}=(0,app.P3)((({state,actions:actions_0})=>({addAnimations:actions_0.addAnimations,copiedElementState:state.copiedElementState,copySelectedElement:actions_0.copySelectedElement,selectedElement:state.selectedElements?.[0],selectedElementType:state.selectedElements?.[0]?.type,isSelectedElementBackground:state.selectedElements?.[0]?.isBackground,selectedElementAnimations:state.selectedElementAnimations,updateSelectedElements:actions_0.updateSelectedElements}))),showSnackbar=(0,useSnackbar.d)((value=>value.showSnackbar)),undoRef=(0,react_src.li)(undo);undoRef.current=undo;const handleCopyStyles=(0,react_src.hb)((()=>{copySelectedElement(),showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)("Copied style.","web-stories"),onAction:()=>{undoRef.current(),(0,tracking_src.sx)("context_menu_action",{name:"undo_copy_styles",element:selectedElementType,isBackground:isSelectedElementBackground})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"copy_styles",element:selectedElementType,isBackground:isSelectedElementBackground})}),[copySelectedElement,showSnackbar,selectedElementType,isSelectedElementBackground]),pushUpdate=(0,react_src.hb)(((update,commitValues)=>{updateSelectedElements({properties:element=>{const updates=(0,updateProperties.A)(element,update,commitValues),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...element,...updates});return{...updates,...sizeUpdates}}})}),[updateSelectedElements]),handleApplyStyle=styleManager_useApplyStyle({pushUpdate}),handlePasteStyles=(0,react_src.hb)((()=>{const id=selectedElement?.id;if(!id||selectedElementType!==copiedElementState.type)return;const oldAnimationToDelete=selectedElementAnimations.length?{...selectedElementAnimations[0],delete:!0}:void 0,newAnimations=copiedElementState.animations.map((animation=>({...animation,id:(0,v4.A)(),targets:[selectedElement.id]})));if(addAnimations({animations:newAnimations}),"text"===copiedElementState.type&&copiedElementState.styles.content){const updatedElementStyles=function getTextElementStyles(element,animation){const{textStyles}=(0,presetUtils.mi)([element.styles],{textStyles:[],colors:[]},story_editor_src_constants.aS.STYLE),{colors}=(0,presetUtils.mi)([element.styles],{textStyles:[],colors:[]},story_editor_src_constants.aS.COLOR),{content,...copiedElementStyles}=element.styles;return{...copiedElementStyles,...textStyles[0],...colors[0].color,animation,border:copiedElementStyles.border||null}}(copiedElementState,oldAnimationToDelete);handleApplyStyle(updatedElementStyles)}else updateSelectedElements({properties:currentProperties=>(0,updateProperties.A)(currentProperties,{...copiedElementState.styles,animation:oldAnimationToDelete},!0)});showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)("Pasted style.","web-stories"),onAction:()=>{undoRef.current(),(0,tracking_src.sx)("context_menu_action",{name:"undo_paste_styles",element:selectedElementType,isBackground:isSelectedElementBackground})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"paste_styles",element:selectedElementType,isBackground:isSelectedElementBackground})}),[addAnimations,copiedElementState,handleApplyStyle,selectedElement,selectedElementAnimations,showSnackbar,updateSelectedElements,selectedElementType,isSelectedElementBackground]);return{copiedElementType:copiedElementState?.type,handleCopyStyles,handlePasteStyles}};var generateGroupName=__webpack_require__("./packages/story-editor/src/utils/generateGroupName.ts");const hooks_useElementActions=()=>{const{clearBackgroundElement,duplicateElementsById,selectedElements,setBackgroundElement,updateElementsById,deleteGroupById,addGroup,groups,elements,arrangeElement}=(0,app.P3)((({state,actions})=>({clearBackgroundElement:actions.clearBackgroundElement,duplicateElementsById:actions.duplicateElementsById,selectedElements:state.selectedElements,setBackgroundElement:actions.setBackgroundElement,updateElementsById:actions.updateElementsById,addGroup:actions.addGroup,deleteGroupById:actions.deleteGroupById,groups:state.currentPage.groups,elements:state.currentPage?.elements||[],arrangeElement:actions.arrangeElement}))),showSnackbar=(0,useSnackbar.d)((value=>value.showSnackbar)),setEditingElement=(0,app.yu)((({actions:actions_0})=>actions_0.setEditingElement)),undo=(0,app.W6)((({actions:actions_1})=>actions_1.undo)),undoRef=(0,react_src.li)(undo);undoRef.current=undo;return{handleDuplicateSelectedElements:(0,react_src.hb)((()=>{selectedElements.length&&(duplicateElementsById({elementIds:selectedElements.map((({id})=>id))}),showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)("Duplicated elements.","web-stories"),onAction:()=>{undoRef.current(),(0,tracking_src.sx)("context_menu_action",{name:"undo_duplicate_elements",elements:selectedElements.map((element=>element.type))})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"duplicate_elements",elements:selectedElements.map((element_0=>element_0.type))}))}),[duplicateElementsById,selectedElements,showSnackbar]),handleGroupSelectedElements:(0,react_src.hb)((()=>{if(!selectedElements.length)return;const groupId=(0,v4.A)(),name=(0,generateGroupName.A)(groups);addGroup({groupId,name}),updateElementsById({elementIds:selectedElements.map((({id:id_0})=>id_0)),properties:currentProperties=>(0,updateProperties.A)(currentProperties,{groupId},!0)});const elementFromGroupWithHighestPosition=Math.max(...selectedElements.map((el=>elements.findIndex((({id:id_1})=>id_1===el?.id)))));for(const[index,element_1]of selectedElements.reverse().entries()){if(elements.findIndex((({id:id_2})=>id_2===element_1?.id))!==elementFromGroupWithHighestPosition){const newPosition=elementFromGroupWithHighestPosition-index;arrangeElement({elementId:element_1.id,position:newPosition})}}}),[selectedElements,updateElementsById,addGroup,groups,arrangeElement,elements]),handleUngroupSelectedElements:(0,react_src.hb)((()=>{selectedElements.length&&(deleteGroupById({groupId:selectedElements[0]?.groupId}),updateElementsById({elementIds:selectedElements.map((({id:id_3})=>id_3)),properties:currentProperties_0=>(0,updateProperties.A)(currentProperties_0,{groupId:null},!0)}))}),[selectedElements,updateElementsById,deleteGroupById]),handleOpenScaleAndCrop:(0,react_src.hb)((evt=>{const selectedElement=selectedElements?.[0];selectedElement&&(setEditingElement(selectedElement.id,evt),(0,tracking_src.sx)("context_menu_action",{name:"open_scale_and_crop",element:selectedElement.type,isBackground:selectedElement.isBackground}))}),[selectedElements,setEditingElement]),handleSetPageBackground:(0,react_src.hb)((()=>{const selectedElement_0=selectedElements?.[0];selectedElement_0&&!selectedElement_0.isBackground&&(setBackgroundElement({elementId:selectedElement_0.id}),showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)("Set page background.","web-stories"),onAction:()=>{undoRef.current(),(0,tracking_src.sx)("context_menu_action",{name:"undo_set_page_background",element:selectedElement_0.type,isBackground:selectedElement_0.isBackground})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"set_as_page_background",element:selectedElement_0.type,isBackground:selectedElement_0.isBackground}))}),[selectedElements,setBackgroundElement,showSnackbar]),handleRemovePageBackground:(0,react_src.hb)((()=>{const selectedElement_1=selectedElements?.[0];selectedElement_1&&selectedElement_1.isBackground&&(updateElementsById({elementIds:[selectedElement_1.id],properties:currentProperties_1=>(0,updateProperties.A)(currentProperties_1,{isBackground:!1,opacity:100,overlay:null},!0)}),clearBackgroundElement(),showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)("Removed page background.","web-stories"),onAction:()=>{undoRef.current(),(0,tracking_src.sx)("context_menu_action",{name:"undo_remove_page_background",elements:selectedElement_1.type,isBackground:selectedElement_1.isBackground})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"remove_media_from_background",element:selectedElement_1.type,isBackground:selectedElement_1.isBackground}))}),[clearBackgroundElement,selectedElements,showSnackbar,updateElementsById])}};function isOffCanvas(selectedElement){const{x,y,width,height}=selectedElement;let offCanvas=!1,offCanvasTop=0,offCanvasRight=0,offCanvasBottom=0,offCanvasLeft=0;x<0&&(offCanvasLeft=Math.abs(x));const adjustedY=y+src_constants.vT;if(adjustedY<0&&(offCanvasTop=Math.abs(adjustedY)),x>0)x+width>src_constants.bj&&(offCanvasRight=x+width-src_constants.bj);else{const r=width-Math.abs(x)-src_constants.bj;offCanvasRight=r>0?r:0}if(adjustedY>0){if(y+height>src_constants.WY){const b=Math.floor(y+height-(src_constants.WY+src_constants.vT));offCanvasBottom=b>0?b:0}}else{const b=height-Math.abs(y)-src_constants.WY;offCanvasBottom=b>0?b:0}return(offCanvasTop>0||offCanvasRight>0||offCanvasBottom>0||offCanvasLeft>0)&&(offCanvas=!0),{offCanvas,offCanvasTop,offCanvasRight,offCanvasBottom,offCanvasLeft}}const hooks_useLayerActions=()=>{const $=(0,dist.c)(43),{cropExistingVideo:cropExistingVideo_0}=(0,media.HZ)(useLayerActions_temp),{arrangeElement,elements,selectedElement}=(0,app.P3)(useLayerActions_temp2);let t0;$[0]!==selectedElement?.id?(t0=t1=>{const{id}=t1;return id===selectedElement?.id},$[0]=selectedElement?.id,$[1]=t0):t0=$[1];const elementPosition=elements.findIndex(t0),canElementMoveBackwards=selectedElement&&!selectedElement.isBackground&&elementPosition>1,canElementMoveForwards=selectedElement&&!selectedElement.isBackground&&elementPosition<elements.length-1;let t1,t2;$[2]!==arrangeElement||$[3]!==canElementMoveBackwards||$[4]!==elementPosition||$[5]!==elements||$[6]!==selectedElement?(t1=()=>{if(!canElementMoveBackwards)return;const backwardPositionSkipGroups=elements.findLastIndex(((el,position)=>position<elementPosition&&!el.groupId)),newPosition=1===elementPosition?elementPosition:backwardPositionSkipGroups;arrangeElement({elementId:selectedElement.id,position:newPosition}),(0,tracking_src.sx)("context_menu_action",{name:"send_backward",element:selectedElement.type,isBackground:selectedElement.isBackground})},t2=[arrangeElement,canElementMoveBackwards,elementPosition,selectedElement,elements],$[2]=arrangeElement,$[3]=canElementMoveBackwards,$[4]=elementPosition,$[5]=elements,$[6]=selectedElement,$[7]=t1,$[8]=t2):(t1=$[7],t2=$[8]);const handleSendBackward=(0,react_src.hb)(t1,t2);let t3,t4;$[9]!==arrangeElement||$[10]!==canElementMoveBackwards||$[11]!==selectedElement?(t3=()=>{canElementMoveBackwards&&(arrangeElement({elementId:selectedElement.id,position:1}),(0,tracking_src.sx)("context_menu_action",{name:"send_to_back",element:selectedElement.type}))},t4=[arrangeElement,canElementMoveBackwards,selectedElement],$[9]=arrangeElement,$[10]=canElementMoveBackwards,$[11]=selectedElement,$[12]=t3,$[13]=t4):(t3=$[12],t4=$[13]);const handleSendToBack=(0,react_src.hb)(t3,t4);let t5,t6;$[14]!==arrangeElement||$[15]!==canElementMoveForwards||$[16]!==elementPosition||$[17]!==elements||$[18]!==selectedElement?(t5=()=>{if(!canElementMoveForwards)return;const forwardPositionSkipGroups=elements.findIndex(((el_0,position_0)=>position_0>elementPosition&&!el_0.groupId||position_0===elements.length-1)),newPosition_0=elementPosition>=elements.length-1?elementPosition:forwardPositionSkipGroups;arrangeElement({elementId:selectedElement.id,position:newPosition_0}),(0,tracking_src.sx)("context_menu_action",{name:"bring_forward",element:selectedElement.type})},t6=[arrangeElement,canElementMoveForwards,elementPosition,elements,selectedElement],$[14]=arrangeElement,$[15]=canElementMoveForwards,$[16]=elementPosition,$[17]=elements,$[18]=selectedElement,$[19]=t5,$[20]=t6):(t5=$[19],t6=$[20]);const handleBringForward=(0,react_src.hb)(t5,t6);let t7,t8;$[21]!==arrangeElement||$[22]!==canElementMoveForwards||$[23]!==elements.length||$[24]!==selectedElement?(t7=()=>{canElementMoveForwards&&(arrangeElement({elementId:selectedElement.id,position:elements.length-1}),(0,tracking_src.sx)("context_menu_action",{name:"bring_to_front",element:selectedElement.type}))},$[21]=arrangeElement,$[22]=canElementMoveForwards,$[23]=elements.length,$[24]=selectedElement,$[25]=t7):t7=$[25],$[26]!==arrangeElement||$[27]!==canElementMoveForwards||$[28]!==elements||$[29]!==selectedElement?(t8=[arrangeElement,canElementMoveForwards,elements,selectedElement],$[26]=arrangeElement,$[27]=canElementMoveForwards,$[28]=elements,$[29]=selectedElement,$[30]=t8):t8=$[30];const handleBringToFront=(0,react_src.hb)(t7,t8);let t10,t9;$[31]!==cropExistingVideo_0||$[32]!==selectedElement?(t9=()=>{cropExistingVideo_0(selectedElement,function getCropParams({x,y,width,height,rotationAngle,resource}){const{offCanvasLeft,offCanvasRight,offCanvasTop,offCanvasBottom}=isOffCanvas({x,y,width,height,rotationAngle}),multiplier=100/(width/resource.width*100),offCanvasX=Math.floor((offCanvasLeft+offCanvasRight)*multiplier),offCanvasY=Math.floor((offCanvasTop+offCanvasBottom)*multiplier);return{cropElement:{x,y},cropWidth:resource.width-offCanvasX,cropHeight:resource.height-offCanvasY,cropX:Math.floor(offCanvasLeft*multiplier),cropY:Math.floor(offCanvasTop*multiplier),newWidth:width-offCanvasLeft-offCanvasRight,newHeight:height-offCanvasTop-offCanvasBottom}}(selectedElement))},t10=[selectedElement,cropExistingVideo_0],$[31]=cropExistingVideo_0,$[32]=selectedElement,$[33]=t10,$[34]=t9):(t10=$[33],t9=$[34]);const handleCropOffScreenVideo=(0,react_src.hb)(t9,t10);let t11;return $[35]!==canElementMoveBackwards||$[36]!==canElementMoveForwards||$[37]!==handleBringForward||$[38]!==handleBringToFront||$[39]!==handleCropOffScreenVideo||$[40]!==handleSendBackward||$[41]!==handleSendToBack?(t11={canElementMoveBackwards,canElementMoveForwards,handleBringForward,handleBringToFront,handleSendBackward,handleSendToBack,handleCropOffScreenVideo},$[35]=canElementMoveBackwards,$[36]=canElementMoveForwards,$[37]=handleBringForward,$[38]=handleBringToFront,$[39]=handleCropOffScreenVideo,$[40]=handleSendBackward,$[41]=handleSendToBack,$[42]=t11):t11=$[42],t11};function useLayerActions_temp(t0){const{actions:t1}=t0,{cropExistingVideo}=t1;return{cropExistingVideo}}function useLayerActions_temp2(t0){const{state,actions}=t0;return{arrangeElement:actions.arrangeElement,elements:state.currentPage?.elements||[],selectedElement:state.selectedElements?.[0]}}var elements_src=__webpack_require__("./packages/elements/src/index.ts");const hooks_usePageActions=()=>{const $=(0,dist.c)(19),{addPageAt,currentPage,deleteCurrentPage,isSelectedElementBackground,pageLength,selectedElementType}=(0,app.P3)(usePageActions_temp);let t0,t1;$[0]!==addPageAt||$[1]!==isSelectedElementBackground||$[2]!==pageLength||$[3]!==selectedElementType?(t0=index=>{let position=Boolean(index)||0===index?index:pageLength-1;position=position>pageLength?pageLength-1:position,position=position<0?0:position,addPageAt({page:(0,elements_src.a3)(),position}),(0,tracking_src.sx)("context_menu_action",{name:"page_added",element:selectedElementType,isBackground:isSelectedElementBackground})},t1=[addPageAt,isSelectedElementBackground,pageLength,selectedElementType],$[0]=addPageAt,$[1]=isSelectedElementBackground,$[2]=pageLength,$[3]=selectedElementType,$[4]=t0,$[5]=t1):(t0=$[4],t1=$[5]);const handleAddPageAtPosition=(0,react_src.hb)(t0,t1);let t2,t3;$[6]!==addPageAt||$[7]!==currentPage?(t2=()=>{addPageAt({page:(0,elements_src.hi)(currentPage),position:null})},t3=[addPageAt,currentPage],$[6]=addPageAt,$[7]=currentPage,$[8]=t2,$[9]=t3):(t2=$[8],t3=$[9]);const handleDuplicatePage=(0,react_src.hb)(t2,t3);let t4,t5;$[10]!==deleteCurrentPage||$[11]!==isSelectedElementBackground||$[12]!==selectedElementType?(t4=()=>{deleteCurrentPage(),(0,tracking_src.sx)("context_menu_action",{name:"page_deleted",element:selectedElementType,isBackground:isSelectedElementBackground})},t5=[deleteCurrentPage,isSelectedElementBackground,selectedElementType],$[10]=deleteCurrentPage,$[11]=isSelectedElementBackground,$[12]=selectedElementType,$[13]=t4,$[14]=t5):(t4=$[13],t5=$[14]);const handleDeletePage=(0,react_src.hb)(t4,t5);let t6;return $[15]!==handleAddPageAtPosition||$[16]!==handleDeletePage||$[17]!==handleDuplicatePage?(t6={handleAddPageAtPosition,handleDuplicatePage,handleDeletePage},$[15]=handleAddPageAtPosition,$[16]=handleDeletePage,$[17]=handleDuplicatePage,$[18]=t6):t6=$[18],t6};function usePageActions_temp(t0){const{state,actions}=t0;return{addPageAt:actions.addPageAt,currentPage:state.currentPage,deleteCurrentPage:actions.deleteCurrentPage,isSelectedElementBackground:state.selectedElements?.[0]?.background||!1,pageLength:state.pages?.length||1,selectedElementType:state.selectedElements?.[0]?.type||null}}var useDeleteColor=__webpack_require__("./packages/story-editor/src/components/colorPicker/useDeleteColor.js");function useDeleteStyle_temp(t0){const{state:t1,actions:t2}=t0,{story:t3}=t1,{globalStoryStyles}=t3,{updateStory}=t2;return{globalStoryStyles,updateStory}}const useDeleteStyle=function useDeletePreset(t0){const $=(0,dist.c)(8),{onEmpty}=t0,{globalStoryStyles:globalStoryStyles_0,updateStory:updateStory_0}=(0,app.P3)(useDeleteStyle_temp);let t1;$[0]!==globalStoryStyles_0?(t1=globalStoryStyles_0||{},$[0]=globalStoryStyles_0,$[1]=t1):t1=$[1];const{textStyles}=t1;let t2,t3;return $[2]!==globalStoryStyles_0||$[3]!==onEmpty||$[4]!==textStyles||$[5]!==updateStory_0?(t2=toDelete=>{const updatedStyles=textStyles.filter((style=>style!==toDelete));updateStory_0({properties:{globalStoryStyles:{...globalStoryStyles_0,textStyles:updatedStyles}}}),0===updatedStyles.length&&onEmpty()},t3=[textStyles,updateStory_0,globalStoryStyles_0,onEmpty],$[2]=globalStoryStyles_0,$[3]=onEmpty,$[4]=textStyles,$[5]=updateStory_0,$[6]=t2,$[7]=t3):(t2=$[6],t3=$[7]),(0,react_src.hb)(t2,t3)};var useAddPreset=__webpack_require__("./packages/story-editor/src/utils/useAddPreset.js");const hooks_usePresetActions=()=>{const $=(0,dist.c)(27);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={presetType:story_editor_src_constants.aS.STYLE},$[0]=t0):t0=$[0];const{addGlobalPreset:addGlobalTextPreset}=(0,useAddPreset.A)(t0);let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1={presetType:story_editor_src_constants.aS.COLOR},$[1]=t1):t1=$[1];const{addGlobalPreset:addGlobalColorPreset}=(0,useAddPreset.A)(t1);let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2={onEmpty:noop.l},$[2]=t2):t2=$[2];const deleteGlobalTextPreset=useDeleteStyle(t2);let t3;$[3]===Symbol.for("react.memo_cache_sentinel")?(t3={onEmpty:noop.l},$[3]=t3):t3=$[3];const{deleteGlobalColor:deleteGlobalColorPreset}=(0,useDeleteColor.A)(t3),selectedElement=(0,app.P3)(usePresetActions_temp),showSnackbar=(0,useSnackbar.d)(usePresetActions_temp2);let t4;$[4]!==addGlobalTextPreset||$[5]!==deleteGlobalTextPreset||$[6]!==selectedElement?.type||$[7]!==showSnackbar?(t4=evt=>{const preset=addGlobalTextPreset(evt);showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)('Saved style to "Saved Styles".',"web-stories"),onAction:()=>{deleteGlobalTextPreset(preset),(0,tracking_src.sx)("context_menu_action",{name:"remove_text_preset",element:selectedElement?.type})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"add_text_preset",element:selectedElement?.type})},$[4]=addGlobalTextPreset,$[5]=deleteGlobalTextPreset,$[6]=selectedElement?.type,$[7]=showSnackbar,$[8]=t4):t4=$[8];const t5=selectedElement?.type;let t6;$[9]!==addGlobalTextPreset||$[10]!==deleteGlobalTextPreset||$[11]!==showSnackbar||$[12]!==t5?(t6=[addGlobalTextPreset,deleteGlobalTextPreset,t5,showSnackbar],$[9]=addGlobalTextPreset,$[10]=deleteGlobalTextPreset,$[11]=showSnackbar,$[12]=t5,$[13]=t6):t6=$[13];const handleAddTextPreset=(0,react_src.hb)(t4,t6);let t7;$[14]!==addGlobalColorPreset||$[15]!==deleteGlobalColorPreset||$[16]!==selectedElement?.type||$[17]!==showSnackbar?(t7=evt_0=>{const preset_0=addGlobalColorPreset(evt_0);showSnackbar({actionLabel:(0,i18n.__)("Undo","web-stories"),dismissible:!1,message:(0,i18n.__)('Added color to "Saved Colors".',"web-stories"),onAction:()=>{deleteGlobalColorPreset(preset_0),(0,tracking_src.sx)("context_menu_action",{name:"remove_color_preset",element:selectedElement?.type})},actionHelpText:UNDO_HELP_TEXT}),(0,tracking_src.sx)("context_menu_action",{name:"add_color_preset",element:selectedElement?.type})},$[14]=addGlobalColorPreset,$[15]=deleteGlobalColorPreset,$[16]=selectedElement?.type,$[17]=showSnackbar,$[18]=t7):t7=$[18];const t8=selectedElement?.type;let t9;$[19]!==addGlobalColorPreset||$[20]!==deleteGlobalColorPreset||$[21]!==showSnackbar||$[22]!==t8?(t9=[addGlobalColorPreset,deleteGlobalColorPreset,t8,showSnackbar],$[19]=addGlobalColorPreset,$[20]=deleteGlobalColorPreset,$[21]=showSnackbar,$[22]=t8,$[23]=t9):t9=$[23];const handleAddColorPreset=(0,react_src.hb)(t7,t9);let t10;return $[24]!==handleAddColorPreset||$[25]!==handleAddTextPreset?(t10={handleAddTextPreset,handleAddColorPreset},$[24]=handleAddColorPreset,$[25]=handleAddTextPreset,$[26]=t10):t10=$[26],t10};function usePresetActions_temp(t0){const{state}=t0;return state.selectedElements?.[0]}function usePresetActions_temp2(value){return value.showSnackbar}function RightClickMenuProvider(t0){const $=(0,dist.c)(25),{children}=t0,[t1,dispatch]=(0,react_src.WO)(reducer,DEFAULT_RIGHT_CLICK_MENU_STATE),{isMenuOpen,menuPosition}=t1,{handleCopyStyles,handlePasteStyles}=hooks_useCopyPasteActions();let t2,t3;$[0]!==dispatch?(t2=evt=>{evt.preventDefault(),evt.stopPropagation();let x=evt?.clientX,y=evt?.clientY;if(!x&&!y){const dims=evt.target.getBoundingClientRect();x=dims.x,y=dims.y}dispatch({type:ACTION_TYPES_OPEN_MENU,payload:{x,y}}),(0,tracking_src.sx)("context_menu_action",{name:"context_menu_opened"})},$[0]=dispatch,$[1]=t2):t2=$[1],$[2]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[2]=t3):t3=$[2];const handleOpenMenu=(0,react_src.hb)(t2,t3);let t4,t5;$[3]!==dispatch||$[4]!==isMenuOpen?(t4=()=>{isMenuOpen&&dispatch({type:ACTION_TYPES_CLOSE_MENU})},$[3]=dispatch,$[4]=isMenuOpen,$[5]=t4):t4=$[5],$[6]!==isMenuOpen?(t5=[isMenuOpen],$[6]=isMenuOpen,$[7]=t5):t5=$[7];const handleCloseMenu=(0,react_src.hb)(t4,t5);let t6,t7,t8,t9,t10,t11,t12,t13;$[8]===Symbol.for("react.memo_cache_sentinel")?(t6={key:["mod+alt+o"]},$[8]=t6):t6=$[8],$[9]!==handleCopyStyles?(t7=evt_0=>{evt_0.preventDefault(),handleCopyStyles()},t8=[handleCopyStyles],$[9]=handleCopyStyles,$[10]=t7,$[11]=t8):(t7=$[10],t8=$[11]),(0,keyboard.pP)(t6,t7,t8),$[12]===Symbol.for("react.memo_cache_sentinel")?(t9={key:["mod+alt+p"]},$[12]=t9):t9=$[12],$[13]!==handlePasteStyles?(t10=evt_1=>{evt_1.preventDefault(),handlePasteStyles()},t11=[handlePasteStyles],$[13]=handlePasteStyles,$[14]=t10,$[15]=t11):(t10=$[14],t11=$[15]),(0,keyboard.pP)(t9,t10,t11),$[16]!==handleCloseMenu||$[17]!==handleOpenMenu||$[18]!==isMenuOpen||$[19]!==menuPosition?(t12=()=>({isMenuOpen,menuPosition,onCloseMenu:handleCloseMenu,onOpenMenu:handleOpenMenu}),t13=[handleCloseMenu,handleOpenMenu,isMenuOpen,menuPosition],$[16]=handleCloseMenu,$[17]=handleOpenMenu,$[18]=isMenuOpen,$[19]=menuPosition,$[20]=t12,$[21]=t13):(t12=$[20],t13=$[21]);const value=(0,react_src.Kr)(t12,t13);let t14;return $[22]!==children||$[23]!==value?(t14=react.createElement(rightClickMenu_context.A.Provider,{value},children),$[22]=children,$[23]=value,$[24]=t14):t14=$[24],t14}RightClickMenuProvider.propTypes={children:prop_types_default().node.isRequired};const rightClickMenu_provider=RightClickMenuProvider;RightClickMenuProvider.__docgenInfo={description:"Determines the items displayed in the right click menu\nbased off of the right-clicked element.\n\nRight click menu items should have the same shape as items\nin the design system's context menu.\n\n@param {Object} root0 props for the provider\n@param {Node} root0.children the children to be rendered\n@return {Node} React node",methods:[],displayName:"RightClickMenuProvider",props:{children:{description:"",type:{name:"node"},required:!0}}};var subMenuTrigger=__webpack_require__("./packages/design-system/src/components/contextMenu/components/subMenuTrigger.tsx"),contextMenu=__webpack_require__("./packages/design-system/src/components/contextMenu/contextMenu.tsx"),separator=__webpack_require__("./packages/design-system/src/components/contextMenu/components/separator.tsx"),components_button=__webpack_require__("./packages/design-system/src/components/contextMenu/components/button.tsx"),shortcut=__webpack_require__("./packages/design-system/src/components/contextMenu/components/shortcut.ts"),item=__webpack_require__("./packages/design-system/src/components/contextMenu/components/item.tsx");const RIGHT_CLICK_MENU_LABELS={ADD_NEW_PAGE_AFTER:(0,i18n.__)("Add New Page After","web-stories"),ADD_NEW_PAGE_BEFORE:(0,i18n.__)("Add New Page Before","web-stories"),ADD_TO_COLOR_PRESETS:(0,i18n.__)("Add Color to “Saved Colors”","web-stories"),ADD_TO_TEXT_PRESETS:(0,i18n.__)("Add Style to “Saved Styles”","web-stories"),BRING_FORWARD:(0,i18n.__)("Bring Forward","web-stories"),BRING_TO_FRONT:(0,i18n.__)("Bring to Front","web-stories"),BROWSE_STOCK_IMAGES_AND_VIDEO:(0,i18n.__)("Browse Stock Images and Video","web-stories"),BROWSE_PAGE_TEMPLATES:(0,i18n.__)("Browse Page Templates","web-stories"),CLEAR_IMAGE_STYLES:(0,i18n.__)("Clear Image Styles","web-stories"),CLEAR_SHAPE_STYLES:(0,i18n.__)("Clear Shape Styles","web-stories"),CLEAR_VIDEO_STYLES:(0,i18n.__)("Clear Video Styles","web-stories"),CHOOSE_IMAGE_OR_VIDEO:(0,i18n.__)("Choose Image or Video","web-stories"),COPY_IMAGE_STYLES:(0,i18n.__)("Copy Image Styles","web-stories"),COPY_SHAPE_STYLES:(0,i18n.__)("Copy Shape Styles","web-stories"),COPY_VIDEO_STYLES:(0,i18n.__)("Copy Video Styles","web-stories"),COPY_STYLES:(0,i18n.__)("Copy Style","web-stories"),DELETE_PAGE:(0,i18n.__)("Delete Page","web-stories"),DETACH_IMAGE_FROM_BACKGROUND:(0,i18n.__)("Detach Image From Background","web-stories"),DETACH_VIDEO_FROM_BACKGROUND:(0,i18n.__)("Detach Video From Background","web-stories"),DUPLICATE_PAGE:(0,i18n.__)("Duplicate Page","web-stories"),DUPLICATE_ELEMENTS:(numElements=1)=>(0,i18n._n)("Duplicate Element","Duplicate Elements",numElements,"web-stories"),GROUP_LAYERS:(0,i18n.__)("Group Layers","web-stories"),UNGROUP_LAYERS:(0,i18n.__)("Ungroup Layers","web-stories"),UNGROUP_LAYER:(0,i18n.__)("Remove from Group","web-stories"),LOCK_UNLOCK:(0,i18n.__)("Lock/Unlock","web-stories"),HIDE_SHOW:(0,i18n.__)("Hide/Show","web-stories"),RENAME_LAYER:(0,i18n.__)("Rename Layer","web-stories"),PASTE_IMAGE_STYLES:(0,i18n.__)("Paste Image Styles","web-stories"),PASTE_SHAPE_STYLES:(0,i18n.__)("Paste Shape Styles","web-stories"),PASTE_VIDEO_STYLES:(0,i18n.__)("Paste Video Styles","web-stories"),PASTE_STYLES:(0,i18n.__)("Paste Style","web-stories"),SCALE_AND_CROP_BACKGROUND_IMAGE:(0,i18n.__)("Scale & Crop Background Image","web-stories"),SCALE_AND_CROP_BACKGROUND_VIDEO:(0,i18n.__)("Scale & Crop Background Video","web-stories"),SCALE_AND_CROP_IMAGE:(0,i18n.__)("Scale & Crop Image","web-stories"),SCALE_AND_CROP_VIDEO:(0,i18n.__)("Scale & Crop Video","web-stories"),CROP_OFF_SCREEN_VIDEO:(0,i18n.__)("Crop Off-Screen Video","web-stories"),SEND_BACKWARD:(0,i18n.__)("Send Backward","web-stories"),SEND_TO_BACK:(0,i18n.__)("Send to Back","web-stories"),SET_AS_PAGE_BACKGROUND:(0,i18n.__)("Set as Page Background","web-stories"),TRIM_VIDEO:(0,i18n.__)("Trim Video","web-stories"),UPLOAD_IMAGE_OR_VIDEO:(0,i18n.__)("Upload Image or Video","web-stories"),USE_SHAPE_AS_MASK:(0,i18n.__)("Use Shape as a Mask","web-stories"),REMOVE_MASK:(0,i18n.__)("Unmask","web-stories"),RECORD_VIDEO:(0,i18n.__)("Record Video","web-stories"),HEADING_LEVEL:(0,i18n.__)("Heading Level","web-stories")},StyledKbd=(0,styled_components_browser_esm.Ay)(typography_text.E.Kbd).attrs({size:types.$.Small}).withConfig({displayName:"constants__StyledKbd",componentId:"sc-m1qol5-0"})(["color:inherit;:not(:last-child){margin-right:4px;}"]),RIGHT_CLICK_MENU_SHORTCUTS={SEND_BACKWARD:{display:react.createElement(keyboard.rm,{shortcut:"mod down",component:StyledKbd}),title:(0,utils._M)("mod down")},SEND_TO_BACK:{display:react.createElement(keyboard.rm,{shortcut:"mod shift down",component:StyledKbd}),title:(0,utils._M)("mod shift down")},BRING_FORWARD:{display:react.createElement(keyboard.rm,{shortcut:"mod up",component:StyledKbd}),title:(0,utils._M)("mod up")},BRING_TO_FRONT:{display:react.createElement(keyboard.rm,{shortcut:"mod shift up",component:StyledKbd}),title:(0,utils._M)("mod shift up")},DELETE:{display:react.createElement(keyboard.rm,{shortcut:"delete",component:StyledKbd}),title:(0,utils._M)("delete")},COPY_STYLES:{display:react.createElement(keyboard.rm,{shortcut:"alt mod O",component:StyledKbd}),title:(0,utils._M)("alt mod O")},PASTE_STYLES:{display:react.createElement(keyboard.rm,{shortcut:"alt mod P",component:StyledKbd}),title:(0,utils._M)("alt mod P")}};var useShapeMask=__webpack_require__("./packages/story-editor/src/utils/useShapeMask.js"),useVideoTrim=__webpack_require__("./packages/story-editor/src/components/videoTrim/useVideoTrim.js"),SAT=__webpack_require__("./node_modules/sat/SAT.js"),SAT_default=__webpack_require__.n(SAT),chevron_right_small=__webpack_require__("./packages/design-system/src/icons/chevron_right_small.svg"),checkmark_small=__webpack_require__("./packages/design-system/src/icons/checkmark_small.svg"),useStory=__webpack_require__("./packages/story-editor/src/app/story/useStory.ts"),useElementPolygon=__webpack_require__("./packages/story-editor/src/utils/useElementPolygon.js");const ReversedIcon=(0,styled_components_browser_esm.Ay)(chevron_right_small.A).withConfig({displayName:"useLayerSelect__ReversedIcon",componentId:"sc-169lxcx-0"})(["transform:rotate(180deg);"]);function useLayerSelect_temp2(t0){const{state:t1,actions:t2}=t0,{currentPage,selectedElements}=t1,{setSelectedElementsById}=t2;return{currentPage,selectedElements,setSelectedElementsById}}function useLayerSelect_temp(t0){const{state:t1}=t0,{nodesById}=t1;return nodesById}const rightClickMenu_useLayerSelect=function useLayerSelect(t0){const $=(0,dist.c)(25),{menuItemProps,menuPosition,isMenuOpen}=t0,{isRTL}=(0,app_config.UK)(),[isSubMenuOpen,setIsSubMenuOpen]=(0,react_src.J0)(!1),nodesById_0=(0,app_canvas.yu)(useLayerSelect_temp),{currentPage:currentPage_0,selectedElements:selectedElements_0,setSelectedElementsById:setSelectedElementsById_0}=(0,useStory.A)(useLayerSelect_temp2),getElementPolygon=(0,useElementPolygon.A)();let t1,t2;$[0]!==isMenuOpen||$[1]!==setIsSubMenuOpen?(t1=()=>{isMenuOpen||setIsSubMenuOpen(!1)},$[0]=isMenuOpen,$[1]=setIsSubMenuOpen,$[2]=t1):t1=$[2],$[3]!==isMenuOpen?(t2=[isMenuOpen],$[3]=isMenuOpen,$[4]=t2):t2=$[4],(0,react_src.vJ)(t1,t2);const{x,y}=menuPosition;let t3,t4;$[5]!==currentPage_0||$[6]!==getElementPolygon||$[7]!==nodesById_0||$[8]!==x||$[9]!==y?(t3=()=>{if(!currentPage_0?.elements?.length||!Object.keys(nodesById_0)?.length)return[];const clickedPoint=new(SAT_default().Vector)(x,y),intersectingElements=currentPage_0.elements.map((element=>({element,polygon:getElementPolygon(element)}))).map((t5=>{const{element:element_0,polygon:polygon_0}=t5;return SAT_default().pointInPolygon(clickedPoint,polygon_0)?element_0:null})).filter(Boolean);return intersectingElements.reverse(),intersectingElements},t4=[currentPage_0,x,y,nodesById_0,getElementPolygon],$[5]=currentPage_0,$[6]=getElementPolygon,$[7]=nodesById_0,$[8]=x,$[9]=y,$[10]=t3,$[11]=t4):(t3=$[10],t4=$[11]);const getIntersectingElements=(0,react_src.hb)(t3,t4);let t5,t6;$[12]!==getIntersectingElements||$[13]!==isMenuOpen||$[14]!==menuItemProps||$[15]!==selectedElements_0||$[16]!==setSelectedElementsById_0?(t5=()=>{if(!isMenuOpen||0===selectedElements_0.length)return[];const intersectingElements_0=getIntersectingElements();return 1===intersectingElements_0.length&&intersectingElements_0[0].id===selectedElements_0[0].id?[]:intersectingElements_0.map((element_1=>{const{id,isBackground,type}=element_1;return{key:id,supportsIcon:!0,icon:selectedElements_0[0].id===id?react.createElement(checkmark_small.A,null):null,label:react.createElement("span",null,(0,elements_src.Hi)(element_1)),onClick:()=>{setSelectedElementsById_0({elementIds:[id]}),(0,tracking_src.sx)("context_menu_action",{name:"layer_selected",element:type,isBackground})},...menuItemProps}}))},t6=[getIntersectingElements,isMenuOpen,menuItemProps,setSelectedElementsById_0,selectedElements_0],$[12]=getIntersectingElements,$[13]=isMenuOpen,$[14]=menuItemProps,$[15]=selectedElements_0,$[16]=setSelectedElementsById_0,$[17]=t5,$[18]=t6):(t5=$[17],t6=$[18]);const subMenuItems=(0,react_src.Kr)(t5,t6);let t7;return $[19]!==isRTL||$[20]!==isSubMenuOpen||$[21]!==menuItemProps||$[22]!==setIsSubMenuOpen||$[23]!==subMenuItems?(t7=subMenuItems.length>0?{label:(0,i18n.__)("Select Layer","web-stories"),openSubMenu:()=>setIsSubMenuOpen(!0),closeSubMenu:()=>setIsSubMenuOpen(!1),isSubMenuOpen,subMenuItems:isSubMenuOpen?subMenuItems:[],SuffixIcon:isRTL?ReversedIcon:chevron_right_small.A,...menuItemProps}:null,$[19]=isRTL,$[20]=isSubMenuOpen,$[21]=menuItemProps,$[22]=setIsSubMenuOpen,$[23]=subMenuItems,$[24]=t7):t7=$[24],t7};function LayerHide(){const $=(0,dist.c)(5),updateSelectedElements=(0,app.P3)(layerHide_temp);let t0,t1;$[0]!==updateSelectedElements?(t0=()=>updateSelectedElements({properties:layerHide_temp2}),t1=[updateSelectedElements],$[0]=updateSelectedElements,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const toggleLayerHide=(0,react_src.hb)(t0,t1);let t2;return $[3]!==toggleLayerHide?(t2=react.createElement(components_button.A,{onClick:toggleLayerHide},RIGHT_CLICK_MENU_LABELS.HIDE_SHOW),$[3]=toggleLayerHide,$[4]=t2):t2=$[4],t2}function layerHide_temp2(oldElement){return{...oldElement,isHidden:!oldElement.isHidden}}function layerHide_temp(ctx){return ctx.actions.updateSelectedElements}const layerHide=LayerHide;function LayerLock(){const $=(0,dist.c)(5),updateSelectedElements=(0,app.P3)(layerLock_temp);let t0,t1;$[0]!==updateSelectedElements?(t0=()=>updateSelectedElements({properties:layerLock_temp2}),t1=[updateSelectedElements],$[0]=updateSelectedElements,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const toggleLayerLock=(0,react_src.hb)(t0,t1);let t2;return $[3]!==toggleLayerLock?(t2=react.createElement(components_button.A,{onClick:toggleLayerLock},RIGHT_CLICK_MENU_LABELS.LOCK_UNLOCK),$[3]=toggleLayerLock,$[4]=t2):t2=$[4],t2}function layerLock_temp2(oldElement){return{...oldElement,isLocked:!oldElement.isLocked}}function layerLock_temp(ctx){return ctx.actions.updateSelectedElements}LayerHide.__docgenInfo={description:"",methods:[],displayName:"LayerHide"};const layerLock=LayerLock;function LayerName(){const $=(0,dist.c)(9),{selectedElementIds}=(0,app.P3)(layerName_temp),{setRenamableLayer}=(0,app.yu)(layerName_temp2);let t0,t1;$[0]!==selectedElementIds[0]||$[1]!==setRenamableLayer?(t0=()=>{setRenamableLayer({elementId:selectedElementIds[0]})},$[0]=selectedElementIds[0],$[1]=setRenamableLayer,$[2]=t0):t0=$[2],$[3]!==selectedElementIds||$[4]!==setRenamableLayer?(t1=[setRenamableLayer,selectedElementIds],$[3]=selectedElementIds,$[4]=setRenamableLayer,$[5]=t1):t1=$[5];const enableLayerNaming=(0,react_src.hb)(t0,t1);let t2,t3;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t2=react.createElement(separator.A,null),$[6]=t2):t2=$[6],$[7]!==enableLayerNaming?(t3=react.createElement(react.Fragment,null,t2,react.createElement(components_button.A,{onClick:enableLayerNaming},RIGHT_CLICK_MENU_LABELS.RENAME_LAYER)),$[7]=enableLayerNaming,$[8]=t3):t3=$[8],t3}function layerName_temp2(t0){const{state:state_0,actions}=t0;return{setRenamableLayer:actions.setRenamableLayer,renamableLayer:state_0.renamableLayer}}function layerName_temp(t0){const{state}=t0;return{selectedElementIds:state.selectedElementIds}}LayerLock.__docgenInfo={description:"",methods:[],displayName:"LayerLock"};const layerName=LayerName;function LayerUngroup(){const $=(0,dist.c)(9),{selectedElements,removeElementFromGroup}=(0,app.P3)(layerUngroup_temp);let t0,t1;$[0]!==removeElementFromGroup||$[1]!==selectedElements[0].groupId||$[2]!==selectedElements[0].id?(t0=()=>{removeElementFromGroup({elementId:selectedElements[0].id,groupId:selectedElements[0].groupId})},$[0]=removeElementFromGroup,$[1]=selectedElements[0].groupId,$[2]=selectedElements[0].id,$[3]=t0):t0=$[3],$[4]!==removeElementFromGroup||$[5]!==selectedElements?(t1=[selectedElements,removeElementFromGroup],$[4]=removeElementFromGroup,$[5]=selectedElements,$[6]=t1):t1=$[6];const handleLayerUngroup=(0,react_src.hb)(t0,t1);if(!selectedElements.some(layerUngroup_temp2))return null;let t2;return $[7]!==handleLayerUngroup?(t2=react.createElement(components_button.A,{onClick:handleLayerUngroup},RIGHT_CLICK_MENU_LABELS.UNGROUP_LAYER),$[7]=handleLayerUngroup,$[8]=t2):t2=$[8],t2}function layerUngroup_temp2(el){return el.groupId}function layerUngroup_temp(t0){const{state,actions}=t0;return{selectedElements:state.selectedElements,removeElementFromGroup:actions.removeElementFromGroup}}LayerName.__docgenInfo={description:"",methods:[],displayName:"LayerName"};const layerUngroup=LayerUngroup;LayerUngroup.__docgenInfo={description:"",methods:[],displayName:"LayerUngroup"};const SubMenuContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"shared__SubMenuContainer",componentId:"sc-anftx6-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(({position})=>position?.y??0),(({position})=>position?.x??0));SubMenuContainer.propTypes={position:prop_types_default().shape({x:prop_types_default().number,y:prop_types_default().number})};const SUB_MENU_ARIA_LABEL=(0,i18n.__)("Select a layer","web-stories"),MenuPropType={parentMenuRef:prop_types_default().oneOfType([prop_types_default().func,prop_types_default().shape({current:prop_types_default().instanceOf(Element)})]).isRequired};function foregroundMediaMenu_extends(){return foregroundMediaMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},foregroundMediaMenu_extends.apply(null,arguments)}function ForegroundMediaMenu(t0){const $=(0,dist.c)(87),{parentMenuRef}=t0,{copiedElementType,selectedElement}=(0,app.P3)(foregroundMediaMenu_temp),{handleCopyStyles,handlePasteStyles}=hooks_useCopyPasteActions(),{handleDuplicateSelectedElements,handleOpenScaleAndCrop,handleSetPageBackground}=hooks_useElementActions(),{canElementMoveBackwards,canElementMoveForwards,handleSendBackward,handleSendToBack,handleBringForward,handleBringToFront,handleCropOffScreenVideo}=hooks_useLayerActions(),{hasShapeMask,removeShapeMask}=(0,useShapeMask.A)(selectedElement);let t1,t2;$[0]!==selectedElement?(t1=()=>isOffCanvas(selectedElement),t2=[selectedElement],$[0]=selectedElement,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const{offCanvas}=(0,react_src.Kr)(t1,t2),offScreenVideoCropping=useFeature("offScreenVideoCropping"),canTranscodeResource=(0,app.HZ)(foregroundMediaMenu_temp2),{hasTrimMode,toggleTrimMode}=(0,useVideoTrim.A)(foregroundMediaMenu_temp3),subMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t3;$[3]!==menuPosition?(t3={menuPosition,isMenuOpen:!0},$[3]=menuPosition,$[4]=t3):t3=$[4];const layerSelectProps=rightClickMenu_useLayerSelect(t3);let t4,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps;$[5]!==layerSelectProps?(t4=layerSelectProps||{},$[5]=layerSelectProps,$[6]=t4):t4=$[6],$[7]!==t4?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t4),$[7]=t4,$[8]=closeSubMenu,$[9]=isSubMenuOpen,$[10]=subMenuItems,$[11]=subMenuTriggerProps):(closeSubMenu=$[8],isSubMenuOpen=$[9],subMenuItems=$[10],subMenuTriggerProps=$[11]);const isVideo="video"===selectedElement?.type,scaleLabel=isVideo?RIGHT_CLICK_MENU_LABELS.SCALE_AND_CROP_VIDEO:RIGHT_CLICK_MENU_LABELS.SCALE_AND_CROP_IMAGE,copyLabel=isVideo?RIGHT_CLICK_MENU_LABELS.COPY_VIDEO_STYLES:RIGHT_CLICK_MENU_LABELS.COPY_IMAGE_STYLES,pasteLabel=isVideo?RIGHT_CLICK_MENU_LABELS.PASTE_VIDEO_STYLES:RIGHT_CLICK_MENU_LABELS.PASTE_IMAGE_STYLES,showToggleTrimMode=isVideo&&hasTrimMode;let t5,t6,t7,t8,t9;$[12]!==closeSubMenu||$[13]!==isSubMenuOpen||$[14]!==layerSelectProps||$[15]!==onCloseMenu||$[16]!==parentMenuRef||$[17]!==subMenuItems||$[18]!==subMenuRef||$[19]!==subMenuTriggerProps?(t5=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,foregroundMediaMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(foregroundMediaMenu_temp4))),react.createElement(separator.A,null)),$[12]=closeSubMenu,$[13]=isSubMenuOpen,$[14]=layerSelectProps,$[15]=onCloseMenu,$[16]=parentMenuRef,$[17]=subMenuItems,$[18]=subMenuRef,$[19]=subMenuTriggerProps,$[20]=t5):t5=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(t6=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(1),$[21]=t6):t6=$[21],$[22]!==handleDuplicateSelectedElements?(t7=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t6),$[22]=handleDuplicateSelectedElements,$[23]=t7):t7=$[23],$[24]!==hasShapeMask||$[25]!==removeShapeMask?(t8=hasShapeMask&&react.createElement(components_button.A,{onClick:removeShapeMask},RIGHT_CLICK_MENU_LABELS.REMOVE_MASK),$[24]=hasShapeMask,$[25]=removeShapeMask,$[26]=t8):t8=$[26],$[27]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(separator.A,null),$[27]=t9):t9=$[27];const t10=!canElementMoveBackwards;let t11,t12;$[28]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_BACKWARD.display),$[28]=t11):t11=$[28],$[29]!==handleSendBackward||$[30]!==t10?(t12=react.createElement(components_button.A,{disabled:t10,onClick:handleSendBackward},RIGHT_CLICK_MENU_LABELS.SEND_BACKWARD,t11),$[29]=handleSendBackward,$[30]=t10,$[31]=t12):t12=$[31];const t13=!canElementMoveBackwards;let t14,t15;$[32]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_TO_BACK.display),$[32]=t14):t14=$[32],$[33]!==handleSendToBack||$[34]!==t13?(t15=react.createElement(components_button.A,{disabled:t13,onClick:handleSendToBack},RIGHT_CLICK_MENU_LABELS.SEND_TO_BACK,t14),$[33]=handleSendToBack,$[34]=t13,$[35]=t15):t15=$[35];const t16=!canElementMoveForwards;let t17,t18;$[36]===Symbol.for("react.memo_cache_sentinel")?(t17=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_FORWARD.display),$[36]=t17):t17=$[36],$[37]!==handleBringForward||$[38]!==t16?(t18=react.createElement(components_button.A,{disabled:t16,onClick:handleBringForward},RIGHT_CLICK_MENU_LABELS.BRING_FORWARD,t17),$[37]=handleBringForward,$[38]=t16,$[39]=t18):t18=$[39];const t19=!canElementMoveForwards;let t20,t21,t22,t23,t24,t25,t26,t27,t28,t29,t30,t31,t32;$[40]===Symbol.for("react.memo_cache_sentinel")?(t20=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_TO_FRONT.display),$[40]=t20):t20=$[40],$[41]!==handleBringToFront||$[42]!==t19?(t21=react.createElement(components_button.A,{disabled:t19,onClick:handleBringToFront},RIGHT_CLICK_MENU_LABELS.BRING_TO_FRONT,t20),$[41]=handleBringToFront,$[42]=t19,$[43]=t21):t21=$[43],$[44]===Symbol.for("react.memo_cache_sentinel")?(t22=react.createElement(layerName,null),t23=react.createElement(layerLock,null),t24=react.createElement(layerHide,null),t25=react.createElement(layerUngroup,null),t26=react.createElement(separator.A,null),$[44]=t22,$[45]=t23,$[46]=t24,$[47]=t25,$[48]=t26):(t22=$[44],t23=$[45],t24=$[46],t25=$[47],t26=$[48]),$[49]!==handleSetPageBackground?(t27=react.createElement(components_button.A,{onClick:handleSetPageBackground},RIGHT_CLICK_MENU_LABELS.SET_AS_PAGE_BACKGROUND),$[49]=handleSetPageBackground,$[50]=t27):t27=$[50],$[51]!==handleOpenScaleAndCrop||$[52]!==scaleLabel?(t28=react.createElement(components_button.A,{onClick:handleOpenScaleAndCrop},scaleLabel),$[51]=handleOpenScaleAndCrop,$[52]=scaleLabel,$[53]=t28):t28=$[53],$[54]!==handleCropOffScreenVideo||$[55]!==isVideo||$[56]!==offCanvas||$[57]!==offScreenVideoCropping?(t29=offScreenVideoCropping&&isVideo&&offCanvas&&react.createElement(components_button.A,{onClick:handleCropOffScreenVideo},RIGHT_CLICK_MENU_LABELS.CROP_OFF_SCREEN_VIDEO),$[54]=handleCropOffScreenVideo,$[55]=isVideo,$[56]=offCanvas,$[57]=offScreenVideoCropping,$[58]=t29):t29=$[58],$[59]!==canTranscodeResource||$[60]!==selectedElement?.resource||$[61]!==showToggleTrimMode||$[62]!==toggleTrimMode?(t30=showToggleTrimMode&&react.createElement(components_button.A,{disabled:!canTranscodeResource(selectedElement?.resource),onClick:toggleTrimMode},RIGHT_CLICK_MENU_LABELS.TRIM_VIDEO),$[59]=canTranscodeResource,$[60]=selectedElement?.resource,$[61]=showToggleTrimMode,$[62]=toggleTrimMode,$[63]=t30):t30=$[63],$[64]===Symbol.for("react.memo_cache_sentinel")?(t31=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.COPY_STYLES.display),$[64]=t31):t31=$[64],$[65]!==copyLabel||$[66]!==handleCopyStyles?(t32=react.createElement(components_button.A,{onClick:handleCopyStyles},copyLabel,t31),$[65]=copyLabel,$[66]=handleCopyStyles,$[67]=t32):t32=$[67];const t33=copiedElementType!==selectedElement?.type;let t34,t35,t36;return $[68]===Symbol.for("react.memo_cache_sentinel")?(t34=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.PASTE_STYLES.display),$[68]=t34):t34=$[68],$[69]!==handlePasteStyles||$[70]!==pasteLabel||$[71]!==t33?(t35=react.createElement(components_button.A,{disabled:t33,onClick:handlePasteStyles},pasteLabel,t34),$[69]=handlePasteStyles,$[70]=pasteLabel,$[71]=t33,$[72]=t35):t35=$[72],$[73]!==t12||$[74]!==t15||$[75]!==t18||$[76]!==t21||$[77]!==t27||$[78]!==t28||$[79]!==t29||$[80]!==t30||$[81]!==t32||$[82]!==t35||$[83]!==t5||$[84]!==t7||$[85]!==t8?(t36=react.createElement(react.Fragment,null,t5,t7,t8,t9,t12,t15,t18,t21,t22,t23,t24,t25,t26,t27,t28,t29,t30,t32,t35),$[73]=t12,$[74]=t15,$[75]=t18,$[76]=t21,$[77]=t27,$[78]=t28,$[79]=t29,$[80]=t30,$[81]=t32,$[82]=t35,$[83]=t5,$[84]=t7,$[85]=t8,$[86]=t36):t36=$[86],t36}function foregroundMediaMenu_temp4(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,foregroundMediaMenu_extends({key},menuItemProps))}function foregroundMediaMenu_temp3(t0){const{state:state_0,actions}=t0;return{hasTrimMode:state_0.hasTrimMode,toggleTrimMode:actions.toggleTrimMode}}function foregroundMediaMenu_temp2(value){return value.state.canTranscodeResource}function foregroundMediaMenu_temp(t0){const{state}=t0;return{copiedElementType:state.copiedElementState.type,selectedElement:state.selectedElements?.[0]}}ForegroundMediaMenu.propTypes=MenuPropType;const foregroundMediaMenu=ForegroundMediaMenu;ForegroundMediaMenu.__docgenInfo={description:"",methods:[],displayName:"ForegroundMediaMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}};const utils_useShapeMaskElements=()=>{const $=(0,dist.c)(13),{selectedElements,combineElements}=(0,app.P3)(useShapeMaskElements_temp);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0={},$[0]=t0):t0=$[0];const[shapeMaskElements,setShapeMaskElements]=(0,react_src.J0)(t0),[canMergeIntoMask,setCanMergeIntoMask]=(0,react_src.J0)(!1);let t1,t2,t3;$[1]!==selectedElements||$[2]!==setCanMergeIntoMask||$[3]!==setShapeMaskElements?(t1=()=>{if(selectedElements?.length>2)return void setCanMergeIntoMask(!1);let target,shape;if(selectedElements.forEach((element=>{const{isMedia}=(0,elements_src.zh)(element.type);"shape"===element.type&&(shape=element),isMedia&&(target=element)})),shape&&target)return setCanMergeIntoMask(!0),void setShapeMaskElements({shape,target});setCanMergeIntoMask(!1)},$[1]=selectedElements,$[2]=setCanMergeIntoMask,$[3]=setShapeMaskElements,$[4]=t1):t1=$[4],$[5]!==selectedElements?(t2=[selectedElements],$[5]=selectedElements,$[6]=t2):t2=$[6],(0,react_src.vJ)(t1,t2),$[7]!==combineElements||$[8]!==shapeMaskElements?(t3=()=>{const{target:target_0,shape:shape_0}=shapeMaskElements;target_0&&shape_0&&combineElements({firstElement:target_0,secondId:shape_0.id})},$[7]=combineElements,$[8]=shapeMaskElements,$[9]=t3):t3=$[9];const mergeIntoMask=t3;let t4;return $[10]!==canMergeIntoMask||$[11]!==mergeIntoMask?(t4={canMergeIntoMask,mergeIntoMask},$[10]=canMergeIntoMask,$[11]=mergeIntoMask,$[12]=t4):t4=$[12],t4};function useShapeMaskElements_temp(t0){const{state,actions}=t0;return{selectedElements:state.selectedElements,combineElements:actions.combineElements}}function MultipleElementsMenu(){const $=(0,dist.c)(23),{handleDuplicateSelectedElements,handleGroupSelectedElements,handleUngroupSelectedElements}=hooks_useElementActions(),{canMergeIntoMask,mergeIntoMask}=utils_useShapeMaskElements(),{selectedElements}=(0,app.P3)(multipleElementsMenu_temp);let t0;$[0]!==selectedElements?(t0=selectedElements.some(multipleElementsMenu_temp2),$[0]=selectedElements,$[1]=t0):t0=$[1];const isGroupSelected=t0;let t1;if($[2]!==selectedElements){let t2;$[4]!==selectedElements[0]?(t2=el_0=>el_0.groupId&&el_0.groupId===selectedElements[0].groupId,$[4]=selectedElements[0],$[5]=t2):t2=$[5],t1=selectedElements.every(t2),$[2]=selectedElements,$[3]=t1}else t1=$[3];const isOnlyGroupSelected=t1;let t2,t3,t4,t5,t6,t7;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t2=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(2),$[6]=t2):t2=$[6],$[7]!==handleDuplicateSelectedElements?(t3=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t2),$[7]=handleDuplicateSelectedElements,$[8]=t3):t3=$[8],$[9]!==canMergeIntoMask||$[10]!==mergeIntoMask?(t4=canMergeIntoMask&&react.createElement(components_button.A,{onClick:mergeIntoMask},RIGHT_CLICK_MENU_LABELS.USE_SHAPE_AS_MASK),$[9]=canMergeIntoMask,$[10]=mergeIntoMask,$[11]=t4):t4=$[11],$[12]!==handleGroupSelectedElements||$[13]!==isOnlyGroupSelected?(t5=!isOnlyGroupSelected&&react.createElement(components_button.A,{onClick:handleGroupSelectedElements},RIGHT_CLICK_MENU_LABELS.GROUP_LAYERS),$[12]=handleGroupSelectedElements,$[13]=isOnlyGroupSelected,$[14]=t5):t5=$[14],$[15]!==handleUngroupSelectedElements||$[16]!==isGroupSelected?(t6=isGroupSelected&&react.createElement(components_button.A,{onClick:handleUngroupSelectedElements},RIGHT_CLICK_MENU_LABELS.UNGROUP_LAYERS),$[15]=handleUngroupSelectedElements,$[16]=isGroupSelected,$[17]=t6):t6=$[17],$[18]!==t3||$[19]!==t4||$[20]!==t5||$[21]!==t6?(t7=react.createElement(react.Fragment,null,t3,t4,t5,t6),$[18]=t3,$[19]=t4,$[20]=t5,$[21]=t6,$[22]=t7):t7=$[22],t7}function multipleElementsMenu_temp2(el){return el.groupId}function multipleElementsMenu_temp(t0){const{state}=t0;return{selectedElements:state.selectedElements}}const multipleElementsMenu=MultipleElementsMenu;function pageMenu_extends(){return pageMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pageMenu_extends.apply(null,arguments)}function PageMenu(t0){const $=(0,dist.c)(53),{parentMenuRef}=t0,{currentPageIndex,canDeletePage,selectedElement}=(0,app.P3)(pageMenu_temp),{handleOpenScaleAndCrop,handleRemovePageBackground}=hooks_useElementActions(),{handleAddPageAtPosition,handleDeletePage,handleDuplicatePage}=hooks_usePageActions(),canTranscodeResource=(0,app.HZ)(pageMenu_temp2),{hasTrimMode,toggleTrimMode}=(0,useVideoTrim.A)(pageMenu_temp3),subMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t1;$[0]!==menuPosition?(t1={menuPosition,isMenuOpen:!0},$[0]=menuPosition,$[1]=t1):t1=$[1];const layerSelectProps=rightClickMenu_useLayerSelect(t1);let t2,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps;$[2]!==layerSelectProps?(t2=layerSelectProps||{},$[2]=layerSelectProps,$[3]=t2):t2=$[3],$[4]!==t2?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t2),$[4]=t2,$[5]=closeSubMenu,$[6]=isSubMenuOpen,$[7]=subMenuItems,$[8]=subMenuTriggerProps):(closeSubMenu=$[5],isSubMenuOpen=$[6],subMenuItems=$[7],subMenuTriggerProps=$[8]);const disableBackgroundMediaActions=selectedElement?.isDefaultBackground,isVideo="video"===selectedElement?.type,detachLabel=isVideo?RIGHT_CLICK_MENU_LABELS.DETACH_VIDEO_FROM_BACKGROUND:RIGHT_CLICK_MENU_LABELS.DETACH_IMAGE_FROM_BACKGROUND,scaleLabel=isVideo?RIGHT_CLICK_MENU_LABELS.SCALE_AND_CROP_BACKGROUND_VIDEO:RIGHT_CLICK_MENU_LABELS.SCALE_AND_CROP_BACKGROUND_IMAGE,showTrimModeAction=isVideo&&hasTrimMode;let t3,t4,t5,t6,t7,t8,t9,t10;$[9]!==closeSubMenu||$[10]!==isSubMenuOpen||$[11]!==layerSelectProps||$[12]!==onCloseMenu||$[13]!==parentMenuRef||$[14]!==subMenuItems||$[15]!==subMenuRef||$[16]!==subMenuTriggerProps?(t3=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,pageMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(pageMenu_temp4))),react.createElement(separator.A,null)),$[9]=closeSubMenu,$[10]=isSubMenuOpen,$[11]=layerSelectProps,$[12]=onCloseMenu,$[13]=parentMenuRef,$[14]=subMenuItems,$[15]=subMenuRef,$[16]=subMenuTriggerProps,$[17]=t3):t3=$[17],$[18]!==detachLabel||$[19]!==disableBackgroundMediaActions||$[20]!==handleRemovePageBackground?(t4=react.createElement(components_button.A,{disabled:disableBackgroundMediaActions,onClick:handleRemovePageBackground},detachLabel),$[18]=detachLabel,$[19]=disableBackgroundMediaActions,$[20]=handleRemovePageBackground,$[21]=t4):t4=$[21],$[22]!==disableBackgroundMediaActions||$[23]!==handleOpenScaleAndCrop||$[24]!==scaleLabel?(t5=react.createElement(components_button.A,{disabled:disableBackgroundMediaActions,onClick:handleOpenScaleAndCrop},scaleLabel),$[22]=disableBackgroundMediaActions,$[23]=handleOpenScaleAndCrop,$[24]=scaleLabel,$[25]=t5):t5=$[25],$[26]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(separator.A,null),$[26]=t6):t6=$[26],$[27]!==canTranscodeResource||$[28]!==detachLabel||$[29]!==selectedElement?.resource||$[30]!==showTrimModeAction||$[31]!==toggleTrimMode?(t7=showTrimModeAction&&react.createElement(react.Fragment,null,react.createElement(components_button.A,{disabled:!canTranscodeResource(selectedElement?.resource),onClick:toggleTrimMode},detachLabel),react.createElement(separator.A,null)),$[27]=canTranscodeResource,$[28]=detachLabel,$[29]=selectedElement?.resource,$[30]=showTrimModeAction,$[31]=toggleTrimMode,$[32]=t7):t7=$[32],$[33]!==currentPageIndex||$[34]!==handleAddPageAtPosition?(t8=react.createElement(components_button.A,{onClick:()=>handleAddPageAtPosition(currentPageIndex+1)},RIGHT_CLICK_MENU_LABELS.ADD_NEW_PAGE_AFTER),$[33]=currentPageIndex,$[34]=handleAddPageAtPosition,$[35]=t8):t8=$[35],$[36]!==currentPageIndex||$[37]!==handleAddPageAtPosition?(t9=react.createElement(components_button.A,{onClick:()=>handleAddPageAtPosition(currentPageIndex)},RIGHT_CLICK_MENU_LABELS.ADD_NEW_PAGE_BEFORE),$[36]=currentPageIndex,$[37]=handleAddPageAtPosition,$[38]=t9):t9=$[38],$[39]!==handleDuplicatePage?(t10=react.createElement(components_button.A,{onClick:handleDuplicatePage},RIGHT_CLICK_MENU_LABELS.DUPLICATE_PAGE),$[39]=handleDuplicatePage,$[40]=t10):t10=$[40];const t11=!canDeletePage;let t12,t13;return $[41]!==handleDeletePage||$[42]!==t11?(t12=react.createElement(components_button.A,{disabled:t11,onClick:handleDeletePage},RIGHT_CLICK_MENU_LABELS.DELETE_PAGE),$[41]=handleDeletePage,$[42]=t11,$[43]=t12):t12=$[43],$[44]!==t10||$[45]!==t12||$[46]!==t3||$[47]!==t4||$[48]!==t5||$[49]!==t7||$[50]!==t8||$[51]!==t9?(t13=react.createElement(react.Fragment,null,t3,t4,t5,t6,t7,t8,t9,t10,t12),$[44]=t10,$[45]=t12,$[46]=t3,$[47]=t4,$[48]=t5,$[49]=t7,$[50]=t8,$[51]=t9,$[52]=t13):t13=$[52],t13}function pageMenu_temp4(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,pageMenu_extends({key},menuItemProps))}function pageMenu_temp3(t0){const{state:state_0,actions}=t0;return{hasTrimMode:state_0.hasTrimMode,toggleTrimMode:actions.toggleTrimMode}}function pageMenu_temp2(value){return value.state.canTranscodeResource}function pageMenu_temp(t0){const{state}=t0;return{currentPageIndex:state.currentPageIndex,canDeletePage:state.pages.length>1,selectedElement:state.selectedElements?.[0]}}MultipleElementsMenu.__docgenInfo={description:"",methods:[],displayName:"MultipleElementsMenu"},PageMenu.propTypes=MenuPropType;const pageMenu=PageMenu;function shapeMenu_extends(){return shapeMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},shapeMenu_extends.apply(null,arguments)}function ShapeMenu(t0){const $=(0,dist.c)(62),{parentMenuRef}=t0,{copiedElementType,selectedElementType}=(0,app.P3)(shapeMenu_temp),{handleCopyStyles,handlePasteStyles}=hooks_useCopyPasteActions(),{handleDuplicateSelectedElements}=hooks_useElementActions(),{canElementMoveBackwards,canElementMoveForwards,handleSendBackward,handleSendToBack,handleBringForward,handleBringToFront}=hooks_useLayerActions(),{handleAddColorPreset}=hooks_usePresetActions(),subMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t1;$[0]!==menuPosition?(t1={menuPosition,isMenuOpen:!0},$[0]=menuPosition,$[1]=t1):t1=$[1];const layerSelectProps=rightClickMenu_useLayerSelect(t1);let t2,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps,t3,t4,t5,t6;$[2]!==layerSelectProps?(t2=layerSelectProps||{},$[2]=layerSelectProps,$[3]=t2):t2=$[3],$[4]!==t2?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t2),$[4]=t2,$[5]=closeSubMenu,$[6]=isSubMenuOpen,$[7]=subMenuItems,$[8]=subMenuTriggerProps):(closeSubMenu=$[5],isSubMenuOpen=$[6],subMenuItems=$[7],subMenuTriggerProps=$[8]),$[9]!==closeSubMenu||$[10]!==isSubMenuOpen||$[11]!==layerSelectProps||$[12]!==onCloseMenu||$[13]!==parentMenuRef||$[14]!==subMenuItems||$[15]!==subMenuRef||$[16]!==subMenuTriggerProps?(t3=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,shapeMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(shapeMenu_temp2))),react.createElement(separator.A,null)),$[9]=closeSubMenu,$[10]=isSubMenuOpen,$[11]=layerSelectProps,$[12]=onCloseMenu,$[13]=parentMenuRef,$[14]=subMenuItems,$[15]=subMenuRef,$[16]=subMenuTriggerProps,$[17]=t3):t3=$[17],$[18]===Symbol.for("react.memo_cache_sentinel")?(t4=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(1),$[18]=t4):t4=$[18],$[19]!==handleDuplicateSelectedElements?(t5=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t4),$[19]=handleDuplicateSelectedElements,$[20]=t5):t5=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(separator.A,null),$[21]=t6):t6=$[21];const t7=!canElementMoveBackwards;let t8,t9;$[22]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_BACKWARD.display),$[22]=t8):t8=$[22],$[23]!==handleSendBackward||$[24]!==t7?(t9=react.createElement(components_button.A,{disabled:t7,onClick:handleSendBackward},RIGHT_CLICK_MENU_LABELS.SEND_BACKWARD,t8),$[23]=handleSendBackward,$[24]=t7,$[25]=t9):t9=$[25];const t10=!canElementMoveBackwards;let t11,t12;$[26]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_TO_BACK.display),$[26]=t11):t11=$[26],$[27]!==handleSendToBack||$[28]!==t10?(t12=react.createElement(components_button.A,{disabled:t10,onClick:handleSendToBack},RIGHT_CLICK_MENU_LABELS.SEND_TO_BACK,t11),$[27]=handleSendToBack,$[28]=t10,$[29]=t12):t12=$[29];const t13=!canElementMoveForwards;let t14,t15;$[30]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_FORWARD.display),$[30]=t14):t14=$[30],$[31]!==handleBringForward||$[32]!==t13?(t15=react.createElement(components_button.A,{disabled:t13,onClick:handleBringForward},RIGHT_CLICK_MENU_LABELS.BRING_FORWARD,t14),$[31]=handleBringForward,$[32]=t13,$[33]=t15):t15=$[33];const t16=!canElementMoveForwards;let t17,t18,t19,t20,t21,t22,t23,t24,t25;$[34]===Symbol.for("react.memo_cache_sentinel")?(t17=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_TO_FRONT.display),$[34]=t17):t17=$[34],$[35]!==handleBringToFront||$[36]!==t16?(t18=react.createElement(components_button.A,{disabled:t16,onClick:handleBringToFront},RIGHT_CLICK_MENU_LABELS.BRING_TO_FRONT,t17),$[35]=handleBringToFront,$[36]=t16,$[37]=t18):t18=$[37],$[38]===Symbol.for("react.memo_cache_sentinel")?(t19=react.createElement(layerName,null),t20=react.createElement(layerLock,null),t21=react.createElement(layerHide,null),t22=react.createElement(layerUngroup,null),t23=react.createElement(separator.A,null),$[38]=t19,$[39]=t20,$[40]=t21,$[41]=t22,$[42]=t23):(t19=$[38],t20=$[39],t21=$[40],t22=$[41],t23=$[42]),$[43]===Symbol.for("react.memo_cache_sentinel")?(t24=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.COPY_STYLES.display),$[43]=t24):t24=$[43],$[44]!==handleCopyStyles?(t25=react.createElement(components_button.A,{onClick:handleCopyStyles},RIGHT_CLICK_MENU_LABELS.COPY_SHAPE_STYLES,t24),$[44]=handleCopyStyles,$[45]=t25):t25=$[45];const t26=copiedElementType!==selectedElementType;let t27,t28,t29,t30;return $[46]===Symbol.for("react.memo_cache_sentinel")?(t27=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.PASTE_STYLES.display),$[46]=t27):t27=$[46],$[47]!==handlePasteStyles||$[48]!==t26?(t28=react.createElement(components_button.A,{disabled:t26,onClick:handlePasteStyles},RIGHT_CLICK_MENU_LABELS.PASTE_SHAPE_STYLES,t27),$[47]=handlePasteStyles,$[48]=t26,$[49]=t28):t28=$[49],$[50]!==handleAddColorPreset?(t29=react.createElement(components_button.A,{onClick:handleAddColorPreset},RIGHT_CLICK_MENU_LABELS.ADD_TO_COLOR_PRESETS),$[50]=handleAddColorPreset,$[51]=t29):t29=$[51],$[52]!==t12||$[53]!==t15||$[54]!==t18||$[55]!==t25||$[56]!==t28||$[57]!==t29||$[58]!==t3||$[59]!==t5||$[60]!==t9?(t30=react.createElement(react.Fragment,null,t3,t5,t6,t9,t12,t15,t18,t19,t20,t21,t22,t23,t25,t28,t29),$[52]=t12,$[53]=t15,$[54]=t18,$[55]=t25,$[56]=t28,$[57]=t29,$[58]=t3,$[59]=t5,$[60]=t9,$[61]=t30):t30=$[61],t30}function shapeMenu_temp2(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,shapeMenu_extends({key},menuItemProps))}function shapeMenu_temp(t0){const{state}=t0;return{copiedElementType:state.copiedElementState.type,selectedElementType:state.selectedElements?.[0].type}}PageMenu.__docgenInfo={description:"",methods:[],displayName:"PageMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}},ShapeMenu.propTypes=MenuPropType;const shapeMenu=ShapeMenu;function stickerMenu_extends(){return stickerMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},stickerMenu_extends.apply(null,arguments)}function StickerMenu(t0){const $=(0,dist.c)(49),{parentMenuRef}=t0,{handleDuplicateSelectedElements}=hooks_useElementActions(),{canElementMoveBackwards,canElementMoveForwards,handleSendBackward,handleSendToBack,handleBringForward,handleBringToFront}=hooks_useLayerActions(),subMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t1;$[0]!==menuPosition?(t1={menuPosition,isMenuOpen:!0},$[0]=menuPosition,$[1]=t1):t1=$[1];const layerSelectProps=rightClickMenu_useLayerSelect(t1);let t2,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps,t3,t4,t5,t6;$[2]!==layerSelectProps?(t2=layerSelectProps||{},$[2]=layerSelectProps,$[3]=t2):t2=$[3],$[4]!==t2?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t2),$[4]=t2,$[5]=closeSubMenu,$[6]=isSubMenuOpen,$[7]=subMenuItems,$[8]=subMenuTriggerProps):(closeSubMenu=$[5],isSubMenuOpen=$[6],subMenuItems=$[7],subMenuTriggerProps=$[8]),$[9]!==closeSubMenu||$[10]!==isSubMenuOpen||$[11]!==layerSelectProps||$[12]!==onCloseMenu||$[13]!==parentMenuRef||$[14]!==subMenuItems||$[15]!==subMenuRef||$[16]!==subMenuTriggerProps?(t3=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,stickerMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(stickerMenu_temp))),react.createElement(separator.A,null)),$[9]=closeSubMenu,$[10]=isSubMenuOpen,$[11]=layerSelectProps,$[12]=onCloseMenu,$[13]=parentMenuRef,$[14]=subMenuItems,$[15]=subMenuRef,$[16]=subMenuTriggerProps,$[17]=t3):t3=$[17],$[18]===Symbol.for("react.memo_cache_sentinel")?(t4=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(1),$[18]=t4):t4=$[18],$[19]!==handleDuplicateSelectedElements?(t5=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t4),$[19]=handleDuplicateSelectedElements,$[20]=t5):t5=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(separator.A,null),$[21]=t6):t6=$[21];const t7=!canElementMoveBackwards;let t8,t9;$[22]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_BACKWARD.display),$[22]=t8):t8=$[22],$[23]!==handleSendBackward||$[24]!==t7?(t9=react.createElement(components_button.A,{disabled:t7,onClick:handleSendBackward},RIGHT_CLICK_MENU_LABELS.SEND_BACKWARD,t8),$[23]=handleSendBackward,$[24]=t7,$[25]=t9):t9=$[25];const t10=!canElementMoveBackwards;let t11,t12;$[26]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_TO_BACK.display),$[26]=t11):t11=$[26],$[27]!==handleSendToBack||$[28]!==t10?(t12=react.createElement(components_button.A,{disabled:t10,onClick:handleSendToBack},RIGHT_CLICK_MENU_LABELS.SEND_TO_BACK,t11),$[27]=handleSendToBack,$[28]=t10,$[29]=t12):t12=$[29];const t13=!canElementMoveForwards;let t14,t15;$[30]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_FORWARD.display),$[30]=t14):t14=$[30],$[31]!==handleBringForward||$[32]!==t13?(t15=react.createElement(components_button.A,{disabled:t13,onClick:handleBringForward},RIGHT_CLICK_MENU_LABELS.BRING_FORWARD,t14),$[31]=handleBringForward,$[32]=t13,$[33]=t15):t15=$[33];const t16=!canElementMoveForwards;let t17,t18,t19,t20,t21,t22,t23;return $[34]===Symbol.for("react.memo_cache_sentinel")?(t17=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_TO_FRONT.display),$[34]=t17):t17=$[34],$[35]!==handleBringToFront||$[36]!==t16?(t18=react.createElement(components_button.A,{disabled:t16,onClick:handleBringToFront},RIGHT_CLICK_MENU_LABELS.BRING_TO_FRONT,t17),$[35]=handleBringToFront,$[36]=t16,$[37]=t18):t18=$[37],$[38]===Symbol.for("react.memo_cache_sentinel")?(t19=react.createElement(layerName,null),t20=react.createElement(layerLock,null),t21=react.createElement(layerHide,null),t22=react.createElement(layerUngroup,null),$[38]=t19,$[39]=t20,$[40]=t21,$[41]=t22):(t19=$[38],t20=$[39],t21=$[40],t22=$[41]),$[42]!==t12||$[43]!==t15||$[44]!==t18||$[45]!==t3||$[46]!==t5||$[47]!==t9?(t23=react.createElement(react.Fragment,null,t3,t5,t6,t9,t12,t15,t18,t19,t20,t21,t22),$[42]=t12,$[43]=t15,$[44]=t18,$[45]=t3,$[46]=t5,$[47]=t9,$[48]=t23):t23=$[48],t23}function stickerMenu_temp(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,stickerMenu_extends({key},menuItemProps))}ShapeMenu.__docgenInfo={description:"",methods:[],displayName:"ShapeMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}},StickerMenu.propTypes=MenuPropType;const stickerMenu=StickerMenu;StickerMenu.__docgenInfo={description:"",methods:[],displayName:"StickerMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}};var output_src=__webpack_require__("./packages/output/src/index.ts");const useHeadingSelect_ReversedIcon=(0,styled_components_browser_esm.Ay)(chevron_right_small.A).withConfig({displayName:"useHeadingSelect__ReversedIcon",componentId:"sc-1xwrfrm-0"})(["transform:rotate(180deg);"]);function useHeadingSelect_temp4(t0){const{tagName}=t0;return tagName||"auto"}function useHeadingSelect_temp3(t0){const{state:t1,actions:t2}=t0,{selectedElements}=t1,{updateSelectedElements}=t2;return{selectedElements,updateSelectedElements}}function useHeadingSelect_temp2(t0){const{state}=t0;return{textElements:state.currentPage?.elements?.filter(useHeadingSelect_temp)}}function useHeadingSelect_temp(t0){const{type}=t0;return"text"===type}const hooks_useHeadingSelect=function useHeadingSelect(t0){const $=(0,dist.c)(25),{menuItemProps,isMenuOpen}=t0,{isRTL}=(0,app_config.UK)(),[isSubMenuOpen,setIsSubMenuOpen]=(0,react_src.J0)(!1),{textElements}=(0,useStory.A)(useHeadingSelect_temp2),tagNamesMap=(0,output_src.iG)(textElements),{selectedElements:selectedElements_0,updateSelectedElements:updateSelectedElements_0}=(0,useStory.A)(useHeadingSelect_temp3),selectedElementsWithTagNames=selectedElements_0.map((element=>({...element,tagName:tagNamesMap.get(element.id),defaultTagName:element.tagName||"auto"}))),selectedTagName=(0,shared.Bl)(selectedElementsWithTagNames,"defaultTagName","auto"),uniqueTagNames=[...new Set(selectedElementsWithTagNames.map(useHeadingSelect_temp4))],computedTagName=uniqueTagNames?.length?uniqueTagNames[0]:"auto",selectedValue="auto"===selectedTagName?"auto":computedTagName;let t1,t2,t3,t4;$[0]!==isMenuOpen||$[1]!==setIsSubMenuOpen?(t1=()=>{isMenuOpen||setIsSubMenuOpen(!1)},$[0]=isMenuOpen,$[1]=setIsSubMenuOpen,$[2]=t1):t1=$[2],$[3]!==isMenuOpen?(t2=[isMenuOpen],$[3]=isMenuOpen,$[4]=t2):t2=$[4],(0,react_src.vJ)(t1,t2),$[5]!==computedTagName||$[6]!==isMenuOpen||$[7]!==menuItemProps||$[8]!==selectedElements_0.length||$[9]!==selectedValue||$[10]!==updateSelectedElements_0?(t3=()=>{if(!isMenuOpen||0===selectedElements_0.length)return[];return[{value:"auto",label:"auto"===selectedValue&&story_editor_src_constants.Dh[computedTagName]?(0,sprintf.A)((0,i18n.__)("Automatic (%s)","web-stories"),story_editor_src_constants.Dh[computedTagName]):(0,i18n.__)("Automatic","web-stories")},{value:"h1",label:story_editor_src_constants.Dh.h1},{value:"h2",label:story_editor_src_constants.Dh.h2},{value:"h3",label:story_editor_src_constants.Dh.h3},{value:"p",label:story_editor_src_constants.Dh.p}].map((element_0=>{const{value}=element_0;return{key:value,supportsIcon:!0,icon:selectedValue===value?react.createElement(checkmark_small.A,null):null,label:react.createElement("span",null,element_0.label),onClick:()=>{updateSelectedElements_0({properties:oldElement=>({...oldElement,tagName:value})})},...menuItemProps}}))},$[5]=computedTagName,$[6]=isMenuOpen,$[7]=menuItemProps,$[8]=selectedElements_0.length,$[9]=selectedValue,$[10]=updateSelectedElements_0,$[11]=t3):t3=$[11],$[12]!==computedTagName||$[13]!==isMenuOpen||$[14]!==menuItemProps||$[15]!==selectedElements_0||$[16]!==selectedValue||$[17]!==updateSelectedElements_0?(t4=[isMenuOpen,menuItemProps,updateSelectedElements_0,selectedValue,selectedElements_0,computedTagName],$[12]=computedTagName,$[13]=isMenuOpen,$[14]=menuItemProps,$[15]=selectedElements_0,$[16]=selectedValue,$[17]=updateSelectedElements_0,$[18]=t4):t4=$[18];const subMenuItems=(0,react_src.Kr)(t3,t4);let t5;return $[19]!==isRTL||$[20]!==isSubMenuOpen||$[21]!==menuItemProps||$[22]!==setIsSubMenuOpen||$[23]!==subMenuItems?(t5=subMenuItems.length>0?{label:RIGHT_CLICK_MENU_LABELS.HEADING_LEVEL,openSubMenu:()=>setIsSubMenuOpen(!0),closeSubMenu:()=>setIsSubMenuOpen(!1),isHeadingSubMenuOpen:isSubMenuOpen,headingSubMenuItems:isSubMenuOpen?subMenuItems:[],SuffixIcon:isRTL?useHeadingSelect_ReversedIcon:chevron_right_small.A,...menuItemProps}:null,$[19]=isRTL,$[20]=isSubMenuOpen,$[21]=menuItemProps,$[22]=setIsSubMenuOpen,$[23]=subMenuItems,$[24]=t5):t5=$[24],t5};function textMenu_extends(){return textMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},textMenu_extends.apply(null,arguments)}function TextMenu(t0){const $=(0,dist.c)(84),{parentMenuRef}=t0,{copiedElementType,selectedElementType}=(0,app.P3)(textMenu_temp),{handleCopyStyles,handlePasteStyles}=hooks_useCopyPasteActions(),{handleDuplicateSelectedElements}=hooks_useElementActions(),{canElementMoveBackwards,canElementMoveForwards,handleSendBackward,handleSendToBack,handleBringForward,handleBringToFront}=hooks_useLayerActions(),{handleAddColorPreset,handleAddTextPreset}=hooks_usePresetActions(),subMenuRef=(0,react_src.li)(),headingSubMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t1;$[0]!==menuPosition?(t1={menuPosition,isMenuOpen:!0},$[0]=menuPosition,$[1]=t1):t1=$[1];const layerSelectProps=rightClickMenu_useLayerSelect(t1);let t2,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps,t3;$[2]!==layerSelectProps?(t2=layerSelectProps||{},$[2]=layerSelectProps,$[3]=t2):t2=$[3],$[4]!==t2?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t2),$[4]=t2,$[5]=closeSubMenu,$[6]=isSubMenuOpen,$[7]=subMenuItems,$[8]=subMenuTriggerProps):(closeSubMenu=$[5],isSubMenuOpen=$[6],subMenuItems=$[7],subMenuTriggerProps=$[8]),$[9]!==menuPosition?(t3={menuPosition,isMenuOpen:!0},$[9]=menuPosition,$[10]=t3):t3=$[10];const headingSelectProps=hooks_useHeadingSelect(t3);let t4,closeHeadingSubMenu,headingSubMenuItems,headingSubMenuTriggerProps,isHeadingSubMenuOpen,t5,t6,t7,t8,t9;$[11]!==headingSelectProps?(t4=headingSelectProps||{},$[11]=headingSelectProps,$[12]=t4):t4=$[12],$[13]!==t4?(({closeHeadingSubMenu,isHeadingSubMenuOpen,headingSubMenuItems,...headingSubMenuTriggerProps}=t4),$[13]=t4,$[14]=closeHeadingSubMenu,$[15]=headingSubMenuItems,$[16]=headingSubMenuTriggerProps,$[17]=isHeadingSubMenuOpen):(closeHeadingSubMenu=$[14],headingSubMenuItems=$[15],headingSubMenuTriggerProps=$[16],isHeadingSubMenuOpen=$[17]),$[18]!==closeSubMenu||$[19]!==isSubMenuOpen||$[20]!==layerSelectProps||$[21]!==onCloseMenu||$[22]!==parentMenuRef||$[23]!==subMenuItems||$[24]!==subMenuRef||$[25]!==subMenuTriggerProps?(t5=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,textMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(textMenu_temp2))),react.createElement(separator.A,null)),$[18]=closeSubMenu,$[19]=isSubMenuOpen,$[20]=layerSelectProps,$[21]=onCloseMenu,$[22]=parentMenuRef,$[23]=subMenuItems,$[24]=subMenuRef,$[25]=subMenuTriggerProps,$[26]=t5):t5=$[26],$[27]!==closeHeadingSubMenu||$[28]!==headingSelectProps||$[29]!==headingSubMenuItems||$[30]!==headingSubMenuRef||$[31]!==headingSubMenuTriggerProps||$[32]!==isHeadingSubMenuOpen||$[33]!==onCloseMenu||$[34]!==parentMenuRef?(t6=headingSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,textMenu_extends({closeSubMenu:closeHeadingSubMenu,parentMenuRef,subMenuRef:headingSubMenuRef,isSubMenuOpen:isHeadingSubMenuOpen},headingSubMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:headingSubMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:40}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isHeadingSubMenuOpen,onCloseSubMenu:closeHeadingSubMenu,"aria-label":RIGHT_CLICK_MENU_LABELS.HEADING_LEVEL,isSubMenu:!0,parentMenuRef},headingSubMenuItems.map(textMenu_temp3))),react.createElement(separator.A,null)),$[27]=closeHeadingSubMenu,$[28]=headingSelectProps,$[29]=headingSubMenuItems,$[30]=headingSubMenuRef,$[31]=headingSubMenuTriggerProps,$[32]=isHeadingSubMenuOpen,$[33]=onCloseMenu,$[34]=parentMenuRef,$[35]=t6):t6=$[35],$[36]===Symbol.for("react.memo_cache_sentinel")?(t7=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(1),$[36]=t7):t7=$[36],$[37]!==handleDuplicateSelectedElements?(t8=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t7),$[37]=handleDuplicateSelectedElements,$[38]=t8):t8=$[38],$[39]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(separator.A,null),$[39]=t9):t9=$[39];const t10=!canElementMoveBackwards;let t11,t12;$[40]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_BACKWARD.display),$[40]=t11):t11=$[40],$[41]!==handleSendBackward||$[42]!==t10?(t12=react.createElement(components_button.A,{disabled:t10,onClick:handleSendBackward},RIGHT_CLICK_MENU_LABELS.SEND_BACKWARD,t11),$[41]=handleSendBackward,$[42]=t10,$[43]=t12):t12=$[43];const t13=!canElementMoveBackwards;let t14,t15;$[44]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_TO_BACK.display),$[44]=t14):t14=$[44],$[45]!==handleSendToBack||$[46]!==t13?(t15=react.createElement(components_button.A,{disabled:t13,onClick:handleSendToBack},RIGHT_CLICK_MENU_LABELS.SEND_TO_BACK,t14),$[45]=handleSendToBack,$[46]=t13,$[47]=t15):t15=$[47];const t16=!canElementMoveForwards;let t17,t18;$[48]===Symbol.for("react.memo_cache_sentinel")?(t17=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_FORWARD.display),$[48]=t17):t17=$[48],$[49]!==handleBringForward||$[50]!==t16?(t18=react.createElement(components_button.A,{disabled:t16,onClick:handleBringForward},RIGHT_CLICK_MENU_LABELS.BRING_FORWARD,t17),$[49]=handleBringForward,$[50]=t16,$[51]=t18):t18=$[51];const t19=!canElementMoveForwards;let t20,t21,t22,t23,t24,t25,t26,t27,t28;$[52]===Symbol.for("react.memo_cache_sentinel")?(t20=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_TO_FRONT.display),$[52]=t20):t20=$[52],$[53]!==handleBringToFront||$[54]!==t19?(t21=react.createElement(components_button.A,{disabled:t19,onClick:handleBringToFront},RIGHT_CLICK_MENU_LABELS.BRING_TO_FRONT,t20),$[53]=handleBringToFront,$[54]=t19,$[55]=t21):t21=$[55],$[56]===Symbol.for("react.memo_cache_sentinel")?(t22=react.createElement(layerName,null),t23=react.createElement(layerLock,null),t24=react.createElement(layerHide,null),t25=react.createElement(layerUngroup,null),t26=react.createElement(separator.A,null),$[56]=t22,$[57]=t23,$[58]=t24,$[59]=t25,$[60]=t26):(t22=$[56],t23=$[57],t24=$[58],t25=$[59],t26=$[60]),$[61]===Symbol.for("react.memo_cache_sentinel")?(t27=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.COPY_STYLES.display),$[61]=t27):t27=$[61],$[62]!==handleCopyStyles?(t28=react.createElement(components_button.A,{onClick:handleCopyStyles},RIGHT_CLICK_MENU_LABELS.COPY_STYLES,t27),$[62]=handleCopyStyles,$[63]=t28):t28=$[63];const t29=copiedElementType!==selectedElementType;let t30,t31,t32,t33,t34;return $[64]===Symbol.for("react.memo_cache_sentinel")?(t30=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.PASTE_STYLES.display),$[64]=t30):t30=$[64],$[65]!==handlePasteStyles||$[66]!==t29?(t31=react.createElement(components_button.A,{disabled:t29,onClick:handlePasteStyles},RIGHT_CLICK_MENU_LABELS.PASTE_STYLES,t30),$[65]=handlePasteStyles,$[66]=t29,$[67]=t31):t31=$[67],$[68]!==handleAddTextPreset?(t32=react.createElement(components_button.A,{onClick:handleAddTextPreset},RIGHT_CLICK_MENU_LABELS.ADD_TO_TEXT_PRESETS),$[68]=handleAddTextPreset,$[69]=t32):t32=$[69],$[70]!==handleAddColorPreset?(t33=react.createElement(components_button.A,{onClick:handleAddColorPreset},RIGHT_CLICK_MENU_LABELS.ADD_TO_COLOR_PRESETS),$[70]=handleAddColorPreset,$[71]=t33):t33=$[71],$[72]!==t12||$[73]!==t15||$[74]!==t18||$[75]!==t21||$[76]!==t28||$[77]!==t31||$[78]!==t32||$[79]!==t33||$[80]!==t5||$[81]!==t6||$[82]!==t8?(t34=react.createElement(react.Fragment,null,t5,t6,t8,t9,t12,t15,t18,t21,t22,t23,t24,t25,t26,t28,t31,t32,t33),$[72]=t12,$[73]=t15,$[74]=t18,$[75]=t21,$[76]=t28,$[77]=t31,$[78]=t32,$[79]=t33,$[80]=t5,$[81]=t6,$[82]=t8,$[83]=t34):t34=$[83],t34}function textMenu_temp3(t0){const{key:key_0,...menuItemProps_0}=t0;return react.createElement(item.A,textMenu_extends({key:key_0},menuItemProps_0))}function textMenu_temp2(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,textMenu_extends({key},menuItemProps))}function textMenu_temp(t0){const{state}=t0;return{copiedElementType:state.copiedElementState.type,selectedElementType:state.selectedElements?.[0].type}}TextMenu.propTypes=MenuPropType;const textMenu=TextMenu;function GroupMenu(){const $=(0,dist.c)(11),{handleDuplicateSelectedElements,handleUngroupSelectedElements}=hooks_useElementActions(),{selectedElements}=(0,app.P3)(groupMenu_temp);let t0;$[0]!==selectedElements?(t0=selectedElements.some(groupMenu_temp2),$[0]=selectedElements,$[1]=t0):t0=$[1];const isGroupSelected=t0;let t1,t2,t3,t4;return $[2]===Symbol.for("react.memo_cache_sentinel")?(t1=RIGHT_CLICK_MENU_LABELS.DUPLICATE_ELEMENTS(2),$[2]=t1):t1=$[2],$[3]!==handleDuplicateSelectedElements?(t2=react.createElement(components_button.A,{onClick:handleDuplicateSelectedElements},t1),$[3]=handleDuplicateSelectedElements,$[4]=t2):t2=$[4],$[5]!==handleUngroupSelectedElements||$[6]!==isGroupSelected?(t3=isGroupSelected&&react.createElement(components_button.A,{onClick:handleUngroupSelectedElements},RIGHT_CLICK_MENU_LABELS.UNGROUP_LAYERS),$[5]=handleUngroupSelectedElements,$[6]=isGroupSelected,$[7]=t3):t3=$[7],$[8]!==t2||$[9]!==t3?(t4=react.createElement(react.Fragment,null,t2,t3),$[8]=t2,$[9]=t3,$[10]=t4):t4=$[10],t4}function groupMenu_temp2(el){return el.groupId}function groupMenu_temp(t0){const{state}=t0;return{selectedElements:state.selectedElements}}TextMenu.__docgenInfo={description:"",methods:[],displayName:"TextMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}};function productMenu_extends(){return productMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},productMenu_extends.apply(null,arguments)}function ProductMenu(t0){const $=(0,dist.c)(44),{parentMenuRef}=t0,{canElementMoveBackwards,canElementMoveForwards,handleSendBackward,handleSendToBack,handleBringForward,handleBringToFront}=hooks_useLayerActions(),subMenuRef=(0,react_src.li)(),{menuPosition,onCloseMenu}=(0,useRightClickMenu.A)();let t1;$[0]!==menuPosition?(t1={menuPosition,isMenuOpen:!0},$[0]=menuPosition,$[1]=t1):t1=$[1];const layerSelectProps=rightClickMenu_useLayerSelect(t1);let t2,closeSubMenu,isSubMenuOpen,subMenuItems,subMenuTriggerProps,t3;$[2]!==layerSelectProps?(t2=layerSelectProps||{},$[2]=layerSelectProps,$[3]=t2):t2=$[3],$[4]!==t2?(({closeSubMenu,isSubMenuOpen,subMenuItems,...subMenuTriggerProps}=t2),$[4]=t2,$[5]=closeSubMenu,$[6]=isSubMenuOpen,$[7]=subMenuItems,$[8]=subMenuTriggerProps):(closeSubMenu=$[5],isSubMenuOpen=$[6],subMenuItems=$[7],subMenuTriggerProps=$[8]),$[9]!==closeSubMenu||$[10]!==isSubMenuOpen||$[11]!==layerSelectProps||$[12]!==onCloseMenu||$[13]!==parentMenuRef||$[14]!==subMenuItems||$[15]!==subMenuRef||$[16]!==subMenuTriggerProps?(t3=layerSelectProps&&react.createElement(react.Fragment,null,react.createElement(subMenuTrigger.A,productMenu_extends({closeSubMenu,parentMenuRef,subMenuRef,isSubMenuOpen},subMenuTriggerProps)),react.createElement(SubMenuContainer,{ref:subMenuRef,position:{x:(parentMenuRef.current.firstChild?.offsetWidth||210)+2,y:0}},react.createElement(contextMenu.A,{onDismiss:onCloseMenu,isOpen:isSubMenuOpen,onCloseSubMenu:closeSubMenu,"aria-label":SUB_MENU_ARIA_LABEL,isSubMenu:!0,parentMenuRef},subMenuItems.map(productMenu_temp))),react.createElement(separator.A,null)),$[9]=closeSubMenu,$[10]=isSubMenuOpen,$[11]=layerSelectProps,$[12]=onCloseMenu,$[13]=parentMenuRef,$[14]=subMenuItems,$[15]=subMenuRef,$[16]=subMenuTriggerProps,$[17]=t3):t3=$[17];const t4=!canElementMoveBackwards;let t5,t6;$[18]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_BACKWARD.display),$[18]=t5):t5=$[18],$[19]!==handleSendBackward||$[20]!==t4?(t6=react.createElement(components_button.A,{disabled:t4,onClick:handleSendBackward},RIGHT_CLICK_MENU_LABELS.SEND_BACKWARD,t5),$[19]=handleSendBackward,$[20]=t4,$[21]=t6):t6=$[21];const t7=!canElementMoveBackwards;let t8,t9;$[22]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.SEND_TO_BACK.display),$[22]=t8):t8=$[22],$[23]!==handleSendToBack||$[24]!==t7?(t9=react.createElement(components_button.A,{disabled:t7,onClick:handleSendToBack},RIGHT_CLICK_MENU_LABELS.SEND_TO_BACK,t8),$[23]=handleSendToBack,$[24]=t7,$[25]=t9):t9=$[25];const t10=!canElementMoveForwards;let t11,t12;$[26]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_FORWARD.display),$[26]=t11):t11=$[26],$[27]!==handleBringForward||$[28]!==t10?(t12=react.createElement(components_button.A,{disabled:t10,onClick:handleBringForward},RIGHT_CLICK_MENU_LABELS.BRING_FORWARD,t11),$[27]=handleBringForward,$[28]=t10,$[29]=t12):t12=$[29];const t13=!canElementMoveForwards;let t14,t15,t16,t17,t18,t19,t20;return $[30]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(shortcut.A,null,RIGHT_CLICK_MENU_SHORTCUTS.BRING_TO_FRONT.display),$[30]=t14):t14=$[30],$[31]!==handleBringToFront||$[32]!==t13?(t15=react.createElement(components_button.A,{disabled:t13,onClick:handleBringToFront},RIGHT_CLICK_MENU_LABELS.BRING_TO_FRONT,t14),$[31]=handleBringToFront,$[32]=t13,$[33]=t15):t15=$[33],$[34]===Symbol.for("react.memo_cache_sentinel")?(t16=react.createElement(layerName,null),t17=react.createElement(layerLock,null),t18=react.createElement(layerHide,null),t19=react.createElement(layerUngroup,null),$[34]=t16,$[35]=t17,$[36]=t18,$[37]=t19):(t16=$[34],t17=$[35],t18=$[36],t19=$[37]),$[38]!==t12||$[39]!==t15||$[40]!==t3||$[41]!==t6||$[42]!==t9?(t20=react.createElement(react.Fragment,null,t3,t6,t9,t12,t15,t16,t17,t18,t19),$[38]=t12,$[39]=t15,$[40]=t3,$[41]=t6,$[42]=t9,$[43]=t20):t20=$[43],t20}function productMenu_temp(t0){const{key,...menuItemProps}=t0;return react.createElement(item.A,productMenu_extends({key},menuItemProps))}GroupMenu.__docgenInfo={description:"",methods:[],displayName:"GroupMenu"},ProductMenu.propTypes=MenuPropType;const productMenu=ProductMenu;ProductMenu.__docgenInfo={description:"",methods:[],displayName:"ProductMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}};var directionAware=__webpack_require__("./packages/story-editor/src/components/directionAware/index.js"),isEmptyStory=__webpack_require__("./packages/story-editor/src/app/story/utils/isEmptyStory.ts"),resourceList=__webpack_require__("./packages/media/src/resourceList.ts");const library_context=(0,react_src.q6)({tabs:{}});const library_useLibrary=function useLibrary(selector){return(0,react_src.i7)(library_context,selector??react_src.D_)};function useOnMediaSelect_temp(state){return{insertElement:state.actions.insertElement}}const local_useOnMediaSelect=function useOnMediaSelect(){const $=(0,dist.c)(9),{insertElement}=library_useLibrary(useOnMediaSelect_temp);let t0,t1;$[0]!==insertElement?(t0=(resource,thumbnailURL)=>{resourceList.A.set(resource.id,{url:thumbnailURL,type:"cached"}),insertElement(resource.type,{resource})},t1=[insertElement],$[0]=insertElement,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const insertMediaElement=(0,react_src.hb)(t0,t1);let t2,t3;$[3]!==insertMediaElement?(t2=resource_0=>{insertMediaElement(resource_0,resource_0.sizes?.medium?.source_url||resource_0.src)},t3=[insertMediaElement],$[3]=insertMediaElement,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const onSelect=(0,react_src.hb)(t2,t3);let t4;return $[6]!==insertMediaElement||$[7]!==onSelect?(t4={insertMediaElement,onSelect},$[6]=insertMediaElement,$[7]=onSelect,$[8]=t4):t4=$[8],t4};let TextSetType=function(TextSetType){return TextSetType.Cover="cover",TextSetType.Step="step",TextSetType.SectionHeader="section_header",TextSetType.Editorial="editorial",TextSetType.Contact="contact",TextSetType.Table="table",TextSetType.List="list",TextSetType.Quote="quote",TextSetType}({});async function loadTextSet(name){const data=await __webpack_require__("./packages/text-sets/src/raw lazy recursive ^\\.\\/.*\\.json$")(`./${name}.json`);return(0,migration_src._)(data,data.version).pages.reduce(((sets,page)=>{const minMax={minX:Number.POSITIVE_INFINITY,maxX:0,minY:Number.POSITIVE_INFINITY,maxY:0},textElements=page.elements.filter((({type})=>type===elements_src.RJ.Text));return textElements.forEach((element=>function updateMinMax(minMax,element){return minMax.minX=Math.min(minMax.minX,element.x),minMax.maxX=Math.max(minMax.maxX,element.x+element.width),minMax.minY=Math.min(minMax.minY,element.y),minMax.maxY=Math.max(minMax.maxY,element.y+element.height),minMax}(minMax,element))),[...sets,{textSetFonts:page.fonts,id:page.id,textSetCategory:name,elements:textElements.map((e=>({...e,normalizedOffsetX:e.x-minMax.minX,normalizedOffsetY:e.y-minMax.minY,textSetWidth:minMax.maxX-minMax.minX,textSetHeight:minMax.maxY-minMax.minY})))}]}),[])}var uniqueEntriesByKey=__webpack_require__("./packages/design-system/src/utils/uniqueEntriesByKey.ts"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),arrow_cloud=__webpack_require__("./packages/design-system/src/icons/arrow_cloud.svg"),input=__webpack_require__("./packages/design-system/src/components/search/input/input.tsx");const StyledSearchInput=(0,styled_components_browser_esm.Ay)(input.A).withConfig({displayName:"searchInput__StyledSearchInput",componentId:"sc-145nauf-0"})(["input{",";}"],shared_styles.Y);function WrappedSearchInput(t0){const $=(0,dist.c)(26),{initialValue,placeholder,onSearch,disabled:t1}=t0,disabled=void 0!==t1&&t1,[localValue,setLocalValue]=(0,react_src.J0)(initialValue);let t2,t3;$[0]!==onSearch||$[1]!==setLocalValue?(t2=evt=>{const newValue=evt.target.value;setLocalValue(newValue),""===newValue&&onSearch(newValue)},$[0]=onSearch,$[1]=setLocalValue,$[2]=t2):t2=$[2],$[3]!==onSearch?(t3=[onSearch],$[3]=onSearch,$[4]=t3):t3=$[4];const onChange=(0,react_src.hb)(t2,t3);let t4,t5;$[5]!==onSearch||$[6]!==setLocalValue?(t4=()=>{setLocalValue(""),onSearch("")},$[5]=onSearch,$[6]=setLocalValue,$[7]=t4):t4=$[7],$[8]!==onSearch?(t5=[onSearch],$[8]=onSearch,$[9]=t5):t5=$[9];const onClear=(0,react_src.hb)(t4,t5);let t6,t7;$[10]!==localValue||$[11]!==onSearch?(t6=evt_0=>{evt_0.preventDefault(),onSearch(localValue)},t7=[localValue,onSearch],$[10]=localValue,$[11]=onSearch,$[12]=t6,$[13]=t7):(t6=$[12],t7=$[13]);const onSubmit=(0,react_src.hb)(t6,t7),hasContent=localValue.length>0;let t8,t9,t10,t11;return $[14]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Clear Search","web-stories"),$[14]=t8):t8=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(t9=(0,i18n.__)("Search","web-stories"),$[15]=t9):t9=$[15],$[16]!==disabled||$[17]!==hasContent||$[18]!==localValue||$[19]!==onChange||$[20]!==onClear||$[21]!==placeholder?(t10=react.createElement(StyledSearchInput,{inputValue:localValue,placeholder,onChange,handleClearInput:onClear,disabled,ariaClearLabel:t8,isOpen:hasContent,"aria-label":t9}),$[16]=disabled,$[17]=hasContent,$[18]=localValue,$[19]=onChange,$[20]=onClear,$[21]=placeholder,$[22]=t10):t10=$[22],$[23]!==onSubmit||$[24]!==t10?(t11=react.createElement("form",{onSubmit},t10),$[23]=onSubmit,$[24]=t10,$[25]=t11):t11=$[25],t11}WrappedSearchInput.propTypes={initialValue:prop_types_default().string.isRequired,placeholder:prop_types_default().string.isRequired,onSearch:prop_types_default().func.isRequired,disabled:prop_types_default().bool};const searchInput=WrappedSearchInput;WrappedSearchInput.__docgenInfo={description:"A Search Input component.\n\n@param {Object} obj The options for the component.\n@param {string} obj.initialValue The initial value to populate the input with.\n@param {string} obj.placeholder A placeholder text to show when it's empty.\n@param {Function} obj.onSearch Callback to call when a search is triggered.\n@param {boolean} obj.disabled Whether the input should be shown as disabled.\n@return {SearchInput} The component.\n@class",methods:[],displayName:"WrappedSearchInput",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},initialValue:{description:"",type:{name:"string"},required:!0},placeholder:{description:"",type:{name:"string"},required:!0},onSearch:{description:"",type:{name:"func"},required:!0}}};var headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts");const section_Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"section__Container",componentId:"sc-emh1dh-0"})(["position:relative;margin-top:28px;margin-bottom:28px;&:first-child{margin-top:0px;}"]),Title=(0,styled_components_browser_esm.Ay)(headline.$).attrs({as:"h2",size:types.$.XXXSmall}).withConfig({displayName:"section__Title",componentId:"sc-emh1dh-1"})(["flex:1 1 auto;color:",";margin-bottom:28px;"],(({theme})=>theme.colors.fg.primary));function Section(t0){const $=(0,dist.c)(10);let children,rest,title,t1,t2;return $[0]!==t0?(({title,children,...rest}=t0),$[0]=t0,$[1]=children,$[2]=rest,$[3]=title):(children=$[1],rest=$[2],title=$[3]),$[4]!==title?(t1=react.createElement(Title,null,title),$[4]=title,$[5]=t1):t1=$[5],$[6]!==children||$[7]!==rest||$[8]!==t1?(t2=react.createElement(section_Container,rest,t1,children),$[6]=children,$[7]=rest,$[8]=t1,$[9]=t2):t2=$[9],t2}Section.propTypes={title:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().node),prop_types_default().node])},Section.__docgenInfo={description:"",methods:[],displayName:"Section",props:{title:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"node"}},{name:"node"}]},required:!1}}};styled_components_browser_esm.Ay.h3.withConfig({displayName:"common__Title",componentId:"sc-q5ifvb-0"})(["color:",";margin:0;font-size:19px;line-height:1.4;flex:3 0 0;display:flex;align-items:center;padding:2px 0;"],(({theme})=>theme.colors.fg.primary)),styled_components_browser_esm.Ay.div.withConfig({displayName:"common__Header",componentId:"sc-q5ifvb-1"})(["display:flex;margin:0 0 25px;"]);var common_styles=__webpack_require__("./packages/story-editor/src/components/library/panes/media/common/styles.js"),providerConfiguration=__webpack_require__("./packages/story-editor/src/app/media/media3p/providerConfiguration.js");const StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).withConfig({displayName:"paginatedMediaGallery__StyledText",componentId:"sc-1xn8t7i-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),MediaGallery=(0,react_src.RZ)((()=>Promise.all([__webpack_require__.e(9759),__webpack_require__.e(7748)]).then(__webpack_require__.bind(__webpack_require__,"./packages/story-editor/src/components/library/panes/media/common/mediaGallery.js"))));function LazyMediaGallery(t0){const $=(0,dist.c)(7),{providerType,canEditMedia,resources,uploadingResources,onInsert}=t0;let t1,t2;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(common_styles.Wx,null,react.createElement(StyledText,{size:types.$.Small},(0,i18n.__)("Loading…","web-stories"))),$[0]=t1):t1=$[0],$[1]!==canEditMedia||$[2]!==onInsert||$[3]!==providerType||$[4]!==resources||$[5]!==uploadingResources?(t2=react.createElement(react_src.tY,{fallback:t1},react.createElement(MediaGallery,{providerType,canEditMedia,resources,uploadingResources,onInsert})),$[1]=canEditMedia,$[2]=onInsert,$[3]=providerType,$[4]=resources,$[5]=uploadingResources,$[6]=t2):t2=$[6],t2}function PaginatedMediaGallery(t0){const $=(0,dist.c)(62),{providerType,resources,uploadingResources:t1,searchTerm,selectedCategoryId,isMediaLoading,isMediaLoaded,hasMore,onInsert,setNextPage,canEditMedia:t2}=t0;let t3;$[0]!==t1?(t3=void 0===t1?[]:t1,$[0]=t1,$[1]=t3):t3=$[1];const uploadingResources=t3,canEditMedia=void 0!==t2&&t2,refContainer=(0,react_src.li)();let t4,t5;$[2]!==refContainer.current?.clientHeight||$[3]!==refContainer.current?.scrollHeight||$[4]!==setNextPage?(t4=()=>refContainer.current?.clientHeight===refContainer.current?.scrollHeight?setNextPage():noop.l,$[2]=refContainer.current?.clientHeight,$[3]=refContainer.current?.scrollHeight,$[4]=setNextPage,$[5]=t4):t4=$[5],$[6]!==setNextPage?(t5=[setNextPage],$[6]=setNextPage,$[7]=t5):t5=$[7];const isNextPageNeeded=(0,react_src.hb)(t4,t5),debouncedSetNextPage=(0,react_src.YQ)(isNextPageNeeded,500);let t6,t7;$[8]!==debouncedSetNextPage||$[9]!==hasMore||$[10]!==isMediaLoaded||$[11]!==isMediaLoading||$[12]!==refContainer.current||$[13]!==resources.length||$[14]!==setNextPage?(t6=()=>{const node=refContainer.current;if(!resources.length||!node||0===node.clientHeight||!hasMore||!isMediaLoaded||isMediaLoading)return;if(node.clientHeight===node.scrollHeight)return void debouncedSetNextPage();node.scrollHeight-node.scrollTop<=node.clientHeight+300&&setNextPage()},$[8]=debouncedSetNextPage,$[9]=hasMore,$[10]=isMediaLoaded,$[11]=isMediaLoading,$[12]=refContainer.current,$[13]=resources.length,$[14]=setNextPage,$[15]=t6):t6=$[15],$[16]!==debouncedSetNextPage||$[17]!==hasMore||$[18]!==isMediaLoaded||$[19]!==isMediaLoading||$[20]!==resources.length||$[21]!==setNextPage?(t7=[resources.length,hasMore,isMediaLoaded,isMediaLoading,debouncedSetNextPage,setNextPage],$[16]=debouncedSetNextPage,$[17]=hasMore,$[18]=isMediaLoaded,$[19]=isMediaLoading,$[20]=resources.length,$[21]=setNextPage,$[22]=t7):t7=$[22];const loadNextPageIfNeeded=(0,react_src.hb)(t6,t7);let t8,t9;$[23]!==refContainer.current?(t8=()=>{refContainer.current?.scrollTo?.(0,0)},$[23]=refContainer.current,$[24]=t8):t8=$[24],$[25]!==searchTerm||$[26]!==selectedCategoryId?(t9=[searchTerm,selectedCategoryId],$[25]=searchTerm,$[26]=selectedCategoryId,$[27]=t9):t9=$[27],(0,react_src.vJ)(t8,t9);const handleScrollOrResize=(0,react_src.YQ)(loadNextPageIfNeeded,500);let t10,t11,t12,t13;$[28]!==loadNextPageIfNeeded?(t10=()=>{!async function loadNextPageIfNeededAfterGalleryRendering(){var ms;await(ms=200,new Promise((resolve=>setTimeout(resolve,ms)))),loadNextPageIfNeeded()}()},t11=[loadNextPageIfNeeded],$[28]=loadNextPageIfNeeded,$[29]=t10,$[30]=t11):(t10=$[29],t11=$[30]),(0,react_src.Nf)(t10,t11),$[31]!==handleScrollOrResize||$[32]!==refContainer.current?(t12=()=>{const node_0=refContainer.current;if(node_0)return node_0.addEventListener("scroll",handleScrollOrResize),window.addEventListener("resize",handleScrollOrResize),()=>{node_0.removeEventListener("scroll",handleScrollOrResize),window.removeEventListener("resize",handleScrollOrResize)}},$[31]=handleScrollOrResize,$[32]=refContainer.current,$[33]=t12):t12=$[33],$[34]!==handleScrollOrResize?(t13=[handleScrollOrResize],$[34]=handleScrollOrResize,$[35]=t13):t13=$[35],(0,react_src.vJ)(t12,t13);const[showLoadingPill,setShowLoadingPill]=(0,react_src.J0)(!1);let t14,t15;$[36]!==hasMore||$[37]!==isMediaLoading||$[38]!==setShowLoadingPill?(t14=()=>{if(isMediaLoading&&hasMore){const showLoadingTimeout=setTimeout((()=>{setShowLoadingPill(isMediaLoading)}),1e3);return()=>clearTimeout(showLoadingTimeout)}setShowLoadingPill(!1)},$[36]=hasMore,$[37]=isMediaLoading,$[38]=setShowLoadingPill,$[39]=t14):t14=$[39],$[40]!==hasMore||$[41]!==isMediaLoading?(t15=[isMediaLoading,hasMore],$[40]=hasMore,$[41]=isMediaLoading,$[42]=t15):t15=$[42],(0,react_src.vJ)(t14,t15);const Attribution="local"!==providerType&&providerConfiguration.x[providerType].attributionComponent||paginatedMediaGallery_temp;let t16,t17,t18,t19,t20;return $[43]!==canEditMedia||$[44]!==isMediaLoaded||$[45]!==onInsert||$[46]!==providerType||$[47]!==resources||$[48]!==uploadingResources?(t16=react.createElement(common_styles.m8,null,!isMediaLoaded||resources.length||uploadingResources.length?react.createElement("div",{style:{marginBottom:15}},react.createElement(LazyMediaGallery,{providerType,canEditMedia,resources,uploadingResources,onInsert})):react.createElement(common_styles.aN,null,(0,i18n.__)("No media found.","web-stories"))),$[43]=canEditMedia,$[44]=isMediaLoaded,$[45]=onInsert,$[46]=providerType,$[47]=resources,$[48]=uploadingResources,$[49]=t16):t16=$[49],$[50]!==refContainer||$[51]!==t16?(t17=react.createElement(common_styles.Yk,{"data-testid":"media-gallery-container",ref:refContainer},t16),$[50]=refContainer,$[51]=t16,$[52]=t17):t17=$[52],$[53]!==showLoadingPill?(t18=showLoadingPill&&react.createElement(common_styles.Wx,{"data-testid":"loading-pill"},react.createElement(StyledText,{size:types.$.Small},(0,i18n.__)("Loading…","web-stories"))),$[53]=showLoadingPill,$[54]=t18):t18=$[54],$[55]!==Attribution||$[56]!==showLoadingPill?(t19=!showLoadingPill&&react.createElement(Attribution,null),$[55]=Attribution,$[56]=showLoadingPill,$[57]=t19):t19=$[57],$[58]!==t17||$[59]!==t18||$[60]!==t19?(t20=react.createElement(react.Fragment,null,t17,t18,t19),$[58]=t17,$[59]=t18,$[60]=t19,$[61]=t20):t20=$[61],t20}function paginatedMediaGallery_temp(){return null}LazyMediaGallery.propTypes={providerType:prop_types_default().string.isRequired,canEditMedia:prop_types_default().bool,resources:prop_types_default().arrayOf(prop_types_default().object).isRequired,uploadingResources:prop_types_default().arrayOf(prop_types_default().object),onInsert:prop_types_default().func.isRequired},PaginatedMediaGallery.propTypes={providerType:prop_types_default().string.isRequired,resources:prop_types_default().arrayOf(prop_types_default().object).isRequired,uploadingResources:prop_types_default().arrayOf(prop_types_default().object),isMediaLoading:prop_types_default().bool.isRequired,isMediaLoaded:prop_types_default().bool.isRequired,hasMore:prop_types_default().bool.isRequired,onInsert:prop_types_default().func.isRequired,setNextPage:prop_types_default().func.isRequired,searchTerm:prop_types_default().string,selectedCategoryId:prop_types_default().string,canEditMedia:prop_types_default().bool};const paginatedMediaGallery=PaginatedMediaGallery;PaginatedMediaGallery.__docgenInfo={description:"",methods:[],displayName:"PaginatedMediaGallery",props:{uploadingResources:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"object"}},required:!1},canEditMedia:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},providerType:{description:"",type:{name:"string"},required:!0},resources:{description:"",type:{name:"arrayOf",value:{name:"object"}},required:!0},isMediaLoading:{description:"",type:{name:"bool"},required:!0},isMediaLoaded:{description:"",type:{name:"bool"},required:!0},hasMore:{description:"",type:{name:"bool"},required:!0},onInsert:{description:"",type:{name:"func"},required:!0},setNextPage:{description:"",type:{name:"func"},required:!0},searchTerm:{description:"",type:{name:"string"},required:!1},selectedCategoryId:{description:"",type:{name:"string"},required:!1}}};var panes_shared=__webpack_require__("./packages/story-editor/src/components/library/panes/shared/index.js"),local_types=__webpack_require__("./packages/story-editor/src/app/media/local/types.js");const paneId=(0,panes_shared.kN)("media");var localStore=__webpack_require__("./packages/design-system/src/utils/localStore.ts");const storageKey=localStore.$.VIDEO_OPTIMIZATION_DIALOG_DISMISSED;function VideoOptimizationDialog(){const $=(0,dist.c)(20),{isTranscoding:isTranscoding_0}=(0,media.HZ)(videoOptimizationDialog_temp);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=localStore.x.getItemByKey(storageKey),$[0]=t0):t0=$[0];const[isDialogDismissed,setIsDialogDismissed]=(0,react_src.J0)(Boolean(t0)),{updateCurrentUser}=(0,currentUser.iZ)(videoOptimizationDialog_temp2);let t1,t2;$[1]!==setIsDialogDismissed?(t1=value=>{setIsDialogDismissed(value),localStore.x.setItemByKey(storageKey,value)},$[1]=setIsDialogDismissed,$[2]=t1):t1=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[3]=t2):t2=$[3];const setIsDialogDismissedValue=(0,react_src.hb)(t1,t2);let t3,t4;$[4]!==setIsDialogDismissedValue||$[5]!==updateCurrentUser?(t3=()=>{updateCurrentUser({mediaOptimization:!1}),setIsDialogDismissedValue(!0)},t4=[updateCurrentUser,setIsDialogDismissedValue],$[4]=setIsDialogDismissedValue,$[5]=updateCurrentUser,$[6]=t3,$[7]=t4):(t3=$[6],t4=$[7]);const onDisable=(0,react_src.hb)(t3,t4);let t5,t6;$[8]!==setIsDialogDismissedValue?(t5=()=>{setIsDialogDismissedValue(!0)},t6=[setIsDialogDismissedValue],$[8]=setIsDialogDismissedValue,$[9]=t5,$[10]=t6):(t5=$[9],t6=$[10]);const onClose=(0,react_src.hb)(t5,t6);let t7;$[11]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Video optimization in progress","web-stories"),$[11]=t7):t7=$[11];const dialogTitle=t7;let t8;$[12]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("This process can’t be stopped once it begins. Optimization is automatically enabled for all videos to ensure smooth playback. You can disable optimization any time in Settings.","web-stories"),$[12]=t8):t8=$[12];const dialogDescription=t8,t9=isTranscoding_0&&!isDialogDismissed;let t10,t11,t12,t13;return $[13]===Symbol.for("react.memo_cache_sentinel")?(t10=(0,i18n.__)("Disable optimization","web-stories"),$[13]=t10):t10=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,i18n.__)("Sounds good","web-stories"),t12=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},dialogDescription),$[14]=t11,$[15]=t12):(t11=$[14],t12=$[15]),$[16]!==onClose||$[17]!==onDisable||$[18]!==t9?(t13=react.createElement(dialog.A,{isOpen:t9,onClose,title:dialogTitle,onSecondary:onDisable,secondaryText:t10,onPrimary:onClose,primaryText:t11},t12),$[16]=onClose,$[17]=onDisable,$[18]=t9,$[19]=t13):t13=$[19],t13}function videoOptimizationDialog_temp2(t0){const{actions}=t0;return{updateCurrentUser:actions.updateCurrentUser}}function videoOptimizationDialog_temp(t0){const{state:t1}=t0,{isTranscoding}=t1;return{isTranscoding}}const videoOptimizationDialog=VideoOptimizationDialog;VideoOptimizationDialog.__docgenInfo={description:"",methods:[],displayName:"VideoOptimizationDialog"};var icons_link=__webpack_require__("./packages/design-system/src/icons/link.svg"),hotlinkModal=__webpack_require__("./packages/story-editor/src/components/hotlinkModal/index.js"),src_mimeTypes=__webpack_require__("./packages/media/src/mimeTypes.ts"),preloadVideo=__webpack_require__("./packages/media/src/preloadVideo.ts"),seekVideo=__webpack_require__("./packages/media/src/seekVideo.ts"),getVideoLength=__webpack_require__("./packages/media/src/getVideoLength.ts"),hasVideoGotAudio=__webpack_require__("./packages/media/src/hasVideoGotAudio.ts"),getImageFromVideo=__webpack_require__("./packages/media/src/getImageFromVideo.ts"),blobToFile=__webpack_require__("./packages/media/src/blobToFile.ts"),useLocalMedia=__webpack_require__("./packages/story-editor/src/app/media/local/useLocalMedia.js"),getResourceFromUrl=__webpack_require__("./packages/story-editor/src/app/media/utils/getResourceFromUrl.ts"),media_utils=__webpack_require__("./packages/story-editor/src/app/media/utils/index.js"),useCORSProxy=__webpack_require__("./packages/story-editor/src/utils/useCORSProxy.ts");const hotlink_useInsert=function useInsert(){const[isOpen,setIsOpen]=(0,react_src.J0)(!1),{insertElement}=library_useLibrary((state=>({insertElement:state.actions.insertElement}))),{capabilities:{hasUploadMediaAction},allowedMimeTypes:{image:allowedImageMimeTypes,vector:allowedVectorMimeTypes,video:allowedVideoMimeTypes}}=(0,app_config.UK)(),{updateBaseColor:updateBaseColor_0}=(0,useLocalMedia.A)((({actions:{updateBaseColor}})=>({updateBaseColor}))),allowedMimeTypes=(0,react_src.Kr)((()=>[...allowedImageMimeTypes,...allowedVectorMimeTypes,...allowedVideoMimeTypes]),[allowedImageMimeTypes,allowedVectorMimeTypes,allowedVideoMimeTypes]),allowedFileTypes=(0,react_src.Kr)((()=>allowedMimeTypes.flatMap((type=>(0,src_mimeTypes.n)(type)))),[allowedMimeTypes]),{uploadVideoPoster}=(0,media_utils.R)({}),{getProxiedUrl}=(0,useCORSProxy.A)(),onSelect=(0,react_src.hb)((async({link,hotlinkInfo,needsProxy})=>{const{ext,type:type_0,mimeType,fileName:originalFileName}=hotlinkInfo,isVideo="video"===type_0;try{const proxiedUrl=needsProxy?getProxiedUrl({needsProxy},link):link,resourceLike={id:(0,v4.A)(),src:proxiedUrl,mimeType,needsProxy,alt:originalFileName};if(isVideo){const video=await(0,preloadVideo.A)(proxiedUrl);await(0,seekVideo.A)(video),resourceLike.width=video.videoWidth,resourceLike.height=video.videoHeight;const videoLength=(0,getVideoLength.A)(video);if(resourceLike.length=videoLength.length,resourceLike.lengthFormatted=videoLength.lengthFormatted,resourceLike.isMuted=!(0,hasVideoGotAudio.A)(video),hasUploadMediaAction)try{const fileName=(0,media_utils.nn)(originalFileName.replace(`.${ext}`,"")),blob=await(0,getImageFromVideo.A)(video),posterFile=(0,blobToFile.A)(blob,fileName,story_editor_src_constants.Ni),posterData=await uploadVideoPoster(0,posterFile);resourceLike.poster=posterData.poster,resourceLike.posterId=posterData.posterId}catch{}}const resource=await(0,getResourceFromUrl.A)(resourceLike);resource.src=link,insertElement(type_0,{resource}),updateBaseColor_0(resource),(0,tracking_src.sx)("hotlink_media",{event_label:link,file_size:hotlinkInfo.fileSize,file_type:hotlinkInfo.mimeType,needs_proxy:needsProxy}),setIsOpen(!1)}catch{}}),[getProxiedUrl,insertElement,updateBaseColor_0,hasUploadMediaAction,uploadVideoPoster]);return{action:{onSelect,onError:(0,react_src.hb)((err=>(0,tracking_src.Oz)("hotlink_media",err?.message)),[]),onClick:()=>setIsOpen(!0),onClose:()=>setIsOpen(!1)},state:{allowedFileTypes,isOpen}}},hotlink_Button=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"hotlink__Button",componentId:"sc-1njsgyy-0"})(["",";margin:0 10px 0 0;"],shared_styles.Y);function Hotlink(){const $=(0,dist.c)(14);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=(0,i18n.__)("Insert by link","web-stories"),$[0]=t0):t0=$[0];const label=t0,{action:t1,state:t2}=hotlink_useInsert(),{onSelect,onError,onClose,onClick}=t1,{allowedFileTypes,isOpen}=t2;let t3,t4,t5,t6,t7;return $[1]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(icons_link.A,null),$[1]=t3):t3=$[1],$[2]!==onClick?(t4=react.createElement(components_tooltip.A,{title:label},react.createElement(hotlink_Button,{variant:constants.Ak.Square,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick,"aria-label":label},t3)),$[2]=onClick,$[3]=t4):t4=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Insert external image or video","web-stories"),$[4]=t5):t5=$[4],$[5]!==allowedFileTypes||$[6]!==isOpen||$[7]!==onClose||$[8]!==onError||$[9]!==onSelect?(t6=react.createElement(hotlinkModal.A,{onClose,isOpen,onError,onSelect,allowedFileTypes,title:t5}),$[5]=allowedFileTypes,$[6]=isOpen,$[7]=onClose,$[8]=onError,$[9]=onSelect,$[10]=t6):t6=$[10],$[11]!==t4||$[12]!==t6?(t7=react.createElement(react.Fragment,null,t4,t6),$[11]=t4,$[12]=t6,$[13]=t7):t7=$[13],t7}const hotlink=Hotlink;Hotlink.__docgenInfo={description:"",methods:[],displayName:"Hotlink"};var camera=__webpack_require__("./packages/design-system/src/icons/camera.svg"),useMediaRecording=__webpack_require__("./packages/story-editor/src/components/mediaRecording/useMediaRecording.js");const mediaRecording_Button=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"mediaRecording__Button",componentId:"sc-zpc7g2-0"})(["",";margin:0 10px 0 0;"],shared_styles.Y),Camera=(0,styled_components_browser_esm.Ay)(camera.A).withConfig({displayName:"mediaRecording__Camera",componentId:"sc-zpc7g2-1"})(["width:24px !important;height:24px !important;"]);function MediaRecording(){const $=(0,dist.c)(9),{isInRecordingMode:isInRecordingMode_0,toggleRecordingMode:toggleRecordingMode_0}=(0,useMediaRecording.A)(mediaRecording_temp),{isTranscodingEnabled}=(0,useFFmpeg.A)();let t0,t1;$[0]!==isInRecordingMode_0||$[1]!==toggleRecordingMode_0?(t0=()=>{(0,tracking_src.sx)("media_recording_toggled",{status:isInRecordingMode_0?"closed":"open"}),toggleRecordingMode_0()},t1=[isInRecordingMode_0,toggleRecordingMode_0],$[0]=isInRecordingMode_0,$[1]=toggleRecordingMode_0,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const onClick=(0,react_src.hb)(t0,t1);if(!isTranscodingEnabled)return null;let t2;$[4]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Record Video/Audio","web-stories"),$[4]=t2):t2=$[4];const label=t2;let t3,t4;return $[5]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(Camera,null),$[5]=t3):t3=$[5],$[6]!==isInRecordingMode_0||$[7]!==onClick?(t4=react.createElement(components_tooltip.A,{title:label},react.createElement(mediaRecording_Button,{variant:constants.Ak.Square,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick,"aria-label":label,"aria-pressed":isInRecordingMode_0,isToggled:isInRecordingMode_0},t3)),$[6]=isInRecordingMode_0,$[7]=onClick,$[8]=t4):t4=$[8],t4}function mediaRecording_temp(t0){const{state:t1,actions:t2}=t0,{isInRecordingMode}=t1,{toggleRecordingMode}=t2;return{isInRecordingMode,toggleRecordingMode}}const mediaRecording=MediaRecording;function mediaPane_extends(){return mediaPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mediaPane_extends.apply(null,arguments)}MediaRecording.__docgenInfo={description:"",methods:[],displayName:"MediaRecording"};const mediaPane_Button=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"mediaPane__Button",componentId:"sc-usipec-0"})(["",";"],shared_styles.Y),FilterArea=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaPane__FilterArea",componentId:"sc-usipec-1"})(["display:flex;justify-content:space-between;margin-top:24px;padding:0 "," 0 ",";"],panes_shared.z7,panes_shared.z7),SearchCount=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Medium}).withConfig({displayName:"mediaPane__SearchCount",componentId:"sc-usipec-2"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;"]),ButtonsWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"mediaPane__ButtonsWrapper",componentId:"sc-usipec-3"})(["display:flex;flex:1;justify-content:flex-end;"]),FILTER_NONE=local_types.eQ,FILTERS=[{value:FILTER_NONE,label:(0,i18n.__)("All Types","web-stories")},{value:"image",label:(0,i18n.__)("Images","web-stories")},{value:"video",label:(0,i18n.__)("Video","web-stories")}];function MediaPane(props){const $=(0,dist.c)(54),{hasMore:hasMore_0,media:media_0,uploadingMedia:uploadingMedia_0,isMediaLoading:isMediaLoading_0,isMediaLoaded:isMediaLoaded_0,mediaType:mediaType_0,searchTerm:searchTerm_0,setNextPage:setNextPage_0,setMediaType:setMediaType_0,setSearchTerm:setSearchTerm_0,totalItems:totalItems_0}=(0,media.HZ)(mediaPane_temp),{capabilities:t0}=(0,app_config.UK)(),{hasUploadMediaAction}=t0,isSearching=searchTerm_0.length>0;let t1,t2;$[0]!==setMediaType_0?(t1=(evt,filter)=>{setMediaType_0({mediaType:filter})},t2=[setMediaType_0],$[0]=setMediaType_0,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const onFilter=(0,react_src.hb)(t1,t2),{onSelect,insertMediaElement}=local_useOnMediaSelect();let t3;$[3]!==searchTerm_0||$[4]!==setSearchTerm_0?(t3=value=>{const trimText=value.trim();trimText!==searchTerm_0&&setSearchTerm_0({searchTerm:trimText})},$[3]=searchTerm_0,$[4]=setSearchTerm_0,$[5]=t3):t3=$[5];const onSearch=t3;let t4,t5,t6;$[6]!==mediaType_0||$[7]!==searchTerm_0?(t4=()=>{searchTerm_0.length>0&&(0,tracking_src.sx)("search",{search_type:"media",search_term:searchTerm_0,search_filter:mediaType_0})},t5=[searchTerm_0,mediaType_0],$[6]=mediaType_0,$[7]=searchTerm_0,$[8]=t4,$[9]=t5):(t4=$[8],t5=$[9]),(0,react_src.vJ)(t4,t5),$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=[],$[10]=t6):t6=$[10];const renderUploadButtonIcon=(0,react_src.hb)(mediaPane_temp2,t6);let t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18;return $[11]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Search","web-stories"),$[11]=t7):t7=$[11],$[12]!==onSearch||$[13]!==searchTerm_0?(t8=react.createElement(common_styles.oG,null,react.createElement(searchInput,{initialValue:searchTerm_0,placeholder:t7,onSearch})),$[12]=onSearch,$[13]=searchTerm_0,$[14]=t8):t8=$[14],$[15]!==mediaType_0?(t9=mediaType_0?.toString()||FILTER_NONE,$[15]=mediaType_0,$[16]=t9):t9=$[16],$[17]!==onFilter||$[18]!==t9?(t10=react.createElement(components_form.l6,{selectedValue:t9,onMenuItemClick:onFilter,options:FILTERS,placement:popup_constants.W.BottomStart}),$[17]=onFilter,$[18]=t9,$[19]=t10):t10=$[19],$[20]!==isSearching||$[21]!==media_0||$[22]!==totalItems_0?(t11=isSearching&&media_0.length>0&&react.createElement(SearchCount,null,(0,sprintf.A)((0,i18n._n)("%s result found.","%s results found.",totalItems_0,"web-stories"),totalItems_0)),$[20]=isSearching,$[21]=media_0,$[22]=totalItems_0,$[23]=t11):t11=$[23],$[24]!==hasUploadMediaAction||$[25]!==isSearching||$[26]!==onSelect||$[27]!==renderUploadButtonIcon?(t12=!isSearching&&react.createElement(ButtonsWrapper,null,react.createElement(mediaRecording,null),react.createElement(hotlink,null),hasUploadMediaAction&&react.createElement(components_tooltip.A,{title:(0,i18n.__)("Upload","web-stories")},react.createElement(components_form.c4,{renderButton:renderUploadButtonIcon,onInsert:onSelect}))),$[24]=hasUploadMediaAction,$[25]=isSearching,$[26]=onSelect,$[27]=renderUploadButtonIcon,$[28]=t12):t12=$[28],$[29]!==t10||$[30]!==t11||$[31]!==t12?(t13=react.createElement(FilterArea,null,t10,t11,t12),$[29]=t10,$[30]=t11,$[31]=t12,$[32]=t13):t13=$[32],$[33]!==t13||$[34]!==t8?(t14=react.createElement(common_styles.QM,null,t8,t13),$[33]=t13,$[34]=t8,$[35]=t14):t14=$[35],$[36]!==hasMore_0||$[37]!==hasUploadMediaAction||$[38]!==insertMediaElement||$[39]!==isMediaLoaded_0||$[40]!==isMediaLoading_0||$[41]!==isSearching||$[42]!==media_0||$[43]!==searchTerm_0||$[44]!==setNextPage_0||$[45]!==uploadingMedia_0?(t15=!isMediaLoaded_0||media_0.length||uploadingMedia_0.length?react.createElement(paginatedMediaGallery,{providerType:"local",canEditMedia:hasUploadMediaAction,resources:media_0,uploadingResources:uploadingMedia_0,isMediaLoading:isMediaLoading_0,isMediaLoaded:isMediaLoaded_0,hasMore:hasMore_0,onInsert:insertMediaElement,setNextPage:setNextPage_0,searchTerm:searchTerm_0}):react.createElement(common_styles.aN,null,isSearching?(0,i18n.__)("No results found.","web-stories"):(0,i18n.__)("No media found.","web-stories")),$[36]=hasMore_0,$[37]=hasUploadMediaAction,$[38]=insertMediaElement,$[39]=isMediaLoaded_0,$[40]=isMediaLoading_0,$[41]=isSearching,$[42]=media_0,$[43]=searchTerm_0,$[44]=setNextPage_0,$[45]=uploadingMedia_0,$[46]=t15):t15=$[46],$[47]===Symbol.for("react.memo_cache_sentinel")?(t16=react.createElement(videoOptimizationDialog,null),$[47]=t16):t16=$[47],$[48]!==t14||$[49]!==t15?(t17=react.createElement(common_styles.HT,null,t14,t15,t16),$[48]=t14,$[49]=t15,$[50]=t17):t17=$[50],$[51]!==props||$[52]!==t17?(t18=react.createElement(common_styles.SM,mediaPane_extends({id:paneId},props),t17),$[51]=props,$[52]=t17,$[53]=t18):t18=$[53],t18}function mediaPane_temp2(open){return react.createElement(mediaPane_Button,{variant:constants.Ak.Square,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick:open,"aria-label":(0,i18n.__)("Upload","web-stories")},react.createElement(arrow_cloud.A,null))}function mediaPane_temp(t0){const{state:t1,actions:t2}=t0,{hasMore,media,uploadingMedia,isMediaLoading,isMediaLoaded,mediaType,searchTerm,totalItems}=t1,{setNextPage,setMediaType,setSearchTerm}=t2;return{hasMore,media,uploadingMedia:!media.length&&isMediaLoading?[]:uploadingMedia,isMediaLoading,isMediaLoaded,mediaType,searchTerm,totalItems,setNextPage,setMediaType,setSearchTerm}}const mediaPane=MediaPane;function MediaIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(arrow_cloud.A,{title:(0,i18n.__)("Media Gallery","web-stories")}),$[0]=t0):t0=$[0],t0}MediaPane.__docgenInfo={description:"",methods:[],displayName:"MediaPane"};const mediaIcon=MediaIcon;MediaIcon.__docgenInfo={description:"",methods:[],displayName:"MediaIcon"};var useMedia=__webpack_require__("./packages/story-editor/src/app/media/useMedia.js"),translateWithMarkup=__webpack_require__("./packages/i18n/src/translateWithMarkup.tsx"),typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx");function TermsDialog(){const $=(0,dist.c)(16),hasAcknowledgedTerms3p=localStore.x.getItemByKey(localStore.$.TERMS_MEDIA3P),[dialogOpen,setDialogOpen]=(0,react_src.J0)(!hasAcknowledgedTerms3p);let t0,t1;$[0]!==setDialogOpen?(t0=()=>{setDialogOpen(!1),localStore.x.setItemByKey(localStore.$.TERMS_MEDIA3P,!0),(0,tracking_src.sx)("media3p_terms_acknowledged"),setDialogOpen(!1)},$[0]=setDialogOpen,$[1]=t0):t0=$[1],$[2]===Symbol.for("react.memo_cache_sentinel")?(t1=[],$[2]=t1):t1=$[2];const acknowledgeTerms=(0,react_src.hb)(t0,t1);let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[3]=t2):t2=$[3];const onTermsClick=(0,react_src.hb)(termsDialog_temp,t2);if(hasAcknowledgedTerms3p)return null;let t3,t4,t5,t6,t7,t8,t9;return $[4]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Third party stock content terms","web-stories"),$[4]=t3):t3=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Dismiss","web-stories"),$[5]=t4):t4=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Learn more by visiting Web Stories for WordPress","web-stories"),$[6]=t5):t5=$[6],$[7]!==onTermsClick?(t6={a:react.createElement(typography_link.N,{size:types.$.Small,href:"https://wp.stories.google/docs/terms/",rel:"noreferrer",target:"_blank","aria-label":t5,onClick:onTermsClick})},$[7]=onTermsClick,$[8]=t6):t6=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Your use of stock content is subject to third party terms. <a>Learn more.</a>","web-stories"),$[9]=t7):t7=$[9],$[10]!==t6?(t8=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},react.createElement(translateWithMarkup.A,{mapping:t6},t7)),$[10]=t6,$[11]=t8):t8=$[11],$[12]!==acknowledgeTerms||$[13]!==dialogOpen||$[14]!==t8?(t9=react.createElement(dialog.A,{isOpen:dialogOpen,contentLabel:t3,onClose:acknowledgeTerms,ariaHideApp:!1,onPrimary:acknowledgeTerms,primaryText:t4},t8),$[12]=acknowledgeTerms,$[13]=dialogOpen,$[14]=t8,$[15]=t9):t9=$[15],t9}function termsDialog_temp(evt){(0,tracking_src.MP)(evt,"click_terms_of_service")}const termsDialog=TermsDialog;TermsDialog.__docgenInfo={description:"",methods:[],displayName:"TermsDialog"};const media3p_paneId=(0,panes_shared.kN)("media3p");function providerTab_extends(){return providerTab_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},providerTab_extends.apply(null,arguments)}const providerTab_StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).withConfig({displayName:"providerTab__StyledText",componentId:"sc-1muzdn0-0"})(["color:inherit;"]),Tab=styled_components_browser_esm.Ay.button.withConfig({displayName:"providerTab__Tab",componentId:"sc-1muzdn0-1"})(["padding:6px 16px;background:none;border:none;color:",";position:relative;cursor:pointer;:hover{color:",";}border-radius:",";",";",""],(({theme})=>theme.colors.fg.secondary),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.borders.radius.x_large),shared_styles.Y,(({$isActive,theme})=>$isActive&&(0,styled_components_browser_esm.AH)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-17px;left:16px;right:16px;}"],theme.colors.border.selection)));function ProviderTab(t0){const $=(0,dist.c)(10);let isActive,name,rest,t1,t2;return $[0]!==t0?(({name,isActive,...rest}=t0),$[0]=t0,$[1]=isActive,$[2]=name,$[3]=rest):(isActive=$[1],name=$[2],rest=$[3]),$[4]!==name?(t1=react.createElement(providerTab_StyledText,{size:types.$.Small},name),$[4]=name,$[5]=t1):t1=$[5],$[6]!==isActive||$[7]!==rest||$[8]!==t1?(t2=react.createElement(Tab,providerTab_extends({$isActive:isActive},rest),t1),$[6]=isActive,$[7]=rest,$[8]=t1,$[9]=t2):t2=$[9],t2}ProviderTab.propTypes={name:prop_types_default().string.isRequired,isActive:prop_types_default().bool};const providerTab=ProviderTab;ProviderTab.__docgenInfo={description:"",methods:[],displayName:"ProviderTab",props:{name:{description:"",type:{name:"string"},required:!0},isActive:{description:"",type:{name:"bool"},required:!1}}};const providerTabList_Section=styled_components_browser_esm.Ay.div.attrs({role:"tablist"}).withConfig({displayName:"providerTabList__Section",componentId:"sc-19jgogw-0"})(["display:flex;flex-wrap:wrap;margin-top:16px;margin-bottom:16px;padding:0 1em;"]);function ProviderTabList(t0){const $=(0,dist.c)(49),{providers}=t0,{isRTL}=(0,app_config.UK)(),ref=(0,react_src.li)(),{selectedProvider:selectedProvider_0,setSelectedProvider:setSelectedProvider_0}=(0,useMedia.A)(providerTabList_temp),[focusedIndex,setFocusedIndex]=(0,react_src.J0)(0),providerCount=providers.length;let t1,t2,t3,t4;$[0]!==providers||$[1]!==selectedProvider_0||$[2]!==setFocusedIndex?(t1=()=>setFocusedIndex(providers.indexOf(selectedProvider_0)),$[0]=providers,$[1]=selectedProvider_0,$[2]=setFocusedIndex,$[3]=t1):t1=$[3],$[4]!==providers||$[5]!==selectedProvider_0?(t2=[providers,selectedProvider_0],$[4]=providers,$[5]=selectedProvider_0,$[6]=t2):t2=$[6],(0,react_src.vJ)(t1,t2),$[7]!==ref.current?(t3=newIndex=>{if(!ref.current)return;ref.current.children[newIndex].focus()},$[7]=ref.current,$[8]=t3):t3=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[9]=t4):t4=$[9];const focusByIndex=(0,react_src.hb)(t3,t4);let t5,t6;$[10]!==focusedIndex||$[11]!==providers||$[12]!==setSelectedProvider_0?(t5=()=>setSelectedProvider_0({provider:providers[focusedIndex]}),t6=[focusedIndex,setSelectedProvider_0,providers],$[10]=focusedIndex,$[11]=providers,$[12]=setSelectedProvider_0,$[13]=t5,$[14]=t6):(t5=$[13],t6=$[14]);const selectFocused=(0,react_src.hb)(t5,t6),dir=isRTL?-1:1;let t7,t8,t10,t9,t11,t12,t13,t14,t15,t16,t17,t18;if($[15]!==dir||$[16]!==focusByIndex||$[17]!==focusedIndex||$[18]!==providerCount?(t7=()=>focusByIndex((focusedIndex-dir+providerCount)%providerCount),t8=[focusByIndex,focusedIndex,dir,providerCount],$[15]=dir,$[16]=focusByIndex,$[17]=focusedIndex,$[18]=providerCount,$[19]=t7,$[20]=t8):(t7=$[19],t8=$[20]),(0,keyboard._h)(ref,"left",t7,t8),$[21]!==dir||$[22]!==focusByIndex||$[23]!==focusedIndex||$[24]!==providerCount?(t9=()=>focusByIndex((focusedIndex+dir+providerCount)%providerCount),t10=[focusByIndex,focusedIndex,dir,providerCount],$[21]=dir,$[22]=focusByIndex,$[23]=focusedIndex,$[24]=providerCount,$[25]=t10,$[26]=t9):(t10=$[25],t9=$[26]),(0,keyboard._h)(ref,"right",t9,t10),$[27]!==focusByIndex?(t11=()=>focusByIndex(0),t12=[focusByIndex],$[27]=focusByIndex,$[28]=t11,$[29]=t12):(t11=$[28],t12=$[29]),(0,keyboard._h)(ref,"home",t11,t12),$[30]!==focusByIndex||$[31]!==providerCount?(t13=()=>focusByIndex(providerCount-1),t14=[focusByIndex,providerCount],$[30]=focusByIndex,$[31]=providerCount,$[32]=t13,$[33]=t14):(t13=$[32],t14=$[33]),(0,keyboard._h)(ref,"end",t13,t14),$[34]===Symbol.for("react.memo_cache_sentinel")?(t15=["enter","space"],$[34]=t15):t15=$[34],$[35]!==selectFocused?(t16=[selectFocused],$[35]=selectFocused,$[36]=t16):t16=$[36],(0,keyboard._h)(ref,t15,selectFocused,t16),$[37]!==providers||$[38]!==selectedProvider_0||$[39]!==setFocusedIndex||$[40]!==setSelectedProvider_0){let t18;$[42]!==selectedProvider_0||$[43]!==setFocusedIndex||$[44]!==setSelectedProvider_0?(t18=(providerType,index)=>react.createElement(providerTab,{key:providerType,index,name:providerConfiguration.x[providerType].displayName,isActive:selectedProvider_0===providerType,onClick:()=>setSelectedProvider_0({provider:providerType}),onFocus:()=>setFocusedIndex(index),tabIndex:selectedProvider_0===providerType?0:-1,role:"tab",id:`provider-tab-${providerType}`,"aria-controls":`provider-tabpanel-${providerType}`}),$[42]=selectedProvider_0,$[43]=setFocusedIndex,$[44]=setSelectedProvider_0,$[45]=t18):t18=$[45],t17=providers.map(t18),$[37]=providers,$[38]=selectedProvider_0,$[39]=setFocusedIndex,$[40]=setSelectedProvider_0,$[41]=t17}else t17=$[41];return $[46]!==ref||$[47]!==t17?(t18=react.createElement(providerTabList_Section,{ref},t17),$[46]=ref,$[47]=t17,$[48]=t18):t18=$[48],t18}function providerTabList_temp(t0){const{media3p:t1}=t0,{state:t2,actions:t3}=t1,{selectedProvider}=t2,{setSelectedProvider}=t3;return{selectedProvider,setSelectedProvider}}ProviderTabList.propTypes={providers:prop_types_default().arrayOf(prop_types_default().string).isRequired};const providerTabList=ProviderTabList;ProviderTabList.__docgenInfo={description:"",methods:[],displayName:"ProviderTabList",props:{providers:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!0}}};var useMedia3pApi=__webpack_require__("./packages/story-editor/src/app/media/media3p/api/useMedia3pApi.js");function providerPanel_extends(){return providerPanel_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},providerPanel_extends.apply(null,arguments)}const MediaSubheading=(0,styled_components_browser_esm.Ay)(headline.$).attrs((()=>({as:"h2",size:types.$.XXSmall}))).withConfig({displayName:"providerPanel__MediaSubheading",componentId:"sc-1c53rqi-0"})(["margin-top:24px;padding:0 24px;",""],(props=>props.shouldDisplay||"display: none;")),ProviderWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"providerPanel__ProviderWrapper",componentId:"sc-1c53rqi-1"})(["position:relative;display:flex;flex-direction:column;height:100%;min-height:100px;max-width:100%;top:0;left:0;",""],(({hidden})=>hidden&&(0,styled_components_browser_esm.AH)(["position:absolute;visibility:hidden;"])));function ProviderPanel(t0){const $=(0,dist.c)(43);let isActive,providerType,rest,searchTerm;$[0]!==t0?(({providerType,isActive,searchTerm,...rest}=t0),$[0]=t0,$[1]=isActive,$[2]=providerType,$[3]=rest,$[4]=searchTerm):(isActive=$[1],providerType=$[2],rest=$[3],searchTerm=$[4]);const{insertElement}=library_useLibrary(providerPanel_temp),{actions:t1}=(0,useMedia3pApi.A)(),{registerUsage}=t1,{updateBaseColor:updateBaseColor_0}=(0,useLocalMedia.A)(providerPanel_temp2);let t2,t3;$[5]!==registerUsage?(t2=resource=>{resource?.attribution?.registerUsageUrl&&registerUsage({registerUsageUrl:resource.attribution.registerUsageUrl})},t3=[registerUsage],$[5]=registerUsage,$[6]=t2,$[7]=t3):(t2=$[6],t3=$[7]);const handleRegisterUsage=(0,react_src.hb)(t2,t3);let t4,t5;$[8]!==handleRegisterUsage||$[9]!==insertElement||$[10]!==updateBaseColor_0?(t4=(resource_0,thumbnailURL)=>{resourceList.A.set(resource_0.id,{url:thumbnailURL,type:"cached"}),insertElement(resource_0.type,{resource:resource_0}),handleRegisterUsage(resource_0),resource_0.baseColor||updateBaseColor_0(resource_0)},t5=[insertElement,handleRegisterUsage,updateBaseColor_0],$[8]=handleRegisterUsage,$[9]=insertElement,$[10]=updateBaseColor_0,$[11]=t4,$[12]=t5):(t4=$[11],t5=$[12]);const insertMediaElement=(0,react_src.hb)(t4,t5),{media3p:media3p_0}=(0,useMedia.A)(providerPanel_temp3);if(!isActive){let t6;return $[13]!==rest?(t6=react.createElement(ProviderWrapper,providerPanel_extends({},rest,{hidden:!0})),$[13]=rest,$[14]=t6):t6=$[14],t6}const state_0=media3p_0[providerType].state,actions=media3p_0[providerType].actions;let t6;$[15]!==state_0.categories.categories||$[16]!==state_0.categories.selectedCategoryId?(t6=state_0.categories.selectedCategoryId?state_0.categories.categories.find((e=>e.id===state_0.categories.selectedCategoryId)).label:(0,i18n.__)("Trending","web-stories"),$[15]=state_0.categories.categories,$[16]=state_0.categories.selectedCategoryId,$[17]=t6):t6=$[17];const displayName=t6,shouldDisplayMediaSubheading=Boolean(state_0.media?.length||state_0.categories.selectedCategoryId);let t7;$[18]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Search Results","web-stories"),$[18]=t7):t7=$[18];const searchResultsLabel=t7;let t8;$[19]!==actions.deselectCategory||$[20]!==actions.selectCategory||$[21]!==providerType||$[22]!==state_0.categories.categories||$[23]!==state_0.categories.selectedCategoryId?(t8=providerConfiguration.x[providerType].supportsCategories&&react.createElement(panes_shared.Iy,{items:state_0.categories.categories,selectedItemId:state_0.categories.selectedCategoryId,selectItem:actions.selectCategory,deselectItem:actions.deselectCategory}),$[19]=actions.deselectCategory,$[20]=actions.selectCategory,$[21]=providerType,$[22]=state_0.categories.categories,$[23]=state_0.categories.selectedCategoryId,$[24]=t8):t8=$[24];const t9=searchTerm.length&&!state_0.categories.selectedCategoryId?searchResultsLabel:displayName;let t10,t11,t12;return $[25]!==shouldDisplayMediaSubheading||$[26]!==t9?(t10=react.createElement(MediaSubheading,{"data-testid":"media-subheading",shouldDisplay:shouldDisplayMediaSubheading},t9),$[25]=shouldDisplayMediaSubheading,$[26]=t9,$[27]=t10):t10=$[27],$[28]!==actions.setNextPage||$[29]!==insertMediaElement||$[30]!==providerType||$[31]!==searchTerm||$[32]!==state_0.categories.selectedCategoryId||$[33]!==state_0.hasMore||$[34]!==state_0.isMediaLoaded||$[35]!==state_0.isMediaLoading||$[36]!==state_0.media?(t11=react.createElement(paginatedMediaGallery,{providerType,resources:state_0.media,isMediaLoading:state_0.isMediaLoading,isMediaLoaded:state_0.isMediaLoaded,hasMore:state_0.hasMore,setNextPage:actions.setNextPage,onInsert:insertMediaElement,searchTerm,selectedCategoryId:state_0.categories.selectedCategoryId}),$[28]=actions.setNextPage,$[29]=insertMediaElement,$[30]=providerType,$[31]=searchTerm,$[32]=state_0.categories.selectedCategoryId,$[33]=state_0.hasMore,$[34]=state_0.isMediaLoaded,$[35]=state_0.isMediaLoading,$[36]=state_0.media,$[37]=t11):t11=$[37],$[38]!==rest||$[39]!==t10||$[40]!==t11||$[41]!==t8?(t12=react.createElement(ProviderWrapper,rest,t8,t10,t11),$[38]=rest,$[39]=t10,$[40]=t11,$[41]=t8,$[42]=t12):t12=$[42],t12}function providerPanel_temp3(t0){const{media3p}=t0;return{media3p}}function providerPanel_temp2(t0){const{actions:t1}=t0,{updateBaseColor}=t1;return{updateBaseColor}}function providerPanel_temp(state){return{insertElement:state.actions.insertElement}}ProviderPanel.propTypes={providerType:prop_types_default().string.isRequired,isActive:prop_types_default().bool.isRequired,searchTerm:prop_types_default().string};const providerPanel=ProviderPanel;function media3pPane_extends(){return media3pPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},media3pPane_extends.apply(null,arguments)}ProviderPanel.__docgenInfo={description:"",methods:[],displayName:"ProviderPanel",props:{providerType:{description:"",type:{name:"string"},required:!0},isActive:{description:"",type:{name:"bool"},required:!0},searchTerm:{description:"",type:{name:"string"},required:!1}}};const PaneBottom=styled_components_browser_esm.Ay.div.withConfig({displayName:"media3pPane__PaneBottom",componentId:"sc-1hq1xk8-0"})(["position:relative;height:100%;flex:1 1 auto;min-height:0;"]);function Media3pPane(props){const $=(0,dist.c)(48),{isActive}=props,{searchTerm:searchTerm_0,selectedProvider:selectedProvider_0,setSelectedProvider:setSelectedProvider_0,setSearchTerm:setSearchTerm_0,media3p:media3p_0}=(0,useMedia.A)(media3pPane_temp);let t0,t1;$[0]!==isActive||$[1]!==selectedProvider_0||$[2]!==setSelectedProvider_0?(t0=()=>{isActive&&!selectedProvider_0&&setSelectedProvider_0({provider:Object.keys(providerConfiguration.x)[0]})},t1=[isActive,selectedProvider_0,setSelectedProvider_0],$[0]=isActive,$[1]=selectedProvider_0,$[2]=setSelectedProvider_0,$[3]=t0,$[4]=t1):(t0=$[3],t1=$[4]),(0,react_src.vJ)(t0,t1);const selectedCategoryId=media3p_0[selectedProvider_0]?.state?.categories?.selectedCategoryId;let t2,t3,t4,t5;$[5]!==searchTerm_0||$[6]!==selectedCategoryId||$[7]!==selectedProvider_0?(t2=()=>{searchTerm_0.length&&(0,tracking_src.sx)("search",{search_type:"media3p",search_term:searchTerm_0,search_filter:selectedProvider_0,search_category:selectedCategoryId})},t3=[selectedProvider_0,searchTerm_0,selectedCategoryId],$[5]=searchTerm_0,$[6]=selectedCategoryId,$[7]=selectedProvider_0,$[8]=t2,$[9]=t3):(t2=$[8],t3=$[9]),(0,react_src.vJ)(t2,t3),$[10]!==searchTerm_0||$[11]!==setSearchTerm_0?(t4=value=>{const trimText=value.trim();trimText!==searchTerm_0&&setSearchTerm_0({searchTerm:trimText})},t5=[searchTerm_0,setSearchTerm_0],$[10]=searchTerm_0,$[11]=setSearchTerm_0,$[12]=t4,$[13]=t5):(t4=$[12],t5=$[13]);const onSearch=(0,react_src.hb)(t4,t5),paneBottomRef=(0,react_src.li)(),features=useFeatures();let t6,t7;$[14]!==features?(t6=()=>Object.keys(providerConfiguration.x).filter((p=>!providerConfiguration.x[p].featureName||features[providerConfiguration.x[p].featureName])),t7=[features],$[14]=features,$[15]=t6,$[16]=t7):(t6=$[15],t7=$[16]);const providers=(0,react_src.Kr)(t6,t7);let t8,t9;$[17]!==isActive?(t8=isActive&&react.createElement(termsDialog,null),$[17]=isActive,$[18]=t8):t8=$[18],$[19]===Symbol.for("react.memo_cache_sentinel")?(t9=(0,i18n.__)("Search","web-stories"),$[19]=t9):t9=$[19];const t10=Boolean(selectedProvider_0&&providerConfiguration.x[selectedProvider_0].supportsCategories&&media3p_0[selectedProvider_0]?.state.categories.selectedCategoryId);let t11,t12,t13,t14,t15,t16,t17,t18;if($[20]!==onSearch||$[21]!==searchTerm_0||$[22]!==t10?(t11=react.createElement(common_styles.oG,null,react.createElement(searchInput,{initialValue:searchTerm_0,placeholder:t9,onSearch,disabled:t10})),$[20]=onSearch,$[21]=searchTerm_0,$[22]=t10,$[23]=t11):t11=$[23],$[24]!==providers?(t12=react.createElement(providerTabList,{providers}),$[24]=providers,$[25]=t12):t12=$[25],$[26]!==t11||$[27]!==t12?(t13=react.createElement(common_styles.QM,null,t11,t12),$[26]=t11,$[27]=t12,$[28]=t13):t13=$[28],$[29]!==providers||$[30]!==searchTerm_0||$[31]!==selectedProvider_0){let t15;$[33]!==searchTerm_0||$[34]!==selectedProvider_0?(t15=providerType=>react.createElement(providerPanel,{key:providerType,providerType,isActive:providerType===selectedProvider_0,searchTerm:searchTerm_0,role:"tabpanel","aria-labelledby":`provider-tab-${providerType}`,id:`provider-tabpanel-${providerType}`}),$[33]=searchTerm_0,$[34]=selectedProvider_0,$[35]=t15):t15=$[35],t14=providers.map(t15),$[29]=providers,$[30]=searchTerm_0,$[31]=selectedProvider_0,$[32]=t14}else t14=$[32];return $[36]!==paneBottomRef||$[37]!==t14?(t15=react.createElement(PaneBottom,{ref:paneBottomRef},t14),$[36]=paneBottomRef,$[37]=t14,$[38]=t15):t15=$[38],$[39]!==t13||$[40]!==t15?(t16=react.createElement(common_styles.HT,null,t13,t15),$[39]=t13,$[40]=t15,$[41]=t16):t16=$[41],$[42]!==props||$[43]!==t16?(t17=react.createElement(common_styles.SM,media3pPane_extends({id:media3p_paneId},props),t16),$[42]=props,$[43]=t16,$[44]=t17):t17=$[44],$[45]!==t17||$[46]!==t8?(t18=react.createElement(react.Fragment,null,t8,t17),$[45]=t17,$[46]=t8,$[47]=t18):t18=$[47],t18}function media3pPane_temp(t0){const{media3p:t1,media3p}=t0,{state:t2,actions:t3}=t1,{selectedProvider,searchTerm}=t2,{setSelectedProvider,setSearchTerm}=t3;return{searchTerm,selectedProvider,setSelectedProvider,setSearchTerm,media3p}}Media3pPane.propTypes={isActive:prop_types_default().bool};const media3pPane=Media3pPane;Media3pPane.__docgenInfo={description:"Pane that contains the media 3P integrations.\n\n@param {Object} props Component props\n@return {*} The media pane element for 3P integrations.",methods:[],displayName:"Media3pPane",props:{isActive:{description:"",type:{name:"bool"},required:!1}}};var picture=__webpack_require__("./packages/design-system/src/icons/picture.svg");function Media3pIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(picture.A,{title:(0,i18n.__)("Explore Media","web-stories")}),$[0]=t0):t0=$[0],t0}const media3pIcon=Media3pIcon;Media3pIcon.__docgenInfo={description:"",methods:[],displayName:"Media3pIcon"};var stickers_src=__webpack_require__("./packages/stickers/src/index.ts"),masks_src=__webpack_require__("./packages/masks/src/index.ts"),useRovingTabIndex=__webpack_require__("./packages/story-editor/src/utils/useRovingTabIndex/index.js"),createSolidFromString=__webpack_require__("./packages/patterns/src/createSolidFromString.ts"),useUnits=__webpack_require__("./packages/units/src/useUnits.ts"),libraryMoveable=__webpack_require__("./packages/story-editor/src/components/library/panes/shared/libraryMoveable.js"),insertionOverlay=__webpack_require__("./packages/story-editor/src/components/library/panes/shared/insertionOverlay.js");const DEFAULT_ELEMENT_WIDTH=src_constants.bj/3,Aspect=styled_components_browser_esm.Ay.button.withConfig({displayName:"shapePreview__Aspect",componentId:"sc-1pj9cm0-0"})(["background:transparent;outline:none;border:0;padding:0;position:relative;border-radius:",";background-color:",";&:focus-visible [role='presentation']{",";}"],(({theme})=>theme.borders.radius.small),(({theme})=>theme.colors.interactiveBg.previewOverlay),(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),AspectInner=styled_components_browser_esm.Ay.div.withConfig({displayName:"shapePreview__AspectInner",componentId:"sc-1pj9cm0-1"})(["position:relative;padding-bottom:95.5%;"]),ShapePreviewContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"shapePreview__ShapePreviewContainer",componentId:"sc-1pj9cm0-2"})(["position:absolute;top:0;left:0;height:100%;width:100%;border-radius:",";display:flex;justify-content:center;align-items:center;svg{display:inline-block;width:36px;height:36px;}"],(({theme})=>theme.borders.radius.small)),ShapeClone=styled_components_browser_esm.Ay.div.withConfig({displayName:"shapePreview__ShapeClone",componentId:"sc-1pj9cm0-3"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";svg{display:inline-block;width:100%;height:100%;path{fill:#c4c4c4;}}"],(({width})=>`${width}px`),(({height})=>`${height}px`)),ShapePreviewSizer=styled_components_browser_esm.Ay.div.withConfig({displayName:"shapePreview__ShapePreviewSizer",componentId:"sc-1pj9cm0-4"})(["padding-top:100%;"]),Path=styled_components_browser_esm.Ay.path.withConfig({displayName:"shapePreview__Path",componentId:"sc-1pj9cm0-5"})(["fill:",";"],(({theme})=>theme.colors.fg.primary));function ShapePreview(t0){const $=(0,dist.c)(56),{mask,isPreview,index}=t0,{insertElement}=library_useLibrary(shapePreview_temp),{dataToEditorX,dataToEditorY}=(0,useUnits.A)(shapePreview_temp2),[active,setActive]=(0,react_src.J0)(!1);let t1;$[0]!==setActive?(t1=()=>setActive(!0),$[0]=setActive,$[1]=t1):t1=$[1];const makeActive=t1;let t2;$[2]!==setActive?(t2=()=>setActive(!1),$[2]=setActive,$[3]=t2):t2=$[3];const makeInactive=t2,ref=(0,react_src.li)();let t3;$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,react_src._3)(),$[4]=t3):t3=$[4];const pathRef=t3;let t4,t5;$[5]!==mask.ratio||$[6]!==mask.type?(t4=()=>({backgroundColor:(0,createSolidFromString.A)("#c4c4c4"),width:DEFAULT_ELEMENT_WIDTH*mask.ratio,height:DEFAULT_ELEMENT_WIDTH,mask:{type:mask.type},lockAspectRatio:masks_src.E_.RECTANGLE!==mask.type}),t5=[mask.ratio,mask.type],$[5]=mask.ratio,$[6]=mask.type,$[7]=t4,$[8]=t5):(t4=$[7],t5=$[8]);const shapeData=(0,react_src.Kr)(t4,t5);let t6,t7;$[9]!==insertElement||$[10]!==mask.type||$[11]!==shapeData?(t6=()=>{insertElement("shape",shapeData),(0,tracking_src.sx)("insert_shape",{name:mask.type})},t7=[insertElement,shapeData,mask.type],$[9]=insertElement,$[10]=mask.type,$[11]=shapeData,$[12]=t6,$[13]=t7):(t6=$[12],t7=$[13]);const onClick=(0,react_src.hb)(t6,t7);let t8;$[14]!==isPreview||$[15]!==mask.iconPath||$[16]!==mask.iconRatio||$[17]!==mask.name||$[18]!==mask.path||$[19]!==mask.ratio?(t8=t9=>{const displayLabel=void 0===t9||t9;return react.createElement("svg",{viewBox:"0 0 1 "+1/(isPreview&&mask.iconRatio?mask.iconRatio:mask.ratio),width:36*(isPreview&&mask.iconRatio?mask.iconRatio:mask.ratio),height:36},displayLabel&&react.createElement("title",null,mask.name),react.createElement(Path,{d:isPreview&&mask.iconPath?mask.iconPath:mask.path,ref:pathRef}))},$[14]=isPreview,$[15]=mask.iconPath,$[16]=mask.iconRatio,$[17]=mask.name,$[18]=mask.path,$[19]=mask.ratio,$[20]=t8):t8=$[20];const getSVG=t8,t9=0===index?0:-1,t10=mask.name,t11=mask.type;let t12,t13,t14,t15,t16;$[21]===Symbol.for("react.memo_cache_sentinel")?(t12=react.createElement(ShapePreviewSizer,null),$[21]=t12):t12=$[21],$[22]!==getSVG?(t13=getSVG(),$[22]=getSVG,$[23]=t13):t13=$[23],$[24]!==mask.type||$[25]!==t13?(t14=react.createElement(ShapePreviewContainer,{key:t11},t12,t13),$[24]=mask.type,$[25]=t13,$[26]=t14):t14=$[26],$[27]!==active?(t15=active&&react.createElement(insertionOverlay.A,null),$[27]=active,$[28]=t15):t15=$[28],$[29]!==t14||$[30]!==t15?(t16=react.createElement(AspectInner,null,t14,t15),$[29]=t14,$[30]=t15,$[31]=t16):t16=$[31];const t17=DEFAULT_ELEMENT_WIDTH*mask.ratio;let t18,t19,t20,t21,t22,t23;return $[32]!==dataToEditorX||$[33]!==t17?(t18=dataToEditorX(t17),$[32]=dataToEditorX,$[33]=t17,$[34]=t18):t18=$[34],$[35]!==dataToEditorY?(t19=dataToEditorY(DEFAULT_ELEMENT_WIDTH),$[35]=dataToEditorY,$[36]=t19):t19=$[36],$[37]!==getSVG?(t20=getSVG(!1),$[37]=getSVG,$[38]=t20):t20=$[38],$[39]!==t18||$[40]!==t19||$[41]!==t20?(t21={width:t18,height:t19,children:t20},$[39]=t18,$[40]=t19,$[41]=t20,$[42]=t21):t21=$[42],$[43]!==onClick||$[44]!==shapeData||$[45]!==t21?(t22=react.createElement(libraryMoveable.A,{type:"shape",elementProps:shapeData,cloneElement:ShapeClone,onClick,cloneProps:t21}),$[43]=onClick,$[44]=shapeData,$[45]=t21,$[46]=t22):t22=$[46],$[47]!==makeActive||$[48]!==makeInactive||$[49]!==mask.name||$[50]!==onClick||$[51]!==ref||$[52]!==t16||$[53]!==t22||$[54]!==t9?(t23=react.createElement(Aspect,{ref,onClick,tabIndex:t9,"aria-label":t10,onPointerEnter:makeActive,onFocus:makeActive,onPointerLeave:makeInactive,onBlur:makeInactive},t16,t22),$[47]=makeActive,$[48]=makeInactive,$[49]=mask.name,$[50]=onClick,$[51]=ref,$[52]=t16,$[53]=t22,$[54]=t9,$[55]=t23):t23=$[55],t23}function shapePreview_temp2(state_0){return{dataToEditorX:state_0.actions.dataToEditorX,dataToEditorY:state_0.actions.dataToEditorY}}function shapePreview_temp(state){return{insertElement:state.actions.insertElement}}const shapePreview=ShapePreview;ShapePreview.__docgenInfo={description:"",methods:[],displayName:"ShapePreview",props:{mask:{description:"",type:{name:"object"},required:!0},isPreview:{description:"",type:{name:"bool"},required:!1},index:{description:"",type:{name:"number"},required:!1}}};const StickerButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({size:constants.Mp.Small}).withConfig({displayName:"stickerPreview__StickerButton",componentId:"sc-rjblwe-0"})(["position:relative;padding:0 0 95.5% 0;margin:0;height:60px;background-color:",";&:focus-visible{box-shadow:none;}&:focus-visible [role='presentation']{",";}"],(({theme})=>theme.colors.interactiveBg.previewOverlay),(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),StickerInner=styled_components_browser_esm.Ay.div.withConfig({displayName:"stickerPreview__StickerInner",componentId:"sc-rjblwe-1"})(["position:absolute;top:0;left:0;height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),StickerClone=styled_components_browser_esm.Ay.div.withConfig({displayName:"stickerPreview__StickerClone",componentId:"sc-rjblwe-2"})(["position:absolute;top:0;left:0;opacity:0;width:",";height:",";"],(({width})=>`${width}px`),(({height})=>`${height}px`));function StickerPreview(t0){const $=(0,dist.c)(47),{stickerType,index}=t0,{insertElement}=library_useLibrary(stickerPreview_temp),{dataToEditorX,dataToEditorY}=(0,useUnits.A)(stickerPreview_temp2),sticker=stickers_src.A[stickerType],aspectRatio=sticker.aspectRatio;let t1,t2;$[0]!==aspectRatio||$[1]!==stickerType?(t1=()=>({width:DEFAULT_ELEMENT_WIDTH*aspectRatio,height:DEFAULT_ELEMENT_WIDTH,sticker:{type:stickerType}}),t2=[aspectRatio,stickerType],$[0]=aspectRatio,$[1]=stickerType,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]);const stickerData=(0,react_src.Kr)(t1,t2),[isActive,setIsActive]=(0,react_src.J0)(!1);let t3;$[4]!==setIsActive?(t3=()=>setIsActive(!0),$[4]=setIsActive,$[5]=t3):t3=$[5];const makeActive=t3;let t4;$[6]!==setIsActive?(t4=()=>setIsActive(!1),$[6]=setIsActive,$[7]=t4):t4=$[7];const makeInactive=t4;let t5;$[8]!==insertElement||$[9]!==stickerType?(t5=()=>insertElement("sticker",{width:DEFAULT_ELEMENT_WIDTH,sticker:{type:stickerType}}),$[8]=insertElement,$[9]=stickerType,$[10]=t5):t5=$[10];const onClick=t5,Svg=sticker.svg,t6=`library-sticker-${stickerType}`,t7=0===index?0:-1,t8=aspectRatio<.955?"60%":"auto",t9=aspectRatio<.955?"auto":"60%";let t10,t11,t12;$[11]!==t8||$[12]!==t9?(t10={height:t8,width:t9},$[11]=t8,$[12]=t9,$[13]=t10):t10=$[13],$[14]!==Svg||$[15]!==t10?(t11=react.createElement(Svg,{style:t10}),$[14]=Svg,$[15]=t10,$[16]=t11):t11=$[16],$[17]!==isActive?(t12=isActive&&react.createElement(insertionOverlay.A,null),$[17]=isActive,$[18]=t12):t12=$[18];const t13=DEFAULT_ELEMENT_WIDTH*(aspectRatio<1?aspectRatio:1);let t14;$[19]!==dataToEditorX||$[20]!==t13?(t14=dataToEditorX(t13),$[19]=dataToEditorX,$[20]=t13,$[21]=t14):t14=$[21];const t15=DEFAULT_ELEMENT_WIDTH/(aspectRatio<1?1:aspectRatio);let t16,t17,t18,t19,t20,t21,t22;return $[22]!==dataToEditorY||$[23]!==t15?(t16=dataToEditorY(t15),$[22]=dataToEditorY,$[23]=t15,$[24]=t16):t16=$[24],$[25]===Symbol.for("react.memo_cache_sentinel")?(t17={height:"auto",width:"100%"},$[25]=t17):t17=$[25],$[26]!==Svg?(t18=react.createElement(Svg,{style:t17}),$[26]=Svg,$[27]=t18):t18=$[27],$[28]!==t14||$[29]!==t16||$[30]!==t18?(t19={width:t14,height:t16,children:t18},$[28]=t14,$[29]=t16,$[30]=t18,$[31]=t19):t19=$[31],$[32]!==onClick||$[33]!==stickerData||$[34]!==t19?(t20=react.createElement(libraryMoveable.A,{type:"sticker",elementProps:stickerData,cloneElement:StickerClone,onClick,cloneProps:t19}),$[32]=onClick,$[33]=stickerData,$[34]=t19,$[35]=t20):t20=$[35],$[36]!==t11||$[37]!==t12||$[38]!==t20?(t21=react.createElement(StickerInner,null,t11,t12,t20),$[36]=t11,$[37]=t12,$[38]=t20,$[39]=t21):t21=$[39],$[40]!==makeActive||$[41]!==makeInactive||$[42]!==onClick||$[43]!==t21||$[44]!==t6||$[45]!==t7?(t22=react.createElement(StickerButton,{"data-testid":t6,onClick,tabIndex:t7,onPointerEnter:makeActive,onFocus:makeActive,onPointerLeave:makeInactive,onBlur:makeInactive},t21),$[40]=makeActive,$[41]=makeInactive,$[42]=onClick,$[43]=t21,$[44]=t6,$[45]=t7,$[46]=t22):t22=$[46],t22}function stickerPreview_temp2(state_0){return{dataToEditorX:state_0.actions.dataToEditorX,dataToEditorY:state_0.actions.dataToEditorY}}function stickerPreview_temp(state){return{insertElement:state.actions.insertElement}}StickerPreview.propTypes={stickerType:prop_types_default().oneOf(Object.keys(stickers_src.A)).isRequired,index:prop_types_default().number};const stickerPreview=StickerPreview;StickerPreview.__docgenInfo={description:"",methods:[],displayName:"StickerPreview",props:{stickerType:{description:"",type:{name:"enum",computed:!0,value:"Object.keys(STICKERS)"},required:!0},index:{description:"",type:{name:"number"},required:!1}}};const shapes_paneId=(0,panes_shared.kN)("shapes");function shapesPane_extends(){return shapesPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},shapesPane_extends.apply(null,arguments)}const SectionContent=styled_components_browser_esm.Ay.div.withConfig({displayName:"shapesPane__SectionContent",componentId:"sc-ffcyax-0"})(["position:relative;display:grid;grid-column-gap:12px;grid-row-gap:24px;@media screen and (min-width:1220px){grid-template-columns:repeat(4,1fr);}@media screen and (min-width:1100px) and (max-width:1220px){grid-template-columns:repeat(3,1fr);}@media screen and (max-width:1100px){grid-template-columns:repeat(2,1fr);}"]),STICKER_TYPES=Object.keys(stickers_src.A);function ShapesPane(props){const $=(0,dist.c)(16),ref=(0,react_src.li)();let t0;$[0]!==ref?(t0={ref},$[0]=ref,$[1]=t0):t0=$[1],(0,useRovingTabIndex.A)(t0);const stickersRef=(0,react_src.li)(null);let t1,t2,t3,t4,t5,t6,t7,t8;return $[2]!==stickersRef?(t1={ref:stickersRef},$[2]=stickersRef,$[3]=t1):t1=$[3],(0,useRovingTabIndex.A)(t1),$[4]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Shapes","web-stories"),$[4]=t2):t2=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t3=masks_src.MU.filter(shapesPane_temp).map(shapesPane_temp2),$[5]=t3):t3=$[5],$[6]!==ref?(t4=react.createElement(Section,{"data-testid":"shapes-library-pane",title:t2},react.createElement(SectionContent,{ref},t3)),$[6]=ref,$[7]=t4):t4=$[7],$[8]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Stickers","web-stories"),$[8]=t5):t5=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t6=STICKER_TYPES.map(shapesPane_temp3),$[9]=t6):t6=$[9],$[10]!==stickersRef?(t7=react.createElement(Section,{"data-testid":"stickers-library-pane",title:t5},react.createElement(SectionContent,{ref:stickersRef},t6)),$[10]=stickersRef,$[11]=t7):t7=$[11],$[12]!==props||$[13]!==t4||$[14]!==t7?(t8=react.createElement(panes_shared.Zv,shapesPane_extends({id:shapes_paneId},props,{isOverflowScrollable:!0}),t4,t7),$[12]=props,$[13]=t4,$[14]=t7,$[15]=t8):t8=$[15],t8}function shapesPane_temp3(stickerType,i_0){return react.createElement(stickerPreview,{key:stickerType,index:i_0,stickerType})}function shapesPane_temp2(mask_0,i){return react.createElement(shapePreview,{mask:mask_0,key:mask_0.type,index:i,isPreview:!0})}function shapesPane_temp(mask){return mask.showInLibrary}const shapesPane=ShapesPane;ShapesPane.__docgenInfo={description:"",methods:[],displayName:"ShapesPane"};var shapes=__webpack_require__("./packages/design-system/src/icons/shapes.svg");function ShapesIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(shapes.A,{title:(0,i18n.__)("Shapes library","web-stories")}),$[0]=t0):t0=$[0],t0}const shapesIcon=ShapesIcon;ShapesIcon.__docgenInfo={description:"",methods:[],displayName:"ShapesIcon"};var toggle=__webpack_require__("./packages/design-system/src/components/toggle/toggle.tsx"),objectWithout=__webpack_require__("./packages/story-editor/src/utils/objectWithout.ts");function fontPreview_extends(){return fontPreview_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fontPreview_extends.apply(null,arguments)}const Preview=styled_components_browser_esm.Ay.button.withConfig({displayName:"fontPreview__Preview",componentId:"sc-kfwh27-0"})(["position:relative;display:flex;align-items:center;background-color:",";padding:8px 0px;border-radius:",";width:100%;border:none;cursor:pointer;text-align:left;"," &:focus-visible [role='presentation']{",";}"],(({theme})=>theme.colors.interactiveBg.secondaryNormal),(({theme})=>theme.borders.radius.small),(({isTextSelected})=>isTextSelected?shared_styles.Y:"outline: none;"),(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),PreviewText=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).withConfig({displayName:"fontPreview__PreviewText",componentId:"sc-kfwh27-1"})(["color:",";font-size:","px;font-weight:",";font-family:",";line-height:normal;margin:",";"],(({theme,isClone})=>isClone?theme.colors.standard.black:theme.colors.fg.primary),(({fontSize})=>fontSize),(({fontWeight})=>fontWeight),(({fontFamily})=>fontFamily),(({isClone})=>isClone?0:"0px 16px")),DragContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"fontPreview__DragContainer",componentId:"sc-kfwh27-2"})(["position:absolute;opacity:0;background-color:",";width:","px;line-height:","px;"],(({theme})=>theme.colors.opacity.white24),(({width})=>width),(({lineHeight})=>lineHeight));function FontPreview(t0){const $=(0,dist.c)(73),{title,element,insertPreset,getPosition,index}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=(0,rich_text_src.$d)(),$[0]=t1):t1=$[0];const htmlFormatters=t1,{font,fontSize,content}=element;let t2;$[1]!==content?(t2=(0,presetUtils.bo)(content),$[1]=content,$[2]=t2):t2=$[2];const{fontWeight}=t2,{actions:t3}=(0,app.Ln)(),{maybeEnqueueFontStyle}=t3,{dataToEditorX,dataToEditorY}=(0,useUnits.A)(fontPreview_temp),{shouldUseSmartColor}=library_useLibrary(fontPreview_temp2),calculateAccessibleTextColors=(0,pageCanvas.zN)(),{isTextSelected,updateSelectedElements}=(0,app.P3)(fontPreview_temp3),buttonRef=(0,react_src.li)(null);let t4,t5,t6,t7;$[3]!==content||$[4]!==font||$[5]!==fontWeight||$[6]!==maybeEnqueueFontStyle?(t4=()=>{maybeEnqueueFontStyle([{font,fontWeight,content:(0,dom_src._e)(content)}])},t5=[font,fontWeight,content,maybeEnqueueFontStyle],$[3]=content,$[4]=font,$[5]=fontWeight,$[6]=maybeEnqueueFontStyle,$[7]=t4,$[8]=t5):(t4=$[7],t5=$[8]),(0,react_src.vJ)(t4,t5),$[9]===Symbol.for("react.memo_cache_sentinel")?(t6=(t8,elContent)=>{const{fontWeight:newFontWeight,isItalic,isUnderline,letterSpacing}=t8;return elContent=htmlFormatters.setFontWeight(elContent,newFontWeight),elContent=htmlFormatters.toggleItalic(elContent,isItalic),elContent=htmlFormatters.toggleUnderline(elContent,isUnderline),elContent=htmlFormatters.setLetterSpacing(elContent,letterSpacing)},t7=[htmlFormatters],$[9]=t6,$[10]=t7):(t6=$[9],t7=$[10]);const applyStyleOnContent=(0,react_src.hb)(t6,t7);let t8,t9;$[11]!==applyStyleOnContent||$[12]!==calculateAccessibleTextColors||$[13]!==element||$[14]!==getPosition||$[15]!==insertPreset||$[16]!==isTextSelected||$[17]!==shouldUseSmartColor||$[18]!==title||$[19]!==updateSelectedElements?(t8=async()=>{if(isTextSelected)return void updateSelectedElements({properties:oldElement=>{const newContent=applyStyleOnContent((0,presetUtils.bo)(element.content),oldElement.content),presetAtts=(0,objectWithout.A)(element,["x","y","content","width"]),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...oldElement,...presetAtts});return{...oldElement,...presetAtts,...sizeUpdates,content:newContent}}});let newElement=element;const insertOpts={isPositioned:!1};if(shouldUseSmartColor){const position=getPosition(element);insertOpts.isPositioned=!0,newElement={...element,...position},insertOpts.accessibleColors=await calculateAccessibleTextColors(newElement)}insertPreset(newElement,insertOpts),(0,tracking_src.sx)("insert_text_preset",{name:title})},t9=[isTextSelected,getPosition,element,shouldUseSmartColor,insertPreset,title,updateSelectedElements,applyStyleOnContent,calculateAccessibleTextColors],$[11]=applyStyleOnContent,$[12]=calculateAccessibleTextColors,$[13]=element,$[14]=getPosition,$[15]=insertPreset,$[16]=isTextSelected,$[17]=shouldUseSmartColor,$[18]=title,$[19]=updateSelectedElements,$[20]=t8,$[21]=t9):(t8=$[20],t9=$[21]);const onClick=(0,react_src.hb)(t8,t9);let t10;$[22]!==content||$[23]!==font||$[24]!==fontSize||$[25]!==fontWeight||$[26]!==title?(t10=t11=>{const textProps=void 0===t11?{}:t11,{isClone}=textProps;return react.createElement(PreviewText,fontPreview_extends({font,fontSize,fontWeight},textProps),isClone?(0,dom_src._e)(content):title)},$[22]=content,$[23]=font,$[24]=fontSize,$[25]=fontWeight,$[26]=title,$[27]=t10):t10=$[27];const getTextDisplay=t10;let t11,t12,t13;$[28]===Symbol.for("react.memo_cache_sentinel")?(t11={key:["enter","space"]},$[28]=t11):t11=$[28],$[29]!==onClick?(t12=[onClick],$[29]=onClick,$[30]=t12):t12=$[30],(0,keyboard._h)(buttonRef,t11,onClick,t12),$[31]!==buttonRef?(t13={ref:buttonRef},$[31]=buttonRef,$[32]=t13):t13=$[32],(0,useRovingTabIndex.A)(t13);const[active,setActive]=(0,react_src.J0)(!1);let t14;$[33]!==setActive?(t14=()=>setActive(!0),$[33]=setActive,$[34]=t14):t14=$[34];const makeActive=t14;let t15;$[35]!==setActive?(t15=()=>setActive(!1),$[35]=setActive,$[36]=t15):t15=$[36];const makeInactive=t15,t16=0===index?0:-1;let t17,t18,t19,t20,t21,t22;$[37]!==isTextSelected||$[38]!==title?(t17=isTextSelected?(0,sprintf.A)((0,i18n.__)("Apply preset: %s","web-stories"),title):null,$[37]=isTextSelected,$[38]=title,$[39]=t17):t17=$[39],$[40]!==getTextDisplay?(t18=getTextDisplay(),$[40]=getTextDisplay,$[41]=t18):t18=$[41],$[42]!==active||$[43]!==isTextSelected?(t19=active&&!isTextSelected&&react.createElement(insertionOverlay.A,null),$[42]=active,$[43]=isTextSelected,$[44]=t19):t19=$[44],$[45]!==dataToEditorY||$[46]!==fontSize||$[47]!==getTextDisplay?(t20=getTextDisplay({fontSize:dataToEditorY(fontSize),isClone:!0}),$[45]=dataToEditorY,$[46]=fontSize,$[47]=getTextDisplay,$[48]=t20):t20=$[48],$[49]!==dataToEditorX||$[50]!==element.width?(t21=dataToEditorX(element.width),$[49]=dataToEditorX,$[50]=element.width,$[51]=t21):t21=$[51],$[52]!==dataToEditorY||$[53]!==fontSize?(t22=dataToEditorY(fontSize),$[52]=dataToEditorY,$[53]=fontSize,$[54]=t22):t22=$[54];const t23=Math.ceil(t22);let t24,t25,t26;return $[55]!==t20||$[56]!==t21||$[57]!==t23?(t24={children:t20,width:t21,lineHeight:t23},$[55]=t20,$[56]=t21,$[57]=t23,$[58]=t24):t24=$[58],$[59]!==element||$[60]!==onClick||$[61]!==t24?(t25=react.createElement(libraryMoveable.A,{cloneElement:DragContainer,cloneProps:t24,elementProps:element,type:"text",onClick}),$[59]=element,$[60]=onClick,$[61]=t24,$[62]=t25):t25=$[62],$[63]!==buttonRef||$[64]!==isTextSelected||$[65]!==makeActive||$[66]!==makeInactive||$[67]!==t16||$[68]!==t17||$[69]!==t18||$[70]!==t19||$[71]!==t25?(t26=react.createElement(Preview,{ref:buttonRef,onPointerEnter:makeActive,onFocus:makeActive,onPointerLeave:makeInactive,onBlur:makeInactive,tabIndex:t16,isTextSelected,"aria-label":t17},t18,t19,t25),$[63]=buttonRef,$[64]=isTextSelected,$[65]=makeActive,$[66]=makeInactive,$[67]=t16,$[68]=t17,$[69]=t18,$[70]=t19,$[71]=t25,$[72]=t26):t26=$[72],t26}function fontPreview_temp3(t0){const{state:state_1,actions}=t0;return{isTextSelected:(0,presetUtils.ac)("text",state_1.selectedElements),updateSelectedElements:actions.updateSelectedElements}}function fontPreview_temp2(state_0){return{shouldUseSmartColor:state_0.state.shouldUseSmartColor}}function fontPreview_temp(state){return{dataToEditorX:state.actions.dataToEditorX,dataToEditorY:state.actions.dataToEditorY}}const fontPreview=FontPreview;FontPreview.__docgenInfo={description:"",methods:[],displayName:"FontPreview",props:{title:{description:"",type:{name:"string"},required:!0},element:{description:"",type:{name:"custom",raw:"StoryPropTypes.textContent.isRequired"},required:!1},insertPreset:{description:"",type:{name:"func"},required:!0},getPosition:{description:"",type:{name:"func"},required:!0},index:{description:"",type:{name:"number"},required:!0}}};const text_paneId=(0,panes_shared.kN)("text");var textPresets=__webpack_require__("./packages/story-editor/src/components/library/panes/text/textPresets.ts"),dimensions=__webpack_require__("./packages/units/src/dimensions.ts"),element_library_src=__webpack_require__("./packages/element-library/src/index.ts"),getInsertedElementSize=__webpack_require__("./packages/story-editor/src/utils/getInsertedElementSize.ts"),textStyle_utils=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/utils.js");const POSITION_MARGIN=(0,dimensions.Yy)(1);const text_useInsertPreset=function useInsertPreset({shouldUseSmartColor}){const{insertElement}=library_useLibrary((state=>({insertElement:state.actions.insertElement}))),{state:{versionNumber}}=(0,app.W6)(),htmlFormatters=(0,rich_text_src.$d)(),{setColor}=htmlFormatters,[autoColor,setAutoColor]=(0,react_src.J0)(null),[presetAtts,setPresetAtts]=(0,react_src.J0)(null),lastPresetRef=(0,react_src.li)(null),calculateAccessibleTextColors=(0,pageCanvas.zN)();(0,react_src.vJ)((()=>{lastPresetRef.current?.element&&!lastPresetRef.current.versionNumber?lastPresetRef.current.versionNumber=versionNumber:lastPresetRef.current?.versionNumber&&(lastPresetRef.current=null)}),[versionNumber]);const getPosition=(0,react_src.hb)((element=>{const{y}=element;if(!lastPresetRef.current)return y;const{element:{height:lastHeight,y:lastY}}=lastPresetRef.current;let positionedY=lastY+lastHeight+POSITION_MARGIN;const{width,height}=(0,getInsertedElementSize.A)("text",element.width,element.height,{...element,y:positionedY});return positionedY+height>=src_constants.WY&&(positionedY=y),{width,height,y:positionedY}}),[]);(0,react_src.vJ)((()=>{if(autoColor&&presetAtts){const{content}=presetAtts,{color,backgroundColor}=autoColor,highlightProps=backgroundColor?{backgroundColor:{color:backgroundColor},backgroundTextMode:elements_src.xu.HIGHLIGHT,padding:(0,textStyle_utils.oB)(presetAtts)}:null,elementProps={...presetAtts,content:color?setColor(content,{color}):content,...highlightProps},addedElement=insertElement("text",{...elementProps,height:(0,element_library_src.ru)(elementProps,elementProps.width)});lastPresetRef.current={versionNumber:null,element:addedElement},setAutoColor(null),setPresetAtts(null)}}),[autoColor,presetAtts,insertElement,setColor]);const insertPreset=(0,react_src.hb)((async(element_0,presetProps={})=>{const{isPositioned,accessibleColors}=presetProps,atts=isPositioned?{}:getPosition(element_0);if(shouldUseSmartColor){if(setPresetAtts({...element_0,...atts}),accessibleColors)return void setAutoColor(accessibleColors);setAutoColor(await calculateAccessibleTextColors({...element_0,...atts}))}else{const addedElement_0=insertElement("text",{...element_0,...atts});lastPresetRef.current={versionNumber:null,element:addedElement_0}}}),[getPosition,calculateAccessibleTextColors,shouldUseSmartColor,insertElement]);return{getPosition,insertPreset}};const src_translateToInclusiveList=function translateToInclusiveList(options){switch(options.length){case 0:return"";case 1:return options[0];case 2:return(0,sprintf.A)((0,i18n.__)("%1$s and %2$s","web-stories"),options[0],options[1]);default:return(0,sprintf.A)((0,i18n.__)("%1$s, and %2$s","web-stories"),options.slice(0,options.length-1).join((0,i18n.__)(", ","web-stories")),options[options.length-1])}};var useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts");const FullWidthWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"common__FullWidthWrapper",componentId:"sc-10l2iqe-0"})(["margin-left:-",";margin-right:-",";"],panes_shared.z7,panes_shared.z7);const virtualPaneContainer=(0,styled_components_browser_esm.AH)(["margin-top:38px;padding-top:2px;width:100%;height:100%;"]),VirtualizedWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"virtualizedPanelGrid__VirtualizedWrapper",componentId:"sc-qhv222-0"})(["height:",";width:100%;position:relative;"],(({height})=>`${height}px`));VirtualizedWrapper.propTypes={height:prop_types_default().number.isRequired};const VirtualizedContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"virtualizedPanelGrid__VirtualizedContainer",componentId:"sc-qhv222-1"})(["position:absolute;top:0;left:",";display:grid;grid-template-columns:1fr 1fr;grid-template-columns:",";grid-template-rows:",";gap:","px;width:calc(100% - ",");height:100%;margin-top:4px;"],(({paneLeft=0})=>paneLeft),(({columnWidth})=>`\n    repeat(auto-fill, ${columnWidth}px)`),(({rowHeight})=>`minmax(${rowHeight}px, auto)`),(({rowGap=12})=>rowGap),(({paneLeft=0})=>paneLeft));VirtualizedContainer.propTypes={columnWidth:prop_types_default().number.isRequired,rowHeight:prop_types_default().number.isRequired,rowGap:prop_types_default().number,paneLeft:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])};var useFocusCanvas=__webpack_require__("./packages/story-editor/src/components/canvas/useFocusCanvas.ts");var desert_bw=__webpack_require__("./packages/design-system/src/images/desert_bw.svg");const emptyContentMessage_Message=styled_components_browser_esm.Ay.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-vwmhk4-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:8vh auto;text-align:center;*{text-align:center;margin:0 auto;}"]),EmptyImage=(0,styled_components_browser_esm.Ay)(desert_bw.A).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-vwmhk4-1"})(["margin-bottom:48px;"]);function EmptyContentMessage(t0){const $=(0,dist.c)(7);let children,props,t1,t2;return $[0]!==t0?(({children,...props}=t0),$[0]=t0,$[1]=children,$[2]=props):(children=$[1],props=$[2]),$[3]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(EmptyImage,{"aria-hidden":!0,width:274,height:118}),$[3]=t1):t1=$[3],$[4]!==children||$[5]!==props?(t2=react.createElement(emptyContentMessage_Message,props,t1,children),$[4]=children,$[5]=props,$[6]=t2):t2=$[6],t2}EmptyContentMessage.propTypes={children:prop_types_default().node};const components_emptyContentMessage=EmptyContentMessage;function react_virtual_extends(){return react_virtual_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},react_virtual_extends.apply(this,arguments)}EmptyContentMessage.__docgenInfo={description:"",methods:[],displayName:"EmptyContentMessage",props:{children:{description:"",type:{name:"node"},required:!1}}};var rafId,props=["bottom","height","left","right","top","width"],observedNodes=new Map,run=function run(){var changedStates=[];observedNodes.forEach((function(state,node){var newRect=node.getBoundingClientRect();(function rectChanged(a,b){return void 0===a&&(a={}),void 0===b&&(b={}),props.some((function(prop){return a[prop]!==b[prop]}))})(newRect,state.rect)&&(state.rect=newRect,changedStates.push(state))})),changedStates.forEach((function(state){state.callbacks.forEach((function(cb){return cb(state.rect)}))})),rafId=window.requestAnimationFrame(run)};var useIsomorphicLayoutEffect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect;function useRect(nodeRef,initialRect){void 0===initialRect&&(initialRect={width:0,height:0});var _React$useState=react.useState(nodeRef.current),element=_React$useState[0],setElement=_React$useState[1],_React$useReducer=react.useReducer(rectReducer,initialRect),rect=_React$useReducer[0],dispatch=_React$useReducer[1],initialRectSet=react.useRef(!1);return useIsomorphicLayoutEffect((function(){nodeRef.current!==element&&setElement(nodeRef.current)})),useIsomorphicLayoutEffect((function(){if(element&&!initialRectSet.current){initialRectSet.current=!0;var _rect=element.getBoundingClientRect();dispatch({rect:_rect})}}),[element]),react.useEffect((function(){if(element){var observer=function observeRect(node,cb){return{observe:function observe(){var wasEmpty=0===observedNodes.size;observedNodes.has(node)?observedNodes.get(node).callbacks.push(cb):observedNodes.set(node,{rect:void 0,hasRectChanged:!1,callbacks:[cb]}),wasEmpty&&run()},unobserve:function unobserve(){var state=observedNodes.get(node);if(state){var index=state.callbacks.indexOf(cb);index>=0&&state.callbacks.splice(index,1),state.callbacks.length||observedNodes.delete(node),observedNodes.size||cancelAnimationFrame(rafId)}}}}(element,(function(rect){dispatch({rect})}));return observer.observe(),function(){observer.unobserve()}}}),[element]),rect}function rectReducer(state,action){var rect=action.rect;return state.height!==rect.height||state.width!==rect.width?rect:state}var defaultEstimateSize=function defaultEstimateSize(){return 50},defaultKeyExtractor=function defaultKeyExtractor(index){return index},defaultMeasureSize=function defaultMeasureSize(el,horizontal){return el[horizontal?"offsetWidth":"offsetHeight"]},defaultRangeExtractor=function defaultRangeExtractor(range){for(var start=Math.max(range.start-range.overscan,0),end=Math.min(range.end+range.overscan,range.size-1),arr=[],i=start;i<=end;i++)arr.push(i);return arr};function useVirtual(_ref){var _measurements,_ref$size=_ref.size,size=void 0===_ref$size?0:_ref$size,_ref$estimateSize=_ref.estimateSize,estimateSize=void 0===_ref$estimateSize?defaultEstimateSize:_ref$estimateSize,_ref$overscan=_ref.overscan,overscan=void 0===_ref$overscan?1:_ref$overscan,_ref$paddingStart=_ref.paddingStart,paddingStart=void 0===_ref$paddingStart?0:_ref$paddingStart,_ref$paddingEnd=_ref.paddingEnd,paddingEnd=void 0===_ref$paddingEnd?0:_ref$paddingEnd,parentRef=_ref.parentRef,horizontal=_ref.horizontal,scrollToFn=_ref.scrollToFn,useObserver=_ref.useObserver,initialRect=_ref.initialRect,onScrollElement=_ref.onScrollElement,scrollOffsetFn=_ref.scrollOffsetFn,_ref$keyExtractor=_ref.keyExtractor,keyExtractor=void 0===_ref$keyExtractor?defaultKeyExtractor:_ref$keyExtractor,_ref$measureSize=_ref.measureSize,measureSize=void 0===_ref$measureSize?defaultMeasureSize:_ref$measureSize,_ref$rangeExtractor=_ref.rangeExtractor,rangeExtractor=void 0===_ref$rangeExtractor?defaultRangeExtractor:_ref$rangeExtractor,sizeKey=horizontal?"width":"height",scrollKey=horizontal?"scrollLeft":"scrollTop",latestRef=react.useRef({scrollOffset:0,measurements:[]}),_React$useState=react.useState(0),scrollOffset=_React$useState[0],setScrollOffset=_React$useState[1];latestRef.current.scrollOffset=scrollOffset;var outerSize=(useObserver||useRect)(parentRef,initialRect)[sizeKey];latestRef.current.outerSize=outerSize;var defaultScrollToFn=react.useCallback((function(offset){parentRef.current&&(parentRef.current[scrollKey]=offset)}),[parentRef,scrollKey]),resolvedScrollToFn=scrollToFn||defaultScrollToFn;scrollToFn=react.useCallback((function(offset){resolvedScrollToFn(offset,defaultScrollToFn)}),[defaultScrollToFn,resolvedScrollToFn]);var _React$useState2=react.useState({}),measuredCache=_React$useState2[0],setMeasuredCache=_React$useState2[1],measure=react.useCallback((function(){return setMeasuredCache({})}),[]),pendingMeasuredCacheIndexesRef=react.useRef([]),measurements=react.useMemo((function(){var min=pendingMeasuredCacheIndexesRef.current.length>0?Math.min.apply(Math,pendingMeasuredCacheIndexesRef.current):0;pendingMeasuredCacheIndexesRef.current=[];for(var measurements=latestRef.current.measurements.slice(0,min),i=min;i<size;i++){var key=keyExtractor(i),measuredSize=measuredCache[key],_start=measurements[i-1]?measurements[i-1].end:paddingStart,_size="number"==typeof measuredSize?measuredSize:estimateSize(i),_end=_start+_size;measurements[i]={index:i,start:_start,size:_size,end:_end,key}}return measurements}),[estimateSize,measuredCache,paddingStart,size,keyExtractor]),totalSize=((null==(_measurements=measurements[size-1])?void 0:_measurements.end)||paddingStart)+paddingEnd;latestRef.current.measurements=measurements,latestRef.current.totalSize=totalSize;var element=onScrollElement?onScrollElement.current:parentRef.current,scrollOffsetFnRef=react.useRef(scrollOffsetFn);scrollOffsetFnRef.current=scrollOffsetFn,useIsomorphicLayoutEffect((function(){if(element){var onScroll=function onScroll(event){var offset=scrollOffsetFnRef.current?scrollOffsetFnRef.current(event):element[scrollKey];setScrollOffset(offset)};return onScroll(),element.addEventListener("scroll",onScroll,{capture:!1,passive:!0}),function(){element.removeEventListener("scroll",onScroll)}}setScrollOffset(0)}),[element,scrollKey]);var _calculateRange=function calculateRange(_ref4){var measurements=_ref4.measurements,outerSize=_ref4.outerSize,scrollOffset=_ref4.scrollOffset,size=measurements.length-1,getOffset=function getOffset(index){return measurements[index].start},start=findNearestBinarySearch(0,size,getOffset,scrollOffset),end=start;for(;end<size&&measurements[end].end<scrollOffset+outerSize;)end++;return{start,end}}(latestRef.current),start=_calculateRange.start,end=_calculateRange.end,indexes=react.useMemo((function(){return rangeExtractor({start,end,overscan,size:measurements.length})}),[start,end,overscan,measurements.length,rangeExtractor]),measureSizeRef=react.useRef(measureSize);measureSizeRef.current=measureSize;var virtualItems=react.useMemo((function(){for(var virtualItems=[],_loop=function _loop(k,len){var i=indexes[k],item=react_virtual_extends(react_virtual_extends({},measurements[i]),{},{measureRef:function measureRef(el){if(el){var measuredSize=measureSizeRef.current(el,horizontal);if(measuredSize!==item.size){var _scrollOffset=latestRef.current.scrollOffset;item.start<_scrollOffset&&defaultScrollToFn(_scrollOffset+(measuredSize-item.size)),pendingMeasuredCacheIndexesRef.current.push(i),setMeasuredCache((function(old){var _extends2;return react_virtual_extends(react_virtual_extends({},old),{},((_extends2={})[item.key]=measuredSize,_extends2))}))}}}});virtualItems.push(item)},k=0,len=indexes.length;k<len;k++)_loop(k);return virtualItems}),[indexes,defaultScrollToFn,horizontal,measurements]),mountedRef=react.useRef(!1);useIsomorphicLayoutEffect((function(){mountedRef.current&&setMeasuredCache({}),mountedRef.current=!0}),[estimateSize]);var scrollToOffset=react.useCallback((function(toOffset,_temp){var _ref2$align=(void 0===_temp?{}:_temp).align,align=void 0===_ref2$align?"start":_ref2$align,_latestRef$current=latestRef.current,scrollOffset=_latestRef$current.scrollOffset,outerSize=_latestRef$current.outerSize;"auto"===align&&(align=toOffset<=scrollOffset?"start":toOffset>=scrollOffset+outerSize?"end":"start"),"start"===align?scrollToFn(toOffset):"end"===align?scrollToFn(toOffset-outerSize):"center"===align&&scrollToFn(toOffset-outerSize/2)}),[scrollToFn]),tryScrollToIndex=react.useCallback((function(index,_temp2){var _ref3=void 0===_temp2?{}:_temp2,_ref3$align=_ref3.align,align=void 0===_ref3$align?"auto":_ref3$align,rest=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(_ref3,["align"]),_latestRef$current2=latestRef.current,measurements=_latestRef$current2.measurements,scrollOffset=_latestRef$current2.scrollOffset,outerSize=_latestRef$current2.outerSize,measurement=measurements[Math.max(0,Math.min(index,size-1))];if(measurement){if("auto"===align)if(measurement.end>=scrollOffset+outerSize)align="end";else{if(!(measurement.start<=scrollOffset))return;align="start"}var toOffset="center"===align?measurement.start+measurement.size/2:"end"===align?measurement.end:measurement.start;scrollToOffset(toOffset,react_virtual_extends({align},rest))}}),[scrollToOffset,size]),scrollToIndex=react.useCallback((function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];tryScrollToIndex.apply(void 0,args),requestAnimationFrame((function(){tryScrollToIndex.apply(void 0,args)}))}),[tryScrollToIndex]);return{virtualItems,totalSize,scrollToOffset,scrollToIndex,measure}}var findNearestBinarySearch=function findNearestBinarySearch(low,high,getCurrentValue,value){for(;low<=high;){var middle=(low+high)/2|0,currentValue=getCurrentValue(middle);if(currentValue<value)low=middle+1;else{if(!(currentValue>value))return middle;high=middle-1}}return low>0?low-1:0};var unitsProvider=__webpack_require__("./packages/units/src/unitsProvider.tsx"),layout=__webpack_require__("./packages/story-editor/src/app/layout/index.ts");function getElementContent(content,isForDisplay){return content?{content:isForDisplay?`<span style="color: #fff">${content}<span>`:content}:{}}function TextSetContainer(t0){const $=(0,dist.c)(3),{pageSize,children}=t0;let t1;return $[0]!==children||$[1]!==pageSize?(t1=pageSize?react.createElement(unitsProvider.A,{pageSize},children):children,$[0]=children,$[1]=pageSize,$[2]=t1):t1=$[2],t1}function TextSetElements(t0){const $=(0,dist.c)(12),{elements,isForDisplay,pageSize}=t0,{textSetHeight,textSetWidth}=elements[0],xOffset=isForDisplay?(src_constants.bj-textSetWidth)/2:0,yOffset=isForDisplay?(src_constants.bj-textSetHeight)/2:0;let t1,t2;if($[0]!==elements||$[1]!==isForDisplay||$[2]!==xOffset||$[3]!==yOffset){let t2;$[5]!==isForDisplay||$[6]!==xOffset||$[7]!==yOffset?(t2=t3=>{const{id,content,normalizedOffsetX,normalizedOffsetY,...rest}=t3;return react.createElement(displayElement.A,{previewMode:!0,key:id,element:{id,...getElementContent(content,isForDisplay),...rest,x:normalizedOffsetX+xOffset,y:normalizedOffsetY+yOffset}})},$[5]=isForDisplay,$[6]=xOffset,$[7]=yOffset,$[8]=t2):t2=$[8],t1=elements.map(t2),$[0]=elements,$[1]=isForDisplay,$[2]=xOffset,$[3]=yOffset,$[4]=t1}else t1=$[4];return $[9]!==pageSize||$[10]!==t1?(t2=react.createElement(TextSetContainer,{pageSize},t1),$[9]=pageSize,$[10]=t1,$[11]=t2):t2=$[11],t2}TextSetContainer.propTypes={pageSize:propTypes.Ed.size,children:prop_types_default().node.isRequired};const textSetElements=TextSetElements;function textSet_extends(){return textSet_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},textSet_extends.apply(null,arguments)}TextSetElements.__docgenInfo={description:"",methods:[],displayName:"TextSetElements",props:{elements:{description:"",type:{name:"array"},required:!0},pageSize:{description:"",type:{name:"custom",raw:"StoryPropTypes.size"},required:!1},isForDisplay:{description:"",type:{name:"bool"},required:!1}}};const TextSetItem=styled_components_browser_esm.Ay.button.withConfig({displayName:"textSet__TextSetItem",componentId:"sc-1hor9ow-0"})(["border:0;background:none;position:absolute;top:0;height:","px;width:","px;display:flex;align-items:center;justify-content:center;flex-direction:column;transform:",";background-color:",";border-radius:",";cursor:pointer;transition:background-color ",";outline:none;&:focus-visible [role='presentation']{",";}"],story_editor_src_constants.jy,story_editor_src_constants.jy,(({translateX,translateY})=>`translateX(${translateX}px) translateY(${translateY}px)`),(({theme})=>theme.colors.interactiveBg.secondaryNormal),(({theme})=>theme.borders.radius.small),constants.QB,(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),TextSetImg=styled_components_browser_esm.Ay.img.withConfig({displayName:"textSet__TextSetImg",componentId:"sc-1hor9ow-1"})(["width:","px;height:","px;"],story_editor_src_constants.jy,story_editor_src_constants.jy),textSet_DragContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"textSet__DragContainer",componentId:"sc-1hor9ow-2"})(["position:absolute;opacity:0;width:","px;height:","px;background-color:",";"],(({width})=>width),(({height})=>height),(({theme})=>theme.colors.opacity.white24));function TextSet({id,elements,translateY,translateX,isActive,index,...rest},ref){const{insertTextSet}=library_useLibrary((state=>({insertTextSet:state.actions.insertTextSet}))),{cdnURL}=(0,app.UK)(),{pageWidth:pageWidth_0,pageHeight:pageHeight_0}=(0,layout.g)((({state:{pageWidth,pageHeight}})=>({pageWidth,pageHeight}))),onClick=(0,react_src.hb)((()=>{insertTextSet(elements),(0,tracking_src.sx)("insert_textset")}),[elements,insertTextSet]),handleKeyboardPageClick=(0,react_src.hb)((({code})=>{"Enter"!==code&&"Space"!==code||onClick()}),[onClick]);(0,useRovingTabIndex.A)({ref:ref.current});const[isHovering,setIsHovering]=(0,react_src.J0)(!1),{textSetHeight,textSetWidth}=elements[0],dragWidth=(0,dimensions.rs)(textSetWidth,pageWidth_0),dragHeight=(0,dimensions.y6)(textSetHeight,pageHeight_0);return react.createElement(TextSetItem,textSet_extends({translateX,translateY,ref,onKeyUp:handleKeyboardPageClick,onPointerEnter:()=>setIsHovering(!0),onPointerLeave:()=>setIsHovering(!1),tabIndex:0===index?0:-1},rest),react.createElement(TextSetImg,{src:`${cdnURL}images/text-sets/${id}.png`,alt:"",crossOrigin:"anonymous",decoding:"async"}),(isActive||isHovering)&&react.createElement(insertionOverlay.A,null),react.createElement(libraryMoveable.A,{type:"textSet",elements,elementProps:{},onClick,cloneElement:textSet_DragContainer,cloneProps:{width:dragWidth,height:dragHeight,children:react.createElement(textSetElements,{elements,pageSize:{width:pageWidth_0,height:pageHeight_0}})}}))}const TextSetWithRef=(0,react_src.Rf)(TextSet);TextSet.displayName="TextSet";const textSet=TextSetWithRef;TextSet.__docgenInfo={description:"",methods:[],displayName:"TextSet",props:{id:{description:"",type:{name:"string"},required:!0},elements:{description:"",type:{name:"array"},required:!0},translateY:{description:"",type:{name:"number"},required:!0},translateX:{description:"",type:{name:"number"},required:!0},isActive:{description:"",type:{name:"bool"},required:!1},index:{description:"",type:{name:"number"},required:!1}}};const CATEGORIES={contact:(0,i18n._x)("Contact","text set category","web-stories"),editorial:(0,i18n._x)("Editorial","text set category","web-stories"),list:(0,i18n._x)("List","text set category","web-stories"),cover:(0,i18n._x)("Cover","text set category","web-stories"),section_header:(0,i18n._x)("Header","text set category","web-stories"),step:(0,i18n._x)("Steps","text set category","web-stories"),table:(0,i18n._x)("Table","text set category","web-stories"),quote:(0,i18n._x)("Quote","text set category","web-stories")},PANE_TEXT={TITLE:(0,i18n.__)("Text Sets","web-stories"),SWITCH_LABEL:(0,i18n.__)("Match fonts from story","web-stories")},TEXT_SET_PAGE_SIZE={width:story_editor_src_constants.jy,height:story_editor_src_constants.jy/src_constants.iZ};function TextSets({paneRef,filteredTextSets}){const containerRef=(0,react_src.li)(),textSetsRef=(0,react_src.li)({}),textSetIds=(0,react_src.Kr)((()=>filteredTextSets.map((textSet=>textSet.id))),[filteredTextSets]),rowVirtualizer=useVirtual({size:Math.ceil((filteredTextSets||[]).length/2),parentRef:paneRef,estimateSize:(0,react_src.hb)((()=>story_editor_src_constants.jy+12),[]),overscan:4}),columnVirtualizer=useVirtual({horizontal:!0,size:2,parentRef:paneRef,estimateSize:(0,react_src.hb)((()=>story_editor_src_constants.jy+12),[]),overscan:0}),{activeGridItemId,handleGridFocus,handleGridItemFocus,isGridFocused}=function useVirtualizedGridNavigation({containerRef,gridItemRefs,gridItemIds,rowVirtualizer}){const[activeGridItemId,setActiveGridItemId]=(0,react_src.J0)(),[isGridFocused,setIsGridFocused]=(0,react_src.J0)(!1),currentAvailableRows=(0,react_src.Kr)((()=>rowVirtualizer.virtualItems),[rowVirtualizer]),currentAvailableRowsRef=(0,react_src.li)();(0,react_src.vJ)((()=>{currentAvailableRows!==currentAvailableRowsRef?.current&&(currentAvailableRowsRef.current=currentAvailableRows),activeGridItemId&&isGridFocused&&gridItemRefs.current?.[activeGridItemId]?.focus()}),[activeGridItemId,currentAvailableRows,isGridFocused,gridItemRefs]),(0,useRovingTabIndex.A)({ref:containerRef});const handleGridFocus=(0,react_src.hb)((()=>{if(!isGridFocused){const newGridItemId=gridItemRefs.current?.[activeGridItemId]?activeGridItemId:gridItemIds?.[0];setActiveGridItemId(newGridItemId),setIsGridFocused(!0),gridItemRefs.current?.[newGridItemId]?.focus()}}),[activeGridItemId,isGridFocused,gridItemIds,gridItemRefs]),handleGridItemFocus=(0,react_src.hb)((itemId=>{activeGridItemId!==itemId&&setActiveGridItemId(itemId)}),[activeGridItemId]),focusCanvas=(0,useFocusCanvas.A)(),onTabKeyDown=(0,react_src.hb)((()=>{focusCanvas(),setIsGridFocused(!1)}),[focusCanvas]);return(0,keyboard._h)(containerRef,"tab",onTabKeyDown,[onTabKeyDown]),(0,react_src.g$)(containerRef,(()=>{setIsGridFocused(!1)}),[]),(0,react_src.Kr)((()=>({handleGridFocus,handleGridItemFocus,activeGridItemId,isGridFocused})),[activeGridItemId,isGridFocused,handleGridFocus,handleGridItemFocus])}({rowVirtualizer,containerRef,gridItemRefs:textSetsRef,gridItemIds:textSetIds});return react.createElement(unitsProvider.A,{pageSize:TEXT_SET_PAGE_SIZE},react.createElement(VirtualizedWrapper,{height:rowVirtualizer.totalSize},react.createElement(VirtualizedContainer,{height:rowVirtualizer.totalSize,ref:containerRef,columnWidth:story_editor_src_constants.jy,rowHeight:story_editor_src_constants.jy,onFocus:handleGridFocus,role:"group","aria-label":(0,i18n.__)("Text Set Options","web-stories")},rowVirtualizer.virtualItems.map((virtualRow=>columnVirtualizer.virtualItems.map((virtualColumn=>{const gridIndex=(({columnIndex,rowIndex})=>0===columnIndex?2*rowIndex:2*rowIndex+1)({columnIndex:virtualColumn.index,rowIndex:virtualRow.index}),textSet_0=filteredTextSets[gridIndex];if(!textSet_0?.elements)return null;const isActive=activeGridItemId===textSet_0.id&&isGridFocused;return react.createElement(textSet,{key:gridIndex,id:textSet_0.id,"data-testid":`text_set_${textSet_0.id}`,ref:el=>textSetsRef.current[textSet_0.id]=el,translateY:virtualRow.start,translateX:virtualColumn.start,"aria-label":textSet_0.title,isActive,onFocus:()=>handleGridItemFocus(textSet_0.id),elements:textSet_0.elements,index:gridIndex})})))))))}const textSets=TextSets;TextSets.__docgenInfo={description:"",methods:[],displayName:"TextSets",props:{paneRef:{description:"",type:{name:"object"},required:!1},filteredTextSets:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},elements:{name:"array",required:!1},title:{name:"string",required:!1}}}},required:!1}}};const TitleBar=styled_components_browser_esm.Ay.div.withConfig({displayName:"textSetsPane__TitleBar",componentId:"sc-vycaev-0"})(["display:flex;justify-content:space-between;padding:20px 0;"]),TextSetsToggle=styled_components_browser_esm.Ay.div.withConfig({displayName:"textSetsPane__TextSetsToggle",componentId:"sc-vycaev-1"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(({theme})=>theme.colors.fg.secondary)),TextSetsWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"textSetsPane__TextSetsWrapper",componentId:"sc-vycaev-2"})(["",";"],virtualPaneContainer);function TextSetsPane({paneRef}){const{areTextSetsLoading:areTextSetsLoading_0,textSets:textSets_0}=library_useLibrary((({state:{areTextSetsLoading,textSets}})=>({areTextSetsLoading,textSets}))),[showInUse,setShowInUse]=(0,react_src.J0)(!1),trackChangeRef=(0,react_src.li)(!1),allTextSets=(0,react_src.Kr)((()=>Object.values(textSets_0).flat()),[textSets_0]),storyPages=(0,useStory.A)((({state:{pages}})=>pages)),[selectedCat,setSelectedCat]=(0,react_src.J0)(localStore.x.getItemByKey(localStore.$.TEXT_SET_SETTINGS)?.selectedCategory),getTextSetsForInUseFonts=(0,react_src.hb)((()=>{return function getTextSetsForFonts({fonts,textSets}){return textSets.map((currentTextSet=>currentTextSet.elements.reduce(((elementMemo,currentElement)=>elements_src.V7.text(currentElement)?elementMemo||-1!==fonts.indexOf(currentElement.font.family):elementMemo),!1)&&currentTextSet)).filter(Boolean)}({fonts:(pages=storyPages,Array.from(new Set(pages.flatMap((({elements=[]})=>elements.map((element=>elements_src.V7.text(element)?element.font.family:null)))).filter(Boolean)))||[]),textSets:selectedCat?textSets_0[selectedCat]:allTextSets});var pages}),[allTextSets,storyPages,selectedCat,textSets_0]),addIdToTextSets=(0,react_src.hb)(((textSetsArray=[])=>textSetsArray.map((({textSetFonts=[],textSetCategory,elements,id})=>({id,title:(0,sprintf.A)((0,i18n._n)("Text set %1$s with %2$s font","Text set %1$s with %2$s fonts",textSetFonts.length,"web-stories"),CATEGORIES[textSetCategory],src_translateToInclusiveList(textSetFonts)),elements})))),[]),filteredTextSets=(0,react_src.Kr)((()=>addIdToTextSets(showInUse?getTextSetsForInUseFonts():selectedCat?textSets_0?.[selectedCat]:allTextSets)),[selectedCat,textSets_0,allTextSets,addIdToTextSets,getTextSetsForInUseFonts,showInUse]),categories=(0,react_src.Kr)((()=>[{id:null,label:(0,i18n._x)("All","text sets","web-stories")},...Object.keys(textSets_0).map((category=>({id:category,label:CATEGORIES[category]??category})))]),[textSets_0]),speak=(0,useLiveRegion.A)(),handleSelectedCategory=(0,react_src.hb)((selectedCategory=>{setSelectedCat(selectedCategory),speak(null===selectedCategory?(0,i18n.__)("Show all text sets","web-stories"):(0,sprintf.A)((0,i18n.__)("Selected text set filter %s","web-stories"),CATEGORIES[selectedCategory])),localStore.x.setItemByKey(localStore.$.TEXT_SET_SETTINGS,{selectedCategory}),trackChangeRef.current=!0}),[speak]),onChangeShowInUse=(0,react_src.hb)((()=>{requestAnimationFrame((()=>setShowInUse((prevVal=>!prevVal)))),trackChangeRef.current=!0}),[setShowInUse]);(0,react_src.vJ)((()=>{trackChangeRef.current&&(0,tracking_src.sx)("search",{search_type:"textsets",search_term:"",search_category:selectedCat,search_filter:showInUse?"show_in_use":void 0})}),[selectedCat,showInUse]);const sectionId=(0,react_src.Kr)((()=>`section-${(0,v4.A)()}`),[]),toggleId=(0,react_src.Kr)((()=>`toggle_text_sets_${(0,v4.A)()}`),[]),emptyContentMessage=(0,react_src.Kr)((()=>showInUse?(0,i18n.__)("No matching Text Sets available. Try adding text to your story.","web-stories"):(0,i18n.__)("No Text Sets available.","web-stories")),[showInUse]);return react.createElement(section_Container,{id:sectionId},react.createElement(TitleBar,null,react.createElement(headline.$,{as:"h2",size:types.$.XXXSmall},PANE_TEXT.TITLE),react.createElement(TextSetsToggle,null,react.createElement(typography_text.E.Label,{htmlFor:toggleId,size:types.$.Small},PANE_TEXT.SWITCH_LABEL),react.createElement(toggle.A,{id:toggleId,"aria-label":PANE_TEXT.SWITCH_LABEL,name:toggleId,checked:showInUse,onChange:onChangeShowInUse}))),react.createElement(FullWidthWrapper,null,react.createElement(panes_shared.Iy,{items:categories,selectedItemId:selectedCat,selectItem:handleSelectedCategory,deselectItem:()=>handleSelectedCategory(null),ariaLabel:(0,i18n.__)("Select filter for text sets list","web-stories")})),react.createElement(TextSetsWrapper,null,filteredTextSets?.length||areTextSetsLoading_0?react.createElement(textSets,{paneRef,filteredTextSets}):react.createElement(components_emptyContentMessage,null,emptyContentMessage)))}const textSetsPane=TextSetsPane;TextSetsPane.__docgenInfo={description:"",methods:[],displayName:"TextSetsPane",props:{paneRef:{description:"",type:{name:"object"},required:!1}}};var plus=__webpack_require__("./packages/design-system/src/icons/plus.svg"),disclosure=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx"),popup=__webpack_require__("./packages/design-system/src/components/popup/popup.tsx");function useKeyboardNavigation_temp(key,rowLength){switch(key){case"ArrowUp":return-rowLength;case"ArrowDown":return rowLength;case"ArrowLeft":return-1;case"ArrowRight":return 1;default:return 0}}const styleManager_useKeyboardNavigation=function useKeyboardNavigation(t0){const $=(0,dist.c)(9),{activeIndex,setActiveIndex,groupRef}=t0,getIndexDiff=useKeyboardNavigation_temp;let t1,t2,t3;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1={key:["up","down","left","right"]},$[0]=t1):t1=$[0],$[1]!==activeIndex||$[2]!==groupRef.current||$[3]!==setActiveIndex?(t2=t3=>{const{key:key_0}=t3;if(groupRef.current){const diff=getIndexDiff(key_0,2),buttons=groupRef.current.querySelectorAll("button:not([disabled])"),maxIndex=buttons.length-1,val=(activeIndex??0)+diff,newIndex=Math.max(0,Math.min(maxIndex,val));setActiveIndex(newIndex),buttons[newIndex]&&buttons[newIndex].focus()}},$[1]=activeIndex,$[2]=groupRef.current,$[3]=setActiveIndex,$[4]=t2):t2=$[4],$[5]!==activeIndex||$[6]!==groupRef||$[7]!==setActiveIndex?(t3=[activeIndex,setActiveIndex,groupRef],$[5]=activeIndex,$[6]=groupRef,$[7]=setActiveIndex,$[8]=t3):t3=$[8],(0,keyboard._h)(groupRef,t1,t2,t3)};var cross=__webpack_require__("./packages/design-system/src/icons/cross.svg");const PresetButton=styled_components_browser_esm.Ay.button.withConfig({displayName:"styleItem__PresetButton",componentId:"sc-157dmik-0"})(["background-color:",";border-color:transparent;position:relative;cursor:pointer;border-width:0;border-radius:4px;padding:3px;height:100%;width:100%;display:flex;justify-content:center;align-items:center;> svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));}",""],(({theme})=>theme.colors.interactiveBg.secondaryNormal),32,32,16,16,(({theme})=>theme.colors.fg.primary),shared_styles.Y),HighLight=styled_components_browser_esm.Ay.span.withConfig({displayName:"styleItem__HighLight",componentId:"sc-157dmik-1"})(["padding:0 2px;"," box-decoration-break:clone;"],(({background})=>(0,generatePatternStyles.A)(background))),TextWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleItem__TextWrapper",componentId:"sc-157dmik-2"})(["position:relative;display:inline-block;line-height:","px;max-height:","px;overflow:hidden;border-radius:4px;padding:3px;max-width:100%;"," font-size:12px;",""],20,43,(({styles})=>styles),(({background})=>background?(0,generatePatternStyles.A)(background):null));function StyleItem(t0){const $=(0,dist.c)(33),{style,i,activeIndex,handleOnClick,isEditMode,activeItemOverlay,applyLabel:t1}=t0;let t2;$[0]!==t1?(t2=void 0===t1?(0,i18n.__)("Apply style","web-stories"):t1,$[0]=t1,$[1]=t2):t2=$[1];const applyLabel=t2,selectedElements=(0,app_story.P3)(styleItem_temp),[isActive,setIsActive]=(0,react_src.J0)(!1);let t3;$[2]!==activeItemOverlay||$[3]!==setIsActive?(t3=()=>{activeItemOverlay&&setIsActive(!0)},$[2]=activeItemOverlay,$[3]=setIsActive,$[4]=t3):t3=$[4];const makeActive=t3;let t4;$[5]!==activeItemOverlay||$[6]!==setIsActive?(t4=()=>{activeItemOverlay&&setIsActive(!1)},$[5]=activeItemOverlay,$[6]=setIsActive,$[7]=t4):t4=$[7];const makeInactive=t4;if(!style)return null;let t5;$[8]!==selectedElements[0]?(t5=selectedElements[0]?.content?(0,dom_src._e)(selectedElements[0].content):(0,i18n.__)("Lorem ipsum dolor sit amet","web-stories"),$[8]=selectedElements[0],$[9]=t5):t5=$[9];const textContent=t5;let t6;$[10]!==style||$[11]!==textContent?(t6=()=>{const isHighLight=style.backgroundTextMode===elements_src.xu.HIGHLIGHT,isFill=style.backgroundTextMode===elements_src.xu.FILL;return react.createElement(TextWrapper,{styles:(0,presetUtils.uV)(style,!0),background:isFill?style.backgroundColor:null},isHighLight?react.createElement(HighLight,{background:style.backgroundColor},textContent):textContent)},$[10]=style,$[11]=textContent,$[12]=t6):t6=$[12];const getStylePresetText=t6,t7=activeIndex===i?0:-1;let t8,t9,t10,t11;$[13]!==handleOnClick||$[14]!==style?(t8=()=>handleOnClick(style),$[13]=handleOnClick,$[14]=style,$[15]=t8):t8=$[15],$[16]!==applyLabel||$[17]!==isEditMode?(t9=isEditMode?(0,i18n.__)("Delete style","web-stories"):applyLabel,$[16]=applyLabel,$[17]=isEditMode,$[18]=t9):t9=$[18],$[19]!==getStylePresetText?(t10=getStylePresetText(),$[19]=getStylePresetText,$[20]=t10):t10=$[20],$[21]!==isEditMode?(t11=isEditMode&&react.createElement(cross.A,null),$[21]=isEditMode,$[22]=t11):t11=$[22];const t12=!isEditMode&&isActive&&activeItemOverlay;let t13;return $[23]!==makeActive||$[24]!==makeInactive||$[25]!==style||$[26]!==t10||$[27]!==t11||$[28]!==t12||$[29]!==t7||$[30]!==t8||$[31]!==t9?(t13=react.createElement(PresetButton,{tabIndex:t7,style,onClick:t8,onPointerEnter:makeActive,onFocus:makeActive,onPointerLeave:makeInactive,onBlur:makeInactive,"aria-label":t9},t10,t11,t12),$[23]=makeActive,$[24]=makeInactive,$[25]=style,$[26]=t10,$[27]=t11,$[28]=t12,$[29]=t7,$[30]=t8,$[31]=t9,$[32]=t13):t13=$[32],t13}function styleItem_temp(t0){const{state}=t0;return state.selectedElements}const styleItem=StyleItem;function styleGroup_extends(){return styleGroup_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},styleGroup_extends.apply(null,arguments)}StyleItem.__docgenInfo={description:"",methods:[],displayName:"StyleItem",props:{applyLabel:{defaultValue:{value:"__('Apply style', 'web-stories')",computed:!0},description:"",type:{name:"string"},required:!1},style:{description:"",type:{name:"object"},required:!0},i:{description:"",type:{name:"number"},required:!0},activeIndex:{description:"",type:{name:"number"},required:!1},handleOnClick:{description:"",type:{name:"func"},required:!0},isEditMode:{description:"",type:{name:"bool"},required:!0},activeItemOverlay:{description:"",type:{name:"node"},required:!1}}};const Group=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleGroup__Group",componentId:"sc-1cojpnq-0"})(["display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:16px;"]),ButtonWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleGroup__ButtonWrapper",componentId:"sc-1cojpnq-1"})(["height:","px;width:","px;"],story_editor_src_constants.IX,(({width})=>width));function StyleGroup(t0){const $=(0,dist.c)(26);let handleClick,rest,styles,t1,t2;$[0]!==t0?(({styles,isEditMode:t1,handleClick,buttonWidth:t2,...rest}=t0),$[0]=t0,$[1]=handleClick,$[2]=rest,$[3]=styles,$[4]=t1,$[5]=t2):(handleClick=$[1],rest=$[2],styles=$[3],t1=$[4],t2=$[5]);const isEditMode=void 0!==t1&&t1,buttonWidth=void 0===t2?128:t2,[activeIndex,setActiveIndex]=(0,react_src.J0)(0),groupRef=(0,react_src.li)(null);let t3,t4,t5;if($[6]!==activeIndex||$[7]!==groupRef||$[8]!==setActiveIndex?(t3={activeIndex,setActiveIndex,groupRef,type:story_editor_src_constants.aS.STYLE},$[6]=activeIndex,$[7]=groupRef,$[8]=setActiveIndex,$[9]=t3):t3=$[9],styleManager_useKeyboardNavigation(t3),$[10]!==activeIndex||$[11]!==buttonWidth||$[12]!==handleClick||$[13]!==isEditMode||$[14]!==rest||$[15]!==styles){let t5;$[17]!==activeIndex||$[18]!==buttonWidth||$[19]!==handleClick||$[20]!==isEditMode||$[21]!==rest?(t5=(style,i)=>react.createElement(ButtonWrapper,{key:JSON.stringify(style),width:buttonWidth},react.createElement(styleItem,styleGroup_extends({style,i,activeIndex,handleOnClick:handleClick,isEditMode},rest))),$[17]=activeIndex,$[18]=buttonWidth,$[19]=handleClick,$[20]=isEditMode,$[21]=rest,$[22]=t5):t5=$[22],t4=styles.map(t5),$[10]=activeIndex,$[11]=buttonWidth,$[12]=handleClick,$[13]=isEditMode,$[14]=rest,$[15]=styles,$[16]=t4}else t4=$[16];return $[23]!==groupRef||$[24]!==t4?(t5=react.createElement(Group,{ref:groupRef},t4),$[23]=groupRef,$[24]=t4,$[25]=t5):t5=$[25],t5}StyleGroup.propTypes={styles:prop_types_default().array.isRequired,handleClick:prop_types_default().func.isRequired,isEditMode:prop_types_default().bool,buttonWidth:prop_types_default().number};const styleGroup=StyleGroup;StyleGroup.__docgenInfo={description:"",methods:[],displayName:"StyleGroup",props:{isEditMode:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},buttonWidth:{defaultValue:{value:"128",computed:!1},description:"",type:{name:"number"},required:!1},styles:{description:"",type:{name:"array"},required:!0},handleClick:{description:"",type:{name:"func"},required:!0}}};var CSSTransition=__webpack_require__("./node_modules/react-transition-group/esm/CSSTransition.js"),useFocusTrapping=__webpack_require__("./packages/story-editor/src/utils/useFocusTrapping.js"),pencil=__webpack_require__("./packages/design-system/src/icons/pencil.svg");function header_extends(){return header_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},header_extends.apply(null,arguments)}const header_Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"header__Wrapper",componentId:"sc-10q8amw-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(({theme})=>theme.colors.divider.tertiary)),Actions=styled_components_browser_esm.Ay.div.withConfig({displayName:"header__Actions",componentId:"sc-10q8amw-1"})(["display:flex;margin-left:auto;"]),StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"header__StyledButton",componentId:"sc-10q8amw-2"})(["margin-left:8px;",";"],shared_styles.Y);function header_Header(t0){const $=(0,dist.c)(23),{children,handleClose,isEditMode:t1,setIsEditMode:t2}=t0,isEditMode=void 0!==t1&&t1,setIsEditMode=void 0===t2?noop.l:t2,ref=(0,react_src.li)();let t3,t4,t5,t6;$[0]!==ref.current?(t3=()=>{ref.current?.focus()},$[0]=ref.current,$[1]=t3):t3=$[1],$[2]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[2]=t4):t4=$[2],(0,react_src.vJ)(t3,t4),$[3]!==isEditMode||$[4]!==setIsEditMode?(t5=evt=>{evt.stopPropagation(),setIsEditMode(!isEditMode)},$[3]=isEditMode,$[4]=setIsEditMode,$[5]=t5):t5=$[5],$[6]!==isEditMode||$[7]!==t5?(t6={type:constants.VQ.Tertiary,size:constants.Mp.Small,onClick:t5,isEditMode},$[6]=isEditMode,$[7]=t5,$[8]=t6):t6=$[8];const buttonProps=t6;let t7,t8,t9,t10,t11,t12;return $[9]!==buttonProps||$[10]!==isEditMode?(t7=isEditMode?react.createElement(StyledButton,header_extends({},buttonProps,{variant:constants.Ak.Rectangle,"aria-label":(0,i18n.__)("Exit edit mode","web-stories")}),(0,i18n.__)("Done","web-stories")):react.createElement(StyledButton,header_extends({},buttonProps,{variant:constants.Ak.Square,"aria-label":(0,i18n.__)("Edit style","web-stories")}),react.createElement(pencil.A,null)),$[9]=buttonProps,$[10]=isEditMode,$[11]=t7):t7=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Close","web-stories"),$[12]=t8):t8=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(cross.A,null),$[13]=t9):t9=$[13],$[14]!==handleClose||$[15]!==ref?(t10=react.createElement(StyledButton,{"aria-label":t8,onClick:handleClose,type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,ref},t9),$[14]=handleClose,$[15]=ref,$[16]=t10):t10=$[16],$[17]!==t10||$[18]!==t7?(t11=react.createElement(Actions,null,t7,t10),$[17]=t10,$[18]=t7,$[19]=t11):t11=$[19],$[20]!==children||$[21]!==t11?(t12=react.createElement(header_Wrapper,null,children,t11),$[20]=children,$[21]=t11,$[22]=t12):t12=$[22],t12}header_Header.propTypes={children:prop_types_default().node,handleClose:prop_types_default().func.isRequired,isEditMode:prop_types_default().bool,setIsEditMode:prop_types_default().func,hasPresets:prop_types_default().bool};const header=header_Header;header_Header.__docgenInfo={description:"",methods:[],displayName:"Header",props:{isEditMode:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},setIsEditMode:{defaultValue:{value:"function noop() {\n  return undefined;\n}",computed:!1},description:"",type:{name:"func"},required:!1},children:{description:"",type:{name:"node"},required:!1},handleClose:{description:"",type:{name:"func"},required:!0},hasPresets:{description:"",type:{name:"bool"},required:!1}}};var checkbox_checkbox=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx");const STORAGE_KEY="DELETE_STYLE_PRESET_DIALOG_DISMISSED",confirmationDialog_Label=styled_components_browser_esm.Ay.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-ezab89-0"})(["margin-left:12px;"]),CheckboxWrapper=styled_components_browser_esm.Ay.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-ezab89-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(({theme})=>theme.colors.divider.primary));function ConfirmationDialog(t0){const $=(0,dist.c)(18),{onClose,onPrimary}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=localStore.x.getItemByKey(localStore.$[STORAGE_KEY]),$[0]=t1):t1=$[0];const[isDialogDismissed,setIsDialogDismissed]=(0,react_src.J0)(t1);let t2;$[1]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("This is a global style. Deleting this style will remove it from the Saved Styles across all stories and the style will no longer be available to any other users on the site.","web-stories"),$[1]=t2):t2=$[1];const dialogText=t2,cbId=`cb-${(0,v4.A)()}`;let t3,t4,t5,t6,t7,t8,t9,t10;return $[2]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Cancel","web-stories"),$[2]=t3):t3=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Delete","web-stories"),t5=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},dialogText),$[3]=t4,$[4]=t5):(t4=$[3],t5=$[4]),$[5]!==isDialogDismissed||$[6]!==setIsDialogDismissed?(t6=()=>{localStore.x.setItemByKey(localStore.$[STORAGE_KEY],!isDialogDismissed),setIsDialogDismissed(!isDialogDismissed)},$[5]=isDialogDismissed,$[6]=setIsDialogDismissed,$[7]=t6):t6=$[7],$[8]!==isDialogDismissed||$[9]!==t6?(t7=react.createElement(checkbox_checkbox.A,{id:cbId,checked:isDialogDismissed,onChange:t6}),$[8]=isDialogDismissed,$[9]=t6,$[10]=t7):t7=$[10],$[11]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(confirmationDialog_Label,{htmlFor:cbId},react.createElement(typography_text.E.Span,{size:types.$.Small},(0,i18n.__)("Don't ask for confirmation again.","web-stories"))),$[11]=t8):t8=$[11],$[12]!==t7?(t9=react.createElement(CheckboxWrapper,null,t7,t8),$[12]=t7,$[13]=t9):t9=$[13],$[14]!==onClose||$[15]!==onPrimary||$[16]!==t9?(t10=react.createElement(dialog.A,{isOpen:!0,onClose,secondaryText:t3,onPrimary,primaryText:t4},t5,t9),$[14]=onClose,$[15]=onPrimary,$[16]=t9,$[17]=t10):t10=$[17],t10}ConfirmationDialog.propTypes={onClose:prop_types_default().func.isRequired,onPrimary:prop_types_default().func.isRequired};const confirmationDialog=ConfirmationDialog;function styleManager_extends(){return styleManager_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},styleManager_extends.apply(null,arguments)}ConfirmationDialog.__docgenInfo={description:"",methods:[],displayName:"ConfirmationDialog",props:{onClose:{description:"",type:{name:"func"},required:!0},onPrimary:{description:"",type:{name:"func"},required:!0}}};const styleManager_Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleManager__Container",componentId:"sc-4hlmhs-0"})(["border-radius:8px;background:",";width:256px;user-select:none;display:flex;flex-direction:column;align-items:stretch;overflow:hidden;&.style-manager-appear{opacity:0.01;margin-top:-10px;&.style-manager-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(({theme})=>theme.colors.bg.secondary)),Body=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleManager__Body",componentId:"sc-4hlmhs-1"})(["display:flex;margin:8px 12px 16px;"]),styleManager_StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"styleManager__StyledText",componentId:"sc-4hlmhs-2"})(["margin:0 0 0 8px;color:",";"],(({theme})=>theme.colors.fg.primary));function StyleManager(t0){const $=(0,dist.c)(52);let applyStyle,onClose,rest,styles;$[0]!==t0?(({styles,onClose,applyStyle,...rest}=t0),$[0]=t0,$[1]=applyStyle,$[2]=onClose,$[3]=rest,$[4]=styles):(applyStyle=$[1],onClose=$[2],rest=$[3],styles=$[4]);const[isEditMode,setIsEditMode]=(0,react_src.J0)(!1),[showDialog,setShowDialog]=(0,react_src.J0)(!1),[toDelete,setToDelete]=(0,react_src.J0)(null),containerRef=(0,react_src.li)(null),previousFocus=(0,react_src.li)(document.activeElement);let t1,t2;$[5]!==onClose||$[6]!==previousFocus.current?(t1=evt=>{previousFocus.current&&previousFocus.current.focus(),onClose(evt)},$[5]=onClose,$[6]=previousFocus.current,$[7]=t1):t1=$[7],$[8]!==onClose?(t2=[onClose],$[8]=onClose,$[9]=t2):t2=$[9];const handleCloseAndRefocus=(0,react_src.hb)(t1,t2);let t3;(0,keyboard._h)(containerRef,"esc",handleCloseAndRefocus),$[10]!==handleCloseAndRefocus?(t3={onEmpty:handleCloseAndRefocus},$[10]=handleCloseAndRefocus,$[11]=t3):t3=$[11];const deleteStyle=useDeleteStyle(t3);let t4;$[12]!==onClose||$[13]!==showDialog?(t4=()=>{showDialog||onClose()},$[12]=onClose,$[13]=showDialog,$[14]=t4):t4=$[14];const maybeClose=t4;let t5,t6,t7;$[15]!==showDialog?(t5=[showDialog],$[15]=showDialog,$[16]=t5):t5=$[16],(0,react_src.g$)(containerRef,maybeClose,t5),$[17]!==containerRef?(t6={ref:containerRef},$[17]=containerRef,$[18]=t6):t6=$[18],(0,useFocusTrapping.A)(t6),$[19]!==applyStyle||$[20]!==deleteStyle||$[21]!==isEditMode||$[22]!==setShowDialog||$[23]!==setToDelete?(t7=style=>{if(!isEditMode)return void applyStyle(style);localStore.x.getItemByKey(localStore.$[STORAGE_KEY])?deleteStyle(style):(setShowDialog(!0),setToDelete(style))},$[19]=applyStyle,$[20]=deleteStyle,$[21]=isEditMode,$[22]=setShowDialog,$[23]=setToDelete,$[24]=t7):t7=$[24];const handleClick=t7;let t8,t9,t10,t11,t12,t13,t14,t15;return $[25]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Style presets manager","web-stories"),$[25]=t8):t8=$[25],$[26]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(styleManager_StyledText,null,(0,i18n.__)("Saved Styles","web-stories")),$[26]=t9):t9=$[26],$[27]!==handleCloseAndRefocus||$[28]!==isEditMode||$[29]!==setIsEditMode?(t10=react.createElement(header,{handleClose:handleCloseAndRefocus,isEditMode,setIsEditMode},t9),$[27]=handleCloseAndRefocus,$[28]=isEditMode,$[29]=setIsEditMode,$[30]=t10):t10=$[30],$[31]!==styles?(t11=[...styles].reverse(),$[31]=styles,$[32]=t11):t11=$[32],$[33]!==handleClick||$[34]!==isEditMode||$[35]!==rest||$[36]!==t11?(t12=react.createElement(Body,null,react.createElement(styleGroup,styleManager_extends({styles:t11,handleClick,isEditMode,buttonWidth:106},rest))),$[33]=handleClick,$[34]=isEditMode,$[35]=rest,$[36]=t11,$[37]=t12):t12=$[37],$[38]!==deleteStyle||$[39]!==setShowDialog||$[40]!==setToDelete||$[41]!==showDialog||$[42]!==toDelete?(t13=showDialog&&react.createElement(confirmationDialog,{onClose:()=>setShowDialog(!1),onPrimary:()=>{deleteStyle(toDelete),setToDelete(null),setShowDialog(!1)}}),$[38]=deleteStyle,$[39]=setShowDialog,$[40]=setToDelete,$[41]=showDialog,$[42]=toDelete,$[43]=t13):t13=$[43],$[44]!==containerRef||$[45]!==t10||$[46]!==t12||$[47]!==t13?(t14=react.createElement(styleManager_Container,{role:"dialog","aria-label":t8,ref:containerRef},t10,t12,t13),$[44]=containerRef,$[45]=t10,$[46]=t12,$[47]=t13,$[48]=t14):t14=$[48],$[49]!==containerRef||$[50]!==t14?(t15=react.createElement(CSSTransition.A,{nodeRef:containerRef,in:!0,appear:!0,classNames:"style-manager",timeout:300},t14),$[49]=containerRef,$[50]=t14,$[51]=t15):t15=$[51],t15}StyleManager.propTypes={styles:prop_types_default().array.isRequired,onClose:prop_types_default().func.isRequired,applyStyle:prop_types_default().func.isRequired};const styleManager=StyleManager;StyleManager.__docgenInfo={description:"",methods:[],displayName:"StyleManager",props:{styles:{description:"",type:{name:"array"},required:!0},onClose:{description:"",type:{name:"func"},required:!0},applyStyle:{description:"",type:{name:"func"},required:!0}}};const NoStylesWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleManager__NoStylesWrapper",componentId:"sc-1u9p583-0"})(["display:flex;justify-content:center;align-items:center;width:calc(100% + 32px);margin:0 0 -8px -16px;background-color:",";height:64px;"],(({theme})=>theme.colors.opacity.black24)),MoreButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Plain,size:constants.Mp.Small,variant:constants.Ak.Rectangle}).withConfig({displayName:"styleManager__MoreButton",componentId:"sc-1u9p583-1"})(["",";margin:12px 0;padding:0 16px;justify-content:center;align-self:center;width:100%;svg{transform:rotate(-90deg);height:32px;width:32px;margin-left:-4px;}"],shared_styles.Y);function stylePresets_extends(){return stylePresets_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},stylePresets_extends.apply(null,arguments)}const SectionContainer=(0,styled_components_browser_esm.Ay)(section_Container).withConfig({displayName:"stylePresets__SectionContainer",componentId:"sc-bczcw0-0"})(["padding:16px 0;margin-bottom:-24px;border-top:1px solid ",";border-bottom:1px solid ",";"],(({theme})=>theme.colors.divider.tertiary),(({theme})=>theme.colors.divider.tertiary)),stylePresets_TitleBar=styled_components_browser_esm.Ay.div.withConfig({displayName:"stylePresets__TitleBar",componentId:"sc-bczcw0-1"})(["display:flex;padding-bottom:16px;justify-content:space-between;align-items:center;"]),StylesWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-bczcw0-2"})([""]),stylePresets_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-bczcw0-3"})(["margin-left:auto;"]),NoStylesText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-bczcw0-4"})(["color:",";"],(({theme})=>theme.colors.fg.tertiary)),SPACING={x:40};function PresetPanel(){const $=(0,dist.c)(37),{textStyles,isText,updateSelectedElements}=(0,app.P3)(stylePresets_temp),{insertElement}=library_useLibrary(stylePresets_temp2);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=(0,rich_text_src.$d)(),$[0]=t0):t0=$[0];const{setColor,setFontWeight,setLetterSpacing,toggleItalic,toggleUnderline}=t0,buttonRef=(0,react_src.li)(null),stylesRef=(0,react_src.li)(null),[isPopupOpen,setIsPopupOpen]=(0,react_src.J0)(!1),hasPresets=textStyles.length>0;let t1,t2;$[1]!==updateSelectedElements?(t1=update=>{updateSelectedElements({properties:element=>{const updates=(0,updateProperties.A)(element,update,!0),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...element,...updates});return{...updates,...sizeUpdates}}})},t2=[updateSelectedElements],$[1]=updateSelectedElements,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]);const pushUpdate=(0,react_src.hb)(t1,t2);let t3;$[4]!==pushUpdate?(t3={pushUpdate},$[4]=pushUpdate,$[5]=t3):t3=$[5];const handleApplyStyle=styleManager_useApplyStyle(t3);let t4;$[6]===Symbol.for("react.memo_cache_sentinel")?(t4={presetType:story_editor_src_constants.aS.STYLE},$[6]=t4):t4=$[6];const{addGlobalPreset}=(0,useAddPreset.A)(t4);let t5;$[7]!==insertElement?(t5=preset=>{const{color,fontWeight,isItalic,isUnderline,letterSpacing}=preset;let content=textPresets.C.content;content=setColor(content,color),content=setFontWeight(content,fontWeight),content=toggleItalic(content,isItalic),content=toggleUnderline(content,isUnderline),content=setLetterSpacing(content,letterSpacing),insertElement("text",{...textPresets.C,...preset,content})},$[7]=insertElement,$[8]=t5):t5=$[8];const addStyledText=t5;let t6;$[9]!==addStyledText||$[10]!==handleApplyStyle||$[11]!==isText||$[12]!==setIsPopupOpen?(t6=preset_0=>{isText?handleApplyStyle(preset_0):(addStyledText(preset_0),setIsPopupOpen(!1))},$[9]=addStyledText,$[10]=handleApplyStyle,$[11]=isText,$[12]=setIsPopupOpen,$[13]=t6):t6=$[13];const handlePresetClick=t6;let t7;$[14]!==isText?(t7=isText?{}:{activeItemOverlay:react.createElement(insertionOverlay.A,null),applyLabel:(0,i18n.__)("Add new text","web-stories")},$[14]=isText,$[15]=t7):t7=$[15];const styleItemProps=t7;let t8,t9;$[16]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(headline.$,{as:"h2",size:types.$.XXXSmall},(0,i18n.__)("Saved Styles","web-stories")),$[16]=t8):t8=$[16],$[17]===Symbol.for("react.memo_cache_sentinel")?(t9=(0,i18n.__)("Add style","web-stories"),$[17]=t9):t9=$[17];const t10=!isText;let t11,t12,t13,t14,t15;return $[18]===Symbol.for("react.memo_cache_sentinel")?(t11=react.createElement(plus.A,null),$[18]=t11):t11=$[18],$[19]!==addGlobalPreset||$[20]!==t10?(t12=react.createElement(stylePresets_TitleBar,null,t8,react.createElement(stylePresets_StyledButton,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,onClick:addGlobalPreset,"aria-label":t9,disabled:t10},t11)),$[19]=addGlobalPreset,$[20]=t10,$[21]=t12):t12=$[21],$[22]!==buttonRef||$[23]!==handlePresetClick||$[24]!==hasPresets||$[25]!==isPopupOpen||$[26]!==setIsPopupOpen||$[27]!==styleItemProps||$[28]!==stylesRef||$[29]!==textStyles?(t13=hasPresets&&react.createElement(react.Fragment,null,react.createElement(StylesWrapper,{ref:stylesRef},react.createElement(styleGroup,stylePresets_extends({styles:[...textStyles].reverse().slice(0,2),handleClick:handlePresetClick,buttonWidth:150},styleItemProps))),react.createElement(MoreButton,{ref:buttonRef,onClick:()=>setIsPopupOpen(!0),"aria-haspopup":"dialog","aria-expanded":isPopupOpen},(0,i18n.__)("More styles","web-stories"),react.createElement(disclosure.A,{$isOpen:isPopupOpen})),react.createElement(popup.A,{anchor:buttonRef,isOpen:isPopupOpen,placement:popup_constants.W.RightStart,spacing:SPACING,renderContents:()=>react.createElement(styleManager,stylePresets_extends({styles:textStyles,applyStyle:handlePresetClick,onClose:()=>setIsPopupOpen(!1)},styleItemProps))})),$[22]=buttonRef,$[23]=handlePresetClick,$[24]=hasPresets,$[25]=isPopupOpen,$[26]=setIsPopupOpen,$[27]=styleItemProps,$[28]=stylesRef,$[29]=textStyles,$[30]=t13):t13=$[30],$[31]!==hasPresets?(t14=!hasPresets&&react.createElement(NoStylesWrapper,null,react.createElement(NoStylesText,{size:types.$.Small},(0,i18n.__)("No Styles Saved","web-stories"))),$[31]=hasPresets,$[32]=t14):t14=$[32],$[33]!==t12||$[34]!==t13||$[35]!==t14?(t15=react.createElement(SectionContainer,null,t12,t13,t14),$[33]=t12,$[34]=t13,$[35]=t14,$[36]=t15):t15=$[36],t15}function stylePresets_temp2(state_0){return{insertElement:state_0.actions.insertElement}}function stylePresets_temp(t0){const{state,actions}=t0;return{isText:Boolean(state.selectedElements&&(0,presetUtils.ac)("text",state.selectedElements)),textStyles:state.story?.globalStoryStyles?.textStyles||[],updateSelectedElements:actions.updateSelectedElements}}const stylePresets=(0,react_src.ph)(PresetPanel);function textPane_extends(){return textPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},textPane_extends.apply(null,arguments)}PresetPanel.__docgenInfo={description:"",methods:[],displayName:"PresetPanel"};const Pane=(0,styled_components_browser_esm.Ay)(panes_shared.Zv).withConfig({displayName:"textPane__Pane",componentId:"sc-zvmbdp-0"})(["overflow-y:scroll;max-height:100%;position:relative;"]),GridContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"textPane__GridContainer",componentId:"sc-zvmbdp-1"})(["display:grid;grid-template-columns:1fr 1fr;gap:12px;"]),SmartColorToggle=styled_components_browser_esm.Ay.div.withConfig({displayName:"textPane__SmartColorToggle",componentId:"sc-zvmbdp-2"})(["display:flex;label{cursor:pointer;margin:auto 12px;color:",";}"],(({theme})=>theme.colors.fg.secondary));function TextPane(props){const $=(0,dist.c)(40),paneRef=(0,react_src.li)(),[,forceUpdate]=(0,react_src.J0)(),{shouldUseSmartColor,setShouldUseSmartColor}=library_useLibrary(textPane_temp);let t0;$[0]!==shouldUseSmartColor?(t0={shouldUseSmartColor},$[0]=shouldUseSmartColor,$[1]=t0):t0=$[1];const{getPosition,insertPreset}=text_useInsertPreset(t0),generateDeferredCurrentPageCanvas=(0,pageCanvas.R5)(textPane_temp2);let t1,t2,t3,t4;$[2]!==forceUpdate?(t1=()=>{forceUpdate(Date.now())},$[2]=forceUpdate,$[3]=t1):t1=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[4]=t2):t2=$[4],(0,react_src.pO)(paneRef,t1,t2),$[5]!==setShouldUseSmartColor?(t3=()=>setShouldUseSmartColor(textPane_temp3),t4=[setShouldUseSmartColor],$[5]=setShouldUseSmartColor,$[6]=t3,$[7]=t4):(t3=$[6],t4=$[7]);const handleToggleClick=(0,react_src.hb)(t3,t4);let t5;$[8]===Symbol.for("react.memo_cache_sentinel")?(t5=[],$[8]=t5):t5=$[8];const toggleId=(0,react_src.Kr)(textPane_temp4,t5);let t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17;return $[9]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Adaptive text colors","web-stories"),$[9]=t6):t6=$[9],$[10]!==toggleId?(t7=react.createElement(typography_text.E.Label,{htmlFor:toggleId,size:types.$.Small},t6),$[10]=toggleId,$[11]=t7):t7=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("May impact performance when inserting text","web-stories"),$[12]=t8):t8=$[12],$[13]!==handleToggleClick||$[14]!==shouldUseSmartColor||$[15]!==toggleId?(t9=react.createElement(components_tooltip.A,{title:t8},react.createElement(toggle.A,{id:toggleId,checked:shouldUseSmartColor,onChange:handleToggleClick})),$[13]=handleToggleClick,$[14]=shouldUseSmartColor,$[15]=toggleId,$[16]=t9):t9=$[16],$[17]!==t7||$[18]!==t9?(t10=react.createElement(SmartColorToggle,null,t7,t9),$[17]=t7,$[18]=t9,$[19]=t10):t10=$[19],$[20]!==generateDeferredCurrentPageCanvas||$[21]!==shouldUseSmartColor?(t11=()=>shouldUseSmartColor&&generateDeferredCurrentPageCanvas(),$[20]=generateDeferredCurrentPageCanvas,$[21]=shouldUseSmartColor,$[22]=t11):t11=$[22],$[23]!==getPosition||$[24]!==insertPreset?(t12=textPresets.f.map(((t13,index)=>{const{title,element}=t13;return react.createElement(fontPreview,{key:title,title,element,insertPreset,getPosition,index})})),$[23]=getPosition,$[24]=insertPreset,$[25]=t12):t12=$[25],$[26]!==t12?(t13=react.createElement(GridContainer,null,t12),$[26]=t12,$[27]=t13):t13=$[27],$[28]!==t11||$[29]!==t13?(t14=react.createElement(section_Container,{onPointerOver:t11},t13),$[28]=t11,$[29]=t13,$[30]=t14):t14=$[30],$[31]===Symbol.for("react.memo_cache_sentinel")?(t15=react.createElement(stylePresets,null),$[31]=t15):t15=$[31],$[32]!==paneRef?(t16=react.createElement(textSetsPane,{paneRef}),$[32]=paneRef,$[33]=t16):t16=$[33],$[34]!==paneRef||$[35]!==props||$[36]!==t10||$[37]!==t14||$[38]!==t16?(t17=react.createElement(Pane,textPane_extends({id:text_paneId},props,{ref:paneRef}),t10,t14,t15,t16),$[34]=paneRef,$[35]=props,$[36]=t10,$[37]=t14,$[38]=t16,$[39]=t17):t17=$[39],t17}function textPane_temp4(){return`toggle_auto_color_${(0,v4.A)()}`}function textPane_temp3(currentValue){return!currentValue}function textPane_temp2(t0){const{actions}=t0;return actions.generateDeferredCurrentPageCanvas}function textPane_temp(state){return{shouldUseSmartColor:state.state.shouldUseSmartColor,setShouldUseSmartColor:state.actions.setShouldUseSmartColor}}const textPane=TextPane;TextPane.__docgenInfo={description:"",methods:[],displayName:"TextPane"};var letter_t=__webpack_require__("./packages/design-system/src/icons/letter_t.svg");function TextIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(letter_t.A,{title:(0,i18n.__)("Text library","web-stories")}),$[0]=t0):t0=$[0],t0}const textIcon=TextIcon;TextIcon.__docgenInfo={description:"",methods:[],displayName:"TextIcon"};const pageTemplates_paneId=(0,panes_shared.kN)("pageTemplates");var loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx");const PAGE_TEMPLATE_TYPES={cover:{name:(0,i18n.__)("Cover","web-stories")},section:{name:(0,i18n.__)("Section","web-stories")},quote:{name:(0,i18n.__)("Quote","web-stories")},editorial:{name:(0,i18n.__)("Editorial","web-stories")},list:{name:(0,i18n.__)("List","web-stories")},table:{name:(0,i18n.__)("Table","web-stories")},steps:{name:(0,i18n.__)("Steps","web-stories")}};var useGridViewKeys=__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts");function defaultPageTemplate_extends(){return defaultPageTemplate_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},defaultPageTemplate_extends.apply(null,arguments)}const PageTemplateWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"defaultPageTemplate__PageTemplateWrapper",componentId:"sc-kt5s68-0"})([""]),PageTemplateButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Plain}).withConfig({displayName:"defaultPageTemplate__PageTemplateButton",componentId:"sc-kt5s68-1"})(["position:relative;display:block;padding:0;border-radius:",";overflow:hidden;&:focus-visible{box-shadow:none;}&:focus-visible [role='presentation']{",";}"],(({theme})=>theme.borders.radius.small),(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),TemplateTitleContainer=(0,styled_components_browser_esm.Ay)(panes_shared.VC).withConfig({displayName:"defaultPageTemplate__TemplateTitleContainer",componentId:"sc-kt5s68-2"})(["",":hover &,",":focus &{opacity:1;}"],PageTemplateButton,PageTemplateButton),PosterImg=styled_components_browser_esm.Ay.img.withConfig({displayName:"defaultPageTemplate__PosterImg",componentId:"sc-kt5s68-3"})(["display:block;width:100%;"]),DefaultPageTemplate=(0,react_src.Rf)(((t0,ref)=>{const $=(0,dist.c)(40);let columnWidth,isActive,onFocus,page,rest,t1;$[0]!==t0?(({page,columnWidth,isActive,onFocus,...rest}=t0),$[0]=t0,$[1]=columnWidth,$[2]=isActive,$[3]=onFocus,$[4]=page,$[5]=rest):(columnWidth=$[1],isActive=$[2],onFocus=$[3],page=$[4],rest=$[5]),$[6]!==page.title||$[7]!==page.type?(t1=(0,sprintf.A)((0,i18n._x)("%1$s %2$s","page template title","web-stories"),page.title,PAGE_TEMPLATE_TYPES[page.type].name),$[6]=page.title,$[7]=page.type,$[8]=t1):t1=$[8];const templateTitle=t1,[isFocused,setIsFocused]=(0,react_src.J0)(!1),t2=isActive?0:-1;let t3,t4,t5,t6,t7,t8,t9,t10,t11;return $[9]!==setIsFocused?(t3=()=>setIsFocused(!0),t4=()=>setIsFocused(!1),$[9]=setIsFocused,$[10]=t3,$[11]=t4):(t3=$[10],t4=$[11]),$[12]!==onFocus||$[13]!==setIsFocused?(t5=()=>{setIsFocused(!0),onFocus?.()},$[12]=onFocus,$[13]=setIsFocused,$[14]=t5):t5=$[14],$[15]!==setIsFocused?(t6=()=>setIsFocused(!1),$[15]=setIsFocused,$[16]=t6):t6=$[16],$[17]!==page.png||$[18]!==page.title?(t7=page.png&&react.createElement(PosterImg,{src:page.png,alt:(0,sprintf.A)((0,i18n.__)("Snapshot of page template for %1$s","web-stories"),page.title),crossOrigin:"anonymous",decoding:"async",draggable:!1}),$[17]=page.png,$[18]=page.title,$[19]=t7):t7=$[19],$[20]!==isFocused?(t8=isFocused&&react.createElement(insertionOverlay.A,null),$[20]=isFocused,$[21]=t8):t8=$[21],$[22]!==page.title||$[23]!==templateTitle?(t9=page.title&&react.createElement(TemplateTitleContainer,null,react.createElement(typography_text.E.Span,{size:types.$.Small},templateTitle)),$[22]=page.title,$[23]=templateTitle,$[24]=t9):t9=$[24],$[25]!==columnWidth||$[26]!==rest||$[27]!==t2||$[28]!==t3||$[29]!==t4||$[30]!==t5||$[31]!==t6||$[32]!==t7||$[33]!==t8||$[34]!==t9||$[35]!==templateTitle?(t10=react.createElement(PageTemplateButton,defaultPageTemplate_extends({columnWidth,tabIndex:t2,"aria-label":templateTitle,onPointerEnter:t3,onPointerLeave:t4,onFocus:t5,onBlur:t6},rest),t7,t8,t9),$[25]=columnWidth,$[26]=rest,$[27]=t2,$[28]=t3,$[29]=t4,$[30]=t5,$[31]=t6,$[32]=t7,$[33]=t8,$[34]=t9,$[35]=templateTitle,$[36]=t10):t10=$[36],$[37]!==ref||$[38]!==t10?(t11=react.createElement(PageTemplateWrapper,{ref,role:"listitem"},t10),$[37]=ref,$[38]=t10,$[39]=t11):t11=$[39],t11}));DefaultPageTemplate.propTypes={isActive:prop_types_default().bool,page:prop_types_default().object.isRequired,columnWidth:prop_types_default().number.isRequired},DefaultPageTemplate.displayName="DefaultPageTemplate";const defaultPageTemplate=DefaultPageTemplate;DefaultPageTemplate.__docgenInfo={description:"",methods:[],displayName:"DefaultPageTemplate",props:{isActive:{description:"",type:{name:"bool"},required:!1},page:{description:"",type:{name:"object"},required:!0},columnWidth:{description:"",type:{name:"number"},required:!0}}};var plus_filled_small=__webpack_require__("./packages/design-system/src/icons/plus_filled_small.svg"),fetchRemoteBlob=__webpack_require__("./packages/media/src/fetchRemoteBlob.ts"),uploader=__webpack_require__("./packages/story-editor/src/app/uploader/index.ts"),utils_noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),dots_fill_small=__webpack_require__("./packages/design-system/src/icons/dots_fill_small.svg"),menu=__webpack_require__("./packages/design-system/src/components/menu/menu.tsx"),dropDownKeyEvents=__webpack_require__("./packages/story-editor/src/components/panels/utils/dropDownKeyEvents.js");function DeleteDialog(t0){const $=(0,dist.c)(7),{onClose,onDelete}=t0;let t1,t2,t3,t4,t5;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=(0,i18n.__)("Delete Page Template","web-stories"),t2=(0,i18n.__)("Cancel","web-stories"),$[0]=t1,$[1]=t2):(t1=$[0],t2=$[1]),$[2]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Delete","web-stories"),$[2]=t3):t3=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,i18n.__)("Are you sure you want to delete this template? This action cannot be undone.","web-stories")),$[3]=t4):t4=$[3],$[4]!==onClose||$[5]!==onDelete?(t5=react.createElement(dialog.A,{isOpen:!0,onClose,title:t1,secondaryText:t2,onPrimary:onDelete,primaryText:t3},t4),$[4]=onClose,$[5]=onDelete,$[6]=t5):t5=$[6],t5}DeleteDialog.propTypes={onClose:prop_types_default().func.isRequired,onDelete:prop_types_default().func.isRequired};const deleteDialog=DeleteDialog;DeleteDialog.__docgenInfo={description:"Display a confirmation dialog for when a user wants to delete a template.\n\n@param {Object} props Component props.\n@param {Function} props.onClose Callback to toggle dialog display on close.\n@param {Function} props.onDelete Callback to delete template.\n@return {null|*} The dialog element.",methods:[],displayName:"DeleteDialog",props:{onClose:{description:"",type:{name:"func"},required:!0},onDelete:{description:"",type:{name:"func"},required:!0}}};var input_input=__webpack_require__("./packages/design-system/src/components/input/input.tsx");const InputWrapper=styled_components_browser_esm.Ay.form.withConfig({displayName:"nameDialog__InputWrapper",componentId:"sc-pqbhqw-0"})(["margin:16px 4px;width:470px;height:100px;"]);function NameDialog(t0){const $=(0,dist.c)(23),{onClose,onSave,title,placeholder,previousInput}=t0,[templateName,setTemplateName]=(0,react_src.J0)(previousInput);let t1,t2,t3,t4,t5,t6,t7,t8,t9;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=(0,i18n.__)("Save","web-stories"),$[0]=t1):t1=$[0],$[1]!==onSave||$[2]!==templateName?(t2=()=>{onSave(templateName)},$[1]=onSave,$[2]=templateName,$[3]=t2):t2=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Cancel","web-stories"),$[4]=t3):t3=$[4],$[5]!==onSave||$[6]!==templateName?(t4=e=>{e.preventDefault(),onSave(templateName)},$[5]=onSave,$[6]=templateName,$[7]=t4):t4=$[7],$[8]!==setTemplateName?(t5=e_0=>{setTemplateName(e_0.target.value)},$[8]=setTemplateName,$[9]=t5):t5=$[9],$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Template name","web-stories"),$[10]=t6):t6=$[10],$[11]!==placeholder||$[12]!==t5||$[13]!==templateName?(t7=react.createElement(input_input.A,{onChange:t5,value:templateName,label:t6,placeholder,type:"text"}),$[11]=placeholder,$[12]=t5,$[13]=templateName,$[14]=t7):t7=$[14],$[15]!==t4||$[16]!==t7?(t8=react.createElement(InputWrapper,{onSubmit:t4},t7),$[15]=t4,$[16]=t7,$[17]=t8):t8=$[17],$[18]!==onClose||$[19]!==t2||$[20]!==t8||$[21]!==title?(t9=react.createElement(dialog.A,{isOpen:!0,title,primaryText:t1,onPrimary:t2,secondaryText:t3,onSecondary:onClose,onClose},t8),$[18]=onClose,$[19]=t2,$[20]=t8,$[21]=title,$[22]=t9):t9=$[22],t9}NameDialog.propTypes={onClose:prop_types_default().func.isRequired,onSave:prop_types_default().func.isRequired,title:prop_types_default().string,placeholder:prop_types_default().string,previousInput:prop_types_default().string};const nameDialog=NameDialog;NameDialog.__docgenInfo={description:"Display a dialog for when a user wants to rename a template.\n\n@param {Object} props Component props.\n@param {Function} props.onClose Callback to toggle dialog display on close.\n@param {Function} props.onSave Callback to save template. Template name will be the argument\n@param {string} props.title Previous name of the template\n@param {string} props.placeholder Placeholder input text.\n@param {string} props.previousInput Prefill input text.\n@return {null|*} The dialog element.",methods:[],displayName:"NameDialog",props:{onClose:{description:"",type:{name:"func"},required:!0},onSave:{description:"",type:{name:"func"},required:!0},title:{description:"",type:{name:"string"},required:!1},placeholder:{description:"",type:{name:"string"},required:!1},previousInput:{description:"",type:{name:"string"},required:!1}}};const dropDownMenu_MoreButton=(0,styled_components_browser_esm.Ay)(panes_shared.rA).withConfig({displayName:"dropDownMenu__MoreButton",componentId:"sc-xiyx7c-0"})(["top:4px;right:4px;"]),DropDownContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"dropDownMenu__DropDownContainer",componentId:"sc-xiyx7c-1"})(["margin-top:10px;"]),MenuContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"dropDownMenu__MenuContainer",componentId:"sc-xiyx7c-2"})(["z-index:1;"]),menuStylesOverride=(0,styled_components_browser_esm.AH)(["min-width:160px;margin-top:0;li{display:block;}"]),MENU_OPTIONS_RENAME="rename",MENU_OPTIONS_DELETE="delete";function DropDownMenu(t0){const $=(0,dist.c)(57),{display,isMenuOpen,onMenuOpen,onMenuCancelled,onMenuSelected,setParentActive:t1,onDelete,onUpdateName,previousName}=t0,setParentActive=void 0===t1?utils_noop.l:t1;let t2;$[0]===Symbol.for("react.memo_cache_sentinel")?(t2=[{options:[{label:(0,i18n.__)("Rename Template","web-stories"),value:MENU_OPTIONS_RENAME},{label:(0,i18n.__)("Delete Template","web-stories"),value:MENU_OPTIONS_DELETE}]}],$[0]=t2):t2=$[0];const groups=t2,[showDeleteDialog,setShowDeleteDialog]=(0,react_src.J0)(!1),[showRenameDialog,setShowRenameDialog]=(0,react_src.J0)(!1),moreButtonRef=(0,react_src.li)();let t3,t4;$[1]!==moreButtonRef.current||$[2]!==onMenuCancelled||$[3]!==setParentActive?(t3=()=>{onMenuCancelled(),moreButtonRef.current?.focus(),setParentActive()},$[1]=moreButtonRef.current,$[2]=onMenuCancelled,$[3]=setParentActive,$[4]=t3):t3=$[4],$[5]!==onMenuCancelled||$[6]!==setParentActive?(t4=[onMenuCancelled,setParentActive],$[5]=onMenuCancelled,$[6]=setParentActive,$[7]=t4):t4=$[7];const onClose=(0,react_src.hb)(t3,t4);let t5;$[8]!==onMenuSelected||$[9]!==setShowDeleteDialog||$[10]!==setShowRenameDialog?(t5=(evt,value)=>{evt.stopPropagation(),onMenuSelected();bb14:switch(value){case MENU_OPTIONS_RENAME:setShowRenameDialog(!0);break bb14;case MENU_OPTIONS_DELETE:setShowDeleteDialog(!0)}},$[8]=onMenuSelected,$[9]=setShowDeleteDialog,$[10]=setShowRenameDialog,$[11]=t5):t5=$[11];const handleCurrentValue=t5;let t6,t7;$[12]!==onClose||$[13]!==setShowDeleteDialog?(t6=()=>{setShowDeleteDialog(!1),onClose()},t7=[setShowDeleteDialog,onClose],$[12]=onClose,$[13]=setShowDeleteDialog,$[14]=t6,$[15]=t7):(t6=$[14],t7=$[15]);const onDeleteDialogClose=(0,react_src.hb)(t6,t7);let t8,t9;$[16]!==onClose||$[17]!==setShowRenameDialog?(t8=()=>{setShowRenameDialog(!1),onClose()},t9=[setShowRenameDialog,onClose],$[16]=onClose,$[17]=setShowRenameDialog,$[18]=t8,$[19]=t9):(t8=$[18],t9=$[19]);const onRenameDialogClose=(0,react_src.hb)(t8,t9);let t10;$[20]===Symbol.for("react.memo_cache_sentinel")?(t10=[],$[20]=t10):t10=$[20];const listId=(0,react_src.Kr)(dropDownMenu_temp,t10);let t11;$[21]===Symbol.for("react.memo_cache_sentinel")?(t11=[],$[21]=t11):t11=$[21];const buttonId=(0,react_src.Kr)(dropDownMenu_temp2,t11);let t12,t13;$[22]!==moreButtonRef.current?(t12=moreButtonRef.current&&react.createElement(dropDownKeyEvents.A,{target:moreButtonRef.current}),$[22]=moreButtonRef.current,$[23]=t12):t12=$[23],$[24]===Symbol.for("react.memo_cache_sentinel")?(t13=(0,i18n.__)("More","web-stories"),$[24]=t13):t13=$[24];const t14=isMenuOpen?listId:null,t15=display||isMenuOpen?0:-1;let t16,t17,t18,t19,t20,t21;return $[25]===Symbol.for("react.memo_cache_sentinel")?(t16=react.createElement(dots_fill_small.A,null),$[25]=t16):t16=$[25],$[26]!==buttonId||$[27]!==display||$[28]!==isMenuOpen||$[29]!==moreButtonRef||$[30]!==onMenuOpen||$[31]!==t14||$[32]!==t15?(t17=react.createElement(dropDownMenu_MoreButton,{ref:moreButtonRef,onClick:onMenuOpen,"aria-label":t13,"aria-pressed":isMenuOpen,"aria-haspopup":!0,"aria-expanded":isMenuOpen,"aria-owns":t14,id:buttonId,$display:display,tabIndex:t15},t16),$[26]=buttonId,$[27]=display,$[28]=isMenuOpen,$[29]=moreButtonRef,$[30]=onMenuOpen,$[31]=t14,$[32]=t15,$[33]=t17):t17=$[33],$[34]!==buttonId||$[35]!==display||$[36]!==handleCurrentValue||$[37]!==isMenuOpen||$[38]!==listId||$[39]!==moreButtonRef||$[40]!==onClose?(t18=(display||isMenuOpen)&&react.createElement(popup.A,{anchor:moreButtonRef,placement:popup_constants.W.BottomStart,isOpen:isMenuOpen},react.createElement(DropDownContainer,null,react.createElement(menu.A,{parentId:buttonId,listId,handleMenuItemSelect:handleCurrentValue,groups,onDismissMenu:onClose,hasMenuRole:!0,menuStylesOverride}))),$[34]=buttonId,$[35]=display,$[36]=handleCurrentValue,$[37]=isMenuOpen,$[38]=listId,$[39]=moreButtonRef,$[40]=onClose,$[41]=t18):t18=$[41],$[42]!==onDelete||$[43]!==onDeleteDialogClose||$[44]!==showDeleteDialog?(t19=showDeleteDialog&&react.createElement(deleteDialog,{onClose:onDeleteDialogClose,onDelete}),$[42]=onDelete,$[43]=onDeleteDialogClose,$[44]=showDeleteDialog,$[45]=t19):t19=$[45],$[46]!==onRenameDialogClose||$[47]!==onUpdateName||$[48]!==previousName||$[49]!==showRenameDialog?(t20=showRenameDialog&&react.createElement(nameDialog,{onClose:onRenameDialogClose,onSave:name=>{onUpdateName(name),onRenameDialogClose()},title:(0,i18n.__)("Rename Page Template","web-stories"),placeholder:previousName||(0,i18n.__)("Untitled","web-stories"),previousInput:previousName||""}),$[46]=onRenameDialogClose,$[47]=onUpdateName,$[48]=previousName,$[49]=showRenameDialog,$[50]=t20):t20=$[50],$[51]!==t12||$[52]!==t17||$[53]!==t18||$[54]!==t19||$[55]!==t20?(t21=react.createElement(MenuContainer,null,t12,t17,t18,t19,t20),$[51]=t12,$[52]=t17,$[53]=t18,$[54]=t19,$[55]=t20,$[56]=t21):t21=$[56],t21}function dropDownMenu_temp2(){return`button-${(0,v4.A)()}`}function dropDownMenu_temp(){return`list-${(0,v4.A)()}`}DropDownMenu.propTypes={display:prop_types_default().bool.isRequired,isMenuOpen:prop_types_default().bool.isRequired,onMenuOpen:prop_types_default().func.isRequired,onMenuCancelled:prop_types_default().func.isRequired,onMenuSelected:prop_types_default().func.isRequired,onDelete:prop_types_default().func.isRequired,onUpdateName:prop_types_default().func.isRequired,setParentActive:prop_types_default().func,previousName:prop_types_default().string};const dropDownMenu=DropDownMenu;DropDownMenu.__docgenInfo={description:"Get a More icon that displays a dropdown menu on click.\n\n@param {Object} props Component props.\n@param {boolean} props.display Whether the more icon should be displayed.\n@param {boolean} props.isMenuOpen If the dropdown menu is open.\n@param {Function} props.onMenuOpen Callback for when menu is opened.\n@param {Function} props.onMenuCancelled Callback for when menu is closed without any selections.\n@param {Function} props.onMenuSelected Callback for when menu is closed and an option selected.\n@param {Function} props.setParentActive Sets the parent element active.\n@param {Function} props.onDelete Deletes template.\n@param {Function} props.onUpdateName updates template name.\n@param {string} props.previousName Previous name of the template.\n@return {null|*} Element or null if should not display the More icon.",methods:[],displayName:"DropDownMenu",props:{setParentActive:{defaultValue:{value:"noop",computed:!0},description:"",type:{name:"func"},required:!1},display:{description:"",type:{name:"bool"},required:!0},isMenuOpen:{description:"",type:{name:"bool"},required:!0},onMenuOpen:{description:"",type:{name:"func"},required:!0},onMenuCancelled:{description:"",type:{name:"func"},required:!0},onMenuSelected:{description:"",type:{name:"func"},required:!0},onDelete:{description:"",type:{name:"func"},required:!0},onUpdateName:{description:"",type:{name:"func"},required:!0},previousName:{description:"",type:{name:"string"},required:!1}}};const TemplateImage=styled_components_browser_esm.Ay.img.withConfig({displayName:"savedPageTemplate__TemplateImage",componentId:"sc-5hfe38-0"})(["width:100%;height:auto;"]),savedPageTemplate_PageTemplateWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"savedPageTemplate__PageTemplateWrapper",componentId:"sc-5hfe38-1"})(["position:relative;height:","px;width:","px;cursor:pointer;",";",";"],(({pageSize})=>pageSize.height),(({pageSize})=>pageSize.width),(({isHighlighted})=>isHighlighted&&outline.g),shared_styles.Y);savedPageTemplate_PageTemplateWrapper.propTypes={pageSize:propTypes.Gn.isRequired};const PreviewPageWrapper=styled_components_browser_esm.Ay.button.withConfig({displayName:"savedPageTemplate__PreviewPageWrapper",componentId:"sc-5hfe38-2"})(["position:relative;padding:0;border:0;height:100%;width:100%;background-color:",";border-radius:",";overflow:hidden;",""],(({theme})=>theme.colors.interactiveBg.secondary),(({theme})=>theme.borders.radius.small),(({background})=>(0,generatePatternStyles.A)(background)));PreviewPageWrapper.propTypes={pageSize:propTypes.Gn.isRequired};const ElementsWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"savedPageTemplate__ElementsWrapper",componentId:"sc-5hfe38-3"})(["z-index:10;"]),TemplateInsertionOverlay=(0,styled_components_browser_esm.Ay)(insertionOverlay.A).withConfig({displayName:"savedPageTemplate__TemplateInsertionOverlay",componentId:"sc-5hfe38-4"})(["z-index:11;"]),savedPageTemplate_TemplateTitleContainer=(0,styled_components_browser_esm.Ay)(panes_shared.VC).withConfig({displayName:"savedPageTemplate__TemplateTitleContainer",componentId:"sc-5hfe38-5"})(["opacity:",";"],(({isActive})=>isActive?1:0));function SavedPageTemplate(t0,ref){const $=(0,dist.c)(103),{page,pageSize,handleDelete,index,title,highlightedTemplate,onClick}=t0,{capabilities:t1}=(0,app_config.UK)(),{hasUploadMediaAction}=t1,{actions:t2}=(0,api.M1)(),{updatePageTemplate}=t2,{actions:t3}=(0,uploader.k)(),{uploadFile}=t3,{showSnackbar}=(0,useSnackbar.d)(),{updateSavedTemplate}=library_useLibrary(savedPageTemplate_temp),queuePageImageGeneration=pageDataUrls_usePageDataUrls(savedPageTemplate_temp2),pageDataUrl=pageDataUrls_usePageDataUrls((t4=>{const{state:t5}=t4,{dataUrls}=t5;return dataUrls[page.id]}))||page.pregeneratedPageDataUrl,[isActive,setIsActive]=(0,react_src.J0)(!1),[isMenuOpen,setIsMenuOpen]=(0,react_src.J0)(!1);let t6,t7;$[0]!==setIsActive||$[1]!==setIsMenuOpen?(t6=e=>{e.stopPropagation(),setIsMenuOpen(!0),setIsActive(!1)},$[0]=setIsActive,$[1]=setIsMenuOpen,$[2]=t6):t6=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[3]=t7):t7=$[3];const onMenuOpen=(0,react_src.hb)(t6,t7);let t8,t9;$[4]!==setIsActive||$[5]!==setIsMenuOpen?(t8=()=>{setIsMenuOpen(!1),setIsActive(!1)},$[4]=setIsActive,$[5]=setIsMenuOpen,$[6]=t8):t8=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t9=[],$[7]=t9):t9=$[7];const onMenuCancelled=(0,react_src.hb)(t8,t9);let t10,t11;$[8]!==setIsActive||$[9]!==setIsMenuOpen?(t10=()=>{setIsMenuOpen(!1),setIsActive(!1)},$[8]=setIsActive,$[9]=setIsMenuOpen,$[10]=t10):t10=$[10],$[11]===Symbol.for("react.memo_cache_sentinel")?(t11=[],$[11]=t11):t11=$[11];const onMenuSelected=(0,react_src.hb)(t10,t11);let t12,t13,t14,t15;$[12]!==setIsActive?(t12=()=>setIsActive(!1),$[12]=setIsActive,$[13]=t12):t12=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(t13=[],$[14]=t13):t13=$[14],(0,react_src.g$)(ref,t12,t13),$[15]!==setIsActive?(t14=()=>setIsActive(!0),$[15]=setIsActive,$[16]=t14):t14=$[16],$[17]===Symbol.for("react.memo_cache_sentinel")?(t15=[],$[17]=t15):t15=$[17];const makeActive=(0,react_src.hb)(t14,t15);let t16,t17;$[18]!==setIsActive?(t16=()=>{setIsActive(!1)},$[18]=setIsActive,$[19]=t16):t16=$[19],$[20]===Symbol.for("react.memo_cache_sentinel")?(t17=[],$[20]=t17):t17=$[20];const makeInactive=(0,react_src.hb)(t16,t17);let t18,t19;$[21]!==page.templateId||$[22]!==setIsActive||$[23]!==setIsMenuOpen||$[24]!==showSnackbar||$[25]!==updatePageTemplate||$[26]!==updateSavedTemplate?(t18=async newName=>{try{const res=await updatePageTemplate(page.templateId,{title:newName});updateSavedTemplate({templateId:page.templateId,title:res.title}),setIsMenuOpen(!1),setIsActive(!1),showSnackbar({message:(0,i18n.__)("Page Template renamed.","web-stories"),dismissible:!0})}catch{showSnackbar({message:(0,i18n.__)("Unable to rename the template. Please try again.","web-stories"),dismissible:!0})}},$[21]=page.templateId,$[22]=setIsActive,$[23]=setIsMenuOpen,$[24]=showSnackbar,$[25]=updatePageTemplate,$[26]=updateSavedTemplate,$[27]=t18):t18=$[27],$[28]!==page.templateId||$[29]!==showSnackbar||$[30]!==updatePageTemplate||$[31]!==updateSavedTemplate?(t19=[updatePageTemplate,updateSavedTemplate,page.templateId,showSnackbar],$[28]=page.templateId,$[29]=showSnackbar,$[30]=updatePageTemplate,$[31]=updateSavedTemplate,$[32]=t19):t19=$[32];const updateTemplateName=(0,react_src.hb)(t18,t19),imageUrl=page.image?.url||pageDataUrl,shouldPostBlob=hasUploadMediaAction&&pageDataUrl&&!page.image?.url;let t20,t21,t22,t23;$[33]!==page.templateId||$[34]!==pageDataUrl||$[35]!==shouldPostBlob||$[36]!==updatePageTemplate||$[37]!==updateSavedTemplate||$[38]!==uploadFile?(t20=()=>{shouldPostBlob&&(async()=>{try{const blob=await(0,fetchRemoteBlob.A)(pageDataUrl),file=(0,blobToFile.A)(blob,`web-stories-page-template-${page.templateId}.jpg`,"image/jpeg"),resource=await uploadFile(file,{templateId:page.templateId,mediaSource:"page-template"});await updatePageTemplate(page.templateId,{featured_media:resource.id}),updateSavedTemplate({templateId:page.templateId,image:{id:resource.id,height:resource.height,width:resource.width,url:resource.src}})}catch(t22){const err=t22;(0,tracking_src.Oz)("upload_generated_page_template_image",err?.message)}})()},t21=[pageDataUrl,uploadFile,updatePageTemplate,page.templateId,shouldPostBlob,updateSavedTemplate],$[33]=page.templateId,$[34]=pageDataUrl,$[35]=shouldPostBlob,$[36]=updatePageTemplate,$[37]=updateSavedTemplate,$[38]=uploadFile,$[39]=t20,$[40]=t21):(t20=$[39],t21=$[40]),(0,react_src.vJ)(t20,t21),$[41]!==hasUploadMediaAction||$[42]!==imageUrl||$[43]!==page||$[44]!==queuePageImageGeneration?(t22=()=>{!imageUrl&&hasUploadMediaAction&&queuePageImageGeneration(page)},t23=[imageUrl,queuePageImageGeneration,page,hasUploadMediaAction],$[41]=hasUploadMediaAction,$[42]=imageUrl,$[43]=page,$[44]=queuePageImageGeneration,$[45]=t22,$[46]=t23):(t22=$[45],t23=$[46]),(0,react_src.vJ)(t22,t23);const insertButtonRef=(0,react_src.li)();let t24,t25;$[47]!==insertButtonRef?(t24={ref:insertButtonRef},$[47]=insertButtonRef,$[48]=t24):t24=$[48],$[49]===Symbol.for("react.memo_cache_sentinel")?(t25=[],$[49]=t25):t25=$[49],(0,useRovingTabIndex.A)(t24,t25,2);const t26=page.id===highlightedTemplate;let t27,t28,t29,t30,t31,t32,t33,t34;$[50]!==imageUrl||$[51]!==page.elements||$[52]!==page.image?.alt||$[53]!==page.image?.height||$[54]!==pageSize?(t27=imageUrl?react.createElement(TemplateImage,{alt:page.image?.alt||(0,i18n.__)("Saved Page Template","web-stories"),src:imageUrl,crossOrigin:"anonymous",height:page.image?.height,width:page.image?.height,draggable:!1}):react.createElement(ElementsWrapper,null,react.createElement(unitsProvider.A,{pageSize:{height:pageSize.height,width:pageSize.width}},page.elements.map(savedPageTemplate_temp3))),$[50]=imageUrl,$[51]=page.elements,$[52]=page.image?.alt,$[53]=page.image?.height,$[54]=pageSize,$[55]=t27):t27=$[55],$[56]!==isActive?(t28=isActive&&react.createElement(TemplateInsertionOverlay,{showIcon:!1}),$[56]=isActive,$[57]=t28):t28=$[57],$[58]!==title?(t29=title||(0,i18n.__)("Untitled","web-stories"),$[58]=title,$[59]=t29):t29=$[59],$[60]!==t29?(t30=react.createElement(typography_text.E.Span,{size:types.$.Small},t29),$[60]=t29,$[61]=t30):t30=$[61],$[62]!==isActive||$[63]!==t30?(t31=react.createElement(savedPageTemplate_TemplateTitleContainer,{isActive},t30),$[62]=isActive,$[63]=t30,$[64]=t31):t31=$[64],$[65]!==onClick||$[66]!==page.backgroundColor||$[67]!==pageSize||$[68]!==t27||$[69]!==t28||$[70]!==t31?(t32=react.createElement(PreviewPageWrapper,{pageSize,background:page.backgroundColor,onClick},t27,t28,t31),$[65]=onClick,$[66]=page.backgroundColor,$[67]=pageSize,$[68]=t27,$[69]=t28,$[70]=t31,$[71]=t32):t32=$[71],$[72]!==onClick?(t33=e_0=>{e_0.stopPropagation(),onClick(e_0)},$[72]=onClick,$[73]=t33):t33=$[73],$[74]===Symbol.for("react.memo_cache_sentinel")?(t34=(0,i18n.__)("Use template","web-stories"),$[74]=t34):t34=$[74];const t35=0===index?0:-1;let t36,t37,t38,t39,t40;return $[75]===Symbol.for("react.memo_cache_sentinel")?(t36=react.createElement(plus_filled_small.A,null),$[75]=t36):t36=$[75],$[76]!==insertButtonRef||$[77]!==isActive||$[78]!==t33||$[79]!==t35?(t37=react.createElement(panes_shared.rA,{ref:insertButtonRef,onClick:t33,"aria-label":t34,$display:isActive,tabIndex:t35},t36),$[76]=insertButtonRef,$[77]=isActive,$[78]=t33,$[79]=t35,$[80]=t37):t37=$[80],$[81]!==handleDelete||$[82]!==page.templateId?(t38=()=>{handleDelete(page.templateId)},$[81]=handleDelete,$[82]=page.templateId,$[83]=t38):t38=$[83],$[84]!==isActive||$[85]!==isMenuOpen||$[86]!==onMenuCancelled||$[87]!==onMenuOpen||$[88]!==onMenuSelected||$[89]!==t38||$[90]!==title||$[91]!==updateTemplateName?(t39=react.createElement(dropDownMenu,{display:isActive,isMenuOpen,onMenuOpen,onMenuCancelled,onMenuSelected,onDelete:t38,previousName:title,onUpdateName:updateTemplateName}),$[84]=isActive,$[85]=isMenuOpen,$[86]=onMenuCancelled,$[87]=onMenuOpen,$[88]=onMenuSelected,$[89]=t38,$[90]=title,$[91]=updateTemplateName,$[92]=t39):t39=$[92],$[93]!==makeActive||$[94]!==makeInactive||$[95]!==pageSize||$[96]!==ref||$[97]!==t26||$[98]!==t32||$[99]!==t37||$[100]!==t39||$[101]!==title?(t40=react.createElement(savedPageTemplate_PageTemplateWrapper,{pageSize,role:"listitem",ref,onPointerEnter:makeActive,onPointerLeave:makeInactive,"aria-label":title,isHighlighted:t26,onFocus:makeActive,onBlur:makeInactive},t32,t37,t39),$[93]=makeActive,$[94]=makeInactive,$[95]=pageSize,$[96]=ref,$[97]=t26,$[98]=t32,$[99]=t37,$[100]=t39,$[101]=title,$[102]=t40):t40=$[102],t40}function savedPageTemplate_temp3(element){return react.createElement(displayElement.A,{key:element.id,previewMode:!0,element})}function savedPageTemplate_temp2(t0){const{actions}=t0;return actions.queuePageImageGeneration}function savedPageTemplate_temp(state){return{updateSavedTemplate:state.actions.updateSavedTemplate}}const PageTemplateWithRef=(0,react_src.Rf)(SavedPageTemplate);SavedPageTemplate.propTypes={page:prop_types_default().object.isRequired,pageSize:propTypes.Gn.isRequired,handleDelete:prop_types_default().func.isRequired,index:prop_types_default().number,title:prop_types_default().string,highlightedTemplate:prop_types_default().object,onClick:prop_types_default().func},SavedPageTemplate.displayName="SavedPageTemplate";const savedPageTemplate=PageTemplateWithRef;function templateList_extends(){return templateList_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},templateList_extends.apply(null,arguments)}SavedPageTemplate.__docgenInfo={description:"",methods:[],displayName:"SavedPageTemplate",props:{page:{description:"",type:{name:"object"},required:!0},pageSize:{description:"",type:{name:"custom",raw:"PageSizePropType.isRequired"},required:!1},handleDelete:{description:"",type:{name:"func"},required:!0},index:{description:"",type:{name:"number"},required:!1},title:{description:"",type:{name:"string"},required:!1},highlightedTemplate:{description:"",type:{name:"object"},required:!1},onClick:{description:"",type:{name:"func"},required:!1}}};const WrapperGrid=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateList__WrapperGrid",componentId:"sc-1ukppvz-0"})(["display:grid;width:100%;margin-left:",";margin-bottom:12px;gap:12px;grid-template-columns:",";grid-template-rows:",";"],panes_shared.z7,(({columnWidth})=>`repeat(auto-fit, ${columnWidth}px)`),(({rowHeight})=>`repeat(minmax(${rowHeight}px, 1fr))`));function TemplateList({pages,parentRef,pageSize,handleDelete,fetchTemplates,...rest}){const{addPage}=(0,app_story.P3)((({actions})=>({addPage:actions.addPage}))),{isRTL}=(0,app_config.UK)(),{showSnackbar}=(0,useSnackbar.d)(),[currentPageId,setCurrentPageId]=(0,react_src.J0)(),containerRef=(0,react_src.li)(),pagesRef=(0,react_src.li)({}),handlePageClick=(0,react_src.hb)((({templateId,version,title,...page})=>{const duplicatedPage=(0,elements_src.hi)(page);addPage({page:duplicatedPage}),(0,tracking_src.sx)("insert_page_template",{name:title||"custom"}),showSnackbar({message:(0,i18n.__)("Page Template added.","web-stories"),dismissible:!0})}),[addPage,showSnackbar]),handleFocus=(0,react_src.hb)((id=>{setCurrentPageId(id)}),[]),isSavedTemplates=handleDelete||fetchTemplates;return(0,react_src.vJ)((()=>{pages.length>0&&(currentPageId&&pages.some((page_0=>page_0.id===currentPageId))||setCurrentPageId(pages[0].id))}),[currentPageId,pages]),(0,react_src.vJ)((()=>{fetchTemplates?.()}),[fetchTemplates]),(0,useGridViewKeys.A)({containerRef:parentRef,gridRef:containerRef,itemRefs:pagesRef,items:pages,currentItemId:currentPageId,isRTL}),react.createElement(WrapperGrid,{ref:containerRef,columnWidth:pageSize.width,rowHeight:pageSize.containerHeight,role:"list","aria-label":(0,i18n.__)("Page Template Options","web-stories")},isSavedTemplates?pages.map(((page_1,index)=>react.createElement(savedPageTemplate,templateList_extends({key:page_1.id,"data-testid":`page_template_${page_1.id}`,ref:el=>pagesRef.current[page_1.id]=el,page:page_1,pageSize,onClick:()=>handlePageClick(page_1),handleDelete,onFocus:()=>handleFocus(page_1.id),index,title:page_1?.title?.raw},rest)))):pages.map((page_2=>react.createElement(defaultPageTemplate,templateList_extends({ref:el_0=>pagesRef.current[page_2.id]=el_0,key:page_2.id,"data-testid":`page_template_${page_2.id}`,page:page_2,pageSize,onFocus:()=>handleFocus(page_2.id),isActive:currentPageId===page_2.id,onClick:()=>handlePageClick(page_2.story),columnWidth:pageSize.width},rest)))))}const templateList=TemplateList;TemplateList.__docgenInfo={description:"",methods:[],displayName:"TemplateList",props:{parentRef:{description:"",type:{name:"object"},required:!0},pages:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!0}}}},required:!1},pageSize:{description:"",type:{name:"object"},required:!0},handleDelete:{description:"",type:{name:"func"},required:!1},fetchTemplates:{description:"",type:{name:"func"},required:!1}}};const ActionRow=styled_components_browser_esm.Ay.div.withConfig({displayName:"defaultTemplates__ActionRow",componentId:"sc-14vj9wc-0"})(["display:flex;justify-content:space-between;margin:0px 16px 22px 16px;"]),PageTemplatesParentContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"defaultTemplates__PageTemplatesParentContainer",componentId:"sc-14vj9wc-1"})(["",";margin-top:26px;overflow-x:hidden;overflow-y:scroll;"],virtualPaneContainer),SearchInputContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"defaultTemplates__SearchInputContainer",componentId:"sc-14vj9wc-2"})(["padding:0 ",";margin-bottom:26px;"],panes_shared.z7),defaultTemplates_Message=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Medium}).withConfig({displayName:"defaultTemplates__Message",componentId:"sc-14vj9wc-3"})(["color:",";padding:1em;text-align:center;"],(({theme})=>theme.colors.fg.secondary));function DefaultTemplates(t0){const $=(0,dist.c)(43),{pageSize}=t0,{actions:t1}=(0,api.M1)(),{getPageTemplates}=t1;let t2;$[0]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[0]=t2):t2=$[0];const[pageTemplates,setPageTemplates]=(0,react_src.J0)(t2),[isLoading,setIsLoading]=(0,react_src.J0)(!1),[searchTerm,setSearchTerm]=(0,react_src.J0)("");let t3,t4;$[1]!==getPageTemplates||$[2]!==searchTerm||$[3]!==setIsLoading||$[4]!==setPageTemplates?(t3=()=>{!async function loadPageTemplates(){setIsLoading(!0);const trackTiming=(0,tracking_src.g6)("load_page_templates");setPageTemplates(await getPageTemplates(searchTerm)),setIsLoading(!1),trackTiming()}()},$[1]=getPageTemplates,$[2]=searchTerm,$[3]=setIsLoading,$[4]=setPageTemplates,$[5]=t3):t3=$[5],$[6]!==getPageTemplates||$[7]!==searchTerm||$[8]!==setPageTemplates?(t4=[getPageTemplates,setPageTemplates,searchTerm],$[6]=getPageTemplates,$[7]=searchTerm,$[8]=setPageTemplates,$[9]=t4):t4=$[9],(0,react_src.vJ)(t3,t4);const pageTemplatesParentRef=(0,react_src.li)(),[selectedPageTemplateType,setSelectedPageTemplateType]=(0,react_src.J0)(null);let t5;$[10]===Symbol.for("react.memo_cache_sentinel")?(t5=[],$[10]=t5):t5=$[10];const pills=(0,react_src.Kr)(defaultTemplates_temp2,t5);let t6,t7;$[11]!==pageTemplates||$[12]!==selectedPageTemplateType?(t6=()=>pageTemplates.reduce(((pages,template)=>[...pages,...Object.values(template.postersByPage).map(((poster,index)=>({id:`${template.slug}_${index}`,title:template.title,story:template.pages[index],...poster}))).reduce(((acc,posterByPage)=>!posterByPage.type||selectedPageTemplateType&&posterByPage.type!==selectedPageTemplateType?acc:[...acc,posterByPage]),[])]),[]),t7=[pageTemplates,selectedPageTemplateType],$[11]=pageTemplates,$[12]=selectedPageTemplateType,$[13]=t6,$[14]=t7):(t6=$[13],t7=$[14]);const filteredPages=(0,react_src.Kr)(t6,t7);let t8,t9;$[15]!==setSelectedPageTemplateType?(t8=key_0=>{setSelectedPageTemplateType(key_0),(0,tracking_src.sx)("search",{search_type:"page_templates",search_term:"",search_category:key_0})},$[15]=setSelectedPageTemplateType,$[16]=t8):t8=$[16],$[17]===Symbol.for("react.memo_cache_sentinel")?(t9=[],$[17]=t9):t9=$[17];const handleSelectPageTemplateType=(0,react_src.hb)(t8,t9);let t10,t11,t12,t13,t14,t15,t16,t17;return $[18]===Symbol.for("react.memo_cache_sentinel")?(t10=(0,i18n.__)("Search","web-stories"),$[18]=t10):t10=$[18],$[19]!==searchTerm||$[20]!==setSearchTerm?(t11=react.createElement(SearchInputContainer,null,react.createElement(searchInput,{initialValue:searchTerm,placeholder:t10,onSearch:setSearchTerm,disabled:!1})),$[19]=searchTerm,$[20]=setSearchTerm,$[21]=t11):t11=$[21],$[22]!==handleSelectPageTemplateType?(t12=()=>handleSelectPageTemplateType(null),$[22]=handleSelectPageTemplateType,$[23]=t12):t12=$[23],$[24]!==handleSelectPageTemplateType||$[25]!==pills||$[26]!==selectedPageTemplateType||$[27]!==t12?(t13=react.createElement(panes_shared.Iy,{items:pills,selectedItemId:selectedPageTemplateType,selectItem:handleSelectPageTemplateType,deselectItem:t12}),$[24]=handleSelectPageTemplateType,$[25]=pills,$[26]=selectedPageTemplateType,$[27]=t12,$[28]=t13):t13=$[28],$[29]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(ActionRow,null,react.createElement(headline.$,{as:"h2",size:types.$.XXXSmall},(0,i18n.__)("Templates","web-stories"))),$[29]=t14):t14=$[29],$[30]!==filteredPages||$[31]!==isLoading||$[32]!==pageSize||$[33]!==pageTemplates.length||$[34]!==pageTemplatesParentRef?(t15=isLoading||!pageTemplatesParentRef.current?react.createElement(panes_shared.YM,null,react.createElement(loadingSpinner.A,{animationSize:64,numCircles:8})):0===pageTemplates.length?react.createElement(defaultTemplates_Message,null,(0,i18n.__)("No page templates found.","web-stories")):react.createElement(templateList,{pageSize,parentRef:pageTemplatesParentRef,pages:filteredPages}),$[30]=filteredPages,$[31]=isLoading,$[32]=pageSize,$[33]=pageTemplates.length,$[34]=pageTemplatesParentRef,$[35]=t15):t15=$[35],$[36]!==pageTemplatesParentRef||$[37]!==t15?(t16=react.createElement(PageTemplatesParentContainer,{ref:pageTemplatesParentRef,tabIndex:-1},t14,t15),$[36]=pageTemplatesParentRef,$[37]=t15,$[38]=t16):t16=$[38],$[39]!==t11||$[40]!==t13||$[41]!==t16?(t17=react.createElement(react.Fragment,null,t11,t13,t16),$[39]=t11,$[40]=t13,$[41]=t16,$[42]=t17):t17=$[42],t17}function defaultTemplates_temp2(){return[{id:null,label:(0,i18n._x)("All","page templates","web-stories")},...Object.entries(PAGE_TEMPLATE_TYPES).map(defaultTemplates_temp)]}function defaultTemplates_temp(t0){const[key,t1]=t0,{name}=t1;return{id:key,label:name}}DefaultTemplates.propTypes={pageSize:prop_types_default().object.isRequired};const defaultTemplates=DefaultTemplates;function savedTemplates_extends(){return savedTemplates_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},savedTemplates_extends.apply(null,arguments)}DefaultTemplates.__docgenInfo={description:"",methods:[],displayName:"DefaultTemplates",props:{pageSize:{description:"",type:{name:"object"},required:!0}}};const savedTemplates_Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"savedTemplates__Wrapper",componentId:"sc-1bm5y87-0"})(["height:100%;padding-top:5px;overflow-y:scroll;overflow-x:hidden;min-height:96px;"]);function SavedTemplates(t0){const $=(0,dist.c)(29);let isLoading,loadTemplates,pageSize,rest;if($[0]!==t0){const{searchTerm,setSearchTerm,pageSize:t1,loadTemplates:t2,isLoading:t3,...t4}=t0;pageSize=t1,loadTemplates=t2,isLoading=t3,rest=t4,$[0]=t0,$[1]=isLoading,$[2]=loadTemplates,$[3]=pageSize,$[4]=rest}else isLoading=$[1],loadTemplates=$[2],pageSize=$[3],rest=$[4];const{actions:t1}=(0,api.M1)(),{deletePageTemplate}=t1,{savedTemplates,setSavedTemplates,nextTemplatesToFetch}=library_useLibrary(savedTemplates_temp),{showSnackbar}=(0,useSnackbar.d)(),ref=(0,react_src.li)(),[,update]=(0,react_src.J0)(null);let t2,t3,t4,t5;$[5]!==update?(t2=()=>{update(!1)},$[5]=update,$[6]=t2):t2=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[7]=t3):t3=$[7],(0,react_src.Nf)(t2,t3),$[8]!==loadTemplates||$[9]!==nextTemplatesToFetch?(t4=()=>{nextTemplatesToFetch&&loadTemplates()},t5=[nextTemplatesToFetch,loadTemplates],$[8]=loadTemplates,$[9]=nextTemplatesToFetch,$[10]=t4,$[11]=t5):(t4=$[10],t5=$[11]);const fetchTemplates=(0,react_src.hb)(t4,t5);let t6,t7;$[12]!==deletePageTemplate||$[13]!==savedTemplates||$[14]!==setSavedTemplates||$[15]!==showSnackbar?(t6=async id=>{try{await deletePageTemplate(id),setSavedTemplates(savedTemplates.filter((t8=>{const{templateId}=t8;return templateId!==id}))),showSnackbar({message:(0,i18n.__)("Page Template deleted.","web-stories"),dismissable:!0})}catch{showSnackbar({message:(0,i18n.__)("Unable to delete the template. Please try again.","web-stories"),dismissible:!0})}},t7=[deletePageTemplate,savedTemplates,showSnackbar,setSavedTemplates],$[12]=deletePageTemplate,$[13]=savedTemplates,$[14]=setSavedTemplates,$[15]=showSnackbar,$[16]=t6,$[17]=t7):(t6=$[16],t7=$[17]);const handleDelete=(0,react_src.hb)(t6,t7);let t8,t9;return $[18]!==fetchTemplates||$[19]!==handleDelete||$[20]!==isLoading||$[21]!==pageSize||$[22]!==ref||$[23]!==rest||$[24]!==savedTemplates?(t8=!isLoading&&ref.current?react.createElement(templateList,savedTemplates_extends({parentRef:ref,pageSize,pages:savedTemplates,handleDelete,fetchTemplates},rest)):react.createElement(panes_shared.YM,null,react.createElement(loadingSpinner.A,{animationSize:64,numCircles:8})),$[18]=fetchTemplates,$[19]=handleDelete,$[20]=isLoading,$[21]=pageSize,$[22]=ref,$[23]=rest,$[24]=savedTemplates,$[25]=t8):t8=$[25],$[26]!==ref||$[27]!==t8?(t9=react.createElement(savedTemplates_Wrapper,{ref,tabIndex:-1},t8),$[26]=ref,$[27]=t8,$[28]=t9):t9=$[28],t9}function savedTemplates_temp(state){return{savedTemplates:state.state.savedTemplates,nextTemplatesToFetch:state.state.nextTemplatesToFetch,setSavedTemplates:state.actions.setSavedTemplates}}SavedTemplates.propTypes={searchTerm:prop_types_default().string,setSearchTerm:prop_types_default().func,pageSize:prop_types_default().object.isRequired,loadTemplates:prop_types_default().func.isRequired,isLoading:prop_types_default().bool};const pageTemplates_savedTemplates=SavedTemplates;SavedTemplates.__docgenInfo={description:"",methods:[],displayName:"SavedTemplates",props:{searchTerm:{description:"",type:{name:"string"},required:!1},setSearchTerm:{description:"",type:{name:"func"},required:!1},pageSize:{description:"",type:{name:"object"},required:!0},loadTemplates:{description:"",type:{name:"func"},required:!0},isLoading:{description:"",type:{name:"bool"},required:!1}}};const utils_isDefaultPage=page=>{if(page.elements.length>1)return!1;const defaultPage=(0,elements_src.a3)();if("color"in page.backgroundColor&&"color"in defaultPage.backgroundColor&&!(0,react_src.bN)(page.backgroundColor.color,defaultPage.backgroundColor.color))return!1;const backgroundElement=page.elements.find((e=>elements_src.V7.backgroundable(e)&&e.isBackground));return!!(!backgroundElement||elements_src.V7.defaultBackground(backgroundElement)&&backgroundElement.isDefaultBackground)};const utils_createThumbnailCanvasFromFullbleedCanvas=function createThumbnailCanvasFromFullbleedCanvas(fullbleedCanvas){const thumbnailCanvas=document.createElement("canvas"),thumbnailContext=thumbnailCanvas.getContext("2d"),fullbleedHeight=Number(fullbleedCanvas.height),thumbnailHeight=Number(fullbleedCanvas.width)/src_constants.iZ,dy=(fullbleedHeight-thumbnailHeight)/2;return thumbnailCanvas.width=fullbleedCanvas.width,thumbnailCanvas.height=thumbnailHeight,thumbnailContext&&thumbnailContext.drawImage(fullbleedCanvas,0,-dy),thumbnailCanvas};var _path,_path2,_path3;function illustration_extends(){return illustration_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},illustration_extends.apply(null,arguments)}const SvgIllustration=({title,titleId,...props})=>react.createElement("svg",illustration_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 43","aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,_path||(_path=react.createElement("path",{fill:"#767E80",d:"M21.903 0H4a4 4 0 0 0-4 4v34.4a4 4 0 0 0 4 4h24a4 4 0 0 0 4-4V10.03a4 4 0 0 0-1.187-2.844l-6.097-6.03A4 4 0 0 0 21.903 0"})),_path2||(_path2=react.createElement("path",{fill:"#ADB1B3",d:"m30.146 8.146-5.893-5.893a.5.5 0 0 0-.853.354V8.5a.5.5 0 0 0 .5.5h5.893a.5.5 0 0 0 .353-.854"})),_path3||(_path3=react.createElement("path",{fill:"#E4E5E6",fillRule:"evenodd",d:"M16 29a8 8 0 1 0 0-16 8 8 0 0 0 0 16m0-12.469c.535 0 .969.434.969.969v2.531H19.5a.969.969 0 0 1 0 1.938h-2.531V24.5a.969.969 0 0 1-1.938 0v-2.531H12.5a.969.969 0 0 1 0-1.938h2.531V17.5c0-.535.434-.969.969-.969",clipRule:"evenodd"}))),illustration=(0,react.memo)(SvgIllustration),templateSave_StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).withConfig({displayName:"templateSave__StyledText",componentId:"sc-vcrsmn-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),IconWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateSave__IconWrapper",componentId:"sc-vcrsmn-1"})(["width:32px;height:42px;margin-right:29px;"]),SaveButton=styled_components_browser_esm.Ay.button.withConfig({displayName:"templateSave__SaveButton",componentId:"sc-vcrsmn-2"})(["border:0;background:none;height:56px;width:100%;padding:7px;background-color:",";transition:background-color ",";border-radius:",";display:flex;flex-direction:row;align-items:center;cursor:pointer;&:hover{background-color:",";}"," ",";"],(({theme})=>theme.colors.interactiveBg.secondaryNormal),constants.QB,(({theme})=>theme.borders.radius.small),(({theme})=>theme.colors.interactiveBg.secondaryHover),(({$isDisabled,theme})=>$isDisabled&&`\n      cursor: default;\n      background-color: ${theme.colors.interactiveBg.disable};\n      &:hover {\n        background-color: ${theme.colors.interactiveBg.disable};\n      }\n\n      ${IconWrapper} svg {\n        path:nth-child(1): ${theme.colors.fg.disable};\n        path:nth-child(2) {\n          fill: ${theme.colors.fg.tertiary};\n        }\n        path:nth-child(3) {\n          fill: ${theme.colors.fg.secondary};\n        }\n      }\n\n      ${templateSave_StyledText} {\n        color: ${theme.colors.fg.disable};\n      }\n  `),shared_styles.Y);function TemplateSave({setShowDefaultTemplates,updateList}){const{actions:{addPageTemplate}}=(0,api.M1)(),{showSnackbar}=(0,useSnackbar.d)(),{currentPage:currentPage_0}=(0,app_story.P3)((({state:{currentPage}})=>({currentPage}))),pageCanvasMap=(0,pageCanvas.R5)((({state})=>state.pageCanvasMap)),isDisabled=(0,react_src.Kr)((()=>currentPage_0&&utils_isDefaultPage(currentPage_0)),[currentPage_0]),[isDialogOpen,setIsDialogOpen]=(0,react_src.J0)(!1),handleSaveTemplate=(0,react_src.hb)((async templateName=>{if(isDisabled)return;let tmpPageDataUrl;const currentPageCanvas=pageCanvasMap[currentPage_0.id];if(currentPageCanvas){tmpPageDataUrl=utils_createThumbnailCanvasFromFullbleedCanvas(currentPageCanvas).toDataURL("image/jpeg")}try{const{templateId,...page}=currentPage_0,addedTemplate=await addPageTemplate({story_data:{...page,id:(0,v4.A)(),version:migration_src.I},featured_media:undefined,title:""!==templateName?templateName:(0,i18n.__)("Untitled","web-stories")});tmpPageDataUrl&&(addedTemplate.pregeneratedPageDataUrl=tmpPageDataUrl),updateList?.(addedTemplate),showSnackbar({message:(0,i18n.__)("Page Template saved.","web-stories"),dismissable:!0})}catch{showSnackbar({message:(0,i18n.__)("Unable to save the template. Please try again.","web-stories"),dismissable:!0})}setShowDefaultTemplates(!1),setIsDialogOpen(!1)}),[isDisabled,addPageTemplate,currentPage_0,setShowDefaultTemplates,showSnackbar,updateList,pageCanvasMap]);return react.createElement(react.Fragment,null,react.createElement(SaveButton,{"aria-disabled":isDisabled,onClick:()=>{isDisabled||setIsDialogOpen(!0)},$isDisabled:isDisabled},react.createElement(IconWrapper,null,react.createElement(illustration,{"aria-hidden":!0})),react.createElement(templateSave_StyledText,{size:types.$.Small},(0,i18n.__)("Save current page as template","web-stories"))),isDialogOpen&&react.createElement(nameDialog,{onClose:()=>{setIsDialogOpen(!1)},onSave:async templateName_0=>{await handleSaveTemplate(templateName_0),setIsDialogOpen(!1)},title:(0,i18n.__)("Save Page Template","web-stories"),placeholder:(0,i18n.__)("Untitled","web-stories"),previousInput:""}))}const templateSave=TemplateSave;function pageTemplatesPane_extends(){return pageTemplatesPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pageTemplatesPane_extends.apply(null,arguments)}TemplateSave.__docgenInfo={description:"",methods:[],displayName:"TemplateSave",props:{setShowDefaultTemplates:{description:"",type:{name:"func"},required:!0},updateList:{description:"",type:{name:"func"},required:!1}}};const pageTemplatesPane_SearchInputContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageTemplatesPane__SearchInputContainer",componentId:"sc-hm7mfr-0"})(["padding:0 ",";margin-bottom:26px;"],panes_shared.z7),StyledPane=(0,styled_components_browser_esm.Ay)(panes_shared.Zv).withConfig({displayName:"pageTemplatesPane__StyledPane",componentId:"sc-hm7mfr-1"})(["height:100%;padding:0;overflow:hidden;"]),PaneInner=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageTemplatesPane__PaneInner",componentId:"sc-hm7mfr-2"})(["height:100%;display:flex;flex-direction:column;"]),DropDownWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageTemplatesPane__DropDownWrapper",componentId:"sc-hm7mfr-3"})(["text-align:left;margin:28px 16px 17px;"]),pageTemplatesPane_ButtonWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageTemplatesPane__ButtonWrapper",componentId:"sc-hm7mfr-4"})(["padding:0 1em;margin-top:24px;"]),LOCAL_STORAGE_KEY=localStore.$.DEFAULT_VIEW_PAGE_TEMPLATE_LAYOUT,DEFAULT_TEMPLATE_VIEW=localStore.x.getItemByKey(LOCAL_STORAGE_KEY);function PageTemplatesPane(props){const{actions:{getCustomPageTemplates}}=(0,api.M1)(),{canViewDefaultTemplates}=(0,app_config.UK)(),supportsCustomTemplates=Boolean(getCustomPageTemplates),{savedTemplates,setSavedTemplates,nextTemplatesToFetch,setNextTemplatesToFetch}=library_useLibrary((state=>({savedTemplates:state.state.savedTemplates,nextTemplatesToFetch:state.state.nextTemplatesToFetch,setSavedTemplates:state.actions.setSavedTemplates,setNextTemplatesToFetch:state.actions.setNextTemplatesToFetch}))),[showDefaultTemplates,setShowDefaultTemplates]=(0,react_src.J0)(null===DEFAULT_TEMPLATE_VIEW?canViewDefaultTemplates:canViewDefaultTemplates&&DEFAULT_TEMPLATE_VIEW),[highlightedTemplate,setHighlightedTemplate]=(0,react_src.J0)(null),[searchTerm,setSearchTerm]=(0,react_src.J0)(""),[isLoading,setIsLoading]=(0,react_src.J0)(!1),updateTemplatesList=(0,react_src.hb)((page=>{setSavedTemplates((_savedTemplates=>[page,..._savedTemplates||[]])),setHighlightedTemplate(page.id),localStore.x.setItemByKey(LOCAL_STORAGE_KEY,!1)}),[setSavedTemplates]),loadTemplates=(0,react_src.hb)((async()=>{if(nextTemplatesToFetch){setIsLoading(!0);try{const{templates,hasMore}=await getCustomPageTemplates(nextTemplatesToFetch,searchTerm),updatedTemplates=templates.map((({version,templateId,...page_0})=>{const template={pages:[page_0]},migratedTemplate=(0,migration_src._)(template,version||25);return{templateId,version:migration_src.I,...migratedTemplate.pages[0]}}));setSavedTemplates((_savedTemplates_1=>[..._savedTemplates_1||[],...updatedTemplates])),setNextTemplatesToFetch(!!hasMore&&nextTemplatesToFetch+1)}catch(err){(0,tracking_src.Oz)("saved_templates",err.message),setNextTemplatesToFetch(!1),setSavedTemplates((_savedTemplates_0=>_savedTemplates_0??[]))}finally{setIsLoading(!1)}}}),[searchTerm,getCustomPageTemplates,nextTemplatesToFetch,setSavedTemplates,setNextTemplatesToFetch]);(0,react_src.vJ)((()=>{savedTemplates||showDefaultTemplates||loadTemplates()}),[loadTemplates,showDefaultTemplates,savedTemplates]),(0,react_src.vJ)((()=>{let timeout=null;return highlightedTemplate&&(timeout=setTimeout((()=>{setHighlightedTemplate(null)}),1e3)),()=>clearTimeout(timeout)}),[highlightedTemplate]);const options=[];canViewDefaultTemplates&&options.push({value:"default",label:(0,i18n.__)("Default templates","web-stories")}),supportsCustomTemplates&&options.push({value:"saved",label:(0,i18n.__)("Saved templates","web-stories")});const pageSize=(0,react_src.Kr)((()=>({width:158,height:Math.round(158/src_constants.iZ),containerHeight:Math.round(158/src_constants.yK)})),[]);return react.createElement(StyledPane,pageTemplatesPane_extends({id:pageTemplates_paneId},props),react.createElement(PaneInner,null,react.createElement(react.Fragment,null,supportsCustomTemplates&&react.createElement(pageTemplatesPane_ButtonWrapper,null,react.createElement(templateSave,{setShowDefaultTemplates,updateList:updateTemplatesList})),react.createElement(DropDownWrapper,null,options.length>1&&react.createElement(components_form.l6,{options,selectedValue:showDefaultTemplates?"default":"saved",onMenuItemClick:(_,menuItem)=>{const value="default"===menuItem;showDefaultTemplates!==value&&(setShowDefaultTemplates("default"===menuItem),localStore.x.setItemByKey(LOCAL_STORAGE_KEY,value))},"aria-label":(0,i18n.__)("Select templates type","web-stories")}))),showDefaultTemplates?react.createElement(defaultTemplates,{pageSize}):react.createElement(react.Fragment,null,react.createElement(pageTemplatesPane_SearchInputContainer,null,react.createElement(searchInput,{initialValue:searchTerm,placeholder:(0,i18n.__)("Search","web-stories"),onSearch:str=>{setSavedTemplates([]),setNextTemplatesToFetch(1),setSearchTerm(str)},disabled:!1})),react.createElement(pageTemplates_savedTemplates,{pageSize,highlightedTemplate,loadTemplates,isLoading}))))}const pageTemplatesPane=PageTemplatesPane;PageTemplatesPane.__docgenInfo={description:"",methods:[],displayName:"PageTemplatesPane"};var box4_alternate=__webpack_require__("./packages/design-system/src/icons/box4_alternate.svg");function PageTemplatesIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(box4_alternate.A,{title:(0,i18n.__)("Page templates library","web-stories")}),$[0]=t0):t0=$[0],t0}const pageTemplatesIcon=PageTemplatesIcon;PageTemplatesIcon.__docgenInfo={description:"",methods:[],displayName:"PageTemplatesIcon"};var infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx");const shopping_paneId=(0,panes_shared.kN)("shopping");var productList=__webpack_require__("./packages/story-editor/src/components/library/panes/shopping/productList.js"),sort=__webpack_require__("./packages/design-system/src/icons/sort.svg"),media_dropDownMenu=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/dropDownMenu.js");const StyledDropDownMenu=(0,styled_components_browser_esm.Ay)(media_dropDownMenu.A).withConfig({displayName:"productSort__StyledDropDownMenu",componentId:"sc-1apxa0h-0"})(["margin-left:12px;"]),StyledIcon=(0,styled_components_browser_esm.Ay)(sort.A).withConfig({displayName:"productSort__StyledIcon",componentId:"sc-1apxa0h-1"})(["width:28px !important;height:28px !important;"]),productSort_menuStylesOverride=(0,styled_components_browser_esm.AH)(["min-width:180px;margin-top:0;"]),options=[{value:"date-desc",orderby:"date",order:"desc",label:(0,i18n.__)("Recently Added","web-stories")},{value:"title-asc",orderby:"title",order:"asc",label:(0,i18n.__)("Alphabetical: A-Z","web-stories")},{value:"title-desc",orderby:"title",order:"desc",label:(0,i18n.__)("Alphabetical: Z-A","web-stories")},{value:"price-asc",orderby:"price",order:"asc",label:(0,i18n.__)("Lowest Price","web-stories")},{value:"price-desc",orderby:"price",order:"desc",label:(0,i18n.__)("Highest Price","web-stories")}];function ProductSort(t0){const $=(0,dist.c)(18),{onChange,value:t1}=t0,value=void 0===t1?"date-desc":t1,[isMenuOpen,setIsMenuOpen]=(0,react_src.J0)(!1);let t2;$[0]!==setIsMenuOpen?(t2=()=>setIsMenuOpen(!0),$[0]=setIsMenuOpen,$[1]=t2):t2=$[1];const onMenuOpen=t2;let t3;$[2]!==setIsMenuOpen?(t3=()=>setIsMenuOpen(!1),$[2]=setIsMenuOpen,$[3]=t3):t3=$[3];const onMenuClose=t3;let t4,t5;$[4]!==onChange||$[5]!==setIsMenuOpen?(t4=newValue=>{setIsMenuOpen(!1),onChange(options.find((option=>option.value===newValue)))},$[4]=onChange,$[5]=setIsMenuOpen,$[6]=t4):t4=$[6],$[7]!==onChange?(t5=[onChange],$[7]=onChange,$[8]=t5):t5=$[8];const onMenuSelected=(0,react_src.hb)(t4,t5);let t6;$[9]===Symbol.for("react.memo_cache_sentinel")?(t6=[{options}],$[9]=t6):t6=$[9];const optionsWithGroup=t6;let t7,t8,t9;return $[10]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Product sort options","web-stories"),$[10]=t7):t7=$[10],$[11]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(components_tooltip.A,{title:(0,i18n.__)("Sort","web-stories")},react.createElement(StyledIcon,null)),$[11]=t8):t8=$[11],$[12]!==isMenuOpen||$[13]!==onMenuClose||$[14]!==onMenuOpen||$[15]!==onMenuSelected||$[16]!==value?(t9=react.createElement(StyledDropDownMenu,{onMenuOpen,isMenuOpen,onMenuSelected,display:!0,onMenuClose,groups:optionsWithGroup,ariaLabel:t7,activeValue:value,dropDownHeight:340,menuStylesOverride:productSort_menuStylesOverride},t8),$[12]=isMenuOpen,$[13]=onMenuClose,$[14]=onMenuOpen,$[15]=onMenuSelected,$[16]=value,$[17]=t9):t9=$[17],t9}ProductSort.propTypes={value:prop_types_default().string,onChange:prop_types_default().func.isRequired};const productSort=ProductSort;ProductSort.__docgenInfo={description:"",methods:[],displayName:"ProductSort",props:{value:{defaultValue:{value:"'date-desc'",computed:!1},description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};var shopping_constants=__webpack_require__("./packages/story-editor/src/components/library/panes/shopping/constants.js");function shoppingPane_extends(){return shoppingPane_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},shoppingPane_extends.apply(null,arguments)}const LoadingContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"shoppingPane__LoadingContainer",componentId:"sc-14o47kz-0"})(["display:flex;justify-content:center;"]),HelperText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"shoppingPane__HelperText",componentId:"sc-14o47kz-1"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),loadingSpinnerProps={animationSize:25,circleSize:3};function ShoppingPane(props){const{showSnackbar}=(0,useSnackbar.d)(),{shoppingProvider}=(0,app.UK)(),speak=(0,useLiveRegion.A)("assertive"),{actions:{getProducts}}=(0,app.M1)(),{currentPageProducts,deleteElementById,currentPageNumber}=(0,app_story.P3)((({actions,state:{currentPage,currentPageNumber}})=>({currentPageProducts:currentPage?.elements?.filter((({type})=>type===elements_src.bV.PRODUCT)).map((({id,product})=>({elementId:id,product}))),deleteElementById:actions.deleteElementById,currentPageNumber}))),{insertElement}=library_useLibrary((state=>({insertElement:state.actions.insertElement}))),[loaded,setLoaded]=(0,react_src.J0)(!1),[isLoading,setIsLoading]=(0,react_src.J0)(!1),[canLoadMore,setCanLoadMore]=(0,react_src.J0)(!1),[searchTerm,setSearchTerm]=(0,react_src.J0)(""),[page,setPage]=(0,react_src.J0)(1),[orderby,setOrderby]=(0,react_src.J0)("date"),[order,setOrder]=(0,react_src.J0)("desc"),[isMenuFocused,setIsMenuFocused]=(0,react_src.J0)(!1),[products,setProducts]=(0,react_src.J0)([]),searchProducts=(0,react_src.hb)((async(value="",_page=1,sortBy,sortOrder)=>{setIsLoading(!0),setPage(_page),1===_page&&setLoaded(!1);try{const{products:_products,hasNextPage}=await getProducts(value,_page,sortBy,sortOrder),newProducts=1===_page?_products:[...products,..._products];setProducts(newProducts),setCanLoadMore(hasNextPage)}catch(err){(0,tracking_src.Oz)("search_products",err?.message),showSnackbar({message:err.message}),1===_page&&(setProducts([]),setPage(1)),setCanLoadMore(!1)}finally{setIsLoading(!1),setLoaded(!0)}}),[getProducts,products,showSnackbar]),searchProductsWithTelemetry=(0,react_src.hb)(((value="",_page,sortBy,sortOrder)=>{searchProducts(value,_page,sortBy,sortOrder),(0,tracking_src.sx)("search",{search_type:"products",search_term:value,search_order:sortOrder,search_orderby:sortBy,search_provider:shoppingProvider})}),[searchProducts,shoppingProvider]),debouncedProductsQuery=(0,react_src.YQ)(searchProductsWithTelemetry,300),onSearch=(0,react_src.hb)((evt=>{const value=evt.target.value;value!==searchTerm&&(setSearchTerm(value),debouncedProductsQuery(value,1,orderby,order))}),[debouncedProductsQuery,order,orderby,searchTerm]),isShoppingEnabled="none"!==shoppingProvider;(0,react_src.vJ)((()=>{isShoppingEnabled&&searchProducts(searchTerm,page,orderby,order)}),[isShoppingEnabled]);const numProducts=products.length;(0,react_src.vJ)((()=>{isShoppingEnabled||0!==numProducts||(setProducts(currentPageProducts?.map((({product})=>product))),setIsLoading(!1),setLoaded(!0))}),[currentPageProducts,isShoppingEnabled,numProducts]);const onSortBy=(0,react_src.hb)((option=>{setOrderby(option.orderby),setOrder(option.order),debouncedProductsQuery(searchTerm,1,option.orderby,option.order)}),[debouncedProductsQuery,searchTerm]),handleInputKeyPress=(0,react_src.hb)((event=>{const{key}=event;"ArrowDown"!==key&&"Tab"!==key||setIsMenuFocused(!0)}),[]),insertProduct=(0,react_src.hb)((product=>{insertElement(elements_src.bV.PRODUCT,{width:shopping_constants.x,height:shopping_constants.c,product}),(0,tracking_src.sx)("insert_product",{page:currentPageNumber,provider:shoppingProvider});const PRODUCT_ADDED_TEXT=(0,sprintf.A)((0,i18n.__)("%s added to page","web-stories"),product.productTitle);speak(PRODUCT_ADDED_TEXT)}),[insertElement,speak,currentPageNumber,shoppingProvider]),deleteProduct=(0,react_src.hb)((product=>{const element=currentPageProducts.find((item=>item.product.productId===product.productId));if(element){deleteElementById({elementId:element.elementId});const PRODUCT_REMOVED_TEXT=(0,sprintf.A)((0,i18n.__)("%s removed","web-stories"),product?.productTitle);speak(PRODUCT_REMOVED_TEXT)}}),[deleteElementById,currentPageProducts,speak]),onClick=(0,react_src.hb)(((product,onPage)=>onPage?deleteProduct(product):insertProduct(product)),[deleteProduct,insertProduct]),handleClearInput=(0,react_src.hb)((()=>{setSearchTerm(""),debouncedProductsQuery("",1,orderby,order)}),[debouncedProductsQuery,order,orderby]),onLoadMore=(0,react_src.hb)((()=>{canLoadMore&&searchProducts(searchTerm,page+1,orderby,order)}),[canLoadMore,searchProducts,order,orderby,page,searchTerm]),allDataLoadedMessage=page>1?(0,i18n.__)("No more products","web-stories"):"";return react.createElement(panes_shared.Zv,shoppingPane_extends({id:shopping_paneId},props),react.createElement(Section,{"data-testid":"products-library-pane",title:(0,i18n.__)("Products","web-stories")},react.createElement(components_form.fI,null,react.createElement(HelperText,null,(0,i18n.__)("This will add products as a tappable dot on your story.","web-stories"))),isShoppingEnabled&&react.createElement(components_form.fI,null,react.createElement(input.A,{"aria-label":(0,i18n.__)("Product search","web-stories"),inputValue:searchTerm,onChange:onSearch,placeholder:(0,i18n.__)("Search","web-stories"),onKeyDown:handleInputKeyPress,onFocus:()=>setIsMenuFocused(!1),isOpen:!0,ariaClearLabel:(0,i18n.__)("Clear product search","web-stories"),clearId:"clear-product-search",handleClearInput}),react.createElement(productSort,{onChange:onSortBy,value:`${orderby}-${order}`})),!loaded&&isLoading&&react.createElement(LoadingContainer,null,react.createElement(loadingSpinner.A,loadingSpinnerProps)),loaded&&products?.length>0&&react.createElement(react.Fragment,null,react.createElement(productList.A,{isMenuFocused,onClick,products,onPageProducts:currentPageProducts}),react.createElement(infiniteScroller.A,{allDataLoadedMessage,allDataLoadedAriaMessage:(0,i18n.__)("Products are loaded","web-stories"),onLoadMore,canLoadMore,isLoading,loadingSpinnerProps,loadingAriaMessage:(0,i18n.__)("Loading more products","web-stories")})),loaded&&!isLoading&&0===products?.length&&react.createElement(HelperText,null,(0,i18n.__)("No products found.","web-stories"))))}const shoppingPane=ShoppingPane;ShoppingPane.__docgenInfo={description:"",methods:[],displayName:"ShoppingPane"};var shopping=__webpack_require__("./packages/design-system/src/icons/shopping.svg");function ShoppingIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(shopping.A,{title:(0,i18n.__)("Shopping library","web-stories")}),$[0]=t0):t0=$[0],t0}const shoppingIcon=ShoppingIcon;ShoppingIcon.__docgenInfo={description:"",methods:[],displayName:"ShoppingIcon"};var paneIds=__webpack_require__("./packages/story-editor/src/components/library/paneIds.ts");const MEDIA={icon:mediaIcon,tooltip:(0,i18n.__)("Media","web-stories"),placement:popup_constants.W.BottomStart,Pane:mediaPane,id:paneIds.o.Media},MEDIA3P={icon:media3pIcon,tooltip:(0,i18n.__)("Third-party media","web-stories"),Pane:media3pPane,id:paneIds.o.Media3p},TEXT={icon:textIcon,tooltip:(0,i18n.__)("Text","web-stories"),Pane:textPane,id:paneIds.o.Text},SHAPES={icon:shapesIcon,tooltip:(0,i18n.__)("Shapes & Stickers","web-stories"),Pane:shapesPane,id:paneIds.o.Shapes},PAGE_TEMPLATES={icon:pageTemplatesIcon,tooltip:(0,i18n.__)("Page Templates","web-stories"),Pane:pageTemplatesPane,id:paneIds.o.PageTemplates},SHOPPING={icon:shoppingIcon,tooltip:(0,i18n.__)("Shopping","web-stories"),Pane:shoppingPane,id:paneIds.o.Shopping},LIBRARY_TAB_IDS=new Set([MEDIA,MEDIA3P,PAGE_TEMPLATES,SHAPES,TEXT,SHOPPING].map((tab=>tab.id)));function LibraryProvider(t0){const $=(0,dist.c)(79),{children}=t0,{showMedia3p,shoppingProvider,canViewDefaultTemplates}=(0,app.UK)(),{actions:t1}=(0,app.M1)(),{getMedia,getCustomPageTemplates}=t1,{hasProducts}=(0,app.P3)(libraryProvider_temp2),isShoppingEnabled=shoppingProvider&&"none"!==shoppingProvider||hasProducts,supportsCustomTemplates=Boolean(getCustomPageTemplates),showPageTemplates=canViewDefaultTemplates||supportsCustomTemplates,showMedia=Boolean(getMedia);let t2;$[0]===Symbol.for("react.memo_cache_sentinel")?(t2={},$[0]=t2):t2=$[0];const[textSets,setTextSets]=(0,react_src.J0)(t2);let t3;$[1]===Symbol.for("react.memo_cache_sentinel")?(t3={},$[1]=t3):t3=$[1];const[areTextSetsLoading,setAreTextSetsLoading]=(0,react_src.J0)(t3),[savedTemplates,_setSavedTemplates]=(0,react_src.J0)(null),[nextTemplatesToFetch,setNextTemplatesToFetch]=(0,react_src.J0)(1),[shouldUseSmartColor,setShouldUseSmartColor]=(0,react_src.J0)(!1);let t4,t5;$[2]!==_setSavedTemplates?(t4=t=>_setSavedTemplates((_savedTemplates=>(0,uniqueEntriesByKey.A)("function"==typeof t?t(_savedTemplates):t,"templateId"))),$[2]=_setSavedTemplates,$[3]=t4):t4=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t5=[],$[4]=t5):t5=$[4];const setSavedTemplates=(0,react_src.hb)(t4,t5);let t6,t7;$[5]!==_setSavedTemplates?(t6=template=>{_setSavedTemplates((_savedTemplates_0=>_savedTemplates_0.map((t_0=>t_0.templateId===template.templateId?{...t_0,...template}:t_0))))},$[5]=_setSavedTemplates,$[6]=t6):t6=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[7]=t7):t7=$[7];const updateSavedTemplate=(0,react_src.hb)(t6,t7);let t8,t9;$[8]!==isShoppingEnabled||$[9]!==showMedia||$[10]!==showMedia3p||$[11]!==showPageTemplates?(t8=()=>[showMedia&&MEDIA,showMedia3p&&MEDIA3P,TEXT,SHAPES,isShoppingEnabled&&SHOPPING,showPageTemplates&&PAGE_TEMPLATES].filter(Boolean),t9=[showMedia3p,showMedia,showPageTemplates,isShoppingEnabled],$[8]=isShoppingEnabled,$[9]=showMedia,$[10]=showMedia3p,$[11]=showPageTemplates,$[12]=t8,$[13]=t9):(t8=$[12],t9=$[13]);const tabs=(0,react_src.Kr)(t8,t9),[tab,setTab]=(0,react_src.J0)(tabs[0].id),insertElement=(0,canvas.dr)(),{insertTextSet,insertTextSetByOffset}=(0,canvas.On)(shouldUseSmartColor),{highlightedTab:highlightedTab_0}=(0,highlights.N)(libraryProvider_temp3);let t10,t11;$[14]!==highlightedTab_0||$[15]!==setTab?(t10=()=>{LIBRARY_TAB_IDS.has(highlightedTab_0)&&(setTab(highlightedTab_0),(0,tracking_src.sx)("quick_action_tab_change",{name:highlightedTab_0}))},$[14]=highlightedTab_0,$[15]=setTab,$[16]=t10):t10=$[16],$[17]!==highlightedTab_0?(t11=[highlightedTab_0],$[17]=highlightedTab_0,$[18]=t11):t11=$[18],(0,react_src.vJ)(t10,t11);const mediaTabRef=(0,react_src.li)(null),media3pTabRef=(0,react_src.li)(null),textTabRef=(0,react_src.li)(null),shapesTabRef=(0,react_src.li)(null),pageTemplatesTabRef=(0,react_src.li)(null),shoppingRef=(0,react_src.li)(null);let t12,t13;$[19]!==media3pTabRef||$[20]!==mediaTabRef||$[21]!==pageTemplatesTabRef||$[22]!==shapesTabRef||$[23]!==shoppingRef||$[24]!==textTabRef?(t12=()=>({[MEDIA.id]:mediaTabRef,[MEDIA3P.id]:media3pTabRef,[TEXT.id]:textTabRef,[SHAPES.id]:shapesTabRef,[PAGE_TEMPLATES.id]:pageTemplatesTabRef,[SHOPPING.id]:shoppingRef}),$[19]=media3pTabRef,$[20]=mediaTabRef,$[21]=pageTemplatesTabRef,$[22]=shapesTabRef,$[23]=shoppingRef,$[24]=textTabRef,$[25]=t12):t12=$[25],$[26]===Symbol.for("react.memo_cache_sentinel")?(t13=[],$[26]=t13):t13=$[26];const tabRefs=(0,react_src.Kr)(t12,t13);let t14,t15;$[27]!==areTextSetsLoading||$[28]!==insertElement||$[29]!==insertTextSet||$[30]!==insertTextSetByOffset||$[31]!==nextTemplatesToFetch||$[32]!==savedTemplates||$[33]!==setNextTemplatesToFetch||$[34]!==setSavedTemplates||$[35]!==setShouldUseSmartColor||$[36]!==setTab||$[37]!==shouldUseSmartColor||$[38]!==tab||$[39]!==tabRefs||$[40]!==tabs||$[41]!==textSets||$[42]!==updateSavedTemplate?(t14=()=>({state:{areTextSetsLoading,tab,tabRefs,textSets,savedTemplates,nextTemplatesToFetch,shouldUseSmartColor},actions:{setTab,insertElement,insertTextSet,insertTextSetByOffset,setSavedTemplates,updateSavedTemplate,setNextTemplatesToFetch,setShouldUseSmartColor},data:{tabs}}),$[27]=areTextSetsLoading,$[28]=insertElement,$[29]=insertTextSet,$[30]=insertTextSetByOffset,$[31]=nextTemplatesToFetch,$[32]=savedTemplates,$[33]=setNextTemplatesToFetch,$[34]=setSavedTemplates,$[35]=setShouldUseSmartColor,$[36]=setTab,$[37]=shouldUseSmartColor,$[38]=tab,$[39]=tabRefs,$[40]=tabs,$[41]=textSets,$[42]=updateSavedTemplate,$[43]=t14):t14=$[43],$[44]!==areTextSetsLoading||$[45]!==insertElement||$[46]!==insertTextSet||$[47]!==insertTextSetByOffset||$[48]!==nextTemplatesToFetch||$[49]!==savedTemplates||$[50]!==setNextTemplatesToFetch||$[51]!==setSavedTemplates||$[52]!==shouldUseSmartColor||$[53]!==tab||$[54]!==tabRefs||$[55]!==tabs||$[56]!==textSets||$[57]!==updateSavedTemplate?(t15=[areTextSetsLoading,tab,tabRefs,textSets,savedTemplates,insertElement,insertTextSet,insertTextSetByOffset,tabs,nextTemplatesToFetch,setNextTemplatesToFetch,shouldUseSmartColor,setSavedTemplates,updateSavedTemplate],$[44]=areTextSetsLoading,$[45]=insertElement,$[46]=insertTextSet,$[47]=insertTextSetByOffset,$[48]=nextTemplatesToFetch,$[49]=savedTemplates,$[50]=setNextTemplatesToFetch,$[51]=setSavedTemplates,$[52]=shouldUseSmartColor,$[53]=tab,$[54]=tabRefs,$[55]=tabs,$[56]=textSets,$[57]=updateSavedTemplate,$[58]=t15):t15=$[58];const state=(0,react_src.Kr)(t14,t15);let t16,t17,t18,t19,t20;return $[59]!==setAreTextSetsLoading||$[60]!==setTextSets||$[61]!==tab||$[62]!==textSets?(t16=()=>{let mounted=!0;const getTextSets=async function getTextSets(){const trackTiming=(0,tracking_src.g6)("load_text_sets");setAreTextSetsLoading(!0);const newTextSets=await async function loadTextSets(){const textSets={};return await Promise.all(Object.values(TextSetType).map((async name=>{textSets[name]=await loadTextSet(name)}))),textSets}();trackTiming(),mounted&&(setTextSets(newTextSets),setAreTextSetsLoading(!1))};return tab!==TEXT.id||Object.keys(textSets).length||getTextSets(),()=>{mounted=!1}},$[59]=setAreTextSetsLoading,$[60]=setTextSets,$[61]=tab,$[62]=textSets,$[63]=t16):t16=$[63],$[64]!==tab||$[65]!==textSets?(t17=[tab,textSets],$[64]=tab,$[65]=textSets,$[66]=t17):t17=$[66],(0,react_src.vJ)(t16,t17),$[67]!==isShoppingEnabled||$[68]!==setTab||$[69]!==tab||$[70]!==tabs[0].id?(t18=()=>{tab!==SHOPPING.id||isShoppingEnabled||setTab(tabs[0].id)},$[67]=isShoppingEnabled,$[68]=setTab,$[69]=tab,$[70]=tabs[0].id,$[71]=t18):t18=$[71],$[72]!==isShoppingEnabled||$[73]!==tab||$[74]!==tabs?(t19=[isShoppingEnabled,tab,tabs],$[72]=isShoppingEnabled,$[73]=tab,$[74]=tabs,$[75]=t19):t19=$[75],(0,react_src.vJ)(t18,t19),$[76]!==children||$[77]!==state?(t20=react.createElement(library_context.Provider,{value:state},children),$[76]=children,$[77]=state,$[78]=t20):t20=$[78],t20}function libraryProvider_temp3(t0){const{section:highlightedTab}=t0;return{highlightedTab}}function libraryProvider_temp2(t0){const{state:t1}=t0,{currentPage}=t1;return{hasProducts:currentPage?.elements?.some(libraryProvider_temp)}}function libraryProvider_temp(t0){const{type}=t0;return type===elements_src.bV.PRODUCT}LibraryProvider.propTypes={children:prop_types_default().node};const libraryProvider=LibraryProvider;LibraryProvider.__docgenInfo={description:"",methods:[],displayName:"LibraryProvider",props:{children:{description:"",type:{name:"node"},required:!1}}};var components_mediaRecording=__webpack_require__("./packages/story-editor/src/components/mediaRecording/index.js");const MediaButton=()=>{const $=(0,dist.c)(2),{onSelect}=local_useOnMediaSelect();let t0;return $[0]!==onSelect?(t0=react.createElement(components_form.c4,{renderButton:emptyStateMenu_temp,onInsert:onSelect}),$[0]=onSelect,$[1]=t0):t0=$[1],t0};function EmptyStateMenu(){const $=(0,dist.c)(15),{setHighlights:setHighlights_0}=(0,highlights.N)(emptyStateMenu_temp2),{toggleRecordingMode}=(0,components_mediaRecording.be)(emptyStateMenu_temp3),{isTranscodingEnabled}=(0,useFFmpeg.A)();let t0,t1,t2,t3,t4,t5;return $[0]!==setHighlights_0?(t0=react.createElement(components_button.A,{onClick:()=>{setHighlights_0({highlight:highlights.xP.Media})}},RIGHT_CLICK_MENU_LABELS.CHOOSE_IMAGE_OR_VIDEO),$[0]=setHighlights_0,$[1]=t0):t0=$[1],$[2]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(libraryProvider,null,react.createElement(MediaButton,null)),$[2]=t1):t1=$[2],$[3]!==isTranscodingEnabled||$[4]!==toggleRecordingMode?(t2=isTranscodingEnabled&&react.createElement(components_button.A,{onClick:toggleRecordingMode},RIGHT_CLICK_MENU_LABELS.RECORD_VIDEO),$[3]=isTranscodingEnabled,$[4]=toggleRecordingMode,$[5]=t2):t2=$[5],$[6]!==setHighlights_0?(t3=react.createElement(components_button.A,{onClick:()=>{setHighlights_0({highlight:highlights.xP.PageTemplates})}},RIGHT_CLICK_MENU_LABELS.BROWSE_PAGE_TEMPLATES),$[6]=setHighlights_0,$[7]=t3):t3=$[7],$[8]!==setHighlights_0?(t4=react.createElement(components_button.A,{onClick:()=>{setHighlights_0({highlight:highlights.xP.Media3p})}},RIGHT_CLICK_MENU_LABELS.BROWSE_STOCK_IMAGES_AND_VIDEO),$[8]=setHighlights_0,$[9]=t4):t4=$[9],$[10]!==t0||$[11]!==t2||$[12]!==t3||$[13]!==t4?(t5=react.createElement(react.Fragment,null,t0,t1,t2,t3,t4),$[10]=t0,$[11]=t2,$[12]=t3,$[13]=t4,$[14]=t5):t5=$[14],t5}function emptyStateMenu_temp3(t0){const{actions}=t0;return{toggleRecordingMode:actions.toggleRecordingMode}}function emptyStateMenu_temp2(t0){const{setHighlights}=t0;return{setHighlights}}EmptyStateMenu.propTypes=MenuPropType;const emptyStateMenu=EmptyStateMenu;function emptyStateMenu_temp(open){return react.createElement(components_button.A,{onClick:open},RIGHT_CLICK_MENU_LABELS.UPLOAD_IMAGE_OR_VIDEO)}EmptyStateMenu.__docgenInfo={description:"",methods:[],displayName:"EmptyStateMenu",props:{parentMenuRef:{description:"",type:{name:"union",value:[{name:"func"},{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}]},required:!0}}};const RightClickMenuContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"rightClickMenu__RightClickMenuContainer",componentId:"sc-11e09ag-0"})(["position:absolute;top:","px;left:","px;z-index:9999;"],(({position})=>position?.y??0),(({position})=>position?.x??0)),rightClickMenu=()=>{const $=(0,dist.c)(23),{isRTL}=(0,app.UK)(),{selectedElements,isThisEmptyStory}=(0,app_story.P3)(rightClickMenu_temp),{isMenuOpen,menuPosition,onCloseMenu,maskRef}=(0,app.lS)(),ref=(0,react_src.li)(),preventAdditionalContext=rightClickMenu_temp2;let t0,t1;$[0]!==isThisEmptyStory||$[1]!==selectedElements?(t0=()=>{if(isThisEmptyStory)return emptyStateMenu;if(selectedElements.length>1)return multipleElementsMenu;const selectedElement=selectedElements?.[0];if(selectedElement?.isDefaultBackground)return pageMenu;switch(selectedElement?.type){case elements_src.bV.IMAGE:case elements_src.bV.VIDEO:case elements_src.bV.GIF:return selectedElement?.isBackground?pageMenu:foregroundMediaMenu;case elements_src.bV.SHAPE:return shapeMenu;case elements_src.bV.TEXT:return textMenu;case elements_src.bV.STICKER:return stickerMenu;case elements_src.bV.PRODUCT:case elements_src.bV.AUDIO_STICKER:return productMenu;default:return pageMenu}},t1=[selectedElements,isThisEmptyStory],$[0]=isThisEmptyStory,$[1]=selectedElements,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const Menu=(0,react_src.Kr)(t0,t1);let t2,t3,t4,t5,t6,t7,t8;return $[4]!==ref.current?(t2=()=>{const node=ref.current;return node.addEventListener("contextmenu",preventAdditionalContext),()=>{node.removeEventListener("contextmenu",preventAdditionalContext)}},$[4]=ref.current,$[5]=t2):t2=$[5],$[6]!==ref?(t3=[ref],$[6]=ref,$[7]=t3):t3=$[7],(0,react_src.vJ)(t2,t3),$[8]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[8]=t4):t4=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Context Menu for the selected element","web-stories"),$[9]=t5):t5=$[9],$[10]!==Menu||$[11]!==ref?(t6=react.createElement(Menu,{parentMenuRef:ref}),$[10]=Menu,$[11]=ref,$[12]=t6):t6=$[12],$[13]!==isMenuOpen||$[14]!==isRTL||$[15]!==maskRef||$[16]!==onCloseMenu||$[17]!==t6?(t7=react.createElement(directionAware.A,null,react.createElement(contextMenu.A,{"data-testid":"right-click-context-menu",isOpen:isMenuOpen,onDismiss:onCloseMenu,"aria-label":t5,maskRef,onMouseDown:rightClickMenu_temp3,isRTL},t6)),$[13]=isMenuOpen,$[14]=isRTL,$[15]=maskRef,$[16]=onCloseMenu,$[17]=t6,$[18]=t7):t7=$[18],$[19]!==menuPosition||$[20]!==ref||$[21]!==t7?(t8=(0,react_src.d5)(react.createElement(styled_components_browser_esm.ID,{stylisPlugins:t4},react.createElement(RightClickMenuContainer,{position:menuPosition,ref},t7)),document.body),$[19]=menuPosition,$[20]=ref,$[21]=t7,$[22]=t8):t8=$[22],t8};function rightClickMenu_temp(value){return{selectedElements:value.state.selectedElements,isThisEmptyStory:(0,isEmptyStory.A)(value.state.pages)}}function rightClickMenu_temp2(evt){evt.preventDefault(),evt.stopPropagation()}function rightClickMenu_temp3(evt_0){return evt_0.stopPropagation()}function libraryPanes_extends(){return libraryPanes_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},libraryPanes_extends.apply(null,arguments)}function libraryPanes_temp2(t0){const{...highlighted}=t0;return highlighted}function libraryPanes_temp(state){return{tab:state.state.tab,tabs:state.data.tabs}}const libraryPanes=function LibraryPanes(){const $=(0,dist.c)(13),{tab,tabs}=library_useLibrary(libraryPanes_temp),{actions:t0}=(0,app.M1)(),{getMedia}=t0,showMediaPane=Boolean(getMedia),highlighted_0=(0,highlights.N)(libraryPanes_temp2),mediaHighlights=highlighted_0[MEDIA.id],media3pHighlights=highlighted_0[MEDIA3P.id],textHighlights=highlighted_0[TEXT.id];let t1;if($[0]!==media3pHighlights?.showEffect||$[1]!==mediaHighlights?.showEffect||$[2]!==showMediaPane||$[3]!==tab||$[4]!==tabs||$[5]!==textHighlights?.showEffect){let t2;$[7]!==media3pHighlights?.showEffect||$[8]!==mediaHighlights?.showEffect||$[9]!==showMediaPane||$[10]!==tab||$[11]!==textHighlights?.showEffect?(t2=t3=>{const{id}=t3,isActive=id===tab,paneProps={key:id,isActive,"aria-labelledby":(0,panes_shared.vU)(id)};if(!isActive)return react.createElement(panes_shared.Zv,libraryPanes_extends({key:id},paneProps));switch(id){case MEDIA.id:return showMediaPane?react.createElement(_StyledMediaPane,libraryPanes_extends({key:id},paneProps,{$_css:mediaHighlights?.showEffect&&highlights_styles.A.FLASH})):null;case MEDIA3P.id:return react.createElement(_StyledMedia3pPane,libraryPanes_extends({key:id},paneProps,{$_css2:media3pHighlights?.showEffect&&highlights_styles.A.FLASH}));case SHAPES.id:return react.createElement(shapesPane,libraryPanes_extends({key:id},paneProps));case TEXT.id:return react.createElement(_StyledTextPane,libraryPanes_extends({key:id},paneProps,{$_css3:textHighlights?.showEffect&&highlights_styles.A.FLASH}));case PAGE_TEMPLATES.id:return react.createElement(pageTemplatesPane,libraryPanes_extends({key:id},paneProps));case SHOPPING.id:return react.createElement(shoppingPane,libraryPanes_extends({key:id},paneProps));default:return null}},$[7]=media3pHighlights?.showEffect,$[8]=mediaHighlights?.showEffect,$[9]=showMediaPane,$[10]=tab,$[11]=textHighlights?.showEffect,$[12]=t2):t2=$[12],t1=tabs.map(t2),$[0]=media3pHighlights?.showEffect,$[1]=mediaHighlights?.showEffect,$[2]=showMediaPane,$[3]=tab,$[4]=tabs,$[5]=textHighlights?.showEffect,$[6]=t1}else t1=$[6];return t1};var _StyledMediaPane=(0,styled_components_browser_esm.Ay)(mediaPane)`${p=>p.$_css}`,_StyledMedia3pPane=(0,styled_components_browser_esm.Ay)(media3pPane)`${p=>p.$_css2}`,_StyledTextPane=(0,styled_components_browser_esm.Ay)(textPane).withConfig({displayName:"libraryPanes___StyledTextPane",componentId:"sc-g5zq8j-0"})(["",""],(p=>p.$_css3));const libraryLayout_Layout=styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Library","web-stories"),"data-testid":"libraryLayout"}).withConfig({displayName:"libraryLayout__Layout",componentId:"sc-6ze1kl-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(({theme})=>theme.colors.bg.secondary),(({theme})=>theme.colors.fg.primary)),TabsArea=styled_components_browser_esm.Ay.nav.attrs({"aria-label":(0,i18n.__)("Library tabs","web-stories")}).withConfig({displayName:"libraryLayout__TabsArea",componentId:"sc-6ze1kl-1"})([""]),LibraryPaneContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"libraryLayout__LibraryPaneContainer",componentId:"sc-6ze1kl-2"})(["height:100%;min-height:0;"]);function LibraryLayout(){const $=(0,dist.c)(16),{setTab,tab,tabRefs,tabs}=library_useLibrary(libraryLayout_temp),{highlight,resetHighlight}=(0,highlights.N)(libraryLayout_temp2);let t0,t1;$[0]!==resetHighlight||$[1]!==setTab?(t0=id=>{setTab(id),resetHighlight(),(0,tracking_src.sx)("library_tab_change",{name:id})},t1=[setTab,resetHighlight],$[0]=resetHighlight,$[1]=setTab,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const onTabChange=(0,react_src.hb)(t0,t1);let t2,t3,t4,t5,t6;return $[4]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Element Library Selection","web-stories"),$[4]=t2):t2=$[4],$[5]!==highlight?(t3=(node,tabId)=>{const h=highlight[tabId];node&&h?.focus&&h?.showEffect&&node.focus()},$[5]=highlight,$[6]=t3):t3=$[6],$[7]!==onTabChange||$[8]!==t3||$[9]!==tab||$[10]!==tabRefs||$[11]!==tabs?(t4=react.createElement(TabsArea,null,react.createElement(tabview.Ay,{label:t2,tabs,tabRefs,tab,onTabChange,onTabRefUpdated:t3,getTabId:panes_shared.vU,getAriaControlsId:panes_shared.kN,shortcut:"mod+option+1"})),$[7]=onTabChange,$[8]=t3,$[9]=tab,$[10]=tabRefs,$[11]=tabs,$[12]=t4):t4=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(LibraryPaneContainer,null,react.createElement(libraryPanes,null)),$[13]=t5):t5=$[13],$[14]!==t4?(t6=react.createElement(libraryLayout_Layout,null,t4,t5),$[14]=t4,$[15]=t6):t6=$[15],t6}function libraryLayout_temp2(state_0){return{highlight:{[MEDIA.id]:state_0[highlights.xP.Media],[MEDIA3P.id]:state_0[highlights.xP.Media3p],[TEXT.id]:state_0[highlights.xP.TextSet],[PAGE_TEMPLATES.id]:state_0[highlights.xP.PageTemplates]},resetHighlight:state_0.onFocusOut}}function libraryLayout_temp(state){return{tab:state.state.tab,tabRefs:state.state.tabRefs,setTab:state.actions.setTab,tabs:state.data.tabs}}const libraryLayout=LibraryLayout;LibraryLayout.__docgenInfo={description:"",methods:[],displayName:"LibraryLayout"};const MESSAGE_ID="edit-story-library-upload-message";function LibraryUploadDropTarget(t0){const $=(0,dist.c)(7),{children}=t0,{uploadMedia:uploadMedia_0}=(0,media.HZ)(libraryUploadDropTarget_temp);let t1,t2;$[0]!==uploadMedia_0?(t1=files=>{uploadMedia_0(files)},t2=[uploadMedia_0],$[0]=uploadMedia_0,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const onDropHandler=(0,react_src.hb)(t1,t2);let t3,t4;return $[3]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(uploadDropTarget.X4,{id:MESSAGE_ID,message:(0,i18n.__)("Upload to media library","web-stories")}),$[3]=t3):t3=$[3],$[4]!==children||$[5]!==onDropHandler?(t4=react.createElement(uploadDropTarget._G,{onDrop:onDropHandler,labelledBy:MESSAGE_ID},children,t3),$[4]=children,$[5]=onDropHandler,$[6]=t4):t4=$[6],t4}function libraryUploadDropTarget_temp(t0){const{actions:t1}=t0,{uploadMedia}=t1;return{uploadMedia}}LibraryUploadDropTarget.propTypes={children:prop_types_default().node.isRequired};const libraryUploadDropTarget=LibraryUploadDropTarget;function Library(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(libraryProvider,null,react.createElement(libraryUploadDropTarget,null,react.createElement(libraryLayout,null))),$[0]=t0):t0=$[0],t0}LibraryUploadDropTarget.__docgenInfo={description:"",methods:[],displayName:"LibraryUploadDropTarget",props:{children:{description:"",type:{name:"node"},required:!0}}};const library=Library;Library.__docgenInfo={description:"",methods:[],displayName:"Library"};var panelSections=__webpack_require__("./packages/design-system/src/utils/panelSections.ts"),box4=__webpack_require__("./packages/design-system/src/icons/box4.svg");function SelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(box4.A,{title:(0,i18n.__)("Selection","web-stories")}),$[0]=t0):t0=$[0],t0}const selectionIcon=SelectionIcon;function LinkIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(icons_link.A,{title:(0,i18n.__)("Link","web-stories")}),$[0]=t0):t0=$[0],t0}SelectionIcon.__docgenInfo={description:"",methods:[],displayName:"SelectionIcon"};const linkIcon=LinkIcon;LinkIcon.__docgenInfo={description:"",methods:[],displayName:"LinkIcon"};var circle_speed=__webpack_require__("./packages/design-system/src/icons/circle_speed.svg");function AnimationIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(circle_speed.A,{title:(0,i18n.__)("Animation","web-stories")}),$[0]=t0):t0=$[0],t0}const animationIcon=AnimationIcon;AnimationIcon.__docgenInfo={description:"",methods:[],displayName:"AnimationIcon"};const SELECTION={id:panelSections.q.Selection,icon:selectionIcon,tooltip:(0,i18n.__)("Selection","web-stories")},LINK={id:panelSections.q.Link,icon:linkIcon,tooltip:(0,i18n.__)("Link","web-stories")},ANIMATION={id:panelSections.q.Animation,icon:animationIcon,tooltip:(0,i18n.__)("Animation","web-stories")},style_context=(0,react_src.q6)({state:{},actions:{},tabs:{},refs:{}});function TextSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(letter_t.A,{title:(0,i18n.__)("Text selection","web-stories")}),$[0]=t0):t0=$[0],t0}const textSelectionIcon=TextSelectionIcon;function ImageSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(picture.A,{title:(0,i18n.__)("Image selection","web-stories")}),$[0]=t0):t0=$[0],t0}TextSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"TextSelectionIcon"};const imageSelectionIcon=ImageSelectionIcon;ImageSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"ImageSelectionIcon"};var video=__webpack_require__("./packages/design-system/src/icons/video.svg");function VideoSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(video.A,{title:(0,i18n.__)("Video selection","web-stories")}),$[0]=t0):t0=$[0],t0}const videoSelectionIcon=VideoSelectionIcon;function ShapeSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(shapes.A,{title:(0,i18n.__)("Shape selection","web-stories")}),$[0]=t0):t0=$[0],t0}VideoSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"VideoSelectionIcon"};const shapeSelectionIcon=ShapeSelectionIcon;ShapeSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"ShapeSelectionIcon"};var dots=__webpack_require__("./packages/design-system/src/icons/dots.svg");function MultiSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(dots.A,{title:(0,i18n.__)("Multi selection","web-stories")}),$[0]=t0):t0=$[0],t0}const multiSelectionIcon=MultiSelectionIcon;MultiSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"MultiSelectionIcon"};const productSelectionIcon_StyledIcon=(0,styled_components_browser_esm.Ay)(shopping.A).withConfig({displayName:"productSelectionIcon__StyledIcon",componentId:"sc-1jpxe2a-0"})(["width:32px !important;height:32px !important;"]);function ProductSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(productSelectionIcon_StyledIcon,{title:(0,i18n.__)("Product selection","web-stories")}),$[0]=t0):t0=$[0],t0}const productSelectionIcon=ProductSelectionIcon;ProductSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"ProductSelectionIcon"};var audio_stickers=__webpack_require__("./packages/design-system/src/icons/audio_stickers.svg");function AudioStickerSelectionIcon(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(audio_stickers.A,{title:(0,i18n.__)("Audio Sticker selection","web-stories")}),$[0]=t0):t0=$[0],t0}const audioStickerSelectionIcon=AudioStickerSelectionIcon;AudioStickerSelectionIcon.__docgenInfo={description:"",methods:[],displayName:"AudioStickerSelectionIcon"};const STYLE_TAB_IDS=new Set([SELECTION.id,LINK.id,ANIMATION.id]);function StyleProvider(t0){const $=(0,dist.c)(7),{children}=t0,{selectedElements}=(0,app_story.P3)(styleProvider_temp),{tab:highlightedTab}=(0,highlights.N)(styleProvider_temp2);let t1;$[0]!==highlightedTab?(t1=[highlightedTab],$[0]=highlightedTab,$[1]=t1):t1=$[1],(0,react_src.vJ)((()=>{STYLE_TAB_IDS.has(highlightedTab)&&setTab(highlightedTab)}),t1);const styleRef=(0,react_src.li)(null),[tab,t2]=(0,react_src.J0)(SELECTION.id),setTab=t2,selectionPaneRef=(0,react_src.li)(null),linkPaneRef=(0,react_src.li)(null),animationPaneRef=(0,react_src.li)(null);let t3,t4;$[2]!==animationPaneRef||$[3]!==linkPaneRef||$[4]!==selectionPaneRef?(t3=()=>({[SELECTION.id]:selectionPaneRef,[LINK.id]:linkPaneRef,[ANIMATION.id]:animationPaneRef}),$[2]=animationPaneRef,$[3]=linkPaneRef,$[4]=selectionPaneRef,$[5]=t3):t3=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[6]=t4):t4=$[6];const tabRefs=(0,react_src.Kr)(t3,t4);let selectionIcon=multiSelectionIcon;const icons=[...new Set(selectedElements.map(styleProvider_temp3))];1===icons.length?("text"===icons[0]&&(selectionIcon=textSelectionIcon),("image"===icons[0]||selectedElements[0].isBackground)&&(selectionIcon=imageSelectionIcon),"video"===icons[0]&&(selectionIcon=videoSelectionIcon),"shape"!==icons[0]&&"sticker"!==icons[0]||(selectionIcon=shapeSelectionIcon),"product"===icons[0]&&(selectionIcon=productSelectionIcon),"audioSticker"===icons[0]&&(selectionIcon=audioStickerSelectionIcon)):selectionIcon=multiSelectionIcon;const state_1={state:{tab},refs:{styleRef,tabRefs},actions:{setTab},data:{tabs:[{...SELECTION,icon:selectionIcon}]}},isBackgroundSelected=selectedElements[0]?.isBackground||selectedElements[0]?.isDefaultBackground,hasProductsSelected=selectedElements.some(styleProvider_temp4),hasAudioStickersSelected=selectedElements.some(styleProvider_temp5);return isBackgroundSelected||hasProductsSelected||hasAudioStickersSelected||state_1.data.tabs.push(LINK),selectedElements[0]?.isDefaultBackground||hasProductsSelected||hasAudioStickersSelected||state_1.data.tabs.push(ANIMATION),(0,react_src.vJ)((()=>{state_1.data.tabs.find((t=>t.id===tab))||setTab(SELECTION.id)}),[state_1.data.tabs,tab]),react.createElement(style_context.Provider,{value:state_1},children)}function styleProvider_temp5(t0){const{type:type_1}=t0;return"audioSticker"===type_1}function styleProvider_temp4(t0){const{type:type_0}=t0;return"product"===type_0}function styleProvider_temp3(t0){const{type}=t0;return type}function styleProvider_temp2(state_0){return{tab:state_0.section}}function styleProvider_temp(t0){const{state}=t0;return{selectedElements:state.selectedElements}}const styleProvider=StyleProvider;StyleProvider.__docgenInfo={description:"",methods:[],displayName:"StyleProvider",props:{children:{description:"",type:{name:"node"},required:!1}}};const style_useStyle=function useStyle(selector){return(0,react_src.i7)(style_context,selector??react_src.D_)};var form_context=__webpack_require__("./packages/story-editor/src/components/form/context.js");const utils_useHandlers=function useHandlers(){const $=(0,dist.c)(9);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=[],$[0]=t0):t0=$[0];const handlersRef=(0,react_src.li)(t0);let t1,t2;$[1]!==handlersRef.current?(t1=handler=>{const handlerList=handlersRef.current;return handlerList.push(handler),()=>{handlerList.splice(handlerList.indexOf(handler),1)}},$[1]=handlersRef.current,$[2]=t1):t1=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[3]=t2):t2=$[3];const registerHandler=(0,react_src.hb)(t1,t2);let t3,t4;return $[4]!==handlersRef.current||$[5]!==registerHandler?(t3=()=>[handlersRef.current,registerHandler],$[4]=handlersRef.current,$[5]=registerHandler,$[6]=t3):t3=$[6],$[7]!==registerHandler?(t4=[registerHandler],$[7]=registerHandler,$[8]=t4):t4=$[8],(0,react_src.Kr)(t3,t4)};function designPanel_extends(){return designPanel_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},designPanel_extends.apply(null,arguments)}const Form=styled_components_browser_esm.Ay.form.withConfig({displayName:"designPanel__Form",componentId:"sc-14jgzfz-0"})(["padding:0;margin:0;"]),AutoSubmitButton=styled_components_browser_esm.Ay.input.attrs({type:"submit"}).withConfig({displayName:"designPanel__AutoSubmitButton",componentId:"sc-14jgzfz-1"})(["display:none;"]);function DesignPanel({panelType,selectedElements,selectedElementIds,onSetProperties,registerSubmitHandler,...rest}){const formRef=(0,react_src.li)(null),[presubmitHandlers,registerPresubmitHandler]=utils_useHandlers(),formContext=(0,react_src.Kr)((()=>({isMultiple:selectedElements.length>1,registerPresubmitHandler})),[selectedElements,registerPresubmitHandler]),[elementUpdates,setElementUpdates]=(0,react_src.J0)({}),updatedElements=(0,react_src.Kr)((()=>selectedElements.map((element=>({...element,...elementUpdates[element.id]})))),[selectedElements,elementUpdates]),internalSubmit=(0,react_src.hb)((updates=>{if(0===Object.keys(updates).length)return;const commitUpdates=updates;presubmitHandlers.length>0&&selectedElements.forEach((element_0=>{const precommitUpdate=(0,updateProperties.A)(element_0,updates[element_0.id],!0);let commitUpdate=precommitUpdate;presubmitHandlers.forEach((handler=>{const handlerUpdate=handler({...element_0,...commitUpdate},precommitUpdate,element_0);commitUpdate={...commitUpdate,...handlerUpdate}})),commitUpdates[element_0.id]=commitUpdate})),onSetProperties((element_1=>commitUpdates[element_1.id]))}),[presubmitHandlers,selectedElements,onSetProperties]),onSubmit=registerSubmitHandler((0,react_src.hb)((evt=>{evt&&(evt.preventDefault(),setElementUpdates({})),internalSubmit(elementUpdates)}),[internalSubmit,elementUpdates])),internalSubmitRef=(0,react_src.li)();(0,react_src.vJ)((()=>{internalSubmitRef.current=internalSubmit}),[internalSubmit]);const elementUpdatesRef=(0,react_src.li)();(0,react_src.vJ)((()=>{elementUpdatesRef.current=elementUpdates}),[elementUpdates]),(0,react_src.vJ)((()=>{setElementUpdates({}),internalSubmitRef.current(elementUpdatesRef.current)}),[]);const submit=(0,react_src.hb)((()=>{setTimeout((()=>{const form=formRef.current;form&&form.dispatchEvent(new window.Event("submit",{cancelable:!0,bubbles:!0}))}))}),[]),pushUpdate=(0,react_src.hb)(((update,submitArg=!1)=>{setElementUpdates((prevUpdates=>{const newUpdates={};return selectedElements.forEach((element_2=>{const prevUpdatedElement={...element_2,...prevUpdates[element_2.id]},newUpdate=(0,updateProperties.A)(prevUpdatedElement,update,!1);newUpdates[element_2.id]={...prevUpdates[element_2.id],...newUpdate}})),newUpdates})),submitArg&&submit()}),[selectedElements,submit]),pushUpdateForObject=(0,react_src.hb)(((propertyName,update_0,defaultObject,submitArg_0=!1)=>{pushUpdate((prevUpdatedElement_0=>{const prevObject=prevUpdatedElement_0[propertyName]||defaultObject;return{[propertyName]:update_0?{...prevObject,...(0,updateProperties.A)(prevObject,update_0,!1)}:null}}),submitArg_0)}),[pushUpdate]),Panel=panelType;return react.createElement(Form,{ref:formRef,onSubmit},react.createElement(AutoSubmitButton,null),react.createElement(form_context.A.Provider,{value:formContext},react.createElement(Panel,designPanel_extends({selectedElements:updatedElements,submittedSelectedElements:selectedElements,pushUpdate,pushUpdateForObject,submit},rest))))}const designPanel=DesignPanel;DesignPanel.__docgenInfo={description:"",methods:[],displayName:"DesignPanel",props:{panelType:{description:"",type:{name:"func"},required:!0},selectedElements:{description:"",type:{name:"arrayOf",value:{name:"element"}},required:!0},selectedElementIds:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!0},onSetProperties:{description:"",type:{name:"func"},required:!0},registerSubmitHandler:{description:"",type:{name:"func"},required:!0}}};var panelTypes=__webpack_require__("./packages/design-system/src/utils/panelTypes.ts"),range=__webpack_require__("./packages/units/src/range.ts"),exclamation_triangle=__webpack_require__("./packages/design-system/src/icons/exclamation_triangle.svg"),checklist_constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js");const WarningContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"warning__WarningContainer",componentId:"sc-16blgsz-0"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(({theme})=>theme.colors.border.defaultHover),(({theme})=>theme.borders.radius.small)),WarningIcon=(0,styled_components_browser_esm.Ay)(exclamation_triangle.A).withConfig({displayName:"warning__WarningIcon",componentId:"sc-16blgsz-1"})(["width:32px;height:100%;color:",";"],(({theme})=>theme.colors.status.warning)),warning_Message=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"warning__Message",componentId:"sc-16blgsz-2"})(["max-width:calc(100% - 40px);"]);function Warning(t0){const $=(0,dist.c)(7),{message}=t0,speak=(0,useLiveRegion.A)("assertive");let t1,t2,t3,t4;return $[0]!==message||$[1]!==speak?(t1=()=>{speak(message)},t2=[message,speak],$[0]=message,$[1]=speak,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]),(0,react_src.vJ)(t1,t2),$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(WarningIcon,{title:checklist_constants.br.lowContrast.warningIcon}),$[4]=t3):t3=$[4],$[5]!==message?(t4=react.createElement(WarningContainer,{"data-testid":"warningContainer"},t3,react.createElement(warning_Message,null,message)),$[5]=message,$[6]=t4):t4=$[6],t4}Warning.propTypes={message:prop_types_default().string};const warning=Warning;Warning.__docgenInfo={description:"",methods:[],displayName:"Warning",props:{message:{description:"",type:{name:"string"},required:!1}}};var numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),dropdown=__webpack_require__("./packages/design-system/src/components/dropDown/dropdown.tsx"),arrow_up=__webpack_require__("./packages/design-system/src/icons/arrow_up.svg"),useRadioNavigation=__webpack_require__("./packages/story-editor/src/components/form/shared/useRadioNavigation.js");function directionRadioInput_extends(){return directionRadioInput_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},directionRadioInput_extends.apply(null,arguments)}const directionRadioInput_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"directionRadioInput__StyledButton",componentId:"sc-1g0wivz-0"})(["z-index:0;width:28px;height:28px;"," svg{transform-origin:50% 50%;transform:",";}"],(({selected,disabled,theme})=>selected&&!disabled&&(0,styled_components_browser_esm.AH)(["background-color:",";"],theme.colors.interactiveBg.secondaryPress)),(({direction})=>{switch(direction){case animation_src.m3.RightToLeft:return"rotate(270deg)";case animation_src.m3.TopToBottom:return"rotate(180deg)";case animation_src.m3.LeftToRight:return"rotate(90deg)";case animation_src.pL.CounterClockwise:return"rotateX(180deg) rotateZ(90deg)";case animation_src.ON.ScaleOutBottomLeft:return"rotate(-135deg)";case animation_src.ON.ScaleInTopLeft:return"rotate(135deg)";case animation_src.ON.ScaleOutTopRight:return"rotate(-315deg)";case animation_src.ON.ScaleInBottomRight:return"rotate(315deg)";default:return"rotate(0deg)"}})),DirectionIndicator=(0,styled_components_browser_esm.Ay)((t0=>{const $=(0,dist.c)(11);let className,direction,rest,t1,t2;return $[0]!==t0?(({className,direction,...rest}=t0),$[0]=t0,$[1]=className,$[2]=direction,$[3]=rest):(className=$[1],direction=$[2],rest=$[3]),$[4]!==direction?(t1=[...Object.values(animation_src.m3),...Object.values(animation_src.ON)].includes(direction)&&react.createElement(arrow_up.A,null),$[4]=direction,$[5]=t1):t1=$[5],$[6]!==className||$[7]!==direction||$[8]!==rest||$[9]!==t1?(t2=react.createElement(directionRadioInput_StyledButton,directionRadioInput_extends({variant:constants.Ak.Square,type:constants.VQ.Tertiary,size:constants.Mp.Small,className,direction},rest),t1),$[6]=className,$[7]=direction,$[8]=rest,$[9]=t1,$[10]=t2):t2=$[10],t2})).withConfig({displayName:"directionRadioInput__DirectionIndicator",componentId:"sc-1g0wivz-1"})([""]),Fieldset=styled_components_browser_esm.Ay.fieldset.withConfig({displayName:"directionRadioInput__Fieldset",componentId:"sc-1g0wivz-2"})(["position:relative;height:91px;width:88px;margin-top:1px;border-right:1px solid ",";"],(({theme})=>theme.colors.border.defaultNormal)),Figure=styled_components_browser_esm.Ay.div.withConfig({displayName:"directionRadioInput__Figure",componentId:"sc-1g0wivz-3"})(["position:absolute;top:50%;left:50%;width:8px;height:8px;background-color:",";border-radius:2px;transform:translate(-50%,-50%);"],(({theme})=>theme.colors.fg.primary)),directionRadioInput_Label=styled_components_browser_esm.Ay.label.withConfig({displayName:"directionRadioInput__Label",componentId:"sc-1g0wivz-4"})(["position:absolute;cursor:",";",""],(({disabled})=>disabled?"default":"pointer"),(({direction})=>{switch(direction){case animation_src.m3.RightToLeft:return(0,styled_components_browser_esm.AH)(["top:50%;right:","px;transform:translateY(-50%);"],3);case animation_src.m3.TopToBottom:return(0,styled_components_browser_esm.AH)(["top:","px;left:50%;transform:translateX(-50%);"],3);case animation_src.m3.LeftToRight:return(0,styled_components_browser_esm.AH)(["top:50%;left:","px;transform:translateY(-50%);"],3);case animation_src.pL.CounterClockwise:return(0,styled_components_browser_esm.AH)(["bottom:","px;right:","px;transform:translate(-10%,-10%);"],3,3);case animation_src.ON.ScaleOutBottomLeft:return(0,styled_components_browser_esm.AH)(["bottom:","px;left:","px;"],3,3);case animation_src.ON.ScaleInTopLeft:return(0,styled_components_browser_esm.AH)(["top:","px;left:","px;"],3,3);case animation_src.ON.ScaleOutTopRight:return(0,styled_components_browser_esm.AH)(["top:","px;right:","px;"],3,3);case animation_src.ON.ScaleInBottomRight:return(0,styled_components_browser_esm.AH)(["bottom:","px;right:","px;"],3,3);default:return(0,styled_components_browser_esm.AH)(["bottom:","px;left:50%;transform:translateX(-50%);"],3)}})),HiddenLegend=styled_components_browser_esm.Ay.legend.withConfig({displayName:"directionRadioInput__HiddenLegend",componentId:"sc-1g0wivz-5"})(["position:absolute;opacity:0;clip-path:polygon(0 0);cursor:pointer;"]),RadioGroup=styled_components_browser_esm.Ay.div.withConfig({displayName:"directionRadioInput__RadioGroup",componentId:"sc-1g0wivz-6"})(["position:absolute;top:0;right:0;bottom:0;left:0;"]),translations={[animation_src.m3.RightToLeft]:(0,i18n._x)("right to left","animation direction","web-stories"),[animation_src.m3.LeftToRight]:(0,i18n._x)("left to right","animation direction","web-stories"),[animation_src.m3.TopToBottom]:(0,i18n._x)("top to bottom","animation direction","web-stories"),[animation_src.m3.BottomToTop]:(0,i18n._x)("bottom to top","animation direction","web-stories"),[animation_src.pL.Clockwise]:(0,i18n._x)("clockwise","rotation direction","web-stories"),[animation_src.pL.CounterClockwise]:(0,i18n._x)("counterclockwise","rotation direction","web-stories"),[animation_src.ON.ScaleIn]:(0,i18n._x)("scale in","scale direction","web-stories"),[animation_src.ON.ScaleOut]:(0,i18n._x)("scale out","scale direction","web-stories")},valueForInternalValue=value=>{switch(value){case animation_src.ON.ScaleInTopLeft:case animation_src.ON.ScaleInBottomRight:return animation_src.ON.ScaleIn;case animation_src.ON.ScaleOutBottomLeft:case animation_src.ON.ScaleOutTopRight:return animation_src.ON.ScaleOut;default:return value}},isInternalScaleDirection=value=>[...animation_src.eC.IN,...animation_src.eC.OUT].includes(value),splitCamelCase=(camelCase="")=>camelCase?.replace(/([a-z])([A-Z])/g,"$1 $2")?.toLocaleLowerCase()?.split(" ")||[],getPrefixFromCamelCase=(camelCase="")=>splitCamelCase(camelCase)?.[0],getPostfixFromCamelCase=(camelCase="")=>{const split=splitCamelCase(camelCase);return split[split.length-1]},STANDARD_NAV_ORDER=[animation_src.m3.TopToBottom,animation_src.m3.RightToLeft,animation_src.m3.BottomToTop,animation_src.m3.LeftToRight],SCALE_NAV_ORDER=[animation_src.ON.ScaleInTopLeft,animation_src.ON.ScaleOutTopRight,animation_src.ON.ScaleInBottomRight,animation_src.ON.ScaleOutBottomLeft],sortInputOrderForKeyboardUsability=(directions,directionOrder,isRTL)=>{const referenceOrder=isRTL?directionOrder.reverse():directionOrder;return directions.sort(((a,b)=>referenceOrder.indexOf(a)-referenceOrder.indexOf(b)))},DirectionRadioInput=t0=>{const $=(0,dist.c)(24),{value,directions:t1,onChange,disabled:t2,tooltip}=t0;let t3;$[0]!==t1?(t3=void 0===t1?[]:t1,$[0]=t1,$[1]=t3):t3=$[1];const directions=t3;let t4;$[2]!==t2?(t4=void 0===t2?[]:t2,$[2]=t2,$[3]=t4):t4=$[3];const disabled=t4,inputRef=(0,react_src.li)(),{isRTL}=(0,app_config.UK)();let t5,t6;$[4]!==directions||$[5]!==isRTL?(t5=()=>{const dir=[];if(directions.includes(animation_src.ON.ScaleOut)||directions.includes(animation_src.ON.ScaleIn)){const scaleDir=[];directions.includes(animation_src.ON.ScaleOut)&&scaleDir.push(...animation_src.eC.OUT),directions.includes(animation_src.ON.ScaleIn)&&scaleDir.push(...animation_src.eC.IN),dir.push(...sortInputOrderForKeyboardUsability(scaleDir,SCALE_NAV_ORDER,isRTL))}else dir.push(...sortInputOrderForKeyboardUsability(directions,STANDARD_NAV_ORDER,isRTL));return dir},t6=[directions,isRTL],$[4]=directions,$[5]=isRTL,$[6]=t5,$[7]=t6):(t5=$[6],t6=$[7]);const flattenedDirections=(0,react_src.Kr)(t5,t6);let t7,t8,t9,t10;if((0,useRadioNavigation.A)(inputRef),$[8]===Symbol.for("react.memo_cache_sentinel")?(t7=react.createElement(Figure,null),$[8]=t7):t7=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t8=react.createElement(HiddenLegend,null,(0,i18n.__)("Which Direction?","web-stories")),$[9]=t8):t8=$[9],$[10]!==disabled||$[11]!==flattenedDirections||$[12]!==onChange||$[13]!==tooltip||$[14]!==value){let t10;$[16]!==disabled||$[17]!==onChange||$[18]!==tooltip||$[19]!==value?(t10=direction=>{const isDisabled=disabled?.includes(valueForInternalValue(direction));return react.createElement(directionRadioInput_Label,{key:direction,"aria-label":translations[direction],htmlFor:direction,direction,disabled:isDisabled},react.createElement(components_tooltip.A,{title:isDisabled?tooltip:"",placement:isInternalScaleDirection(direction)?getPostfixFromCamelCase(direction):getPrefixFromCamelCase(direction)},react.createElement(DirectionIndicator,{direction,selected:value===direction||direction?.includes(value),disabled:isDisabled,onClick:()=>onChange(valueForInternalValue(direction))})))},$[16]=disabled,$[17]=onChange,$[18]=tooltip,$[19]=value,$[20]=t10):t10=$[20],t9=flattenedDirections.map(t10),$[10]=disabled,$[11]=flattenedDirections,$[12]=onChange,$[13]=tooltip,$[14]=value,$[15]=t9}else t9=$[15];return $[21]!==inputRef||$[22]!==t9?(t10=react.createElement(Fieldset,null,t7,t8,react.createElement(RadioGroup,{ref:inputRef},t9)),$[21]=inputRef,$[22]=t9,$[23]=t10):t10=$[23],t10};DirectionRadioInput.__docgenInfo={description:"",methods:[],displayName:"DirectionRadioInput",props:{directions:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"custom",raw:"directionPropType"}},required:!1},disabled:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"custom",raw:"directionPropType"}},required:!1},value:{description:"",type:{name:"enum",value:[{value:"...Object.values(AnimationDirection)",computed:!0},{value:"...Object.values(Rotation)",computed:!0},{value:"...Object.values(ScaleDirection)",computed:!0}]},required:!1},onChange:{description:"",type:{name:"func"},required:!1},tooltip:{description:"",type:{name:"string"},required:!1}}};const outerGridBordersCss=(0,styled_components_browser_esm.AH)(["border-radius:0;border-color:"," transparent transparent transparent;"],(({theme})=>theme.colors.border.defaultNormal)),StyledInput=(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"effectInput__StyledInput",componentId:"sc-1gnssiy-0"})(["height:","px;div{height:calc(100% + 1px);"," &:focus-within{border-radius:",";}}"],45,outerGridBordersCss,(({theme})=>theme.borders.radius.small)),StyledDropDown=(0,styled_components_browser_esm.Ay)(dropdown.A).withConfig({displayName:"effectInput__StyledDropDown",componentId:"sc-1gnssiy-1"})(["button{height:46px;"," &:hover{","}&:focus-visible{border-radius:",";}}"],outerGridBordersCss,outerGridBordersCss,(({theme})=>theme.borders.radius.small)),allAnimations=[...Object.values(animation_src.m3),...Object.values(animation_src.pL),...Object.values(animation_src.ON)];function EffectInput(t0){const $=(0,dist.c)(43),{effectProps,effectConfig,field,onChange,disabledOptions,disabled:t1,tooltip}=t0,disabled=void 0!==t1&&t1;let t2,t3;$[0]!==onChange?(t2=value=>onChange(value,!0),t3=[onChange],$[0]=onChange,$[1]=t2,$[2]=t3):(t2=$[1],t3=$[2]);const directionControlOnChange=(0,react_src.hb)(t2,t3);let t4,t5;$[3]!==disabled||$[4]!==disabledOptions?(t4=()=>disabled?allAnimations:disabledOptions,t5=[disabledOptions,disabled],$[3]=disabled,$[4]=disabledOptions,$[5]=t4,$[6]=t5):(t4=$[5],t5=$[6]);const _disabledOptions=(0,react_src.Kr)(t4,t5),valueForField=effectConfig[field]??effectProps[field].defaultValue,isFloat=effectProps[field].type===animation_src.PU.Float;switch(effectProps[field].type){case animation_src.PU.Dropdown:{let t6,t7,t8,t9,t10,t11;if($[7]!==effectProps||$[8]!==field?(t6=effectProps[field].values||[],$[7]=effectProps,$[8]=field,$[9]=t6):t6=$[9],$[10]!==disabled||$[11]!==disabledOptions||$[12]!==t6){let t8;$[14]!==disabled||$[15]!==disabledOptions?(t8=t9=>{const{name,...rest}=t9;return{...rest,label:name,disabled:disabled||disabledOptions.includes(rest.value)}},$[14]=disabled,$[15]=disabledOptions,$[16]=t8):t8=$[16],t7=t6.map(t8),$[10]=disabled,$[11]=disabledOptions,$[12]=t6,$[13]=t7}else t7=$[13];return $[17]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Select a value","web-stories"),t9=(0,i18n.__)("Select effect value","web-stories"),$[17]=t8,$[18]=t9):(t8=$[17],t9=$[18]),$[19]!==onChange?(t10=evt_0=>onChange(evt_0.target.value,!0),$[19]=onChange,$[20]=t10):t10=$[20],$[21]!==disabled||$[22]!==t10||$[23]!==t7||$[24]!==valueForField?(t11=react.createElement(StyledDropDown,{options:t7,placeholder:t8,ariaLabel:t9,isKeepMenuOpenOnSelection:!1,selectedValue:valueForField,onMenuItemClick:t10,disabled}),$[21]=disabled,$[22]=t10,$[23]=t7,$[24]=valueForField,$[25]=t11):t11=$[25],t11}case animation_src.PU.DirectionPicker:{const t6=effectProps[field];let t7;return $[26]!==_disabledOptions||$[27]!==directionControlOnChange||$[28]!==t6.values||$[29]!==tooltip||$[30]!==valueForField?(t7=react.createElement(DirectionRadioInput,{value:valueForField,directions:t6.values,onChange:directionControlOnChange,disabled:_disabledOptions,tooltip}),$[26]=_disabledOptions,$[27]=directionControlOnChange,$[28]=t6.values,$[29]=tooltip,$[30]=valueForField,$[31]=t7):t7=$[31],t7}default:{const t6=effectProps[field],t7=effectProps[field],t8=effectProps[field];let t9,t10;return $[32]!==isFloat||$[33]!==onChange?(t9=evt=>onChange(isFloat?Number.parseFloat(evt.target.value):Number.parseInt(evt.target.value),!0),$[32]=isFloat,$[33]=onChange,$[34]=t9):t9=$[34],$[35]!==disabled||$[36]!==isFloat||$[37]!==t6.label||$[38]!==t7.label||$[39]!==t8.unit||$[40]!==t9||$[41]!==valueForField?(t10=react.createElement(StyledInput,{"aria-label":t6.label,suffix:t7.label,unit:t8.unit,value:valueForField,min:0,onChange:t9,isFloat,containerStyleOverride:shared_styles.t,disabled}),$[35]=disabled,$[36]=isFloat,$[37]=t6.label,$[38]=t7.label,$[39]=t8.unit,$[40]=t9,$[41]=valueForField,$[42]=t10):t10=$[42],t10}}}EffectInput.propTypes={effectProps:animation_src.ht.isRequired,effectConfig:prop_types_default().shape(animation_src.Rx).isRequired,field:prop_types_default().string.isRequired,onChange:prop_types_default().func.isRequired,disabledOptions:prop_types_default().arrayOf(prop_types_default().string),disabled:prop_types_default().bool,tooltip:prop_types_default().string};const effectInput=EffectInput;function getEffectDirection(effect={}){return(!effect.zoomDirection||!effect.panDir)&&(effect.zoomDirection?effect.zoomDirection:effect.scaleDirection?effect.scaleDirection:effect.flyInDir?effect.flyInDir:effect.rotateInDir?effect.rotateInDir:effect.whooshInDir?effect.whooshInDir:!!effect.panDir&&effect.panDir)}EffectInput.__docgenInfo={description:"",methods:[],displayName:"EffectInput",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},effectProps:{description:"",type:{name:"custom",raw:"AnimationFormPropTypes.isRequired"},required:!1},effectConfig:{description:"",type:{name:"shape",value:"GeneralAnimationPropTypes",computed:!0},required:!0},field:{description:"",type:{name:"string"},required:!0},onChange:{description:"",type:{name:"func"},required:!0},disabledOptions:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},tooltip:{description:"",type:{name:"string"},required:!1}}};const AnimationGrid=styled_components_browser_esm.Ay.div.withConfig({displayName:"effectPanel__AnimationGrid",componentId:"sc-s89nzp-0"})(["display:grid;grid-template-columns:auto auto;"]),AnimationGridField=styled_components_browser_esm.Ay.div.withConfig({displayName:"effectPanel__AnimationGridField",componentId:"sc-s89nzp-1"})((({isRotationComponent,isHalfWidthField})=>[{gridColumn:"1/3"},isRotationComponent&&{gridRow:"1/3",gridColumn:"auto"},isHalfWidthField&&{gridColumn:"auto"}]));function EffectPanel(t0){const $=(0,dist.c)(28),{animation:t1,onChange,disabledTypeOptionsMap,disabled:t2}=t0;let config,id,type;$[0]!==t1?(({id,type,...config}=t1),$[0]=t1,$[1]=config,$[2]=id,$[3]=type):(config=$[1],id=$[2],type=$[3]);const disabled=void 0!==t2&&t2;let t3;$[4]!==type?(t3=(0,animation_src.$G)(type),$[4]=type,$[5]=t3):t3=$[5];const fields=t3;let t4,t5;$[6]!==config||$[7]!==id||$[8]!==onChange||$[9]!==type?(t4=(updates,submitArg)=>{onChange({id,type,...config,...updates},submitArg)},t5=[id,type,config,onChange],$[6]=config,$[7]=id,$[8]=onChange,$[9]=type,$[10]=t4,$[11]=t5):(t4=$[10],t5=$[11]);const handleInputChange=(0,react_src.hb)(t4,t5);let t6,t7;$[12]!==fields?(t6=()=>Object.keys(fields).reduce(((memo,current)=>fields[current].type===animation_src.PU.DirectionPicker||fields[current].type===animation_src.PU.RotationPicker||memo),!1),t7=[fields],$[12]=fields,$[13]=t6,$[14]=t7):(t6=$[13],t7=$[14]);const containsVisualPicker=(0,react_src.Kr)(t6,t7);let t8,t9;$[15]!==fields?(t8=Object.keys(fields),$[15]=fields,$[16]=t8):t8=$[16],$[17]!==config||$[18]!==containsVisualPicker||$[19]!==disabled||$[20]!==disabledTypeOptionsMap||$[21]!==fields||$[22]!==handleInputChange||$[23]!==t8||$[24]!==type?(t9=t8.map(((field,index)=>react.createElement(AnimationGridField,{key:field,isRotationComponent:containsVisualPicker&&0===index,isHalfWidthField:containsVisualPicker&&(1===index||2===index)},react.createElement(effectInput,{effectProps:fields,effectConfig:config,field,onChange:(value,submitArg_0)=>{const fittedValue="number"==typeof value?Math.max(value,0):value;handleInputChange({[field]:fittedValue},submitArg_0)},disabledOptions:disabledTypeOptionsMap[type]?.options||[],disabled,tooltip:disabledTypeOptionsMap[type]?.tooltip})))),$[17]=config,$[18]=containsVisualPicker,$[19]=disabled,$[20]=disabledTypeOptionsMap,$[21]=fields,$[22]=handleInputChange,$[23]=t8,$[24]=type,$[25]=t9):t9=$[25];const content=t9;let t10;return $[26]!==content?(t10=react.createElement(AnimationGrid,null,content),$[26]=content,$[27]=t10):t10=$[27],t10}EffectPanel.propTypes={animation:prop_types_default().shape(animation_src.zd),onChange:prop_types_default().func.isRequired,disabledTypeOptionsMap:prop_types_default().objectOf(prop_types_default().shape({tooltip:prop_types_default().string,options:prop_types_default().arrayOf(prop_types_default().string)})),disabled:prop_types_default().bool};const effectPanel=EffectPanel;EffectPanel.__docgenInfo={description:"",methods:[],displayName:"EffectPanel",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},animation:{description:"",type:{name:"shape",value:"AnimationProps",computed:!0},required:!1},onChange:{description:"",type:{name:"func"},required:!0},disabledTypeOptionsMap:{description:"",type:{name:"objectOf",value:{name:"shape",value:{tooltip:{name:"string",required:!1},options:{name:"arrayOf",value:{name:"string"},required:!1}}}},required:!1}}};const BaseAnimationCell=styled_components_browser_esm.Ay.div.withConfig({displayName:"effectChooserElements__BaseAnimationCell",componentId:"sc-13qk6mh-0"})(["display:none;transform-origin:50% 50%;"]),dropKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateY(-100%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}15%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}26%{transform:translateY(-62%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}37%{transform:translateY(-0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}41.5%{transform:translateY(-30%);animation-timing-function:cubic-bezier(.75,.05,.86,.08);}50%,100%{transform:translateY(0%);animation-timing-function:cubic-bezier(.22,.61,.35,1);}"]),DropAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__DropAnimation",componentId:"sc-13qk6mh-1"})(["animation:"," 3.2s linear infinite;"],dropKeyframes),fadeInKeyframes=(0,styled_components_browser_esm.i7)(["0%{opacity:0;}50%,100%{opacity:1;}"]),FadeInAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__FadeInAnimation",componentId:"sc-13qk6mh-2"})(["animation:"," 2.5s linear infinite;"],fadeInKeyframes),flyInLeftKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(-100%);}50%,100%{transform:translateX(0%);}"]),FlyInLeftAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__FlyInLeftAnimation",componentId:"sc-13qk6mh-3"})(["animation:"," 2s linear infinite;"],flyInLeftKeyframes),flyInRightKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(100%);}50%,100%{transform:translateX(0%);}"]),FlyInRightAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__FlyInRightAnimation",componentId:"sc-13qk6mh-4"})(["animation:"," 2s linear infinite;"],flyInRightKeyframes),flyInTopKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateY(-100%);}50%,100%{transform:translateY(0%);}"]),FlyInTopAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__FlyInTopAnimation",componentId:"sc-13qk6mh-5"})(["animation:"," 2s linear infinite;"],flyInTopKeyframes),flyInBottomKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateY(100%);}50%,100%{transform:translateY(0%);}"]),FlyInBottomAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__FlyInBottomAnimation",componentId:"sc-13qk6mh-6"})(["animation:"," 2s linear infinite;"],flyInBottomKeyframes),pulseKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:scale(1);}12.5%{transform:scale(0.75);}37.5%{transform:scale(1.25);}50%,100%{transform:scale(1);}"]),PulseAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PulseAnimation",componentId:"sc-13qk6mh-7"})(["animation:"," 2s cubic-bezier(0.4,0,0.2,1) infinite;"],pulseKeyframes),rotateInLeftKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(-100%) rotate(-360deg);}50%,100%{transform:translateX(0%);}"]),RotateInLeftAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__RotateInLeftAnimation",componentId:"sc-13qk6mh-8"})(["animation:"," 2s linear infinite;"],rotateInLeftKeyframes),rotateInRightKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(100%) rotate(360deg);}50%,100%{transform:translateX(0%);}"]),RotateInRightAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__RotateInRightAnimation",componentId:"sc-13qk6mh-9"})(["animation:"," 2s linear infinite;"],rotateInRightKeyframes),twirlInKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:rotate(-540deg) scale(0.1);opacity:0;}50%,100%{transform:none;opacity:1;}"]),TwirlInAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__TwirlInAnimation",componentId:"sc-13qk6mh-10"})(["animation:"," 2s cubic-bezier(0.2,0.75,0.4,1) infinite;"],twirlInKeyframes),whooshInLeftKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(-100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),WhooshInLeftAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__WhooshInLeftAnimation",componentId:"sc-13qk6mh-11"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],whooshInLeftKeyframes),whooshInRightKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(100%);opacity:0;}50%,100%{transform:translateX(0%);opacity:1;}"]),WhooshInRightAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__WhooshInRightAnimation",componentId:"sc-13qk6mh-12"})(["animation:"," 2s cubic-bezier(0,0,0.2,1) infinite;"],whooshInRightKeyframes),panLeftKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(-100%) scale(1.5);}50%,100%{transform:translateX(200%) scale(1.5);}"]),PanLeftAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PanLeftAnimation",componentId:"sc-13qk6mh-13"})(["animation:"," 3s linear infinite;"],panLeftKeyframes),panRightKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateX(100%) scale(1.5);}50%,100%{transform:translateX(-200%) scale(1.5);}"]),PanRightAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PanRightAnimation",componentId:"sc-13qk6mh-14"})(["animation:"," 3s linear infinite;"],panRightKeyframes),panTopKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateY(-100%) scale(1.5);}50%,100%{transform:translateY(200%) scale(1.5);}"]),PanTopAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PanTopAnimation",componentId:"sc-13qk6mh-15"})(["animation:"," 3s linear infinite;"],panTopKeyframes),panBottomKeyframes=(0,styled_components_browser_esm.i7)(["0%{transform:translateY(100%) scale(1.5);}50%,100%{transform:translateY(-200%) scale(1.5);}"]),PanBottomAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PanBottomAnimation",componentId:"sc-13qk6mh-16"})(["animation:"," 3s linear infinite;"],panBottomKeyframes),zoomInKeyframes=(0,styled_components_browser_esm.i7)(["0%{opacity:0;transform:scale(0);}50%,100%{opacity:1;transform:scale(1);}"]),ZoomInAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__ZoomInAnimation",componentId:"sc-13qk6mh-17"})(["animation:"," 2s linear infinite;"],zoomInKeyframes),zoomOutKeyframes=(0,styled_components_browser_esm.i7)(["0%{opacity:0;transform:scale(2);}50%,100%{opacity:1;transform:scale(1);}"]),ZoomOutAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__ZoomOutAnimation",componentId:"sc-13qk6mh-18"})(["animation:"," 2s linear infinite;"],zoomOutKeyframes),panAndZoomKeyframes=(0,styled_components_browser_esm.i7)(["0%{opacity:0;transform:translate3d(-50%,0,0) scale(2);}50%,100%{opacity:1;transform:none;}"]),PanAndZoomAnimation=(0,styled_components_browser_esm.Ay)(BaseAnimationCell).withConfig({displayName:"effectChooserElements__PanAndZoomAnimation",componentId:"sc-13qk6mh-19"})(["animation:"," 2s linear infinite;"],panAndZoomKeyframes),getDirectionalEffect=(effect,direction)=>effectValueExceptions.includes(effect)?effect:direction?`${effect} ${direction}`.trim():effect,GRID_SIZING={HALF:"half",QUARTER:"quarter"},effectValueExceptions=[animation_src.rd.PAN_AND_ZOOM.value],backgroundEffectOptions={NO_ANIMATION:{value:"none",label:(0,i18n._x)("None","animation effect","web-stories")},[getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.LeftToRight)]:{value:getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.LeftToRight),label:(0,i18n._x)("Pan Left","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Pan Left","animation effect","web-stories")),value:animation_src.rd.PAN.value,panDirection:animation_src.m3.LeftToRight,gridSpace:GRID_SIZING.QUARTER,Effect:PanLeftAnimation,size:16}},[getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.RightToLeft)]:{value:getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.RightToLeft),label:(0,i18n._x)("Pan Right","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Pan Right","animation effect","web-stories")),value:animation_src.rd.PAN.value,panDirection:animation_src.m3.RightToLeft,gridSpace:GRID_SIZING.QUARTER,Effect:PanRightAnimation,size:16}},[getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.BottomToTop)]:{value:getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.BottomToTop),label:(0,i18n._x)("Pan Up","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Pan Up","animation effect","web-stories")),value:animation_src.rd.PAN.value,panDirection:animation_src.m3.BottomToTop,gridSpace:GRID_SIZING.QUARTER,Effect:PanBottomAnimation,size:16}},[getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.TopToBottom)]:{value:getDirectionalEffect(animation_src.rd.PAN.value,animation_src.m3.TopToBottom),label:(0,i18n._x)("Pan Down","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Pan Down","animation effect","web-stories")),value:animation_src.rd.PAN.value,panDirection:animation_src.m3.TopToBottom,gridSpace:GRID_SIZING.QUARTER,Effect:PanTopAnimation,size:16}},[getDirectionalEffect(animation_src.rd.ZOOM.value,animation_src.ON.ScaleIn)]:{value:getDirectionalEffect(animation_src.rd.ZOOM.value,animation_src.ON.ScaleIn),label:(0,i18n._x)("Zoom In","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Zoom In","animation effect","web-stories")),value:animation_src.rd.ZOOM.value,zoomDirection:animation_src.ON.ScaleIn,gridSpace:GRID_SIZING.HALF,Effect:ZoomInAnimation,size:14}},[getDirectionalEffect(animation_src.rd.ZOOM.value,animation_src.ON.ScaleOut)]:{value:getDirectionalEffect(animation_src.rd.ZOOM.value,animation_src.ON.ScaleOut),label:(0,i18n._x)("Zoom Out","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Zoom Out","animation effect","web-stories")),value:animation_src.rd.ZOOM.value,zoomDirection:animation_src.ON.ScaleOut,gridSpace:GRID_SIZING.HALF,Effect:ZoomOutAnimation,size:20}},[animation_src.rd.PAN_AND_ZOOM.value]:{value:animation_src.rd.PAN_AND_ZOOM.value,label:animation_src.rd.PAN_AND_ZOOM.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),animation_src.rd.PAN_AND_ZOOM.name),value:animation_src.rd.PAN_AND_ZOOM.value,zoomDirection:"dynamicPropertyValue",Effect:PanAndZoomAnimation,size:26}}},foregroundEffectOptions={NO_ANIMATION:{value:"none",label:(0,i18n._x)("None","animation effect","web-stories")},[animation_src.uw.DROP.value]:{value:animation_src.uw.DROP.value,label:animation_src.uw.DROP.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),animation_src.uw.DROP.name),value:animation_src.uw.DROP.value,Effect:DropAnimation}},[animation_src.uw.FADE_IN.value]:{value:animation_src.uw.FADE_IN.value,label:animation_src.uw.FADE_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),animation_src.uw.FADE_IN.name),value:animation_src.uw.FADE_IN.value,Effect:FadeInAnimation}},[getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.LeftToRight)]:{value:getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.LeftToRight),label:animation_src.uw.FLY_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Fly In from Left","animation effect","web-stories")),value:animation_src.uw.FLY_IN.value,flyInDirection:animation_src.m3.LeftToRight,gridSpace:GRID_SIZING.QUARTER,Effect:FlyInLeftAnimation,size:16}},[getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.TopToBottom)]:{value:getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.TopToBottom),label:animation_src.uw.FLY_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Fly In from Top","animation effect","web-stories")),value:animation_src.uw.FLY_IN.value,flyInDirection:animation_src.m3.TopToBottom,gridSpace:GRID_SIZING.QUARTER,Effect:FlyInTopAnimation,size:16}},[getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.BottomToTop)]:{value:getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.BottomToTop),label:animation_src.uw.FLY_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Fly In from Bottom","animation effect","web-stories")),value:animation_src.uw.FLY_IN.value,flyInDirection:animation_src.m3.BottomToTop,gridSpace:GRID_SIZING.QUARTER,Effect:FlyInBottomAnimation,size:16}},[getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.RightToLeft)]:{value:getDirectionalEffect(animation_src.uw.FLY_IN.value,animation_src.m3.RightToLeft),label:animation_src.uw.FLY_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Fly In from Right","animation effect","web-stories")),value:animation_src.uw.FLY_IN.value,flyInDirection:animation_src.m3.RightToLeft,gridSpace:GRID_SIZING.QUARTER,Effect:FlyInRightAnimation,size:16}},[animation_src.uw.PULSE.value]:{value:animation_src.uw.PULSE.value,label:animation_src.uw.PULSE.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),animation_src.uw.PULSE.name),value:animation_src.uw.PULSE.value,Effect:PulseAnimation}},[getDirectionalEffect(animation_src.uw.ROTATE_IN.value,animation_src.m3.LeftToRight)]:{value:getDirectionalEffect(animation_src.uw.ROTATE_IN.value,animation_src.m3.LeftToRight),label:(0,i18n._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Rotate In from Left","animation effect","web-stories")),value:animation_src.uw.ROTATE_IN.value,rotateInDirection:animation_src.m3.LeftToRight,gridSpace:GRID_SIZING.HALF,Effect:RotateInLeftAnimation,size:18}},[getDirectionalEffect(animation_src.uw.ROTATE_IN.value,animation_src.m3.RightToLeft)]:{value:getDirectionalEffect(animation_src.uw.ROTATE_IN.value,animation_src.m3.RightToLeft),label:(0,i18n._x)("Rotate","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Rotate In from Right","animation effect","web-stories")),value:animation_src.uw.ROTATE_IN.value,rotateInDirection:animation_src.m3.RightToLeft,gridSpace:GRID_SIZING.HALF,Effect:RotateInRightAnimation,size:18}},[animation_src.uw.TWIRL_IN.value]:{value:animation_src.uw.TWIRL_IN.value,label:animation_src.uw.TWIRL_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),animation_src.uw.TWIRL_IN.name),value:animation_src.uw.TWIRL_IN.value,Effect:TwirlInAnimation,size:26}},[getDirectionalEffect(animation_src.uw.WHOOSH_IN.value,animation_src.m3.LeftToRight)]:{value:getDirectionalEffect(animation_src.uw.WHOOSH_IN.value,animation_src.m3.LeftToRight),label:animation_src.uw.WHOOSH_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Whoosh In from Left","animation effect","web-stories")),value:animation_src.uw.WHOOSH_IN.value,whooshInDirection:animation_src.m3.LeftToRight,gridSpace:GRID_SIZING.HALF,Effect:WhooshInLeftAnimation,size:20}},[getDirectionalEffect(animation_src.uw.WHOOSH_IN.value,animation_src.m3.RightToLeft)]:{value:getDirectionalEffect(animation_src.uw.WHOOSH_IN.value,animation_src.m3.RightToLeft),label:animation_src.uw.WHOOSH_IN.name,animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Whoosh In from Right","animation effect","web-stories")),value:animation_src.uw.WHOOSH_IN.value,whooshInDirection:animation_src.m3.RightToLeft,gridSpace:GRID_SIZING.HALF,Effect:WhooshInRightAnimation,size:20}},[getDirectionalEffect(animation_src.uw.ZOOM.value,animation_src.ON.ScaleIn)]:{value:getDirectionalEffect(animation_src.uw.ZOOM.value,animation_src.ON.ScaleIn),label:(0,i18n._x)("Scale In","animation effect","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Scale In","animation effect","web-stories")),value:animation_src.uw.ZOOM.value,scaleDirection:animation_src.ON.ScaleIn,gridSpace:GRID_SIZING.HALF,Effect:ZoomInAnimation,size:14}},[getDirectionalEffect(animation_src.uw.ZOOM.value,animation_src.ON.ScaleOut)]:{value:getDirectionalEffect(animation_src.uw.ZOOM.value,animation_src.ON.ScaleOut),label:(0,i18n.__)("Scale Out","web-stories"),animation:{ariaLabel:(0,sprintf.A)((0,i18n.__)('"%s" Effect',"web-stories"),(0,i18n._x)("Scale Out","animation effect","web-stories")),value:animation_src.uw.ZOOM.value,scaleDirection:animation_src.ON.ScaleOut,gridSpace:GRID_SIZING.HALF,Effect:ZoomOutAnimation,size:20}}},ANIMATION_OPTION_PROP_TYPE={ariaLabel:prop_types_default().string,value:prop_types_default().string.isRequired,Effect:prop_types_default().any,gridSpace:prop_types_default().oneOf(Object.values(GRID_SIZING)),size:prop_types_default().number,scaleDirection:prop_types_default().oneOf(Object.values(animation_src.ON)),panDirection:prop_types_default().oneOf(Object.values(animation_src.m3)),zoomDirection:prop_types_default().oneOf(Object.values(animation_src.ON)),flyInDirection:prop_types_default().oneOf(Object.values(animation_src.m3)),rotateInDirection:prop_types_default().oneOf(Object.values(animation_src.m3)),whooshInDirection:prop_types_default().oneOf(Object.values(animation_src.m3))},ANIMATION_DROPDOWN_OPTION_PROP_TYPE={value:prop_types_default().string.isRequired,label:prop_types_default().string.isRequired,animation:prop_types_default().shape(ANIMATION_OPTION_PROP_TYPE)},utils_getDisabledBackgroundEffects=(prop_types_default().oneOf([...Object.values(animation_src.m3),...Object.values(animation_src.ON),!1]),(backgroundEffectOptions,disabledTypeOptionsMap)=>{const disabledDirectionalEffects=Object.entries(disabledTypeOptionsMap).filter((([effect])=>-1===effectValueExceptions.indexOf(effect))).map((([effect,val])=>[effect,val.options])).reduce(((directionalEffects,[effect,directions])=>[...directionalEffects,...(directions||[]).map((dir=>getDirectionalEffect(effect,dir)))]),[]);return Object.keys(backgroundEffectOptions).filter((directionalEffect=>disabledDirectionalEffects.includes(directionalEffect)))}),utils_hasDynamicProperty=animation=>Object.values(animation).includes("dynamicPropertyValue"),utils_updateDynamicProps=({animation,disabledOptions=[]})=>{const panDirection=animation.panDirection&&!disabledOptions.includes(animation.panDirection)?animation.panDirection:Object.values(animation_src.m3).filter((direction=>!disabledOptions.includes(direction)))?.[0]||void 0;return animation.value===animation_src.rd.PAN_AND_ZOOM.value?{...animation,zoomDirection:disabledOptions.includes(animation_src.ON.ScaleIn)?animation_src.ON.ScaleOut:animation_src.ON.ScaleIn,panDirection}:animation},utils_generateDynamicProps=({animation,disabledTypeOptionsMap})=>utils_hasDynamicProperty(animation)?utils_updateDynamicProps({animation,disabledOptions:disabledTypeOptionsMap[animation.value]?.options}):animation,ContentWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"effectChooserDropdown__ContentWrapper",componentId:"sc-1d71y2l-0"})(["display:inline-block;"]),AnimationListItem=styled_components_browser_esm.Ay.li.withConfig({displayName:"effectChooserDropdown__AnimationListItem",componentId:"sc-1d71y2l-1"})(["border:none;background:",";border-radius:",";height:","px;position:relative;grid-column-start:",";overflow:hidden;font-family:'Teko',sans-serif;font-size:","px;line-height:1;color:",";text-transform:uppercase;transition:background 0.1s linear;margin:0;& > div{height:100%;display:flex;align-items:center;justify-content:center;text-align:center;}&[aria-disabled='true']{background:",";}&:hover:not([aria-disabled='true']){cursor:pointer;}&:hover:not([aria-disabled='true']),&:focus:not([aria-disabled='true']){background:",";","{display:inline-block;}","{display:none;}}"," ",";"],(({active,theme})=>active?theme.colors.interactiveBg.secondaryPress:theme.colors.interactiveBg.secondaryNormal),(({theme})=>theme.borders.radius.small),56,(({gridSpace})=>(gridSpace=>{switch(gridSpace){case GRID_SIZING.HALF:return"span 2";case GRID_SIZING.QUARTER:return"span 1";default:return"span 4"}})(gridSpace)),(({size=28})=>size),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.colors.interactiveBg.disable),(({active,theme})=>active?theme.colors.interactiveBg.secondaryPress:theme.colors.interactiveBg.secondaryHover),BaseAnimationCell,ContentWrapper,(({noEffect})=>noEffect&&(0,styled_components_browser_esm.AH)(["height:36px;font-size:14px;text-transform:none;","{display:inline-block !important;}"],ContentWrapper)),shared_styles.Y),styleOverrideForAnimationEffectMenu=(0,styled_components_browser_esm.AH)(["display:inline-block;margin-top:0;padding:16px 4px 16px 16px;ul{display:grid;justify-content:center;gap:12px 4px;grid-template-columns:repeat(4,1fr);position:relative;}"]),styleOverrideForSelectButton=({theme})=>(0,styled_components_browser_esm.AH)(["margin:-1px -1px 0 -1px;width:calc(100% + 2px);border-color:transparent transparent "," transparent;height:","px;&:hover{border-color:transparent transparent "," transparent;}",""],theme.colors.border.defaultNormal,45,theme.colors.border.defaultNormal,shared_styles.Y);function dropdownItem_extends(){return dropdownItem_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dropdownItem_extends.apply(null,arguments)}const DropDownItem=(0,react_src.Rf)(((t0,ref)=>{const $=(0,dist.c)(21);let option,rest;$[0]!==t0?(({option,...rest}=t0),$[0]=t0,$[1]=option,$[2]=rest):(option=$[1],rest=$[2]);const t1=option.animation?.ariaLabel||option.label,t2=option.animation?.size,t3=option.animation?.gridSpace,t4=!option.animation?.Effect,t5=option?.tooltip||"";let t6,t7,t8,t9;return $[3]!==option.label?(t6=react.createElement(ContentWrapper,null,option.label),$[3]=option.label,$[4]=t6):t6=$[4],$[5]!==option.animation||$[6]!==option.label?(t7=option.animation?.Effect&&react.createElement(option.animation.Effect,null,option.label),$[5]=option.animation,$[6]=option.label,$[7]=t7):t7=$[7],$[8]!==t5||$[9]!==t6||$[10]!==t7?(t8=react.createElement(components_tooltip.A,{title:t5},t6,t7),$[8]=t5,$[9]=t6,$[10]=t7,$[11]=t8):t8=$[11],$[12]!==option.disabled||$[13]!==ref||$[14]!==rest||$[15]!==t1||$[16]!==t2||$[17]!==t3||$[18]!==t4||$[19]!==t8?(t9=react.createElement(AnimationListItem,dropdownItem_extends({ref,"aria-label":t1,disabled:option.disabled,"aria-disabled":option.disabled,size:t2,gridSpace:t3,noEffect:t4},rest),t8),$[12]=option.disabled,$[13]=ref,$[14]=rest,$[15]=t1,$[16]=t2,$[17]=t3,$[18]=t4,$[19]=t8,$[20]=t9):t9=$[20],t9})),dropdownItem=DropDownItem;DropDownItem.displayName="DropDownItem",DropDownItem.propTypes={option:prop_types_default().shape(ANIMATION_DROPDOWN_OPTION_PROP_TYPE)},DropDownItem.__docgenInfo={description:"",methods:[],displayName:"DropDownItem",props:{option:{description:"",type:{name:"shape",value:{value:{name:"string",required:!0},label:{name:"string",required:!0},animation:{name:"shape",value:{ariaLabel:{name:"string",required:!1},value:{name:"string",required:!0},Effect:{name:"any",required:!1},gridSpace:{name:"enum",value:[{value:'"half"',computed:!1},{value:'"quarter"',computed:!1}],required:!1},size:{name:"number",required:!1},scaleDirection:{name:"enum",computed:!0,value:"Object.values(ScaleDirection)",required:!1},panDirection:{name:"enum",computed:!0,value:"Object.values(AnimationDirection)",required:!1},zoomDirection:{name:"enum",computed:!0,value:"Object.values(ScaleDirection)",required:!1},flyInDirection:{name:"enum",computed:!0,value:"Object.values(AnimationDirection)",required:!1},rotateInDirection:{name:"enum",computed:!0,value:"Object.values(AnimationDirection)",required:!1},whooshInDirection:{name:"enum",computed:!0,value:"Object.values(AnimationDirection)",required:!1}},required:!1}}},required:!1}}};const EffectChooserDropdown=(0,react_src.Rf)((function EffectChooserDropdown({onAnimationSelected,onNoEffectSelected,isBackgroundEffects=!1,selectedEffectType,disabledTypeOptionsMap,direction,selectButtonStylesOverride,disabled=!1},ref){const selectedValue=(0,react_src.Kr)((()=>getDirectionalEffect(selectedEffectType,direction)),[selectedEffectType,direction]),disabledBackgroundEffects=(0,react_src.Kr)((()=>isBackgroundEffects&&utils_getDisabledBackgroundEffects(backgroundEffectOptions,disabledTypeOptionsMap)),[disabledTypeOptionsMap,isBackgroundEffects]),expandedPlacement=isBackgroundEffects?popup_constants.W.Bottom:popup_constants.W.Top,animationOptionsObject=isBackgroundEffects?backgroundEffectOptions:foregroundEffectOptions,availableAnimationOptions=Object.values(animationOptionsObject),assembledOptions=(0,react_src.Kr)((()=>availableAnimationOptions?.map((option=>{const isDisabled=isBackgroundEffects&&disabledBackgroundEffects.includes(option.value);return{...option,disabled:isDisabled,tooltip:isDisabled&&disabledTypeOptionsMap[option.animation?.value]?.tooltip}}))),[availableAnimationOptions,isBackgroundEffects,disabledBackgroundEffects,disabledTypeOptionsMap]),handleSelect=(0,react_src.hb)(((event,value)=>{if(event.preventDefault(),"none"===value)return void(Boolean(selectedValue)&&onNoEffectSelected());const selectedAnimation=animationOptionsObject[value]?.animation,animationWithDynamicProps=utils_generateDynamicProps({animation:selectedAnimation,disabledTypeOptionsMap});onAnimationSelected({animation:animationWithDynamicProps.value,panDir:animationWithDynamicProps?.panDirection,zoomDirection:animationWithDynamicProps?.zoomDirection,flyInDir:animationWithDynamicProps?.flyInDirection,rotateInDir:animationWithDynamicProps?.rotateInDirection,whooshInDir:animationWithDynamicProps?.whooshInDirection,scaleDirection:animationWithDynamicProps?.scaleDirection})}),[animationOptionsObject,disabledTypeOptionsMap,onAnimationSelected,selectedValue,onNoEffectSelected]),innerStyleOverrides=selectedValue&&"none"!==selectedValue?styleOverrideForSelectButton:shared_styles.Y,buttonStyleOverride=(0,styled_components_browser_esm.AH)([""," ",""],innerStyleOverrides,void 0!==selectButtonStylesOverride&&selectButtonStylesOverride);return react.createElement(dropdown.A,{ref,options:assembledOptions,placeholder:(0,i18n._x)("None","animation effect","web-stories"),selectedValue,ariaLabel:(0,i18n.__)("Animation: Effect Chooser","web-stories"),menuStylesOverride:styleOverrideForAnimationEffectMenu,renderItem:dropdownItem,onMenuItemClick:handleSelect,placement:expandedPlacement,isKeepMenuOpenOnSelection:!0,selectButtonStylesOverride:buttonStyleOverride,disabled})})),effectChooserDropdown=EffectChooserDropdown;EffectChooserDropdown.__docgenInfo={description:"",methods:[],displayName:"EffectChooserDropdown",props:{isBackgroundEffects:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onAnimationSelected:{description:"",type:{name:"func"},required:!0},direction:{description:"",type:{name:"enum",value:[{value:"...Object.values(AnimationDirection)",computed:!0},{value:"...Object.values(ScaleDirection)",computed:!0},{value:"false",computed:!1}]},required:!1},selectedEffectType:{description:"",type:{name:"string"},required:!1},onNoEffectSelected:{description:"",type:{name:"func"},required:!0},disabledTypeOptionsMap:{description:"",type:{name:"objectOf",value:{name:"shape",value:{tooltip:{name:"string",required:!1},options:{name:"arrayOf",value:{name:"string"},required:!1}}}},required:!1},selectButtonStylesOverride:{description:"",type:{name:"union",value:[{name:"object"},{name:"array"}]},required:!1}}};const StyledRow=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"animation__StyledRow",componentId:"sc-1j3eshx-0"})(["margin-bottom:-1px;"]),GroupWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"animation__GroupWrapper",componentId:"sc-1j3eshx-1"})([""," margin-bottom:16px;"],(({hasAnimation,theme})=>hasAnimation&&`\n    border: 1px solid ${theme.colors.border.defaultNormal};\n    border-radius: ${theme.borders.radius.small};\n  `)),backgroundAnimationTooltip=(0,i18n.__)("The background image is too small to animate. Double click on the bg & scale the image before applying the animation.","web-stories");function AnimationPanel({selectedElements,selectedElementAnimations,pushUpdateForObject,updateAnimationState}){const isFirstPage=(0,app.P3)((({state:{currentPageNumber}})=>1===currentPageNumber)),playUpdatedAnimationRef=(0,react_src.li)(!1),{highlight,resetHighlight}=(0,highlights.N)((state=>({highlight:state[highlights.xP.Animation],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}))),isBackground=1===selectedElements.length&&selectedElements[0].isBackground,updatedAnimations=(0,react_src.Kr)((()=>{const updated=selectedElements.map((element=>element.animation)).filter(Boolean);return selectedElementAnimations.map((anim=>({...updated.find((a=>a.id===anim.id))||anim}))).filter((a_0=>!a_0.delete))}),[selectedElements,selectedElementAnimations]),handlePanelChange=(0,react_src.hb)(((animation,submitArg=!1)=>{(0,react_src.bN)(animation,updatedAnimations[0])||(updateAnimationState({animationState:animation_src.TR.Reset}),pushUpdateForObject("animation",animation,null,submitArg),playUpdatedAnimationRef.current=!0)}),[pushUpdateForObject,updatedAnimations,updateAnimationState]),handleAddOrUpdateElementEffect=(0,react_src.hb)((({animation:animation_0,...options})=>{if(!animation_0)return;const id=selectedElementAnimations[0]?.id||(0,v4.A)(),defaults=(0,animation_src.g9)(animation_0),persisted=selectedElementAnimations[0]?.type===animation_0?{duration:selectedElementAnimations[0]?.duration,delay:selectedElementAnimations[0]?.delay}:{};pushUpdateForObject("animation",{id,type:animation_0,...defaults,...persisted,...options},null,!0),playUpdatedAnimationRef.current=!0}),[selectedElementAnimations,pushUpdateForObject]),activeElement=document.activeElement,debouncedUpdateAnimationState=(0,react_src.YQ)((()=>{playUpdatedAnimationRef.current&&(updateAnimationState({animationState:animation_src.TR.PlayingSelected}),playUpdatedAnimationRef.current=!1)}),300);(0,react_src.vJ)(debouncedUpdateAnimationState,[selectedElementAnimations,updateAnimationState,activeElement,debouncedUpdateAnimationState]);const handleRemoveEffect=(0,react_src.hb)((()=>{pushUpdateForObject("animation",{...updatedAnimations[0],delete:!0},null,!0)}),[pushUpdateForObject,updatedAnimations]),selectedElement=selectedElements[0],disabledTypeOptionsMap=(0,react_src.Kr)((()=>{if(!selectedElement)return{};if(selectedElement.isBackground){const{isMedia}=(0,elements_src.zh)(selectedElement.type),hasOffset=isMedia?(0,animation_src.VS)(selectedElement):animation_src.kc,normalizedScale=(0,range.qB)(selectedElement.scale||0,{MIN:animation_src.UD,MAX:animation_src.oQ});return{[animation_src.rd.PAN.value]:{tooltip:backgroundAnimationTooltip,options:[!hasOffset.bottom&&animation_src.m3.TopToBottom,!hasOffset.left&&animation_src.m3.RightToLeft,!hasOffset.top&&animation_src.m3.BottomToTop,!hasOffset.right&&animation_src.m3.LeftToRight].filter(Boolean)},[animation_src.rd.ZOOM.value]:{tooltip:backgroundAnimationTooltip,options:[normalizedScale<=.01&&animation_src.ON.ScaleIn,normalizedScale>=.99&&animation_src.ON.ScaleOut].filter(Boolean)},[animation_src.rd.PAN_AND_ZOOM.value]:{tooltip:backgroundAnimationTooltip,options:[!hasOffset.bottom&&animation_src.m3.TopToBottom,!hasOffset.left&&animation_src.m3.RightToLeft,!hasOffset.top&&animation_src.m3.BottomToTop,!hasOffset.right&&animation_src.m3.LeftToRight,normalizedScale<=.01&&animation_src.ON.ScaleIn,normalizedScale>=.99&&animation_src.ON.ScaleOut].filter(Boolean)}}}return{}}),[selectedElement]),selectedEffectTitle=function getEffectName(type){return[...Object.values(animation_src.uw),...Object.values(animation_src.gb),...Object.values(animation_src.rd)].find((o=>o.value===type))?.name||""}(updatedAnimations[0]?.type);return selectedElements.length>1?null:react.createElement(_StyledSimplePanel,{name:"animation",title:(0,i18n.__)("Animation","web-stories"),onAnimationEnd:()=>resetHighlight(),isPersistable:!highlight,$_css:highlight?.showEffect&&highlights_styles.A.FLASH},react.createElement(GroupWrapper,{hasAnimation:selectedEffectTitle},react.createElement(StyledRow,null,react.createElement(effectChooserDropdown,{ref:node=>{node&&highlight?.focus&&highlight?.showEffect&&node.focus()},onAnimationSelected:handleAddOrUpdateElementEffect,onNoEffectSelected:handleRemoveEffect,isBackgroundEffects:isBackground,disabledTypeOptionsMap,direction:getEffectDirection(updatedAnimations[0]),selectedEffectType:updatedAnimations[0]?.type,selectButtonStylesOverride:highlight?.focus&&highlights_styles.A.OUTLINE,disabled:isFirstPage})),updatedAnimations[0]&&react.createElement(effectPanel,{animation:updatedAnimations[0],onChange:handlePanelChange,disabledTypeOptionsMap,disabled:isFirstPage})),isFirstPage&&react.createElement(warning,{message:checklist.Bc.firstPageAnimation.animationPanel}))}const animation=AnimationPanel;AnimationPanel.__docgenInfo={description:"",methods:[],displayName:"AnimationPanel",props:{selectedElements:{description:"",type:{name:"arrayOf",value:{name:"element"}},required:!0},selectedElementAnimations:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"AnimationPropType"}},required:!1},pushUpdateForObject:{description:"",type:{name:"func"},required:!0},updateAnimationState:{description:"",type:{name:"func"},required:!1}}};var _StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"animation___StyledSimplePanel",componentId:"sc-1j3eshx-2"})(["",""],(p=>p.$_css));function StickerSize(t0){const $=(0,dist.c)(19),{selectedElements,pushUpdate}=t0,stickerObj=selectedElements[0],size=stickerObj.size,type=stickerObj.sticker,{highlight,resetHighlight}=(0,highlights.N)(stickerSize_temp);let t1,t2;$[0]!==pushUpdate||$[1]!==type?(t1=(_,isSmall)=>{const stickerSize=isSmall?"small":"large",{width,height}=function getDimensionsForAudioSticker(type,size){let width,height;return"small"===size?(width=story_editor_src_constants.No.SMALL*story_editor_src_constants.Ti[type],height=story_editor_src_constants.No.SMALL):(width=story_editor_src_constants.No.LARGE*story_editor_src_constants.Ti[type],height=story_editor_src_constants.No.LARGE),{width,height}}(type,stickerSize);pushUpdate({width,height,size:stickerSize},!0)},t2=[pushUpdate,type],$[0]=pushUpdate,$[1]=type,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]);const onSizeChange=(0,react_src.hb)(t1,t2),t3=highlight?.showEffect&&highlights_styles.A.FLASH;let t4,t5;$[4]!==resetHighlight?(t4=()=>resetHighlight(),$[4]=resetHighlight,$[5]=t4):t4=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Size","web-stories"),$[6]=t5):t5=$[6];const t6=!highlight;let t7,t8;$[7]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Audio Sticker Size","web-stories"),$[7]=t7):t7=$[7],$[8]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Size","web-stories"),$[8]=t8):t8=$[8];const t9="small"===size;let t10,t11,t12,t13;return $[9]===Symbol.for("react.memo_cache_sentinel")?(t10=(0,i18n.__)("Small","web-stories"),t11=(0,i18n.__)("Large","web-stories"),$[9]=t10,$[10]=t11):(t10=$[9],t11=$[10]),$[11]!==onSizeChange||$[12]!==t9?(t12=react.createElement(components_form.fI,null,react.createElement(components_form.dO,{groupLabel:t8,name:"audio-sticker-size-switch",value:t9,onLabel:t10,offLabel:t11,onChange:onSizeChange})),$[11]=onSizeChange,$[12]=t9,$[13]=t12):t12=$[13],$[14]!==t12||$[15]!==t3||$[16]!==t4||$[17]!==t6?(t13=react.createElement(stickerSize_StyledSimplePanel,{onAnimationEnd:t4,name:"audioStickerSize",title:t5,isPersistable:t6,"aria-labelledby":null,"aria-label":t7,$_css:t3},t12),$[14]=t12,$[15]=t3,$[16]=t4,$[17]=t6,$[18]=t13):t13=$[18],t13}function stickerSize_temp(state){return{highlight:state[highlights.xP.Style],resetHighlight:state.onFocusOut}}const stickerSize=StickerSize;StickerSize.propTypes={selectedElements:prop_types_default().array,pushUpdate:prop_types_default().func},StickerSize.__docgenInfo={description:"",methods:[],displayName:"StickerSize",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}};var stickerSize_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"stickerSize___StyledSimplePanel",componentId:"sc-txz5tm-0"})(["",""],(p=>p.$_css));const AudioStickerPreset={"headphone-cat":{label:(0,i18n.__)("Headphone Cat","web-stories")},"tape-player":{label:(0,i18n.__)("Tape Player","web-stories")},"loud-speaker":{label:(0,i18n.__)("Loud Speaker","web-stories")},"audio-cloud":{label:(0,i18n.__)("Audio Cloud","web-stories")}},StickerImage=styled_components_browser_esm.Ay.img.withConfig({displayName:"stickerType__StickerImage",componentId:"sc-1ys38h7-0"})(["width:100%;"]);function StickerType(t0){const $=(0,dist.c)(17),{selectedElements,pushUpdate}=t0,{cdnURL}=(0,app_config.UK)(),stickerObj=selectedElements[0],{highlight,resetHighlight}=(0,highlights.N)(stickerType_temp);let t1,t2;$[0]!==pushUpdate?(t1=stickerType=>{pushUpdate({sticker:stickerType},!0)},t2=[pushUpdate],$[0]=pushUpdate,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const onStickerTypeChange=(0,react_src.hb)(t1,t2),t3=highlight?.showEffect&&highlights_styles.A.FLASH;let t4,t5;$[3]!==resetHighlight?(t4=()=>resetHighlight(),$[3]=resetHighlight,$[4]=t4):t4=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Type","web-stories"),$[5]=t5):t5=$[5];const t6=!highlight;let t7,t8,t9,t10;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Audio Sticker Type","web-stories"),$[6]=t7):t7=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t8=Object.keys(AudioStickerPreset),$[7]=t8):t8=$[7],$[8]!==cdnURL||$[9]!==onStickerTypeChange||$[10]!==stickerObj?(t9=react.createElement(components_form.fI,null,t8.map((type=>{const{label}=AudioStickerPreset[type];return react.createElement(components_form.HG,{key:type,element:stickerObj,label,isToggled:type===stickerObj.sticker,onClick:()=>{onStickerTypeChange(type)},"aria-label":(0,sprintf.A)((0,i18n.__)("Sticker Type: %s","web-stories"),label)},react.createElement(StickerImage,{src:`${cdnURL}images/audio-sticker/${type}-pretap.png`,crossOrigin:"anonymous",alt:element_library_src.jD[type].label}))}))),$[8]=cdnURL,$[9]=onStickerTypeChange,$[10]=stickerObj,$[11]=t9):t9=$[11],$[12]!==t3||$[13]!==t4||$[14]!==t6||$[15]!==t9?(t10=react.createElement(stickerType_StyledSimplePanel,{onAnimationEnd:t4,name:"audioStickerType",title:t5,isPersistable:t6,"aria-labelledby":null,"aria-label":t7,$_css:t3},t9),$[12]=t3,$[13]=t4,$[14]=t6,$[15]=t9,$[16]=t10):t10=$[16],t10}function stickerType_temp(state){return{highlight:state[highlights.xP.Style],resetHighlight:state.onFocusOut}}const stickerType=StickerType;StickerType.__docgenInfo={description:"",methods:[],displayName:"StickerType",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}};var stickerType_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"stickerType___StyledSimplePanel",componentId:"sc-1ys38h7-1"})(["",""],(p=>p.$_css));const AudioStickerStylePreset={none:{label:(0,i18n.__)("None","web-stories")},outline:{label:(0,i18n.__)("Outline","web-stories")},dropshadow:{label:(0,i18n.__)("Drop shadow","web-stories")}},stickerStyle_StickerImage=styled_components_browser_esm.Ay.img.withConfig({displayName:"stickerStyle__StickerImage",componentId:"sc-zhmwep-0"})(["width:100%;",""],(({stickerStyle})=>element_library_src.i[stickerStyle]));function StickerStyle(t0){const $=(0,dist.c)(20),{selectedElements,pushUpdate}=t0,{cdnURL}=(0,app_config.UK)(),stickerObj=selectedElements[0],style=stickerObj.style,type=stickerObj.sticker,{highlight,resetHighlight}=(0,highlights.N)(stickerStyle_temp);let t1,t2;$[0]!==pushUpdate?(t1=stickerStyle=>{pushUpdate({style:stickerStyle},!0)},t2=[pushUpdate],$[0]=pushUpdate,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const onStickerStyleChange=(0,react_src.hb)(t1,t2),t3=highlight?.showEffect&&highlights_styles.A.FLASH;let t4,t5;$[3]!==resetHighlight?(t4=()=>resetHighlight(),$[3]=resetHighlight,$[4]=t4):t4=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Style","web-stories"),$[5]=t5):t5=$[5];const t6=!highlight;let t7,t8,t9,t10,t11;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t7=(0,i18n.__)("Audio Sticker Style","web-stories"),$[6]=t7):t7=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t8={alignItems:"flex-start"},t9=Object.keys(AudioStickerStylePreset),$[7]=t8,$[8]=t9):(t8=$[7],t9=$[8]),$[9]!==cdnURL||$[10]!==onStickerStyleChange||$[11]!==selectedElements[0]||$[12]!==style||$[13]!==type?(t10=react.createElement(components_form.fI,{style:t8},t9.map((stickerStyle_0=>{const{label}=AudioStickerStylePreset[stickerStyle_0];return react.createElement(components_form.HG,{key:stickerStyle_0,element:selectedElements[0],label,isToggled:stickerStyle_0===style,onClick:()=>{onStickerStyleChange(stickerStyle_0)},"aria-label":(0,sprintf.A)((0,i18n.__)("Sticker Style: %s","web-stories"),label)},react.createElement(stickerStyle_StickerImage,{src:`${cdnURL}images/audio-sticker/${type}-pretap.png`,crossOrigin:"anonymous",alt:element_library_src.jD[type].label,stickerStyle:stickerStyle_0}))}))),$[9]=cdnURL,$[10]=onStickerStyleChange,$[11]=selectedElements[0],$[12]=style,$[13]=type,$[14]=t10):t10=$[14],$[15]!==t10||$[16]!==t3||$[17]!==t4||$[18]!==t6?(t11=react.createElement(stickerStyle_StyledSimplePanel,{onAnimationEnd:t4,name:"audioStickerStyle",title:t5,isPersistable:t6,"aria-labelledby":null,"aria-label":t7,$_css:t3},t10),$[15]=t10,$[16]=t3,$[17]=t4,$[18]=t6,$[19]=t11):t11=$[19],t11}function stickerStyle_temp(state){return{highlight:state[highlights.xP.Style],resetHighlight:state.onFocusOut}}const stickerStyle=StickerStyle;StickerStyle.__docgenInfo={description:"",methods:[],displayName:"StickerStyle",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}};var stickerStyle_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"stickerStyle___StyledSimplePanel",componentId:"sc-zhmwep-1"})(["",""],(p=>p.$_css));function AudioStickerStylePanel(t0){const $=(0,dist.c)(3),{selectedElements,pushUpdate}=t0;let t1;return $[0]!==pushUpdate||$[1]!==selectedElements?(t1=react.createElement(react.Fragment,null,react.createElement(stickerType,{selectedElements,pushUpdate}),react.createElement(stickerSize,{selectedElements,pushUpdate}),react.createElement(stickerStyle,{selectedElements,pushUpdate})),$[0]=pushUpdate,$[1]=selectedElements,$[2]=t1):t1=$[2],t1}const audioStickerStyle=AudioStickerStylePanel;AudioStickerStylePanel.propTypes={selectedElements:prop_types_default().array,pushUpdate:prop_types_default().func},AudioStickerStylePanel.__docgenInfo={description:"",methods:[],displayName:"AudioStickerStylePanel",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}};var border_shared=__webpack_require__("./packages/story-editor/src/components/panels/design/border/shared.js"),toggleButton=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),icons_border=__webpack_require__("./packages/design-system/src/icons/border.svg"),stackable=__webpack_require__("./packages/story-editor/src/components/form/stackable/index.js");function borderWidth_extends(){return borderWidth_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},borderWidth_extends.apply(null,arguments)}const BorderInputsFlexContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"borderWidth__BorderInputsFlexContainer",componentId:"sc-tay5fw-0"})(["display:flex;gap:7px;margin-bottom:16px;"]),StyledLockToggle=(0,styled_components_browser_esm.Ay)(toggleButton.m).withConfig({displayName:"borderWidth__StyledLockToggle",componentId:"sc-tay5fw-1"})(["",";"],shared_styles.Y),ToggleWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"borderWidth__ToggleWrapper",componentId:"sc-tay5fw-2"})(["padding-top:2px;"," align-self:stretch;"],(({locked})=>locked&&"\n    padding-left: 8px;\n  ")),BorderTop=(0,styled_components_browser_esm.Ay)(icons_border.A).withConfig({displayName:"borderWidth__BorderTop",componentId:"sc-tay5fw-3"})(["transform:rotate(90deg);"]),BorderBottom=(0,styled_components_browser_esm.Ay)(icons_border.A).withConfig({displayName:"borderWidth__BorderBottom",componentId:"sc-tay5fw-4"})(["transform:rotate(-90deg);"]),BorderRight=(0,styled_components_browser_esm.Ay)(icons_border.A).withConfig({displayName:"borderWidth__BorderRight",componentId:"sc-tay5fw-5"})(["transform:scaleX(-1);"]);function WidthControls(t0){const $=(0,dist.c)(44),{selectedElements,pushUpdateForObject}=t0,border=(0,shared.dP)(selectedElements,"border",border_shared.$);let t1;$[0]!==selectedElements?(t1=selectedElements.every(masks_src.Fn),$[0]=selectedElements,$[1]=t1):t1=$[1];const hasMultiBorderSupport=t1,lockBorder=!0===border.lockedWidth||!hasMultiBorderSupport;let t2,t3;$[2]!==lockBorder||$[3]!==pushUpdateForObject?(t2=name=>(evt,value)=>{pushUpdateForObject("border",lockBorder?{left:value,top:value,right:value,bottom:value}:{[name]:value},border_shared.$,!0)},t3=[pushUpdateForObject,lockBorder],$[2]=lockBorder,$[3]=pushUpdateForObject,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleChange=(0,react_src.hb)(t2,t3);let t4,t5;$[6]!==pushUpdateForObject?(t4=newBorder_0=>{pushUpdateForObject("border",newBorder_0,border_shared.$,!0)},t5=[pushUpdateForObject],$[6]=pushUpdateForObject,$[7]=t4,$[8]=t5):(t4=$[7],t5=$[8]);const handleLockChange=(0,react_src.hb)(t4,t5);let t6;$[9]!==lockBorder?(t6=lockBorder?(0,i18n.__)("Border","web-stories"):(0,i18n.__)("Left border","web-stories"),$[9]=lockBorder,$[10]=t6):t6=$[10];const firstInputLabel=t6;let t7;$[11]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[11]=t7):t7=$[11];const getMixedValueProps=(0,react_src.hb)(borderWidth_temp,t7),t8=border.left;let t9,t10,t11,t12,t13,t14,t15,t16;return $[12]!==handleChange?(t9=handleChange("left"),$[12]=handleChange,$[13]=t9):t9=$[13],$[14]!==lockBorder?(t10=!lockBorder&&react.createElement(icons_border.A,null),$[14]=lockBorder,$[15]=t10):t10=$[15],$[16]!==border.left||$[17]!==getMixedValueProps?(t11=getMixedValueProps(border.left),$[16]=border.left,$[17]=getMixedValueProps,$[18]=t11):t11=$[18],$[19]!==border.left||$[20]!==firstInputLabel||$[21]!==t10||$[22]!==t11||$[23]!==t9?(t12=react.createElement(stackable.H,borderWidth_extends({value:t8,onChange:t9,"aria-label":firstInputLabel,suffix:t10,min:0},t11)),$[19]=border.left,$[20]=firstInputLabel,$[21]=t10,$[22]=t11,$[23]=t9,$[24]=t12):t12=$[24],$[25]!==border.bottom||$[26]!==border.right||$[27]!==border.top||$[28]!==getMixedValueProps||$[29]!==handleChange||$[30]!==lockBorder?(t13=!lockBorder&&react.createElement(react.Fragment,null,react.createElement(stackable.H,borderWidth_extends({value:border.top,onChange:handleChange("top"),"aria-label":(0,i18n.__)("Top border","web-stories"),labelText:(0,i18n.__)("Top","web-stories"),suffix:react.createElement(BorderTop,null),min:0},getMixedValueProps(border.top))),react.createElement(stackable.H,borderWidth_extends({value:border.right,onChange:handleChange("right"),"aria-label":(0,i18n.__)("Right border","web-stories"),labelText:(0,i18n.__)("Right","web-stories"),suffix:react.createElement(BorderRight,null),min:0},getMixedValueProps(border.right))),react.createElement(stackable.H,borderWidth_extends({value:border.bottom,onChange:handleChange("bottom"),"aria-label":(0,i18n.__)("Bottom border","web-stories"),labelText:(0,i18n.__)("Bottom","web-stories"),suffix:react.createElement(BorderBottom,null),min:0},getMixedValueProps(border.bottom)))),$[25]=border.bottom,$[26]=border.right,$[27]=border.top,$[28]=getMixedValueProps,$[29]=handleChange,$[30]=lockBorder,$[31]=t13):t13=$[31],$[32]!==lockBorder||$[33]!==t12||$[34]!==t13?(t14=react.createElement(stackable.U,{locked:lockBorder},t12,t13),$[32]=lockBorder,$[33]=t12,$[34]=t13,$[35]=t14):t14=$[35],$[36]!==border.left||$[37]!==handleLockChange||$[38]!==hasMultiBorderSupport||$[39]!==lockBorder?(t15=hasMultiBorderSupport&&react.createElement(ToggleWrapper,{locked:lockBorder},react.createElement(components_tooltip.A,{title:(0,i18n.__)("Toggle consistent border","web-stories")},react.createElement(StyledLockToggle,{isLocked:lockBorder,onClick:()=>{let args={lockedWidth:!lockBorder};lockBorder||(args={...args,top:border.left,right:border.left,bottom:border.left}),handleLockChange(args)},"aria-label":(0,i18n.__)("Toggle consistent border","web-stories")}))),$[36]=border.left,$[37]=handleLockChange,$[38]=hasMultiBorderSupport,$[39]=lockBorder,$[40]=t15):t15=$[40],$[41]!==t14||$[42]!==t15?(t16=react.createElement(BorderInputsFlexContainer,null,t14,t15),$[41]=t14,$[42]=t15,$[43]=t16):t16=$[43],t16}function borderWidth_temp(value_0){return{isIndeterminate:story_editor_src_constants.jW===value_0,placeholder:story_editor_src_constants.jW===value_0?story_editor_src_constants.Q6:null}}WidthControls.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdateForObject:prop_types_default().func.isRequired};const borderWidth=WidthControls;function BorderStylePanel(props){const $=(0,dist.c)(17),{selectedElements,pushUpdate}=props,border=(0,shared.dP)(selectedElements,"border",border_shared.$),{color,left,top,right,bottom}=border,allSupportBorder=selectedElements.every(border_temp);let t0,t1;$[0]!==border||$[1]!==pushUpdate?(t0=(value,name)=>pushUpdate({border:{...border,[name]:value}},!0),t1=[border,pushUpdate],$[0]=border,$[1]=pushUpdate,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const handleChange=(0,react_src.hb)(t0,t1);if(!allSupportBorder)return null;let t2;$[4]!==selectedElements?(t2=selectedElements.every(masks_src.Fn),$[4]=selectedElements,$[5]=t2):t2=$[5];const hasMultiBorderSupport=t2,hasBorder=[left,top,right,bottom].some(border_temp2);let t3,t4,t5,t6;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Border","web-stories"),$[6]=t3):t3=$[6],$[7]!==props?(t4=react.createElement(borderWidth,props),$[7]=props,$[8]=t4):t4=$[8],$[9]!==color||$[10]!==handleChange||$[11]!==hasBorder||$[12]!==hasMultiBorderSupport?(t5=hasBorder&&react.createElement(components_form.fI,null,react.createElement(components_form.Q1,{value:color,onChange:value_1=>{handleChange(value_1,"color")},label:(0,i18n.__)("Border color","web-stories"),hasEyedropper:!0,allowsOpacity:hasMultiBorderSupport})),$[9]=color,$[10]=handleChange,$[11]=hasBorder,$[12]=hasMultiBorderSupport,$[13]=t5):t5=$[13],$[14]!==t4||$[15]!==t5?(t6=react.createElement(panel.RV,{name:"borderStyle",title:t3},t4,t5),$[14]=t4,$[15]=t5,$[16]=t6):t6=$[16],t6}function border_temp2(value_0){return value_0>0}function border_temp(el){return(0,masks_src.r3)(el)}WidthControls.__docgenInfo={description:"",methods:[],displayName:"WidthControls",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdateForObject:{description:"",type:{name:"func"},required:!0}}},BorderStylePanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const border=BorderStylePanel;BorderStylePanel.__docgenInfo={description:"",methods:[],displayName:"BorderStylePanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var captionsPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/captionsPanelContent.js");const captions_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"captions__StyledButton",componentId:"sc-17zds0n-0"})(["",";"],(({theme})=>outline.Q(theme.colors.border.focus,theme.colors.bg.secondary))),UploadButton=(0,styled_components_browser_esm.Ay)(captions_StyledButton).withConfig({displayName:"captions__UploadButton",componentId:"sc-17zds0n-1"})(["padding:12px 8px;"]);var _StyledUploadButton=(0,styled_components_browser_esm.Ay)(UploadButton).withConfig({displayName:"captions___StyledUploadButton",componentId:"sc-17zds0n-2"})(["",""],(p=>p.$_css));const MIN_MAX_ALT_TEXT={MAX:1e3};function CaptionsPanel(t0){const $=(0,dist.c)(35),{selectedElements,pushUpdate}=t0;let t1;$[0]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"tracks",[]),$[0]=selectedElements,$[1]=t1):t1=$[1];const tracks=t1,isIndeterminate=tracks===story_editor_src_constants.jW;let t2,t3,t4;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[2]=t2):t2=$[2],(0,components_form.jm)(captions_temp,t2),$[3]!==pushUpdate||$[4]!==tracks?(t3=idToDelete=>{let newTracks=[];if(idToDelete){const trackIndex=tracks.findIndex((t5=>{const{id}=t5;return id===idToDelete}));newTracks=[...tracks.slice(0,trackIndex),...tracks.slice(trackIndex+1)]}pushUpdate({tracks:newTracks},!0)},t4=[tracks,pushUpdate],$[3]=pushUpdate,$[4]=tracks,$[5]=t3,$[6]=t4):(t3=$[5],t4=$[6]);const handleRemoveTrack=(0,react_src.hb)(t3,t4);let t5,t6;$[7]!==pushUpdate?(t5=t7=>{const{src:t8,id:id_0,needsProxy:t9}=t7,needsProxy=void 0!==t9&&t9,newTrack={track:void 0===t8?"":t8,trackId:id_0,id:(0,v4.A)(),kind:"captions",srclang:"",label:"",needsProxy};pushUpdate({tracks:[newTrack]},!0)},t6=[pushUpdate],$[7]=pushUpdate,$[8]=t5,$[9]=t6):(t5=$[8],t6=$[9]);const handleChangeTrack=(0,react_src.hb)(t5,t6),{highlight,resetHighlight}=(0,highlights.N)(captions_temp2);let t7;$[10]!==highlight?.focus||$[11]!==highlight?.showEffect||$[12]!==resetHighlight?(t7=open=>react.createElement(_StyledUploadButton,{onAnimationEnd:()=>resetHighlight(),ref:node=>{node&&highlight?.focus&&highlight?.showEffect&&node.focus()},onClick:open,type:constants.VQ.Secondary,size:constants.Mp.Small,variant:constants.Ak.Rectangle,$_css:highlight?.showEffect&&highlights_styles.A.OUTLINE},(0,i18n.__)("Upload a file","web-stories")),$[10]=highlight?.focus,$[11]=highlight?.showEffect,$[12]=resetHighlight,$[13]=t7):t7=$[13];const t8=highlight?.focus,t9=highlight?.showEffect;let t10;$[14]!==resetHighlight||$[15]!==t8||$[16]!==t9?(t10=[resetHighlight,t8,t9],$[14]=resetHighlight,$[15]=t8,$[16]=t9,$[17]=t10):t10=$[17];const renderUploadButton=(0,react_src.hb)(t7,t10),t11=highlight?.showEffect&&highlights_styles.A.FLASH;let t12,t13;$[18]!==resetHighlight?(t12=()=>resetHighlight(),$[18]=resetHighlight,$[19]=t12):t12=$[19],$[20]===Symbol.for("react.memo_cache_sentinel")?(t13=(0,i18n.__)("Caption and Subtitles","web-stories"),$[20]=t13):t13=$[20];const t14=!highlight;let t15,t16,t17;return $[21]!==isIndeterminate||$[22]!==tracks?(t15=isIndeterminate?[]:tracks,$[21]=isIndeterminate,$[22]=tracks,$[23]=t15):t15=$[23],$[24]!==handleChangeTrack||$[25]!==handleRemoveTrack||$[26]!==isIndeterminate||$[27]!==renderUploadButton||$[28]!==t15?(t16=react.createElement(captionsPanelContent.A,{isIndeterminate,tracks:t15,handleChangeTrack,handleRemoveTrack,renderUploadButton}),$[24]=handleChangeTrack,$[25]=handleRemoveTrack,$[26]=isIndeterminate,$[27]=renderUploadButton,$[28]=t15,$[29]=t16):t16=$[29],$[30]!==t11||$[31]!==t12||$[32]!==t14||$[33]!==t16?(t17=react.createElement(captions_StyledSimplePanel,{onAnimationEnd:t12,name:"caption",title:t13,isPersistable:t14,$_css2:t11},t16),$[30]=t11,$[31]=t12,$[32]=t14,$[33]=t16,$[34]=t17):t17=$[34],t17}function captions_temp2(state){return{highlight:state[highlights.xP.Captions],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}function captions_temp(t0){const{resource:newResource}=t0;return{resource:{...newResource,alt:newResource.alt?.slice(0,MIN_MAX_ALT_TEXT.MAX)}}}CaptionsPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const captions=CaptionsPanel;CaptionsPanel.__docgenInfo={description:"",methods:[],displayName:"CaptionsPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var captions_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"captions___StyledSimplePanel",componentId:"sc-17zds0n-3"})(["",""],(p=>p.$_css2)),distribute_horizontal=__webpack_require__("./packages/design-system/src/icons/distribute_horizontal.svg"),distribute_vertical=__webpack_require__("./packages/design-system/src/icons/distribute_vertical.svg"),align_left=__webpack_require__("./packages/design-system/src/icons/align_left.svg"),align_center=__webpack_require__("./packages/design-system/src/icons/align_center.svg"),align_right=__webpack_require__("./packages/design-system/src/icons/align_right.svg"),align_top=__webpack_require__("./packages/design-system/src/icons/align_top.svg"),align_middle=__webpack_require__("./packages/design-system/src/icons/align_middle.svg"),align_bottom=__webpack_require__("./packages/design-system/src/icons/align_bottom.svg"),useAlignment=__webpack_require__("./packages/story-editor/src/components/panels/design/alignment/useAlignment.js");const ElementRow=styled_components_browser_esm.Ay.div.withConfig({displayName:"alignment__ElementRow",componentId:"sc-812g1l-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;padding:16px;overflow:auto;"]),alignmentButtonIds=["distributeHorizontally","distributeVertically","alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom"],AlignmentButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({variant:constants.Ak.Square,type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"alignment__AlignmentButton",componentId:"sc-812g1l-1"})(["position:relative;:focus{z-index:1;}",";"],(({theme})=>outline.Q(theme.colors.border.focus,"#1d1f20"))),StyledPanel=(0,styled_components_browser_esm.Ay)(panel.Zk).withConfig({displayName:"alignment__StyledPanel",componentId:"sc-812g1l-2"})(["background-color:",";border-bottom:1px solid ",";"],(({theme})=>theme.colors.opacity.black24),(({theme})=>theme.colors.divider.secondary));function ElementAlignmentPanel(t0){const $=(0,dist.c)(97),{selectedElements,pushUpdate}=t0,{isRTL}=(0,app.UK)();let t1;$[0]!==pushUpdate?(t1=callback=>pushUpdate(callback,!0),$[0]=pushUpdate,$[1]=t1):t1=$[1];const updateElements=t1;let t2;$[2]!==selectedElements||$[3]!==updateElements?(t2={selectedElements,updateElements},$[2]=selectedElements,$[3]=updateElements,$[4]=t2):t2=$[4];const{isDistributionEnabled,handleAlignLeft,handleAlignCenter,handleAlignRight,handleAlignTop,handleAlignMiddle,handleAlignBottom,handleHorizontalDistribution,handleVerticalDistribution}=(0,useAlignment.A)(t2),ref=(0,react_src.li)(),[currentButton,setCurrentButton]=(0,react_src.J0)(null);let t3,t4;$[5]!==currentButton||$[6]!==ref||$[7]!==setCurrentButton?(t3=direction=>()=>{const currentIndex=alignmentButtonIds.findIndex((id=>id===currentButton)),nextButtonId=alignmentButtonIds[currentIndex+direction];nextButtonId&&(setCurrentButton(nextButtonId),ref.current.querySelector(`#${nextButtonId}`).focus())},$[5]=currentButton,$[6]=ref,$[7]=setCurrentButton,$[8]=t3):t3=$[8],$[9]!==currentButton||$[10]!==setCurrentButton?(t4=[currentButton,setCurrentButton],$[9]=currentButton,$[10]=setCurrentButton,$[11]=t4):t4=$[11];const handleNavigation=(0,react_src.hb)(t3,t4),forward=isRTL?-1:1;let t5,t6,t7,t8,t9,t10;$[12]!==forward||$[13]!==handleNavigation?(t5=()=>handleNavigation(forward),t6=[handleNavigation,forward],$[12]=forward,$[13]=handleNavigation,$[14]=t5,$[15]=t6):(t5=$[14],t6=$[15]),(0,keyboard._h)(ref,"left",t5,t6),$[16]!==forward||$[17]!==handleNavigation?(t7=()=>handleNavigation(-forward),t8=[handleNavigation,forward],$[16]=forward,$[17]=handleNavigation,$[18]=t7,$[19]=t8):(t7=$[18],t8=$[19]),(0,keyboard._h)(ref,"right",t7,t8),$[20]===Symbol.for("react.memo_cache_sentinel")?(t9=(0,i18n.__)("Alignment","web-stories"),$[20]=t9):t9=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(t10=(0,i18n.__)("Distribute horizontally","web-stories"),$[21]=t10):t10=$[21];const t11=!isDistributionEnabled;let t12,t13,t14,t15,t16;$[22]===Symbol.for("react.memo_cache_sentinel")?(t12=(0,i18n.__)("Distribute horizontally","web-stories"),$[22]=t12):t12=$[22],$[23]!==setCurrentButton?(t13=()=>setCurrentButton(alignmentButtonIds[0]),$[23]=setCurrentButton,$[24]=t13):t13=$[24],$[25]===Symbol.for("react.memo_cache_sentinel")?(t14=react.createElement(distribute_horizontal.A,null),$[25]=t14):t14=$[25],$[26]!==handleHorizontalDistribution||$[27]!==t11||$[28]!==t13?(t15=react.createElement(components_tooltip.A,{title:t10},react.createElement(AlignmentButton,{disabled:t11,onClick:handleHorizontalDistribution,"aria-label":t12,id:alignmentButtonIds[0],onFocus:t13},t14)),$[26]=handleHorizontalDistribution,$[27]=t11,$[28]=t13,$[29]=t15):t15=$[29],$[30]===Symbol.for("react.memo_cache_sentinel")?(t16=(0,i18n.__)("Distribute vertically","web-stories"),$[30]=t16):t16=$[30];const t17=!isDistributionEnabled;let t18,t19,t20,t21,t22,t23,t24,t25,t26,t27,t28,t29,t30,t31,t32,t33,t34,t35,t36,t37,t38,t39,t40,t41,t42,t43,t44,t45,t46,t47,t48,t49,t50,t51,t52;return $[31]===Symbol.for("react.memo_cache_sentinel")?(t18=(0,i18n.__)("Distribute vertically","web-stories"),$[31]=t18):t18=$[31],$[32]!==setCurrentButton?(t19=()=>setCurrentButton(alignmentButtonIds[1]),$[32]=setCurrentButton,$[33]=t19):t19=$[33],$[34]===Symbol.for("react.memo_cache_sentinel")?(t20=react.createElement(distribute_vertical.A,null),$[34]=t20):t20=$[34],$[35]!==handleVerticalDistribution||$[36]!==t17||$[37]!==t19?(t21=react.createElement(components_tooltip.A,{title:t16},react.createElement(AlignmentButton,{disabled:t17,onClick:handleVerticalDistribution,"aria-label":t18,id:alignmentButtonIds[1],onFocus:t19},t20)),$[35]=handleVerticalDistribution,$[36]=t17,$[37]=t19,$[38]=t21):t21=$[38],$[39]===Symbol.for("react.memo_cache_sentinel")?(t22=(0,i18n.__)("Align left","web-stories"),$[39]=t22):t22=$[39],$[40]===Symbol.for("react.memo_cache_sentinel")?(t23=(0,i18n.__)("Align left","web-stories"),$[40]=t23):t23=$[40],$[41]!==setCurrentButton?(t24=()=>setCurrentButton(alignmentButtonIds[2]),$[41]=setCurrentButton,$[42]=t24):t24=$[42],$[43]===Symbol.for("react.memo_cache_sentinel")?(t25=react.createElement(align_left.A,null),$[43]=t25):t25=$[43],$[44]!==handleAlignLeft||$[45]!==t24?(t26=react.createElement(components_tooltip.A,{title:t22},react.createElement(AlignmentButton,{onClick:handleAlignLeft,"aria-label":t23,id:alignmentButtonIds[2],onFocus:t24},t25)),$[44]=handleAlignLeft,$[45]=t24,$[46]=t26):t26=$[46],$[47]===Symbol.for("react.memo_cache_sentinel")?(t27=(0,i18n.__)("Align center","web-stories"),$[47]=t27):t27=$[47],$[48]===Symbol.for("react.memo_cache_sentinel")?(t28=(0,i18n.__)("Align center","web-stories"),$[48]=t28):t28=$[48],$[49]!==setCurrentButton?(t29=()=>setCurrentButton(alignmentButtonIds[3]),$[49]=setCurrentButton,$[50]=t29):t29=$[50],$[51]===Symbol.for("react.memo_cache_sentinel")?(t30=react.createElement(align_center.A,null),$[51]=t30):t30=$[51],$[52]!==handleAlignCenter||$[53]!==t29?(t31=react.createElement(components_tooltip.A,{title:t27},react.createElement(AlignmentButton,{onClick:handleAlignCenter,"aria-label":t28,id:alignmentButtonIds[3],onFocus:t29},t30)),$[52]=handleAlignCenter,$[53]=t29,$[54]=t31):t31=$[54],$[55]===Symbol.for("react.memo_cache_sentinel")?(t32=(0,i18n.__)("Align right","web-stories"),$[55]=t32):t32=$[55],$[56]===Symbol.for("react.memo_cache_sentinel")?(t33=(0,i18n.__)("Align right","web-stories"),$[56]=t33):t33=$[56],$[57]!==setCurrentButton?(t34=()=>setCurrentButton(alignmentButtonIds[4]),$[57]=setCurrentButton,$[58]=t34):t34=$[58],$[59]===Symbol.for("react.memo_cache_sentinel")?(t35=react.createElement(align_right.A,null),$[59]=t35):t35=$[59],$[60]!==handleAlignRight||$[61]!==t34?(t36=react.createElement(components_tooltip.A,{title:t32},react.createElement(AlignmentButton,{onClick:handleAlignRight,"aria-label":t33,id:alignmentButtonIds[4],onFocus:t34},t35)),$[60]=handleAlignRight,$[61]=t34,$[62]=t36):t36=$[62],$[63]===Symbol.for("react.memo_cache_sentinel")?(t37=(0,i18n.__)("Align top","web-stories"),$[63]=t37):t37=$[63],$[64]===Symbol.for("react.memo_cache_sentinel")?(t38=(0,i18n.__)("Align top","web-stories"),$[64]=t38):t38=$[64],$[65]!==setCurrentButton?(t39=()=>setCurrentButton(alignmentButtonIds[5]),$[65]=setCurrentButton,$[66]=t39):t39=$[66],$[67]===Symbol.for("react.memo_cache_sentinel")?(t40=react.createElement(align_top.A,null),$[67]=t40):t40=$[67],$[68]!==handleAlignTop||$[69]!==t39?(t41=react.createElement(components_tooltip.A,{title:t37},react.createElement(AlignmentButton,{onClick:handleAlignTop,"aria-label":t38,id:alignmentButtonIds[5],onFocus:t39},t40)),$[68]=handleAlignTop,$[69]=t39,$[70]=t41):t41=$[70],$[71]===Symbol.for("react.memo_cache_sentinel")?(t42=(0,i18n.__)("Align vertical center","web-stories"),$[71]=t42):t42=$[71],$[72]===Symbol.for("react.memo_cache_sentinel")?(t43=(0,i18n.__)("Align vertical center","web-stories"),$[72]=t43):t43=$[72],$[73]!==setCurrentButton?(t44=()=>setCurrentButton(alignmentButtonIds[6]),$[73]=setCurrentButton,$[74]=t44):t44=$[74],$[75]===Symbol.for("react.memo_cache_sentinel")?(t45=react.createElement(align_middle.A,null),$[75]=t45):t45=$[75],$[76]!==handleAlignMiddle||$[77]!==t44?(t46=react.createElement(components_tooltip.A,{title:t42},react.createElement(AlignmentButton,{onClick:handleAlignMiddle,"aria-label":t43,id:alignmentButtonIds[6],onFocus:t44},t45)),$[76]=handleAlignMiddle,$[77]=t44,$[78]=t46):t46=$[78],$[79]===Symbol.for("react.memo_cache_sentinel")?(t47=(0,i18n.__)("Align bottom","web-stories"),$[79]=t47):t47=$[79],$[80]===Symbol.for("react.memo_cache_sentinel")?(t48=(0,i18n.__)("Align bottom","web-stories"),$[80]=t48):t48=$[80],$[81]!==setCurrentButton?(t49=()=>setCurrentButton(alignmentButtonIds[7]),$[81]=setCurrentButton,$[82]=t49):t49=$[82],$[83]===Symbol.for("react.memo_cache_sentinel")?(t50=react.createElement(align_bottom.A,null),$[83]=t50):t50=$[83],$[84]!==handleAlignBottom||$[85]!==t49?(t51=react.createElement(components_tooltip.A,{title:t47},react.createElement(AlignmentButton,{onClick:handleAlignBottom,"aria-label":t48,id:alignmentButtonIds[7],onFocus:t49},t50)),$[84]=handleAlignBottom,$[85]=t49,$[86]=t51):t51=$[86],$[87]!==ref||$[88]!==t15||$[89]!==t21||$[90]!==t26||$[91]!==t31||$[92]!==t36||$[93]!==t41||$[94]!==t46||$[95]!==t51?(t52=react.createElement(StyledPanel,{name:"alignment",canCollapse:!1,ariaLabel:t9},react.createElement(ElementRow,{ref},t15,t21,t26,t31,t36,t41,t46,t51)),$[87]=ref,$[88]=t15,$[89]=t21,$[90]=t26,$[91]=t31,$[92]=t36,$[93]=t41,$[94]=t46,$[95]=t51,$[96]=t52):t52=$[96],t52}ElementAlignmentPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const alignment=ElementAlignmentPanel;ElementAlignmentPanel.__docgenInfo={description:"",methods:[],displayName:"ElementAlignmentPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};const filter_convertOverlay=function convertOverlay(currentOverlay,currentType,newType){switch(newType){case elements_src.P8.NONE:return null;case elements_src.P8.SOLID:return function convertToSolid(currentOverlay,currentType){switch(currentType){case elements_src.P8.NONE:return{color:{r:0,g:0,b:0,a:.5}};case elements_src.P8.LINEAR:case elements_src.P8.RADIAL:{const{stops}=currentOverlay,stopsByAlpha=stops.slice().sort(((x,y)=>(y.color.a??1)-(x.color.a??1))),{color:{r,g,b}}=stopsByAlpha[0];return{color:{r,g,b,a:.5}}}default:return currentOverlay}}(currentOverlay,currentType);case elements_src.P8.LINEAR:return function convertToLinear(currentOverlay,currentType){switch(currentType){case elements_src.P8.NONE:return{type:"linear",rotation:0,stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case elements_src.P8.SOLID:{const{color:{r,g,b,a}}=currentOverlay;return{type:"linear",rotation:0,stops:[{color:{r,g,b,a:0},position:.4},{color:{r,g,b,a:1},position:1}],alpha:a}}case elements_src.P8.RADIAL:{const{stops,alpha}=currentOverlay;return{type:"linear",rotation:0,stops,alpha}}default:return currentOverlay}}(currentOverlay,currentType);case elements_src.P8.RADIAL:return function convertToRadial(currentOverlay,currentType){switch(currentType){case elements_src.P8.NONE:return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r:0,g:0,b:0,a:0},position:0},{color:{r:0,g:0,b:0,a:1},position:1}],alpha:.7};case elements_src.P8.SOLID:{const{color:{r,g,b,a}}=currentOverlay;return{type:"radial",size:{w:.67,h:.67},stops:[{color:{r,g,b,a:0},position:0},{color:{r,g,b,a:1},position:1}],alpha:a}}case elements_src.P8.LINEAR:{const{stops,alpha}=currentOverlay;return{type:"radial",size:{w:.67,h:.67},stops,alpha}}default:return currentOverlay}}(currentOverlay,currentType);default:return currentOverlay}},OverlayPreset={[elements_src.P8.NONE]:{label:(0,i18n._x)("None","overlay","web-stories")},[elements_src.P8.SOLID]:{label:(0,i18n.__)("Tint","web-stories")},[elements_src.P8.LINEAR]:{label:(0,i18n.__)("Linear","web-stories")},[elements_src.P8.RADIAL]:{label:(0,i18n.__)("Vignette","web-stories")}};function FilterPanel(t0){const $=(0,dist.c)(25),{selectedElements,pushUpdate}=t0,overlay=(0,shared.VY)(selectedElements,"overlay"),isMultiple=overlay===story_editor_src_constants.jW,overlayType=overlay?overlay.type||elements_src.P8.SOLID:elements_src.P8.NONE,{getProxiedUrl}=(0,useCORSProxy.A)(),{isDefaultBackground}=selectedElements[0];let t1;$[0]!==isDefaultBackground?(t1=v=>!isDefaultBackground||v.state.currentPage?.backgroundColor,$[0]=isDefaultBackground,$[1]=t1):t1=$[1];const currentPageBackgroundColor=(0,app.P3)(t1);let t2,t3;$[2]!==pushUpdate?(t2=value=>pushUpdate({overlay:value},!0),t3=[pushUpdate],$[2]=pushUpdate,$[3]=t2,$[4]=t3):(t2=$[3],t3=$[4]);const updateOverlay=(0,react_src.hb)(t2,t3),hasEyedropper=overlayType!==elements_src.P8.RADIAL&&overlayType!==elements_src.P8.LINEAR;let t4;$[5]!==selectedElements[0].type?(t4=(0,elements_src.zh)(selectedElements[0].type),$[5]=selectedElements[0].type,$[6]=t4):t4=$[6];const{LayerIcon}=t4;let t5,t6,t7,t8;return $[7]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Filters","web-stories"),$[7]=t5):t5=$[7],$[8]!==LayerIcon||$[9]!==currentPageBackgroundColor||$[10]!==getProxiedUrl||$[11]!==isMultiple||$[12]!==overlay||$[13]!==overlayType||$[14]!==selectedElements[0]||$[15]!==updateOverlay?(t6=!isMultiple&&react.createElement(components_form.fI,null,Object.keys(OverlayPreset).map((type=>{const{label}=OverlayPreset[type];return react.createElement(components_form.HG,{key:type,element:selectedElements[0],label,isToggled:overlayType===type,onClick:()=>updateOverlay(filter_convertOverlay(overlay,overlayType,type)),filter:filter_convertOverlay(overlay,elements_src.P8.NONE,type),"aria-label":(0,sprintf.A)((0,i18n.__)("Filter: %s","web-stories"),label)},react.createElement(LayerIcon,{element:selectedElements[0],getProxiedUrl,currentPageBackgroundColor}))}))),$[8]=LayerIcon,$[9]=currentPageBackgroundColor,$[10]=getProxiedUrl,$[11]=isMultiple,$[12]=overlay,$[13]=overlayType,$[14]=selectedElements[0],$[15]=updateOverlay,$[16]=t6):t6=$[16],$[17]!==hasEyedropper||$[18]!==overlay||$[19]!==overlayType||$[20]!==updateOverlay?(t7=overlayType!==elements_src.P8.NONE&&react.createElement(components_form.fI,null,react.createElement(components_form.Q1,{label:(0,i18n.__)("Color","web-stories"),value:overlay,onChange:updateOverlay,allowsGradient:!0,hasEyedropper})),$[17]=hasEyedropper,$[18]=overlay,$[19]=overlayType,$[20]=updateOverlay,$[21]=t7):t7=$[21],$[22]!==t6||$[23]!==t7?(t8=react.createElement(panel.RV,{name:"filter",title:t5},t6,t7),$[22]=t6,$[23]=t7,$[24]=t8):t8=$[24],t8}const filter=FilterPanel;FilterPanel.__docgenInfo={description:"",methods:[],displayName:"FilterPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};const imageAccessibility_StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"imageAccessibility__StyledText",componentId:"sc-147toy8-0"})(["color:",";margin-bottom:10px;"],(({theme})=>theme.colors.fg.secondary)),DEFAULT_RESOURCE={alt:null},imageAccessibility_MIN_MAX_ALT_TEXT={MAX:1e3};function ImageAccessibilityPanel(t0){const $=(0,dist.c)(25),{selectedElements,pushUpdate}=t0,resource=(0,shared.dP)(selectedElements,"resource",DEFAULT_RESOURCE);let t1;$[0]!==resource.alt||$[1]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"alt",resource.alt),$[0]=resource.alt,$[1]=selectedElements,$[2]=t1):t1=$[2];const alt=t1,{highlight,resetHighlight,cancelHighlight}=(0,highlights.N)(imageAccessibility_temp),t2=highlight&&highlights_styles.A.FLASH;let t3,t4;$[3]!==resetHighlight?(t3=()=>resetHighlight(),$[3]=resetHighlight,$[4]=t3):t3=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Accessibility","web-stories"),$[5]=t4):t4=$[5];const t5=!highlight;let t6,t7;$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(imageAccessibility_StyledText,{size:types.$.Small},(0,i18n.__)("Add a brief description of the image.","web-stories")),$[6]=t6):t6=$[6],$[7]!==cancelHighlight||$[8]!==highlight?.focus||$[9]!==highlight?.showEffect?(t7=node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},$[7]=cancelHighlight,$[8]=highlight?.focus,$[9]=highlight?.showEffect,$[10]=t7):t7=$[10];const t8=alt===story_editor_src_constants.jW?story_editor_src_constants.Q6:"",t9=alt||"";let t10,t11;$[11]!==pushUpdate?(t10=evt=>pushUpdate({alt:evt?.target?.value?.trim()||null},!0),$[11]=pushUpdate,$[12]=t10):t10=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,i18n.__)("Assistive text","web-stories"),$[13]=t11):t11=$[13];const t12=alt===story_editor_src_constants.jW;let t13,t14;return $[14]!==t10||$[15]!==t12||$[16]!==t7||$[17]!==t8||$[18]!==t9?(t13=react.createElement(components_form.fI,null,react.createElement(components_form.fs,{ref:t7,placeholder:t8,value:t9,onChange:t10,"aria-label":t11,maxLength:imageAccessibility_MIN_MAX_ALT_TEXT.MAX,rows:2,isIndeterminate:t12})),$[14]=t10,$[15]=t12,$[16]=t7,$[17]=t8,$[18]=t9,$[19]=t13):t13=$[19],$[20]!==t13||$[21]!==t2||$[22]!==t3||$[23]!==t5?(t14=react.createElement(imageAccessibility_StyledSimplePanel,{onAnimationEnd:t3,name:"imageAccessibility",title:t4,isPersistable:t5,$_css:t2},t6,t13),$[20]=t13,$[21]=t2,$[22]=t3,$[23]=t5,$[24]=t14):t14=$[24],t14}function imageAccessibility_temp(state){return{highlight:state[highlights.xP.AssistiveText],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}ImageAccessibilityPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const imageAccessibility=ImageAccessibilityPanel;ImageAccessibilityPanel.__docgenInfo={description:"",methods:[],displayName:"ImageAccessibilityPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var imageAccessibility_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"imageAccessibility___StyledSimplePanel",componentId:"sc-147toy8-1"})(["",""],(p=>p.$_css)),src_url=__webpack_require__("./packages/url/src/url.ts"),useElementsWithLinks=__webpack_require__("./packages/story-editor/src/utils/useElementsWithLinks.ts"),elementLink=__webpack_require__("./packages/story-editor/src/components/elementLink/index.js");const IconInfo=styled_components_browser_esm.Ay.div.withConfig({displayName:"link__IconInfo",componentId:"sc-niusn4-0"})(["display:flex;flex-direction:column;margin-left:20px;"]),IconText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"link__IconText",componentId:"sc-niusn4-1"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),link_Error=styled_components_browser_esm.Ay.span.withConfig({displayName:"link__Error",componentId:"sc-niusn4-2"})(["font-size:12px;line-height:16px;color:",";"],(({theme})=>theme.colors.fg.negative)),StyledSwitch=(0,styled_components_browser_esm.Ay)(components_form.dO).withConfig({displayName:"link__StyledSwitch",componentId:"sc-niusn4-3"})(["width:100%;"]);function LinkPanel({selectedElements,pushUpdateForObject}){const{clearEditing,setDisplayLinkGuidelines,displayLinkGuidelines}=(0,app.yu)((state=>({clearEditing:state.actions.clearEditing,setDisplayLinkGuidelines:state.actions.setDisplayLinkGuidelines,displayLinkGuidelines:state.state.displayLinkGuidelines}))),{highlight,resetHighlight,cancelHighlight}=(0,highlights.N)((state_0=>({highlight:state_0[highlights.xP.Link],resetHighlight:state_0.onFocusOut,cancelHighlight:state_0.cancelEffect}))),pages=(0,app.P3)((({state:state_1})=>state_1?.pages?.map((({id},index)=>({value:id,label:(0,sprintf.A)((0,i18n.__)("Page %s","web-stories"),index+1)}))).filter((({value})=>value!==state_1.currentPage?.id))||[])),{hasElementsInAttachmentArea}=(0,useElementsWithLinks.A)(),defaultLink=(0,react_src.Kr)((()=>(0,elementLink.d)({icon:null,desc:null})),[]),linkRaw=(0,shared.dP)(selectedElements,"link",defaultLink),link=(0,elementLink.d)(linkRaw),{url="",desc="",icon,rel=[],type:linkType=elements_src.J.Regular,pageId=null}=link,[fetchingMetadata,setFetchingMetadata]=(0,react_src.J0)(!1),[isLinkFocused,setIsLinkFocused]=(0,react_src.J0)(!1),{actions:{getLinkMetadata}}=(0,app.M1)(),{getProxiedUrl,checkResourceAccess}=(0,useCORSProxy.A)(),updateLinkFromMetadataApi=(0,react_src.T0)((({newUrl,newTitle,newIcon,needsProxy})=>pushUpdateForObject("link",(()=>newUrl?(0,elementLink.d)({url:newUrl,needsProxy,desc:newTitle||"",icon:newIcon?(0,src_url.oK)(newUrl,newIcon):""}):null),defaultLink,!0)),[pushUpdateForObject,defaultLink]),[isInvalidUrl,setIsInvalidUrl]=(0,react_src.J0)(!(0,src_url.AY)((0,src_url.x6)(url))),populateMetadata=(0,react_src.YQ)((0,react_src.hb)((async newUrl_0=>{if(newUrl_0.startsWith("http://")||newUrl_0.startsWith("https://")){setFetchingMetadata(!0);try{const{title:newTitle_0,image:newIcon_0}=getLinkMetadata?await getLinkMetadata(newUrl_0):{},needsProxy_0=!!newIcon_0&&await checkResourceAccess(newIcon_0);updateLinkFromMetadataApi({newUrl:newUrl_0,newTitle:newTitle_0,newIcon:newIcon_0,needsProxy:needsProxy_0})}catch{setIsInvalidUrl(!0)}finally{setFetchingMetadata(!1)}}}),[checkResourceAccess,getLinkMetadata,updateLinkFromMetadataApi]),1200),handleChange=(0,react_src.hb)(((properties,submit)=>{if(clearEditing(),populateMetadata.cancel(),properties.url){if(story_editor_src_constants.jW===properties.url)return;const urlWithProtocol=(0,src_url.x6)(properties.url),valid=(0,src_url.AY)(urlWithProtocol);setIsInvalidUrl(!valid),valid&&populateMetadata(urlWithProtocol)}pushUpdateForObject("link",""!==properties.url?{...properties}:null,defaultLink,submit)}),[clearEditing,pushUpdateForObject,defaultLink,populateMetadata]),handleChangeIcon=(0,react_src.hb)((resource=>{handleChange({icon:resource?.src},!0)}),[handleChange]),hasLinkSet=Boolean(url?.length),displayMetaFields=hasLinkSet&&!isInvalidUrl||linkType===elements_src.J.Branching&&pageId;(0,react_src.vJ)((()=>{if(isLinkFocused){const hasLink=hasLinkSet&&url!==story_editor_src_constants.jW;setDisplayLinkGuidelines(hasElementsInAttachmentArea&&!hasLink)}}),[selectedElements,isLinkFocused,hasElementsInAttachmentArea,hasLinkSet,setDisplayLinkGuidelines,url]);const linkIcon=icon?getProxiedUrl(link,icon):null,isMultipleLinkType=story_editor_src_constants.jW===linkType,isMultiplePageId=story_editor_src_constants.jW===pageId,isMultipleUrl=story_editor_src_constants.jW===url,isMultipleDesc=story_editor_src_constants.jW===desc,isMultipleRel=story_editor_src_constants.jW===rel,onChangeRel=(0,react_src.hb)((newRel=>handleChange({rel:newRel},!0)),[handleChange]),onChangeLinkType=(0,react_src.hb)((()=>{handleChange({type:linkType===elements_src.J.Regular?elements_src.J.Branching:elements_src.J.Regular},!0)}),[handleChange,linkType]),onChangePageId=(0,react_src.hb)(((_event,value_0)=>{handleChange({pageId:value_0},!0)}),[handleChange]);return react.createElement(link_StyledSimplePanel,{name:"link",title:(0,i18n.__)("Link","web-stories"),onAnimationEnd:()=>resetHighlight(),isPersistable:!highlight,$_css:highlight?.showEffect&&highlights_styles.A.FLASH},react.createElement(components_form.fI,null,react.createElement(StyledSwitch,{groupLabel:(0,i18n.__)("Link Type","web-stories"),name:"link-type-switch",value:linkType===elements_src.J.Regular,onLabel:(0,i18n.__)("Link to website","web-stories"),offLabel:(0,i18n.__)("Link to story page","web-stories"),disabled:isMultipleLinkType,onChange:onChangeLinkType})),linkType===elements_src.J.Branching?react.createElement(components_form.fI,null,react.createElement(dropdown.A,{ariaLabel:(0,i18n.__)("Page","web-stories"),dropDownLabel:(0,i18n.__)("Page","web-stories"),placeholder:(0,i18n.__)("Select Page","web-stories"),options:pages,placement:popup_constants.W.TopStart,onMenuItemClick:onChangePageId,selectedValue:pageId,disabled:!pages.length||isMultiplePageId})):react.createElement(components_form.Z3,{ref:node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},onChange:value_1=>!displayLinkGuidelines&&handleChange({url:value_1},!value_1),onBlur:()=>{setDisplayLinkGuidelines(!1),setIsLinkFocused(!1)},onFocus:()=>{setIsLinkFocused(!0)},value:url||"",placeholder:isMultipleUrl?story_editor_src_constants.Q6:(0,i18n.__)("Enter an address to apply a link","web-stories"),isIndeterminate:isMultipleUrl,"aria-label":(0,i18n.__)("Element link","web-stories"),hasError:displayLinkGuidelines}),displayLinkGuidelines&&react.createElement(components_form.fI,null,react.createElement(link_Error,null,(0,i18n.__)("Link can not reside below the dashed line when a page attachment is present","web-stories"))),displayMetaFields&&react.createElement(react.Fragment,null,react.createElement(components_form.fI,null,react.createElement(input_input.A,{placeholder:isMultipleDesc?story_editor_src_constants.Q6:(0,i18n.__)("Optional description","web-stories"),onChange:({target})=>handleChange({desc:target.value},!target.value),value:desc,"aria-label":(0,i18n.__)("Link description","web-stories"),isIndeterminate:isMultipleDesc,disabled:fetchingMetadata,containerStyleOverride:shared_styles.t})),react.createElement(components_form.fI,{spaceBetween:!1},react.createElement(components_form.qY,{handleChange:handleChangeIcon,icon:linkIcon,isLoading:fetchingMetadata,disabled:fetchingMetadata}),react.createElement(IconInfo,null,react.createElement(IconText,{size:types.$.Small},(0,i18n.__)("Optional brand icon","web-stories")))),!isMultipleRel&&linkType===elements_src.J.Regular&&react.createElement(shared.uF,{onChangeRel,rel})))}const link_link=LinkPanel;LinkPanel.__docgenInfo={description:"",methods:[],displayName:"LinkPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdateForObject:{description:"",type:{name:"func"},required:!0}}};var link_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"link___StyledSimplePanel",componentId:"sc-niusn4-4"})(["",""],(p=>p.$_css)),generalPageAdvancement=__webpack_require__("./packages/story-editor/src/components/panels/shared/generalPageAdvancement.js");function CustomPageAdvancementPanel(){const $=(0,dist.c)(11),{isOverridden,autoAdvance,pageDuration,updateCurrentPageProperties:updateCurrentPageProperties_0}=(0,app_story.P3)(customPageAdvancement_temp);let t0,t1;$[0]!==autoAdvance||$[1]!==pageDuration||$[2]!==updateCurrentPageProperties_0?(t0=properties=>{if(!1===properties.override)updateCurrentPageProperties_0({properties:{advancement:void 0}});else{const{override,...rest}=properties,advancement_0={autoAdvance,pageDuration,...rest};updateCurrentPageProperties_0({properties:{advancement:advancement_0}})}},t1=[autoAdvance,pageDuration,updateCurrentPageProperties_0],$[0]=autoAdvance,$[1]=pageDuration,$[2]=updateCurrentPageProperties_0,$[3]=t0,$[4]=t1):(t0=$[3],t1=$[4]);const onUpdate=(0,react_src.hb)(t0,t1);let t2,t3;return $[5]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Control whether this page auto-advances to the next page, or whether the reader has to manually tap to advance.","web-stories"),$[5]=t2):t2=$[5],$[6]!==autoAdvance||$[7]!==isOverridden||$[8]!==onUpdate||$[9]!==pageDuration?(t3=react.createElement(generalPageAdvancement.A,{panelName:"customPageAdvancement",onUpdate,autoAdvance,pageDuration,hasOverrideEnabled:isOverridden,allowsOverride:!0,collapsedByDefault:!0},t2),$[6]=autoAdvance,$[7]=isOverridden,$[8]=onUpdate,$[9]=pageDuration,$[10]=t3):t3=$[10],t3}function customPageAdvancement_temp(t0){const{state:t1,actions:t2}=t0,{story:t3,currentPage:t4}=t1,{autoAdvance:defaultAutoAdvance,defaultPageDuration}=t3,{advancement}=t4,{updateCurrentPageProperties}=t2;return{isOverridden:"object"==typeof advancement,autoAdvance:advancement?.autoAdvance??defaultAutoAdvance,pageDuration:advancement?.pageDuration??defaultPageDuration,updateCurrentPageProperties}}const customPageAdvancement=CustomPageAdvancementPanel;CustomPageAdvancementPanel.__docgenInfo={description:"",methods:[],displayName:"CustomPageAdvancementPanel"};const shared_Label=styled_components_browser_esm.Ay.label.withConfig({displayName:"shared__Label",componentId:"sc-zfap6q-0"})(["margin-left:12px;"]),StyledCheckbox=(0,styled_components_browser_esm.Ay)(checkbox_checkbox.A).withConfig({displayName:"shared__StyledCheckbox",componentId:"sc-zfap6q-1"})(["",""],(({theme})=>`\n    input[type='checkbox']:focus-visible ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${theme.colors.bg.secondary}, 0px 0px 0 4px ${theme.colors.border.focus} !important;\n    }\n  `)),shared_StyledRow=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"shared__StyledRow",componentId:"sc-zfap6q-2"})(["justify-content:flex-start;"]),Space=styled_components_browser_esm.Ay.div.withConfig({displayName:"shared__Space",componentId:"sc-zfap6q-3"})(["width:20px;"]);function CallToActionText(t0){const $=(0,dist.c)(24),{value,defaultValue,onChange}=t0,[text,setText]=(0,react_src.J0)(value||defaultValue),debouncedUpdate=(0,react_src.YQ)(onChange,300);let t1,t2;$[0]!==debouncedUpdate||$[1]!==defaultValue||$[2]!==onChange||$[3]!==setText||$[4]!==text?(t1=t2=>{const{target}=t2;target.value?(debouncedUpdate.cancel(),onChange({ctaText:text||void 0})):(onChange({ctaText:void 0}),setText(defaultValue))},$[0]=debouncedUpdate,$[1]=defaultValue,$[2]=onChange,$[3]=setText,$[4]=text,$[5]=t1):t1=$[5],$[6]!==debouncedUpdate||$[7]!==defaultValue||$[8]!==onChange||$[9]!==text?(t2=[text,debouncedUpdate,defaultValue,onChange],$[6]=debouncedUpdate,$[7]=defaultValue,$[8]=onChange,$[9]=text,$[10]=t2):t2=$[10];const handleBlur=(0,react_src.hb)(t1,t2);let t3,t4;$[11]!==debouncedUpdate||$[12]!==setText?(t3=t4=>{const{target:target_0}=t4,{value:newText}=target_0;setText(newText),debouncedUpdate({ctaText:newText})},$[11]=debouncedUpdate,$[12]=setText,$[13]=t3):t3=$[13],$[14]!==debouncedUpdate?(t4=[debouncedUpdate],$[14]=debouncedUpdate,$[15]=t4):t4=$[15];const handleChangeCta=(0,react_src.hb)(t3,t4),isDefault=value===defaultValue;let t5,t6,t7;return $[16]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Call to Action text","web-stories"),$[16]=t5):t5=$[16],$[17]!==isDefault?(t6=isDefault?(0,i18n.__)("Default","web-stories"):null,$[17]=isDefault,$[18]=t6):t6=$[18],$[19]!==handleBlur||$[20]!==handleChangeCta||$[21]!==t6||$[22]!==text?(t7=react.createElement(components_form.fI,null,react.createElement(input_input.A,{onChange:handleChangeCta,onBlur:handleBlur,value:text,"aria-label":t5,suffix:t6})),$[19]=handleBlur,$[20]=handleChangeCta,$[21]=t6,$[22]=text,$[23]=t7):t7=$[23],t7}function Theme(t0){const $=(0,dist.c)(14),{theme,onChange}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=[],$[0]=t1):t1=$[0];const checkboxId=(0,react_src.Kr)(shared_temp,t1);let t2,t3;$[1]!==onChange?(t2=evt=>{onChange({theme:evt.target.checked?story_editor_src_constants.RS.DARK:story_editor_src_constants.RS.LIGHT})},t3=[onChange],$[1]=onChange,$[2]=t2,$[3]=t3):(t2=$[2],t3=$[3]);const handleChangeTheme=(0,react_src.hb)(t2,t3),t4=theme===story_editor_src_constants.RS.DARK;let t5,t6,t7,t8;return $[4]!==checkboxId||$[5]!==handleChangeTheme||$[6]!==t4?(t5=react.createElement(StyledCheckbox,{id:checkboxId,checked:t4,onChange:handleChangeTheme}),$[4]=checkboxId,$[5]=handleChangeTheme,$[6]=t4,$[7]=t5):t5=$[7],$[8]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(typography_text.E.Span,{size:types.$.Small},(0,i18n.__)("Use dark theme","web-stories")),$[8]=t6):t6=$[8],$[9]!==checkboxId?(t7=react.createElement(shared_Label,{htmlFor:checkboxId},t6),$[9]=checkboxId,$[10]=t7):t7=$[10],$[11]!==t5||$[12]!==t7?(t8=react.createElement(shared_StyledRow,null,t5,t7),$[11]=t5,$[12]=t7,$[13]=t8):t8=$[13],t8}function shared_temp(){return`cb-${(0,v4.A)()}`}function Icon(t0){const $=(0,dist.c)(15),{icon,onChange,isFetching,needsProxy}=t0,{getProxiedUrl}=(0,useCORSProxy.A)();let t1,t2;$[0]!==onChange?(t1=resource=>{onChange({icon:resource?.src},!0)},t2=[onChange],$[0]=onChange,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const handleChangeIcon=(0,react_src.hb)(t1,t2);let t3;$[3]!==getProxiedUrl||$[4]!==icon||$[5]!==needsProxy?(t3=icon?getProxiedUrl({needsProxy},icon):null,$[3]=getProxiedUrl,$[4]=icon,$[5]=needsProxy,$[6]=t3):t3=$[6];const iconUrl=t3;let t4,t5,t6,t7;return $[7]!==handleChangeIcon||$[8]!==iconUrl||$[9]!==isFetching?(t4=react.createElement(components_form.qY,{handleChange:handleChangeIcon,icon:iconUrl,isLoading:isFetching,disabled:isFetching}),$[7]=handleChangeIcon,$[8]=iconUrl,$[9]=isFetching,$[10]=t4):t4=$[10],$[11]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(Space,null),$[11]=t5):t5=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(typography_text.E.Span,{size:types.$.Small},(0,i18n.__)("Link icon","web-stories")),$[12]=t6):t6=$[12],$[13]!==t4?(t7=react.createElement(shared_StyledRow,null,t4,t5,t6),$[13]=t4,$[14]=t7):t7=$[14],t7}function LinkUrl({value,onChange,setIsInvalidUrl,setIsFetching,onFocus,hint,hasError}){const{actions:{getLinkMetadata}}=(0,app.M1)(),[_url,_setUrl]=(0,react_src.J0)(value),debouncedUpdate=(0,react_src.YQ)(onChange,300),{checkResourceAccess}=(0,useCORSProxy.A)(),populateUrlData=(0,react_src.YQ)((0,react_src.hb)((async newValue=>{if(newValue.startsWith("http://")||newValue.startsWith("https://")){setIsFetching(!0);try{const{image}=getLinkMetadata?await getLinkMetadata(newValue):{},iconUrl=image?(0,src_url.oK)(newValue,image):"",needsProxy=!!iconUrl&&await checkResourceAccess(iconUrl);onChange({url:newValue,icon:iconUrl,needsProxy})}catch{onChange({url:newValue,icon:"",needsProxy:!1}),setIsInvalidUrl(!0)}finally{setIsFetching(!1)}}}),[checkResourceAccess,getLinkMetadata,onChange,setIsFetching,setIsInvalidUrl]),1200),handleChangeUrl=(0,react_src.hb)((newValue_0=>{populateUrlData.cancel(),_setUrl(newValue_0),setIsInvalidUrl(!1);const urlWithProtocol=(0,src_url.x6)(newValue_0.trim());(0,src_url.AY)(urlWithProtocol)&&populateUrlData(urlWithProtocol)}),[populateUrlData,setIsInvalidUrl]),onBlur=(0,react_src.hb)((()=>{debouncedUpdate.cancel(),onChange({url:_url?.trim().length?(0,src_url.x6)(_url.trim()):""})}),[_url,debouncedUpdate,onChange]);return react.createElement(components_form.Z3,{onChange:newValue_1=>handleChangeUrl(newValue_1?.trim()),onBlur,onFocus,value:_url,clear:!0,"aria-label":(0,i18n.__)("Type an address to add a page attachment link","web-stories"),hasError,hint})}function Outlink(t0){const $=(0,dist.c)(55),{pageAttachment,updatePageAttachment}=t0,{setDisplayLinkGuidelines}=(0,app.yu)(outlink_temp),{url,ctaText,icon,theme,rel:t1,needsProxy}=pageAttachment;let t2;$[0]!==t1?(t2=void 0===t1?[]:t1,$[0]=t1,$[1]=t2):t2=$[1];const rel=t2,[displayWarning,setDisplayWarning]=(0,react_src.J0)(!1),[isFetching,setIsFetching]=(0,react_src.J0)(!1),[isInvalidUrl,setIsInvalidUrl]=(0,react_src.J0)(url&&!(0,src_url.AY)((0,src_url.x6)(url).trim())),hasValidUrl=Boolean(url)&&!isInvalidUrl,{hasLinksInAttachmentArea}=(0,useElementsWithLinks.A)();let t3,t4,t5;$[2]!==setDisplayLinkGuidelines?(t3=()=>()=>{setDisplayLinkGuidelines(!1)},$[2]=setDisplayLinkGuidelines,$[3]=t3):t3=$[3],$[4]!==hasLinksInAttachmentArea||$[5]!==setDisplayLinkGuidelines||$[6]!==url?(t4=[hasLinksInAttachmentArea,setDisplayLinkGuidelines,url],$[4]=hasLinksInAttachmentArea,$[5]=setDisplayLinkGuidelines,$[6]=url,$[7]=t4):t4=$[7],(0,react_src.vJ)(t3,t4),$[8]!==hasLinksInAttachmentArea||$[9]!==setDisplayLinkGuidelines||$[10]!==setDisplayWarning||$[11]!==url?.length?(t5=()=>{hasLinksInAttachmentArea&&!url?.length&&(setDisplayWarning(!0),setDisplayLinkGuidelines(!0))},$[8]=hasLinksInAttachmentArea,$[9]=setDisplayLinkGuidelines,$[10]=setDisplayWarning,$[11]=url?.length,$[12]=t5):t5=$[12];const t6=url?.length;let t7;$[13]!==hasLinksInAttachmentArea||$[14]!==setDisplayLinkGuidelines||$[15]!==t6?(t7=[hasLinksInAttachmentArea,setDisplayLinkGuidelines,t6],$[13]=hasLinksInAttachmentArea,$[14]=setDisplayLinkGuidelines,$[15]=t6,$[16]=t7):t7=$[16];const onFocus=(0,react_src.hb)(t5,t7);let t8,t9,t10,t11;$[17]!==displayWarning||$[18]!==setDisplayWarning||$[19]!==url?.length?(t8=()=>{displayWarning&&url?.length&&setDisplayWarning(!1)},$[17]=displayWarning,$[18]=setDisplayWarning,$[19]=url?.length,$[20]=t8):t8=$[20],$[21]!==displayWarning||$[22]!==url?(t9=[url,displayWarning],$[21]=displayWarning,$[22]=url,$[23]=t9):t9=$[23],(0,react_src.vJ)(t8,t9),$[24]!==updatePageAttachment?(t10=newRel=>updatePageAttachment({rel:newRel},!0),t11=[updatePageAttachment],$[24]=updatePageAttachment,$[25]=t10,$[26]=t11):(t10=$[25],t11=$[26]);const onChangeRel=(0,react_src.hb)(t10,t11);let hint;const hasError=displayWarning||isInvalidUrl;if(hasError){let t12;$[27]!==displayWarning?(t12=displayWarning?(0,i18n.__)("Links cannot reside below the dashed line when a page attachment is present. If you add a page attachment, your viewers will not be able to click on the link.","web-stories"):(0,i18n.__)("Invalid link","web-stories"),$[27]=displayWarning,$[28]=t12):t12=$[28],hint=t12}let t12,t13,t14,t15;return $[29]!==hasError||$[30]!==hint||$[31]!==isFetching||$[32]!==onFocus||$[33]!==setIsFetching||$[34]!==setIsInvalidUrl||$[35]!==updatePageAttachment||$[36]!==url?(t12=react.createElement(LinkUrl,{value:url,onChange:updatePageAttachment,isFetching,setIsFetching,setIsInvalidUrl,hint,onFocus,hasError}),$[29]=hasError,$[30]=hint,$[31]=isFetching,$[32]=onFocus,$[33]=setIsFetching,$[34]=setIsInvalidUrl,$[35]=updatePageAttachment,$[36]=url,$[37]=t12):t12=$[37],$[38]!==ctaText||$[39]!==hasValidUrl||$[40]!==theme||$[41]!==updatePageAttachment?(t13=hasValidUrl&&react.createElement(react.Fragment,null,react.createElement(CallToActionText,{value:ctaText,defaultValue:(0,i18n.__)("Learn more","web-stories"),onChange:updatePageAttachment}),react.createElement(Theme,{theme,onChange:updatePageAttachment})),$[38]=ctaText,$[39]=hasValidUrl,$[40]=theme,$[41]=updatePageAttachment,$[42]=t13):t13=$[42],$[43]!==hasValidUrl||$[44]!==icon||$[45]!==isFetching||$[46]!==needsProxy||$[47]!==onChangeRel||$[48]!==rel||$[49]!==updatePageAttachment?(t14=hasValidUrl&&react.createElement(react.Fragment,null,react.createElement(Icon,{icon,isFetching,needsProxy,onChange:updatePageAttachment}),react.createElement(shared.uF,{onChangeRel,rel})),$[43]=hasValidUrl,$[44]=icon,$[45]=isFetching,$[46]=needsProxy,$[47]=onChangeRel,$[48]=rel,$[49]=updatePageAttachment,$[50]=t14):t14=$[50],$[51]!==t12||$[52]!==t13||$[53]!==t14?(t15=react.createElement(react.Fragment,null,t12,t13,t14),$[51]=t12,$[52]=t13,$[53]=t14,$[54]=t15):t15=$[54],t15}function outlink_temp(state){return{setDisplayLinkGuidelines:state.actions.setDisplayLinkGuidelines}}CallToActionText.propTypes={value:prop_types_default().string,defaultValue:prop_types_default().string.isRequired,onChange:prop_types_default().func.isRequired},Theme.propTypes={theme:prop_types_default().string,onChange:prop_types_default().func.isRequired},Icon.propTypes={icon:prop_types_default().string,onChange:prop_types_default().func.isRequired,isFetching:prop_types_default().bool,needsProxy:prop_types_default().bool},CallToActionText.__docgenInfo={description:"",methods:[],displayName:"CallToActionText",props:{value:{description:"",type:{name:"string"},required:!1},defaultValue:{description:"",type:{name:"string"},required:!0},onChange:{description:"",type:{name:"func"},required:!0}}},Theme.__docgenInfo={description:"",methods:[],displayName:"Theme",props:{theme:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}},Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{icon:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!0},isFetching:{description:"",type:{name:"bool"},required:!1},needsProxy:{description:"",type:{name:"bool"},required:!1}}},LinkUrl.__docgenInfo={description:"",methods:[],displayName:"LinkUrl",props:{value:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!0},setIsInvalidUrl:{description:"",type:{name:"func"},required:!0},hasError:{description:"",type:{name:"bool"},required:!1},setIsFetching:{description:"",type:{name:"func"},required:!0},onFocus:{description:"",type:{name:"func"},required:!0},hint:{description:"",type:{name:"string"},required:!1}}},Outlink.propTypes={pageAttachment:prop_types_default().shape({url:prop_types_default().string,ctaText:prop_types_default().string,icon:prop_types_default().string,theme:prop_types_default().string,rel:prop_types_default().arrayOf(prop_types_default().string),needsProxy:prop_types_default().bool}).isRequired,updatePageAttachment:prop_types_default().func.isRequired};const outlink=Outlink;Outlink.__docgenInfo={description:"",methods:[],displayName:"Outlink",props:{pageAttachment:{description:"",type:{name:"shape",value:{url:{name:"string",required:!1},ctaText:{name:"string",required:!1},icon:{name:"string",required:!1},theme:{name:"string",required:!1},rel:{name:"arrayOf",value:{name:"string"},required:!1},needsProxy:{name:"bool",required:!1}}},required:!0},updatePageAttachment:{description:"",type:{name:"func"},required:!0}}};const shoppingAttachment_HelperText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"shoppingAttachment__HelperText",componentId:"sc-fsu1pn-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary));function ShoppingAttachment(t0){const $=(0,dist.c)(11),{shoppingAttachment,updateShoppingAttachment}=t0,{ctaText,theme}=shoppingAttachment;let t1,t2,t3,t4,t5;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(components_form.fI,null,react.createElement(shoppingAttachment_HelperText,null,(0,i18n.__)("Since there are products on this page, you cannot add a regular page attachment, but only customize the appearance of the shopping call to action.","web-stories"))),$[0]=t1):t1=$[0],$[1]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Shop Now","web-stories"),$[1]=t2):t2=$[1],$[2]!==ctaText||$[3]!==updateShoppingAttachment?(t3=react.createElement(CallToActionText,{value:ctaText,defaultValue:t2,onChange:updateShoppingAttachment}),$[2]=ctaText,$[3]=updateShoppingAttachment,$[4]=t3):t3=$[4],$[5]!==theme||$[6]!==updateShoppingAttachment?(t4=react.createElement(Theme,{theme,onChange:updateShoppingAttachment}),$[5]=theme,$[6]=updateShoppingAttachment,$[7]=t4):t4=$[7],$[8]!==t3||$[9]!==t4?(t5=react.createElement(react.Fragment,null,t1,t3,t4),$[8]=t3,$[9]=t4,$[10]=t5):t5=$[10],t5}ShoppingAttachment.propTypes={shoppingAttachment:prop_types_default().shape({ctaText:prop_types_default().string,theme:prop_types_default().string}).isRequired,updateShoppingAttachment:prop_types_default().func.isRequired};const pageAttachment_shoppingAttachment=ShoppingAttachment;function PageAttachmentPanel(){const $=(0,dist.c)(20),{pageAttachment,shoppingAttachment,updateCurrentPageProperties,hasProducts}=(0,app.P3)(pageAttachment_temp2);let t0,t1;$[0]!==shoppingAttachment||$[1]!==updateCurrentPageProperties?(t0=value=>{updateCurrentPageProperties({properties:{shoppingAttachment:{...shoppingAttachment,...value}}})},t1=[updateCurrentPageProperties,shoppingAttachment],$[0]=shoppingAttachment,$[1]=updateCurrentPageProperties,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const updateShoppingAttachment=(0,react_src.hb)(t0,t1);let t2,t3;$[4]!==pageAttachment||$[5]!==updateCurrentPageProperties?(t2=value_0=>{updateCurrentPageProperties({properties:{pageAttachment:{...pageAttachment,...value_0}}})},t3=[updateCurrentPageProperties,pageAttachment],$[4]=pageAttachment,$[5]=updateCurrentPageProperties,$[6]=t2,$[7]=t3):(t2=$[6],t3=$[7]);const updatePageAttachment=(0,react_src.hb)(t2,t3);let t4,t5,t6,t7;return $[8]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Call to Action","web-stories"),$[8]=t4):t4=$[8],$[9]!==hasProducts||$[10]!==shoppingAttachment||$[11]!==updateShoppingAttachment?(t5=hasProducts&&react.createElement(pageAttachment_shoppingAttachment,{shoppingAttachment,updateShoppingAttachment}),$[9]=hasProducts,$[10]=shoppingAttachment,$[11]=updateShoppingAttachment,$[12]=t5):t5=$[12],$[13]!==hasProducts||$[14]!==pageAttachment||$[15]!==updatePageAttachment?(t6=!hasProducts&&react.createElement(outlink,{pageAttachment,updatePageAttachment}),$[13]=hasProducts,$[14]=pageAttachment,$[15]=updatePageAttachment,$[16]=t6):t6=$[16],$[17]!==t5||$[18]!==t6?(t7=react.createElement(panel.RV,{name:"pageAttachment",title:t4,collapsedByDefault:!1},t5,t6),$[17]=t5,$[18]=t6,$[19]=t7):t7=$[19],t7}function pageAttachment_temp2(t0){const{state,actions}=t0;return{updateCurrentPageProperties:actions.updateCurrentPageProperties,currentPage:state.currentPage,pageAttachment:state.currentPage.pageAttachment||{},shoppingAttachment:state.currentPage.shoppingAttachment||{},hasProducts:state.currentPage.elements?.some(pageAttachment_temp)}}function pageAttachment_temp(t0){const{type,product}=t0;return type===elements_src.bV.PRODUCT&&product?.productId}ShoppingAttachment.__docgenInfo={description:"",methods:[],displayName:"ShoppingAttachment",props:{shoppingAttachment:{description:"",type:{name:"shape",value:{ctaText:{name:"string",required:!1},theme:{name:"string",required:!1}}},required:!0},updateShoppingAttachment:{description:"",type:{name:"func"},required:!0}}};const pageAttachment=PageAttachmentPanel;PageAttachmentPanel.__docgenInfo={description:"",methods:[],displayName:"PageAttachmentPanel"};var backgroundAudioPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/backgroundAudioPanelContent.js");const backgroundAudio_HelperText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"backgroundAudio__HelperText",componentId:"sc-qyqy4a-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),HighlightRow=(0,styled_components_browser_esm.Ay)(components_form.fI).attrs({spaceBetween:!1}).withConfig({displayName:"backgroundAudio__HighlightRow",componentId:"sc-qyqy4a-1"})(["position:relative;&::after{content:'';position:absolute;top:-10px;bottom:-10px;left:-20px;right:-10px;"," pointer-events:none;}"],(({isHighlighted})=>isHighlighted&&highlights_styles.A.FLASH));function PageBackgroundAudioPanel(){const $=(0,dist.c)(18),{backgroundAudio,currentPageId,updateCurrentPageProperties}=(0,app.P3)(backgroundAudio_temp),{highlightBackgroundAudio,resetHighlight}=(0,useHighlights.A)(backgroundAudio_temp2);let t0,t1;$[0]!==updateCurrentPageProperties?(t0=updatedBackgroundAudio=>{updateCurrentPageProperties({properties:{backgroundAudio:updatedBackgroundAudio}})},t1=[updateCurrentPageProperties],$[0]=updateCurrentPageProperties,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const updateBackgroundAudio=(0,react_src.hb)(t0,t1);let t2;$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Page Background Audio","web-stories"),$[3]=t2):t2=$[3];const t3=!highlightBackgroundAudio,t4=highlightBackgroundAudio?.showEffect;let t5,t6,t7;$[4]!==resetHighlight?(t5=()=>resetHighlight(),$[4]=resetHighlight,$[5]=t5):t5=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(backgroundAudio_HelperText,null,(0,i18n.__)("Select an audio file that plays while this page is in view.","web-stories")),$[6]=t6):t6=$[6],$[7]!==t4||$[8]!==t5?(t7=react.createElement(HighlightRow,{isHighlighted:t4,onAnimationEnd:t5},t6),$[7]=t4,$[8]=t5,$[9]=t7):t7=$[9];const t8=`page-${currentPageId}-background-audio`;let t9,t10;return $[10]!==backgroundAudio||$[11]!==t8||$[12]!==updateBackgroundAudio?(t9=react.createElement(backgroundAudioPanelContent.A,{backgroundAudio,updateBackgroundAudio,showCaptions:!0,showLoopControl:!0,audioId:t8}),$[10]=backgroundAudio,$[11]=t8,$[12]=updateBackgroundAudio,$[13]=t9):t9=$[13],$[14]!==t3||$[15]!==t7||$[16]!==t9?(t10=react.createElement(panel.RV,{name:"pageBackgroundAudio",title:t2,collapsedByDefault:!1,isPersistable:t3},t7,t9),$[14]=t3,$[15]=t7,$[16]=t9,$[17]=t10):t10=$[17],t10}function backgroundAudio_temp2(state_0){return{highlightBackgroundAudio:state_0[highlights.xP.PageBackgroundAudio],resetHighlight:state_0.onFocusOut}}function backgroundAudio_temp(state){return{updateCurrentPageProperties:state.actions.updateCurrentPageProperties,backgroundAudio:state.state.currentPage?.backgroundAudio,currentPageId:state.state.currentPage?.id}}const backgroundAudio=PageBackgroundAudioPanel;PageBackgroundAudioPanel.__docgenInfo={description:"",methods:[],displayName:"PageBackgroundAudioPanel"};var getElementProperties=__webpack_require__("./packages/story-editor/src/components/canvas/utils/getElementProperties.ts");const DEFAULT_FLIP={horizontal:!1,vertical:!1},Row=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"pageBackground__Row",componentId:"sc-1rac0x7-0"})(["justify-content:flex-start;"]),SelectedMedia=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageBackground__SelectedMedia",componentId:"sc-1rac0x7-1"})(["width:128px;height:36px;border-radius:4px;border:1px solid ",";display:flex;justify-content:space-between;margin-right:12px;"],(({theme})=>theme.colors.border.defaultNormal)),MediaWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"pageBackground__MediaWrapper",componentId:"sc-1rac0x7-2"})(["height:24px;width:24px;border-radius:4px;overflow:hidden;margin:5px;img{object-fit:cover;max-height:100%;max-width:100%;}"]),RemoveButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"pageBackground__RemoveButton",componentId:"sc-1rac0x7-3"})(["margin:1px;align-self:center;"]),ReplaceButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({size:constants.Mp.Small,variant:constants.Ak.Square,type:constants.VQ.Tertiary}).withConfig({displayName:"pageBackground__ReplaceButton",componentId:"sc-1rac0x7-4"})(["margin-right:8px;"]),Text=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"pageBackground__Text",componentId:"sc-1rac0x7-5"})(["align-self:center;width:55px;"]);function PageBackgroundPanel(t0){const $=(0,dist.c)(56),{selectedElements,pushUpdate}=t0,{isDefaultBackground}=selectedElements[0];let t1;$[0]!==isDefaultBackground?(t1=t2=>{const{state,actions}=t2;return{currentPage:state.currentPage,clearBackgroundElement:actions.clearBackgroundElement,combineElements:actions.combineElements,updateCurrentPageProperties:actions.updateCurrentPageProperties,currentPageBackgroundColor:!isDefaultBackground||state.currentPage?.backgroundColor}},$[0]=isDefaultBackground,$[1]=t1):t1=$[1];const{combineElements,currentPage,clearBackgroundElement,updateCurrentPageProperties,currentPageBackgroundColor}=(0,app.P3)(t1),{getProxiedUrl}=(0,useCORSProxy.A)(),{capabilities:t2}=(0,app.UK)(),{hasUploadMediaAction}=t2,pageSize=(0,app.gK)(pageBackground_temp),[failedContrast,setFailedContrast]=(0,react_src.J0)(!1);let t3,t4;$[2]!==updateCurrentPageProperties?(t3=value=>{updateCurrentPageProperties({properties:{backgroundColor:value}})},t4=[updateCurrentPageProperties],$[2]=updateCurrentPageProperties,$[3]=t3,$[4]=t4):(t3=$[3],t4=$[4]);const updateBackgroundColor=(0,react_src.hb)(t3,t4);let t5,t6;$[5]!==clearBackgroundElement||$[6]!==pushUpdate?(t5=()=>{pushUpdate({isBackground:!1,opacity:100},!0),clearBackgroundElement()},t6=[pushUpdate,clearBackgroundElement],$[5]=clearBackgroundElement,$[6]=pushUpdate,$[7]=t5,$[8]=t6):(t5=$[7],t6=$[8]);const removeAsBackground=(0,react_src.hb)(t5,t6);let t7,t8;$[9]!==combineElements||$[10]!==selectedElements[0].id?(t7=resource=>{const element=(0,elements_src.N3)(resource.type,(0,getElementProperties.A)(resource.type,{resource}));combineElements({firstElement:element,secondId:selectedElements[0].id}),(0,tracking_src.sx)("replace_background_media")},$[9]=combineElements,$[10]=selectedElements[0].id,$[11]=t7):t7=$[11],$[12]!==combineElements||$[13]!==selectedElements?(t8=[combineElements,selectedElements],$[12]=combineElements,$[13]=selectedElements,$[14]=t8):t8=$[14];const onSelect=(0,react_src.hb)(t7,t8);let t9;$[15]===Symbol.for("react.memo_cache_sentinel")?(t9=[],$[15]=t9):t9=$[15];const renderReplaceButton=(0,react_src.hb)(pageBackground_temp2,t9),{highlight,resetHighlight,cancelHighlight}=(0,highlights.N)(pageBackground_temp3);let t10,t11;$[16]!==currentPage||$[17]!==pageSize||$[18]!==setFailedContrast?(t10=()=>{(0,checklist.g4)([currentPage],pageSize).then((failedPages=>{const result=failedPages[0]?.result,isBackgroundElement=result?.some(pageBackground_temp4);setFailedContrast(Boolean(isBackgroundElement))})).catch(noop.l)},$[16]=currentPage,$[17]=pageSize,$[18]=setFailedContrast,$[19]=t10):t10=$[19],$[20]!==currentPage||$[21]!==pageSize?(t11=[currentPage,pageSize],$[20]=currentPage,$[21]=pageSize,$[22]=t11):t11=$[22],(0,react_src.vJ)(t10,t11);const backgroundEl=selectedElements[0];if(!backgroundEl||!backgroundEl.isBackground)return null;const isMedia=backgroundEl.isBackground&&!isDefaultBackground,{backgroundColor}=currentPage;let t12;$[23]!==backgroundEl.type?(t12=(0,elements_src.zh)(backgroundEl.type),$[23]=backgroundEl.type,$[24]=t12):t12=$[24];const{LayerIcon}=t12,flip=selectedElements[0]?.flip||DEFAULT_FLIP,t13=highlight?.showEffect&&highlights_styles.A.FLASH;let t14,t15;$[25]!==resetHighlight?(t14=()=>resetHighlight(),$[25]=resetHighlight,$[26]=t14):t14=$[26],$[27]===Symbol.for("react.memo_cache_sentinel")?(t15=(0,i18n.__)("Page Background","web-stories"),$[27]=t15):t15=$[27];const t16=!highlight;let t17,t18,t19,t20;return $[28]!==backgroundColor||$[29]!==cancelHighlight||$[30]!==highlight?.focus||$[31]!==highlight?.showEffect||$[32]!==isDefaultBackground||$[33]!==updateBackgroundColor?(t17=isDefaultBackground&&react.createElement(Row,null,react.createElement(components_form.Q1,{ref:node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},allowsGradient:!0,value:backgroundColor,onChange:updateBackgroundColor,label:(0,i18n.__)("Background color","web-stories"),allowsSavedColors:!0,allowsOpacity:!1})),$[28]=backgroundColor,$[29]=cancelHighlight,$[30]=highlight?.focus,$[31]=highlight?.showEffect,$[32]=isDefaultBackground,$[33]=updateBackgroundColor,$[34]=t17):t17=$[34],$[35]!==LayerIcon||$[36]!==backgroundEl||$[37]!==currentPageBackgroundColor||$[38]!==flip||$[39]!==getProxiedUrl||$[40]!==hasUploadMediaAction||$[41]!==isMedia||$[42]!==onSelect||$[43]!==pushUpdate||$[44]!==removeAsBackground||$[45]!==renderReplaceButton?(t18=isMedia&&react.createElement(Row,{expand:!1},react.createElement(SelectedMedia,null,react.createElement(MediaWrapper,null,react.createElement(LayerIcon,{element:backgroundEl,getProxiedUrl,currentPageBackgroundColor})),react.createElement(Text,{size:types.$.Small},(0,i18n.__)("Media","web-stories")),react.createElement(RemoveButton,{"aria-label":(0,i18n.__)("Detach background","web-stories"),onClick:removeAsBackground,size:constants.Mp.Small,variant:constants.Ak.Square,type:constants.VQ.Tertiary},react.createElement(cross.A,null))),hasUploadMediaAction&&react.createElement(components_tooltip.A,{title:(0,i18n.__)("Replace","web-stories")},react.createElement(components_form.c4,{buttonInsertText:(0,i18n.__)("Use as background","web-stories"),onInsert:onSelect,renderButton:renderReplaceButton})),react.createElement(shared.Yb,{onChange:value_0=>pushUpdate({flip:value_0},!0),value:flip})),$[35]=LayerIcon,$[36]=backgroundEl,$[37]=currentPageBackgroundColor,$[38]=flip,$[39]=getProxiedUrl,$[40]=hasUploadMediaAction,$[41]=isMedia,$[42]=onSelect,$[43]=pushUpdate,$[44]=removeAsBackground,$[45]=renderReplaceButton,$[46]=t18):t18=$[46],$[47]!==failedContrast?(t19=failedContrast&&react.createElement(warning,{message:checklist.br.lowContrast.backgroundPanel}),$[47]=failedContrast,$[48]=t19):t19=$[48],$[49]!==t13||$[50]!==t14||$[51]!==t16||$[52]!==t17||$[53]!==t18||$[54]!==t19?(t20=react.createElement(pageBackground_StyledSimplePanel,{onAnimationEnd:t14,name:"pageBackground",title:t15,isPersistable:t16,collapsedByDefault:!1,$_css:t13},t17,t18,t19),$[49]=t13,$[50]=t14,$[51]=t16,$[52]=t17,$[53]=t18,$[54]=t19,$[55]=t20):t20=$[55],t20}function pageBackground_temp4(t0){const{isBackground}=t0;return isBackground}function pageBackground_temp3(state_0){return{highlight:state_0[highlights.xP.PageBackground],resetHighlight:state_0.onFocusOut,cancelHighlight:state_0.cancelEffect}}function pageBackground_temp2(open){return react.createElement(ReplaceButton,{onClick:open,"aria-label":(0,i18n.__)("Replace","web-stories")},react.createElement(arrow_cloud.A,null))}function pageBackground_temp(t0){const{state:t1}=t0,{pageWidth,pageHeight}=t1;return{width:pageWidth,height:pageHeight}}PageBackgroundPanel.propTypes={selectedElements:prop_types_default().array,pushUpdate:prop_types_default().func};const pageBackground=PageBackgroundPanel;PageBackgroundPanel.__docgenInfo={description:"",methods:[],displayName:"PageBackgroundPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}};var pageBackground_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"pageBackground___StyledSimplePanel",componentId:"sc-1rac0x7-6"})(["",""],(p=>p.$_css)),productDropdown=__webpack_require__("./packages/story-editor/src/components/library/panes/shopping/productDropdown.js");function ProductPanel(t0){const $=(0,dist.c)(13),{selectedElements,pushUpdate}=t0,isMultiple=(0,shared.Bl)(selectedElements,"product",[])===story_editor_src_constants.jW;let t1,t2;$[0]!==pushUpdate?(t1=newProduct=>pushUpdate({product:newProduct}),t2=[pushUpdate],$[0]=pushUpdate,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const setProduct=(0,react_src.hb)(t1,t2);let t3,t4,t5,t6;return $[3]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Product","web-stories"),$[3]=t3):t3=$[3],$[4]!==isMultiple?(t4=isMultiple&&react.createElement(input_input.A,{onChange:noop.l,disabled:!0,value:story_editor_src_constants.Q6,"aria-label":(0,i18n.__)("Product","web-stories")}),$[4]=isMultiple,$[5]=t4):t4=$[5],$[6]!==isMultiple||$[7]!==selectedElements||$[8]!==setProduct?(t5=!isMultiple&&react.createElement(productDropdown.A,{product:selectedElements[0].product,setProduct}),$[6]=isMultiple,$[7]=selectedElements,$[8]=setProduct,$[9]=t5):t5=$[9],$[10]!==t4||$[11]!==t5?(t6=react.createElement(panel.RV,{name:"product",title:t3,collapsedByDefault:!1},react.createElement(components_form.fI,null,t4,t5)),$[10]=t4,$[11]=t5,$[12]=t6):t6=$[12],t6}ProductPanel.propTypes={selectedElements:prop_types_default().array,pushUpdate:prop_types_default().func};const product=ProductPanel;function ShapeStylePanel(t0){const $=(0,dist.c)(24),{selectedElements,pushUpdate}=t0;let t1;$[0]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"backgroundColor"),$[0]=selectedElements,$[1]=t1):t1=$[1];const backgroundColor=t1;let t2,t3;$[2]!==pushUpdate?(t2=value=>{pushUpdate({backgroundColor:value},!0)},t3=[pushUpdate],$[2]=pushUpdate,$[3]=t2,$[4]=t3):(t2=$[3],t3=$[4]);const onChange=(0,react_src.hb)(t2,t3),{highlight,resetHighlight,cancelHighlight}=(0,highlights.N)(shapeStyle_temp),t4=highlight?.showEffect&&highlights_styles.A.FLASH;let t5,t6;$[5]!==resetHighlight?(t5=()=>resetHighlight(),$[5]=resetHighlight,$[6]=t5):t5=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Color","web-stories"),$[7]=t6):t6=$[7];const t7=!highlight;let t8,t9;$[8]===Symbol.for("react.memo_cache_sentinel")?(t8=(0,i18n.__)("Shape style","web-stories"),$[8]=t8):t8=$[8],$[9]!==cancelHighlight||$[10]!==highlight?.focus||$[11]!==highlight?.showEffect?(t9=node=>{node&&highlight?.focus&&highlight?.showEffect&&(node.addEventListener("keydown",cancelHighlight,{once:!0}),node.focus())},$[9]=cancelHighlight,$[10]=highlight?.focus,$[11]=highlight?.showEffect,$[12]=t9):t9=$[12];const t10=""===backgroundColor;let t11,t12,t13;return $[13]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,i18n.__)("Background color","web-stories"),$[13]=t11):t11=$[13],$[14]!==backgroundColor||$[15]!==onChange||$[16]!==t10||$[17]!==t9?(t12=react.createElement(components_form.fI,null,react.createElement(components_form.Q1,{ref:t9,allowsGradient:!0,value:backgroundColor,isMultiple:t10,onChange,label:t11,allowsSavedColors:!0})),$[14]=backgroundColor,$[15]=onChange,$[16]=t10,$[17]=t9,$[18]=t12):t12=$[18],$[19]!==t12||$[20]!==t4||$[21]!==t5||$[22]!==t7?(t13=react.createElement(shapeStyle_StyledSimplePanel,{onAnimationEnd:t5,name:"shapeStyle",title:t6,isPersistable:t7,"aria-labelledby":null,"aria-label":t8,$_css:t4},t12),$[19]=t12,$[20]=t4,$[21]=t5,$[22]=t7,$[23]=t13):t13=$[23],t13}function shapeStyle_temp(state){return{highlight:state[highlights.xP.Style],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}ProductPanel.__docgenInfo={description:"",methods:[],displayName:"ProductPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!1},pushUpdate:{description:"",type:{name:"func"},required:!1}}},ShapeStylePanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const shapeStyle=ShapeStylePanel;ShapeStylePanel.__docgenInfo={description:"",methods:[],displayName:"ShapeStylePanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var shapeStyle_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"shapeStyle___StyledSimplePanel",componentId:"sc-1ekkvr9-0"})(["",""],(p=>p.$_css)),calcRotatedObjectPositionAndSize=__webpack_require__("./packages/units/src/calcRotatedObjectPositionAndSize.ts"),angle=__webpack_require__("./packages/design-system/src/icons/angle.svg"),flipControls=__webpack_require__("./packages/story-editor/src/components/panels/shared/flipControls.js"),usePerformanceTracking=__webpack_require__("./packages/story-editor/src/utils/usePerformanceTracking.ts"),usePresubmitHandler=__webpack_require__("./packages/story-editor/src/components/form/usePresubmitHandler.js");const constants_MIN_MAX_ROTATION={MIN:-360,MAX:360},constants_MIN_MAX_WIDTH={MIN:1,MAX:1e3},constants_MIN_MAX_HEIGHT={MIN:1,MAX:1e3},constants_MIN_MAX_X={MIN:1,MAX:src_constants.bj-1},constants_MIN_MAX_Y={MIN:1-Math.floor(src_constants.vT),MAX:src_constants.WY+Math.floor(src_constants.vT)-1},constants_DEFAULT_FLIP={horizontal:!1,vertical:!1};function isNum(v){return"number"==typeof v&&!isNaN(v)}function usePresubmitHandlers_temp2(t0){const{rotationAngle:na,x:nx,y:ny,width:nw,height:nh}=t0,newDims=(0,calcRotatedObjectPositionAndSize.A)(na,nx,ny,nw,nh),newXOffset=nx-newDims.x,newYOffset=ny-newDims.y;return{x:(0,range.qE)(nx,{MIN:constants_MIN_MAX_X.MIN+newXOffset-newDims.width,MAX:constants_MIN_MAX_X.MAX+newXOffset}),y:(0,range.qE)(ny,{MIN:constants_MIN_MAX_Y.MIN+newYOffset-newDims.height,MAX:constants_MIN_MAX_Y.MAX+newYOffset})}}function usePresubmitHandlers_temp(t0){const{rotationAngle:newRotationAngle}=t0;return{rotationAngle:newRotationAngle%360}}const sizePosition_usePresubmitHandlers=function usePresubmitHandlers(lockAspectRatio,height,width){const $=(0,dist.c)(18);let t0,t1,t2,t3,t4,t5;$[0]!==lockAspectRatio?(t0=(newElement,t2,t3)=>{const{width:newWidth,height:newHeight}=t2,{width:oldWidth,height:oldHeight}=t3,{type}=newElement,isResizeWidth=Boolean(newWidth),isResizeHeight=Boolean(newHeight);if(!isResizeWidth&&!isResizeHeight)return null;const{updateForResizeEvent}=(0,elements_src.zh)(type);if(updateForResizeEvent){return updateForResizeEvent(newElement,[isResizeWidth?1:0,isResizeHeight?1:0],(0,range.qE)(newWidth,constants_MIN_MAX_WIDTH),(0,range.qE)(newHeight,constants_MIN_MAX_HEIGHT))}if(lockAspectRatio){const ratio=oldWidth/oldHeight;if(!isResizeWidth)return{width:(0,range.qE)((0,dimensions.GU)(newHeight*ratio),constants_MIN_MAX_WIDTH)};if(!isResizeHeight)return{height:(0,range.qE)((0,dimensions.GU)(newWidth/ratio),constants_MIN_MAX_HEIGHT)}}return null},t1=[lockAspectRatio],$[0]=lockAspectRatio,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]),(0,usePresubmitHandler.A)(t0,t1),$[3]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[3]=t2):t2=$[3],(0,usePresubmitHandler.A)(usePresubmitHandlers_temp,t2),$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[4]=t3):t3=$[4],(0,usePresubmitHandler.A)(usePresubmitHandlers_temp2,t3),$[5]!==lockAspectRatio?(t4=(value,ratio_0,minmax)=>lockAspectRatio&&value>=minmax.MAX?(0,range.qE)(minmax.MAX*ratio_0,minmax):(0,range.qE)(value,minmax),t5=[lockAspectRatio],$[5]=lockAspectRatio,$[6]=t4,$[7]=t5):(t4=$[6],t5=$[7]);const setDimensionMinMax=(0,react_src.hb)(t4,t5);let t6,t7,t8,t9;$[8]!==setDimensionMinMax?(t6=(t7,t8)=>{let{height:newHeight_0}=t7;const{width:oldWidth_0,height:oldHeight_0}=t8,ratio_1=oldHeight_0/oldWidth_0;return newHeight_0=(0,range.qE)(newHeight_0,constants_MIN_MAX_HEIGHT),isNum(ratio_1)?{height:setDimensionMinMax((0,dimensions.GU)(newHeight_0),ratio_1,constants_MIN_MAX_HEIGHT)}:{height:(0,range.qE)(newHeight_0,constants_MIN_MAX_HEIGHT)}},$[8]=setDimensionMinMax,$[9]=t6):t6=$[9],$[10]!==height||$[11]!==lockAspectRatio?(t7=[height,lockAspectRatio],$[10]=height,$[11]=lockAspectRatio,$[12]=t7):t7=$[12],(0,usePresubmitHandler.A)(t6,t7),$[13]!==setDimensionMinMax?(t8=(t9,t10)=>{let{width:newWidth_0}=t9;const{width:oldWidth_1,height:oldHeight_1}=t10,ratio_2=oldWidth_1/oldHeight_1;return newWidth_0=(0,range.qE)(newWidth_0,constants_MIN_MAX_WIDTH),isNum(ratio_2)?{width:setDimensionMinMax((0,dimensions.GU)(newWidth_0),ratio_2,constants_MIN_MAX_WIDTH)}:{width:(0,range.qE)(newWidth_0,constants_MIN_MAX_WIDTH)}},$[13]=setDimensionMinMax,$[14]=t8):t8=$[14],$[15]!==lockAspectRatio||$[16]!==width?(t9=[width,lockAspectRatio],$[15]=lockAspectRatio,$[16]=width,$[17]=t9):t9=$[17],(0,usePresubmitHandler.A)(t8,t9)};var opacity=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/opacity.js"),radius=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/radius.js");function sizePosition_extends(){return sizePosition_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sizePosition_extends.apply(null,arguments)}const sizePosition_StyledLockToggle=(0,styled_components_browser_esm.Ay)(toggleButton.m).withConfig({displayName:"sizePosition__StyledLockToggle",componentId:"sc-7rw4xb-0"})(["",";"],shared_styles.Y),stackableGroupStyleOverride=(0,styled_components_browser_esm.AH)(["max-width:none;"]);function getStickerAspectRatio(element){return stickers_src.A?.[element?.sticker?.type].aspectRatio||1}const gridWithoutFlip=(0,styled_components_browser_esm.AH)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . o . .' 'c c c c c c c';"],(({isSingleMedia})=>isSingleMedia?"'b b b b b . .'":null)),gridWithFlip=(0,styled_components_browser_esm.AH)(["grid-template-areas:"," 'x . . . y . .' 'w . d . h . l' 'r . . . f . .' ",";"],(({isSingleMedia})=>isSingleMedia?"'b b b b b . .'":null),(({unlockedRadius})=>unlockedRadius?"\n  'o . . . . . .'\n  'c c c c c c c'\n":"'o . . . c c c'")),Grid=styled_components_browser_esm.Ay.div.withConfig({displayName:"sizePosition__Grid",componentId:"sc-7rw4xb-1"})(["display:grid;"," grid-template-columns:1fr 4px 8px 4px 1fr 8px 32px;grid-template-rows:repeat(4,36px);row-gap:16px;align-items:center;justify-items:start;margin-bottom:16px;"],(({canFlip})=>canFlip?gridWithFlip:gridWithoutFlip)),sizePosition_Area=styled_components_browser_esm.Ay.div.withConfig({displayName:"sizePosition__Area",componentId:"sc-7rw4xb-2"})(["grid-area:",";width:100%;"],(({area})=>area)),Dash=styled_components_browser_esm.Ay.div.withConfig({displayName:"sizePosition__Dash",componentId:"sc-7rw4xb-3"})(["height:1px;width:100%;background:",";"],(({theme})=>theme.colors.divider.primary)),sizePosition_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"sizePosition__StyledButton",componentId:"sc-7rw4xb-4"})(["padding:10px 16px;width:100%;",";"],shared_styles.Y);function SizePositionPanel(props){const $=(0,dist.c)(158),{selectedElements,submittedSelectedElements,pushUpdate,pushUpdateForObject}=props,x=(0,shared.Bl)(selectedElements,"x"),y=(0,shared.Bl)(selectedElements,"y");let t0;$[0]!==selectedElements?(t0=(0,shared.Bl)(selectedElements,"width"),$[0]=selectedElements,$[1]=t0):t0=$[1];const width=t0;let t1;$[2]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"height"),$[2]=selectedElements,$[3]=t1):t1=$[3];const height=t1;let t2;$[4]!==selectedElements?(t2=(0,shared.Bl)(selectedElements,"rotationAngle"),$[4]=selectedElements,$[5]=t2):t2=$[5];const rotationAngle=t2,flip=(0,shared.dP)(selectedElements,"flip",constants_DEFAULT_FLIP);let t3;$[6]===Symbol.for("react.memo_cache_sentinel")?(t3={locked:!0},$[6]=t3):t3=$[6];const borderRadius=(0,shared.dP)(selectedElements,"borderRadius",t3);let t4,t5;$[7]!==submittedSelectedElements?(t4=()=>(0,shared.Bl)(submittedSelectedElements,"width")/(0,shared.Bl)(submittedSelectedElements,"height"),t5=[submittedSelectedElements],$[7]=submittedSelectedElements,$[8]=t4,$[9]=t5):(t4=$[8],t5=$[9]);const origRatio=(0,react_src.Kr)(t4,t5);let t6;$[10]!==selectedElements?(t6=(0,shared.Bl)(selectedElements,"lockAspectRatio"),$[10]=selectedElements,$[11]=t6):t6=$[11];const rawLockAspectRatio=t6,bgButtonRef=(0,react_src.li)(null);let t7;$[12]!==bgButtonRef.current?(t7={node:bgButtonRef.current,eventData:story_editor_src_constants.Zy.SET_BACKGROUND_MEDIA},$[12]=bgButtonRef.current,$[13]=t7):t7=$[13],(0,usePerformanceTracking.A)(t7);const lockAspectRatio=rawLockAspectRatio===story_editor_src_constants.jW||rawLockAspectRatio,{currentPage,combineElements}=(0,useStory.A)(sizePosition_temp),currentBackgroundId=currentPage?.elements[0].id,isSingleElement=1===selectedElements.length;let t8;$[14]!==selectedElements[0].type?(t8=(0,elements_src.zh)(selectedElements[0].type),$[14]=selectedElements[0].type,$[15]=t8):t8=$[15];const{isMedia}=t8;let t9;$[16]!==selectedElements?(t9=selectedElements.every(sizePosition_temp2),$[16]=selectedElements,$[17]=t9):t9=$[17];const canFlip=t9;let t10;$[18]!==selectedElements?(t10=selectedElements.some(sizePosition_temp3),$[18]=selectedElements,$[19]=t10):t10=$[19];const isAspectAlwaysLocked=t10;let t11;$[20]!==selectedElements?(t11=selectedElements.some(sizePosition_temp4),$[20]=selectedElements,$[21]=t11):t11=$[21];const hasText=t11;let t12,t13;$[22]!==height||$[23]!==isSingleElement||$[24]!==rotationAngle||$[25]!==width||$[26]!==x||$[27]!==y?(t12=()=>isSingleElement?(0,calcRotatedObjectPositionAndSize.A)(rotationAngle,x,y,width,height):{},t13=[rotationAngle,x,y,width,height,isSingleElement],$[22]=height,$[23]=isSingleElement,$[24]=rotationAngle,$[25]=width,$[26]=x,$[27]=y,$[28]=t12,$[29]=t13):(t12=$[28],t13=$[29]);const actualDimensions=(0,react_src.Kr)(t12,t13),xOffset=x-actualDimensions.x,yOffset=y-actualDimensions.y;let t14;$[30]!==actualDimensions.height||$[31]!==actualDimensions.width||$[32]!==isSingleElement||$[33]!==selectedElements||$[34]!==xOffset||$[35]!==yOffset?(t14=isSingleElement?{minX:constants_MIN_MAX_X.MIN+xOffset-actualDimensions.width,minY:constants_MIN_MAX_Y.MIN+yOffset-actualDimensions.height,maxX:constants_MIN_MAX_X.MAX+xOffset,maxY:constants_MIN_MAX_Y.MAX+yOffset}:function getMultiSelectionMinMaxXY(selectedElements){const allDimensions=selectedElements.map((element=>(0,calcRotatedObjectPositionAndSize.A)(element.rotationAngle,element.x,element.y,element.width,element.height)));return selectedElements.reduce(((values,element,i)=>{const actualDimensions=allDimensions[i],xOffset=element.x-actualDimensions.x,yOffset=element.y-actualDimensions.y,minX=constants_MIN_MAX_X.MIN+xOffset-actualDimensions.width,minY=constants_MIN_MAX_Y.MIN+yOffset-actualDimensions.height,maxX=constants_MIN_MAX_X.MAX+xOffset,maxY=constants_MIN_MAX_Y.MAX+yOffset;return{minX:values.minX?Math.max(values.minX,minX):minX,minY:values.minY?Math.max(values.minY,minY):minY,maxX:values.maxX?Math.min(values.maxX,maxX):maxX,maxY:values.maxY?Math.min(values.maxY,maxY):maxY}}),{})}(selectedElements),$[30]=actualDimensions.height,$[31]=actualDimensions.width,$[32]=isSingleElement,$[33]=selectedElements,$[34]=xOffset,$[35]=yOffset,$[36]=t14):t14=$[36];const minMaxXY=t14;let t15;$[37]!==lockAspectRatio||$[38]!==rawLockAspectRatio?(t15=(nWidth,nHeight)=>rawLockAspectRatio===story_editor_src_constants.jW?{lockAspectRatio,height:nHeight,width:nWidth}:{height:nHeight,width:nWidth},$[37]=lockAspectRatio,$[38]=rawLockAspectRatio,$[39]=t15):t15=$[39];const getUpdateObject=t15;let t16,t17;sizePosition_usePresubmitHandlers(lockAspectRatio,height,width),$[40]!==combineElements||$[41]!==currentBackgroundId||$[42]!==selectedElements[0]?(t16=()=>{combineElements({firstElement:selectedElements[0],secondId:currentBackgroundId})},$[40]=combineElements,$[41]=currentBackgroundId,$[42]=selectedElements[0],$[43]=t16):t16=$[43],$[44]!==combineElements||$[45]!==currentBackgroundId||$[46]!==selectedElements?(t17=[selectedElements,combineElements,currentBackgroundId],$[44]=combineElements,$[45]=currentBackgroundId,$[46]=selectedElements,$[47]=t17):t17=$[47];const handleSetBackground=(0,react_src.hb)(t16,t17),disableHeight=!lockAspectRatio&&hasText,enabledHeightPlaceholder=story_editor_src_constants.jW===height?story_editor_src_constants.Q6:null;let t18;$[48]!==disableHeight||$[49]!==enabledHeightPlaceholder?(t18=disableHeight?(0,i18n.__)("Auto","web-stories"):enabledHeightPlaceholder,$[48]=disableHeight,$[49]=enabledHeightPlaceholder,$[50]=t18):t18=$[50];const heightPlaceholder=t18;let t19;$[51]===Symbol.for("react.memo_cache_sentinel")?(t19=[],$[51]=t19):t19=$[51];const getMixedValueProps=(0,react_src.hb)(sizePosition_temp5,t19);let t20;$[52]===Symbol.for("react.memo_cache_sentinel")?(t20=(0,i18n.__)("Selection","web-stories"),$[52]=t20):t20=$[52];const t21=isMedia&&isSingleElement,t22=!borderRadius.locked;let t23,t24;$[53]!==bgButtonRef||$[54]!==handleSetBackground||$[55]!==isMedia||$[56]!==isSingleElement?(t23=isMedia&&isSingleElement&&react.createElement(sizePosition_Area,{area:"b"},react.createElement(sizePosition_StyledButton,{ref:bgButtonRef,onClick:handleSetBackground,type:constants.VQ.Secondary,size:constants.Mp.Small,variant:constants.Ak.Rectangle},(0,i18n.__)("Set as background","web-stories"))),$[53]=bgButtonRef,$[54]=handleSetBackground,$[55]=isMedia,$[56]=isSingleElement,$[57]=t23):t23=$[57],$[58]===Symbol.for("react.memo_cache_sentinel")?(t24=(0,i18n._x)("X","Position on X axis","web-stories"),$[58]=t24):t24=$[58];const t25=minMaxXY.minX,t26=minMaxXY.maxX;let t27,t28,t29,t30,t31;$[59]!==pushUpdate?(t27=(evt,value_0)=>pushUpdate({x:value_0},!0),$[59]=pushUpdate,$[60]=t27):t27=$[60],$[61]===Symbol.for("react.memo_cache_sentinel")?(t28=(0,i18n.__)("X position","web-stories"),$[61]=t28):t28=$[61],$[62]!==getMixedValueProps||$[63]!==x?(t29=getMixedValueProps(x),$[62]=getMixedValueProps,$[63]=x,$[64]=t29):t29=$[64],$[65]!==minMaxXY.maxX||$[66]!==minMaxXY.minX||$[67]!==t27||$[68]!==t29||$[69]!==x?(t30=react.createElement(sizePosition_Area,{area:"x"},react.createElement(numericInput.A,sizePosition_extends({suffix:t24,value:x,min:t25,max:t26,onChange:t27,"aria-label":t28,canBeNegative:!0},t29,{containerStyleOverride:shared_styles.t}))),$[65]=minMaxXY.maxX,$[66]=minMaxXY.minX,$[67]=t27,$[68]=t29,$[69]=x,$[70]=t30):t30=$[70],$[71]===Symbol.for("react.memo_cache_sentinel")?(t31=(0,i18n._x)("Y","Position on Y axis","web-stories"),$[71]=t31):t31=$[71];const t32=minMaxXY.minY,t33=minMaxXY.maxY;let t34,t35,t36,t37,t38,t39,t40,t41,t42,t43,t44;$[72]!==pushUpdate?(t34=(evt_0,value_1)=>pushUpdate({y:value_1},!0),$[72]=pushUpdate,$[73]=t34):t34=$[73],$[74]===Symbol.for("react.memo_cache_sentinel")?(t35=(0,i18n.__)("Y position","web-stories"),$[74]=t35):t35=$[74],$[75]!==getMixedValueProps||$[76]!==y?(t36=getMixedValueProps(y),$[75]=getMixedValueProps,$[76]=y,$[77]=t36):t36=$[77],$[78]!==minMaxXY.maxY||$[79]!==minMaxXY.minY||$[80]!==t34||$[81]!==t36||$[82]!==y?(t37=react.createElement(sizePosition_Area,{area:"y"},react.createElement(numericInput.A,sizePosition_extends({suffix:t31,value:y,min:t32,max:t33,onChange:t34,"aria-label":t35,canBeNegative:!0},t36,{containerStyleOverride:shared_styles.t}))),$[78]=minMaxXY.maxY,$[79]=minMaxXY.minY,$[80]=t34,$[81]=t36,$[82]=y,$[83]=t37):t37=$[83],$[84]===Symbol.for("react.memo_cache_sentinel")?(t38=(0,i18n._x)("W","The Width dimension","web-stories"),$[84]=t38):t38=$[84],$[85]!==getUpdateObject||$[86]!==height||$[87]!==lockAspectRatio||$[88]!==origRatio||$[89]!==pushUpdate?(t39=(evt_1,value_2)=>{const newWidth=value_2;let newHeight=height;lockAspectRatio&&(""===newWidth?newHeight="":isNum(newWidth/origRatio)&&(newHeight=(0,dimensions.GU)(newWidth/origRatio))),pushUpdate((element=>{if("sticker"===element?.type){const aspectRatio=getStickerAspectRatio(element);return getUpdateObject(newWidth,Math.floor(newWidth/aspectRatio))}return getUpdateObject(newWidth,newHeight)}),!0)},$[85]=getUpdateObject,$[86]=height,$[87]=lockAspectRatio,$[88]=origRatio,$[89]=pushUpdate,$[90]=t39):t39=$[90],$[91]===Symbol.for("react.memo_cache_sentinel")?(t40=(0,i18n.__)("Width","web-stories"),$[91]=t40):t40=$[91],$[92]!==getMixedValueProps||$[93]!==width?(t41=getMixedValueProps(width),$[92]=getMixedValueProps,$[93]=width,$[94]=t41):t41=$[94],$[95]!==t39||$[96]!==t41||$[97]!==width?(t42=react.createElement(sizePosition_Area,{area:"w"},react.createElement(numericInput.A,sizePosition_extends({suffix:t38,value:width,min:constants_MIN_MAX_WIDTH.MIN,max:constants_MIN_MAX_WIDTH.MAX,onChange:t39,"aria-label":t40},t41,{containerStyleOverride:shared_styles.t}))),$[95]=t39,$[96]=t41,$[97]=width,$[98]=t42):t42=$[98],$[99]===Symbol.for("react.memo_cache_sentinel")?(t43=react.createElement(sizePosition_Area,{area:"d"},react.createElement(Dash,null)),$[99]=t43):t43=$[99],$[100]===Symbol.for("react.memo_cache_sentinel")?(t44=(0,i18n._x)("H","The Height dimension","web-stories"),$[100]=t44):t44=$[100];const t45=disableHeight?"":height;let t46,t47;$[101]!==getUpdateObject||$[102]!==lockAspectRatio||$[103]!==origRatio||$[104]!==pushUpdate||$[105]!==width?(t46=(evt_2,value_3)=>{const newHeight_0=value_3;let newWidth_0=width;lockAspectRatio&&(""===newHeight_0?newWidth_0="":isNum(newHeight_0*origRatio)&&(newWidth_0=(0,dimensions.GU)(newHeight_0*origRatio))),pushUpdate((element_0=>{if("sticker"===element_0?.type){const aspectRatio_0=getStickerAspectRatio(element_0);return getUpdateObject(Math.floor(newHeight_0*aspectRatio_0),newHeight_0)}return getUpdateObject(newWidth_0,newHeight_0)}),!0)},$[101]=getUpdateObject,$[102]=lockAspectRatio,$[103]=origRatio,$[104]=pushUpdate,$[105]=width,$[106]=t46):t46=$[106],$[107]===Symbol.for("react.memo_cache_sentinel")?(t47=(0,i18n.__)("Height","web-stories"),$[107]=t47):t47=$[107];const t48=story_editor_src_constants.jW===height;let t49,t50,t51;$[108]!==disableHeight||$[109]!==heightPlaceholder||$[110]!==t45||$[111]!==t46||$[112]!==t48?(t49=react.createElement(sizePosition_Area,{area:"h"},react.createElement(numericInput.A,{allowEmpty:disableHeight,suffix:t44,value:t45,disabled:disableHeight,min:constants_MIN_MAX_HEIGHT.MIN,max:constants_MIN_MAX_HEIGHT.MAX,onChange:t46,"aria-label":t47,isIndeterminate:t48,placeholder:heightPlaceholder,containerStyleOverride:shared_styles.t})),$[108]=disableHeight,$[109]=heightPlaceholder,$[110]=t45,$[111]=t46,$[112]=t48,$[113]=t49):t49=$[113],$[114]===Symbol.for("react.memo_cache_sentinel")?(t50=(0,i18n.__)("Lock aspect ratio","web-stories"),$[114]=t50):t50=$[114],$[115]===Symbol.for("react.memo_cache_sentinel")?(t51=(0,i18n.__)("Lock aspect ratio","web-stories"),$[115]=t51):t51=$[115];const t52=lockAspectRatio||isAspectAlwaysLocked;let t53,t54,t55,t56,t57,t58,t59,t60,t61,t62,t63,t64;return $[116]!==isAspectAlwaysLocked||$[117]!==lockAspectRatio||$[118]!==pushUpdate?(t53=()=>!isAspectAlwaysLocked&&pushUpdate({lockAspectRatio:!lockAspectRatio},!0),$[116]=isAspectAlwaysLocked,$[117]=lockAspectRatio,$[118]=pushUpdate,$[119]=t53):t53=$[119],$[120]!==isAspectAlwaysLocked||$[121]!==t52||$[122]!==t53?(t54=react.createElement(sizePosition_Area,{area:"l"},react.createElement(components_tooltip.A,{title:t50},react.createElement(sizePosition_StyledLockToggle,{"aria-label":t51,isLocked:t52,disabled:isAspectAlwaysLocked,onClick:t53}))),$[120]=isAspectAlwaysLocked,$[121]=t52,$[122]=t53,$[123]=t54):t54=$[123],$[124]===Symbol.for("react.memo_cache_sentinel")?(t55=react.createElement(angle.A,null),t56=(0,i18n._x)("°","Degrees, 0 — 360.","web-stories"),$[124]=t55,$[125]=t56):(t55=$[124],t56=$[125]),$[126]!==pushUpdate?(t57=(evt_3,value_4)=>pushUpdate({rotationAngle:value_4},!0),$[126]=pushUpdate,$[127]=t57):t57=$[127],$[128]===Symbol.for("react.memo_cache_sentinel")?(t58=(0,i18n.__)("Rotation","web-stories"),$[128]=t58):t58=$[128],$[129]!==getMixedValueProps||$[130]!==rotationAngle?(t59=getMixedValueProps(rotationAngle),$[129]=getMixedValueProps,$[130]=rotationAngle,$[131]=t59):t59=$[131],$[132]!==rotationAngle||$[133]!==t57||$[134]!==t59?(t60=react.createElement(sizePosition_Area,{area:"r"},react.createElement(numericInput.A,sizePosition_extends({suffix:t55,unit:t56,value:rotationAngle,min:constants_MIN_MAX_ROTATION.MIN,max:constants_MIN_MAX_ROTATION.MAX,onChange:t57,"aria-label":t58,canBeNegative:!0},t59,{containerStyleOverride:shared_styles.t}))),$[132]=rotationAngle,$[133]=t57,$[134]=t59,$[135]=t60):t60=$[135],$[136]!==canFlip||$[137]!==flip||$[138]!==pushUpdateForObject?(t61=canFlip&&react.createElement(sizePosition_Area,{area:"f"},react.createElement(flipControls.A,{onChange:value_5=>pushUpdateForObject("flip",value_5,constants_DEFAULT_FLIP,!0),value:flip})),$[136]=canFlip,$[137]=flip,$[138]=pushUpdateForObject,$[139]=t61):t61=$[139],$[140]!==props?(t62=react.createElement(sizePosition_Area,{area:"o"},react.createElement(opacity.A,props)),$[140]=props,$[141]=t62):t62=$[141],$[142]!==props?(t63=react.createElement(sizePosition_Area,{area:"c"},react.createElement(radius.A,sizePosition_extends({stackableGroupStyleOverride},props))),$[142]=props,$[143]=t63):t63=$[143],$[144]!==canFlip||$[145]!==t21||$[146]!==t22||$[147]!==t23||$[148]!==t30||$[149]!==t37||$[150]!==t42||$[151]!==t49||$[152]!==t54||$[153]!==t60||$[154]!==t61||$[155]!==t62||$[156]!==t63?(t64=react.createElement(panel.RV,{name:"size",title:t20},react.createElement(Grid,{isSingleMedia:t21,canFlip,unlockedRadius:t22},t23,t30,t37,t42,t43,t49,t54,t60,t61,t62,t63)),$[144]=canFlip,$[145]=t21,$[146]=t22,$[147]=t23,$[148]=t30,$[149]=t37,$[150]=t42,$[151]=t49,$[152]=t54,$[153]=t60,$[154]=t61,$[155]=t62,$[156]=t63,$[157]=t64):t64=$[157],t64}function sizePosition_temp5(value){return{isIndeterminate:story_editor_src_constants.jW===value,placeholder:story_editor_src_constants.jW===value?story_editor_src_constants.Q6:null}}function sizePosition_temp4(t0){const{type:type_1}=t0;return"text"===type_1}function sizePosition_temp3(t0){const{type:type_0}=t0;return(0,elements_src.zh)(type_0).isAspectAlwaysLocked}function sizePosition_temp2(t0){const{type}=t0;return(0,elements_src.zh)(type).canFlip}function sizePosition_temp(state){return{currentPage:state.state.currentPage,combineElements:state.actions.combineElements}}SizePositionPanel.propTypes={selectedElements:prop_types_default().array.isRequired,submittedSelectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired,pushUpdateForObject:prop_types_default().func.isRequired};const sizePosition=SizePositionPanel;function TextAccessibilityPanel(t0){const $=(0,dist.c)(43),{selectedElements,pushUpdate}=t0,[tagNamesOverrides,setTagNamesOverrides]=(0,react_src.J0)();let t1;$[0]!==tagNamesOverrides?(t1=t2=>{const{state}=t2;return{textElements:state.currentPage?.elements?.filter(textAccessibility_temp).map((t3=>{const{id,tagName,...rest}=t3;return{id,...rest,tagName:tagNamesOverrides?.get(id)||tagName}}))}},$[0]=tagNamesOverrides,$[1]=t1):t1=$[1];const{textElements}=(0,app_story.P3)(t1);let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[2]=t2):t2=$[2];const onLinkClick=(0,react_src.hb)(textAccessibility_temp2,t2);let t3,t4;$[3]!==pushUpdate||$[4]!==selectedElements||$[5]!==setTagNamesOverrides?(t3=(evt_0,value)=>{setTagNamesOverrides(new Map(selectedElements.map((t4=>{const{id:id_0}=t4;return[id_0,value]})))),selectedElements.forEach((()=>{pushUpdate({tagName:value},!0)}))},$[3]=pushUpdate,$[4]=selectedElements,$[5]=setTagNamesOverrides,$[6]=t3):t3=$[6],$[7]!==pushUpdate||$[8]!==selectedElements?(t4=[pushUpdate,selectedElements],$[7]=pushUpdate,$[8]=selectedElements,$[9]=t4):t4=$[9];const handleChange=(0,react_src.hb)(t3,t4);let currentValue,t5;if($[10]!==selectedElements||$[11]!==textElements){const tagNamesMap=(0,output_src.iG)(textElements),selectedElementsWithTagNames=selectedElements.map((element=>({...element,tagName:tagNamesMap.get(element.id),defaultTagName:element.tagName||"auto"}))),uniqueTagNames=[...new Set(selectedElementsWithTagNames.map(textAccessibility_temp3))];currentValue=1===uniqueTagNames.length?uniqueTagNames[0]:story_editor_src_constants.jW,t5=(0,shared.Bl)(selectedElementsWithTagNames,"defaultTagName","auto"),$[10]=selectedElements,$[11]=textElements,$[12]=currentValue,$[13]=t5}else currentValue=$[12],t5=$[13];const tagName_1=t5,isIndeterminate=story_editor_src_constants.jW===tagName_1,selectedValue="auto"===tagName_1?"auto":currentValue;let t6,t7,t10,t11,t8,t9,t12;$[14]!==currentValue||$[15]!==selectedValue?(t6="auto"===selectedValue?(0,sprintf.A)((0,i18n.__)("Automatic (%s)","web-stories"),story_editor_src_constants.Dh[currentValue]||story_editor_src_constants.Q6):(0,i18n.__)("Automatic","web-stories"),$[14]=currentValue,$[15]=selectedValue,$[16]=t6):t6=$[16],$[17]!==t6?(t7={label:t6,value:"auto"},$[17]=t6,$[18]=t7):t7=$[18],$[19]===Symbol.for("react.memo_cache_sentinel")?(t8={label:story_editor_src_constants.Dh.h1,value:"h1"},t9={label:story_editor_src_constants.Dh.h2,value:"h2"},t10={label:story_editor_src_constants.Dh.h3,value:"h3"},t11={label:story_editor_src_constants.Dh.p,value:"p"},$[19]=t10,$[20]=t11,$[21]=t8,$[22]=t9):(t10=$[19],t11=$[20],t8=$[21],t9=$[22]),$[23]!==t7?(t12=[t7,t8,t9,t10,t11],$[23]=t7,$[24]=t12):t12=$[24];const options=t12;let t13,t14,t15;$[25]===Symbol.for("react.memo_cache_sentinel")?(t13=(0,i18n.__)("Accessibility","web-stories"),$[25]=t13):t13=$[25],$[26]===Symbol.for("react.memo_cache_sentinel")?(t14=(0,i18n.__)("Heading Levels","web-stories"),t15=(0,i18n.__)("Heading Levels","web-stories"),$[26]=t14,$[27]=t15):(t14=$[26],t15=$[27]);const t16=isIndeterminate?story_editor_src_constants.Q6:currentValue;let t17,t18,t19,t20,t21,t22,t23;return $[28]===Symbol.for("react.memo_cache_sentinel")?(t17=(0,i18n.__)("Heading Level","web-stories"),$[28]=t17):t17=$[28],$[29]!==handleChange||$[30]!==options||$[31]!==selectedValue||$[32]!==t16?(t18=react.createElement(components_form.fI,null,react.createElement(dropdown.A,{"data-testid":"text-accessibility-dropdown",title:t14,dropdownButtonLabel:t15,options,selectedValue,placeholder:t16,onMenuItemClick:handleChange,dropDownLabel:t17})),$[29]=handleChange,$[30]=options,$[31]=selectedValue,$[32]=t16,$[33]=t18):t18=$[33],$[34]===Symbol.for("react.memo_cache_sentinel")?(t19=(0,i18n.__)("https://wp.stories.google/docs/seo/","web-stories"),$[34]=t19):t19=$[34],$[35]!==onLinkClick?(t20={a:react.createElement(typography_link.N,{href:t19,rel:"noreferrer",target:"_blank",onClick:onLinkClick,size:types.$.XSmall})},$[35]=onLinkClick,$[36]=t20):t20=$[36],$[37]===Symbol.for("react.memo_cache_sentinel")?(t21=(0,i18n.__)("<a>Learn more</a> about using headings in stories.","web-stories"),$[37]=t21):t21=$[37],$[38]!==t20?(t22=react.createElement(typography_text.E.Paragraph,{size:types.$.XSmall},react.createElement(translateWithMarkup.A,{mapping:t20},t21)),$[38]=t20,$[39]=t22):t22=$[39],$[40]!==t18||$[41]!==t22?(t23=react.createElement(panel.RV,{name:"textAccessibility",title:t13},t18,t22),$[40]=t18,$[41]=t22,$[42]=t23):t23=$[42],t23}function textAccessibility_temp3(t0){const{tagName:tagName_0}=t0;return tagName_0||"auto"}function textAccessibility_temp2(evt){(0,tracking_src.MP)(evt,"click_headings_docs")}function textAccessibility_temp(t0){const{type}=t0;return"text"===type}SizePositionPanel.__docgenInfo={description:"",methods:[],displayName:"SizePositionPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},submittedSelectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0},pushUpdateForObject:{description:"",type:{name:"func"},required:!0}}},TextAccessibilityPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const textAccessibility=TextAccessibilityPanel;TextAccessibilityPanel.__docgenInfo={description:"",methods:[],displayName:"TextAccessibilityPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var content=__webpack_require__("./packages/story-editor/src/components/panels/panel/shared/content.js"),panel_panel=__webpack_require__("./packages/story-editor/src/components/panels/panel/panel.js"),letter_a_height=__webpack_require__("./packages/design-system/src/icons/letter_a_height.svg"),letter_a_width=__webpack_require__("./packages/design-system/src/icons/letter_a_width.svg"),align_text_left=__webpack_require__("./packages/design-system/src/icons/align_text_left.svg"),align_text_center=__webpack_require__("./packages/design-system/src/icons/align_text_center.svg"),align_text_right=__webpack_require__("./packages/design-system/src/icons/align_text_right.svg"),align_text_justified=__webpack_require__("./packages/design-system/src/icons/align_text_justified.svg"),letter_b_bold=__webpack_require__("./packages/design-system/src/icons/letter_b_bold.svg"),letter_i_italic=__webpack_require__("./packages/design-system/src/icons/letter_i_italic.svg"),letter_u_underline=__webpack_require__("./packages/design-system/src/icons/letter_u_underline.svg"),letter_t_uppercase=__webpack_require__("./packages/design-system/src/icons/letter_t_uppercase.svg");function style_extends(){return style_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},style_extends.apply(null,arguments)}const style_MIN_MAX_LINE_HEIGHT={MIN:.5,MAX:10},style_MIN_MAX_LETTER_SPACING={MIN:0,MAX:300},StyledNumericInput=(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"style__StyledNumericInput",componentId:"sc-9ups92-0"})(["flex-grow:1;"]),style_Space=styled_components_browser_esm.Ay.div.withConfig({displayName:"style__Space",componentId:"sc-9ups92-1"})(["flex:0 0 3px;"]),StyledToggle=(0,styled_components_browser_esm.Ay)(toggleButton.f).withConfig({displayName:"style__StyledToggle",componentId:"sc-9ups92-2"})(["",";"],shared_styles.Y);function Toggle(props){const $=(0,dist.c)(2);let t0;return $[0]!==props?(t0=react.createElement(StyledToggle,style_extends({size:constants.Mp.Small,variant:constants.Ak.Square},props)),$[0]=props,$[1]=t0):t0=$[1],t0}function StylePanel(t0){const $=(0,dist.c)(107),{selectedElements,pushUpdate}=t0,{actions:t1}=(0,font.Ln)(),{maybeEnqueueFontStyle}=t1;let t2;$[0]!==selectedElements?(t2=(0,shared.Bl)(selectedElements,"textAlign"),$[0]=selectedElements,$[1]=t2):t2=$[1];const textAlign=t2;let t3;$[2]!==selectedElements?(t3=(0,shared.Bl)(selectedElements,"lineHeight"),$[2]=selectedElements,$[3]=t3):t3=$[3];const lineHeight=t3,{textInfo:t4,handlers:t5}=(0,useRichTextFormatting.A)(selectedElements,pushUpdate),{isBold,isItalic,isUnderline,isUppercase,letterSpacing,fontWeight}=t4,{handleClickBold,handleClickItalic,handleClickUnderline,handleClickUppercase,handleSetLetterSpacing}=t5;let t6,t7;$[4]!==handleSetLetterSpacing?(t6=(evt,value)=>handleSetLetterSpacing((0,range.qE)(value,style_MIN_MAX_LETTER_SPACING)),t7=[handleSetLetterSpacing],$[4]=handleSetLetterSpacing,$[5]=t6,$[6]=t7):(t6=$[5],t7=$[6]);const setLetterSpacingMinMax=(0,react_src.hb)(t6,t7);let t8,t10,t9;$[7]===Symbol.for("react.memo_cache_sentinel")?(t8=[],$[7]=t8):t8=$[7],(0,components_form.jm)(style_temp,t8),$[8]!==pushUpdate||$[9]!==textAlign?(t9=alignment=>()=>{pushUpdate({textAlign:textAlign===alignment?"":alignment},!0)},t10=[pushUpdate,textAlign],$[8]=pushUpdate,$[9]=textAlign,$[10]=t10,$[11]=t9):(t10=$[10],t9=$[11]);const handleTextAlign=(0,react_src.hb)(t9,t10),isTrulyBold=!0===isBold,isTrulyItalic=!0===isItalic,isTrulyUnderline=!0===isUnderline,isTrulyUppercase=!0===isUppercase;let t11,t12,t13;$[12]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,i18n.__)("Line-height","web-stories"),$[12]=t11):t11=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t12=react.createElement(letter_a_height.A,null),$[13]=t12):t12=$[13],$[14]!==pushUpdate?(t13=(evt_0,value_0)=>pushUpdate({lineHeight:value_0},!0),$[14]=pushUpdate,$[15]=t13):t13=$[15];const t14=story_editor_src_constants.jW===lineHeight,t15=story_editor_src_constants.jW===lineHeight?story_editor_src_constants.Q6:null;let t16,t17,t18,t19;$[16]!==lineHeight||$[17]!==t13||$[18]!==t14||$[19]!==t15?(t16=react.createElement(StyledNumericInput,{"aria-label":t11,isFloat:!0,value:lineHeight,min:style_MIN_MAX_LINE_HEIGHT.MIN,max:style_MIN_MAX_LINE_HEIGHT.MAX,suffix:t12,onChange:t13,allowEmpty:!0,isIndeterminate:t14,placeholder:t15,containerStyleOverride:shared_styles.t}),$[16]=lineHeight,$[17]=t13,$[18]=t14,$[19]=t15,$[20]=t16):t16=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(t17=react.createElement(style_Space,null),$[21]=t17):t17=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(t18=(0,i18n.__)("Letter-spacing","web-stories"),$[22]=t18):t18=$[22],$[23]===Symbol.for("react.memo_cache_sentinel")?(t19=react.createElement(letter_a_width.A,null),$[23]=t19):t19=$[23];const t20=story_editor_src_constants.jW===letterSpacing,t21=story_editor_src_constants.jW===letterSpacing?story_editor_src_constants.Q6:null;let t22,t23;$[24]!==letterSpacing||$[25]!==setLetterSpacingMinMax||$[26]!==t20||$[27]!==t21?(t22=react.createElement(StyledNumericInput,{"aria-label":t18,value:letterSpacing,min:style_MIN_MAX_LETTER_SPACING.MIN,max:style_MIN_MAX_LETTER_SPACING.MAX,suffix:t19,unit:"%",onChange:setLetterSpacingMinMax,allowEmpty:!0,isIndeterminate:t20,placeholder:t21,containerStyleOverride:shared_styles.t}),$[24]=letterSpacing,$[25]=setLetterSpacingMinMax,$[26]=t20,$[27]=t21,$[28]=t22):t22=$[28],$[29]!==t16||$[30]!==t22?(t23=react.createElement(components_form.fI,null,t16,t17,t22),$[29]=t16,$[30]=t22,$[31]=t23):t23=$[31];const t24="left"===textAlign;let t25,t26,t27,t28;$[32]!==handleTextAlign?(t25=handleTextAlign("left"),$[32]=handleTextAlign,$[33]=t25):t25=$[33],$[34]===Symbol.for("react.memo_cache_sentinel")?(t26=(0,i18n.__)("Align text left","web-stories"),t27=react.createElement(align_text_left.A,null),$[34]=t26,$[35]=t27):(t26=$[34],t27=$[35]),$[36]!==t24||$[37]!==t25?(t28=react.createElement(Toggle,{isToggled:t24,onClick:t25,"aria-label":t26},t27),$[36]=t24,$[37]=t25,$[38]=t28):t28=$[38];const t29="center"===textAlign;let t30,t31,t32,t33;$[39]!==handleTextAlign?(t30=handleTextAlign("center"),$[39]=handleTextAlign,$[40]=t30):t30=$[40],$[41]===Symbol.for("react.memo_cache_sentinel")?(t31=(0,i18n.__)("Align text center","web-stories"),t32=react.createElement(align_text_center.A,null),$[41]=t31,$[42]=t32):(t31=$[41],t32=$[42]),$[43]!==t29||$[44]!==t30?(t33=react.createElement(Toggle,{isToggled:t29,onClick:t30,"aria-label":t31},t32),$[43]=t29,$[44]=t30,$[45]=t33):t33=$[45];const t34="right"===textAlign;let t35,t36,t37,t38;$[46]!==handleTextAlign?(t35=handleTextAlign("right"),$[46]=handleTextAlign,$[47]=t35):t35=$[47],$[48]===Symbol.for("react.memo_cache_sentinel")?(t36=(0,i18n.__)("Align text right","web-stories"),t37=react.createElement(align_text_right.A,null),$[48]=t36,$[49]=t37):(t36=$[48],t37=$[49]),$[50]!==t34||$[51]!==t35?(t38=react.createElement(Toggle,{isToggled:t34,onClick:t35,"aria-label":t36},t37),$[50]=t34,$[51]=t35,$[52]=t38):t38=$[52];const t39="justify"===textAlign;let t40,t41,t42,t43,t44,t45,t46,t47,t48,t49,t50,t51,t52,t53,t54,t55,t56,t57,t58,t59,t60,t61;return $[53]!==handleTextAlign?(t40=handleTextAlign("justify"),$[53]=handleTextAlign,$[54]=t40):t40=$[54],$[55]===Symbol.for("react.memo_cache_sentinel")?(t41=(0,i18n.__)("Align text justified","web-stories"),t42=react.createElement(align_text_justified.A,null),$[55]=t41,$[56]=t42):(t41=$[55],t42=$[56]),$[57]!==t39||$[58]!==t40?(t43=react.createElement(Toggle,{isToggled:t39,onClick:t40,"aria-label":t41},t42),$[57]=t39,$[58]=t40,$[59]=t43):t43=$[59],$[60]!==handleClickBold||$[61]!==isTrulyBold?(t44=()=>handleClickBold(!isTrulyBold),$[60]=handleClickBold,$[61]=isTrulyBold,$[62]=t44):t44=$[62],$[63]===Symbol.for("react.memo_cache_sentinel")?(t45=(0,i18n.__)("Bold","web-stories"),t46=react.createElement(letter_b_bold.A,null),$[63]=t45,$[64]=t46):(t45=$[63],t46=$[64]),$[65]!==isTrulyBold||$[66]!==t44?(t47=react.createElement(Toggle,{isToggled:isTrulyBold,onClick:t44,"aria-label":t45},t46),$[65]=isTrulyBold,$[66]=t44,$[67]=t47):t47=$[67],$[68]!==fontWeight||$[69]!==handleClickItalic||$[70]!==isTrulyItalic||$[71]!==maybeEnqueueFontStyle||$[72]!==selectedElements?(t48=async()=>{await maybeEnqueueFontStyle(selectedElements.map((t49=>{const{font,content}=t49;return{font,fontStyle:isTrulyItalic?"normal":"italic",fontWeight,content:(0,dom_src._e)(content)}}))),handleClickItalic(!isTrulyItalic)},$[68]=fontWeight,$[69]=handleClickItalic,$[70]=isTrulyItalic,$[71]=maybeEnqueueFontStyle,$[72]=selectedElements,$[73]=t48):t48=$[73],$[74]===Symbol.for("react.memo_cache_sentinel")?(t49=(0,i18n.__)("Italic","web-stories"),t50=react.createElement(letter_i_italic.A,null),$[74]=t49,$[75]=t50):(t49=$[74],t50=$[75]),$[76]!==isTrulyItalic||$[77]!==t48?(t51=react.createElement(Toggle,{isToggled:isTrulyItalic,onClick:t48,"aria-label":t49},t50),$[76]=isTrulyItalic,$[77]=t48,$[78]=t51):t51=$[78],$[79]!==handleClickUnderline||$[80]!==isTrulyUnderline?(t52=()=>handleClickUnderline(!isTrulyUnderline),$[79]=handleClickUnderline,$[80]=isTrulyUnderline,$[81]=t52):t52=$[81],$[82]===Symbol.for("react.memo_cache_sentinel")?(t53=(0,i18n.__)("Underline","web-stories"),t54=react.createElement(letter_u_underline.A,null),$[82]=t53,$[83]=t54):(t53=$[82],t54=$[83]),$[84]!==isTrulyUnderline||$[85]!==t52?(t55=react.createElement(Toggle,{isToggled:isTrulyUnderline,onClick:t52,"aria-label":t53},t54),$[84]=isTrulyUnderline,$[85]=t52,$[86]=t55):t55=$[86],$[87]!==handleClickUppercase||$[88]!==isTrulyUppercase?(t56=()=>handleClickUppercase(!isTrulyUppercase),$[87]=handleClickUppercase,$[88]=isTrulyUppercase,$[89]=t56):t56=$[89],$[90]===Symbol.for("react.memo_cache_sentinel")?(t57=(0,i18n.__)("Uppercase","web-stories"),t58=react.createElement(letter_t_uppercase.A,null),$[90]=t57,$[91]=t58):(t57=$[90],t58=$[91]),$[92]!==isTrulyUppercase||$[93]!==t56?(t59=react.createElement(Toggle,{isToggled:isTrulyUppercase,onClick:t56,"aria-label":t57},t58),$[92]=isTrulyUppercase,$[93]=t56,$[94]=t59):t59=$[94],$[95]!==t28||$[96]!==t33||$[97]!==t38||$[98]!==t43||$[99]!==t47||$[100]!==t51||$[101]!==t55||$[102]!==t59?(t60=react.createElement(components_form.fI,null,t28,t33,t38,t43,t47,t51,t55,t59),$[95]=t28,$[96]=t33,$[97]=t38,$[98]=t43,$[99]=t47,$[100]=t51,$[101]=t55,$[102]=t59,$[103]=t60):t60=$[103],$[104]!==t23||$[105]!==t60?(t61=react.createElement(react.Fragment,null,t23,t60),$[104]=t23,$[105]=t60,$[106]=t61):t61=$[106],t61}function style_temp(t0){const{lineHeight:newLineHeight}=t0;return{lineHeight:(0,range.qE)(newLineHeight,style_MIN_MAX_LINE_HEIGHT)}}StylePanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const style=StylePanel;StylePanel.__docgenInfo={description:"",methods:[],displayName:"StylePanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var hasGradient=__webpack_require__("./packages/patterns/src/hasGradient.ts"),createSolid=__webpack_require__("./packages/patterns/src/createSolid.ts"),patterns_src_constants=__webpack_require__("./packages/patterns/src/constants.ts");function ColorControls(t0){const $=(0,dist.c)(11),{selectedElements,pushUpdate,textColorRef}=t0,{textInfo:t1,handlers:t2}=(0,useRichTextFormatting.A)(selectedElements,pushUpdate),{color,gradientColor}=t1,{handleSetColor,handleSetGradientColor}=t2;let t3;$[0]!==handleSetColor||$[1]!==handleSetGradientColor?(t3=colorValue=>{(0,hasGradient.A)(colorValue)?(handleSetColor((0,createSolid.A)(0,0,0)),handleSetGradientColor(colorValue)):(handleSetGradientColor(patterns_src_constants.vK),handleSetColor(colorValue))},$[0]=handleSetColor,$[1]=handleSetGradientColor,$[2]=t3):t3=$[2];const onColorChange=t3;let t4;$[3]!==color||$[4]!==gradientColor?(t4=gradientColor===story_editor_src_constants.jW?story_editor_src_constants.jW:(0,hasGradient.A)(gradientColor)?gradientColor:color,$[3]=color,$[4]=gradientColor,$[5]=t4):t4=$[5];const colorInputValue=t4;let t5,t6;return $[6]===Symbol.for("react.memo_cache_sentinel")?(t5=(0,i18n.__)("Text color","web-stories"),$[6]=t5):t5=$[6],$[7]!==colorInputValue||$[8]!==onColorChange||$[9]!==textColorRef?(t6=react.createElement(components_form.fI,null,react.createElement(components_form.Q1,{"data-testid":"text.color",value:colorInputValue,onChange:onColorChange,allowsSavedColors:!0,label:t5,labelId:"text-color-label",ref:textColorRef,hasEyedropper:!0,allowsGradient:!0})),$[7]=colorInputValue,$[8]=onColorChange,$[9]=textColorRef,$[10]=t6):t6=$[10],t6}ColorControls.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired,textColorRef:prop_types_default().func};const color=ColorControls;ColorControls.__docgenInfo={description:"",methods:[],displayName:"ColorControls",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0},textColorRef:{description:"",type:{name:"func"},required:!1}}};var textStyle_font=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/font.js"),pillGroup=__webpack_require__("./packages/design-system/src/components/pill/pillGroup.tsx"),useCommonColorValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonColorValue.js"),getCommonValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js");const FillRow=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"backgroundColor__FillRow",componentId:"sc-2oqmdd-0"})(["align-items:flex-start;justify-content:space-between;button{flex:1;z-index:1;}"]),FILL_OPTIONS=[{id:elements_src.xu.NONE,label:(0,i18n.__)("None","web-stories")},{id:elements_src.xu.FILL,label:(0,i18n.__)("Fill","web-stories")},{id:elements_src.xu.HIGHLIGHT,label:(0,i18n.__)("Highlight","web-stories")}];function BackgroundControls(t0){const $=(0,dist.c)(21),{selectedElements,pushUpdate}=t0,backgroundColor=(0,useCommonColorValue.A)(selectedElements,"backgroundColor");let t1;$[0]!==selectedElements?(t1=(0,getCommonValue.A)(selectedElements,"backgroundTextMode"),$[0]=selectedElements,$[1]=t1):t1=$[1];const backgroundTextMode=t1,fillRow=(0,react_src.li)();let t2,t3;$[2]!==pushUpdate?(t2=mode=>{pushUpdate((element=>({backgroundTextMode:mode,padding:[elements_src.xu.FILL,elements_src.xu.HIGHLIGHT].includes(mode)?(0,textStyle_utils.oB)(element):(0,textStyle_utils.Ei)(element)})),!0)},t3=[pushUpdate],$[2]=pushUpdate,$[3]=t2,$[4]=t3):(t2=$[3],t3=$[4]);const pushBackgroundTextMode=(0,react_src.hb)(t2,t3);let t4,t5;$[5]!==pushBackgroundTextMode?(t4=mode_0=>{pushBackgroundTextMode(mode_0)},t5=[pushBackgroundTextMode],$[5]=pushBackgroundTextMode,$[6]=t4,$[7]=t5):(t4=$[6],t5=$[7]);const onSelect=(0,react_src.hb)(t4,t5);let t6,t7,t8,t9;return $[8]!==backgroundTextMode||$[9]!==onSelect?(t6=react.createElement(pillGroup.A,{value:backgroundTextMode,onSelect,options:FILL_OPTIONS,pillStyleOverride:shared_styles.Y}),$[8]=backgroundTextMode,$[9]=onSelect,$[10]=t6):t6=$[10],$[11]!==fillRow||$[12]!==t6?(t7=react.createElement(FillRow,{ref:fillRow},t6),$[11]=fillRow,$[12]=t6,$[13]=t7):t7=$[13],$[14]!==backgroundColor||$[15]!==backgroundTextMode||$[16]!==pushUpdate?(t8=backgroundTextMode!==elements_src.xu.NONE&&react.createElement(components_form.fI,null,react.createElement(components_form.Q1,{"data-testid":"text.backgroundColor",allowsGradient:!0,allowsSavedColors:!0,value:backgroundColor,onChange:value=>pushUpdate({backgroundColor:value},!0),label:(0,i18n.__)("Background color","web-stories"),labelId:"background-color-label",changedStyle:"background",hasEyedropper:!0})),$[14]=backgroundColor,$[15]=backgroundTextMode,$[16]=pushUpdate,$[17]=t8):t8=$[17],$[18]!==t7||$[19]!==t8?(t9=react.createElement(react.Fragment,null,t7,t8),$[18]=t7,$[19]=t8,$[20]=t9):t9=$[20],t9}BackgroundControls.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const backgroundColor=BackgroundControls;BackgroundControls.__docgenInfo={description:"",methods:[],displayName:"BackgroundControls",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var turning_line=__webpack_require__("./packages/design-system/src/icons/turning_line.svg");function padding_extends(){return padding_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},padding_extends.apply(null,arguments)}const DEFAULT_PADDING={horizontal:0,vertical:0,locked:!0,hasHiddenPadding:!1},padding_MIN_MAX_PADDING={MIN:0,MAX:300},padding_Space=styled_components_browser_esm.Ay.div.withConfig({displayName:"padding__Space",componentId:"sc-17x5rfj-0"})(["flex:0 0 8px;"]),LockToggle=(0,styled_components_browser_esm.Ay)(toggleButton.m).withConfig({displayName:"padding__LockToggle",componentId:"sc-17x5rfj-1"})([""," ",";"],(({isLocked})=>!isLocked&&"\n    position: absolute;\n    right: 0;\n    top: calc(100% - 8px);\n  "),shared_styles.Y),padding_Row=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"padding__Row",componentId:"sc-17x5rfj-2"})(["position:relative;"]),padding_IconWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"padding__IconWrapper",componentId:"sc-17x5rfj-3"})(["width:44px;margin-left:6px;color:",";"," svg{width:22px;}"],(({theme})=>theme.colors.divider.primary),(({reverse})=>reverse&&"transform: scaleY(-1);"));function PaddingControls(t0){const $=(0,dist.c)(38),{selectedElements,pushUpdateForObject,pushUpdate}=t0;let t1;$[0]!==selectedElements?(t1=selectedElements.map(padding_temp),$[0]=selectedElements,$[1]=t1):t1=$[1];const displayedPadding=(0,shared.dP)(t1,"padding",DEFAULT_PADDING),lockPadding=!0===displayedPadding.locked;let t2,t3;$[2]!==pushUpdate||$[3]!==pushUpdateForObject?(t2=updater=>{pushUpdate((el_0=>{const{x,y,width,height}=el_0,newPadding=updater(el_0);return function metricsForTextPadding({currentPadding,newPadding,x,y,width,height}){const updates={};return"horizontal"in newPadding&&(updates.x=x-(newPadding.horizontal-(currentPadding.horizontal||0)),updates.width=width+2*(newPadding.horizontal-(currentPadding.horizontal||0))),"vertical"in newPadding&&(updates.y=y-(newPadding.vertical-(currentPadding.vertical||0)),updates.height=height+2*(newPadding.vertical-(currentPadding.vertical||0))),updates}({x,y,height,width,currentPadding:el_0.padding,newPadding})})),pushUpdateForObject("padding",(v=>updater({padding:v})),DEFAULT_PADDING,!0)},t3=[pushUpdate,pushUpdateForObject],$[2]=pushUpdate,$[3]=pushUpdateForObject,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleChange=(0,react_src.hb)(t2,t3);let t4,t5;$[6]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[6]=t4):t4=$[6],(0,components_form.jm)(padding_temp2,t4),$[7]!==handleChange||$[8]!==lockPadding?(t5=lockPadding?{suffix:(0,i18n.__)("Padding","web-stories"),"aria-label":(0,i18n.__)("Padding","web-stories"),onChange:(evt,value)=>{handleChange((el_1=>({horizontal:value+(0,textStyle_utils.io)(el_1,"horizontal"),vertical:value+(0,textStyle_utils.io)(el_1,"vertical")})))},stretch:!0}:{suffix:(0,i18n.__)("Horizontal padding","web-stories"),"aria-label":(0,i18n.__)("Horizontal padding","web-stories"),onChange:(evt_0,value_0)=>{handleChange((el_2=>({horizontal:value_0+(0,textStyle_utils.io)(el_2,"horizontal")})))}},$[7]=handleChange,$[8]=lockPadding,$[9]=t5):t5=$[9];const firstInputProperties=t5,t6=displayedPadding.horizontal===story_editor_src_constants.jW,t7=displayedPadding.horizontal===story_editor_src_constants.jW?story_editor_src_constants.Q6:null;let t8,t9,t10,t11,t12,t13,t14,t15,t16;return $[10]!==displayedPadding.horizontal||$[11]!==firstInputProperties||$[12]!==t6||$[13]!==t7?(t8=react.createElement(numericInput.A,padding_extends({value:displayedPadding.horizontal,isIndeterminate:t6,placeholder:t7},firstInputProperties,{containerStyleOverride:shared_styles.t})),$[10]=displayedPadding.horizontal,$[11]=firstInputProperties,$[12]=t6,$[13]=t7,$[14]=t8):t8=$[14],$[15]!==lockPadding?(t9=lockPadding&&react.createElement(padding_Space,null),$[15]=lockPadding,$[16]=t9):t9=$[16],$[17]!==handleChange||$[18]!==lockPadding?(t10=()=>handleChange((el_3=>lockPadding?{locked:!1}:{locked:!0,horizontal:el_3.padding.horizontal,vertical:el_3.padding.horizontal+(0,textStyle_utils.io)(el_3,"vertical")-(0,textStyle_utils.io)(el_3,"horizontal")})),$[17]=handleChange,$[18]=lockPadding,$[19]=t10):t10=$[19],$[20]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,i18n.__)("Toggle padding ratio lock","web-stories"),$[20]=t11):t11=$[20],$[21]!==lockPadding||$[22]!==t10?(t12=react.createElement(LockToggle,{isLocked:lockPadding,onClick:t10,"aria-label":t11}),$[21]=lockPadding,$[22]=t10,$[23]=t12):t12=$[23],$[24]!==lockPadding?(t13=!lockPadding&&react.createElement(padding_IconWrapper,{reverse:!0},react.createElement(turning_line.A,null)),$[24]=lockPadding,$[25]=t13):t13=$[25],$[26]!==t12||$[27]!==t13||$[28]!==t8||$[29]!==t9?(t14=react.createElement(padding_Row,null,t8,t9,t12,t13),$[26]=t12,$[27]=t13,$[28]=t8,$[29]=t9,$[30]=t14):t14=$[30],$[31]!==displayedPadding.vertical||$[32]!==handleChange||$[33]!==lockPadding?(t15=!lockPadding&&react.createElement(padding_Row,null,react.createElement(numericInput.A,{isIndeterminate:displayedPadding.vertical===story_editor_src_constants.jW,placeholder:displayedPadding.vertical===story_editor_src_constants.jW?story_editor_src_constants.Q6:null,suffix:(0,i18n.__)("Vertical padding","web-stories"),value:displayedPadding.vertical,onChange:(evt_1,value_1)=>{handleChange((el_4=>({vertical:Number(value_1)+(0,textStyle_utils.io)(el_4,"vertical")})))},"aria-label":(0,i18n.__)("Vertical padding","web-stories"),containerStyleOverride:shared_styles.t}),react.createElement(padding_IconWrapper,null,react.createElement(turning_line.A,null))),$[31]=displayedPadding.vertical,$[32]=handleChange,$[33]=lockPadding,$[34]=t15):t15=$[34],$[35]!==t14||$[36]!==t15?(t16=react.createElement(react.Fragment,null,t14,t15),$[35]=t14,$[36]=t15,$[37]=t16):t16=$[37],t16}function padding_temp2(t0){const{padding:t1}=t0,{horizontal,vertical,...rest}=t1;return{padding:{...rest,horizontal:(0,range.qE)(horizontal,padding_MIN_MAX_PADDING),vertical:(0,range.qE)(vertical,padding_MIN_MAX_PADDING)}}}function padding_temp(el){return{...el,padding:(0,textStyle_utils.Ei)(el)}}PaddingControls.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdateForObject:prop_types_default().func.isRequired,pushUpdate:prop_types_default().func.isRequired};const padding=PaddingControls;PaddingControls.__docgenInfo={description:"",methods:[],displayName:"PaddingControls",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdateForObject:{description:"",type:{name:"func"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var color_bucket=__webpack_require__("./packages/design-system/src/icons/color_bucket.svg"),useApplyTextAutoStyle=__webpack_require__("./packages/story-editor/src/utils/useApplyTextAutoStyle.js"),shared_title=__webpack_require__("./packages/story-editor/src/components/panels/panel/shared/title.js"),panel_context=__webpack_require__("./packages/story-editor/src/components/panels/panel/context.js");const AutoStyleButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({variant:constants.Ak.Square,type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"panelHeader__AutoStyleButton",componentId:"sc-1sprex4-0"})(["",";"],(({theme})=>outline.Q(theme.colors.border.focus,"#1d1f20")));function PanelHeader(t0){const $=(0,dist.c)(11),{selectedElements,pushUpdate}=t0,{state:t1}=(0,react_src.NT)(panel_context.A),{isCollapsed}=t1;let t2;$[0]!==pushUpdate?(t2=textProps=>{pushUpdate(textProps,!0),(0,tracking_src.sx)("auto_style_text")},$[0]=pushUpdate,$[1]=t2):t2=$[1];const applyTextAutoStyle=(0,useApplyTextAutoStyle.A)(selectedElements[0],t2);let t3;$[2]!==applyTextAutoStyle||$[3]!==isCollapsed||$[4]!==selectedElements.length?(t3=()=>isCollapsed?null:react.createElement(components_tooltip.A,{title:(0,i18n.__)("Adaptive text colors","web-stories")},react.createElement(AutoStyleButton,{"aria-label":(0,i18n.__)("Adaptive text colors","web-stories"),onClick:applyTextAutoStyle,disabled:selectedElements?.length>1},react.createElement(color_bucket.A,null))),$[2]=applyTextAutoStyle,$[3]=isCollapsed,$[4]=selectedElements.length,$[5]=t3):t3=$[5];const getActions=t3;let t4;$[6]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Text","web-stories"),$[6]=t4):t4=$[6];const panelTitle=t4;let t5,t6;return $[7]!==getActions?(t5=getActions(),$[7]=getActions,$[8]=t5):t5=$[8],$[9]!==t5?(t6=react.createElement(shared_title.A,{ariaLabel:panelTitle,secondaryAction:t5},panelTitle),$[9]=t5,$[10]=t6):t6=$[10],t6}const panelHeader=PanelHeader;PanelHeader.__docgenInfo={description:"",methods:[],displayName:"PanelHeader",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};const PresetsHeader=styled_components_browser_esm.Ay.div.withConfig({displayName:"stylePresets__PresetsHeader",componentId:"sc-8grd53-0"})(["display:flex;padding:8px 0;justify-content:space-between;"]),stylePresets_StylesWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"stylePresets__StylesWrapper",componentId:"sc-8grd53-1"})([""]),stylePresets_NoStylesWrapper=(0,styled_components_browser_esm.Ay)(NoStylesWrapper).withConfig({displayName:"stylePresets__NoStylesWrapper",componentId:"sc-8grd53-2"})(["width:calc(100% + 28px);"]),SubHeading=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"stylePresets__SubHeading",componentId:"sc-8grd53-3"})(["color:",";margin:6px 0;font-weight:",";"],(({theme})=>theme.colors.fg.secondary),(({theme})=>theme.typography.weight.bold)),textStyle_stylePresets_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"stylePresets__StyledButton",componentId:"sc-8grd53-4"})(["margin-left:auto;"]),stylePresets_NoStylesText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"stylePresets__NoStylesText",componentId:"sc-8grd53-5"})(["color:",";"],(({theme})=>theme.colors.fg.tertiary)),stylePresets_SPACING={x:12};function stylePresets_PresetPanel(t0){const $=(0,dist.c)(24),{pushUpdate}=t0,textStyles=(0,app.P3)(textStyle_stylePresets_temp),{refs:t1}=(0,useSidebar.A)(),{sidebar}=t1,buttonRef=(0,react_src.li)(null),[isPopupOpen,setIsPopupOpen]=(0,react_src.J0)(!1),hasPresets=textStyles.length>0;let t2;$[0]!==pushUpdate?(t2={pushUpdate},$[0]=pushUpdate,$[1]=t2):t2=$[1];const handleApplyStyle=styleManager_useApplyStyle(t2);let t3;$[2]===Symbol.for("react.memo_cache_sentinel")?(t3={presetType:story_editor_src_constants.aS.STYLE},$[2]=t3):t3=$[2];const{addGlobalPreset}=(0,useAddPreset.A)(t3);let t4;$[3]!==handleApplyStyle?(t4=preset=>{handleApplyStyle(preset)},$[3]=handleApplyStyle,$[4]=t4):t4=$[4];const handlePresetClick=t4;let t5,t6,t7,t8,t9,t10,t11;return $[5]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(SubHeading,{size:types.$.Small},(0,i18n.__)("Recently Saved Styles","web-stories")),$[5]=t5):t5=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Add style","web-stories"),t7=react.createElement(plus.A,null),$[6]=t6,$[7]=t7):(t6=$[6],t7=$[7]),$[8]!==addGlobalPreset?(t8=react.createElement(PresetsHeader,null,t5,react.createElement(textStyle_stylePresets_StyledButton,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,onClick:addGlobalPreset,"aria-label":t6},t7)),$[8]=addGlobalPreset,$[9]=t8):t8=$[9],$[10]!==buttonRef||$[11]!==handlePresetClick||$[12]!==hasPresets||$[13]!==isPopupOpen||$[14]!==setIsPopupOpen||$[15]!==sidebar||$[16]!==textStyles?(t9=hasPresets&&react.createElement(react.Fragment,null,react.createElement(stylePresets_StylesWrapper,null,react.createElement(styleGroup,{styles:[...textStyles].reverse().slice(0,2),handleClick:handlePresetClick})),react.createElement(MoreButton,{ref:buttonRef,onClick:()=>setIsPopupOpen(!0),"aria-haspopup":"dialog","aria-expanded":isPopupOpen},(0,i18n.__)("More styles","web-stories"),react.createElement(disclosure.A,{$isOpen:isPopupOpen})),react.createElement(popup.A,{anchor:buttonRef,dock:sidebar,isOpen:isPopupOpen,placement:popup_constants.W.RightStart,spacing:stylePresets_SPACING,renderContents:()=>react.createElement(styleManager,{styles:textStyles,applyStyle:handlePresetClick,onClose:()=>setIsPopupOpen(!1)})})),$[10]=buttonRef,$[11]=handlePresetClick,$[12]=hasPresets,$[13]=isPopupOpen,$[14]=setIsPopupOpen,$[15]=sidebar,$[16]=textStyles,$[17]=t9):t9=$[17],$[18]!==hasPresets?(t10=!hasPresets&&react.createElement(stylePresets_NoStylesWrapper,null,react.createElement(stylePresets_NoStylesText,{size:types.$.Small},(0,i18n.__)("No Styles Saved","web-stories"))),$[18]=hasPresets,$[19]=t10):t10=$[19],$[20]!==t10||$[21]!==t8||$[22]!==t9?(t11=react.createElement(react.Fragment,null,t8,t9,t10),$[20]=t10,$[21]=t8,$[22]=t9,$[23]=t11):t11=$[23],t11}function textStyle_stylePresets_temp(t0){const{state}=t0;return state.story.globalStoryStyles.textStyles}stylePresets_PresetPanel.propTypes={pushUpdate:prop_types_default().func.isRequired};const textStyle_stylePresets=stylePresets_PresetPanel;function textStyle_extends(){return textStyle_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},textStyle_extends.apply(null,arguments)}stylePresets_PresetPanel.__docgenInfo={description:"",methods:[],displayName:"PresetPanel",props:{pushUpdate:{description:"",type:{name:"func"},required:!0}}};const SubSection=styled_components_browser_esm.Ay.section.withConfig({displayName:"textStyle__SubSection",componentId:"sc-1al6pl8-0"})(["border-top:1px solid ",";display:flex;flex-direction:column;"],(({theme})=>theme.colors.border.defaultNormal)),textStyle_SubHeading=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"textStyle__SubHeading",componentId:"sc-1al6pl8-1"})(["color:",";margin:14px 0;font-weight:",";"],(({theme})=>theme.colors.fg.secondary),(({theme})=>theme.typography.weight.bold));function textStyle_StylePanel(props){const $=(0,dist.c)(55),{dropdownHighlight,colorHighlight,resetHighlight,cancelHighlight}=(0,highlights.N)(textStyle_temp),[fontsFocused,setFontsFocused]=(0,react_src.J0)(!1);let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=[],$[0]=t0):t0=$[0];const[failedElementIds,setFailedElementIds]=(0,react_src.J0)(t0),{selectedElements}=props;let t1;$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=[],$[1]=t1):t1=$[1],(0,components_form.jm)(getUpdatedSizeAndPosition.A,t1);const{currentPage:currentPage_0}=(0,app.P3)(textStyle_temp2),pageSize=(0,app.gK)(textStyle_temp3);let t2;if($[2]!==failedElementIds||$[3]!==selectedElements){const selectedElementIds=selectedElements.map(textStyle_temp4);t2=failedElementIds?.some((t3=>{const{id:id_0}=t3;return selectedElementIds.includes(id_0)})),$[2]=failedElementIds,$[3]=selectedElements,$[4]=t2}else t2=$[4];const showContrastWarning=t2;let t3,t4;$[5]!==currentPage_0||$[6]!==pageSize||$[7]!==setFailedElementIds?(t3=()=>{(0,checklist.g4)([currentPage_0],pageSize).then((pages=>{const elementIds=pages[0]?.result;setFailedElementIds(elementIds)})).catch(noop.l)},$[5]=currentPage_0,$[6]=pageSize,$[7]=setFailedElementIds,$[8]=t3):t3=$[8],$[9]!==currentPage_0||$[10]!==pageSize?(t4=[currentPage_0,pageSize],$[9]=currentPage_0,$[10]=pageSize,$[11]=t4):t4=$[11],(0,react_src.vJ)(t3,t4);const t5=(dropdownHighlight?.showEffect||colorHighlight?.showEffect)&&highlights_styles.A.FLASH;let t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18,t19;return $[12]!==resetHighlight?(t6=()=>resetHighlight(),$[12]=resetHighlight,$[13]=t6):t6=$[13],$[14]!==props?(t7=react.createElement(panelHeader,props),$[14]=props,$[15]=t7):t7=$[15],$[16]!==dropdownHighlight?.focus||$[17]!==dropdownHighlight?.showEffect||$[18]!==setFontsFocused?(t8=node=>{node&&dropdownHighlight?.focus&&dropdownHighlight?.showEffect&&(node.focus(),setFontsFocused(!0))},$[16]=dropdownHighlight?.focus,$[17]=dropdownHighlight?.showEffect,$[18]=setFontsFocused,$[19]=t8):t8=$[19],$[20]!==fontsFocused?(t9=fontsFocused?highlights_styles.A.OUTLINE:[],$[20]=fontsFocused,$[21]=t9):t9=$[21],$[22]!==props||$[23]!==t8||$[24]!==t9?(t10=react.createElement(textStyle_font.A,textStyle_extends({},props,{fontDropdownRef:t8,highlightStylesOverride:t9})),$[22]=props,$[23]=t8,$[24]=t9,$[25]=t10):t10=$[25],$[26]!==props?(t11=react.createElement(style,props),$[26]=props,$[27]=t11):t11=$[27],$[28]!==cancelHighlight||$[29]!==colorHighlight?.focus||$[30]!==colorHighlight?.showEffect||$[31]!==setFontsFocused?(t12=node_0=>{node_0&&colorHighlight?.focus&&colorHighlight?.showEffect&&(node_0.addEventListener("keydown",cancelHighlight,{once:!0}),node_0.focus(),setFontsFocused(!1))},$[28]=cancelHighlight,$[29]=colorHighlight?.focus,$[30]=colorHighlight?.showEffect,$[31]=setFontsFocused,$[32]=t12):t12=$[32],$[33]!==props||$[34]!==t12?(t13=react.createElement(color,textStyle_extends({},props,{textColorRef:t12})),$[33]=props,$[34]=t12,$[35]=t13):t13=$[35],$[36]!==showContrastWarning?(t14=showContrastWarning&&react.createElement(warning,{message:checklist.br.lowContrast.textPanel}),$[36]=showContrastWarning,$[37]=t14):t14=$[37],$[38]===Symbol.for("react.memo_cache_sentinel")?(t15=react.createElement(textStyle_SubHeading,{size:types.$.Small},(0,i18n.__)("Text Box","web-stories")),$[38]=t15):t15=$[38],$[39]!==props?(t16=react.createElement(SubSection,null,t15,react.createElement(backgroundColor,props),react.createElement(padding,props)),$[39]=props,$[40]=t16):t16=$[40],$[41]!==props?(t17=react.createElement(SubSection,null,react.createElement(textStyle_stylePresets,props)),$[41]=props,$[42]=t17):t17=$[42],$[43]!==t10||$[44]!==t11||$[45]!==t13||$[46]!==t14||$[47]!==t16||$[48]!==t17?(t18=react.createElement(content.A,null,t10,t11,t13,t14,t16,t17),$[43]=t10,$[44]=t11,$[45]=t13,$[46]=t14,$[47]=t16,$[48]=t17,$[49]=t18):t18=$[49],$[50]!==t18||$[51]!==t5||$[52]!==t6||$[53]!==t7?(t19=react.createElement(_StyledPanel,{name:"textStyle",onAnimationEnd:t6,isPersistable:!1,$_css:t5},t7,t18),$[50]=t18,$[51]=t5,$[52]=t6,$[53]=t7,$[54]=t19):t19=$[54],t19}function textStyle_temp4(t0){const{id}=t0;return id}function textStyle_temp3(t0){const{state:t1}=t0,{pageWidth,pageHeight}=t1;return{width:pageWidth,height:pageHeight}}function textStyle_temp2(t0){const{state:t1}=t0,{currentPage}=t1;return{currentPage}}function textStyle_temp(state){return{dropdownHighlight:state[highlights.xP.Font],colorHighlight:state[highlights.xP.TextColor],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}textStyle_StylePanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const textStyle=textStyle_StylePanel;textStyle_StylePanel.__docgenInfo={description:"",methods:[],displayName:"StylePanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var _StyledPanel=(0,styled_components_browser_esm.Ay)(panel_panel.Ay).withConfig({displayName:"textStyle___StyledPanel",componentId:"sc-1al6pl8-2"})(["",""],(p=>p.$_css)),translateToExclusiveList=__webpack_require__("./packages/i18n/src/translateToExclusiveList.ts");const videoAccessibility_DEFAULT_RESOURCE={alt:null,poster:null,height:0,width:0},videoAccessibility_MIN_MAX_ALT_TEXT={MAX:1e3},StyledMedia=(0,styled_components_browser_esm.Ay)(components_form.$U).withConfig({displayName:"videoAccessibility__StyledMedia",componentId:"sc-1uodz5m-0"})(["height:114px;width:64px;"]),InputsWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"videoAccessibility__InputsWrapper",componentId:"sc-1uodz5m-1"})(["align-self:flex-start;margin-left:16px;"]),videoAccessibility_StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"videoAccessibility__StyledText",componentId:"sc-1uodz5m-2"})(["color:",";margin-bottom:10px;"],(({theme})=>theme.colors.fg.secondary));function VideoAccessibilityPanel(t0){const $=(0,dist.c)(69),{selectedElements,pushUpdate}=t0,resource=(0,shared.dP)(selectedElements,"resource",videoAccessibility_DEFAULT_RESOURCE);let t1;$[0]!==resource.alt||$[1]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"alt",resource.alt),$[0]=resource.alt,$[1]=selectedElements,$[2]=t1):t1=$[2];const alt=t1,{height,width}=resource;let t2;$[3]!==selectedElements?(t2=(0,shared.Bl)(selectedElements,"poster"),$[3]=selectedElements,$[4]=t2):t2=$[4];const rawPoster=t2;let t3;$[5]!==resource.poster||$[6]!==selectedElements?(t3=(0,shared.Bl)(selectedElements,"poster",resource.poster),$[5]=resource.poster,$[6]=selectedElements,$[7]=t3):t3=$[7];const poster=t3,{allowedMimeTypes:t4,capabilities:t5}=(0,app_config.UK)(),{image:allowedImageMimeTypes}=t4,{hasUploadMediaAction}=t5,t6=hasUploadMediaAction&&"upload",t7=hasUploadMediaAction&&"edit",t8=poster!==resource.poster&&"reset";let t9;$[8]!==t6||$[9]!==t7||$[10]!==t8?(t9=[t6,t7,"hotlink",t8].filter(Boolean),$[8]=t6,$[9]=t7,$[10]=t8,$[11]=t9):t9=$[11];const options=t9;let t10,t11;$[12]!==allowedImageMimeTypes?(t10=()=>allowedImageMimeTypes.flatMap(videoAccessibility_temp),t11=[allowedImageMimeTypes],$[12]=allowedImageMimeTypes,$[13]=t10,$[14]=t11):(t10=$[13],t11=$[14]);const allowedImageFileTypes=(0,react_src.Kr)(t10,t11);let t12,t13;$[15]!==pushUpdate||$[16]!==rawPoster?(t12=newPoster=>{newPoster?.src!==rawPoster&&pushUpdate({poster:newPoster?.src},!0)},t13=[pushUpdate,rawPoster],$[15]=pushUpdate,$[16]=rawPoster,$[17]=t12,$[18]=t13):(t12=$[17],t13=$[18]);const handleChangePoster=(0,react_src.hb)(t12,t13);let t14,t15;$[19]!==allowedImageFileTypes?(t14=()=>{let message=(0,i18n.__)("No file types are currently supported.","web-stories");return allowedImageFileTypes.length&&(message=(0,sprintf.A)((0,i18n.__)("Please choose only %s as a poster.","web-stories"),(0,translateToExclusiveList.A)(allowedImageFileTypes))),message},t15=[allowedImageFileTypes],$[19]=allowedImageFileTypes,$[20]=t14,$[21]=t15):(t14=$[20],t15=$[21]);const posterErrorMessage=(0,react_src.Kr)(t14,t15),{highlightInput,highlightMediaPicker,resetHighlight,cancelHighlight}=(0,highlights.N)(videoAccessibility_temp2);let cropParams=null;if(height&&height!==story_editor_src_constants.jW&&width&&width!==story_editor_src_constants.jW){let t16;$[22]!==height||$[23]!==width?(t16={height,width},$[22]=height,$[23]=width,$[24]=t16):t16=$[24],cropParams=t16}const t16=(highlightInput||highlightMediaPicker)&&highlights_styles.A.FLASH;let t17,t18;$[25]!==resetHighlight?(t17=()=>resetHighlight(),$[25]=resetHighlight,$[26]=t17):t17=$[26],$[27]===Symbol.for("react.memo_cache_sentinel")?(t18=(0,i18n.__)("Accessibility","web-stories"),$[27]=t18):t18=$[27];const t19=!highlightInput&&!highlightMediaPicker;let t20;$[28]!==highlightMediaPicker?.focus||$[29]!==highlightMediaPicker?.showEffect?(t20=node=>{node&&highlightMediaPicker?.focus&&highlightMediaPicker?.showEffect&&node.focus()},$[28]=highlightMediaPicker?.focus,$[29]=highlightMediaPicker?.showEffect,$[30]=t20):t20=$[30];const t21=cropParams;let t22,t23,t24,t25,t26,t27,t28;$[31]===Symbol.for("react.memo_cache_sentinel")?(t22=(0,i18n.__)("Select as video poster","web-stories"),t23=(0,i18n.__)("Use external image as video poster","web-stories"),t24=(0,i18n.__)("Use image as video poster","web-stories"),t25=(0,i18n.__)("Using image as video poster","web-stories"),t26=(0,i18n.__)("Set as video poster","web-stories"),t27=(0,i18n.__)("Preview poster image","web-stories"),$[31]=t22,$[32]=t23,$[33]=t24,$[34]=t25,$[35]=t26,$[36]=t27):(t22=$[31],t23=$[32],t24=$[33],t25=$[34],t26=$[35],t27=$[36]),$[37]===Symbol.for("react.memo_cache_sentinel")?(t28=(0,i18n.__)("Video poster","web-stories"),$[37]=t28):t28=$[37];const t29=0!==options.length;let t30,t31,t32;$[38]!==allowedImageMimeTypes||$[39]!==cropParams||$[40]!==handleChangePoster||$[41]!==options||$[42]!==poster||$[43]!==posterErrorMessage||$[44]!==t20||$[45]!==t29?(t30=react.createElement(StyledMedia,{ref:t20,value:poster,cropParams:t21,onChange:handleChangePoster,onChangeErrorText:posterErrorMessage,title:t22,hotlinkTitle:t23,hotlinkInsertText:t24,hotlinkInsertingText:t25,buttonInsertText:t26,alt:t27,type:allowedImageMimeTypes,ariaLabel:t28,menuOptions:options,imgProps:cropParams,canUpload:t29}),$[38]=allowedImageMimeTypes,$[39]=cropParams,$[40]=handleChangePoster,$[41]=options,$[42]=poster,$[43]=posterErrorMessage,$[44]=t20,$[45]=t29,$[46]=t30):t30=$[46],$[47]===Symbol.for("react.memo_cache_sentinel")?(t31=react.createElement(videoAccessibility_StyledText,{size:types.$.Small},(0,i18n.__)("Add a brief description of the video.","web-stories")),$[47]=t31):t31=$[47],$[48]!==cancelHighlight||$[49]!==highlightInput?.focus||$[50]!==highlightInput?.showEffect?(t32=node_0=>{node_0&&highlightInput?.focus&&highlightInput?.showEffect&&(node_0.addEventListener("keydown",cancelHighlight,{once:!0}),node_0.focus())},$[48]=cancelHighlight,$[49]=highlightInput?.focus,$[50]=highlightInput?.showEffect,$[51]=t32):t32=$[51];const t33=alt===story_editor_src_constants.jW?story_editor_src_constants.Q6:"",t34=alt||"";let t35,t36;$[52]!==pushUpdate?(t35=evt=>pushUpdate({alt:evt?.target?.value?.trim()||null},!0),$[52]=pushUpdate,$[53]=t35):t35=$[53],$[54]===Symbol.for("react.memo_cache_sentinel")?(t36=(0,i18n.__)("Assistive text","web-stories"),$[54]=t36):t36=$[54];const t37=alt===story_editor_src_constants.jW;let t38,t39,t40;return $[55]!==t32||$[56]!==t33||$[57]!==t34||$[58]!==t35||$[59]!==t37?(t38=react.createElement(InputsWrapper,null,t31,react.createElement(components_form.fs,{ref:t32,placeholder:t33,value:t34,onChange:t35,"aria-label":t36,maxLength:videoAccessibility_MIN_MAX_ALT_TEXT.MAX,rows:2,isIndeterminate:t37})),$[55]=t32,$[56]=t33,$[57]=t34,$[58]=t35,$[59]=t37,$[60]=t38):t38=$[60],$[61]!==t30||$[62]!==t38?(t39=react.createElement(components_form.fI,null,t30,t38),$[61]=t30,$[62]=t38,$[63]=t39):t39=$[63],$[64]!==t16||$[65]!==t17||$[66]!==t19||$[67]!==t39?(t40=react.createElement(videoAccessibility_StyledSimplePanel,{onAnimationEnd:t17,name:"videoAccessibility",title:t18,isPersistable:t19,$_css:t16},t39),$[64]=t16,$[65]=t17,$[66]=t19,$[67]=t39,$[68]=t40):t40=$[68],t40}function videoAccessibility_temp2(state){return{highlightInput:state[highlights.xP.AssistiveText],highlightMediaPicker:state[highlights.xP.VideoA11yPoster],resetHighlight:state.onFocusOut,cancelHighlight:state.cancelEffect}}function videoAccessibility_temp(type){return(0,src_mimeTypes.n)(type)}VideoAccessibilityPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const videoAccessibility=VideoAccessibilityPanel;VideoAccessibilityPanel.__docgenInfo={description:"",methods:[],displayName:"VideoAccessibilityPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};var videoAccessibility_StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"videoAccessibility___StyledSimplePanel",componentId:"sc-1uodz5m-3"})(["",""],(p=>p.$_css)),slider=__webpack_require__("./packages/design-system/src/components/slider/slider.tsx"),circular=__webpack_require__("./packages/design-system/src/components/circularProgress/circular.tsx"),useVideoElementTranscoding=__webpack_require__("./packages/story-editor/src/app/media/utils/useVideoElementTranscoding.js"),loopPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js");const videoOptions_Row=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"videoOptions__Row",componentId:"sc-csxmtu-0"})(["margin-top:2px;"]),videoOptions_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"videoOptions__StyledButton",componentId:"sc-csxmtu-1"})(["padding:12px 8px;"]),TrimButton=(0,styled_components_browser_esm.Ay)(videoOptions_StyledButton).withConfig({displayName:"videoOptions__TrimButton",componentId:"sc-csxmtu-2"})(["margin-left:20px;"]),TrimWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"videoOptions__TrimWrapper",componentId:"sc-csxmtu-3"})(["position:relative;display:flex;"]),Spinner=styled_components_browser_esm.Ay.div.withConfig({displayName:"videoOptions__Spinner",componentId:"sc-csxmtu-4"})(["margin-left:4px;margin-top:4px;"]),StyledSlider=(0,styled_components_browser_esm.Ay)(slider.A).withConfig({displayName:"videoOptions__StyledSlider",componentId:"sc-csxmtu-5"})(["width:100%;"]),VolumeWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"videoOptions__VolumeWrapper",componentId:"sc-csxmtu-6"})(["margin-bottom:20px;"]),videoOptions_HelperText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.XSmall}).withConfig({displayName:"videoOptions__HelperText",componentId:"sc-csxmtu-7"})(["color:",";"],(({theme})=>theme.colors.fg.tertiary));function VideoOptionsPanel(t0){const $=(0,dist.c)(56),{selectedElements,pushUpdate}=t0;let t1;$[0]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"resource"),$[0]=selectedElements,$[1]=t1):t1=$[1];const resource=t1;let t2;$[2]!==selectedElements?(t2=(0,shared.Bl)(selectedElements,"id"),$[2]=selectedElements,$[3]=t2):t2=$[3];const elementId=t2;let t3;$[4]!==selectedElements?(t3=(0,shared.Bl)(selectedElements,"loop"),$[4]=selectedElements,$[5]=t3):t3=$[5];const loop=t3,volume=(0,shared.Bl)(selectedElements,"volume",1),isSingleElement=1===selectedElements.length,showVolumeControl=useFeature("videoVolume")&&isSingleElement&&!resource?.isMuted;let t4;$[6]!==elementId||$[7]!==isSingleElement||$[8]!==resource?(t4={resource,elementId,isSingleElement},$[6]=elementId,$[7]=isSingleElement,$[8]=resource,$[9]=t4):t4=$[9];const{state:t5,actions:t6}=(0,useVideoElementTranscoding.A)(t4),{canTrim,canMute,isTrimming,isMuting,isDisabled}=t5,{handleMute,handleTrim}=t6;let t7;$[10]!==isMuting?(t7=isMuting?(0,i18n.__)("Removing audio…","web-stories"):(0,i18n.__)("Remove audio","web-stories"),$[10]=isMuting,$[11]=t7):t7=$[11];const muteButtonText=t7;let t8;$[12]!==isTrimming?(t8=isTrimming?(0,i18n.__)("Trimming…","web-stories"):(0,i18n.__)("Trim","web-stories"),$[12]=isTrimming,$[13]=t8):t8=$[13];const trimButtonText=t8,speak=(0,useLiveRegion.A)();let t10,t9,t11,t12,t13;$[14]!==isMuting||$[15]!==muteButtonText||$[16]!==speak?(t9=()=>{isMuting&&speak(muteButtonText)},t10=[isMuting,muteButtonText,speak],$[14]=isMuting,$[15]=muteButtonText,$[16]=speak,$[17]=t10,$[18]=t9):(t10=$[17],t9=$[18]),(0,react_src.vJ)(t9,t10),$[19]!==isTrimming||$[20]!==speak||$[21]!==trimButtonText?(t11=()=>{isTrimming&&speak(trimButtonText)},t12=[isTrimming,trimButtonText,speak],$[19]=isTrimming,$[20]=speak,$[21]=trimButtonText,$[22]=t11,$[23]=t12):(t11=$[22],t12=$[23]),(0,react_src.vJ)(t11,t12),$[24]!==pushUpdate?(t13=evt=>pushUpdate({loop:evt.target.checked},!0),$[24]=pushUpdate,$[25]=t13):t13=$[25];const onChange=t13;let t14;$[26]!==pushUpdate?(t14=value=>{const newVolume=Math.max(.1,value/100);pushUpdate({volume:newVolume},!0)},$[26]=pushUpdate,$[27]=t14):t14=$[27];const onChangeVolume=t14,slideId=(0,react_src.FF)(videoOptions_temp),Processing=videoOptions_temp2;let t15,t16,t17,t18,t19,t20,t21;return $[28]===Symbol.for("react.memo_cache_sentinel")?(t15=(0,i18n.__)("Video Settings","web-stories"),$[28]=t15):t15=$[28],$[29]!==loop||$[30]!==onChange?(t16=react.createElement(loopPanelContent.A,{loop,onChange}),$[29]=loop,$[30]=onChange,$[31]=t16):t16=$[31],$[32]!==canTrim||$[33]!==handleTrim||$[34]!==isDisabled||$[35]!==isTrimming||$[36]!==trimButtonText?(t17=canTrim&&react.createElement(TrimWrapper,null,react.createElement(TrimButton,{disabled:isDisabled,variant:constants.Ak.Rectangle,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick:handleTrim},trimButtonText),isTrimming&&react.createElement(Processing,null)),$[32]=canTrim,$[33]=handleTrim,$[34]=isDisabled,$[35]=isTrimming,$[36]=trimButtonText,$[37]=t17):t17=$[37],$[38]!==t16||$[39]!==t17?(t18=react.createElement(videoOptions_Row,{spaceBetween:!1},t16,t17),$[38]=t16,$[39]=t17,$[40]=t18):t18=$[40],$[41]!==onChangeVolume||$[42]!==showVolumeControl||$[43]!==slideId||$[44]!==volume?(t19=showVolumeControl&&react.createElement(VolumeWrapper,null,react.createElement(typography_text.E.Label,{size:types.$.Small,htmlFor:slideId},(0,i18n.__)("Volume","web-stories")),react.createElement(StyledSlider,{value:Math.round(100*volume),handleChange:onChangeVolume,minorStep:5,majorStep:10,min:0,max:100,id:slideId,"aria-label":(0,i18n.__)("Volume","web-stories")})),$[41]=onChangeVolume,$[42]=showVolumeControl,$[43]=slideId,$[44]=volume,$[45]=t19):t19=$[45],$[46]!==canMute||$[47]!==handleMute||$[48]!==isDisabled||$[49]!==isMuting||$[50]!==muteButtonText?(t20=canMute&&react.createElement(react.Fragment,null,react.createElement(videoOptions_Row,{spaceBetween:!1},react.createElement(videoOptions_StyledButton,{disabled:isDisabled,variant:constants.Ak.Rectangle,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick:handleMute},muteButtonText),isMuting&&react.createElement(Processing,null)),react.createElement(videoOptions_Row,null,react.createElement(videoOptions_HelperText,null,(0,i18n.__)("Removing the audio from this video will upload a new muted version of it to the media library. This might take a couple of seconds.","web-stories")))),$[46]=canMute,$[47]=handleMute,$[48]=isDisabled,$[49]=isMuting,$[50]=muteButtonText,$[51]=t20):t20=$[51],$[52]!==t18||$[53]!==t19||$[54]!==t20?(t21=react.createElement(panel.RV,{name:"videoOptions",title:t15},t18,t19,t20),$[52]=t18,$[53]=t19,$[54]=t20,$[55]=t21):t21=$[55],t21}function videoOptions_temp2(){return react.createElement(Spinner,null,react.createElement(circular.A,{size:24}))}function videoOptions_temp(){return`slide-${(0,v4.A)()}`}VideoOptionsPanel.propTypes={selectedElements:prop_types_default().array.isRequired,pushUpdate:prop_types_default().func.isRequired};const videoOptions=VideoOptionsPanel;VideoOptionsPanel.__docgenInfo={description:"",methods:[],displayName:"VideoOptionsPanel",props:{selectedElements:{description:"",type:{name:"array"},required:!0},pushUpdate:{description:"",type:{name:"func"},required:!0}}};const videoSegment_Row=(0,styled_components_browser_esm.Ay)(components_form.fI).withConfig({displayName:"videoSegment__Row",componentId:"sc-ohj8ek-0"})(["margin-top:2px;"]),videoSegment_StyledButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"videoSegment__StyledButton",componentId:"sc-ohj8ek-1"})(["padding:12px 8px;"]),SliderWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"videoSegment__SliderWrapper",componentId:"sc-ohj8ek-2"})(["flex:1;margin-right:20px;"]),videoSegment_StyledSlider=(0,styled_components_browser_esm.Ay)(slider.A).withConfig({displayName:"videoSegment__StyledSlider",componentId:"sc-ohj8ek-3"})(["width:100%;"]),videoSegment_HelperText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.XSmall}).withConfig({displayName:"videoSegment__HelperText",componentId:"sc-ohj8ek-4"})(["color:",";"],(({theme})=>theme.colors.fg.tertiary));function VideoSegmentPanel(t0){const $=(0,dist.c)(73),{pushUpdate,selectedElements}=t0;let t1;$[0]!==selectedElements?(t1=(0,shared.Bl)(selectedElements,"resource"),$[0]=selectedElements,$[1]=t1):t1=$[1];const resource=t1;let t2;$[2]!==selectedElements?(t2=(0,shared.Bl)(selectedElements,"id"),$[2]=selectedElements,$[3]=t2):t2=$[3];const elementId=t2,enableSegmentVideo=useFeature("segmentVideo");let t3;$[4]!==pushUpdate?(t3=value=>{pushUpdate({segmentTime:value},!0)},$[4]=pushUpdate,$[5]=t3):t3=$[5];const onChangeSegmentTime=t3;let t4;$[6]!==selectedElements?(t4=(0,shared.Bl)(selectedElements,"segmentTime",20),$[6]=selectedElements,$[7]=t4):t4=$[7];const segmentTime=t4,{pageIds,currentPageId:currentPageId_0,deleteElementById:deleteElementById_0,addElementsAcrossPages:addElementsAcrossPages_0}=(0,app_story.P3)(videoSegment_temp2),{isBatchUploading:isBatchUploading_0,segmentVideo:segmentVideo_0}=(0,media.HZ)(videoSegment_temp3),[batchId,setBatchId]=(0,react_src.J0)(),[isSegmenting,setIsSegmenting]=(0,react_src.J0)();let t5;$[8]===Symbol.for("react.memo_cache_sentinel")?(t5=[],$[8]=t5):t5=$[8];const[segmentedFiles,setSegmentedFiles]=(0,react_src.J0)(t5),[segmentElementId,setSegmentElementId]=(0,react_src.J0)(),[segmentPageId,setSegmentPageId]=(0,react_src.J0)();let t6;$[9]!==batchId||$[10]!==isBatchUploading_0?(t6=batchId&&isBatchUploading_0(batchId),$[9]=batchId,$[10]=isBatchUploading_0,$[11]=t6):t6=$[11];const isUploading=t6,showSnackbar_0=(0,useSnackbar.d)(videoSegment_temp4);let t7;$[12]!==isSegmenting?(t7=isSegmenting?(0,i18n.__)("Segmenting…","web-stories"):(0,i18n.__)("Segment","web-stories"),$[12]=isSegmenting,$[13]=t7):t7=$[13];const segmentButtonText=t7;let t8,t9;$[14]!==addElementsAcrossPages_0||$[15]!==deleteElementById_0||$[16]!==pageIds||$[17]!==segmentElementId||$[18]!==segmentPageId||$[19]!==segmentedFiles||$[20]!==setBatchId||$[21]!==setIsSegmenting||$[22]!==setSegmentedFiles||$[23]!==showSnackbar_0?(t8=()=>{if(!segmentPageId||!segmentElementId)return;showSnackbar_0({message:(0,i18n.__)("Inserting video segments","web-stories"),dismissible:!1});const elements=segmentedFiles.map(videoSegment_temp5),page=(0,elements_src.a3)(),position=pageIds.indexOf(segmentPageId);addElementsAcrossPages_0({elements,page,position}),deleteElementById_0({elementId:segmentElementId}),setSegmentedFiles([]),setIsSegmenting(!1),setBatchId(null)},$[14]=addElementsAcrossPages_0,$[15]=deleteElementById_0,$[16]=pageIds,$[17]=segmentElementId,$[18]=segmentPageId,$[19]=segmentedFiles,$[20]=setBatchId,$[21]=setIsSegmenting,$[22]=setSegmentedFiles,$[23]=showSnackbar_0,$[24]=t8):t8=$[24],$[25]!==addElementsAcrossPages_0||$[26]!==deleteElementById_0||$[27]!==pageIds||$[28]!==segmentElementId||$[29]!==segmentPageId||$[30]!==segmentedFiles||$[31]!==showSnackbar_0?(t9=[segmentPageId,segmentElementId,showSnackbar_0,segmentedFiles,pageIds,addElementsAcrossPages_0,deleteElementById_0],$[25]=addElementsAcrossPages_0,$[26]=deleteElementById_0,$[27]=pageIds,$[28]=segmentElementId,$[29]=segmentPageId,$[30]=segmentedFiles,$[31]=showSnackbar_0,$[32]=t9):t9=$[32];const addElementsToPages=(0,react_src.hb)(t8,t9);let t10,t11;$[33]!==currentPageId_0||$[34]!==elementId||$[35]!==resource||$[36]!==segmentTime||$[37]!==segmentVideo_0||$[38]!==setBatchId||$[39]!==setIsSegmenting||$[40]!==setSegmentElementId||$[41]!==setSegmentPageId||$[42]!==setSegmentedFiles||$[43]!==showSnackbar_0?(t10=async()=>{setIsSegmenting(!0),setSegmentElementId(elementId),setSegmentPageId(currentPageId_0),showSnackbar_0({message:(0,i18n.__)("Video segmentation in progress","web-stories"),dismissible:!0});const batchId_=await segmentVideo_0({resource,segmentTime},(t11=>{const{resource:newResource,batchPosition}=t11;setSegmentedFiles((f=>(f[batchPosition]=newResource,f)))}));if(!batchId_)return showSnackbar_0({message:(0,i18n.__)("Segmentation failed","web-stories"),dismissible:!0}),void setIsSegmenting(!1);setBatchId(batchId_)},$[33]=currentPageId_0,$[34]=elementId,$[35]=resource,$[36]=segmentTime,$[37]=segmentVideo_0,$[38]=setBatchId,$[39]=setIsSegmenting,$[40]=setSegmentElementId,$[41]=setSegmentPageId,$[42]=setSegmentedFiles,$[43]=showSnackbar_0,$[44]=t10):t10=$[44],$[45]!==currentPageId_0||$[46]!==elementId||$[47]!==resource||$[48]!==segmentTime||$[49]!==segmentVideo_0||$[50]!==showSnackbar_0?(t11=[elementId,currentPageId_0,showSnackbar_0,segmentVideo_0,segmentTime,resource],$[45]=currentPageId_0,$[46]=elementId,$[47]=resource,$[48]=segmentTime,$[49]=segmentVideo_0,$[50]=showSnackbar_0,$[51]=t11):t11=$[51];const onClick=(0,react_src.hb)(t10,t11);let t12,t13,t14;if($[52]!==addElementsToPages||$[53]!==isUploading||$[54]!==segmentedFiles?(t12=()=>{!isUploading&&segmentedFiles.length>=1&&addElementsToPages()},t13=[isUploading,segmentedFiles,addElementsToPages],$[52]=addElementsToPages,$[53]=isUploading,$[54]=segmentedFiles,$[55]=t12,$[56]=t13):(t12=$[55],t13=$[56]),(0,react_src.vJ)(t12,t13),!enableSegmentVideo||resource.length<=10)return null;$[57]===Symbol.for("react.memo_cache_sentinel")?(t14=(0,i18n.__)("Video Segment Settings","web-stories"),$[57]=t14):t14=$[57];const t15=Math.max(10,Math.min(resource.length,60));let t16,t17,t18,t19,t20,t21;return $[58]===Symbol.for("react.memo_cache_sentinel")?(t16=(0,i18n.__)("Segment length","web-stories"),$[58]=t16):t16=$[58],$[59]!==onChangeSegmentTime||$[60]!==segmentTime||$[61]!==t15?(t17=react.createElement(SliderWrapper,null,react.createElement(videoSegment_StyledSlider,{value:segmentTime,handleChange:onChangeSegmentTime,minorStep:1,majorStep:5,min:10,max:t15,"aria-label":t16,suffix:"s"})),$[59]=onChangeSegmentTime,$[60]=segmentTime,$[61]=t15,$[62]=t17):t17=$[62],$[63]!==isSegmenting||$[64]!==onClick||$[65]!==segmentButtonText?(t18=react.createElement(videoSegment_StyledButton,{disabled:isSegmenting,variant:constants.Ak.Rectangle,type:constants.VQ.Secondary,size:constants.Mp.Small,onClick},segmentButtonText),$[63]=isSegmenting,$[64]=onClick,$[65]=segmentButtonText,$[66]=t18):t18=$[66],$[67]!==t17||$[68]!==t18?(t19=react.createElement(videoSegment_Row,{spaceBetween:!0},t17,t18),$[67]=t17,$[68]=t18,$[69]=t19):t19=$[69],$[70]===Symbol.for("react.memo_cache_sentinel")?(t20=react.createElement(videoSegment_Row,null,react.createElement(videoSegment_HelperText,null,(0,i18n.__)("Segmenting your video will split the video across multiple pages","web-stories"))),$[70]=t20):t20=$[70],$[71]!==t19?(t21=react.createElement(panel.RV,{name:"videoOptions",title:t14},t19,t20),$[71]=t19,$[72]=t21):t21=$[72],t21}function videoSegment_temp5(segmentedResource){return(0,elements_src.N3)(segmentedResource.type,(0,getElementProperties.A)(segmentedResource.type,{resource:segmentedResource}))}function videoSegment_temp4(t0){const{showSnackbar}=t0;return showSnackbar}function videoSegment_temp3(t0){const{state:t1,actions:t2}=t0,{isBatchUploading}=t1,{segmentVideo}=t2;return{segmentVideo,isBatchUploading}}function videoSegment_temp2(t0){const{state:t1,actions:t2}=t0,{pages,currentPageId}=t1,{deleteElementById,addElementsAcrossPages}=t2;return{pageIds:pages.map(videoSegment_temp),currentPageId,deleteElementById,addElementsAcrossPages}}function videoSegment_temp(t0){const{id}=t0;return id}VideoSegmentPanel.propTypes={pushUpdate:prop_types_default().func.isRequired,selectedElements:prop_types_default().array.isRequired};const videoSegment=VideoSegmentPanel;VideoSegmentPanel.__docgenInfo={description:"",methods:[],displayName:"VideoSegmentPanel",props:{pushUpdate:{description:"",type:{name:"func"},required:!0},selectedElements:{description:"",type:{name:"array"},required:!0}}};const ALL=Object.values(panelTypes.A);const style_getDesignPanelsForSelection=function getDesignPanelsForSelection(elements){if(0===elements.length)return[];if(1===elements.length&&elements[0].isBackground){const panels=[];return!elements[0].isDefaultBackground&&(panels.push({type:panelTypes.A.PageBackground,Panel:pageBackground}),panels.push({type:panelTypes.A.Filter,Panel:filter}),panels.push({type:panelTypes.A.Animation,Panel:animation})),"video"===elements[0].type?(panels.push({type:panelTypes.A.VideoOptions,Panel:videoOptions}),panels.push({type:panelTypes.A.VideoSegment,Panel:videoSegment}),panels.push({type:panelTypes.A.Captions,Panel:captions}),panels.push({type:panelTypes.A.VideoAcessibility,Panel:videoAccessibility})):["gif","image"].includes(elements[0].type)?panels.push({type:panelTypes.A.ImageAccessibility,Panel:imageAccessibility}):panels.unshift({type:panelTypes.A.PageBackground,Panel:pageBackground}),panels.push({type:panelTypes.A.PageAttachment,Panel:pageAttachment}),panels.push({type:panelTypes.A.PageBackgroundAudio,Panel:backgroundAudio}),panels.push({type:panelTypes.A.PageAdvancement,Panel:customPageAdvancement}),panels}return elements.map((({type})=>elements_src.Wk[type].panels)).reduce(((commonPanels,panels)=>function intersect(a,b){return a.filter((v=>b.includes(v)))}(commonPanels,panels)),ALL).map((type=>{switch(type){case panelTypes.A.Animation:return{type,Panel:animation};case panelTypes.A.PageBackground:return null;case panelTypes.A.Filter:return{type,Panel:filter};case panelTypes.A.SizePosition:return{type,Panel:sizePosition};case panelTypes.A.Link:return{type,Panel:link_link};case panelTypes.A.TextStyle:return{type,Panel:textStyle};case panelTypes.A.TextAccessibility:return{type,Panel:textAccessibility};case panelTypes.A.ShapeStyle:return{type,Panel:shapeStyle};case panelTypes.A.Border:return{type,Panel:border};case panelTypes.A.VideoOptions:return{type,Panel:videoOptions};case panelTypes.A.VideoSegment:return{type,Panel:videoSegment};case panelTypes.A.Captions:return{type,Panel:captions};case panelTypes.A.VideoAcessibility:return{type,Panel:videoAccessibility};case panelTypes.A.ImageAccessibility:return{type,Panel:imageAccessibility};case panelTypes.A.ElementAlignment:return{type,Panel:alignment};case panelTypes.A.Product:return{type,Panel:product};case panelTypes.A.AudioSticker:return{type,Panel:audioStickerStyle};default:throw new Error(`Unknown panel: ${type}`)}})).filter((panel=>panel))};function useDesignPanels_temp2(submit_1){return submit_1()}function useDesignPanels_temp(t0){const{state:t1,actions:t2}=t0,{selectedElementIds,selectedElements,selectedElementAnimations}=t1,{deleteSelectedElements,updateElementsById,updateAnimationState}=t2;return{selectedElementIds,selectedElements,selectedElementAnimations,deleteSelectedElements,updateElementsById,updateAnimationState}}const style_useDesignPanels=function useDesignPanels(){const $=(0,dist.c)(25),{selectedElementIds:selectedElementIds_0,selectedElements:selectedElements_0,selectedElementAnimations:selectedElementAnimations_0,deleteSelectedElements:deleteSelectedElements_0,updateElementsById:updateElementsById_0,updateAnimationState:updateAnimationState_0}=(0,app.P3)(useDesignPanels_temp);let t0,t1;$[0]!==selectedElements_0?(t0=()=>style_getDesignPanelsForSelection(selectedElements_0),t1=[selectedElements_0],$[0]=selectedElements_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const panels=(0,react_src.Kr)(t0,t1),[submitHandlers,registerSubmitHandler]=utils_useHandlers();let t2,t3;$[3]!==selectedElementIds_0||$[4]!==updateElementsById_0?(t2=newPropertiesOrUpdater=>{updateElementsById_0({elementIds:selectedElementIds_0,properties:element=>(0,updateProperties.A)(element,newPropertiesOrUpdater,!0)})},t3=[selectedElementIds_0,updateElementsById_0],$[3]=selectedElementIds_0,$[4]=updateElementsById_0,$[5]=t2,$[6]=t3):(t2=$[5],t3=$[6]);const onSetProperties=(0,react_src.hb)(t2,t3);let t4,t5;$[7]!==onSetProperties||$[8]!==submitHandlers?(t4=panelId=>submit=>(submitHandlers.forEach((handler=>handler(onSetProperties,panelId,submit))),submit),t5=[onSetProperties,submitHandlers],$[7]=onSetProperties,$[8]=submitHandlers,$[9]=t4,$[10]=t5):(t4=$[9],t5=$[10]);const createSubmitHandlerForPanel=(0,react_src.hb)(t4,t5);let t6,t7,t8,t9;return $[11]!==onSetProperties||$[12]!==registerSubmitHandler?(t6=()=>{const submits={},unregister=registerSubmitHandler(((onSetPropertiesArg,panelId_0,submit_0)=>{onSetProperties===onSetPropertiesArg&&(submits[panelId_0]=submit_0)}));return()=>{unregister(),Object.values(submits).forEach(useDesignPanels_temp2)}},t7=[onSetProperties,registerSubmitHandler],$[11]=onSetProperties,$[12]=registerSubmitHandler,$[13]=t6,$[14]=t7):(t6=$[13],t7=$[14]),(0,react_src.vJ)(t6,t7),$[15]!==createSubmitHandlerForPanel||$[16]!==deleteSelectedElements_0||$[17]!==onSetProperties||$[18]!==panels||$[19]!==selectedElementAnimations_0||$[20]!==selectedElementIds_0||$[21]!==selectedElements_0||$[22]!==updateAnimationState_0?(t8=()=>({panels,createSubmitHandlerForPanel,panelProperties:{onSetProperties,deleteSelectedElements:deleteSelectedElements_0,selectedElements:selectedElements_0,selectedElementIds:selectedElementIds_0,selectedElementAnimations:selectedElementAnimations_0,updateAnimationState:updateAnimationState_0}}),t9=[panels,createSubmitHandlerForPanel,onSetProperties,deleteSelectedElements_0,selectedElements_0,selectedElementIds_0,selectedElementAnimations_0,updateAnimationState_0],$[15]=createSubmitHandlerForPanel,$[16]=deleteSelectedElements_0,$[17]=onSetProperties,$[18]=panels,$[19]=selectedElementAnimations_0,$[20]=selectedElementIds_0,$[21]=selectedElements_0,$[22]=updateAnimationState_0,$[23]=t8,$[24]=t9):(t8=$[23],t9=$[24]),(0,react_src.Kr)(t8,t9)};function stylePanes_extends(){return stylePanes_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},stylePanes_extends.apply(null,arguments)}const stylePanes_StyledPane=(0,styled_components_browser_esm.Ay)(panes_shared.Zv).withConfig({displayName:"stylePanes__StyledPane",componentId:"sc-18fi38s-0"})(["height:100%;padding:0;overflow-y:auto;"]);function stylePanes_temp(state){return{tab:state.state.tab,tabs:state.data.tabs}}const stylePanes=function StylePanes(){const $=(0,dist.c)(12),{tab,tabs}=style_useStyle(stylePanes_temp),{panels,createSubmitHandlerForPanel,panelProperties}=style_useDesignPanels();let t0,t1;$[0]!==createSubmitHandlerForPanel||$[1]!==panelProperties||$[2]!==panels?(t0=(types,paneProps)=>{const panelsList=panels.filter((t2=>{const{type}=t2;return types.includes(type)})).map((t3=>{const{Panel,type:type_0}=t3;return react.createElement(designPanel,stylePanes_extends({key:type_0,panelType:Panel,registerSubmitHandler:createSubmitHandlerForPanel(type_0)},panelProperties))}));return react.createElement(stylePanes_StyledPane,stylePanes_extends({id:(0,panes_shared.kN)(paneProps.key)},paneProps),panelsList)},t1=[panels,createSubmitHandlerForPanel,panelProperties],$[0]=createSubmitHandlerForPanel,$[1]=panelProperties,$[2]=panels,$[3]=t0,$[4]=t1):(t0=$[3],t1=$[4]);const getPanelsByType=(0,react_src.hb)(t0,t1);let t2;if($[5]!==getPanelsByType||$[6]!==tab||$[7]!==tabs){let t3;$[9]!==getPanelsByType||$[10]!==tab?(t3=t4=>{const{id}=t4,isActive=id===tab,paneProps_0={key:id,isActive,"aria-labelledby":(0,panes_shared.vU)(id)};if(!isActive)return react.createElement(panes_shared.Zv,stylePanes_extends({key:id},paneProps_0));switch(id){case SELECTION.id:case LINK.id:case ANIMATION.id:return getPanelsByType(panelSections.n[id],paneProps_0);default:return null}},$[9]=getPanelsByType,$[10]=tab,$[11]=t3):t3=$[11],t2=tabs.map(t3),$[5]=getPanelsByType,$[6]=tab,$[7]=tabs,$[8]=t2}else t2=$[8];return t2},styleLayout_Layout=styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Style","web-stories"),"data-testid":"styleLayout"}).withConfig({displayName:"styleLayout__Layout",componentId:"sc-1ihuio6-0"})(["height:100%;display:flex;flex-direction:column;background-color:",";color:",";max-height:100%;"],(({theme})=>theme.colors.bg.secondary),(({theme})=>theme.colors.fg.primary)),styleLayout_TabsArea=styled_components_browser_esm.Ay.nav.attrs({"aria-label":(0,i18n.__)("Style tabs","web-stories")}).withConfig({displayName:"styleLayout__TabsArea",componentId:"sc-1ihuio6-1"})([""]),styleLayout_UnjustifiedTabView=(0,styled_components_browser_esm.Ay)(tabview.Ay).withConfig({displayName:"styleLayout__UnjustifiedTabView",componentId:"sc-1ihuio6-2"})(["justify-content:center;"]),StylePaneContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleLayout__StylePaneContainer",componentId:"sc-1ihuio6-3"})(["height:100%;overflow-y:auto;min-height:0;"]),NoSelection=styled_components_browser_esm.Ay.div.withConfig({displayName:"styleLayout__NoSelection",componentId:"sc-1ihuio6-4"})(["height:100%;display:flex;justify-content:center;align-items:center;"]),Note=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"styleLayout__Note",componentId:"sc-1ihuio6-5"})(["color:",";"],(({theme})=>theme.colors.fg.secondary));function StyleLayout(){const $=(0,dist.c)(17),{state:t0,actions:t1,refs:t2,data:t3}=style_useStyle(),{tab}=t0,{setTab}=t1,{tabRefs}=t2,{tabs}=t3,{selectedElementIds}=(0,app_story.P3)(styleLayout_temp),{highlight,resetHighlight}=(0,highlights.N)(styleLayout_temp2);let t4,t5;$[0]!==resetHighlight||$[1]!==setTab?(t4=id=>{setTab(id),resetHighlight(),(0,tracking_src.sx)("style_tab_change",{name:id})},t5=[setTab,resetHighlight],$[0]=resetHighlight,$[1]=setTab,$[2]=t4,$[3]=t5):(t4=$[2],t5=$[3]);const onTabChange=(0,react_src.hb)(t4,t5);if(0===selectedElementIds.length){let t6;return $[4]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(NoSelection,null,react.createElement(Note,{size:types.$.Medium},(0,i18n.__)("Nothing selected","web-stories"))),$[4]=t6):t6=$[4],t6}let t6,t7,t8,t9,t10;return $[5]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Style Selection","web-stories"),$[5]=t6):t6=$[5],$[6]!==highlight?(t7=(node,tabId)=>{const h=highlight[tabId];node&&h?.focus&&h?.showEffect&&node.focus()},$[6]=highlight,$[7]=t7):t7=$[7],$[8]!==onTabChange||$[9]!==t7||$[10]!==tab||$[11]!==tabRefs||$[12]!==tabs?(t8=react.createElement(styleLayout_TabsArea,null,react.createElement(styleLayout_UnjustifiedTabView,{label:t6,tabs,tabRefs,tab,onTabChange,onTabRefUpdated:t7,getTabId:panes_shared.vU,getAriaControlsId:panes_shared.kN})),$[8]=onTabChange,$[9]=t7,$[10]=tab,$[11]=tabRefs,$[12]=tabs,$[13]=t8):t8=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(StylePaneContainer,null,react.createElement(stylePanes,null)),$[14]=t9):t9=$[14],$[15]!==t8?(t10=react.createElement(styleLayout_Layout,null,t8,t9),$[15]=t8,$[16]=t10):t10=$[16],t10}function styleLayout_temp2(state_0){return{highlight:{[SELECTION.id]:state_0[highlights.xP.Style],[LINK.id]:state_0[highlights.xP.Style],[ANIMATION.id]:state_0[highlights.xP.Style]},resetHighlight:state_0.onFocusOut}}function styleLayout_temp(t0){const{state}=t0;return{selectedElementIds:state.selectedElementIds}}const styleLayout=StyleLayout;function Style(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(styleProvider,null,react.createElement(styleLayout,null)),$[0]=t0):t0=$[0],t0}StyleLayout.__docgenInfo={description:"",methods:[],displayName:"StyleLayout"};const style_style=Style;Style.__docgenInfo={description:"",methods:[],displayName:"Style"};var sidebar_constants=__webpack_require__("./packages/story-editor/src/components/sidebar/constants.ts"),sidebar_context=__webpack_require__("./packages/story-editor/src/components/sidebar/context.js");const TABS=[{id:sidebar_constants.i,title:(0,i18n.__)("Insert","web-stories"),Pane:library},{id:sidebar_constants.Y,title:(0,i18n.__)("Style","web-stories"),Pane:style_style}],SIDEBAR_TAB_IDS=new Set([sidebar_constants.i,sidebar_constants.qQ,sidebar_constants.Y]);function SidebarProvider({sidebarTabs,children}){const{actions:{getAuthors}}=(0,api.M1)(),{selectedElementIds,currentPage}=(0,app_story.P3)((({state})=>({selectedElementIds:state.selectedElementIds,currentPage:state.currentPage}))),{tab:highlightedTab,highlight}=(0,highlights.N)((state_0=>({tab:state_0.tab,highlight:state_0[highlights.xP.StylePane]})));(0,react_src.vJ)((()=>{SIDEBAR_TAB_IDS.has(highlightedTab)&&(setTab(highlightedTab),(0,tracking_src.sx)("quick_action_tab_change",{name:highlightedTab}))}),[highlightedTab]);const sidebarRef=(0,react_src.li)(null),[tab,setTab]=(0,react_src.J0)(sidebar_constants.i),[users,setUsers]=(0,react_src.J0)([]),[sidebarContentHeight,setSidebarContentHeight]=(0,react_src.J0)(null),sidebarContentRef=(0,react_src.li)(),tabRef=(0,react_src.li)(tab),insertPaneRef=(0,react_src.li)(null),designPaneRef=(0,react_src.li)(null),documentPaneRef=(0,react_src.li)(null),tabRefs=(0,react_src.Kr)((()=>({[sidebar_constants.i]:insertPaneRef,[sidebar_constants.Y]:designPaneRef,[sidebar_constants.qQ]:documentPaneRef})),[]),[usersLoadingState,setUsersLoadingState]=(0,react_src.J0)("idle"),setSidebarContentNode=(0,react_src.hb)((node=>{sidebarContentRef.current=node}),[]);(0,react_src.pO)(sidebarContentRef,(({height})=>setSidebarContentHeight(height)),[]),(0,react_src.vJ)((()=>{selectedElementIds.length>0&&tabRef.current===sidebar_constants.qQ&&setTab(sidebar_constants.Y)}),[selectedElementIds]),(0,react_src.vJ)((()=>{tabRef.current===sidebar_constants.qQ&&setTab(sidebar_constants.Y)}),[currentPage]),(0,react_src.vJ)((()=>{const node_0=designPaneRef.current;node_0&&highlight?.focus&&highlight?.showEffect&&node_0.focus()}),[highlight]);const loadUsers=(0,react_src.hb)((()=>{"finished"!==usersLoadingState&&"errored"!==usersLoadingState&&0===users.length&&(setUsersLoadingState("loading"),getAuthors().then((data=>{const saveData=data.map((({id,name})=>({id,name})));setUsers(saveData),setUsersLoadingState("finished")})).catch((()=>{setUsersLoadingState("errored")})))}),[usersLoadingState,users.length,getAuthors]),tabs=(0,react_src.Kr)((()=>[...TABS,sidebarTabs?.document&&{id:sidebar_constants.qQ,...sidebarTabs.document}].filter(Boolean)),[sidebarTabs]),data_0=(0,react_src.Kr)((()=>({tabs,modalSidebarTab:sidebarTabs?.publishModal&&{id:sidebar_constants.kS,...sidebarTabs.publishModal}})),[tabs,sidebarTabs]),state_1={state:{tab,tabRefs,users,sidebarContentHeight,usersLoadingState},refs:{sidebar:sidebarRef},actions:{setTab,loadUsers,setSidebarContentNode},data:data_0};return react.createElement(sidebar_context.A.Provider,{value:state_1},children)}const sidebarProvider=SidebarProvider;SidebarProvider.__docgenInfo={description:"",methods:[],displayName:"SidebarProvider",props:{children:{description:"",type:{name:"node"},required:!1},sidebarTabs:{description:"",type:{name:"object"},required:!1}}};const Editor=(0,moveable_src.rs)(styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Web Stories Editor","web-stories")}).withConfig({displayName:"layout__Editor",componentId:"sc-9gpyr-0"})([""," background-color:",";position:relative;max-height:100vh;height:100%;width:100%;display:grid;grid:'sidebar   canv          ' 1fr 'sidebar   supplementary ' auto / ","px minmax(","px,1fr);"],expandPresetStyles.x((({paragraph},{Medium})=>paragraph[Medium])),(({theme})=>theme.colors.bg.primary),story_editor_src_constants.gH,story_editor_src_constants.j5));function layout_Layout(t0){const $=(0,dist.c)(19),{header,footer:t1,sidebarTabs,children}=t0;let t2;$[0]!==t1?(t2=void 0===t1?{}:t1,$[0]=t1,$[1]=t2):t2=$[1];const footer=t2,snackbarState=(0,useSnackbar.d)(layout_temp);let t3,t4,t5,t6,t7,t8,t9;return $[2]!==footer||$[3]!==header?(t3=react.createElement(workspace,{header,footer}),$[2]=footer,$[3]=header,$[4]=t3):t3=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t4=react.createElement(rightClickMenu,null),$[5]=t4):t4=$[5],$[6]!==t3?(t5=react.createElement(app_canvas.wt,null,react.createElement(rightClickMenu_provider,null,react.createElement(components_mediaRecording.j0,null,t3,t4))),$[6]=t3,$[7]=t5):t5=$[7],$[8]!==children||$[9]!==t5?(t6=react.createElement(Editor,{zIndex:3},t5,children),$[8]=children,$[9]=t5,$[10]=t6):t6=$[10],$[11]!==sidebarTabs||$[12]!==t6?(t7=react.createElement(layoutProvider.A,null,react.createElement(checklist.mq,null,react.createElement(highlights.Z8,null,react.createElement(sidebarProvider,{sidebarTabs},t6)))),$[11]=sidebarTabs,$[12]=t6,$[13]=t7):t7=$[13],$[14]!==snackbarState?(t8=react.createElement(snackbarContainer.A,snackbarState),$[14]=snackbarState,$[15]=t8):t8=$[15],$[16]!==t7||$[17]!==t8?(t9=react.createElement(react.Fragment,null,t7,t8),$[16]=t7,$[17]=t8,$[18]=t9):t9=$[18],t9}function layout_temp(t0){const{removeSnack,currentSnacks,placement}=t0;return{onRemove:removeSnack,notifications:currentSnacks,placement}}layout_Layout.propTypes={children:prop_types_default().node,header:prop_types_default().node,footer:prop_types_default().object,sidebarTabs:prop_types_default().object};const components_layout=layout_Layout;layout_Layout.__docgenInfo={description:"",methods:[],displayName:"Layout",props:{footer:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},children:{description:"",type:{name:"node"},required:!1},header:{description:"",type:{name:"node"},required:!1},sidebarTabs:{description:"",type:{name:"object"},required:!1}}};const AutoSaveDialog=t0=>{const $=(0,dist.c)(17),{onClose,isOpen,autoSaveLink}=t0;let t1,t2,t3,t4,t5,t6,t7,t8,t9,t10;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t1=(0,i18n.__)("Autosave","web-stories"),t2=(0,i18n.__)("Autosave Available","web-stories"),t3=(0,i18n.__)("Dismiss","web-stories"),$[0]=t1,$[1]=t2,$[2]=t3):(t1=$[0],t2=$[1],t3=$[2]),$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Dismiss","web-stories"),$[3]=t4):t4=$[3],$[4]!==onClose?(t5=react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,onClick:onClose},t4),$[4]=onClose,$[5]=t5):t5=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("View the autosave","web-stories"),$[6]=t6):t6=$[6],$[7]!==autoSaveLink?(t7=react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Small,href:autoSaveLink},t6),$[7]=autoSaveLink,$[8]=t7):t7=$[8],$[9]!==t5||$[10]!==t7?(t8=react.createElement(react.Fragment,null,t5,t7),$[9]=t5,$[10]=t7,$[11]=t8):t8=$[11],$[12]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,i18n.__)("There is an autosave of this story that is more recent than the version you are editing.","web-stories")),$[12]=t9):t9=$[12],$[13]!==isOpen||$[14]!==onClose||$[15]!==t8?(t10=react.createElement(dialog.A,{isOpen,title:t1,contentLabel:t2,secondaryText:t3,onClose,actions:t8},t9),$[13]=isOpen,$[14]=onClose,$[15]=t8,$[16]=t10):t10=$[16],t10};AutoSaveDialog.__docgenInfo={description:"",methods:[],displayName:"AutoSaveDialog",props:{isOpen:{description:"",type:{name:"bool"},required:!0},onClose:{description:"",type:{name:"func"},required:!0},autoSaveLink:{description:"",type:{name:"string"},required:!0}}};const AutoSaveCheck=()=>{const $=(0,dist.c)(6),{autoSaveLink}=(0,app_config.UK)(),[showDialog,setShowDialog]=(0,react_src.J0)(Boolean(autoSaveLink));let t0;$[0]!==setShowDialog?(t0=()=>setShowDialog(!1),$[0]=setShowDialog,$[1]=t0):t0=$[1];const onClose=t0;let t1;return $[2]!==autoSaveLink||$[3]!==onClose||$[4]!==showDialog?(t1=react.createElement(AutoSaveDialog,{isOpen:showDialog,onClose,autoSaveLink}),$[2]=autoSaveLink,$[3]=onClose,$[4]=showDialog,$[5]=t1):t1=$[5],t1};async function getFonts(params){let{default:fonts}=await __webpack_require__.e(1699).then(__webpack_require__.t.bind(__webpack_require__,"./packages/fonts/src/fonts.json",19));if(fonts=fonts.map((font=>({id:font.family,name:font.family,value:font.family,...font}))),params.include){const include=params.include.split(",");fonts=fonts.filter((({family})=>include.includes(family)))}return params.search&&(fonts=fonts.filter((({family})=>family.toLowerCase().includes(params.search)))),fonts}AutoSaveCheck.__docgenInfo={description:"",methods:[],displayName:"AutoSaveCheck"};var createResource=__webpack_require__("./packages/media/src/createResource.ts");function createDummyImageData({mimeType="image/jpeg",src,width,height,id,title}){return(0,createResource.A)({mimeType,creationDate:"2021-10-29T11:43:38",src,width,height,id,alt:title,sizes:{medium:{file:`${title}-300x84.jpeg`,width:300,height:84,mimeType,sourceUrl:src},large:{file:`${title}-1024x288.jpeg`,width:1024,height:288,mimeType,sourceUrl:src},thumbnail:{file:`${title}-150x150.jpeg`,width:150,height:150,mimeType,sourceUrl:src},medium_large:{file:`${title}-768x216.jpeg`,width:768,height:216,mimeType,sourceUrl:src},"1536x1536":{file:`${title}-1536x432.jpeg`,width:1536,height:432,mimeType,sourceUrl:src},"2048x2048":{file:`${title}-2048x576.jpeg`,width:2048,height:576,mimeType,sourceUrl:src},"post-thumbnail":{file:`${title}-1568x441.jpeg`,width:1568,height:441,mimeType,sourceUrl:src},"web-stories-poster-portrait":{file:`${title}-640x853.jpeg`,width:640,height:853,mimeType,sourceUrl:src},"web-stories-publisher-logo":{file:`${title}-96x96.jpeg`,width:96,height:96,mimeType,sourceUrl:src},"web-stories-thumbnail":{file:`${title}-150x42.jpeg`,width:150,height:42,mimeType,sourceUrl:src},full:{file:title,width,height,mimeType,sourceUrl:src}}})}function createDummyVideoData({mimeType="video/mp4",src,mediaDetails,id,title,poster}){return(0,createResource.A)({mimeType,creationDate:"2021-10-29T11:56:33",src,width:mediaDetails.width,height:mediaDetails.height,poster:poster.src,posterId:57,id,length:mediaDetails.length,bitsPerSample:mediaDetails.bitsPerSample,alt:title})}const getMedia=params=>{const dummyMedia=function getDummyMedia(){return[createDummyImageData({mimeType:"image/png",src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page1_bg-alt.png",width:412,height:732,id:1,title:"Fresh and Bright 1"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page3_figure.jpg",width:720,height:844,id:2,title:"Fresh and Bright 2"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page4_bg.png",width:750,height:1334,id:3,title:"Fresh and Bright 3"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page5_figure.jpg",width:750,height:1079,id:4,title:"Fresh and Bright 4"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page7_product1.jpg",width:720,height:900,id:5,title:"Fresh and Bright 5"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page8_figure.jpg",width:408,height:544,id:6,title:"Fresh and Bright 6"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page9_story1.jpg",width:720,height:405,id:7,title:"Fresh and Bright 7"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page9_story2.jpg",width:480,height:720,id:8,title:"Fresh and Bright 8"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/fresh-and-bright/page9_story3.jpg",width:480,height:720,id:9,title:"Fresh and Bright 9"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/food-and-stuff/page1_bg.jpg",width:1080,height:1620,id:10,title:"Fresh and Bright 10"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/food-and-stuff/page3_image1.jpg",width:1080,height:720,id:11,title:"Food and Stuff 1"}),createDummyImageData({src:"https://wp.stories.google/static/main/images/templates/food-and-stuff/page5_bg.jpg",width:731,height:1300,id:12,title:"Food and Stuff 2"}),createDummyVideoData({src:"https://stream.mux.com/OGTmBYTMkV7Ez601cRNpH6BP10102fQu9C00/high.mp4?token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InQ5UHZucm9ZY0hQNjhYSmlRQnRHTEVVSkVSSXJ0UXhKIn0.eyJleHAiOjE2MjYxNzgxMTIsImF1ZCI6InYiLCJzdWIiOiJPR1RtQllUTWtWN0V6NjAxY1JOcEg2QlAxMDEwMmZRdTlDMDAifQ.Jvddeah-XyF0AMmfYND-fFaIfgeDYW_cAuIVIXOrk2so_YalyMMAQ11YXHA1h11yKpLM-xa8xiNXazPqA0Suq1tfxHjJjEqiQOzSlPYd4visiPdTjUgT50FkwYdJrN0IldfXoS19yi3GyAd9McVFoSGCZ6qp8m_hgJ39y8FJJbOrvGtrzEvElpz1M8M1Dat3PF-BSLvFcTvCOlec9dipajxHG_2Xg-EE_vOqww6z81kC09evj5gu_A-Vz58Q-ebd08R47ybNejhE3rzMr1dCKgUikjkkQokPPQyrwVEy8zeZ68elax-ZRvDokZ2mTVPGvKIye6m_CQ-WVlG5XRjw7A",mediaDetails:{filesize:1867215,mimeType:"video/mp4",length:12,lengthFormatted:"0:12",width:720,height:406,fileformat:"mp4",dataformat:"quicktime",audio:{dataformat:"mp4",codec:"ISO/IEC 14496-3 AAC",sampleRate:48e3,channels:2,bitsPerSample:16,lossless:!1,channelmode:"stereo"},createdTimestamp:-2082844800,sizes:{}},id:13,title:"Story",poster:{src:"https://image.mux.com/OGTmBYTMkV7Ez601cRNpH6BP10102fQu9C00/thumbnail.jpg?token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InQ5UHZucm9ZY0hQNjhYSmlRQnRHTEVVSkVSSXJ0UXhKIn0.eyJ0aW1lIjowLCJleHAiOjMxNzE3MDYwNjg4MSwiYXVkIjoidCIsInN1YiI6Ik9HVG1CWVRNa1Y3RXo2MDFjUk5wSDZCUDEwMTAyZlF1OUMwMCJ9.WxHU2cpFdNqqiWF08KEv1g7barfbE_Nw4JDvVrtrQc9mVKiSZ6pEHpYl14NZeaBOf4Ep9MiomaegCVrD-UANhURlxWuHWFx5h7Msg74-q_ojjuZbLZtFPUdA0NA3_GTq5y0LDAeXijM7oENn_IkuDSY0fbRhRUVh-hYqCzw_OqMx7B1IxoOkkZUCHgkm9VnPdAMQRpmaanCHB8SHVRI_vIJo577DxLd88KBFP3UWK1XTvN5NYr0oPtwc82XMYUW4HrxZZTmxzLSZckxzwB7T5E6zAtXpo-xwd52yB1OUhoihlTqiOPWbntpvt9H4lFVRISLwsT39d1Tw80HF_X02eQ",width:1920,height:1080,generated:!1}}),createDummyVideoData({src:"https://storage.coverr.co/videos/PDolZIrwdONTFJd005VOT4qvFsyxVfB01N/preview?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6IjEyNjFDMkM5QUYxNEY5NkJDRTc2IiwiaWF0IjoxNjI2ODM0NDQzfQ._6LJb2Ad843im0xV4-2I2vVpDNoPiy8nPc3-3IkSSuw",mediaDetails:{filesize:1510877,mimeType:"video/quicktime",length:18,lengthFormatted:"0:18",width:640,height:360,fileformat:"mp4",dataformat:"quicktime",createdTimestamp:-2082844800,sizes:{}},id:14,title:"Low",poster:{src:"https://storage.coverr.co/p/PDolZIrwdONTFJd005VOT4qvFsyxVfB01N",width:2048,height:1152,generated:!1}}),createDummyVideoData({src:"https://storage.coverr.co/videos/qMc3OVOA8a6Q9j01T2L3pGfF029UA00OvZJ/preview?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6IjEyNjFDMkM5QUYxNEY5NkJDRTc2IiwiaWF0IjoxNjI2ODM3NDkwfQ.rHiHdTyik8sDuP8viRbC4ph-qjHHJ81I7kdawP2-1eQ",mediaDetails:{filesize:456538,mimeType:"video/mp4",length:15,lengthFormatted:"0:15",width:360,height:640,fileformat:"mp4",dataformat:"quicktime",createdTimestamp:-2082844800,sizes:{},audio:{bitsPerSample:16,channelmode:"stereo",channels:2,codec:"ISO/IEC 14496-3 AAC",dataformat:"mp4",lossless:!1,sampleRate:48e3}},id:15,title:"Mountain Video",poster:{src:"https://storage.coverr.co/p/qMc3OVOA8a6Q9j01T2L3pGfF029UA00OvZJ",width:1080,height:1920,generated:!1}}),createDummyVideoData({src:"https://storage.coverr.co/videos/XHtOLYGTnHiXVxofSdO8oTcA02vxasheL/preview?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6IjEyNjFDMkM5QUYxNEY5NkJDRTc2IiwiaWF0IjoxNjI2ODM3NDkwfQ.rHiHdTyik8sDuP8viRbC4ph-qjHHJ81I7kdawP2-1eQ",mediaDetails:{filesize:2536304,mimeType:"video/mp4",length:27,lengthFormatted:"0:27",width:640,height:360,fileformat:"mp4",dataformat:"quicktime",createdTimestamp:-2082844800,sizes:{},audio:{bitsPerSample:16,channelmode:"stereo",channels:2,codec:"ISO/IEC 14496-3 AAC",dataformat:"mp4",lossless:!1,sampleRate:48e3}},id:16,title:"Beautiful Cloud Video",poster:{src:"https://storage.coverr.co/p/XHtOLYGTnHiXVxofSdO8oTcA02vxasheL",width:1920,height:1080,generated:!1}}),createDummyVideoData({src:"https://storage.coverr.co/videos/X4pOA7IG76p95Gl3IcU3oX26S2sbGsc2/preview?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6IjEyNjFDMkM5QUYxNEY5NkJDRTc2IiwiaWF0IjoxNjI2ODM4Mjc3fQ.lIznWsYEFy3abrDbou1mKJivj6GzQnHO6gJ8jdisPW0",mediaDetails:{filesize:1029136,mimeType:"video/mp4",length:10,lengthFormatted:"0:10",width:640,height:360,fileformat:"mp4",dataformat:"quicktime",createdTimestamp:-2082844800,sizes:{},audio:{bitsPerSample:16,channelmode:"stereo",channels:2,codec:"ISO/IEC 14496-3 AAC",dataformat:"mp4",lossless:!1,sampleRate:48e3}},id:17,title:"Beautiful Fire Video",poster:{src:"https://storage.coverr.co/p/X4pOA7IG76p95Gl3IcU3oX26S2sbGsc2",width:1920,height:1080,generated:!1}})]}(),mediaResponse={data:dummyMedia,headers:{totalItems:dummyMedia.length,totalPages:1}};return params.searchTerm&&(mediaResponse.data=dummyMedia.filter((media=>media.alt.toLowerCase().includes(params.searchTerm.toLowerCase()))),mediaResponse.headers.totalItems=mediaResponse.data.length),Promise.resolve(mediaResponse)};var story_editor_constants=__webpack_require__("./.storybook/stories/playground/story-editor/constants.js");const saveStoryById=({pages,globalStoryStyles,autoAdvance,defaultPageDuration,currentStoryStyles,backgroundAudio,content,title,excerpt})=>{const storySaveData={title:{raw:title},excerpt:{raw:excerpt},storyData:{version:migration_src.I,pages,autoAdvance,defaultPageDuration,currentStoryStyles,backgroundAudio},author:{id:1,name:""},stylePresets:globalStoryStyles,permalinkTemplate:"https://example.org/web-stories/%pagename%/"};return window.localStorage.setItem(story_editor_constants.c,JSON.stringify(storySaveData)),window.localStorage.setItem(story_editor_constants.K,content),Promise.resolve({})};function saveButton_SaveButton(){const $=(0,dist.c)(6),{isSaving:isSaving_0,saveStory:saveStory_0}=(0,app_story.P3)(saveButton_temp),{showSnackbar}=(0,useSnackbar.d)();let t0;$[0]!==saveStory_0||$[1]!==showSnackbar?(t0=()=>{saveStory_0().then((()=>{showSnackbar({message:"Story Saved"})}))},$[0]=saveStory_0,$[1]=showSnackbar,$[2]=t0):t0=$[2];const handleSaveButton=t0;let t1;return $[3]!==handleSaveButton||$[4]!==isSaving_0?(t1=react.createElement(button_button.$,{variant:constants.Ak.Rectangle,type:constants.VQ.Primary,size:constants.Mp.Small,onClick:handleSaveButton,disabled:isSaving_0},"Save"),$[3]=handleSaveButton,$[4]=isSaving_0,$[5]=t1):t1=$[5],t1}function saveButton_temp(t0){const{state:t1,actions:t2}=t0,{meta:t3}=t1,{isSaving}=t3,{saveStory}=t2;return{isSaving,saveStory}}saveButton_SaveButton.__docgenInfo={description:"",methods:[],displayName:"SaveButton"};var external_STORYBOOK_MODULE_CORE_EVENTS_=__webpack_require__("storybook/internal/core-events"),csf=__webpack_require__("./node_modules/storybook/dist/csf/index.js"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/preview-api"),__defProp=Object.defineProperty,{document:chunk_DAF6YNFB_document,HTMLElement}=external_STORYBOOK_MODULE_GLOBAL_.global;var chunk_DAF6YNFB_navigate=params=>external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel().emit(external_STORYBOOK_MODULE_CORE_EVENTS_.SELECT_STORY,params),hrefTo=(title,name)=>new Promise((resolve=>{let{location}=chunk_DAF6YNFB_document,existingId=function parseQuery(queryString){let query={},pairs=("?"===queryString[0]?queryString.substring(1):queryString).split("&").filter(Boolean);for(let i=0;i<pairs.length;i++){let pair=pairs[i].split("=");query[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]||"")}return query}(location.search).id,titleToLink=title||existingId.split("--",2)[0],path=`/story/${(0,csf.Lr)(titleToLink,name)}`,sbPath=location.pathname.replace(/iframe\.html$/,""),url=`${location.origin+sbPath}?${Object.entries({path}).map((item=>`${item[0]}=${item[1]}`)).join("&")}`;resolve(url)})),linksListener=e=>{let{target}=e;if(!(target instanceof HTMLElement))return;let element=target,{sbKind:kind,sbStory:story}=element.dataset;(kind||story)&&(e.preventDefault(),chunk_DAF6YNFB_navigate({kind,story}))},hasListener=!1,off=()=>{hasListener&&(hasListener=!1,chunk_DAF6YNFB_document.removeEventListener("click",linksListener))},withLinks=(0,external_STORYBOOK_MODULE_PREVIEW_API_.makeDecorator)({name:"withLinks",parameterName:"links",wrapper:(getStory,context)=>(hasListener||(hasListener=!0,chunk_DAF6YNFB_document.addEventListener("click",linksListener)),external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel().once(external_STORYBOOK_MODULE_CORE_EVENTS_.STORY_CHANGED,off),getStory(context))}),preview_exports={};((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(preview_exports,{decorators:()=>decorators});var decorators=[withLinks];function preview_PreviewButton(){const $=(0,dist.c)(6),{isSaving:isSaving_0,saveStory:saveStory_0}=(0,app_story.P3)(preview_temp);let t0;$[0]!==saveStory_0?(t0=async()=>{await saveStory_0();const previewLink=await hrefTo("Playground/preview","default");try{const popup=window.open("about:blank","story-preview");popup&&(popup.document.write("<!DOCTYPE html><html><head>"),popup.document.write("<title>"),popup.document.write("Generating the preview…"),popup.document.write("</title>"),popup.document.write("</head><body>"),popup.document.write("Please wait. Generating the preview…"),popup.document.write(`<script>\n            setTimeout(function() {\n              location.replace(${JSON.stringify(previewLink)});\n            }, 5000);\n          <\/script>`))}catch{}},$[0]=saveStory_0,$[1]=t0):t0=$[1];const openPreviewLink=t0;let t1,t2;return $[2]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(eye.A,null),$[2]=t1):t1=$[2],$[3]!==isSaving_0||$[4]!==openPreviewLink?(t2=react.createElement(components_tooltip.A,{title:"Preview",hasTail:!0},react.createElement(button_button.$,{variant:constants.Ak.Square,type:constants.VQ.Quaternary,size:constants.Mp.Small,onClick:openPreviewLink,disabled:isSaving_0},t1)),$[3]=isSaving_0,$[4]=openPreviewLink,$[5]=t2):t2=$[5],t2}function preview_temp(t0){const{state:t1,actions:t2}=t0,{meta:t3}=t1,{isSaving}=t3,{saveStory}=t2;return{isSaving,saveStory}}preview_PreviewButton.__docgenInfo={description:"",methods:[],displayName:"PreviewButton"};const ButtonList=styled_components_browser_esm.Ay.nav.withConfig({displayName:"buttons__ButtonList",componentId:"sc-ds1kaw-0"})(["display:flex;justify-content:flex-end;padding:1em;height:100%;"]),List=styled_components_browser_esm.Ay.div.withConfig({displayName:"buttons__List",componentId:"sc-ds1kaw-1"})(["display:flex;align-items:center;"]),buttons_Space=styled_components_browser_esm.Ay.div.withConfig({displayName:"buttons__Space",componentId:"sc-ds1kaw-2"})(["width:8px;"]),buttons_Spinner=styled_components_browser_esm.Ay.div.withConfig({displayName:"buttons__Spinner",componentId:"sc-ds1kaw-3"})(["position:absolute;top:0;"]),IconWithSpinner=styled_components_browser_esm.Ay.div.withConfig({displayName:"buttons__IconWithSpinner",componentId:"sc-ds1kaw-4"})(["position:relative;"]);function Loading(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(buttons_Spinner,null,react.createElement(circular.A,{size:32})),$[0]=t0):t0=$[0],t0}function Buttons(){const $=(0,dist.c)(9),{isSaving:isSaving_0}=(0,app_story.P3)(buttons_temp);let t0,t1,t2,t3,t4,t5;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(preview_PreviewButton,null),$[0]=t0):t0=$[0],$[1]!==isSaving_0?(t1=isSaving_0&&react.createElement(Loading,null),$[1]=isSaving_0,$[2]=t1):t1=$[2],$[3]!==t1?(t2=react.createElement(IconWithSpinner,null,t0,t1),$[3]=t1,$[4]=t2):t2=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t3=react.createElement(buttons_Space,null),t4=react.createElement(saveButton_SaveButton,null),$[5]=t3,$[6]=t4):(t3=$[5],t4=$[6]),$[7]!==t2?(t5=react.createElement(ButtonList,null,react.createElement(List,null,t2,t3,t4)),$[7]=t2,$[8]=t5):t5=$[8],t5}function buttons_temp(t0){const{state:t1}=t0,{meta:t2}=t1,{isSaving}=t2;return{isSaving}}Buttons.__docgenInfo={description:"",methods:[],displayName:"Buttons"};const Background=styled_components_browser_esm.Ay.header.attrs({role:"group","aria-label":"Story canvas header"}).withConfig({displayName:"header__Background",componentId:"sc-1iw47x9-0"})(["display:flex;align-items:center;justify-content:space-between;background-color:",";"],(({theme})=>theme.colors.bg.primary)),Head=styled_components_browser_esm.Ay.div.withConfig({displayName:"header__Head",componentId:"sc-1iw47x9-1"})(["flex:1 1 auto;padding:1em;"]),ButtonCell=styled_components_browser_esm.Ay.div.withConfig({displayName:"header__ButtonCell",componentId:"sc-1iw47x9-2"})(["grid-area:buttons;"]);function HeaderLayout(){const $=(0,dist.c)(2);let t0,t1;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(Head,null,react.createElement(title,null)),$[0]=t0):t0=$[0],$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(Background,null,t0,react.createElement(ButtonCell,null,react.createElement(Buttons,null))),$[1]=t1):t1=$[1],t1}HeaderLayout.__docgenInfo={description:"",methods:[],displayName:"HeaderLayout"};const story_editor={title:"Playground/Stories Editor"},_default={render:function Render(){const content=window.localStorage.getItem(story_editor_constants.c),story=content?JSON.parse(content):{},apiCallbacks={saveStoryById,getMedia,getFonts};return element_library_src.Wk.forEach(elements_src.Ut),react.createElement("div",{style:{height:"100vh"}},react.createElement(storyEditor,{config:{apiCallbacks},initialEdits:{story}},react.createElement(components_layout,{header:react.createElement(HeaderLayout,null)})))}}},"./packages/design-system/src/components/chip/chip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const getChipBackgroundColor=({theme,active,disabled})=>active&&!disabled?theme.colors.interactiveBg.secondaryNormal:"transparent",Infix=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"chip__Infix",componentId:"sc-oghxqk-0"})(["display:inline-block;margin-right:",";margin-left:",";height:28px;"],(({before=!1})=>before?"-8px":"4px"),(({before=!1})=>before?"4px":"-8px")),StyledChip=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.span.withConfig({displayName:"chip__StyledChip",componentId:"sc-oghxqk-1"})(["padding:0 12px;background:transparent;border:none;&:focus{outline:none;}"]),ChipContainer=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.button.withConfig({displayName:"chip__ChipContainer",componentId:"sc-oghxqk-2"})((({theme,disabled})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.AH)(["display:inline-flex;justify-content:center;align-items:center;height:36px;padding:0;background-color:",";border:1px solid ",";border-radius:",";transition:all 0.3s ease-in-out;transition-property:background-color,border-color,height,width,transform;cursor:",";"," :active{background-color:",";}:hover:not(:active){border-color:",";}",",","{white-space:nowrap;cursor:",";color:",";",";}"],getChipBackgroundColor,disabled?theme.colors.border.disable:theme.colors.interactiveBg.secondaryNormal,theme.borders.radius.x_large,disabled?"default":"pointer",_theme_helpers__WEBPACK_IMPORTED_MODULE_4__.Q,getChipBackgroundColor({theme,active:!0,disabled}),disabled?theme.colors.border.disable:theme.colors.border.defaultHover,Infix,StyledChip,disabled?"default":"pointer",disabled?theme.colors.fg.disable:theme.colors.fg.primary,_theme__WEBPACK_IMPORTED_MODULE_5__.s({preset:theme.typography.presets.paragraph[_theme__WEBPACK_IMPORTED_MODULE_6__.$.Small],theme})))),Chip=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Rf)(((t0,ref)=>{const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(17);let children,prefix,props,suffix,t1,t2,t3,t4;return $[0]!==t0?(({children,prefix,suffix,...props}=t0),$[0]=t0,$[1]=children,$[2]=prefix,$[3]=props,$[4]=suffix):(children=$[1],prefix=$[2],props=$[3],suffix=$[4]),$[5]!==prefix?(t1=prefix&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Infix,{before:!0},prefix),$[5]=prefix,$[6]=t1):t1=$[6],$[7]!==children?(t2=react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledChip,null,children),$[7]=children,$[8]=t2):t2=$[8],$[9]!==suffix?(t3=suffix&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Infix,null,suffix),$[9]=suffix,$[10]=t3):t3=$[10],$[11]!==props||$[12]!==ref||$[13]!==t1||$[14]!==t2||$[15]!==t3?(t4=react__WEBPACK_IMPORTED_MODULE_0__.createElement(ChipContainer,_extends({ref},props),t1,t2,t3),$[11]=props,$[12]=ref,$[13]=t1,$[14]=t2,$[15]=t3,$[16]=t4):t4=$[16],t4}));Chip.displayName="Chip";const __WEBPACK_DEFAULT_EXPORT__=Chip;Chip.__docgenInfo={description:"",methods:[],displayName:"Chip",props:{prefix:{required:!1,tsType:{name:"string"},description:""},suffix:{required:!1,tsType:{name:"string"},description:""},active:{required:!1,tsType:{name:"boolean"},description:""}},composes:["ComponentPropsWithoutRef"]}},"./packages/design-system/src/components/contextMenu/components/subMenuTrigger.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_keyboard__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/utils/constants.ts"),_contextMenuProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/contextMenu/contextMenuProvider/useContextMenu.ts"),_item__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/contextMenu/components/item.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function SubMenuTrigger({openSubMenu,closeSubMenu,isSubMenuOpen,isRTL=!1,subMenuRef,parentMenuRef,...buttonProps}){const ref=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.li)(null),pointerTrackerRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.li)({}),{setFocusedId}=(0,_contextMenuProvider__WEBPACK_IMPORTED_MODULE_3__.A)((({actions})=>({setFocusedId:actions.setFocusedId}))),pointerIsOutside=node=>{const{x,y,width,height}=node.getBoundingClientRect(),{x:pointerX,y:pointerY}=pointerTrackerRef.current;if(void 0===pointerX||void 0===pointerY)return!0;return pointerX<x-2||pointerX>x+width+2||pointerY<y-2||pointerY>y+height+2},maybeCloseSubMenu=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.YQ)((()=>{ref.current&&subMenuRef.current?.firstChild&&subMenuRef.current.firstChild instanceof Element&&pointerIsOutside(ref.current)&&pointerIsOutside(subMenuRef.current.firstChild)&&closeSubMenu()}),200);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{if(isSubMenuOpen&&subMenuRef.current){const subMenuItems=function getFocusableChildren(parent){return Array.from(parent.querySelectorAll(_utils__WEBPACK_IMPORTED_MODULE_2__.E.join(", "))).filter((e=>e instanceof HTMLElement))}(subMenuRef.current);subMenuItems.length&&(subMenuItems[0].focus(),setFocusedId(subMenuItems[0].id))}}),[isSubMenuOpen,subMenuRef,setFocusedId]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{const node_0=parentMenuRef.current?.querySelector('[role="dialog"]');if(!isSubMenuOpen||!node_0)return;const onPointerMove=e=>{e instanceof PointerEvent&&(pointerTrackerRef.current.x=e.clientX,pointerTrackerRef.current.y=e.clientY,maybeCloseSubMenu())};return node_0.addEventListener("pointermove",onPointerMove),()=>node_0.removeEventListener("pointermove",onPointerMove)}),[isSubMenuOpen,parentMenuRef,maybeCloseSubMenu]);const handleKeyboardEvents=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)((evt=>{const{code}=evt;[_utils__WEBPACK_IMPORTED_MODULE_2__.R.SPACE,_utils__WEBPACK_IMPORTED_MODULE_2__.R.ENTER].includes(code)?isSubMenuOpen?closeSubMenu():openSubMenu():(!isRTL&&_utils__WEBPACK_IMPORTED_MODULE_2__.R.RIGHT===code||(isRTL&&_utils__WEBPACK_IMPORTED_MODULE_2__.R.LEFT)===code)&&(isSubMenuOpen||openSubMenu())}),[openSubMenu,closeSubMenu,isSubMenuOpen,isRTL]);return(0,_keyboard__WEBPACK_IMPORTED_MODULE_4__._h)(ref,{key:["enter","space","left","right"]},handleKeyboardEvents,[handleKeyboardEvents]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_item__WEBPACK_IMPORTED_MODULE_5__.A,_extends({},buttonProps,{ref,onPointerEnter:openSubMenu,onPointerLeave:()=>{pointerTrackerRef.current={},maybeCloseSubMenu()},onClick:e_0=>e_0.preventDefault(),"aria-haspopup":!0,"aria-expanded":isSubMenuOpen,dismissOnClick:!1}))}const __WEBPACK_DEFAULT_EXPORT__=SubMenuTrigger;SubMenuTrigger.__docgenInfo={description:"",methods:[],displayName:"SubMenuTrigger",props:{label:{required:!0,tsType:{name:"ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"signature",type:"object",raw:"{ display: string }",signature:{properties:[{key:"display",value:{name:"string",required:!0}}]}},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},SuffixIcon:{required:!1,tsType:{name:"VoidFunctionComponent"},description:""},className:{required:!1,tsType:{name:"string"},description:""},openSubMenu:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},closeSubMenu:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isSubMenuOpen:{required:!0,tsType:{name:"boolean"},description:""},isRTL:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},subMenuRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLElement"}],raw:"RefObject<HTMLElement>"},description:""},parentMenuRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLElement"}],raw:"RefObject<HTMLElement>"},description:""}},composes:["ComponentPropsWithoutRef"]}},"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(({theme})=>theme.colors.fg.tertiary)),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_3__.Q);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;function InfiniteScroller({allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}){const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.li)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.li)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.WO)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>loadState===State.LoadingExternal?null:canLoadMore?react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_loadingSpinner__WEBPACK_IMPORTED_MODULE_6__.A,loadingSpinnerProps)):allDataLoadedMessage?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_typography__WEBPACK_IMPORTED_MODULE_4__.E.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_5__.$.Small},allDataLoadedMessage):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef},loadingAlert&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(AriaOnlyAlert,{role:"status"},loadingAlert),loadingContent)}const __WEBPACK_DEFAULT_EXPORT__=InfiniteScroller;InfiniteScroller.__docgenInfo={description:"",methods:[],displayName:"InfiniteScroller",props:{allDataLoadedMessage:{required:!1,tsType:{name:"string"},description:""},allDataLoadedAriaMessage:{required:!1,tsType:{name:"string"},description:""},onLoadMore:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},canLoadMore:{required:!1,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},loadingAriaMessage:{required:!1,tsType:{name:"string"},description:""},loadingSpinnerProps:{required:!1,tsType:{name:"Partial",elements:[{name:"ComponentProps",elements:[{name:"LoadingSpinner"}],raw:"ComponentProps<typeof LoadingSpinner>"}],raw:"Partial<ComponentProps<typeof LoadingSpinner>>"},description:"",defaultValue:{value:"{ animationSize: 50, circleSize: 6 }",computed:!1}}}}},"./packages/design-system/src/components/pill/pill.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const StyledPill=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.button.withConfig({displayName:"pill__StyledPill",componentId:"sc-ae05ek-0"})((({isActive,theme,styleOverride})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.AH)(["display:flex;align-items:center;justify-content:space-around;padding:6px 16px;height:32px;background-color:",";border:none;border-radius:",";",";color:",";cursor:pointer;",";&:disabled{pointer-events:none;color:",";}transition:color 0.3s ease 0s;transition:background-color 0.3s ease 0s;",";"],isActive?theme.colors.interactiveBg.primaryNormal:theme.colors.opacity.footprint,theme.borders.radius.x_large,_theme__WEBPACK_IMPORTED_MODULE_4__.Q(theme.colors.border.focus),isActive?theme.colors.bg.primary:theme.colors.fg.secondary,_theme__WEBPACK_IMPORTED_MODULE_5__.s({preset:theme.typography.presets.label[_theme__WEBPACK_IMPORTED_MODULE_6__.$.Small],theme}),isActive?theme.colors.bg.primary:theme.colors.fg.disable,styleOverride))),Pill=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Rf)((function Pill(t0,ref){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(13);let children,isActive,onClick,pillStyleOverride,rest,t1;return $[0]!==t0?(({children,isActive,onClick,pillStyleOverride,...rest}=t0),$[0]=t0,$[1]=children,$[2]=isActive,$[3]=onClick,$[4]=pillStyleOverride,$[5]=rest):(children=$[1],isActive=$[2],onClick=$[3],pillStyleOverride=$[4],rest=$[5]),$[6]!==children||$[7]!==isActive||$[8]!==onClick||$[9]!==pillStyleOverride||$[10]!==ref||$[11]!==rest?(t1=react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledPill,_extends({ref,isActive,onClick,styleOverride:pillStyleOverride},rest),children),$[6]=children,$[7]=isActive,$[8]=onClick,$[9]=pillStyleOverride,$[10]=ref,$[11]=rest,$[12]=t1):t1=$[12],t1})),__WEBPACK_DEFAULT_EXPORT__=Pill;Pill.__docgenInfo={description:"",methods:[],displayName:"Pill",props:{isActive:{required:!1,tsType:{name:"boolean"},description:""},pillStyleOverride:{required:!1,tsType:{name:"string"},description:""}},composes:["ComponentPropsWithoutRef"]}},"./packages/design-system/src/components/pill/pillGroup.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_pill__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/pill/pill.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const Container=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.attrs({role:"listbox"}).withConfig({displayName:"pillGroup__Container",componentId:"sc-1iis7mb-0"})(["display:flex;flex:1;column-gap:4px;"]);function PillGroup(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(16);let onSelect,options,rest,value,t1,t2;if($[0]!==t0?(({options,value,onSelect,...rest}=t0),$[0]=t0,$[1]=onSelect,$[2]=options,$[3]=rest,$[4]=value):(onSelect=$[1],options=$[2],rest=$[3],value=$[4]),$[5]!==onSelect||$[6]!==options||$[7]!==rest||$[8]!==value){let t2;$[10]!==onSelect||$[11]!==rest||$[12]!==value?(t2=t3=>{const{id,label}=t3;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_pill__WEBPACK_IMPORTED_MODULE_3__.A,_extends({key:id,isActive:id===value,onClick:()=>onSelect(id),role:"option"},rest),label)},$[10]=onSelect,$[11]=rest,$[12]=value,$[13]=t2):t2=$[13],t1=options.map(t2),$[5]=onSelect,$[6]=options,$[7]=rest,$[8]=value,$[9]=t1}else t1=$[9];return $[14]!==t1?(t2=react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,null,t1),$[14]=t1,$[15]=t2):t2=$[15],t2}const __WEBPACK_DEFAULT_EXPORT__=PillGroup;PillGroup.__docgenInfo={description:"",methods:[],displayName:"PillGroup",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"PillOption"}],raw:"PillOption[]"},description:""},value:{required:!0,tsType:{name:"string"},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}},composes:["Omit"]}},"./packages/design-system/src/components/search/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GW:()=>DEFAULT_PLACEHOLDER,KV:()=>DEFAULT_POPUP_FILL_WIDTH,Mu:()=>Z_INDEX,Zk:()=>DEFAULT_ARIA_CLEAR_LABEL,mu:()=>DEFAULT_ARIA_INPUT_LABEL});var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/src/i18n.ts");const DEFAULT_POPUP_FILL_WIDTH=276,DEFAULT_PLACEHOLDER=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Search","web-stories"),DEFAULT_ARIA_CLEAR_LABEL=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Clear Search","web-stories"),DEFAULT_ARIA_INPUT_LABEL=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Search","web-stories"),Z_INDEX={CLEAR_BUTTON:5}},"./packages/design-system/src/components/search/input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>input});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),cross_small=__webpack_require__("./packages/design-system/src/icons/cross_small.svg"),chevron_down_small=__webpack_require__("./packages/design-system/src/icons/chevron_down_small.svg"),magnifier=__webpack_require__("./packages/design-system/src/icons/magnifier.svg"),expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),constants=__webpack_require__("./packages/design-system/src/components/search/constants.ts");const InputContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"input__InputContainer",componentId:"sc-hhun7d-0"})((({theme})=>(0,styled_components_browser_esm.AH)(["display:flex;position:relative;height:36px;width:100%;max-width:400px;background-color:transparent;color:",";"],theme.colors.fg.primary))),Input=styled_components_browser_esm.Ay.input.withConfig({displayName:"input__Input",componentId:"sc-hhun7d-1"})((({theme,hasError})=>(0,styled_components_browser_esm.AH)(["position:absolute;height:100%;width:100%;background-color:transparent;outline:none;cursor:pointer;",";color:",";border:1px solid ",";padding:8px 20px 8px 40px;&::placeholder{color:",";}&[aria-expanded='true']{border-color:",";}border-radius:",";&::-ms-clear{display:none;}&::-webkit-search-decoration,&::-webkit-search-cancel-button,&::-webkit-search-results-button,&::-webkit-search-results-decoration{appearance:none;}&:hover{border-color:",";}",";"," &:disabled{pointer-events:none;border-color:",";color:",";&:hover{border-color:",";}}"],expandPresetStyles.s({preset:theme.typography.presets.paragraph[types.$.Small],theme}),theme.colors.fg.primary,theme.colors.border.defaultNormal,theme.colors.fg.tertiary,theme.colors.border.defaultActive,theme.borders.radius.small,theme.colors.border.defaultHover,outline.Q(theme.colors.border.focus),hasError&&(0,styled_components_browser_esm.AH)(["border-color:",";&:active,&:hover{border-color:",";}"],theme.colors.interactiveBg.negativeHover,theme.colors.interactiveBg.negativeHover),theme.colors.border.disable,theme.colors.fg.disable,theme.colors.border.disable))),BaseDecorationContainer=(0,styled_components_browser_esm.AH)(["display:flex;align-items:center;width:32px;background-color:transparent;color:",";border:0;margin:auto 1px auto auto;padding:0;align-self:flex-end;cursor:pointer;"],(({theme})=>theme.colors.fg.secondary)),ClearButton=styled_components_browser_esm.Ay.button.withConfig({displayName:"input__ClearButton",componentId:"sc-hhun7d-2"})(["",";display:",";outline:none;",";height:30px;z-index:",";"],BaseDecorationContainer,(({isVisible})=>isVisible?"flex":"none"),(({theme})=>outline.Q(theme.colors.border.focus)),constants.Mu.CLEAR_BUTTON),ClearIcon=(0,styled_components_browser_esm.Ay)(cross_small.A).withConfig({displayName:"input__ClearIcon",componentId:"sc-hhun7d-3"})(["width:32px;height:auto;margin:auto;"]),ChevronDecoration=styled_components_browser_esm.Ay.div.withConfig({displayName:"input__ChevronDecoration",componentId:"sc-hhun7d-4"})(["",";display:",";visibility:",";height:100%;",""],BaseDecorationContainer,(({isVisible})=>isVisible?"flex":"none"),(({isVisible})=>isVisible?"visible":"collapsed"),(({disabled,theme})=>disabled&&(0,styled_components_browser_esm.AH)(["pointer-events:none;color:",";"],theme.colors.fg.disable))),ChevronIcon=(0,styled_components_browser_esm.Ay)(chevron_down_small.A).withConfig({displayName:"input__ChevronIcon",componentId:"sc-hhun7d-5"})(["width:32px;height:auto;margin:auto;",""],(({$isMenuOpen})=>$isMenuOpen&&(0,styled_components_browser_esm.AH)(["transform:rotate(180deg);"]))),SearchDecoration=styled_components_browser_esm.Ay.div.withConfig({displayName:"input__SearchDecoration",componentId:"sc-hhun7d-6"})((({theme,activeSearch,disabled})=>(0,styled_components_browser_esm.AH)(["",";position:absolute;height:100%;margin:0;left:8px;color:",";pointer-events:none;",""],BaseDecorationContainer,activeSearch?theme.colors.fg.tertiary:theme.colors.fg.primary,disabled&&(0,styled_components_browser_esm.AH)(["color:",";"],theme.colors.fg.disable)))),SearchIcon=(0,styled_components_browser_esm.Ay)(magnifier.A).withConfig({displayName:"input__SearchIcon",componentId:"sc-hhun7d-7"})(["position:relative;width:32px;height:auto;margin:auto;"]);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const SearchInput=(0,src.Rf)(((t0,ref)=>{const $=(0,dist.c)(71);let ariaClearLabel,clearId,disabled,handleTabClear,inputValue,isOpen,listId,rest,t1,t2;$[0]!==t0?(({ariaClearLabel,clearId,disabled,handleClearInput:t1,handleTabClear,inputValue,isOpen,listId,className:t2,...rest}=t0),$[0]=t0,$[1]=ariaClearLabel,$[2]=clearId,$[3]=disabled,$[4]=handleTabClear,$[5]=inputValue,$[6]=isOpen,$[7]=listId,$[8]=rest,$[9]=t1,$[10]=t2):(ariaClearLabel=$[1],clearId=$[2],disabled=$[3],handleTabClear=$[4],inputValue=$[5],isOpen=$[6],listId=$[7],rest=$[8],t1=$[9],t2=$[10]);const handleClearInput=void 0===t1?_temp:t1,className=void 0===t2?"":t2,[inputChanged,setInputChanged]=(0,src.J0)(!1),[isEmptyValue,setIsEmptyValue]=(0,src.J0)(!1);let t3,t4;$[11]!==inputValue.length||$[12]!==isOpen?(t3=()=>inputValue.length>0&&isOpen,$[11]=inputValue.length,$[12]=isOpen,$[13]=t3):t3=$[13],$[14]!==inputValue||$[15]!==isOpen?(t4=[isOpen,inputValue],$[14]=inputValue,$[15]=isOpen,$[16]=t4):t4=$[16];const activeInput=(0,src.Kr)(t3,t4);let t5,t6;$[17]!==inputValue.length||$[18]!==isOpen?(t5=()=>0===inputValue.length&&!isOpen,$[17]=inputValue.length,$[18]=isOpen,$[19]=t5):t5=$[19],$[20]!==inputValue||$[21]!==isOpen?(t6=[isOpen,inputValue],$[20]=inputValue,$[21]=isOpen,$[22]=t6):t6=$[22];const alignInputCenter=(0,src.Kr)(t5,t6);let t7,t8;$[23]!==handleTabClear?(t7=t9=>{const{key}=t9;"Tab"===key&&handleTabClear?.()},t8=[handleTabClear],$[23]=handleTabClear,$[24]=t7,$[25]=t8):(t7=$[24],t8=$[25]);const onClearButtonKeyDown=(0,src.hb)(t7,t8);let t9,t10;$[26]!==isOpen||$[27]!==setInputChanged||$[28]!==setIsEmptyValue?(t9=value=>{setIsEmptyValue(""===value),setInputChanged(isOpen)},$[26]=isOpen,$[27]=setInputChanged,$[28]=setIsEmptyValue,$[29]=t9):t9=$[29],$[30]!==isOpen?(t10=[isOpen],$[30]=isOpen,$[31]=t10):t10=$[31];const handleOnInput=(0,src.hb)(t9,t10);let t11,t12,t13,t14,t15;$[32]!==handleOnInput?(t11=event=>handleOnInput(event.currentTarget.value),$[32]=handleOnInput,$[33]=t11):t11=$[33],$[34]!==isOpen||$[35]!==listId?(t12=listId&&{role:"combobox","aria-expanded":isOpen,"aria-controls":listId,"aria-owns":listId,"aria-autocomplete":"list"},$[34]=isOpen,$[35]=listId,$[36]=t12):t12=$[36],$[37]!==disabled||$[38]!==inputValue||$[39]!==ref||$[40]!==rest||$[41]!==t11||$[42]!==t12?(t13=react.createElement(Input,_extends({"aria-disabled":disabled,autoComplete:"off",disabled,onInput:t11,ref,type:"search",value:inputValue},t12,rest)),$[37]=disabled,$[38]=inputValue,$[39]=ref,$[40]=rest,$[41]=t11,$[42]=t12,$[43]=t13):t13=$[43],$[44]!==clearId?(t14=react.createElement(SearchIcon,{id:clearId}),$[44]=clearId,$[45]=t14):t14=$[45],$[46]!==alignInputCenter||$[47]!==disabled||$[48]!==t14?(t15=react.createElement(SearchDecoration,{activeSearch:alignInputCenter,"aria-hidden":!0,disabled},t14),$[46]=alignInputCenter,$[47]=disabled,$[48]=t14,$[49]=t15):t15=$[49];const t16=activeInput&&inputChanged,t17=activeInput&&inputChanged?ariaClearLabel:"";let t18,t19;$[50]!==clearId?(t18=react.createElement(ClearIcon,{id:clearId,"data-testid":"clear-search-icon"}),$[50]=clearId,$[51]=t18):t18=$[51],$[52]!==handleClearInput||$[53]!==onClearButtonKeyDown||$[54]!==t16||$[55]!==t17||$[56]!==t18?(t19=react.createElement(ClearButton,{type:"button",isVisible:t16,tabIndex:0,"aria-label":t17,onClick:handleClearInput,onKeyDown:onClearButtonKeyDown},t18),$[52]=handleClearInput,$[53]=onClearButtonKeyDown,$[54]=t16,$[55]=t17,$[56]=t18,$[57]=t19):t19=$[57];const t20=activeInput&&inputChanged||isEmptyValue,t21=(!activeInput||!inputChanged)&&!isEmptyValue&&inputValue.length>0;let t22,t23,t24;return $[58]!==isOpen?(t22=react.createElement(ChevronIcon,{$isMenuOpen:isOpen,"data-testid":"chevron-search-icon"}),$[58]=isOpen,$[59]=t22):t22=$[59],$[60]!==disabled||$[61]!==t20||$[62]!==t21||$[63]!==t22?(t23=react.createElement(ChevronDecoration,{disabled,"aria-hidden":t20,isVisible:t21},t22),$[60]=disabled,$[61]=t20,$[62]=t21,$[63]=t22,$[64]=t23):t23=$[64],$[65]!==className||$[66]!==t13||$[67]!==t15||$[68]!==t19||$[69]!==t23?(t24=react.createElement(InputContainer,{className},t13,t15,t19,t23),$[65]=className,$[66]=t13,$[67]=t15,$[68]=t19,$[69]=t23,$[70]=t24):t24=$[70],t24})),input=SearchInput;function _temp(){}SearchInput.__docgenInfo={description:"",methods:[],displayName:"SearchInput",props:{ariaClearLabel:{required:!1,tsType:{name:"string"},description:""},clearId:{required:!1,tsType:{name:"string"},description:""},handleClearInput:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:"() => undefined",computed:!1}},handleTabClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},inputValue:{required:!0,tsType:{name:"string"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},listId:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:""}},composes:["ComponentPropsWithoutRef"]}},"./packages/design-system/src/contexts/popup/popupProvider.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./packages/design-system/src/contexts/popup/context.ts").A.Provider},"./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/contexts/snackbar/context.ts");function SnackbarProvider(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(20),{children,placement:t1}=t0,placement=void 0===t1?"bottom":t1;let t2;$[0]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[0]=t2):t2=$[0];const[notifications,setNotifications]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.J0)(t2);let t3,t4;$[1]!==setNotifications?(t3=toRemove=>{setNotifications((currentNotifications=>currentNotifications.filter((item=>Array.isArray(toRemove)?!toRemove.find((t4=>{const{id}=t4;return id===item.id})):item.id!==toRemove.id))))},$[1]=setNotifications,$[2]=t3):t3=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[3]=t4):t4=$[3];const remove=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t3,t4);let t5,t6;$[4]!==setNotifications?(t5=notification=>{const newNotification={id:(0,uuid__WEBPACK_IMPORTED_MODULE_3__.A)(),...notification};setNotifications((currentNotifications_0=>[...currentNotifications_0,newNotification]))},$[4]=setNotifications,$[5]=t5):t5=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t6=[],$[6]=t6):t6=$[6];const create=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t5,t6);let t7,t8;$[7]!==setNotifications?(t7=()=>{setNotifications([])},$[7]=setNotifications,$[8]=t7):t7=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t8=[],$[9]=t8):t8=$[9];const clear=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t7,t8);let t10,t9;$[10]!==clear||$[11]!==create||$[12]!==notifications||$[13]!==placement||$[14]!==remove?(t9=()=>({showSnackbar:create,clearSnackbar:clear,removeSnack:remove,currentSnacks:notifications,placement}),t10=[create,clear,remove,notifications,placement],$[10]=clear,$[11]=create,$[12]=notifications,$[13]=placement,$[14]=remove,$[15]=t10,$[16]=t9):(t10=$[15],t9=$[16]);const state=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)(t9,t10);let t11;return $[17]!==children||$[18]!==state?(t11=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_context__WEBPACK_IMPORTED_MODULE_4__.A.Provider,{value:state},children),$[17]=children,$[18]=state,$[19]=t11):t11=$[19],t11}const __WEBPACK_DEFAULT_EXPORT__=SnackbarProvider;SnackbarProvider.__docgenInfo={description:"",methods:[],displayName:"SnackbarProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},placement:{required:!1,tsType:{name:"union",raw:"'bottom' | 'top'",elements:[{name:"literal",value:"'bottom'"},{name:"literal",value:"'top'"}]},description:"",defaultValue:{value:"'bottom'",computed:!1}}}}},"./packages/design-system/src/images/desert_bw.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,_circle,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const SvgDesertBw=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#767E80",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.795-10.544a10 10 0 0 0 2.524-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675q.654.323 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a10 10 0 0 1-2.818-.186"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"#ADB1B3",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4zM120.857 53.179a2.143 2.143 0 0 1 4.286 0v14.25h1.714V62.07a1.072 1.072 0 0 1 2.143 0V68.5a1.2 1.2 0 0 1-.048.319 1.07 1.07 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714zM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.99 3.99 0 0 1-2.828-1.171A4 4 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572z",clipRule:"evenodd"})),_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:213,cy:72,r:13,fill:"#E4E5E6"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgDesertBw)},"./packages/design-system/src/utils/deepMerge.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function deepMerge(object,source={}){return Object.entries(source).forEach((([key,value])=>{void 0!==value&&(value&&"object"==typeof value&&!Array.isArray(value)?("key"in object||object[key]||Object.assign(object,{[key]:{}}),deepMerge(object[key],value)):Object.assign(object,{[key]:value}))})),object}__webpack_require__.d(__webpack_exports__,{A:()=>deepMerge})},"./packages/design-system/src/utils/uniqueEntriesByKey.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function uniqueEntriesByKey(entries,key){const map=new Map;return entries.forEach((entry=>{map.set(entry[key],entry)})),[...map.values()]}},"./packages/story-editor/src/components/devTools/dummyData.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>dummyVideo,w:()=>dummyImage});const dummyVideo="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAPEbW9vdgAAAGxtdmhkAAAAANrF/AXaxfwFAAAD6AAAB9AAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE///////wAAAzh0cmFrAAAAXHRraGQAAAAB2sX8BdrF/AUAAAABAAAAAAAAB9AAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAABQAAAAUAAAAAAKwbWRpYQAAACBtZGhkAAAAANrF/AXaxfwFAAAD6AAAB9BVxAAAAAAAIWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAAAAAAACZ21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAq3N0c2QAAAAAAAAAAQAAAJthdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAABQAFABIAAAASAAAAAAAAAABDkpWVC9BVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAM2F2Y0MBTUAK/+EAG2dNQArsxLzzzUBAQZAAAAMAEAAAAwFI8SJZoAEABWjpeyyAAAAAEmNvbHJuY2xjAAEAAQAGAAAAGHN0dHMAAAAAAAAAAQAAABQAAABkAAAAZHN0c3oAAAAAAAAAAAAAABQAAAC1AAAADAAAAAwAAAAMAAAADAAAAGcAAAAOAAAADQAAAAwAAADEAAAADwAAAA4AAAAMAAAAmgAAAA8AAAAMAAAADAAAABEAAAAOAAAADAAAABxzdHNjAAAAAAAAAAEAAAABAAAACgAAAAEAAAAgY282NAAAAAAAAAACAAAAAAAAA/QAAAAAAAAGKwAAAKhjdHRzAAAAAAAAABMAAAABAAAAyAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAfQAAAABAAAAyAAAAAEAAAAAAAAAAQAAAGQAAAABAAAB9AAAAAEAAADIAAAAAQAAAAAAAAABAAAAZAAAAAEAAAH0AAAAAQAAAMgAAAABAAAAAAAAAAEAAABkAAAAAQAAAZAAAAACAAAAZAAAABRzdHNzAAAAAAAAAAEAAAABAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAAH0AAAAMgAAQAAAAAAAW1kYXQAAAAAAAADXAAAALFliIQAIf8tERhKDUPN//6tPIlfMgqs2j4bf1chdW+++2VwQdh75gd9Y8UGeNAnhlaisT01Zs49a/0nV0aO/GLhqiGwvWR/s1K9W3zBx2od2cS1bT/kb2rz7FeHrWTqTLX6Gx65Y6i33pdJ/uLJd1nt76ybxnGFuPrIHacdB39MBmZsd4t/m7wPBzhrJIjUCiCUcSaxJPxvEH+6DID5TqxsXtv0RS9+hTuYECGa+YWdx4EAAAAIQZokbEMfi4AAAAAIQZ5COIc/0YEAAAAIAZ5hNEEH1YAAAAAIAZ5jakEH1YEAAABjQZpoSahBaJlMCM/eVhjnGE9A+AdJ7SwN5vlKUC/otPa/5jefanvcx5sQZ4c8/3tiMqvDgQF8rydFoFe3gcpkTP4xG9DP5oXTv1DTSsVi1O/u9fkq6BMYR61X6/n148wbBk3hAAAACkGehi5RMJfxO6sAAAAJAZ6lKRDn87czAAAACAGep25Cn8WAAAAAwEGarDUILakymAT/lvijvmpe6mLGpu6rJNoev4/97f/3/AViMdt7WMTLeGSxGKwsecwmz+Z5NTf4Lgky4aLbYBjw9pUtNg4bov9E4yT+OadpewkQxiWZZozDDf98P4PN72xr+rkQJcODW8z2LOkQVijjHcWSmTAvF7/ANFm8TO5l9vC/tz7FvEis+ba+dTueI87l9hdLXQfWqKN+J9j1fj5cguj08byzEmWnKbLlqG1uTZmu0LDedc3Ugo76bySHIAAAAAtBnspklERc3+sNqQAAAAoBnukpEZ/3fsMPAAAACAGe625N/6+AAAAAlkGa8DUILakymARfBGYe5snAbMic1iEEu9W/yugK09WdqQ1/7ftt/lUz4i6orQg+4cIz2nHYVKTXCJJbyOrz/tGL+TWtNtUBVK2kbTsfCYF8ddhk+qL5Jr82IUEUALXNsKpx1hhGIJnvqqlGTOyyOpmwbHhNUa2TaBkzzVzuaVnuHnaL3sjfLR0XEc/T6ntUXHacPLf94QAAAAtBnw5klERd//FEowAAAAgBny1pFf+ngQAAAAgBny9uf+yhJAAAAA1BmzM1CC2pMpgE/xwwAAAACkGfUWSURFz/kYEAAAAIAZ9ybkv/mIA=",dummyImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGElEQVQYV2NkYGD4////fwZGEMnIyMgAAEvqB/6wfXLSAAAAAElFTkSuQmCC"},"./packages/story-editor/src/components/library/panes/media/common/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{HT:()=>PaneInner,QM:()=>PaneHeader,SM:()=>StyledPane,WW:()=>GalleryContainer,Wx:()=>MediaGalleryLoadingPill,Yk:()=>MediaGalleryContainer,aN:()=>MediaGalleryMessage,m8:()=>MediaGalleryInnerContainer,oG:()=>SearchInputContainer});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),polished__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/polished/dist/polished.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_shared__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/library/panes/shared/index.js");const PaneInner=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__PaneInner",componentId:"sc-18rwr03-0"})(["height:100%;display:flex;flex-direction:column;"]),PaneHeader=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__PaneHeader",componentId:"sc-18rwr03-1"})(["padding-top:24px;flex:0 1 auto;"]),GalleryContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__GalleryContainer",componentId:"sc-18rwr03-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;"]),MediaGalleryContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__MediaGalleryContainer",componentId:"sc-18rwr03-3"})(["overflow-y:scroll;overflow-x:hidden;padding:0 ",";margin-top:1em;position:relative;width:100%;flex:1 1 auto;min-height:100px;"],_shared__WEBPACK_IMPORTED_MODULE_0__.z7),MediaGalleryInnerContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__MediaGalleryInnerContainer",componentId:"sc-18rwr03-4"})(["width:calc(100% + ","px);"],_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__.$.SCROLLBAR_WIDTH),MediaGalleryLoadingPill=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__MediaGalleryLoadingPill",componentId:"sc-18rwr03-5"})(["display:block;position:absolute;bottom:20px;left:60px;right:60px;width:240px;text-align:center;padding:8px 80px;background-color:",";border-radius:100px;"],(({theme})=>(0,polished__WEBPACK_IMPORTED_MODULE_3__.B3)(theme.colors.standard.black,.4))),MediaGalleryMessage=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.E.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__.$.Medium}).withConfig({displayName:"common__MediaGalleryMessage",componentId:"sc-18rwr03-6"})(["color:",";padding:1em;text-align:center;"],(({theme})=>theme.colors.fg.secondary)),StyledPane=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay)(_shared__WEBPACK_IMPORTED_MODULE_0__.Zv).withConfig({displayName:"common__StyledPane",componentId:"sc-18rwr03-7"})(["height:100%;padding:0;overflow:hidden;"]),SearchInputContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"common__SearchInputContainer",componentId:"sc-18rwr03-8"})(["padding:0 ",";"],_shared__WEBPACK_IMPORTED_MODULE_0__.z7)},"./packages/story-editor/src/components/library/panes/shared/chipGroup/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>chipGroup});var react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./packages/react/src/index.ts"),v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),chip=__webpack_require__("./packages/design-system/src/components/chip/chip.tsx"),chevron_up=__webpack_require__("./packages/design-system/src/icons/chevron_up.svg"),useRovingTabIndex=__webpack_require__("./packages/story-editor/src/utils/useRovingTabIndex/index.js");const hooks_useExpandAnimation=function useExpandAnimation({sectionRef,innerContainerRef,isExpanded,setFocusedRowOffset,collapsedHeight,bottomMargin,topMargin}){(0,src.Nf)((()=>{if(!sectionRef.current||!innerContainerRef.current)return;let height;height=isExpanded?`${innerContainerRef.current.offsetHeight+topMargin+bottomMargin}px`:`${collapsedHeight}px`,sectionRef.current.style.height=height,sectionRef.current.style.minHeight=height,setFocusedRowOffset(0)}),[bottomMargin,collapsedHeight,innerContainerRef,isExpanded,sectionRef,setFocusedRowOffset,topMargin])};var dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js");const hooks_useHandleRowVisibility=function useHandleRowVisibility(t0){const $=(0,dist.c)(24),{innerContainerRef,isExpanded,setFocusedRowOffset,selectedItemId,itemRefs,offsetSpacing:t1}=t0,offsetSpacing=void 0===t1?0:t1;let t2,t3,t4,t5;$[0]!==innerContainerRef.current||$[1]!==isExpanded||$[2]!==itemRefs||$[3]!==offsetSpacing||$[4]!==selectedItemId||$[5]!==setFocusedRowOffset?(t2=()=>{if(!innerContainerRef.current)return;const selectedItem=itemRefs.current?.[selectedItemId]?itemRefs.current[selectedItemId]:null;!isExpanded&&selectedItem&&setFocusedRowOffset(selectedItem?.offsetTop-offsetSpacing||0)},$[0]=innerContainerRef.current,$[1]=isExpanded,$[2]=itemRefs,$[3]=offsetSpacing,$[4]=selectedItemId,$[5]=setFocusedRowOffset,$[6]=t2):t2=$[6],$[7]!==innerContainerRef||$[8]!==isExpanded||$[9]!==itemRefs||$[10]!==offsetSpacing||$[11]!==selectedItemId||$[12]!==setFocusedRowOffset?(t3=[innerContainerRef,isExpanded,itemRefs,offsetSpacing,selectedItemId,setFocusedRowOffset],$[7]=innerContainerRef,$[8]=isExpanded,$[9]=itemRefs,$[10]=offsetSpacing,$[11]=selectedItemId,$[12]=setFocusedRowOffset,$[13]=t3):t3=$[13],(0,src.Nf)(t2,t3),$[14]!==innerContainerRef.current||$[15]!==isExpanded||$[16]!==itemRefs||$[17]!==selectedItemId?(t4=()=>{if(!innerContainerRef.current)return;const selectedItem_0=itemRefs.current?.[selectedItemId]?itemRefs.current[selectedItemId]:null,selectedItemOffsetTop_0=selectedItem_0?.offsetTop||0;for(const pill of itemRefs.current){if(!pill)continue;const isSameRow=selectedItem_0&&pill.offsetTop===selectedItemOffsetTop_0;!selectedItem_0||isSameRow||isExpanded?pill.classList.remove("invisible"):pill.classList.add("invisible")}},$[14]=innerContainerRef.current,$[15]=isExpanded,$[16]=itemRefs,$[17]=selectedItemId,$[18]=t4):t4=$[18],$[19]!==innerContainerRef||$[20]!==isExpanded||$[21]!==itemRefs||$[22]!==selectedItemId?(t5=[innerContainerRef,isExpanded,selectedItemId,itemRefs],$[19]=innerContainerRef,$[20]=isExpanded,$[21]=itemRefs,$[22]=selectedItemId,$[23]=t5):t5=$[23],(0,src.Nf)(t4,t5)},Section=styled_components_browser_esm.Ay.div.withConfig({displayName:"chipGroup__Section",componentId:"sc-emvo4b-0"})(["height:","px;min-height:","px;background-color:",";display:flex;flex-direction:column;align-items:flex-start;flex:0 1 auto;position:relative;transition:height 0.2s,min-height 0.2s;"],80,80,(({theme})=>theme.colors.divider.tertiary)),Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"chipGroup__Container",componentId:"sc-emvo4b-1"})(["overflow:hidden;margin:","px 12px ","px 24px;"],16,20),InnerContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"chipGroup__InnerContainer",componentId:"sc-emvo4b-2"})(["display:flex;justify-content:center;flex-wrap:wrap;position:relative;padding:4px 0;transition:transform 0.2s;column-gap:8px;row-gap:14px;"]),ExpandButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Circle}).withConfig({displayName:"chipGroup__ExpandButton",componentId:"sc-emvo4b-3"})(["display:flex;position:absolute;bottom:-24px;background:",";max-height:none;width:32px;height:32px;"," visibility:inherit;align-self:center;justify-content:center;align-items:center;"],(({theme})=>theme.colors.bg.tertiary),(({isExpanded})=>isExpanded&&"transform: scaleY(-1);")),ChipGroup=({items,selectedItemId,selectItem,deselectItem,ariaLabel})=>{const[isExpanded,setIsExpanded]=(0,src.J0)(!1),sectionRef=(0,src.li)(),innerContainerRef=(0,src.li)(),itemsRef=(0,src.li)([]),[focusedRowOffset,setFocusedRowOffset]=(0,src.J0)(0),handleClick=(0,src.hb)(((selected,id)=>{selected&&null!==id?deselectItem():(setIsExpanded(!1),selectItem(id))}),[deselectItem,selectItem]),handleExpandClick=(0,src.hb)((()=>setIsExpanded((currentExpanded=>!currentExpanded))),[]);hooks_useExpandAnimation({sectionRef,innerContainerRef,isExpanded,setFocusedRowOffset,collapsedHeight:80,bottomMargin:20,topMargin:16}),hooks_useHandleRowVisibility({isExpanded,innerContainerRef,selectedItemId,setFocusedRowOffset,itemRefs:itemsRef,offsetSpacing:4});const hasItems=items.length>0;(0,useRovingTabIndex.A)({ref:sectionRef},[isExpanded]),(0,keyboard._h)(sectionRef,isExpanded?"":"down",(()=>hasItems&&setIsExpanded(!0)),[isExpanded,hasItems]);const containerId=(0,src.Kr)((()=>`pill-group-${(0,v4.A)()}`),[]);return react.createElement(Section,{ref:sectionRef},hasItems&&react.createElement(react.Fragment,null,react.createElement(Container,{id:containerId,isExpanded,role:"listbox","aria-label":ariaLabel||(0,i18n.__)("List of filtering options","web-stories")},react.createElement(InnerContainer,{role:"presentation",ref:innerContainerRef,style:{transform:`translateY(-${focusedRowOffset}px`}},items.map(((item,index)=>{const{id:id_0,label}=item,selected_0=id_0===selectedItemId,tabIndex=selected_0||!selected_0&&0===index?0:-1;return react.createElement(chip.A,{key:id_0,role:"option",ref:el=>{itemsRef.current[id_0]=el},active:selected_0,"aria-selected":selected_0,onClick:()=>handleClick(selected_0,id_0),tabIndex},label)})))),react.createElement(ExpandButton,{onClick:handleExpandClick,isExpanded,"aria-controls":containerId,"aria-expanded":isExpanded,"aria-label":(0,i18n.__)("Expand","web-stories")},react.createElement(chevron_up.A,null))))},chipGroup=ChipGroup;ChipGroup.__docgenInfo={description:"",methods:[],displayName:"ChipGroup",props:{items:{description:"",type:{name:"array"},required:!0},selectedItemId:{description:"",type:{name:"string"},required:!1},selectItem:{description:"",type:{name:"func"},required:!1},deselectItem:{description:"",type:{name:"func"},required:!1},ariaLabel:{description:"",type:{name:"string"},required:!1}}}},"./packages/story-editor/src/components/library/panes/shared/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Iy:()=>_chipGroup__WEBPACK_IMPORTED_MODULE_4__.A,VC:()=>PageTemplateTitleContainer,YM:()=>LoadingContainer,Zv:()=>Pane,kN:()=>getPaneId,rA:()=>ActionButton,vU:()=>getTabId,z7:()=>PANE_PADDING});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_constants_zIndex__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),_chipGroup__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/library/panes/shared/chipGroup/index.js");const PANE_PADDING="1em",Pane=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.section.attrs((({isActive})=>({role:"tabpanel","aria-expanded":isActive,hidden:!isActive}))).withConfig({displayName:"shared__Pane",componentId:"sc-10fhorr-0"})(["padding:1.5em ",";",""],PANE_PADDING,(({isOverflowScrollable=!1})=>isOverflowScrollable&&(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.AH)(["overflow-y:scroll;height:100%;"])));function getPaneId(tab){return`library-pane-${tab}`}function getTabId(tab){return`library-tab-${tab}`}const LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"shared__LoadingContainer",componentId:"sc-10fhorr-1"})(["display:flex;justify-content:center;margin-top:18px;"]),ActionButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__.$).attrs({variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__.Ak.Icon}).withConfig({displayName:"shared__ActionButton",componentId:"sc-10fhorr-2"})(["display:flex;align-items:center;position:absolute;top:calc(50% - ","px);right:calc(50% - ","px);color:",";border-radius:",";width:","px;height:","px;opacity:",";z-index:",";"],8,8,(({theme})=>theme.colors.fg.primary),(({theme})=>theme.borders.radius.round),16,16,(({$display})=>$display?"1":"0"),_constants_zIndex__WEBPACK_IMPORTED_MODULE_3__.qR),PageTemplateTitleContainer=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"shared__PageTemplateTitleContainer",componentId:"sc-10fhorr-3"})(["position:absolute;bottom:0;width:100%;padding:8px;background-color:",";opacity:",";"],(({theme})=>theme.colors.opacity.black64),(({isActive})=>isActive?1:0))},"./packages/story-editor/src/components/library/panes/shared/insertionOverlay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/icons/plus_filled_small.svg"),polished__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/polished/dist/polished.esm.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);const IconContainer=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"insertionOverlay__IconContainer",componentId:"sc-x3oxxu-0"})(["height:","px;width:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);color:",";border-radius:",";pointer-events:none;svg{position:absolute;top:0;left:0;}"],16,16,8,8,(({theme})=>theme.colors.fg.primary),(({theme})=>theme.borders.radius.round)),Scrim=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"insertionOverlay__Scrim",componentId:"sc-x3oxxu-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:",";pointer-events:none;"],(({theme})=>(0,polished__WEBPACK_IMPORTED_MODULE_3__.B3)(theme.colors.standard.black,.5)));function InsertionOverlay(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5),{showIcon:t1,className:t2}=t0,showIcon=void 0===t1||t1,className=void 0===t2?"":t2;let t3,t4;return $[0]!==showIcon?(t3=showIcon&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(IconContainer,{role:"presentation"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.A,null)),$[0]=showIcon,$[1]=t3):t3=$[1],$[2]!==className||$[3]!==t3?(t4=react__WEBPACK_IMPORTED_MODULE_0__.createElement(Scrim,{className},t3),$[2]=className,$[3]=t3,$[4]=t4):t4=$[4],t4}InsertionOverlay.propTypes={showIcon:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,className:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string};const __WEBPACK_DEFAULT_EXPORT__=InsertionOverlay;InsertionOverlay.__docgenInfo={description:"",methods:[],displayName:"InsertionOverlay",props:{showIcon:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},className:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1}}}},"./packages/story-editor/src/components/tabview/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),_app__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/app/index.js"),_tooltip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_utils_usePerformanceTracking__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/utils/usePerformanceTracking.ts"),_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),_utils_noop__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/story-editor/src/utils/noop.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const Tabs=styled_components__WEBPACK_IMPORTED_MODULE_7__.Ay.ul.attrs({role:"tablist","aria-orientation":"horizontal"}).withConfig({displayName:"tabview__Tabs",componentId:"sc-10d408-0"})(["display:flex;flex-direction:row;align-items:stretch;width:100%;max-width:100%;justify-content:space-between;margin:0;padding:0;list-style:none;border-bottom:1px solid ",";"],(({theme})=>theme.colors.divider.secondary)),TabElement=styled_components__WEBPACK_IMPORTED_MODULE_7__.Ay.li.attrs((({isActive})=>({tabIndex:isActive?0:-1,role:"tab","aria-selected":isActive}))).withConfig({displayName:"tabview__TabElement",componentId:"sc-10d408-1"})(["cursor:pointer;border:none;background:none;padding:0 4px;margin:","px 12px 9px;height:","px;display:flex;align-items:center;justify-content:center;position:relative;transition:color 0.2s ease;color:",";border-radius:",";",";:hover{color:",";}"," svg{display:block;width:32px;height:32px;margin:0 -4px;transform-origin:center center;transition:transform 0.3s ease,color 0.2s ease;color:",";border-radius:",";pointer-events:none;}svg.alert{width:","px;margin-left:4px;color:",";}span,svg:not(.alert){",";}&:hover span,&:hover svg:not(.alert),&:active span,&:active svg:not(.alert){color:",";}&:focus-visible{svg:not(.alert){background-color:",";}}"],10,32,(({theme,isActive})=>isActive?theme.colors.fg.primary:theme.colors.fg.tertiary),(({theme})=>theme.borders.radius.small),(({theme})=>_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Q(theme.colors.border.focus,theme.colors.bg.secondary)),(({theme})=>theme.colors.fg.primary),(({isActive,theme})=>isActive&&(0,styled_components__WEBPACK_IMPORTED_MODULE_7__.AH)(["::after{content:'';position:absolute;background-color:",";height:2px;border-radius:1px;bottom:-10px;left:4px;right:4px;}"],theme.colors.border.selection)),(({theme})=>theme.colors.fg.tertiary),(({theme})=>theme.borders.radius.small),28,(({theme})=>theme.colors.fg.primary),(({isActive,theme})=>isActive&&`color: ${theme.colors.fg.primary}`),(({theme})=>theme.colors.fg.primary),(({theme})=>theme.colors.interactiveBg.tertiaryHover)),TabText=(0,styled_components__WEBPACK_IMPORTED_MODULE_7__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.$).attrs({as:"p",size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.$.XXXSmall}).withConfig({displayName:"tabview__TabText",componentId:"sc-10d408-2"})(["color:inherit;"]);function UnreffedTab(t0,ref){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(21);let children,placement,refId,rest,t1,tabRefs;$[0]!==t0?(({children,tooltip:t1,placement,refId,tabRefs,...rest}=t0),$[0]=t0,$[1]=children,$[2]=placement,$[3]=refId,$[4]=rest,$[5]=t1,$[6]=tabRefs):(children=$[1],placement=$[2],refId=$[3],rest=$[4],t1=$[5],tabRefs=$[6]);const tooltip=void 0===t1?null:t1,{id}=rest,eventData=id.includes("library")?_constants__WEBPACK_IMPORTED_MODULE_6__.Zy.LIBRARY_PANEL_CLICK:_constants__WEBPACK_IMPORTED_MODULE_6__.Zy.DESIGN_PANEL_CLICK,t2=tabRefs?.[refId]?.current,t3=`${refId}_tab`;let t4,t5,t6;$[7]!==eventData||$[8]!==t3?(t4={...eventData,label:t3},$[7]=eventData,$[8]=t3,$[9]=t4):t4=$[9],$[10]!==t2||$[11]!==t4?(t5={node:t2,eventData:t4},$[10]=t2,$[11]=t4,$[12]=t5):t5=$[12],(0,_utils_usePerformanceTracking__WEBPACK_IMPORTED_MODULE_5__.A)(t5),$[13]!==children||$[14]!==ref||$[15]!==rest?(t6=react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabElement,_extends({ref},rest),children),$[13]=children,$[14]=ref,$[15]=rest,$[16]=t6):t6=$[16];const tab=t6;if(null!==tooltip){let t7;return $[17]!==placement||$[18]!==tab||$[19]!==tooltip?(t7=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_4__.A,{title:tooltip,placement,isDelayed:!0},tab),$[17]=placement,$[18]=tab,$[19]=tooltip,$[20]=t7):t7=$[20],t7}return tab}const Tab=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Rf)(UnreffedTab);function TabView({getTabId=id=>id,getAriaControlsId,onTabChange=_utils_noop__WEBPACK_IMPORTED_MODULE_12__.l,onTabRefUpdated=_utils_noop__WEBPACK_IMPORTED_MODULE_12__.l,tabs=[],label="",shortcut="",tab,tabRefs,...rest}){const{isRTL}=(0,_app__WEBPACK_IMPORTED_MODULE_3__.UK)(),ref=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.li)(),focused=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.li)(),internalTabRefs=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.li)({}),focusChanged=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)((id_0=>{tabRefs?.[id_0]?.current?tabRefs[id_0].current?.focus():internalTabRefs?.current[id_0]&&internalTabRefs.current[id_0]?.focus(),focused.current=id_0}),[tabRefs]),selectTab=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)((id_1=>{focusChanged(id_1),onTabChange(id_1)}),[focusChanged,onTabChange]);(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.pP)({key:shortcut,editable:!0},(()=>selectTab(tab)),[selectTab,tab]);const focusTabByIndex=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)((index=>{const nextTab=tabs[(index+tabs.length)%tabs.length];focusChanged(nextTab.id)}),[tabs,focusChanged]),handleNavigation=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)((direction=>{const directionWithRTL=isRTL?-direction:direction,currentIndex=tabs.findIndex((({id:id_2})=>id_2===focused.current));focusTabByIndex(currentIndex+directionWithRTL)}),[isRTL,tabs,focusTabByIndex]);return(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,"left",(()=>handleNavigation(-1)),[handleNavigation]),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,"right",(()=>handleNavigation(1)),[handleNavigation]),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,["up","down"],_utils_noop__WEBPACK_IMPORTED_MODULE_12__.l,[]),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,"home",(()=>focusTabByIndex(0)),[focusTabByIndex]),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,"end",(()=>focusTabByIndex(-1)),[focusTabByIndex]),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__._h)(ref,{key:["enter","space"],allowDefault:!0},(evt=>{"tab"===evt.target.getAttribute("role")&&(selectTab(focused.current),evt.preventDefault())}),[selectTab],{}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Tabs,_extends({"aria-label":label,ref},rest),tabs.map((({id:id_3,title,icon:Icon,...tabRest})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Tab,_extends({key:id_3,ref:node=>{tabRefs?.[id_3]?tabRefs[id_3].current=node:internalTabRefs.current[id_3]=node,onTabRefUpdated(node,id_3)},id:getTabId(id_3),isActive:tab===id_3,"aria-controls":getAriaControlsId?getAriaControlsId(id_3):null,"aria-selected":tab===id_3,onClick:()=>selectTab(id_3),onFocus:()=>{focused.current=tab},refId:id_3,tabRefs},tabRest),Boolean(title)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(TabText,null,title),Boolean(Icon)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Icon,{isActive:id_3===tab})))))}UnreffedTab.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_11___default().node,tooltip:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,placement:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,refId:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,tabRefs:prop_types__WEBPACK_IMPORTED_MODULE_11___default().object};const __WEBPACK_DEFAULT_EXPORT__=TabView;TabView.__docgenInfo={description:"",methods:[],displayName:"TabView",props:{getTabId:{defaultValue:{value:"(id) => id",computed:!1},description:"",type:{name:"func"},required:!1},onTabChange:{defaultValue:{value:"function noop() {\n  return undefined;\n}",computed:!1},description:"",type:{name:"func"},required:!1},onTabRefUpdated:{defaultValue:{value:"function noop() {\n  return undefined;\n}",computed:!1},description:"",type:{name:"func"},required:!1},tabs:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},label:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},shortcut:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},getAriaControlsId:{description:"",type:{name:"func"},required:!1},tab:{description:"",type:{name:"string"},required:!0},tabRefs:{description:"",type:{name:"objectOf",value:{name:"shape",value:{current:{name:"instanceOf",value:"Element",required:!1}}}},required:!1}}}},"./packages/text-sets/src/raw lazy recursive ^\\.\\/.*\\.json$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./contact.json":["./packages/text-sets/src/raw/contact.json",9016],"./cover.json":["./packages/text-sets/src/raw/cover.json",1825],"./editorial.json":["./packages/text-sets/src/raw/editorial.json",6218],"./list.json":["./packages/text-sets/src/raw/list.json",5219],"./quote.json":["./packages/text-sets/src/raw/quote.json",8028],"./section_header.json":["./packages/text-sets/src/raw/section_header.json",2421],"./step.json":["./packages/text-sets/src/raw/step.json",5230],"./table.json":["./packages/text-sets/src/raw/table.json",8039]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((()=>__webpack_require__.t(id,19)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./packages/text-sets/src/raw lazy recursive ^\\.\\/.*\\.json$",module.exports=webpackAsyncContext}}]);