"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[6105],{"./packages/design-system/src/components/typography/list/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>List});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/typography/styles.ts");const List=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.ul.withConfig({displayName:"list__List",componentId:"sc-blyefz-0"})((({size=_theme__WEBPACK_IMPORTED_MODULE_1__.$.Small,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.AH)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],_styles__WEBPACK_IMPORTED_MODULE_2__.u,_theme__WEBPACK_IMPORTED_MODULE_3__.s({preset:theme.typography.presets.paragraph[size],theme}))))},"./packages/story-editor/src/app/taxonomy/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>taxonomyProvider,D:()=>taxonomy_useTaxonomy});var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),cleanForSlug=__webpack_require__("./packages/story-editor/src/utils/cleanForSlug.ts"),api=__webpack_require__("./packages/story-editor/src/app/api/index.ts"),story=__webpack_require__("./packages/story-editor/src/app/story/index.ts");const utils_removeDupsFromArray=(arr,key)=>arr.reduce(((acc,current)=>acc.find((term=>term[key]===current[key]))?acc:acc.concat([current])),[]),context=(0,src.q6)({state:{taxonomies:[],termCache:[],terms:[]},actions:{createTerm:()=>Promise.resolve(void 0),addSearchResultsToCache:()=>Promise.resolve(void 0),addTerms:()=>{},removeTerms:()=>{}}});function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const taxonomyProvider=function TaxonomyProvider(props){const[shouldRefetchCategories,setShouldRefetchCategories]=(0,src.J0)(!0),{updateStory:updateStory_0,terms}=(0,story.P3)((({state:{pages,story},actions:{updateStory}})=>({updateStory,isStoryLoaded:pages.length>0,terms:story.terms||[]}))),[hasTaxonomies,setHasTaxonomies]=(0,src.J0)(!1),[taxonomies,setTaxonomies]=(0,src.J0)([]),[termCache,setTermCache]=(0,src.J0)([]),{actions:{getTaxonomyTerm,createTaxonomyTerm,getTaxonomies}}=(0,api.M1)();(0,src.vJ)((()=>{!hasTaxonomies&&getTaxonomies&&(async()=>{try{const result=await getTaxonomies();setTaxonomies(result)}catch(e){e instanceof Error&&console.error(e.message)}finally{setHasTaxonomies(!0)}})()}),[hasTaxonomies,getTaxonomies]);const addTerms=(0,src.hb)((newTerms=>{if(updateStory_0){updateStory_0({properties:story_0=>{const currentTerms=story_0?.terms||[];return{...story_0,terms:utils_removeDupsFromArray([...currentTerms,...newTerms],"id")}}}),setTermCache((cache=>utils_removeDupsFromArray([...cache,...newTerms],"id")))}}),[updateStory_0]),removeTerms=(0,src.hb)((deleteTerms=>{if(updateStory_0){const removeTermsID=deleteTerms.map((({id})=>id));updateStory_0({properties:story_1=>{const newAssignedTerms=(story_1?.terms||[]).filter((({id:id_0})=>!removeTermsID.includes(id_0)));return{...story_1,terms:newAssignedTerms}}})}}),[updateStory_0]),addSearchResultsToCache=(0,src.hb)((async({taxonomy,args,addNameToSelection=!1})=>{let termResults=[];const termsEndpoint=taxonomy?.restPath;if(!termsEndpoint||!getTaxonomyTerm)return[];try{termResults=await getTaxonomyTerm(termsEndpoint,args)}catch(e_0){e_0 instanceof Error&&console.error(e_0.message)}if(termResults.length<1)return termResults;if(setTermCache((cache_0=>cache_0?utils_removeDupsFromArray([...cache_0,...termResults],"id"):termResults)),addNameToSelection&&args.search){const selectedTermSlug=(0,cleanForSlug.A)(args.search),selectedTerm=termResults.find((term=>term.slug===selectedTermSlug));selectedTerm&&addTerms([selectedTerm])}return termResults}),[getTaxonomyTerm,addTerms]),createTerm=(0,src.hb)((async({taxonomy:taxonomy_0,termName,parent,addToSelection=!1})=>{const data={name:termName};parent?.id&&(data.parent=parent.id,data.slug=`${parent.slug}-${(0,cleanForSlug.A)(data.name)}`);const preEmptiveSlug=data?.slug||(0,cleanForSlug.A)(termName)||"",cachedTerm=termCache.find((term_0=>term_0.slug===preEmptiveSlug&&term_0.taxonomy===taxonomy_0.slug));if(cachedTerm)return void(addToSelection&&addTerms([cachedTerm]));const termsEndpoint_0=taxonomy_0?.restPath;if(termsEndpoint_0&&createTaxonomyTerm)try{const newTerm=await createTaxonomyTerm(termsEndpoint_0,data);addToSelection&&addTerms([newTerm])}catch(e_1){"term_exists"===e_1.code&&addSearchResultsToCache({taxonomy:taxonomy_0,args:{search:termName},addNameToSelection:addToSelection})}}),[createTaxonomyTerm,termCache,addSearchResultsToCache,addTerms]);(0,src.vJ)((()=>{if(shouldRefetchCategories&&taxonomies?.length){taxonomies.filter((taxonomy_1=>taxonomy_1.hierarchical)).forEach((taxonomy_2=>{addSearchResultsToCache({taxonomy:taxonomy_2,args:{per_page:-1}})})),setShouldRefetchCategories(!1)}}),[addSearchResultsToCache,shouldRefetchCategories,taxonomies]);const value=(0,src.Kr)((()=>({state:{taxonomies,termCache,terms},actions:{createTerm,addSearchResultsToCache,addTerms,removeTerms}})),[termCache,terms,taxonomies,createTerm,addSearchResultsToCache,addTerms,removeTerms]);return react.createElement(context.Provider,_extends({},props,{value}))};const taxonomy_useTaxonomy=function useTaxonomy(t0){const selector=void 0===t0?src.D_:t0;return(0,src.i7)(context,selector)}},"./packages/story-editor/src/components/panels/document/taxonomies/taxonomies.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>taxonomies});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),app_taxonomy=__webpack_require__("./packages/story-editor/src/app/taxonomy/index.ts"),panel=__webpack_require__("./packages/story-editor/src/components/panels/panel/index.js"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),expandPresetStyles=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),dropdown=__webpack_require__("./packages/design-system/src/components/dropDown/dropdown.tsx"),src=__webpack_require__("./packages/react/src/index.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts");const TaxonomyPropType=prop_types_default().shape({capabilities:prop_types_default().object,description:prop_types_default().string,hierarchical:prop_types_default().bool,labels:prop_types_default().object,name:prop_types_default().string.isRequired,restBase:prop_types_default().string.isRequired,showCloud:prop_types_default().bool,slug:prop_types_default().string.isRequired,types:prop_types_default().arrayOf(prop_types_default().string),visibility:prop_types_default().object}),ContentHeading=(0,styled_components_browser_esm.Ay)(headline.$).attrs({as:"h3",size:types.$.XXXSmall}).withConfig({displayName:"shared__ContentHeading",componentId:"sc-1pfee07-0"})(["margin:4px 0 16px;font-weight:",";"],(({theme})=>theme.typography.weight.regular)),LinkButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({variant:constants.Ak.Link}).withConfig({displayName:"shared__LinkButton",componentId:"sc-1pfee07-1"})([""," margin-bottom:16px;font-weight:500;"],expandPresetStyles.x((({link},{XSmall})=>link[XSmall]))),SiblingBorder=styled_components_browser_esm.Ay.div.withConfig({displayName:"shared__SiblingBorder",componentId:"sc-1pfee07-2"})(["padding-left:16px;padding-right:16px;& + &{border-top:1px solid ",";padding-top:16px;padding-bottom:8px;}"],(({theme})=>theme.colors.divider.tertiary)),WordCloud={Heading:(0,styled_components_browser_esm.Ay)(ContentHeading).attrs({as:"h4"}).withConfig({displayName:"shared__Heading",componentId:"sc-1pfee07-3"})(["margin-bottom:4px;"]),Wrapper:styled_components_browser_esm.Ay.div.withConfig({displayName:"shared__Wrapper",componentId:"sc-1pfee07-4"})(["padding:18px 0px;"]),List:styled_components_browser_esm.Ay.ul.withConfig({displayName:"shared__List",componentId:"sc-1pfee07-5"})(["all:unset;cursor:pointer;"]),ListItem:styled_components_browser_esm.Ay.li.withConfig({displayName:"shared__ListItem",componentId:"sc-1pfee07-6"})(["all:unset;"]),Word:(0,styled_components_browser_esm.Ay)(LinkButton).withConfig({displayName:"shared__Word",componentId:"sc-1pfee07-7"})(["margin:0;display:revert;"])},NO_PARENT_VALUE="NO_PARENT_VALUE",ContentArea=styled_components_browser_esm.Ay.div.withConfig({displayName:"HierarchicalTermSelector__ContentArea",componentId:"sc-17x36f5-0"})(["label,* > label{",";color:",";}"],(({theme})=>expandPresetStyles.s({preset:theme.typography.presets.label[types.$.Small],theme})),(({theme})=>theme.colors.fg.secondary)),AddNewCategoryForm=styled_components_browser_esm.Ay.form.withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryForm",componentId:"sc-17x36f5-1"})(["margin:24px 0 16px;"]),ButtonContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"HierarchicalTermSelector__ButtonContainer",componentId:"sc-17x36f5-2"})(["display:flex;gap:8px;"]),Label=(0,styled_components_browser_esm.Ay)(typography_text.E.Label).attrs({size:types.$.Small}).withConfig({displayName:"HierarchicalTermSelector__Label",componentId:"sc-17x36f5-3"})(["display:inline-block;margin:12px 0;"]),AddNewCategoryButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({variant:constants.Ak.Rectangle,size:constants.Mp.Small,type:constants.VQ.Secondary}).withConfig({displayName:"HierarchicalTermSelector__AddNewCategoryButton",componentId:"sc-17x36f5-4"})(["margin-top:20px;"]);function HierarchicalTermSelector(t0){const $=(0,dist.c)(113),{noParentId:t1,taxonomy,canCreateTerms}=t0,noParentId=void 0===t1?NO_PARENT_VALUE:t1,{createTerm:createTerm_0,termCache:termCache_0,terms:terms_0,addTerms:addTerms_0,removeTerms:removeTerms_0}=(0,app_taxonomy.D)(_temp);let t2,t3;$[0]!==taxonomy.slug||$[1]!==termCache_0||$[2]!==terms_0?(t2=()=>termCache_0?termCache_0.filter((term=>term.taxonomy===taxonomy.slug)).map((category=>({id:category.id,parent:category.parent,value:category.id,label:category.name,checked:!!terms_0&&terms_0.map(_temp2).includes(category.id),slug:category.slug}))):[],$[0]=taxonomy.slug,$[1]=termCache_0,$[2]=terms_0,$[3]=t2):t2=$[3],$[4]!==taxonomy||$[5]!==termCache_0||$[6]!==terms_0?(t3=[taxonomy,termCache_0,terms_0],$[4]=taxonomy,$[5]=termCache_0,$[6]=terms_0,$[7]=t3):t3=$[7];const categories=(0,src.Kr)(t2,t3),[showAddNewCategory,setShowAddNewCategory]=(0,src.J0)(!1),[newCategoryName,setNewCategoryName]=(0,src.J0)(""),[selectedParent,setSelectedParent]=(0,src.J0)(noParentId);let t4;$[8]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[8]=t4):t4=$[8];const dropdownId=(0,src.Kr)(v4.A,t4),[hasFocus,setHasFocus]=(0,src.J0)(!1),formRef=(0,src.li)(),toggleRef=(0,src.li)(),[toggleFocus,setToggleFocus]=(0,src.J0)(!1),[searchText,setSearchText]=(0,src.J0)("");let t5,t6;$[9]!==setSearchText?(t5=value=>setSearchText(value),$[9]=setSearchText,$[10]=t5):t5=$[10],$[11]===Symbol.for("react.memo_cache_sentinel")?(t6=[],$[11]=t6):t6=$[11];const handleInputChange=(0,src.hb)(t5,t6),speak=(0,useLiveRegion.A)("assertive");let t7,t8;$[12]!==noParentId||$[13]!==setNewCategoryName||$[14]!==setSelectedParent?(t7=()=>{setNewCategoryName(""),setSelectedParent(noParentId)},$[12]=noParentId,$[13]=setNewCategoryName,$[14]=setSelectedParent,$[15]=t7):t7=$[15],$[16]!==noParentId?(t8=[noParentId],$[16]=noParentId,$[17]=t8):t8=$[17];const resetInputs=(0,src.hb)(t7,t8);let t10,t9;$[18]!==addTerms_0||$[19]!==removeTerms_0||$[20]!==taxonomy.slug||$[21]!==termCache_0?(t9=(_evt,t11)=>{const{id:id_0,checked}=t11,term_0=termCache_0.find((category_0=>category_0.id===id_0&&category_0.taxonomy===taxonomy.slug));checked?addTerms_0([term_0]):removeTerms_0([term_0])},t10=[termCache_0,taxonomy.slug,addTerms_0,removeTerms_0],$[18]=addTerms_0,$[19]=removeTerms_0,$[20]=taxonomy.slug,$[21]=termCache_0,$[22]=t10,$[23]=t9):(t10=$[22],t9=$[23]);const handleClickCategory=(0,src.hb)(t9,t10);let t11,t12;$[24]!==resetInputs||$[25]!==setHasFocus||$[26]!==setShowAddNewCategory||$[27]!==setToggleFocus||$[28]!==showAddNewCategory?(t11=()=>{setShowAddNewCategory(!showAddNewCategory),resetInputs(),setHasFocus(!showAddNewCategory),setToggleFocus(showAddNewCategory)},$[24]=resetInputs,$[25]=setHasFocus,$[26]=setShowAddNewCategory,$[27]=setToggleFocus,$[28]=showAddNewCategory,$[29]=t11):t11=$[29],$[30]!==resetInputs||$[31]!==showAddNewCategory?(t12=[resetInputs,showAddNewCategory],$[30]=resetInputs,$[31]=showAddNewCategory,$[32]=t12):t12=$[32];const handleToggleNewCategory=(0,src.hb)(t11,t12);let t13,t14;$[33]!==setNewCategoryName?(t13=evt=>{setNewCategoryName(evt.target.value)},$[33]=setNewCategoryName,$[34]=t13):t13=$[34],$[35]===Symbol.for("react.memo_cache_sentinel")?(t14=[],$[35]=t14):t14=$[35];const handleChangeNewCategoryName=(0,src.hb)(t13,t14);let t15,t16;$[36]!==categories||$[37]!==selectedParent?(t15=()=>categories.find((category_1=>category_1.id===selectedParent))?.slug,t16=[selectedParent,categories],$[36]=categories,$[37]=selectedParent,$[38]=t15,$[39]=t16):(t15=$[38],t16=$[39]);const selectedParentSlug=(0,src.Kr)(t15,t16);let t17,t18;$[40]!==createTerm_0||$[41]!==newCategoryName||$[42]!==noParentId||$[43]!==resetInputs||$[44]!==selectedParent||$[45]!==selectedParentSlug||$[46]!==setShowAddNewCategory||$[47]!==setToggleFocus||$[48]!==showAddNewCategory||$[49]!==speak||$[50]!==taxonomy?(t17=evt_0=>{evt_0.preventDefault();createTerm_0({taxonomy,termName:newCategoryName,parent:{id:selectedParent===noParentId?0:selectedParent,slug:selectedParentSlug},addToSelection:!0}),speak((0,sprintf.A)((0,i18n.__)("%s added.","web-stories"),taxonomy.labels.singular_name)),setShowAddNewCategory(!1),resetInputs(),setToggleFocus(showAddNewCategory)},$[40]=createTerm_0,$[41]=newCategoryName,$[42]=noParentId,$[43]=resetInputs,$[44]=selectedParent,$[45]=selectedParentSlug,$[46]=setShowAddNewCategory,$[47]=setToggleFocus,$[48]=showAddNewCategory,$[49]=speak,$[50]=taxonomy,$[51]=t17):t17=$[51],$[52]!==createTerm_0||$[53]!==newCategoryName||$[54]!==noParentId||$[55]!==resetInputs||$[56]!==selectedParent||$[57]!==selectedParentSlug||$[58]!==showAddNewCategory||$[59]!==speak||$[60]!==taxonomy?(t18=[createTerm_0,speak,newCategoryName,noParentId,resetInputs,selectedParent,showAddNewCategory,taxonomy,selectedParentSlug],$[52]=createTerm_0,$[53]=newCategoryName,$[54]=noParentId,$[55]=resetInputs,$[56]=selectedParent,$[57]=selectedParentSlug,$[58]=showAddNewCategory,$[59]=speak,$[60]=taxonomy,$[61]=t18):t18=$[61];const handleSubmit=(0,src.hb)(t17,t18);let t19,t20;$[62]!==setSelectedParent?(t19=(_evt_0,menuItem)=>setSelectedParent(menuItem),$[62]=setSelectedParent,$[63]=t19):t19=$[63],$[64]===Symbol.for("react.memo_cache_sentinel")?(t20=[],$[64]=t20):t20=$[64];const handleParentSelect=(0,src.hb)(t19,t20);let t21,t22,t23,t24,t25,t26;$[65]!==formRef.current||$[66]!==handleSubmit?(t21=()=>{const node=formRef.current;if(node){const handleEnter=evt_1=>{"Enter"===evt_1.key&&handleSubmit(evt_1)};return node.addEventListener("keypress",handleEnter),()=>{node.removeEventListener("keypress",handleEnter)}}return null},$[65]=formRef.current,$[66]=handleSubmit,$[67]=t21):t21=$[67],$[68]!==formRef||$[69]!==handleSubmit?(t22=[handleSubmit,formRef],$[68]=formRef,$[69]=handleSubmit,$[70]=t22):t22=$[70],(0,src.vJ)(t21,t22),$[71]!==toggleFocus||$[72]!==toggleRef?(t23=()=>{toggleFocus&&toggleRef.current.focus()},$[71]=toggleFocus,$[72]=toggleRef,$[73]=t23):t23=$[73],$[74]!==toggleFocus?(t24=[toggleFocus],$[74]=toggleFocus,$[75]=t24):t24=$[75],(0,src.vJ)(t23,t24),$[76]!==categories||$[77]!==searchText?(t25=()=>(0,components_form.FY)(categories,searchText),t26=[categories,searchText],$[76]=categories,$[77]=searchText,$[78]=t25,$[79]=t26):(t25=$[78],t26=$[79]);const orderedCategories=(0,src.Kr)(t25,t26);let t27,t28;$[80]!==orderedCategories?(t27=()=>[{value:NO_PARENT_VALUE,label:(0,i18n._x)("None","parent taxonomy","web-stories")}].concat(orderedCategories).map(_temp4),t28=[orderedCategories],$[80]=orderedCategories,$[81]=t27,$[82]=t28):(t27=$[81],t28=$[82]);const dropdownCategories=(0,src.Kr)(t27,t28);let t29;$[83]!==taxonomy.labels.name?(t29=react.createElement(ContentHeading,null,taxonomy.labels.name),$[83]=taxonomy.labels.name,$[84]=t29):t29=$[84];const t30=taxonomy.labels?.notFound;let t31,t32,t33;return $[85]!==handleClickCategory||$[86]!==handleInputChange||$[87]!==orderedCategories||$[88]!==searchText||$[89]!==t30||$[90]!==taxonomy.labels.searchItems?(t31=react.createElement(components_form.Cc,{inputValue:searchText,onInputChange:handleInputChange,label:taxonomy.labels.searchItems,options:orderedCategories,onChange:handleClickCategory,noOptionsText:t30}),$[85]=handleClickCategory,$[86]=handleInputChange,$[87]=orderedCategories,$[88]=searchText,$[89]=t30,$[90]=taxonomy.labels.searchItems,$[91]=t31):t31=$[91],$[92]!==canCreateTerms||$[93]!==dropdownCategories||$[94]!==dropdownId||$[95]!==formRef||$[96]!==handleChangeNewCategoryName||$[97]!==handleParentSelect||$[98]!==handleSubmit||$[99]!==handleToggleNewCategory||$[100]!==hasFocus||$[101]!==newCategoryName||$[102]!==selectedParent||$[103]!==showAddNewCategory||$[104]!==taxonomy.labels.addNewItem||$[105]!==taxonomy.labels.newItemName||$[106]!==taxonomy.labels.parentItem||$[107]!==toggleRef?(t32=canCreateTerms?react.createElement(react.Fragment,null,!showAddNewCategory&&react.createElement(LinkButton,{ref:toggleRef,"aria-expanded":!1,onClick:handleToggleNewCategory},taxonomy.labels.addNewItem),showAddNewCategory?react.createElement(AddNewCategoryForm,{ref:formRef,onSubmit:handleSubmit},react.createElement(input.A,{name:taxonomy.labels.newItemName,label:taxonomy.labels.newItemName,value:newCategoryName,onChange:handleChangeNewCategoryName,hasFocus}),react.createElement(Label,{htmlFor:dropdownId},taxonomy.labels.parentItem),react.createElement(dropdown.A,{id:dropdownId,ariaLabel:taxonomy.labels.parentItem,options:dropdownCategories,selectedValue:selectedParent,onMenuItemClick:handleParentSelect}),react.createElement(ButtonContainer,null,react.createElement(AddNewCategoryButton,{disabled:!newCategoryName.length,type:"submit"},taxonomy.labels.addNewItem),react.createElement(AddNewCategoryButton,{"aria-expanded":!0,onClick:handleToggleNewCategory},(0,i18n.__)("Cancel","web-stories")))):null):null,$[92]=canCreateTerms,$[93]=dropdownCategories,$[94]=dropdownId,$[95]=formRef,$[96]=handleChangeNewCategoryName,$[97]=handleParentSelect,$[98]=handleSubmit,$[99]=handleToggleNewCategory,$[100]=hasFocus,$[101]=newCategoryName,$[102]=selectedParent,$[103]=showAddNewCategory,$[104]=taxonomy.labels.addNewItem,$[105]=taxonomy.labels.newItemName,$[106]=taxonomy.labels.parentItem,$[107]=toggleRef,$[108]=t32):t32=$[108],$[109]!==t29||$[110]!==t31||$[111]!==t32?(t33=react.createElement(ContentArea,null,t29,t31,t32),$[109]=t29,$[110]=t31,$[111]=t32,$[112]=t33):t33=$[112],t33}function _temp4(t0){const{$level,label,...opt}=t0;return{...opt,label:`${Array.from({length:$level},_temp3).join("")} ${label}`}}function _temp3(){return"â€” "}function _temp2(t0){const{id}=t0;return id}function _temp(t0){const{state:t1,actions:t2}=t0,{termCache,terms}=t1,{createTerm,addTerms,removeTerms}=t2;return{createTerm,addTerms,removeTerms,termCache,terms}}HierarchicalTermSelector.propTypes={noParentId:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),taxonomy:TaxonomyPropType,canCreateTerms:prop_types_default().bool};const taxonomies_HierarchicalTermSelector=HierarchicalTermSelector;var outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),styled=__webpack_require__("./packages/design-system/src/components/input/styled.ts"),list=__webpack_require__("./packages/design-system/src/components/typography/list/index.ts"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),range=__webpack_require__("./packages/units/src/range.ts"),cleanForSlug=__webpack_require__("./packages/story-editor/src/utils/cleanForSlug.ts");function formatTag(tag){return tag.replace(/( +)/g," ").trim()}function uniquesOnly(arr){const slugMap=new Map;return arr.forEach((item=>{slugMap.set((0,cleanForSlug.A)(item),item)})),[...slugMap.values()]}const ACTIONS_UPDATE_VALUE="updateValue",ACTIONS_SUBMIT_VALUE="submitValue",ACTIONS_REMOVE_TAG="removeTag",ACTIONS_RESET_OFFSET="resetOffset",ACTIONS_RESET_VALUE="resetValue",ACTIONS_INCREMENT_OFFSET="incrementOffset",ACTIONS_DECREMENT_OFFSET="decrementOffset",ACTIONS_UPDATE_TAGS="updateTags";const tags_reducer=function reducer(state,action){switch(action.type){case ACTIONS_UPDATE_VALUE:{const values=action.payload.split(",");if(values.length<=1)return{...state,value:action.payload};const newTags=values.slice(0,-1).map(formatTag).filter((tag=>tag.length)),value=values[values.length-1];return function subsetAOfB(a=[],b=[]){return a.forEach((v=>b.includes(v)))}(newTags,state.tags)?{...state,value}:{...state,value,tagBuffer:uniquesOnly([...state.tags.slice(0,state.tags.length-state.offset),...newTags,...state.tags.slice(state.tags.length-state.offset)])}}case ACTIONS_SUBMIT_VALUE:{const newTag=formatTag(action?.payload||state.value);return""===newTag||state.tags.includes(newTag)?{...state,value:""}:{...state,value:"",tagBuffer:uniquesOnly([...state.tags.slice(0,state.tags.length-state.offset),newTag,...state.tags.slice(state.tags.length-state.offset)])}}case ACTIONS_REMOVE_TAG:{const removedTagIndex="string"==typeof action.payload?state.tags.findIndex((tag=>tag===action.payload)):state.tags.length-1-state.offset;return removedTagIndex<0?state:{...state,tagBuffer:[...state.tags.slice(0,removedTagIndex),...state.tags.slice(removedTagIndex+1,state.tags.length)]}}case ACTIONS_INCREMENT_OFFSET:return{...state,offset:(0,range.qE)(state.offset+1,{MIN:0,MAX:state.tags.length})};case ACTIONS_DECREMENT_OFFSET:return{...state,offset:(0,range.qE)(state.offset-1,{MIN:0,MAX:state.tags.length})};case ACTIONS_RESET_OFFSET:return{...state,offset:0};case ACTIONS_RESET_VALUE:return{...state,value:""};case ACTIONS_UPDATE_TAGS:{const stateTagsWithSlugs=state.tags.map((name=>[(0,cleanForSlug.A)(name),name])),payloadTagsWithSlugs=action.payload.map((name=>[(0,cleanForSlug.A)(name),name]));if(function deepEquals(a=[],b=[]){return a.length===b.length&&a.every((item=>b.includes(item)))}(stateTagsWithSlugs.map((([slug])=>slug)),payloadTagsWithSlugs.map((([slug])=>slug))))return state;const tagsToPersist=stateTagsWithSlugs.filter((([tagSlug])=>payloadTagsWithSlugs.map((([slug])=>slug)).includes(tagSlug))).map((([,name])=>name)),tagsToAdd=payloadTagsWithSlugs.filter((([tagSlug])=>!stateTagsWithSlugs.map((([slug])=>slug)).includes(tagSlug))).map((([,name])=>name));return{...state,tags:[...tagsToPersist,...tagsToAdd],tagBuffer:null}}default:return state}};var cross=__webpack_require__("./packages/design-system/src/icons/cross.svg"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");const Dismiss=styled_components_browser_esm.Ay.button.withConfig({displayName:"tag__Dismiss",componentId:"sc-14unxs6-0"})(["all:unset;cursor:pointer;border-radius:",";",";width:22px;min-width:22px;height:22px;display:flex;justify-content:center;align-items:center;svg{height:20px;width:20px;margin:auto;}"],(({theme})=>theme.borders.radius.small),outline.Q),Token=styled_components_browser_esm.Ay.span.withConfig({displayName:"tag__Token",componentId:"sc-14unxs6-1"})([""," position:relative;display:flex;align-items:center;padding:2px;margin:2px;max-width:calc(100% - 4px);height:32px;"],(({theme})=>(0,styled_components_browser_esm.AH)(["color:",";border:1px solid ",";border-radius:",";"],theme.colors.fg.primary,theme.colors.border.defaultNormal,theme.borders.radius.small))),TokenText=(0,styled_components_browser_esm.Ay)(typography_text.E.Span).attrs({size:types.$.Small}).withConfig({displayName:"tag__TokenText",componentId:"sc-14unxs6-2"})(["padding-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function Tag(t0){const $=(0,dist.c)(13),{children,onDismiss}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=[],$[0]=t1):t1=$[0];const id=(0,src.Kr)(tag_temp,t1);let t2,t3,t4,t5,t6,t7;return $[1]!==children||$[2]!==id?(t2=react.createElement(TokenText,{id},children),$[1]=children,$[2]=id,$[3]=t2):t2=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t3=(0,i18n.__)("Remove Tag","web-stories"),$[4]=t3):t3=$[4],$[5]===Symbol.for("react.memo_cache_sentinel")?(t4=(0,i18n.__)("Remove Tag","web-stories"),$[5]=t4):t4=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t5=react.createElement(cross.A,null),$[6]=t5):t5=$[6],$[7]!==id||$[8]!==onDismiss?(t6=react.createElement(tooltip.A,{title:t3,placement:popup_constants.W.Bottom,hasTail:!0,popupZIndexOverride:zIndex.Xl},react.createElement(Dismiss,{onClick:onDismiss,"aria-label":t4,"aria-describedby":id},t5)),$[7]=id,$[8]=onDismiss,$[9]=t6):t6=$[9],$[10]!==t2||$[11]!==t6?(t7=react.createElement(Token,{"data-testid":"flat-term-token"},t2,t6),$[10]=t2,$[11]=t6,$[12]=t7):t7=$[12],t7}function tag_temp(){return(0,v4.A)()}Tag.propTypes={children:prop_types_default().node.isRequired,onDismiss:prop_types_default().func.isRequired};const tag=Tag;function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const INPUT_KEY=(0,v4.A)(),Border=styled_components_browser_esm.Ay.div.withConfig({displayName:"input__Border",componentId:"sc-1nuo5lh-0"})([""," display:flex;flex-direction:column;margin-bottom:6px;"],(({theme,isInputFocused})=>(0,styled_components_browser_esm.AH)(["color:",";border:1px solid ",";border-radius:",";",";"],theme.colors.fg.primary,theme.colors.border.defaultNormal,theme.borders.radius.small,isInputFocused&&outline.g))),InputWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"input__InputWrapper",componentId:"sc-1nuo5lh-1"})(["display:flex;flex-wrap:wrap;padding:0;"]),TextInput=(0,styled_components_browser_esm.Ay)(styled.aE).attrs({type:"text"}).withConfig({displayName:"input__TextInput",componentId:"sc-1nuo5lh-2"})(["width:auto;flex-grow:1;height:32px;margin:2px 0;padding-left:4px;"]),SuggestionList=(0,styled_components_browser_esm.Ay)(list.B).withConfig({displayName:"input__SuggestionList",componentId:"sc-1nuo5lh-3"})(["max-height:120px;overflow-y:scroll;border-top:",";display:block;list-style-type:none;width:100%;padding:6px 4px 4px;margin-top:6px;li{cursor:pointer;padding:4px;width:100%;"," border-radius:",";&:hover{background-color:",";}}"],(({theme})=>`1px solid ${theme.colors.border.defaultNormal}`),outline.Q(),(({theme})=>theme.borders.radius.small),(({theme})=>theme.colors.bg.tertiary));const tags_input=function Input({suggestedTerms=[],onTagsChange,onInputChange,suggestedTermsLabel,tagDisplayTransformer,tokens=[],onUndo=noop.l,...props}){const[{value,tags,offset,tagBuffer},dispatch]=(0,src.WO)(tags_reducer,{value:"",tags:[...tokens],tagBuffer:null,offset:0}),[isInputFocused,setIsInputFocused]=(0,src.J0)(!1),[isSuggestionsOpen,setIsSuggestionsOpen]=(0,src.J0)(!1),inputRef=(0,src.li)(),menuRef=(0,src.li)(),containerRef=(0,src.li)();(0,src.vJ)((()=>{dispatch({type:ACTIONS_UPDATE_TAGS,payload:tokens})}),[tokens]);const suggestionListId=(0,v4.A)(),totalSuggestions=suggestedTerms.length;(0,src.vJ)((()=>{setIsSuggestionsOpen(totalSuggestions>0)}),[totalSuggestions]);const onTagChangeRef=(0,src.li)(onTagsChange);onTagChangeRef.current=onTagsChange,(0,src.vJ)((()=>{tagBuffer&&onTagChangeRef.current?.(tagBuffer)}),[tagBuffer]);const onInputChangeRef=(0,src.li)(onInputChange);onInputChangeRef.current=onInputChange,(0,src.vJ)((()=>{onInputChangeRef.current?.(value)}),[value]);const{handleFocus,handleBlur,handleKeyDown,handleChange,removeTag}=(0,src.Kr)((()=>({handleKeyDown:e=>{""===e.target.value&&("ArrowLeft"===e.key&&dispatch({type:ACTIONS_INCREMENT_OFFSET}),"ArrowRight"===e.key&&dispatch({type:ACTIONS_DECREMENT_OFFSET}),"Backspace"===e.key&&dispatch({type:ACTIONS_REMOVE_TAG}),"z"===e.key&&e.metaKey&&onUndo(e)),"ArrowDown"===e.key&&suggestedTerms.length>0&&menuRef?.current?.firstChild?.focus(),["Comma",",","Enter"].includes(e.key)&&dispatch({type:ACTIONS_SUBMIT_VALUE})},handleChange:e_0=>{dispatch({type:ACTIONS_UPDATE_VALUE,payload:e_0.target.value})},removeTag:tag=>()=>{dispatch({type:ACTIONS_REMOVE_TAG,payload:tag}),inputRef?.current.focus()},handleFocus:()=>{setIsInputFocused(!0)},handleBlur:()=>{dispatch({type:ACTIONS_RESET_OFFSET}),setIsInputFocused(!1)}})),[onUndo,suggestedTerms]),renderedTags=tagBuffer||tags,handleTagSelectedFromSuggestions=(0,src.hb)(((e_1,selectedValue)=>{e_1.preventDefault(),setIsSuggestionsOpen(!1),dispatch({type:ACTIONS_SUBMIT_VALUE,payload:selectedValue}),inputRef?.current.focus()}),[]),handleSuggestionKeyDown=(0,src.hb)(((e_2,index,name)=>{const nextChild=index+1,previousChild=index-1;"ArrowDown"===e_2.key&&nextChild<totalSuggestions&&menuRef?.current?.children?.[nextChild]?.focus(),"ArrowUp"===e_2.key&&(previousChild<0?inputRef?.current.focus():menuRef?.current?.children?.[previousChild]?.focus()),"Enter"===e_2.key&&handleTagSelectedFromSuggestions(e_2,name)}),[handleTagSelectedFromSuggestions,totalSuggestions]);return react.createElement(Border,{ref:containerRef,isInputFocused},react.createElement(InputWrapper,null,[...renderedTags.slice(0,renderedTags.length-offset),INPUT_KEY,...renderedTags.slice(renderedTags.length-offset)].map((tag_0=>tag_0===INPUT_KEY?react.createElement(TextInput,_extends({key:INPUT_KEY},props,{value,onKeyDown:handleKeyDown,onChange:handleChange,onFocus:handleFocus,onBlur:handleBlur,size:"4",ref:inputRef,autoComplete:isSuggestionsOpen?"off":"on","aria-expanded":isSuggestionsOpen,"aria-autocomplete":"list","aria-owns":isSuggestionsOpen?suggestionListId:null,role:"combobox"})):react.createElement(tag,{key:tag_0,onDismiss:removeTag(tag_0)},tagDisplayTransformer(tag_0)||tag_0)))),isSuggestionsOpen&&react.createElement(SuggestionList,{"aria-label":suggestedTermsLabel,role:"listbox",ref:menuRef,id:suggestionListId,"data-testid":"suggested_terms_list"},suggestedTerms.map((({name:name_0,id},index_0)=>react.createElement("li",{key:id,"aria-selected":value===name_0,role:"option",tabIndex:0,onClick:e_3=>handleTagSelectedFromSuggestions(e_3,name_0),onKeyDown:e_4=>handleSuggestionKeyDown(e_4,index_0,name_0)},name_0)))))},tags={Input:tags_input,Description:(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).attrs({size:types.$.Small}).withConfig({displayName:"description",componentId:"sc-1gy988t-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary)),Label:(0,styled_components_browser_esm.Ay)(typography_text.E.Label).attrs({size:types.$.Small}).withConfig({displayName:"label",componentId:"sc-1y7bq6c-0"})(["display:inline-block;color:",";margin-bottom:8px;"],(({theme})=>theme.colors.fg.secondary))};function FlatTermSelector(t0){const $=(0,dist.c)(68),{taxonomy,canCreateTerms}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=[],$[0]=t1):t1=$[0];const[mostUsed,setMostUsed]=(0,src.J0)(t1),{createTerm:createTerm_0,termCache:termCache_0,addSearchResultsToCache:addSearchResultsToCache_0,terms:t2,addTerms:addTerms_0,removeTerms:removeTerms_0}=(0,app_taxonomy.D)(FlatTermSelector_temp);let t3;$[1]!==t2?(t3=void 0===t2?[]:t2,$[1]=t2,$[2]=t3):t3=$[2];const terms_0=t3,{undo:undo_0}=(0,app.W6)(FlatTermSelector_temp2);let t4;$[3]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[3]=t4):t4=$[3];const[searchResults,setSearchResults]=(0,src.J0)(t4),speak=(0,useLiveRegion.A)("assertive");let t5,t6;$[4]!==addTerms_0||$[5]!==canCreateTerms||$[6]!==createTerm_0||$[7]!==removeTerms_0||$[8]!==taxonomy||$[9]!==termCache_0||$[10]!==terms_0?(t5=termNames=>{const currentTerms=termCache_0.filter((term=>term.taxonomy===taxonomy.slug&&termNames.includes(term.name))),removeToTerms=terms_0.filter((term_0=>term_0.taxonomy===taxonomy.slug&&!termNames.includes(term_0.name)));if(removeTerms_0(removeToTerms),addTerms_0(currentTerms),!canCreateTerms)return;const termNamesNotInCache=termNames.map(FlatTermSelector_temp3).filter((t7=>{const[slug]=t7;return!termCache_0.filter((term_1=>term_1.taxonomy===taxonomy.slug)).map(FlatTermSelector_temp4).includes(slug)})).map(_temp5);termNamesNotInCache.forEach((name_1=>createTerm_0({taxonomy,termName:name_1,parent:null,addToSelection:!0})))},t6=[termCache_0,removeTerms_0,terms_0,addTerms_0,canCreateTerms,createTerm_0,taxonomy],$[4]=addTerms_0,$[5]=canCreateTerms,$[6]=createTerm_0,$[7]=removeTerms_0,$[8]=taxonomy,$[9]=termCache_0,$[10]=terms_0,$[11]=t5,$[12]=t6):(t5=$[11],t6=$[12]);const handleFreeformTermsChange=(0,src.hb)(t5,t6);let t7;$[13]!==addSearchResultsToCache_0||$[14]!==setSearchResults||$[15]!==speak||$[16]!==taxonomy?(t7=async value=>{if(0===value.length)return void setSearchResults([]);if(value.length<3)return;const results=await addSearchResultsToCache_0({taxonomy,args:{search:value,per_page:20}});setSearchResults(results);const count=results.length,message=(0,sprintf.A)((0,i18n._n)("%d result found.","%d results found.",count,"web-stories"),count);speak(message)},$[13]=addSearchResultsToCache_0,$[14]=setSearchResults,$[15]=speak,$[16]=taxonomy,$[17]=t7):t7=$[17];const handleFreeformInputChange=(0,src.YQ)(t7,300);let t8,t9;$[18]!==taxonomy.slug||$[19]!==terms_0?(t8=()=>terms_0.filter((term_2=>term_2.taxonomy===taxonomy.slug)).filter(_temp6).map(_temp7),$[18]=taxonomy.slug,$[19]=terms_0,$[20]=t8):t8=$[20],$[21]!==taxonomy||$[22]!==terms_0?(t9=[terms_0,taxonomy],$[21]=taxonomy,$[22]=terms_0,$[23]=t9):t9=$[23];const tokens=(0,src.Kr)(t8,t9);let t10,t11;$[24]!==termCache_0?(t10=tagName=>termCache_0.filter((term_5=>term_5.name===tagName))?.[0]?.name,t11=[termCache_0],$[24]=termCache_0,$[25]=t10,$[26]=t11):(t10=$[25],t11=$[26]);const termDisplayTransformer=(0,src.hb)(t10,t11);let t12,t13,t14;$[27]!==addSearchResultsToCache_0||$[28]!==setMostUsed||$[29]!==taxonomy?(t12=()=>{(async()=>{const results_0=await addSearchResultsToCache_0({taxonomy,args:{orderby:"count",order:"desc",hide_empty:!0}});setMostUsed(results_0)})()},$[27]=addSearchResultsToCache_0,$[28]=setMostUsed,$[29]=taxonomy,$[30]=t12):t12=$[30],$[31]!==addSearchResultsToCache_0||$[32]!==taxonomy?(t13=[taxonomy,addSearchResultsToCache_0],$[31]=addSearchResultsToCache_0,$[32]=taxonomy,$[33]=t13):t13=$[33],(0,src.vJ)(t12,t13),$[34]!==taxonomy.labels.name?(t14=react.createElement(ContentHeading,null,taxonomy.labels.name),$[34]=taxonomy.labels.name,$[35]=t14):t14=$[35];const t15=`${taxonomy.slug}-input`;let t16;$[36]!==t15||$[37]!==taxonomy.labels.addNewItem?(t16=react.createElement(tags.Label,{htmlFor:t15},taxonomy.labels.addNewItem),$[36]=t15,$[37]=taxonomy.labels.addNewItem,$[38]=t16):t16=$[38];const t17=`${taxonomy.slug}-input`,t18=`${taxonomy.slug}-description`,t19=taxonomy?.labels?.itemsList;let t20;$[39]!==handleFreeformInputChange||$[40]!==handleFreeformTermsChange||$[41]!==searchResults||$[42]!==t17||$[43]!==t18||$[44]!==t19||$[45]!==taxonomy.slug||$[46]!==termDisplayTransformer||$[47]!==tokens||$[48]!==undo_0?(t20=react.createElement(tags.Input,{id:t17,"aria-describedby":t18,name:taxonomy.slug,onTagsChange:handleFreeformTermsChange,onInputChange:handleFreeformInputChange,tagDisplayTransformer:termDisplayTransformer,tokens,onUndo:undo_0,suggestedTerms:searchResults,suggestedTermsLabel:t19}),$[39]=handleFreeformInputChange,$[40]=handleFreeformTermsChange,$[41]=searchResults,$[42]=t17,$[43]=t18,$[44]=t19,$[45]=taxonomy.slug,$[46]=termDisplayTransformer,$[47]=tokens,$[48]=undo_0,$[49]=t20):t20=$[49];const t21=`${taxonomy.slug}-description`;let t22,t23,t24,t25;return $[50]!==t21||$[51]!==taxonomy.labels.separateItemsWithCommas?(t22=react.createElement(tags.Description,{id:t21},taxonomy.labels.separateItemsWithCommas),$[50]=t21,$[51]=taxonomy.labels.separateItemsWithCommas,$[52]=t22):t22=$[52],$[53]!==addTerms_0||$[54]!==mostUsed||$[55]!==taxonomy.labels.mostUsed||$[56]!==taxonomy.slug||$[57]!==terms_0?(t23=mostUsed?.length>0&&react.createElement(WordCloud.Wrapper,{"data-testid":`${taxonomy.slug}-most-used`},react.createElement(WordCloud.Heading,null,taxonomy.labels.mostUsed),react.createElement(WordCloud.List,null,mostUsed.map(((term_6,i)=>react.createElement(WordCloud.ListItem,{key:term_6.id},react.createElement(WordCloud.Word,{onClick:()=>{terms_0.map(_temp8).includes(term_6.id)||addTerms_0([term_6])}},term_6.name,i<mostUsed.length-1&&(0,i18n.__)(",","web-stories")),i<mostUsed.length-1&&" "))))),$[53]=addTerms_0,$[54]=mostUsed,$[55]=taxonomy.labels.mostUsed,$[56]=taxonomy.slug,$[57]=terms_0,$[58]=t23):t23=$[58],$[59]!==t16||$[60]!==t20||$[61]!==t22||$[62]!==t23||$[63]!==taxonomy.slug?(t24=react.createElement("div",{key:taxonomy.slug},t16,t20,t22,t23),$[59]=t16,$[60]=t20,$[61]=t22,$[62]=t23,$[63]=taxonomy.slug,$[64]=t24):t24=$[64],$[65]!==t14||$[66]!==t24?(t25=react.createElement(react.Fragment,null,t14,t24),$[65]=t14,$[66]=t24,$[67]=t25):t25=$[67],t25}function _temp8(t0){const{id}=t0;return id}function _temp7(term_4){return term_4.name}function _temp6(term_3){return void 0!==term_3}function _temp5(t0){const[,name_0]=t0;return name_0}function FlatTermSelector_temp4(t0){const{slug:thisSlug}=t0;return thisSlug.toLowerCase()}function FlatTermSelector_temp3(name){return[(0,cleanForSlug.A)(name),name]}function FlatTermSelector_temp2(t0){const{actions:t1}=t0,{undo}=t1;return{undo}}function FlatTermSelector_temp(t0){const{state:t1,actions:t2}=t0,{termCache,terms}=t1,{createTerm,addSearchResultsToCache,addTerms,removeTerms}=t2;return{termCache,createTerm,addSearchResultsToCache,terms,addTerms,removeTerms}}FlatTermSelector.propTypes={taxonomy:TaxonomyPropType,canCreateTerms:prop_types_default().bool};const taxonomies_FlatTermSelector=FlatTermSelector;function taxonomies_extends(){return taxonomies_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},taxonomies_extends.apply(null,arguments)}const StyledSimplePanel=(0,styled_components_browser_esm.Ay)(panel.RV).withConfig({displayName:"taxonomies__StyledSimplePanel",componentId:"sc-171mnp-0"})(["padding-left:0;padding-right:0;"]);function taxonomies_temp2(t0){const{state:t1}=t0,{taxonomies}=t1;return{taxonomies}}function taxonomies_temp(t0){const{state:t1}=t0,{capabilities}=t1;return{capabilities}}const taxonomies=function TaxonomiesPanel(t0){const $=(0,dist.c)(24);let nameOverride,props;$[0]!==t0?(({nameOverride,...props}=t0),$[0]=t0,$[1]=nameOverride,$[2]=props):(nameOverride=$[1],props=$[2]);const{capabilities:capabilities_0}=(0,app.P3)(taxonomies_temp),{taxonomies:taxonomies_0}=(0,app_taxonomy.D)(taxonomies_temp2);if(!taxonomies_0?.length)return null;let T0,t1,t2,t3,t4,t5,t6;if($[3]!==capabilities_0||$[4]!==nameOverride||$[5]!==props||$[6]!==taxonomies_0){t5=Symbol.for("react.early_return_sentinel");bb0:{let t6;$[13]!==capabilities_0?(t6=taxonomy=>Boolean(capabilities_0[`assign-${taxonomy?.restBase}`]||capabilities_0[`assign-${taxonomy?.slug}`]),$[13]=capabilities_0,$[14]=t6):t6=$[14];const availableTaxonomies=taxonomies_0.filter(t6);if(0===availableTaxonomies.length){t5=null;break bb0}let t7;T0=StyledSimplePanel,t1=nameOverride||"taxonomies",$[15]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,i18n.__)("Taxonomies","web-stories"),$[15]=t2):t2=$[15],t3=props,$[16]!==capabilities_0?(t7=taxonomy_0=>{const canCreateTerms=Boolean(capabilities_0[`create-${taxonomy_0?.restBase}`]||capabilities_0[`create-${taxonomy_0?.slug}`]);return react.createElement(SiblingBorder,{key:taxonomy_0.slug},taxonomy_0.hierarchical?react.createElement(taxonomies_HierarchicalTermSelector,{taxonomy:taxonomy_0,canCreateTerms}):react.createElement(taxonomies_FlatTermSelector,{taxonomy:taxonomy_0,canCreateTerms}))},$[16]=capabilities_0,$[17]=t7):t7=$[17],t4=availableTaxonomies.map(t7)}$[3]=capabilities_0,$[4]=nameOverride,$[5]=props,$[6]=taxonomies_0,$[7]=T0,$[8]=t1,$[9]=t2,$[10]=t3,$[11]=t4,$[12]=t5}else T0=$[7],t1=$[8],t2=$[9],t3=$[10],t4=$[11],t5=$[12];return t5!==Symbol.for("react.early_return_sentinel")?t5:($[18]!==T0||$[19]!==t1||$[20]!==t2||$[21]!==t3||$[22]!==t4?(t6=react.createElement(T0,taxonomies_extends({name:t1,title:t2},t3),t4),$[18]=T0,$[19]=t1,$[20]=t2,$[21]=t3,$[22]=t4,$[23]=t6):t6=$[23],t6)}}}]);