"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[8055],{"./packages/design-system/src/components/typography/list/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>List});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/typography/styles.ts");const List=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.ul.withConfig({displayName:"list__List",componentId:"sc-blyefz-0"})((({size=_theme__WEBPACK_IMPORTED_MODULE_1__.$.Small,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.AH)(["list-style-type:disc;list-style-position:outside;margin:0;padding:0;li{",";",";padding:0;margin:0;}"],_styles__WEBPACK_IMPORTED_MODULE_2__.u,_theme__WEBPACK_IMPORTED_MODULE_3__.s({preset:theme.typography.presets.paragraph[size],theme}))))},"./packages/design-system/src/icons/checkbox.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const SvgCheckbox=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M23.897 18.146a.5.5 0 0 1 .707.708l-4.493 4.493-.007.007a.5.5 0 0 1-.708 0l-.006-.007-2.494-2.493a.5.5 0 0 1 .708-.708l2.146 2.147z",clipRule:"evenodd"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M20.333 15.5v-5.083C20.333 9.634 19.7 9 18.917 9h-6.5C11.634 9 11 9.634 11 10.417v11.166c0 .783.634 1.417 1.417 1.417H14.5"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgCheckbox)},"./packages/design-system/src/icons/checkmark_circle.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,_path2,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const SvgCheckmarkCircle=({title,titleId,...props})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 58 58","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M29 54.146c13.888 0 25.147-11.259 25.147-25.147C54.147 15.11 42.888 3.852 29 3.852S3.853 15.11 3.853 28.999 15.112 54.146 29 54.146"})),_path2||(_path2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M43.198 18.64a1.5 1.5 0 0 1 .037 2.12l-17.93 18.563a1.5 1.5 0 0 1-2.157 0l-7.383-7.643a1.5 1.5 0 1 1 2.158-2.084l6.304 6.526 16.85-17.445a1.5 1.5 0 0 1 2.121-.037",clipRule:"evenodd"}))),__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgCheckmarkCircle)},"./packages/design-system/src/utils/panelSections.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>PanelSections,q:()=>STYLE_PANE_IDS});var _panelTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/utils/panelTypes.ts");let STYLE_PANE_IDS=function(STYLE_PANE_IDS){return STYLE_PANE_IDS.Selection="selection",STYLE_PANE_IDS.Link="link",STYLE_PANE_IDS.Animation="animation",STYLE_PANE_IDS}({});const{Link,Animation,...panelsExcludingLinkAndAnimation}=_panelTypes__WEBPACK_IMPORTED_MODULE_0__.A,PanelSections={[STYLE_PANE_IDS.Selection]:Object.values(panelsExcludingLinkAndAnimation),[STYLE_PANE_IDS.Link]:[Link],[STYLE_PANE_IDS.Animation]:[Animation]}},"./packages/story-editor/src/app/highlights/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").q6)({})},"./packages/story-editor/src/app/highlights/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z8:()=>provider,xP:()=>HighlightType,N:()=>useHighlights.A});var useHighlights=__webpack_require__("./packages/story-editor/src/app/highlights/useHighlights.ts"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),useStory=__webpack_require__("./packages/story-editor/src/app/story/useStory.ts"),context=__webpack_require__("./packages/story-editor/src/app/highlights/context.ts"),panelSections=__webpack_require__("./packages/design-system/src/utils/panelSections.ts"),constants=__webpack_require__("./packages/story-editor/src/components/sidebar/constants.ts"),paneIds=__webpack_require__("./packages/story-editor/src/components/library/paneIds.ts");let HighlightType=function(HighlightType){return HighlightType.StoryTitle="STORY_TITLE",HighlightType.ElementToolbarToggle="ELEMENT_TOOLBAR_TOGGLE",HighlightType.StylePane="STYLE_PANE",HighlightType.Animation="ANIMATION",HighlightType.AssistiveText="ASSISTIVE_TEXT",HighlightType.Captions="Captions",HighlightType.Excerpt="EXCERPT",HighlightType.Link="LINK",HighlightType.PageBackground="PAGE_BACKGROUND",HighlightType.Poster="POSTER",HighlightType.PublisherLogo="PUBLISHER_LOGO",HighlightType.VideoA11yPoster="VIDEO_A11Y_POSTER",HighlightType.Style="STYLE",HighlightType.Font="FONT",HighlightType.TextColor="TEXT_COLOR",HighlightType.Media="MEDIA",HighlightType.Media3p="MEDIA3P",HighlightType.TextSet="TEXT",HighlightType.PageTemplates="PAGE_TEMPLATES",HighlightType.PageBackgroundAudio="PAGE_BACKGROUND_AUDIO",HighlightType}({});const STATES={[HighlightType.StoryTitle]:{focus:!0},[HighlightType.ElementToolbarToggle]:{focus:!0},[HighlightType.StylePane]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.Poster]:{focus:!0,tab:constants.qQ},[HighlightType.PublisherLogo]:{focus:!0,tab:constants.qQ},[HighlightType.Excerpt]:{focus:!0,tab:constants.qQ},[HighlightType.PageBackgroundAudio]:{focus:!0,tab:constants.Y},[HighlightType.Captions]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.AssistiveText]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.PageBackground]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.Animation]:{focus:!0,tab:constants.Y,section:panelSections.q.Animation},[HighlightType.Font]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.Link]:{focus:!0,tab:constants.Y,section:panelSections.q.Link},[HighlightType.VideoA11yPoster]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.Style]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.TextColor]:{focus:!0,tab:constants.Y,section:panelSections.q.Selection},[HighlightType.Media]:{focus:!0,tab:constants.i,section:paneIds.o.Media},[HighlightType.Media3p]:{focus:!0,tab:constants.i,section:paneIds.o.Media3p},[HighlightType.TextSet]:{focus:!0,tab:constants.i,section:paneIds.o.Text},[HighlightType.PageTemplates]:{focus:!0,tab:constants.i,section:paneIds.o.PageTemplates}};function HighlightsProvider(t0){const $=(0,dist.c)(25),{children}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1={},$[0]=t1):t1=$[0];const[highlighted,setHighlighted]=(0,src.J0)(t1),{actions:t2}=(0,useStory.P)(),{setSelectedElementsById,setCurrentPage}=t2;let t3,t4;$[1]!==setCurrentPage||$[2]!==setSelectedElementsById?(t3=t5=>{const{elementId,elements,pageId}=t5;if(pageId&&setCurrentPage({pageId}),elements?.length){const elementIds=elements.map(_temp);setSelectedElementsById({elementIds})}else if(elementId){setSelectedElementsById({elementIds:[elementId]})}},t4=[setCurrentPage,setSelectedElementsById],$[1]=setCurrentPage,$[2]=setSelectedElementsById,$[3]=t3,$[4]=t4):(t3=$[3],t4=$[4]);const selectElement=(0,src.hb)(t3,t4);let t5,t6;$[5]!==selectElement||$[6]!==setHighlighted?(t5=t6=>{const{elements:elements_0,elementId:elementId_0,pageId:pageId_0,highlight}=t6;if((elements_0||elementId_0||pageId_0)&&selectElement({elements:elements_0,elementId:elementId_0,pageId:pageId_0}),highlight&&STATES[highlight]){const{tab,section,...highlightState}=STATES[highlight];setHighlighted({[highlight]:{...highlightState,showEffect:!0},tab,section})}},$[5]=selectElement,$[6]=setHighlighted,$[7]=t5):t5=$[7],$[8]!==selectElement?(t6=[selectElement],$[8]=selectElement,$[9]=t6):t6=$[9];const setHighlights=(0,src.hb)(t5,t6);let t7,t8;$[10]!==setHighlighted?(t7=()=>setHighlighted({}),t8=[setHighlighted],$[10]=setHighlighted,$[11]=t7,$[12]=t8):(t7=$[11],t8=$[12]);const onFocusOut=(0,src.hb)(t7,t8);let t9,t10;$[13]!==setHighlighted?(t9=highlight_0=>setHighlighted((state=>({...state,[highlight_0]:{...state[highlight_0],showEffect:!1}}))),$[13]=setHighlighted,$[14]=t9):t9=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(t10=[],$[15]=t10):t10=$[15];const cancelEffect=(0,src.hb)(t9,t10);let t11,t12;$[16]!==cancelEffect||$[17]!==highlighted||$[18]!==onFocusOut||$[19]!==setHighlights?(t11=()=>({setHighlights,onFocusOut,cancelEffect,...highlighted}),t12=[cancelEffect,onFocusOut,setHighlights,highlighted],$[16]=cancelEffect,$[17]=highlighted,$[18]=onFocusOut,$[19]=setHighlights,$[20]=t11,$[21]=t12):(t11=$[20],t12=$[21]);const contextValue=(0,src.Kr)(t11,t12);let t13;return $[22]!==children||$[23]!==contextValue?(t13=react.createElement(context.A.Provider,{value:contextValue},children),$[22]=children,$[23]=contextValue,$[24]=t13):t13=$[24],t13}function _temp(element){return element.id}const provider=HighlightsProvider;HighlightsProvider.__docgenInfo={description:"",methods:[],displayName:"HighlightsProvider"}},"./packages/story-editor/src/app/highlights/useHighlights.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/app/highlights/context.ts");const __WEBPACK_DEFAULT_EXPORT__=function useHighlights(t0){const selector=void 0===t0?_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.D_:t0;return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.i7)(_context__WEBPACK_IMPORTED_MODULE_1__.A,selector)}},"./packages/story-editor/src/components/checklist/checklistContent/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cj:()=>AccessibilityChecks,Gl:()=>DesignChecks,HY:()=>EmptyContent,nb:()=>emptyContent,e_:()=>PriorityChecks});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),countContext=__webpack_require__("./packages/story-editor/src/components/checklist/countContext/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/checklist/styles.js"),popupMountedContext=__webpack_require__("./packages/story-editor/src/components/checklist/popupMountedContext.js");function DesignPanel(t0){const $=(0,dist.c)(8),{badgeCount:t1,isOpen,maxHeight,onClick,title,children}=t0,badgeCount=void 0===t1?0:t1,isChecklistMounted=(0,popupMountedContext.g)();let t2;return $[0]!==badgeCount||$[1]!==children||$[2]!==isChecklistMounted||$[3]!==isOpen||$[4]!==maxHeight||$[5]!==onClick||$[6]!==title?(t2=isChecklistMounted?react.createElement(styles.bl,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,title},react.createElement(styles._X,null,(0,i18n.__)("Follow best practices for Web Stories.","web-stories")),children):children,$[0]=badgeCount,$[1]=children,$[2]=isChecklistMounted,$[3]=isOpen,$[4]=maxHeight,$[5]=onClick,$[6]=title,$[7]=t2):t2=$[7],t2}function DesignChecks(props){const $=(0,dist.c)(2);let t0;return $[0]!==props?(t0=react.createElement(countContext._7,{category:constants.co.DESIGN},react.createElement(DesignPanel,props,props.children)),$[0]=props,$[1]=t0):t0=$[1],t0}function AccessibilityPanel(t0){const $=(0,dist.c)(8),{children,badgeCount,isOpen,onClick,maxHeight,title}=t0,isChecklistMounted=(0,popupMountedContext.g)();let t1;return $[0]!==badgeCount||$[1]!==children||$[2]!==isChecklistMounted||$[3]!==isOpen||$[4]!==maxHeight||$[5]!==onClick||$[6]!==title?(t1=isChecklistMounted?react.createElement(styles.bl,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,title},react.createElement(styles._X,null,(0,i18n.__)("Make your Web Story accessible.","web-stories")),children):children,$[0]=badgeCount,$[1]=children,$[2]=isChecklistMounted,$[3]=isOpen,$[4]=maxHeight,$[5]=onClick,$[6]=title,$[7]=t1):t1=$[7],t1}function AccessibilityChecks(props){const $=(0,dist.c)(2);let t0;return $[0]!==props?(t0=react.createElement(countContext._7,{category:constants.co.ACCESSIBILITY},react.createElement(AccessibilityPanel,props,props.children)),$[0]=props,$[1]=t0):t0=$[1],t0}DesignPanel.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().arrayOf(prop_types_default().node)])},DesignChecks.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().node},DesignChecks.__docgenInfo={description:"",methods:[],displayName:"DesignChecks",props:{badgeCount:{description:"",type:{name:"number"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},maxHeight:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!0},title:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"node"},required:!1}}},AccessibilityPanel.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().arrayOf(prop_types_default().node)])},AccessibilityChecks.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().node},AccessibilityChecks.__docgenInfo={description:"",methods:[],displayName:"AccessibilityChecks",props:{badgeCount:{description:"",type:{name:"number"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},maxHeight:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!0},title:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"node"},required:!1}}};var src=__webpack_require__("./packages/react/src/index.ts"),tablist=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),checkpointContext=__webpack_require__("./packages/story-editor/src/components/checklist/checkpointContext/index.js");function PriorityPanel(t0){const $=(0,dist.c)(8),{children,badgeCount:t1,isOpen,onClick,maxHeight,title}=t0,badgeCount=void 0===t1?0:t1,isChecklistMounted=(0,popupMountedContext.g)();let t2;return $[0]!==badgeCount||$[1]!==children||$[2]!==isChecklistMounted||$[3]!==isOpen||$[4]!==maxHeight||$[5]!==onClick||$[6]!==title?(t2=isChecklistMounted?react.createElement(styles.bl,{badgeCount,isExpanded:Boolean(badgeCount)&&isOpen,onClick,maxHeight,status:tablist.od.DANGER,title},react.createElement(styles._X,null,(0,i18n.__)("Make this Web Story easier to discover.","web-stories")),children):children,$[0]=badgeCount,$[1]=children,$[2]=isChecklistMounted,$[3]=isOpen,$[4]=maxHeight,$[5]=onClick,$[6]=title,$[7]=t2):t2=$[7],t2}function PriorityChecks(props){const $=(0,dist.c)(6),count=(0,countContext.L_)(constants.co.PRIORITY),{updateHighPriorityCount:updateHighPriorityCount_0}=(0,checkpointContext.Em)(_temp);let t0,t1,t2;return $[0]!==count||$[1]!==updateHighPriorityCount_0?(t0=()=>{updateHighPriorityCount_0(count)},t1=[updateHighPriorityCount_0,count],$[0]=count,$[1]=updateHighPriorityCount_0,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]),(0,src.vJ)(t0,t1),$[4]!==props?(t2=react.createElement(countContext._7,{category:constants.co.PRIORITY},react.createElement(PriorityPanel,props,props.children)),$[4]=props,$[5]=t2):t2=$[5],t2}function _temp(t0){const{actions:t1}=t0,{updateHighPriorityCount}=t1;return{updateHighPriorityCount}}PriorityPanel.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().arrayOf(prop_types_default().node)])},PriorityChecks.propTypes={badgeCount:prop_types_default().number,isOpen:prop_types_default().bool,maxHeight:prop_types_default().string,onClick:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,children:prop_types_default().node},PriorityChecks.__docgenInfo={description:"",methods:[],displayName:"PriorityChecks",props:{badgeCount:{description:"",type:{name:"number"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!1},maxHeight:{description:"",type:{name:"string"},required:!1},onClick:{description:"",type:{name:"func"},required:!0},title:{description:"",type:{name:"string"},required:!0},children:{description:"",type:{name:"node"},required:!1}}};var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),checkmark_circle=__webpack_require__("./packages/design-system/src/icons/checkmark_circle.svg"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts");const Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"emptyContent__Wrapper",componentId:"sc-83zuqv-0"})(["display:grid;grid-template-rows:113px 64px;width:308px;margin:0 auto 32px;& > *{display:flex;align-self:center;justify-self:center;color:",";}p{width:226px;text-align:center;}"],(({theme})=>theme.colors.fg.secondary)),IconContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"emptyContent__IconContainer",componentId:"sc-83zuqv-1"})(["height:50px;width:50px;"]),EmptyContent=()=>{const $=(0,dist.c)(2);let t0,t1;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(IconContainer,null,react.createElement(checkmark_circle.A,null)),$[0]=t0):t0=$[0],$[1]===Symbol.for("react.memo_cache_sentinel")?(t1=react.createElement(Wrapper,null,t0,react.createElement(typography_text.E.Paragraph,{size:types.$.Small},(0,i18n.__)("You are all set for now. Return to this checklist as you build your Web Story for tips on how to improve it.","web-stories"))),$[1]=t1):t1=$[1],t1},EmptyContentCheck=()=>{const $=(0,dist.c)(2),accessibilityCount=(0,countContext.L_)(constants.co.ACCESSIBILITY),designCount=(0,countContext.L_)(constants.co.DESIGN),priorityCount=(0,countContext.L_)(constants.co.PRIORITY),{checkpoint:checkpoint_0}=(0,checkpointContext.Em)(emptyContent_temp),isEmptyView=accessibilityCount+designCount+priorityCount===0||checkpoint_0===constants.xh.UNAVAILABLE;let t0;return $[0]!==isEmptyView?(t0=isEmptyView?react.createElement(EmptyContent,null):null,$[0]=isEmptyView,$[1]=t0):t0=$[1],t0},emptyContent=EmptyContentCheck;function emptyContent_temp(t0){const{state:t1}=t0,{checkpoint}=t1;return{checkpoint}}EmptyContent.__docgenInfo={description:"",methods:[],displayName:"EmptyContent"},EmptyContentCheck.__docgenInfo={description:"",methods:[],displayName:"EmptyContentCheck"}},"./packages/story-editor/src/components/checklist/checklistContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>provider,q:()=>useChecklist});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts");const context=(0,src.q6)({state:{},actions:{}}),ChecklistProvider=t0=>{const $=(0,dist.c)(33),{children}=t0,[isOpen,setIsOpen]=(0,src.J0)(!1),[checklistFocused,setChecklistFocused]=(0,src.J0)(!1),[openPanel,_setOpenPanel]=(0,src.J0)(),[isChecklistMounted,setIsChecklistMounted]=(0,src.J0)(!1);let t1,t2;$[0]!==_setOpenPanel?(t1=newOpenPanel=>{_setOpenPanel(newOpenPanel)},t2=[_setOpenPanel],$[0]=_setOpenPanel,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const setOpenPanel=(0,src.hb)(t1,t2);let t3,t4;$[3]!==isOpen||$[4]!==setIsOpen?(t3=()=>{(0,tracking_src.sx)("checklist_toggled",{status:isOpen?"closed":"open"}),setIsOpen(_temp)},$[3]=isOpen,$[4]=setIsOpen,$[5]=t3):t3=$[5],$[6]!==isOpen?(t4=[isOpen],$[6]=isOpen,$[7]=t4):t4=$[7];const toggle=(0,src.hb)(t3,t4);let t5,t6;$[8]!==setIsOpen?(t5=()=>{(0,tracking_src.sx)("checklist_toggled",{status:"closed"}),setIsOpen(!1)},$[8]=setIsOpen,$[9]=t5):t5=$[9],$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=[],$[10]=t6):t6=$[10];const close=(0,src.hb)(t5,t6);let t7,t8;$[11]!==setChecklistFocused||$[12]!==setIsOpen?(t7=()=>{(0,tracking_src.sx)("checklist_toggled",{status:"open"}),setIsOpen(!0),setChecklistFocused(!0)},$[11]=setChecklistFocused,$[12]=setIsOpen,$[13]=t7):t7=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(t8=[],$[14]=t8):t8=$[14];const open=(0,src.hb)(t7,t8);let t9,t10;$[15]!==setChecklistFocused?(t9=()=>setChecklistFocused(!1),$[15]=setChecklistFocused,$[16]=t9):t9=$[16],$[17]===Symbol.for("react.memo_cache_sentinel")?(t10=[],$[17]=t10):t10=$[17];const resetChecklistFocused=(0,src.hb)(t9,t10);let t11,t12;$[18]!==checklistFocused||$[19]!==close||$[20]!==isChecklistMounted||$[21]!==isOpen||$[22]!==open||$[23]!==openPanel||$[24]!==resetChecklistFocused||$[25]!==setIsChecklistMounted||$[26]!==setOpenPanel||$[27]!==toggle?(t11=()=>({state:{checklistFocused,isOpen,isChecklistMounted,openPanel},actions:{toggle,close,open,resetChecklistFocused,setIsChecklistMounted,setOpenPanel}}),t12=[checklistFocused,close,openPanel,isOpen,open,resetChecklistFocused,toggle,setOpenPanel,setIsChecklistMounted,isChecklistMounted],$[18]=checklistFocused,$[19]=close,$[20]=isChecklistMounted,$[21]=isOpen,$[22]=open,$[23]=openPanel,$[24]=resetChecklistFocused,$[25]=setIsChecklistMounted,$[26]=setOpenPanel,$[27]=toggle,$[28]=t11,$[29]=t12):(t11=$[28],t12=$[29]);const contextValue=(0,src.Kr)(t11,t12);let t13;return $[30]!==children||$[31]!==contextValue?(t13=react.createElement(context.Provider,{value:contextValue},children),$[30]=children,$[31]=contextValue,$[32]=t13):t13=$[32],t13},provider=ChecklistProvider;function _temp(prevVal){return!prevVal}function useChecklist(selector){return(0,src.i7)(context,selector??src.D_)}ChecklistProvider.__docgenInfo={description:"",methods:[],displayName:"ChecklistProvider",props:{children:{description:"",type:{name:"node"},required:!0}}}},"./packages/story-editor/src/components/checklist/checkpointContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mq:()=>ChecklistCheckpointProvider,_L:()=>CheckpointContext,Em:()=>useCheckpoint});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),app=__webpack_require__("./packages/story-editor/src/app/index.js"),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js");const PPC_CHECKPOINT_ACTION={ON_INITIAL_ELEMENT_ADDED:"story is no longer empty",ON_PUBLISH_CLICKED:"publish button is pressed",ON_STORY_HAS_2_PAGES:"story 'recommended' section enabled",ON_STORY_HAS_5_PAGES:"story 'high priority' section enabled",ON_STORY_IS_PUBLISHED:"story is published, regardless of recommendations"},machine={[constants.xh.UNAVAILABLE]:{[PPC_CHECKPOINT_ACTION.ON_INITIAL_ELEMENT_ADDED]:constants.xh.ONLY_RECOMMENDED,[PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED]:constants.xh.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED]:constants.xh.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_HAS_2_PAGES]:constants.xh.ONLY_RECOMMENDED},[constants.xh.ONLY_RECOMMENDED]:{[PPC_CHECKPOINT_ACTION.ON_STORY_HAS_5_PAGES]:constants.xh.ALL,[PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED]:constants.xh.ALL,[PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED]:constants.xh.ALL},[constants.xh.ALL]:{}},checkpointReducer=(state,action)=>machine[state][action]||state,CheckpointContext=(0,src.q6)({state:{},actions:{}});function ChecklistCheckpointProvider(t0){const $=(0,dist.c)(38),{children}=t0,[checkpointState,dispatch]=(0,src.WO)(checkpointReducer,constants.xh.UNAVAILABLE),[highPriorityCount,setHighPriorityCount]=(0,src.J0)(),[reviewChecklistRequested,setReviewChecklistRequested]=(0,src.J0)(),hasHighPriorityIssues=highPriorityCount>0,storyStatus=(0,app.P3)(_temp);let t1,t2,t3,t4,t5,t6,t7,t8,t9,t10;$[0]!==dispatch||$[1]!==storyStatus?(t1=()=>{"publish"===storyStatus&&dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_IS_PUBLISHED)},$[0]=dispatch,$[1]=storyStatus,$[2]=t1):t1=$[2],$[3]!==storyStatus?(t2=[storyStatus],$[3]=storyStatus,$[4]=t2):t2=$[4],(0,src.vJ)(t1,t2),$[5]!==dispatch?(t3=()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_HAS_2_PAGES)},$[5]=dispatch,$[6]=t3):t3=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t4=[],$[7]=t4):t4=$[7],(0,app.r2)(app.IM.onSecondPageAdded,(0,src.hb)(t3,t4)),$[8]!==dispatch?(t5=()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_STORY_HAS_5_PAGES)},$[8]=dispatch,$[9]=t5):t5=$[9],$[10]===Symbol.for("react.memo_cache_sentinel")?(t6=[],$[10]=t6):t6=$[10],(0,app.r2)(app.IM.onFifthPageAdded,(0,src.hb)(t5,t6)),$[11]!==dispatch?(t7=()=>{dispatch(PPC_CHECKPOINT_ACTION.ON_INITIAL_ELEMENT_ADDED)},$[11]=dispatch,$[12]=t7):t7=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t8=[],$[13]=t8):t8=$[13],(0,app.r2)(app.IM.onInitialElementAdded,(0,src.hb)(t7,t8)),$[14]!==setHighPriorityCount?(t9=count=>{setHighPriorityCount(count)},$[14]=setHighPriorityCount,$[15]=t9):t9=$[15],$[16]===Symbol.for("react.memo_cache_sentinel")?(t10=[],$[16]=t10):t10=$[16];const updateHighPriorityCount=(0,src.hb)(t9,t10);let t11,t12;$[17]!==dispatch?(t11=()=>dispatch(PPC_CHECKPOINT_ACTION.ON_PUBLISH_CLICKED),$[17]=dispatch,$[18]=t11):t11=$[18],$[19]===Symbol.for("react.memo_cache_sentinel")?(t12=[],$[19]=t12):t12=$[19];const showPriorityIssues=(0,src.hb)(t11,t12);let t13,t14;$[20]!==setReviewChecklistRequested?(t13=()=>{setReviewChecklistRequested(!0)},$[20]=setReviewChecklistRequested,$[21]=t13):t13=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(t14=[],$[22]=t14):t14=$[22];const handleReviewChecklist=(0,src.hb)(t13,t14);let t15,t16;$[23]!==setReviewChecklistRequested?(t15=()=>{setReviewChecklistRequested(!1)},$[23]=setReviewChecklistRequested,$[24]=t15):t15=$[24],$[25]===Symbol.for("react.memo_cache_sentinel")?(t16=[],$[25]=t16):t16=$[25];const handleResetReviewChecklist=(0,src.hb)(t15,t16);let t17,t18;$[26]!==checkpointState||$[27]!==handleResetReviewChecklist||$[28]!==handleReviewChecklist||$[29]!==hasHighPriorityIssues||$[30]!==reviewChecklistRequested||$[31]!==showPriorityIssues||$[32]!==updateHighPriorityCount?(t17=()=>({state:{checkpoint:checkpointState,hasHighPriorityIssues,reviewChecklistRequested},actions:{updateHighPriorityCount,handleResetReviewChecklist,handleReviewChecklist,showPriorityIssues}}),t18=[checkpointState,handleReviewChecklist,showPriorityIssues,handleResetReviewChecklist,reviewChecklistRequested,hasHighPriorityIssues,updateHighPriorityCount],$[26]=checkpointState,$[27]=handleResetReviewChecklist,$[28]=handleReviewChecklist,$[29]=hasHighPriorityIssues,$[30]=reviewChecklistRequested,$[31]=showPriorityIssues,$[32]=updateHighPriorityCount,$[33]=t17,$[34]=t18):(t17=$[33],t18=$[34]);const value=(0,src.Kr)(t17,t18);let t19;return $[35]!==children||$[36]!==value?(t19=react.createElement(CheckpointContext.Provider,{value},children),$[35]=children,$[36]=value,$[37]=t19):t19=$[37],t19}function _temp(t0){const{state:t1}=t0,{story}=t1;return story.status}function useCheckpoint(selector){return(0,src.i7)(CheckpointContext,selector??src.D_)}ChecklistCheckpointProvider.propTypes={children:prop_types_default().node},ChecklistCheckpointProvider.__docgenInfo={description:"",methods:[],displayName:"ChecklistCheckpointProvider",props:{children:{description:"",type:{name:"node"},required:!1}}}},"./packages/story-editor/src/components/checklist/countContext/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_7:()=>ChecklistCategoryProvider,Pi:()=>ChecklistCountProvider,L_:()=>useCategoryCount,WY:()=>useHasChecklist,FL:()=>useRegisterCheck});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js");const CountContext=(0,src.q6)(null),CategoryContext=(0,src.q6)(null),INITIAL_STATE={[constants.co.PRIORITY]:{},[constants.co.DESIGN]:{},[constants.co.ACCESSIBILITY]:{}};function ChecklistCountProvider(t0){const $=(0,dist.c)(5),{hasChecklist,children}=t0;let t1;$[0]!==hasChecklist?(t1={...INITIAL_STATE,hasChecklist},$[0]=hasChecklist,$[1]=t1):t1=$[1];const value=(0,src.J0)(t1);let t2;return $[2]!==children||$[3]!==value?(t2=react.createElement(CountContext.Provider,{value},children),$[2]=children,$[3]=value,$[4]=t2):t2=$[4],t2}function ChecklistCategoryProvider(t0){const $=(0,dist.c)(7),{children,category}=t0,setCategories=(0,src.NT)(CountContext)?.[1];if(!setCategories)throw new Error("Cannot use `ChecklistCategoryProvider` outside of `ChecklistCountProvider`");let t1,t2;$[0]!==category||$[1]!==setCategories?(t1=entry=>setCategories((categories=>({...categories,[category]:{...categories[category],...entry}}))),t2=[category,setCategories],$[0]=category,$[1]=setCategories,$[2]=t1,$[3]=t2):(t1=$[2],t2=$[3]);const addEntry=(0,src.hb)(t1,t2);let t3;return $[4]!==addEntry||$[5]!==children?(t3=react.createElement(CategoryContext.Provider,{value:addEntry},children),$[4]=addEntry,$[5]=children,$[6]=t3):t3=$[6],t3}function useRegisterCheck(id,isRendered){const $=(0,dist.c)(5),addEntry=(0,src.NT)(CategoryContext);if(!addEntry)throw new Error("Cannot use `useRegisterCheck` outside of `ChecklistCategoryProvider`");let t0,t1;$[0]!==addEntry||$[1]!==id||$[2]!==isRendered?(t0=()=>addEntry({[id]:isRendered}),t1=[id,addEntry,isRendered],$[0]=addEntry,$[1]=id,$[2]=isRendered,$[3]=t0,$[4]=t1):(t0=$[3],t1=$[4]),(0,src.vJ)(t0,t1)}function useCategoryCount(category){const $=(0,dist.c)(3),categories=(0,src.NT)(CountContext)?.[0];if(!categories)throw new Error("Cannot use `useCategoryCount` outside of `ChecklistCountProvider`");let t0;return $[0]!==categories||$[1]!==category?(t0=Object.values(categories[category]||{}).filter(_temp4),$[0]=categories,$[1]=category,$[2]=t0):t0=$[2],t0.length}function _temp4(isRendered){return isRendered}function useHasChecklist(){const countContext=(0,src.NT)(CountContext)?.[0];if(!countContext)throw new Error("Cannot use `useHasChecklist` outside of `ChecklistCountProvider`");const{hasChecklist}=countContext;return hasChecklist}ChecklistCountProvider.propTypes={children:prop_types_default().node,hasChecklist:prop_types_default().bool},ChecklistCategoryProvider.propTypes={children:prop_types_default().node,category:prop_types_default().oneOf(Object.values(constants.co)).isRequired},ChecklistCountProvider.__docgenInfo={description:"",methods:[],displayName:"ChecklistCountProvider",props:{children:{description:"",type:{name:"node"},required:!1},hasChecklist:{description:"",type:{name:"bool"},required:!1}}},ChecklistCategoryProvider.__docgenInfo={description:"",methods:[],displayName:"ChecklistCategoryProvider",props:{children:{description:"",type:{name:"node"},required:!1},category:{description:"",type:{name:"enum",value:[{value:'"accessibility"',computed:!1},{value:'"design"',computed:!1},{value:'"priority"',computed:!1}]},required:!0}}}},"./packages/story-editor/src/components/checklist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{br:()=>checklist_constants.br,bY:()=>Checklist,mq:()=>checkpointContext.mq,Pi:()=>countContext.Pi,_r:()=>checklistIcon,Ye:()=>checklistContext.Y,_L:()=>checkpointContext._L,Bc:()=>checklist_constants.Bc,xh:()=>checklist_constants.xh,g4:()=>getPagesWithFailedContrast,qc:()=>checklistContext.q,Em:()=>checkpointContext.Em,WY:()=>countContext.WY});var checklistContext=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContext/index.js"),checkpointContext=__webpack_require__("./packages/story-editor/src/components/checklist/checkpointContext/index.js"),countContext=__webpack_require__("./packages/story-editor/src/components/checklist/countContext/index.js"),react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),src=__webpack_require__("./packages/react/src/index.ts"),constants=__webpack_require__("./packages/design-system/src/utils/constants.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),directionAware=__webpack_require__("./packages/story-editor/src/components/directionAware/index.js"),secondaryPopup=__webpack_require__("./packages/story-editor/src/components/secondaryPopup/index.js"),tablist=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),icons_checkbox=__webpack_require__("./packages/design-system/src/icons/checkbox.svg"),toggleButton=__webpack_require__("./packages/story-editor/src/components/toggleButton/index.js"),checklist_constants=__webpack_require__("./packages/story-editor/src/components/checklist/constants.js"),noop=__webpack_require__("./packages/story-editor/src/utils/noop.ts");function Toggle(t0){const $=(0,dist.c)(13),{isOpen:t1,popupId:t2,onClick:t3}=t0,isOpen=void 0!==t1&&t1,popupId=void 0===t2?"":t2,onClick=void 0===t3?noop.l:t3,priorityCount=(0,countContext.L_)(checklist_constants.co.PRIORITY),{checkpoint:checkpoint_0}=(0,checkpointContext.Em)(_temp);let t4,t5;$[0]!==checkpoint_0||$[1]!==priorityCount?(t4=()=>checkpoint_0===checklist_constants.xh.ALL?priorityCount:0,t5=[checkpoint_0,priorityCount],$[0]=checkpoint_0,$[1]=priorityCount,$[2]=t4,$[3]=t5):(t4=$[2],t5=$[3]);const notificationCount=(0,src.Kr)(t4,t5);let t6,t7,t8;return $[4]===Symbol.for("react.memo_cache_sentinel")?(t6=(0,i18n.__)("Checklist","web-stories"),$[4]=t6):t6=$[4],$[5]!==notificationCount?(t7=notificationCount>0?(0,sprintf.A)((0,i18n._n)("Checklist: %s unaddressed issue","Checklist: %s unaddressed issues",notificationCount,"web-stories"),notificationCount):(0,i18n.__)("Checklist","web-stories"),$[5]=notificationCount,$[6]=t7):t7=$[6],$[7]!==isOpen||$[8]!==notificationCount||$[9]!==onClick||$[10]!==popupId||$[11]!==t7?(t8=react.createElement(toggleButton.f,{"aria-owns":popupId,onClick,isOpen,MainIcon:icons_checkbox.A,label:t6,"aria-label":t7,notificationCount}),$[7]=isOpen,$[8]=notificationCount,$[9]=onClick,$[10]=popupId,$[11]=t7,$[12]=t8):t8=$[12],t8}function _temp(t0){const{state:t1}=t0,{checkpoint}=t1;return{checkpoint}}Toggle.propTypes={isOpen:prop_types_default().bool,popupId:prop_types_default().string,onClick:prop_types_default().func},Toggle.__docgenInfo={description:"",methods:[],displayName:"Toggle",props:{isOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},popupId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"function noop() {\n  return undefined;\n}",computed:!1},description:"",type:{name:"func"},required:!1}}};var checklistContent=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContent/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/checklist/styles.js");const Wrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"checklist__Wrapper",componentId:"sc-ai4sw8-0"})(["z-index:",";"],zIndex.GM),StyledNavigationWrapper=(0,styled_components_browser_esm.Ay)(secondaryPopup._B).withConfig({displayName:"checklist__StyledNavigationWrapper",componentId:"sc-ai4sw8-1"})([""]),ThroughputPopup=(0,src.Rf)((function ThroughputPopup(t0,ref){const $=(0,dist.c)(22),{isOpen,children,close}=t0,closeButtonRef=(0,src.li)(),{checklistFocused:checklistFocused_0,isChecklistMounted:isChecklistMounted_0,resetChecklistFocused:resetChecklistFocused_0,setIsChecklistMounted:setIsChecklistMounted_0}=(0,checklistContext.q)(checklist_temp);let t1,t2,t3,t4,t5,t6;return $[0]!==checklistFocused_0||$[1]!==closeButtonRef||$[2]!==resetChecklistFocused_0?(t1=()=>{checklistFocused_0&&closeButtonRef.current&&closeButtonRef.current.focus(),resetChecklistFocused_0()},$[0]=checklistFocused_0,$[1]=closeButtonRef,$[2]=resetChecklistFocused_0,$[3]=t1):t1=$[3],$[4]!==checklistFocused_0||$[5]!==resetChecklistFocused_0?(t2=[checklistFocused_0,resetChecklistFocused_0],$[4]=checklistFocused_0,$[5]=resetChecklistFocused_0,$[6]=t2):t2=$[6],(0,src.vJ)(t1,t2),$[7]!==setIsChecklistMounted_0?(t3=()=>setIsChecklistMounted_0(!0),t4=()=>setIsChecklistMounted_0(!1),$[7]=setIsChecklistMounted_0,$[8]=t3,$[9]=t4):(t3=$[8],t4=$[9]),$[10]!==children||$[11]!==close||$[12]!==closeButtonRef||$[13]!==isChecklistMounted_0||$[14]!==isOpen||$[15]!==ref?(t5=isChecklistMounted_0?react.createElement(StyledNavigationWrapper,{ref,isOpen},react.createElement(secondaryPopup.IS,{ref:closeButtonRef,onClose:close,label:checklist_constants.U_,popupId:checklist_constants.DE}),react.createElement(tablist.I$,{id:"pre-publish-checklist","data-isexpanded":isOpen,"aria-label":(0,i18n.__)("Potential Story issues by category","web-stories")},children),react.createElement(checklistContent.nb,null)):children,$[10]=children,$[11]=close,$[12]=closeButtonRef,$[13]=isChecklistMounted_0,$[14]=isOpen,$[15]=ref,$[16]=t5):t5=$[16],$[17]!==isOpen||$[18]!==t3||$[19]!==t4||$[20]!==t5?(t6=react.createElement(secondaryPopup.Ay,{popupId:checklist_constants.DE,isOpen,ariaLabel:checklist_constants.U_,shouldKeepMounted:!0,onEnter:t3,onExited:t4},t5),$[17]=isOpen,$[18]=t3,$[19]=t4,$[20]=t5,$[21]=t6):t6=$[21],t6}));function Checklist(t0){const $=(0,dist.c)(63),{items:t1}=t0;let t2;$[0]!==t1?(t2=void 0===t1?{}:t1,$[0]=t1,$[1]=t2):t2=$[1];const items=t2,{close:close_0,openPanel:openPanel_0,toggle:toggle_0,isOpen:isOpen_0,isChecklistMounted:isChecklistMounted_0,setOpenPanel:setOpenPanel_0}=(0,checklistContext.q)(_temp2),priorityCount=(0,countContext.L_)(checklist_constants.co.PRIORITY),designCount=(0,countContext.L_)(checklist_constants.co.DESIGN),accessibilityCount=(0,countContext.L_)(checklist_constants.co.ACCESSIBILITY),{checkpoint:checkpoint_0}=(0,checkpointContext.Em)(_temp3),navRef=(0,src.li)();let t3,t4;$[2]!==setOpenPanel_0?(t3=panelName=>()=>setOpenPanel_0((currentOpenPanel=>currentOpenPanel===panelName?null:panelName)),t4=[setOpenPanel_0],$[2]=setOpenPanel_0,$[3]=t3,$[4]=t4):(t3=$[3],t4=$[4]);const handleOpenPanel=(0,src.hb)(t3,t4);let t5,t6,t7,t8;$[5]!==isChecklistMounted_0||$[6]!==navRef?(t5=()=>{if(isChecklistMounted_0){const firstFocusableChild=navRef.current?.querySelector(constants.E.join(", "));firstFocusableChild?.focus()}},$[5]=isChecklistMounted_0,$[6]=navRef,$[7]=t5):t5=$[7],$[8]!==isChecklistMounted_0?(t6=[isChecklistMounted_0],$[8]=isChecklistMounted_0,$[9]=t6):t6=$[9],(0,src.vJ)(t5,t6),$[10]!==checkpoint_0||$[11]!==setOpenPanel_0?(t7=()=>{checkpoint_0&&setOpenPanel_0(checklist_constants.Q1[checkpoint_0])},t8=[checkpoint_0,setOpenPanel_0],$[10]=checkpoint_0,$[11]=setOpenPanel_0,$[12]=t7,$[13]=t8):(t7=$[12],t8=$[13]),(0,src.vJ)(t7,t8);const visiblePanels=checklist_constants.I$[checkpoint_0];let t9;$[14]!==priorityCount||$[15]!==visiblePanels?(t9=visiblePanels.includes(checklist_constants.co.PRIORITY)?priorityCount:0,$[14]=priorityCount,$[15]=visiblePanels,$[16]=t9):t9=$[16];const priorityBadgeCount=t9;let t10;$[17]!==designCount||$[18]!==visiblePanels?(t10=visiblePanels.includes(checklist_constants.co.DESIGN)?designCount:0,$[17]=designCount,$[18]=visiblePanels,$[19]=t10):t10=$[19];const designBadgeCount=t10;let t11;$[20]!==accessibilityCount||$[21]!==visiblePanels?(t11=visiblePanels.includes(checklist_constants.co.ACCESSIBILITY)?accessibilityCount:0,$[20]=accessibilityCount,$[21]=visiblePanels,$[22]=t11):t11=$[22];const accessibilityBadgeCount=t11;let t12,t13;$[23]!==accessibilityBadgeCount||$[24]!==designBadgeCount||$[25]!==priorityBadgeCount?(t12=[priorityBadgeCount,designBadgeCount,accessibilityBadgeCount].filter(_temp4),$[23]=accessibilityBadgeCount,$[24]=designBadgeCount,$[25]=priorityBadgeCount,$[26]=t12):t12=$[26],$[27]!==t12.length?(t13=(0,styles.fj)(t12.length),$[27]=t12.length,$[28]=t13):t13=$[28];const maxPanelHeight=t13,{Priority,Design,Accessibility}=items;let t14,t15,t16,t17,t18,t19;return $[29]!==Priority||$[30]!==handleOpenPanel||$[31]!==isOpen_0||$[32]!==maxPanelHeight||$[33]!==openPanel_0||$[34]!==priorityBadgeCount?(t14=Priority&&react.createElement(checklistContent.e_,{badgeCount:priorityBadgeCount,isOpen:isOpen_0&&openPanel_0===checklist_constants.co.PRIORITY,onClick:handleOpenPanel(checklist_constants.co.PRIORITY),maxHeight:maxPanelHeight,title:checklist_constants.Bi[checklist_constants.co.PRIORITY]},react.createElement(Priority,null)),$[29]=Priority,$[30]=handleOpenPanel,$[31]=isOpen_0,$[32]=maxPanelHeight,$[33]=openPanel_0,$[34]=priorityBadgeCount,$[35]=t14):t14=$[35],$[36]!==Design||$[37]!==designBadgeCount||$[38]!==handleOpenPanel||$[39]!==isOpen_0||$[40]!==maxPanelHeight||$[41]!==openPanel_0?(t15=Design&&react.createElement(checklistContent.Gl,{badgeCount:designBadgeCount,isOpen:isOpen_0&&openPanel_0===checklist_constants.co.DESIGN,onClick:handleOpenPanel(checklist_constants.co.DESIGN),maxHeight:maxPanelHeight,title:checklist_constants.Bi[checklist_constants.co.DESIGN]},react.createElement(Design,null)),$[36]=Design,$[37]=designBadgeCount,$[38]=handleOpenPanel,$[39]=isOpen_0,$[40]=maxPanelHeight,$[41]=openPanel_0,$[42]=t15):t15=$[42],$[43]!==Accessibility||$[44]!==accessibilityBadgeCount||$[45]!==handleOpenPanel||$[46]!==isOpen_0||$[47]!==maxPanelHeight||$[48]!==openPanel_0?(t16=Accessibility&&react.createElement(checklistContent.Cj,{badgeCount:accessibilityBadgeCount,isOpen:isOpen_0&&openPanel_0===checklist_constants.co.ACCESSIBILITY,onClick:handleOpenPanel(checklist_constants.co.ACCESSIBILITY),maxHeight:maxPanelHeight,title:checklist_constants.Bi[checklist_constants.co.ACCESSIBILITY]},react.createElement(Accessibility,null)),$[43]=Accessibility,$[44]=accessibilityBadgeCount,$[45]=handleOpenPanel,$[46]=isOpen_0,$[47]=maxPanelHeight,$[48]=openPanel_0,$[49]=t16):t16=$[49],$[50]!==close_0||$[51]!==isOpen_0||$[52]!==navRef||$[53]!==t14||$[54]!==t15||$[55]!==t16?(t17=react.createElement(ThroughputPopup,{ref:navRef,close:close_0,isOpen:isOpen_0},t14,t15,t16),$[50]=close_0,$[51]=isOpen_0,$[52]=navRef,$[53]=t14,$[54]=t15,$[55]=t16,$[56]=t17):t17=$[56],$[57]!==isOpen_0||$[58]!==toggle_0?(t18=react.createElement(Toggle,{isOpen:isOpen_0,onClick:toggle_0,popupId:checklist_constants.DE}),$[57]=isOpen_0,$[58]=toggle_0,$[59]=t18):t18=$[59],$[60]!==t17||$[61]!==t18?(t19=react.createElement(directionAware.A,null,react.createElement(Wrapper,{role:"region","aria-label":checklist_constants.U_},t17,t18)),$[60]=t17,$[61]=t18,$[62]=t19):t19=$[62],t19}function _temp4(num){return Boolean(num)}function _temp3(t0){const{state:t1}=t0,{checkpoint}=t1;return{checkpoint}}function _temp2(t0){const{actions:t1,state:t2}=t0,{close,toggle,setOpenPanel}=t1,{isOpen,isChecklistMounted,openPanel}=t2;return{close,toggle,isOpen,isChecklistMounted,openPanel,setOpenPanel}}function checklist_temp(t0){const{state:t1,actions:t2}=t0,{isChecklistMounted,checklistFocused}=t1,{setIsChecklistMounted,resetChecklistFocused}=t2;return{checklistFocused,isChecklistMounted,resetChecklistFocused,setIsChecklistMounted}}ThroughputPopup.propTypes={isOpen:prop_types_default().bool.isRequired,close:prop_types_default().func.isRequired,children:prop_types_default().arrayOf(prop_types_default().node).isRequired},Checklist.propTypes={items:prop_types_default().shape({Priority:prop_types_default().elementType,Design:prop_types_default().elementType,Accessibility:prop_types_default().elementType})},Checklist.__docgenInfo={description:"",methods:[],displayName:"Checklist",props:{items:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{Priority:{name:"elementType",required:!1},Design:{name:"elementType",required:!1},Accessibility:{name:"elementType",required:!1}}},required:!1}}};var app=__webpack_require__("./packages/story-editor/src/app/index.js"),highlights=__webpack_require__("./packages/story-editor/src/app/highlights/index.ts"),checklistCard=__webpack_require__("./packages/story-editor/src/components/checklistCard/index.js"),thumbnail=__webpack_require__("./packages/story-editor/src/components/thumbnail/index.js"),utils=__webpack_require__("./packages/story-editor/src/components/checklist/utils/index.js"),popupMountedContext=__webpack_require__("./packages/story-editor/src/components/checklist/popupMountedContext.js");const ElementLinkTappableRegionTooBig=()=>{const $=(0,dist.c)(19),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(elementLinkTappableRegionTooBig_temp),pageSize=(0,app.gK)(elementLinkTappableRegionTooBig_temp2);let t0,t1;$[0]!==pageSize||$[1]!==pages?(t0=()=>pageSize.height>0&&(0,utils.PD)(pages,(element=>function isElementLinkTappableRegionTooBig(element,pageSize){return!(!["text","image","shape","gif","video"].includes(element.type)||!element.link?.url?.length)&&element.width*element.height/(pageSize.width*pageSize.height)*100>80}(element,pageSize))),t1=[pages,pageSize],$[0]=pageSize,$[1]=pages,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(elementLinkTappableRegionTooBig_temp3);let t2,t3;$[4]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({elementId,pageId}),t3=[setHighlights_0],$[4]=setHighlights_0,$[5]=t2,$[6]=t3):(t2=$[5],t3=$[6]);const handleClick=(0,src.hb)(t2,t3),isRendered=elements.length>0;(0,countContext.FL)("ElementLinkTappableRegionTooBig",isRendered);const{title,footer}=checklist_constants.br.linkTappableRegionTooBig;let t4,t5;if($[7]!==elements?(t4=elements||[],$[7]=elements,$[8]=t4):t4=$[8],$[9]!==handleClick||$[10]!==t4){let t6;$[12]!==handleClick?(t6=element_0=>react.createElement(thumbnail.Vz,{key:element_0.id,onClick:()=>handleClick(element_0.id,element_0.pageId),type:thumbnail.RO.TEXT,displayBackground:react.createElement(thumbnail.AW,{page:element_0}),"aria-label":(0,i18n.__)("Go to offending link","web-stories")}),$[12]=handleClick,$[13]=t6):t6=$[13],t5=t4.map(t6),$[9]=handleClick,$[10]=t4,$[11]=t5}else t5=$[11];const thumbnails=t5;let t6;return $[14]!==elements.length||$[15]!==isChecklistMounted||$[16]!==isRendered||$[17]!==thumbnails?(t6=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:elements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}),$[14]=elements.length,$[15]=isChecklistMounted,$[16]=isRendered,$[17]=thumbnails,$[18]=t6):t6=$[18],t6};function elementLinkTappableRegionTooBig_temp(t0){const{state}=t0;return state?.pages}function elementLinkTappableRegionTooBig_temp2(t0){const{state:t1}=t0,{pageWidth,pageHeight}=t1;return{width:pageWidth,height:pageHeight}}function elementLinkTappableRegionTooBig_temp3(t0){const{setHighlights}=t0;return setHighlights}ElementLinkTappableRegionTooBig.__docgenInfo={description:"",methods:[],displayName:"ElementLinkTappableRegionTooBig"};function elementLinkTappableRegionTooSmall(element){return!(!["text","image","shape","gif","video"].includes(element.type)||!element.link?.url?.length)&&(element.width<48||element.height<48)}const ElementLinkTappableRegionTooSmall=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(elementLinkTappableRegionTooSmall_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,elementLinkTappableRegionTooSmall),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(elementLinkTappableRegionTooSmall_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({elementId,pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3);let t4;if($[6]!==elements||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=element=>react.createElement(thumbnail.Vz,{key:element.id,onClick:()=>handleClick(element.id,element.pageId),type:thumbnail.RO.TEXT,displayBackground:react.createElement(thumbnail.AW,{page:element}),"aria-label":(0,i18n.__)("Go to offending link","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=elements.map(t5),$[6]=elements,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4,isRendered=elements.length>0;(0,countContext.FL)("ElementLinkTappableRegionTooSmall",isRendered);const{title,footer}=checklist_constants.br.linkTappableRegionTooSmall;let t5;return $[11]!==elements.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:elements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}),$[11]=elements.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function elementLinkTappableRegionTooSmall_temp(t0){const{state}=t0;return state?.pages}function elementLinkTappableRegionTooSmall_temp2(t0){const{setHighlights}=t0;return setHighlights}ElementLinkTappableRegionTooSmall.__docgenInfo={description:"",methods:[],displayName:"ElementLinkTappableRegionTooSmall"};var typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts");const FirstPageAnimation=()=>{const $=(0,dist.c)(12),isChecklistMounted=(0,popupMountedContext.g)(),{updatePageProperties:updatePageProperties_0,pageId,pageAnimations}=(0,app.P3)(firstPageAnimation_temp);let t0,t1;$[0]!==pageId||$[1]!==updatePageProperties_0?(t0=()=>{updatePageProperties_0({pageId,properties:{animations:[]}})},t1=[updatePageProperties_0,pageId],$[0]=pageId,$[1]=updatePageProperties_0,$[2]=t0,$[3]=t1):(t0=$[2],t1=$[3]);const removeAnimations=(0,src.hb)(t0,t1);let t2;$[4]!==pageAnimations?(t2=function firstPageAnimation(animations){return Boolean(animations?.length)}(pageAnimations),$[4]=pageAnimations,$[5]=t2):t2=$[5];const isRendered=t2;let t3;$[6]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[6]=t3):t3=$[6];const onClick=(0,src.hb)(firstPageAnimation_temp2,t3),{title,footer}=checklist_constants.Bc.firstPageAnimation;let t4;return(0,countContext.FL)("FirstPageAnimation",isRendered),$[7]!==isChecklistMounted||$[8]!==isRendered||$[9]!==onClick||$[10]!==removeAnimations?(t4=isRendered&&isChecklistMounted?react.createElement(checklistCard.NU,{title,cta:react.createElement(checklistCard.qg,{"aria-label":(0,i18n.__)("Remove Animations","web-stories"),onClick:removeAnimations},(0,i18n.__)("Remove Animations","web-stories")),footer:react.createElement(react.Fragment,null,react.createElement(checklistCard.Oz,null,footer),react.createElement(checklistCard.Oz,{as:"span"},react.createElement(typography_link.N,{target:"_blank",rel:"noreferrer",onClick,href:"https://wp.stories.google/docs/how-to/animations/",size:types.$.XSmall},(0,i18n.__)("Learn more","web-stories"))))}):null,$[7]=isChecklistMounted,$[8]=isRendered,$[9]=onClick,$[10]=removeAnimations,$[11]=t4):t4=$[11],t4};function firstPageAnimation_temp(t0){const{actions:t1,state:t2}=t0,{updatePageProperties}=t1,{pages}=t2,page=pages?.at(0);return{updatePageProperties,pageId:page?.id,pageAnimations:page?.animations}}function firstPageAnimation_temp2(evt){(0,tracking_src.MP)(evt,"click_checklist_cover_animations")}function imageElementMissingAlt(element){return["gif","image"].includes(element.type)&&!element.alt?.length&&!element.resource?.alt?.length}FirstPageAnimation.__docgenInfo={description:"",methods:[],displayName:"FirstPageAnimation"};const ImageElementMissingAlt=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(imageElementMissingAlt_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,imageElementMissingAlt),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(imageElementMissingAlt_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({pageId,elementId,highlight:highlights.xP.AssistiveText}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.br.imagesMissingAltText,isRendered=elements.length>0;let t4;if((0,countContext.FL)("ImageElementMissingAlt",isRendered),$[6]!==elements||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=element=>react.createElement(thumbnail.Vz,{key:element.id,onClick:()=>handleClick(element.id,element.pageId),type:thumbnail.RO.IMAGE,displayBackground:react.createElement(thumbnail.AW,{page:element}),"aria-label":(0,i18n.__)("Go to offending video","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=elements.map(t5),$[6]=elements,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==elements.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:elements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}),$[11]=elements.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function imageElementMissingAlt_temp(t0){const{state}=t0;return state?.pages}function imageElementMissingAlt_temp2(t0){const{setHighlights}=t0;return setHighlights}ImageElementMissingAlt.__docgenInfo={description:"",methods:[],displayName:"ImageElementMissingAlt"};var list=__webpack_require__("./packages/design-system/src/components/typography/list/index.ts");function imageElementResolution(element){if(!["image","gif"].includes(element.type))return!1;const scale=(element.scale||100)/100;return element.resource?.height<element.height*scale*2||element.resource?.width<element.width*scale*2}const ImageElementResolution=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(imageElementResolution_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,imageElementResolution),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const failingElements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(imageElementResolution_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({pageId,elementId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.imageResolutionTooLow,isRendered=failingElements.length>0;let t4;if((0,countContext.FL)("ImageElementResolution",isRendered),$[6]!==failingElements||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=element=>react.createElement(thumbnail.Vz,{key:element.id,onClick:()=>handleClick(element.id,element.pageId),type:thumbnail.RO.IMAGE,displayBackground:react.createElement(thumbnail.AW,{page:element}),"aria-label":(0,i18n.__)("Go to offending image","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=failingElements.map(t5),$[6]=failingElements,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==failingElements.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:failingElements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer)),thumbnails}),$[11]=failingElements.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function imageElementResolution_temp(t0){const{state}=t0;return state?.pages}function imageElementResolution_temp2(t0){const{setHighlights}=t0;return setHighlights}ImageElementResolution.__docgenInfo={description:"",methods:[],displayName:"ImageElementResolution"};var dimensions=__webpack_require__("./packages/units/src/dimensions.ts"),getBoundRect=__webpack_require__("./packages/units/src/getBoundRect.ts"),src_constants=__webpack_require__("./packages/units/src/constants.ts"),getMediaSizePositionProps=__webpack_require__("./packages/media/src/getMediaSizePositionProps.ts"),preloadImage=__webpack_require__("./packages/media/src/preloadImage.ts"),createSolidFromString=__webpack_require__("./packages/patterns/src/createSolidFromString.ts"),rich_text_src=__webpack_require__("./packages/rich-text/src/index.ts"),contrastUtils=__webpack_require__("./packages/story-editor/src/utils/contrastUtils.ts"),getMediaBaseColor=__webpack_require__("./packages/story-editor/src/utils/getMediaBaseColor.ts");const OVERLAP_RATIO=1/3;function isOverlapSignificant(overlapArea,textBoxArea){return overlapArea>=OVERLAP_RATIO*textBoxArea}function getBackgroundsForElement(textElement,potentialBackgroundElements,page){const{pageSize}=page,textPos=(0,dimensions.YH)(textElement,pageSize?.width,pageSize?.height),textBox=(0,getBoundRect.A)([textPos]),textBoxArea=textBox.width*textBox.height,elementOverlaps=[...potentialBackgroundElements].map(((element,index)=>{const bgPos=(0,dimensions.YH)(element,pageSize?.width,pageSize?.height),bgBox=(0,getBoundRect.A)([bgPos]),overlappingArea=function getOverlappingArea(a,b){const dx=Math.min(a.endX,b.endX)-Math.max(a.startX,b.startX),dy=Math.min(a.endY,b.endY)-Math.max(a.startY,b.startY);return dx>=0&&dy>=0?dx*dy:0}(textBox,bgBox);return{element:element.isBackground||element.isDefaultBackground?{...element,backgroundColor:page?.backgroundColor}:element,area:overlappingArea,index}})).reverse();let unoccludedArea=textBoxArea;const significantElements=[];for(const overlap of elementOverlaps){if(!isOverlapSignificant(unoccludedArea,textBoxArea))break;isOverlapSignificant(overlap.area,textBoxArea)&&significantElements.push(overlap.element),unoccludedArea-=overlap.area}return significantElements}function getTextImageBackgroundColor({background,text,page}){const{pageSize}=page,safeZoneDiff=(pageSize?.width/src_constants.yK-pageSize?.width/src_constants.iZ)/2,textPos=(0,dimensions.YH)(text,pageSize?.width,pageSize?.height),textBox=(0,getBoundRect.A)([textPos]),{resource,scale,focalX,focalY}=background,bgBox=(0,dimensions.YH)(background,pageSize?.width,pageSize?.height),{width,height}=bgBox,bgMediaBox=(0,getMediaSizePositionProps.A)(resource,width,height,scale,focalX,focalY);return async function getOverlapBgColor({bgImage,bgBox,overlapBox}){function getImageData(imageNode){return new Promise(((resolve,reject)=>{try{const canvas=document.createElement("canvas");canvas.width=bgImage.width,canvas.height=bgImage.height;const ctx=canvas.getContext("2d");if(bgImage.rotationAngle){const translationOffsetX=bgImage.offsetX+bgBox.width/2,translationOffsetY=bgImage.offsetY+bgBox.height/2;ctx.translate(translationOffsetX,translationOffsetY),ctx.rotate(bgImage.rotationAngle*TO_RADIANS),ctx.translate(-translationOffsetX,-translationOffsetY)}let xPos=0,yPos=0;const{flip}=bgImage;(flip.vertical||flip.horizontal)&&(xPos=flip.horizontal?-1*bgImage.width:0,yPos=flip.vertical?-1*bgImage.height:0,ctx.scale(flip.horizontal?-1:1,flip.vertical?-1:1)),ctx.drawImage(imageNode,xPos,yPos,bgImage.width,bgImage.height);resolve(ctx.getImageData(overlapBox.x,overlapBox.y,overlapBox.width,overlapBox.height))}catch(e){reject(e)}}))}const image=await(0,preloadImage.A)({src:bgImage.src,width:bgImage.width,height:bgImage.height}),imgData=await getImageData(image),cropCanvas=document.createElement("canvas");cropCanvas.width=overlapBox.width,cropCanvas.height=overlapBox.height;cropCanvas.getContext("2d").putImageData(imgData,0,0);const hexColor=await(0,getMediaBaseColor.A)(cropCanvas.toDataURL(),cropCanvas.width,cropCanvas.height),{color:{r,g,b}}=(0,createSolidFromString.A)(hexColor);return{r,g,b}}({bgImage:{offsetX:bgMediaBox.offsetX,offsetY:bgMediaBox.offsetY,src:background.resource.src,width:bgMediaBox.width,height:bgMediaBox.height,rotationAngle:background.isBackground?void 0:background.rotationAngle,flip:background.flip},bgBox,overlapBox:{x:background.isBackground?bgMediaBox.offsetX+Math.abs(textBox.startX):bgMediaBox.offsetX+Math.abs(textBox.startX)-bgBox.x,y:background.isBackground?bgMediaBox.offsetY+Math.abs(textBox.startY+safeZoneDiff):bgMediaBox.offsetY+Math.abs(textBox.startY+safeZoneDiff)-(bgBox.y+safeZoneDiff),width:textBox.width,height:textBox.height}}).catch((()=>{}))}const TO_RADIANS=Math.PI/180;function getTextShapeBackgroundColor({background}){return background?.backgroundColor?.color}function getBackgroundColorByType(element){switch(element.type){case"image":return getTextImageBackgroundColor;case"shape":return getTextShapeBackgroundColor;default:return noop.l}}async function getPagesWithFailedContrast(storyPages,pageSize){const promises=[];(storyPages||[]).forEach((page=>{const maybeTextContrastResult=async function pageBackgroundTextLowContrast(page){const backgroundColorPromises=[];page.elements.forEach(((element,index)=>{if("text"===element.type&&"NONE"===element.backgroundTextMode){const textStyleColors=function getTextStyleColors(element){return(0,rich_text_src.iA)(element.content)}(element),potentialBackgroundElements=page.elements.slice(0,index),textBackgrounds=getBackgroundsForElement(element,potentialBackgroundElements,page);for(const backgroundElement of textBackgrounds){const getBackgroundColor=getBackgroundColorByType(backgroundElement)({background:backgroundElement,text:element,page}),prepare=getBackgroundColorResult=>getBackgroundColorResult&&{backgroundColor:getBackgroundColorResult,textStyleColors,fontSize:element.fontSize,id:element.id,isBackgroundElement:backgroundElement.isBackground},bgColorCompare=getBackgroundColor instanceof Promise?getBackgroundColor.then(prepare):prepare(getBackgroundColor);backgroundColorPromises.push(bgColorCompare)}}}));const bgColorComparisons=await Promise.all(backgroundColorPromises);return bgColorComparisons.map((compareObj=>function textBackgroundHasLowContrast({backgroundColor,textStyleColors,fontSize}={}){return!(!textStyleColors||!backgroundColor)&&textStyleColors.some((styleColor=>{if(!styleColor)return!1;const textLuminance=(0,contrastUtils.bE)(styleColor),backgroundLuminance=(0,contrastUtils.wI)(backgroundColor);return!(0,contrastUtils.kg)(textLuminance,backgroundLuminance,fontSize).WCAG_AA}))}(compareObj)&&{id:compareObj.id,isBackground:compareObj.isBackgroundElement})).filter((({id})=>id))}({...page,pageSize});maybeTextContrastResult instanceof Promise?promises.push(maybeTextContrastResult.then((result=>({result,page})))):promises.push(maybeTextContrastResult)}));return(await Promise.all(promises)).filter((results=>results.result.some((({id})=>id)))).map((page=>page))}const PageBackgroundTextLowContrast=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)();let t0;$[0]===Symbol.for("react.memo_cache_sentinel")?(t0=[],$[0]=t0):t0=$[0];const[failingPages,setFailingPages]=(0,src.J0)(t0),storyPages=(0,app.P3)(component_temp),pageSize=(0,app.gK)(component_temp2);let t1,t2;$[1]!==pageSize||$[2]!==setFailingPages||$[3]!==storyPages?(t1=()=>{let isStale=!1;return getPagesWithFailedContrast(storyPages,pageSize).then((failures=>{if(isStale)return;const failedPages=failures.map(component_temp3);setFailingPages(failedPages)})).catch(component_temp4),()=>{isStale=!0}},$[1]=pageSize,$[2]=setFailingPages,$[3]=storyPages,$[4]=t1):t1=$[4],$[5]!==pageSize||$[6]!==storyPages?(t2=[storyPages,pageSize],$[5]=pageSize,$[6]=storyPages,$[7]=t2):t2=$[7],(0,src.vJ)(t1,t2);const setHighlights_0=(0,highlights.N)(_temp5);let t3,t4;$[8]!==setHighlights_0?(t3=pageId=>setHighlights_0({pageId}),t4=[setHighlights_0],$[8]=setHighlights_0,$[9]=t3,$[10]=t4):(t3=$[9],t4=$[10]);const handleClick=(0,src.hb)(t3,t4),isRendered=failingPages.length>0;(0,countContext.FL)("PageBackgroundTextLowContrast",isRendered);const{title,footer}=checklist_constants.br.lowContrast;let t5;return $[11]!==failingPages||$[12]!==handleClick||$[13]!==isChecklistMounted||$[14]!==isRendered?(t5=isRendered&&isChecklistMounted?react.createElement(checklistCard.NU,{title,cardType:failingPages.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails:failingPages.map((page_0=>react.createElement(thumbnail.Vz,{key:page_0.id,onClick:()=>handleClick(page_0.id),type:thumbnail.RO.PAGE,displayBackground:react.createElement(utils.ew,{page:page_0}),"aria-label":(0,i18n.__)("Go to offending page","web-stories")})))}):null,$[11]=failingPages,$[12]=handleClick,$[13]=isChecklistMounted,$[14]=isRendered,$[15]=t5):t5=$[15],t5};function component_temp(t0){const{state}=t0;return state?.pages}function component_temp2(t0){const{state:t1}=t0,{pageWidth,pageHeight}=t1;return{width:pageWidth,height:pageHeight}}function component_temp3(t0){const{page}=t0;return page}function component_temp4(){}function _temp5(t0){const{setHighlights}=t0;return setHighlights}PageBackgroundTextLowContrast.__docgenInfo={description:"",methods:[],displayName:"PageBackgroundTextLowContrast"};var story=__webpack_require__("./packages/story-editor/src/app/story/index.ts");function pageTooLittleText(page){return(0,utils.J4)(page)<checklist_constants.rZ}const PageTooLittleText=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,story.P3)(pageTooLittleText_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.Ku)(pages,pageTooLittleText),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const failingPages=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(pageTooLittleText_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=pageId=>setHighlights_0({pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.tooLittlePageText,isRendered=failingPages.length>0;let t4;if((0,countContext.FL)("PageTooLittleText",isRendered),$[6]!==failingPages||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=page=>react.createElement(thumbnail.Vz,{key:page.id,onClick:()=>handleClick(page.id),type:thumbnail.RO.PAGE,displayBackground:react.createElement(utils.ew,{page}),"aria-label":(0,i18n.__)("Go to offending page","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=failingPages.map(t5),$[6]=failingPages,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==failingPages.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted?react.createElement(checklistCard.NU,{title,cardType:failingPages.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}):null,$[11]=failingPages.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function pageTooLittleText_temp(t0){const{state}=t0;return state?.pages}function pageTooLittleText_temp2(t0){const{setHighlights}=t0;return setHighlights}function pageTooManyLinks(page){return page.elements.filter((element=>Boolean(element.link?.url?.length))).length>checklist_constants.dp}PageTooLittleText.__docgenInfo={description:"",methods:[],displayName:"PageTooLittleText"};const PageTooManyLinks=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(pageTooManyLinks_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.Ku)(pages,pageTooManyLinks),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const failingPages=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(pageTooManyLinks_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=pageId=>setHighlights_0({pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.tooManyLinksOnPage,isRendered=failingPages.length>0;let t4;if((0,countContext.FL)("PageTooManyLinks",isRendered),$[6]!==failingPages||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=page=>react.createElement(thumbnail.Vz,{key:page.id,onClick:()=>handleClick(page.id),type:thumbnail.RO.PAGE,displayBackground:react.createElement(utils.ew,{page}),"aria-label":(0,i18n.__)("Go to offending page","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=failingPages.map(t5),$[6]=failingPages,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==failingPages.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:failingPages.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}),$[11]=failingPages.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function pageTooManyLinks_temp(t0){const{state}=t0;return state?.pages}function pageTooManyLinks_temp2(t0){const{setHighlights}=t0;return setHighlights}function pageTooMuchText(page){return(0,utils.J4)(page)>checklist_constants.BY}PageTooManyLinks.__docgenInfo={description:"",methods:[],displayName:"PageTooManyLinks"};const PageTooMuchText=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,story.P3)(pageTooMuchText_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.Ku)(pages,pageTooMuchText),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const failingPages=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(pageTooMuchText_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=t4=>{const{pageId,elements}=t4;return setHighlights_0({pageId,elements})},t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.tooMuchPageText,isRendered=failingPages.length>0;let t4;if((0,countContext.FL)("PageTooMuchText",isRendered),$[6]!==failingPages||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=page=>react.createElement(thumbnail.Vz,{key:page.id,onClick:()=>handleClick({pageId:page.id,elements:page.elements.filter(pageTooMuchText_temp3)}),type:thumbnail.RO.PAGE,displayBackground:react.createElement(utils.ew,{page}),"aria-label":(0,i18n.__)("Go to offending page","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=failingPages.map(t5),$[6]=failingPages,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==failingPages.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:failingPages.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer)),thumbnails}),$[11]=failingPages.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function pageTooMuchText_temp(t0){const{state}=t0;return state?.pages}function pageTooMuchText_temp2(t0){const{setHighlights}=t0;return setHighlights}function pageTooMuchText_temp3(t0){const{type}=t0;return"text"===type}PageTooMuchText.__docgenInfo={description:"",methods:[],displayName:"PageTooMuchText"};const PublisherLogoMissing=()=>{const $=(0,dist.c)(9),isChecklistMounted=(0,popupMountedContext.g)(),publisherLogo=(0,app.P3)(publisherLogoMissing_temp),setHighlights_0=(0,highlights.N)(publisherLogoMissing_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.PublisherLogo}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1);let t2;$[3]!==publisherLogo?(t2=function publisherLogoMissing(publisherLogo){return!publisherLogo?.id}(publisherLogo),$[3]=publisherLogo,$[4]=t2):t2=$[4];const isRendered=t2;(0,countContext.FL)("PublisherLogoMissing",isRendered);const{footer,title}=checklist_constants.RJ.noPublisherLogo;let t3;return $[5]!==handleClick||$[6]!==isChecklistMounted||$[7]!==isRendered?(t3=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,titleProps:{onClick:handleClick},footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer))}),$[5]=handleClick,$[6]=isChecklistMounted,$[7]=isRendered,$[8]=t3):t3=$[8],t3};function publisherLogoMissing_temp(t0){const{state}=t0;return state?.story?.publisherLogo}function publisherLogoMissing_temp2(t0){const{setHighlights}=t0;return setHighlights}PublisherLogoMissing.__docgenInfo={description:"",methods:[],displayName:"PublisherLogoMissing"};const PublisherLogoSize=()=>{const $=(0,dist.c)(9),isChecklistMounted=(0,popupMountedContext.g)(),publisherLogo=(0,app.P3)(publisherLogoSize_temp),setHighlights_0=(0,highlights.N)(publisherLogoSize_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.PublisherLogo}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1);let t2;$[3]!==publisherLogo?(t2=function publisherLogoSize(publisherLogo){return Boolean(publisherLogo?.id)&&(publisherLogo?.height<checklist_constants.uS||publisherLogo?.width<checklist_constants.uS)}(publisherLogo),$[3]=publisherLogo,$[4]=t2):t2=$[4];const isRendered=t2;(0,countContext.FL)("PublisherLogoSize",isRendered);const{footer,title}=checklist_constants.RJ.logoTooSmall;let t3;return $[5]!==handleClick||$[6]!==isChecklistMounted||$[7]!==isRendered?(t3=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,titleProps:{onClick:handleClick},footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer))}),$[5]=handleClick,$[6]=isChecklistMounted,$[7]=isRendered,$[8]=t3):t3=$[8],t3};function publisherLogoSize_temp(t0){const{state}=t0;return state?.story?.publisherLogo}function publisherLogoSize_temp2(t0){const{setHighlights}=t0;return setHighlights}PublisherLogoSize.__docgenInfo={description:"",methods:[],displayName:"PublisherLogoSize"};const StoryAmpValidationErrors=()=>{const $=(0,dist.c)(17),ampValidationErrorsRef=(0,src.li)(),{isSaving,link,isPublic}=(0,app.P3)(storyAmpValidationErrors_temp),[isRendered,setIsRendered]=(0,src.J0)(!1);let t0,t1,t2,t3;$[0]!==ampValidationErrorsRef||$[1]!==isPublic||$[2]!==isSaving||$[3]!==link||$[4]!==setIsRendered?(t0=()=>{let isMounted=!0;if(!isSaving){if(!isPublic)return()=>{isMounted=!1};(async function getStoryAmpValidationErrors(link){try{const response=await fetch(link),storyMarkup=await response.text();await window.amp.validator.init();const validationResult=window.amp.validator.validateString(storyMarkup),{status:markupStatus,errors}=validationResult;return"FAIL"===markupStatus&&errors.filter((({severity})=>"ERROR"===severity)).filter((({code,params})=>!("MISSING_URL"===code&&params?.[0].startsWith("poster")||"MISSING_URL"===code&&params?.[0].startsWith("publisher-logo")||"INVALID_URL_PROTOCOL"===code&&params?.[0].startsWith("src")))).length>0}catch{return!1}})(link).then((hasErrors=>{isMounted&&(setIsRendered(hasErrors),hasErrors&&!ampValidationErrorsRef?.current&&(ampValidationErrorsRef.current=!0))}))}return()=>{isMounted=!1}},$[0]=ampValidationErrorsRef,$[1]=isPublic,$[2]=isSaving,$[3]=link,$[4]=setIsRendered,$[5]=t0):t0=$[5],$[6]!==isPublic||$[7]!==isSaving||$[8]!==link?(t1=[link,isPublic,isSaving],$[6]=isPublic,$[7]=isSaving,$[8]=link,$[9]=t1):t1=$[9],(0,src.vJ)(t0,t1),$[10]!==ampValidationErrorsRef||$[11]!==isRendered?(t2=()=>{isRendered&&ampValidationErrorsRef?.current&&(0,tracking_src.sx)("amp_validation_errors_found")},$[10]=ampValidationErrorsRef,$[11]=isRendered,$[12]=t2):t2=$[12],$[13]!==isRendered?(t3=[isRendered],$[13]=isRendered,$[14]=t3):t3=$[14],(0,src.vJ)(t2,t3),(0,countContext.FL)("StoryHasAmpErrors",isRendered);const{footer,title}=checklist_constants.RJ.ampValidation;let t4;return $[15]!==isRendered?(t4=isRendered&&react.createElement(checklistCard.NU,{title,footer:react.createElement(checklistCard.Oz,null,footer)}),$[15]=isRendered,$[16]=t4):t4=$[16],t4};function storyAmpValidationErrors_temp(t0){const{state}=t0;return{isSaving:state.meta.isSaving,link:state.story.link,isPublic:["publish","future"].includes(state.story.status)&&state.story.link&&!state.story.password?.length}}StoryAmpValidationErrors.__docgenInfo={description:"",methods:[],displayName:"StoryAmpValidationErrors"};const StoryMissingExcerpt=()=>{const $=(0,dist.c)(9),isChecklistMounted=(0,popupMountedContext.g)(),excerpt=(0,app.P3)(storyMissingExcerpt_temp),setHighlights_0=(0,highlights.N)(storyMissingExcerpt_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.Excerpt}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1),{title,footer}=checklist_constants.RJ.storyMissingDescription;let t2;$[3]!==excerpt?(t2=function storyMissingExcerpt(excerpt){return!excerpt?.length}(excerpt),$[3]=excerpt,$[4]=t2):t2=$[4];const isRendered=t2;let t3;return(0,countContext.FL)("StoryMissingExcerpt",isRendered),$[5]!==handleClick||$[6]!==isChecklistMounted||$[7]!==isRendered?(t3=isRendered&&isChecklistMounted?react.createElement(checklistCard.NU,{title,titleProps:{onClick:handleClick},footer:react.createElement(checklistCard.Oz,null,footer)}):null,$[5]=handleClick,$[6]=isChecklistMounted,$[7]=isRendered,$[8]=t3):t3=$[8],t3};function storyMissingExcerpt_temp(t0){const{state}=t0;return state?.story?.excerpt}function storyMissingExcerpt_temp2(t0){const{setHighlights}=t0;return setHighlights}StoryMissingExcerpt.__docgenInfo={description:"",methods:[],displayName:"StoryMissingExcerpt"};const StoryMissingTitle=()=>{const $=(0,dist.c)(9),isChecklistMounted=(0,popupMountedContext.g)(),storyTitle=(0,app.P3)(storyMissingTitle_temp),setHighlights_0=(0,highlights.N)(storyMissingTitle_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.StoryTitle}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1);let t2;$[3]!==storyTitle?(t2=function storyMissingTitle(title){return"string"!=typeof title||""===title?.trim()}(storyTitle),$[3]=storyTitle,$[4]=t2):t2=$[4];const isRendered=t2;(0,countContext.FL)("StoryMissingTitle",isRendered);const{footer,title}=checklist_constants.RJ.storyMissingTitle;let t3;return $[5]!==handleClick||$[6]!==isChecklistMounted||$[7]!==isRendered?(t3=isRendered&&isChecklistMounted?react.createElement(checklistCard.NU,{title,titleProps:{onClick:handleClick},footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer))}):null,$[5]=handleClick,$[6]=isChecklistMounted,$[7]=isRendered,$[8]=t3):t3=$[8],t3};function storyMissingTitle_temp(t0){const{state}=t0;return state?.story?.title}function storyMissingTitle_temp2(t0){const{setHighlights}=t0;return setHighlights}StoryMissingTitle.__docgenInfo={description:"",methods:[],displayName:"StoryMissingTitle"};const StoryPagesCount=()=>{const $=(0,dist.c)(10),isChecklistMounted=(0,popupMountedContext.g)(),numPages=(0,story.P3)(storyPagesCount_temp);let t0,t1;$[0]!==numPages?(t0=()=>function storyPagesCount(numPages){return{hasTooFewPages:numPages<checklist_constants.cc,hasTooManyPages:numPages>checklist_constants.Q5}}(numPages),t1=[numPages],$[0]=numPages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const{hasTooFewPages,hasTooManyPages}=(0,src.Kr)(t0,t1),{storyTooShort,storyTooLong}=checklist_constants.Bc;let t2;$[3]!==hasTooFewPages||$[4]!==hasTooManyPages?(t2=hasTooFewPages&&storyTooShort||hasTooManyPages&&storyTooLong||{},$[3]=hasTooFewPages,$[4]=hasTooManyPages,$[5]=t2):t2=$[5];const copySource=t2,isRendered=hasTooFewPages||hasTooManyPages;let t3;return(0,countContext.FL)("StoryPagesCount",isRendered),$[6]!==copySource||$[7]!==isChecklistMounted||$[8]!==isRendered?(t3=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title:copySource.title,footer:react.createElement(checklistCard.Oz,null,copySource.title)}),$[6]=copySource,$[7]=isChecklistMounted,$[8]=isRendered,$[9]=t3):t3=$[9],t3};function storyPagesCount_temp(t0){const{state}=t0;return state?.pages?.length}StoryPagesCount.__docgenInfo={description:"",methods:[],displayName:"StoryPagesCount"};const StoryPosterSize=()=>{const $=(0,dist.c)(10),isChecklistMounted=(0,popupMountedContext.g)(),featuredMedia=(0,app.P3)(storyPosterSize_temp),setHighlights_0=(0,highlights.N)(storyPosterSize_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.Poster}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1),{footer,title}=checklist_constants.RJ.storyPosterSize;let t2,t3;$[3]!==featuredMedia?(t2=()=>function storyPosterSize(featuredMedia){return!(0,utils.GB)({featuredMedia})&&(featuredMedia?.height<checklist_constants.iO||featuredMedia?.width<checklist_constants.vj||!(Math.abs(featuredMedia.width/featuredMedia.height-checklist_constants.Vf/checklist_constants.W4)<=.001))}(featuredMedia),t3=[featuredMedia],$[3]=featuredMedia,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const isRendered=(0,src.Kr)(t2,t3);let t4;return(0,countContext.FL)("StoryPosterSize",isRendered),$[6]!==handleClick||$[7]!==isChecklistMounted||$[8]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,titleProps:{onClick:handleClick},footer:react.createElement(checklistCard.TE.ej,null,react.createElement(list.B,{size:types.$.XSmall},footer))}),$[6]=handleClick,$[7]=isChecklistMounted,$[8]=isRendered,$[9]=t4):t4=$[9],t4};function storyPosterSize_temp(t0){const{state}=t0;return state?.story?.featuredMedia}function storyPosterSize_temp2(t0){const{setHighlights}=t0;return setHighlights}StoryPosterSize.__docgenInfo={description:"",methods:[],displayName:"StoryPosterSize"};const StoryTitleLength=()=>{const $=(0,dist.c)(9),isChecklistMounted=(0,popupMountedContext.g)(),storyTitle=(0,story.P3)(storyTitleLength_temp),setHighlights_0=(0,highlights.N)(storyTitleLength_temp2);let t0,t1;$[0]!==setHighlights_0?(t0=()=>setHighlights_0({highlight:highlights.xP.StoryTitle}),t1=[setHighlights_0],$[0]=setHighlights_0,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const handleClick=(0,src.hb)(t0,t1);let t2;$[3]!==storyTitle?(t2=function storyTitleLength(title){return title?.length>checklist_constants.P$}(storyTitle),$[3]=storyTitle,$[4]=t2):t2=$[4];const isRendered=t2;(0,countContext.FL)("StoryTitleLength",isRendered);const{title,footer}=checklist_constants.RJ.storyTitleTooLong;let t3;return $[5]!==handleClick||$[6]!==isChecklistMounted||$[7]!==isRendered?(t3=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,footer:react.createElement(checklistCard.Oz,null,footer),titleProps:{onClick:handleClick}}),$[5]=handleClick,$[6]=isChecklistMounted,$[7]=isRendered,$[8]=t3):t3=$[8],t3};function storyTitleLength_temp(t0){const{state}=t0;return state?.story?.title}function storyTitleLength_temp2(t0){const{setHighlights}=t0;return setHighlights}function textElementFontSizeTooSmall(element){return"text"===element.type&&element.fontSize&&element.fontSize<checklist_constants.v0}StoryTitleLength.__docgenInfo={description:"",methods:[],displayName:"StoryTitleLength"};const TextElementFontSizeTooSmall=()=>{const $=(0,dist.c)(16),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(textElementFontSizeTooSmall_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,textElementFontSizeTooSmall),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(textElementFontSizeTooSmall_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({elementId,pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.br.fontSizeTooSmall,isRendered=elements.length>0;let t4;if((0,countContext.FL)("TextElementFontSizeTooSmall",isRendered),$[6]!==elements||$[7]!==handleClick){let t5;$[9]!==handleClick?(t5=element=>react.createElement(thumbnail.Vz,{key:element.id,onClick:()=>handleClick(element.id,element.pageId),type:thumbnail.RO.TEXT,displayBackground:react.createElement(thumbnail.AW,{page:element}),"aria-label":(0,i18n.__)("Go to offending text element","web-stories")}),$[9]=handleClick,$[10]=t5):t5=$[10],t4=elements.map(t5),$[6]=elements,$[7]=handleClick,$[8]=t4}else t4=$[8];const thumbnails=t4;let t5;return $[11]!==elements.length||$[12]!==isChecklistMounted||$[13]!==isRendered||$[14]!==thumbnails?(t5=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{title,cardType:elements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails}),$[11]=elements.length,$[12]=isChecklistMounted,$[13]=isRendered,$[14]=thumbnails,$[15]=t5):t5=$[15],t5};function textElementFontSizeTooSmall_temp(t0){const{state}=t0;return state?.pages}function textElementFontSizeTooSmall_temp2(t0){const{setHighlights}=t0;return setHighlights}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function VideoChecklistCard(t0){const $=(0,dist.c)(17);let elements,footer,onThumbnailClick,props;$[0]!==t0?(({elements,footer,onThumbnailClick,...props}=t0),$[0]=t0,$[1]=elements,$[2]=footer,$[3]=onThumbnailClick,$[4]=props):(elements=$[1],footer=$[2],onThumbnailClick=$[3],props=$[4]);const t1=elements.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE;let t2,t3,t4;if($[5]!==footer?(t2=react.createElement(checklistCard.Oz,null,footer),$[5]=footer,$[6]=t2):t2=$[6],$[7]!==elements||$[8]!==onThumbnailClick){let t4;$[10]!==onThumbnailClick?(t4=element=>react.createElement(thumbnail.Vz,{key:element.id,onClick:()=>onThumbnailClick(element.id,element.pageId),type:thumbnail.RO.VIDEO,displayBackground:react.createElement(thumbnail.AW,{page:element}),"aria-label":(0,i18n.__)("Go to offending video","web-stories")}),$[10]=onThumbnailClick,$[11]=t4):t4=$[11],t3=elements.map(t4),$[7]=elements,$[8]=onThumbnailClick,$[9]=t3}else t3=$[9];return $[12]!==props||$[13]!==t1||$[14]!==t2||$[15]!==t3?(t4=react.createElement(checklistCard.NU,_extends({},props,{cardType:t1,footer:t2,thumbnails:t3})),$[12]=props,$[13]=t1,$[14]=t2,$[15]=t3,$[16]=t4):t4=$[16],t4}TextElementFontSizeTooSmall.__docgenInfo={description:"",methods:[],displayName:"TextElementFontSizeTooSmall"},VideoChecklistCard.propTypes={title:prop_types.string.isRequired,elements:prop_types.arrayOf(prop_types.object).isRequired,footer:prop_types.string.isRequired,onThumbnailClick:prop_types.func.isRequired};const videoChecklistCard=VideoChecklistCard;function videoElementLength(element){return"video"===element.type&&element.resource?.length>checklist_constants.g3}VideoChecklistCard.__docgenInfo={description:"",methods:[],displayName:"VideoChecklistCard",props:{title:{description:"",type:{name:"string"},required:!0},elements:{description:"",type:{name:"arrayOf",value:{name:"object"}},required:!0},footer:{description:"",type:{name:"string"},required:!0},onThumbnailClick:{description:"",type:{name:"func"},required:!0}}};const VideoElementLength=()=>{const $=(0,dist.c)(11),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(videoElementLength_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,videoElementLength),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(videoElementLength_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({elementId,pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.videoTooLong,isRendered=elements.length>0;let t4;return(0,countContext.FL)("VideoElementLength",isRendered),$[6]!==elements||$[7]!==handleClick||$[8]!==isChecklistMounted||$[9]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(videoChecklistCard,{title,elements,footer,onThumbnailClick:handleClick}),$[6]=elements,$[7]=handleClick,$[8]=isChecklistMounted,$[9]=isRendered,$[10]=t4):t4=$[10],t4};function videoElementLength_temp(t0){const{state}=t0;return state?.pages}function videoElementLength_temp2(t0){const{setHighlights}=t0;return setHighlights}function videoElementMissingCaptions(element){return"video"===element.type&&!element?.resource?.isMuted&&!element.tracks?.length}VideoElementLength.__docgenInfo={description:"",methods:[],displayName:"VideoElementLength"};const VideoElementMissingCaptions=()=>{const $=(0,dist.c)(11),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(videoElementMissingCaptions_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,videoElementMissingCaptions),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(videoElementMissingCaptions_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({pageId,elementId,highlight:highlights.xP.Captions}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.br.videoMissingCaptions,isRendered=elements.length>0;let t4;return(0,countContext.FL)("VideoElementMissingCaptions",isRendered),$[6]!==elements||$[7]!==handleClick||$[8]!==isChecklistMounted||$[9]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(videoChecklistCard,{title,elements,footer,onThumbnailClick:handleClick}),$[6]=elements,$[7]=handleClick,$[8]=isChecklistMounted,$[9]=isRendered,$[10]=t4):t4=$[10],t4};function videoElementMissingCaptions_temp(t0){const{state}=t0;return state?.pages}function videoElementMissingCaptions_temp2(t0){const{setHighlights}=t0;return setHighlights}function videoElementMissingDescription(element){return"video"===element.type&&!element.alt?.length&&!element.resource?.alt?.length}VideoElementMissingCaptions.__docgenInfo={description:"",methods:[],displayName:"VideoElementMissingCaptions"};const VideoElementMissingDescription=()=>{const $=(0,dist.c)(11),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(videoElementMissingDescription_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,videoElementMissingDescription),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(videoElementMissingDescription_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({pageId,elementId,highlight:highlights.xP.AssistiveText}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.br.videoMissingTitle,isRendered=elements.length>0;let t4;return(0,countContext.FL)("VideoElementMissingDescription",isRendered),$[6]!==elements||$[7]!==handleClick||$[8]!==isChecklistMounted||$[9]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(videoChecklistCard,{title,elements,footer,onThumbnailClick:handleClick}),$[6]=elements,$[7]=handleClick,$[8]=isChecklistMounted,$[9]=isRendered,$[10]=t4):t4=$[10],t4};function videoElementMissingDescription_temp(t0){const{state}=t0;return state?.pages}function videoElementMissingDescription_temp2(t0){const{setHighlights}=t0;return setHighlights}function videoElementMissingPoster(element){return"video"===element.type&&!element.resource?.poster&&!element.poster}VideoElementMissingDescription.__docgenInfo={description:"",methods:[],displayName:"VideoElementMissingDescription"};const VideoElementMissingPoster=()=>{const $=(0,dist.c)(11),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(videoElementMissingPoster_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,videoElementMissingPoster),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(videoElementMissingPoster_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({pageId,elementId,highlight:highlights.xP.VideoA11yPoster}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.RJ.videoMissingPoster,isRendered=elements.length>0;let t4;return(0,countContext.FL)("VideoElementMissingPoster",isRendered),$[6]!==elements||$[7]!==handleClick||$[8]!==isChecklistMounted||$[9]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(videoChecklistCard,{title,elements,footer,onThumbnailClick:handleClick}),$[6]=elements,$[7]=handleClick,$[8]=isChecklistMounted,$[9]=isRendered,$[10]=t4):t4=$[10],t4};function videoElementMissingPoster_temp(t0){const{state}=t0;return state?.pages}function videoElementMissingPoster_temp2(t0){const{setHighlights}=t0;return setHighlights}function videoElementResolution(element){if("video"!==element.type)return!1;return element.resource?.height<=checklist_constants.rs&&element.resource?.width<=checklist_constants.mQ}VideoElementMissingPoster.__docgenInfo={description:"",methods:[],displayName:"VideoElementMissingPoster"};const VideoElementResolution=()=>{const $=(0,dist.c)(11),isChecklistMounted=(0,popupMountedContext.g)(),pages=(0,app.P3)(videoElementResolution_temp);let t0,t1;$[0]!==pages?(t0=()=>(0,utils.PD)(pages,videoElementResolution),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const elements=(0,src.Kr)(t0,t1),setHighlights_0=(0,highlights.N)(videoElementResolution_temp2);let t2,t3;$[3]!==setHighlights_0?(t2=(elementId,pageId)=>setHighlights_0({elementId,pageId}),t3=[setHighlights_0],$[3]=setHighlights_0,$[4]=t2,$[5]=t3):(t2=$[4],t3=$[5]);const handleClick=(0,src.hb)(t2,t3),{footer,title}=checklist_constants.Bc.videoResolutionTooLow,isRendered=elements.length>0;let t4;return(0,countContext.FL)("VideoElementResolution",isRendered),$[6]!==elements||$[7]!==handleClick||$[8]!==isChecklistMounted||$[9]!==isRendered?(t4=isRendered&&isChecklistMounted&&react.createElement(videoChecklistCard,{title,elements,footer,onThumbnailClick:handleClick}),$[6]=elements,$[7]=handleClick,$[8]=isChecklistMounted,$[9]=isRendered,$[10]=t4):t4=$[10],t4};function videoElementResolution_temp(t0){const{state}=t0;return state?.pages}function videoElementResolution_temp2(t0){const{setHighlights}=t0;return setHighlights}VideoElementResolution.__docgenInfo={description:"",methods:[],displayName:"VideoElementResolution"};var button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),button_constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),media=__webpack_require__("./packages/story-editor/src/app/media/index.js"),story_editor_src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),filterStoryElements=__webpack_require__("./packages/story-editor/src/components/checklist/utils/filterStoryElements.js"),checklistCard_styles=__webpack_require__("./packages/story-editor/src/components/checklistCard/styles.js"),useFFmpeg=__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts"),tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");const OptimizeButton=(0,styled_components_browser_esm.Ay)(button_button.$).withConfig({displayName:"videoOptimization__OptimizeButton",componentId:"sc-1dz2s9g-0"})(["margin-top:4px;"]);function videoElementsNotOptimized(element={}){const{resource}=element;if(!resource)return!1;const{isOptimized,height=0,width=0}=resource;if("video"!==element.type||isOptimized)return!1;return height*width>story_editor_src_constants.$n.WIDTH*story_editor_src_constants.$n.HEIGHT}const initialState={},actionTypes_cancelled="cancelled",actionTypes_uploaded="uploaded",actionTypes_uploading="uploading";function reducer(state,action){switch(action.type){case actionTypes_cancelled:return{...state,[action.element.resource.id]:actionTypes_cancelled};case actionTypes_uploaded:return{...state,[action.element.resource.id]:actionTypes_uploaded};case actionTypes_uploading:return{...state,[action.element.resource.id]:actionTypes_uploading};default:throw new Error}}const BulkVideoOptimization=()=>{const $=(0,dist.c)(56),isChecklistMounted=(0,popupMountedContext.g)(),[state,dispatch]=(0,src.WO)(reducer,initialState),pages=(0,story.P3)(videoOptimization_temp),{optimizeVideo:optimizeVideo_0,isNewResourceTranscoding:isNewResourceTranscoding_0,isCurrentResourceTranscoding:isCurrentResourceTranscoding_0,canTranscodeResource:canTranscodeResource_0}=(0,media.HZ)(videoOptimization_temp2);let t0,t1;$[0]!==pages?(t0=()=>(0,filterStoryElements.P)(pages,videoElementsNotOptimized),t1=[pages],$[0]=pages,$[1]=t0,$[2]=t1):(t0=$[1],t1=$[2]);const unoptimizedElements=(0,src.Kr)(t0,t1);let t2;$[3]!==unoptimizedElements?(t2=unoptimizedElements.filter(videoOptimization_temp3),$[3]=unoptimizedElements,$[4]=t2):t2=$[4];const unoptimizedVideos=t2,setHighlights_0=(0,highlights.N)(videoOptimization_temp4);let t3,t4;$[5]!==canTranscodeResource_0||$[6]!==dispatch||$[7]!==optimizeVideo_0||$[8]!==state?(t3=async element_0=>{if(canTranscodeResource_0(element_0.resource)&&state[element_0.resource.id]!==actionTypes_uploading){dispatch({type:actionTypes_uploading,element:element_0});try{await optimizeVideo_0({resource:element_0.resource})}catch(t4){return void dispatch({type:actionTypes_cancelled,element:element_0})}dispatch({type:actionTypes_uploaded,element:element_0})}},$[5]=canTranscodeResource_0,$[6]=dispatch,$[7]=optimizeVideo_0,$[8]=state,$[9]=t3):t3=$[9],$[10]!==canTranscodeResource_0||$[11]!==optimizeVideo_0||$[12]!==state?(t4=[canTranscodeResource_0,optimizeVideo_0,state],$[10]=canTranscodeResource_0,$[11]=optimizeVideo_0,$[12]=state,$[13]=t4):t4=$[13];const processVideoElement=(0,src.hb)(t3,t4);let t5,t6;$[14]!==isCurrentResourceTranscoding_0||$[15]!==isNewResourceTranscoding_0||$[16]!==processVideoElement||$[17]!==unoptimizedVideos?(t5=()=>{const optimizingResources=unoptimizedVideos.filter((t7=>{const{resource}=t7;return!isNewResourceTranscoding_0(resource?.id)&&!isCurrentResourceTranscoding_0(resource?.id)}));return new Promise((resolve=>{optimizingResources.map((element_1=>async()=>{await processVideoElement(element_1)})).reduce(videoOptimization_temp5,Promise.resolve()).then(resolve)}))},t6=[isNewResourceTranscoding_0,isCurrentResourceTranscoding_0,processVideoElement,unoptimizedVideos],$[14]=isCurrentResourceTranscoding_0,$[15]=isNewResourceTranscoding_0,$[16]=processVideoElement,$[17]=unoptimizedVideos,$[18]=t5,$[19]=t6):(t5=$[18],t6=$[19]);const sequencedVideoOptimization=(0,src.hb)(t5,t6);let t7,t8;$[20]!==sequencedVideoOptimization?(t7=async()=>{await sequencedVideoOptimization()},t8=[sequencedVideoOptimization],$[20]=sequencedVideoOptimization,$[21]=t7,$[22]=t8):(t7=$[21],t8=$[22]);const handleUpdateVideos=(0,src.hb)(t7,t8);let t10,t9;$[23]!==processVideoElement||$[24]!==setHighlights_0?(t9=element_2=>async()=>{setHighlights_0({pageId:element_2.pageId,elementId:element_2.id}),await processVideoElement(element_2)},t10=[processVideoElement,setHighlights_0],$[23]=processVideoElement,$[24]=setHighlights_0,$[25]=t10,$[26]=t9):(t10=$[25],t9=$[26]);const handleClickThumbnail=(0,src.hb)(t9,t10),{footer,title}=checklist_constants.RJ.videoNotOptimized;let t11,t12;$[27]!==state?(t11=()=>Object.values(state).filter(_temp6),t12=[state],$[27]=state,$[28]=t11,$[29]=t12):(t11=$[28],t12=$[29]);const currentlyUploading=(0,src.Kr)(t11,t12);let t13,t14;$[30]!==currentlyUploading.length||$[31]!==isCurrentResourceTranscoding_0||$[32]!==isNewResourceTranscoding_0||$[33]!==unoptimizedVideos?(t13=()=>currentlyUploading.length>0||unoptimizedVideos.some((video=>isNewResourceTranscoding_0(video.resource.id)||isCurrentResourceTranscoding_0(video.resource.id))),$[30]=currentlyUploading.length,$[31]=isCurrentResourceTranscoding_0,$[32]=isNewResourceTranscoding_0,$[33]=unoptimizedVideos,$[34]=t13):t13=$[34],$[35]!==currentlyUploading||$[36]!==isCurrentResourceTranscoding_0||$[37]!==isNewResourceTranscoding_0||$[38]!==unoptimizedVideos?(t14=[currentlyUploading,unoptimizedVideos,isNewResourceTranscoding_0,isCurrentResourceTranscoding_0],$[35]=currentlyUploading,$[36]=isCurrentResourceTranscoding_0,$[37]=isNewResourceTranscoding_0,$[38]=unoptimizedVideos,$[39]=t14):t14=$[39];const isTranscoding=(0,src.Kr)(t13,t14),isRendered=unoptimizedVideos.length>0;let t15;(0,countContext.FL)("VideoOptimization",isRendered),$[40]!==unoptimizedVideos.length?(t15=1===unoptimizedVideos.length?(0,i18n.__)("Optimize video","web-stories"):(0,i18n.__)("Optimize all videos","web-stories"),$[40]=unoptimizedVideos.length,$[41]=t15):t15=$[41];let t16,optimizeButtonCopy=t15;if(isTranscoding){const numTranscoding=currentlyUploading.length+unoptimizedVideos.filter((video_0=>isNewResourceTranscoding_0(video_0.resource.id)||isCurrentResourceTranscoding_0(video_0.resource.id))).length;let t16;$[42]!==numTranscoding||$[43]!==unoptimizedVideos.length?(t16=(0,sprintf.A)((0,i18n._n)("Optimizing %1$d of %2$d","Optimizing %1$d of %2$d",numTranscoding,"web-stories"),numTranscoding,unoptimizedVideos.length),$[42]=numTranscoding,$[43]=unoptimizedVideos.length,$[44]=t16):t16=$[44],optimizeButtonCopy=t16}return $[45]!==handleClickThumbnail||$[46]!==handleUpdateVideos||$[47]!==isChecklistMounted||$[48]!==isCurrentResourceTranscoding_0||$[49]!==isNewResourceTranscoding_0||$[50]!==isRendered||$[51]!==isTranscoding||$[52]!==optimizeButtonCopy||$[53]!==state||$[54]!==unoptimizedVideos?(t16=isRendered&&isChecklistMounted&&react.createElement(checklistCard.NU,{cta:react.createElement(OptimizeButton,{type:button_constants.VQ.Secondary,size:button_constants.Mp.Small,onClick:handleUpdateVideos,disabled:isTranscoding},optimizeButtonCopy),title,cardType:unoptimizedVideos.length>1?checklistCard.SQ.MULTIPLE_ISSUE:checklistCard.SQ.SINGLE_ISSUE,footer:react.createElement(checklistCard.Oz,null,footer),thumbnails:unoptimizedVideos.map((element_3=>react.createElement(thumbnail.Vz,{key:element_3.resource.id,onClick:handleClickThumbnail(element_3),isLoading:isNewResourceTranscoding_0(element_3.resource.id)||isCurrentResourceTranscoding_0(element_3.resource.id),type:thumbnail.RO.VIDEO,displayBackground:react.createElement(thumbnail.AW,{page:element_3}),"aria-label":(0,i18n.__)("Go to offending video","web-stories"),isError:state[element_3.resource.id]===actionTypes_cancelled},react.createElement(tooltip.A,{title:state[element_3.resource.id]===actionTypes_uploading||isNewResourceTranscoding_0(element_3.resource.id)||isCurrentResourceTranscoding_0(element_3.resource.id)?(0,i18n.__)("Video optimization in progress","web-stories"):(0,i18n.__)("Optimize","web-stories")},react.createElement(checklistCard_styles.VW,null)))))}),$[45]=handleClickThumbnail,$[46]=handleUpdateVideos,$[47]=isChecklistMounted,$[48]=isCurrentResourceTranscoding_0,$[49]=isNewResourceTranscoding_0,$[50]=isRendered,$[51]=isTranscoding,$[52]=optimizeButtonCopy,$[53]=state,$[54]=unoptimizedVideos,$[55]=t16):t16=$[55],t16},VideoOptimization=()=>{const $=(0,dist.c)(2),{isTranscodingEnabled}=(0,useFFmpeg.A)();let t0;return $[0]!==isTranscodingEnabled?(t0=isTranscodingEnabled?react.createElement(BulkVideoOptimization,null):null,$[0]=isTranscodingEnabled,$[1]=t0):t0=$[1],t0};function videoOptimization_temp(t0){const{state:storyState}=t0;return storyState?.pages}function videoOptimization_temp2(t0){const{actions:t1,state:t2}=t0,{optimizeVideo}=t1,{isNewResourceTranscoding,canTranscodeResource,isCurrentResourceTranscoding}=t2;return{optimizeVideo,isNewResourceTranscoding,canTranscodeResource,isCurrentResourceTranscoding}}function videoOptimization_temp3(element,index,array){return array.findIndex((innerElement=>innerElement.resource.id===element.resource.id))===index}function videoOptimization_temp4(t0){const{setHighlights}=t0;return setHighlights}function videoOptimization_temp5(p,fn){return p.then(fn)}function _temp6(value){return value===actionTypes_uploading}VideoOptimization.__docgenInfo={description:"",methods:[],displayName:"VideoOptimization"};var exclamation_outline=__webpack_require__("./packages/design-system/src/icons/exclamation_outline.svg");const ChecklistIcon=t0=>{const $=(0,dist.c)(5);let checkpoint,rest;if($[0]!==t0?(({checkpoint,...rest}=t0),$[0]=t0,$[1]=checkpoint,$[2]=rest):(checkpoint=$[1],rest=$[2]),checkpoint===checklist_constants.xh.ALL){let t1;return $[3]!==rest?(t1=react.createElement(exclamation_outline.A,rest),$[3]=rest,$[4]=t1):t1=$[4],t1}return null},checklistIcon=ChecklistIcon;ChecklistIcon.__docgenInfo={description:"",methods:[],displayName:"ChecklistIcon",props:{checkpoint:{description:"",type:{name:"enum",value:[{value:'"unavailable"',computed:!1},{value:'"recommended"',computed:!1},{value:'"all"',computed:!1}]},required:!1}}}},"./packages/story-editor/src/components/checklist/popupMountedContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>useIsChecklistMounted});var _checklistContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/checklist/checklistContext/index.js");function useIsChecklistMounted(){return(0,_checklistContext__WEBPACK_IMPORTED_MODULE_0__.q)(_temp)}function _temp(t0){const{state}=t0;return state.isChecklistMounted}},"./packages/story-editor/src/components/checklist/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_X:()=>PanelText,bl:()=>StyledTablistPanel,fj:()=>getTabPanelMaxHeight});var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_tablist__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/index.js"),_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/secondaryPopup/index.js");const getTabPanelMaxHeight=buttonCount=>{if(buttonCount)return`100vh - ${_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.BN+60*buttonCount+_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.XA+_secondaryPopup__WEBPACK_IMPORTED_MODULE_1__.bE}px`},StyledTablistPanel=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_tablist__WEBPACK_IMPORTED_MODULE_0__.KB).withConfig({displayName:"checklist__StyledTablistPanel",componentId:"sc-1rujego-0"})(["height:",";visibility:",";button{display:",";}"],(({badgeCount})=>0===badgeCount?0:"auto"),(({badgeCount})=>0===badgeCount?"hidden":"visible"),(({badgeCount})=>0===badgeCount?"none":"auto")),PanelText=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.E.Paragraph).attrs({size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.$.Small}).withConfig({displayName:"checklist__PanelText",componentId:"sc-1rujego-1"})(["color:",";"],(({theme})=>theme.colors.fg.secondary))},"./packages/story-editor/src/components/library/paneIds.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>PANE_IDS});let PANE_IDS=function(PANE_IDS){return PANE_IDS.Media="media",PANE_IDS.Media3p="media3p",PANE_IDS.Text="text",PANE_IDS.Shapes="shapes",PANE_IDS.Elements="elements",PANE_IDS.PageTemplates="pageTemplates",PANE_IDS.Shopping="shopping",PANE_IDS}({})},"./packages/story-editor/src/components/sidebar/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>STYLE,i:()=>INSERT,kS:()=>PUBLISH_MODAL_DOCUMENT,qQ:()=>DOCUMENT});const INSERT="insert",STYLE="design",DOCUMENT="document",PUBLISH_MODAL_DOCUMENT="publish_modal_document"},"./packages/story-editor/src/components/tablist/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>PANEL_STATES});const PANEL_STATES={NORMAL:"normal",DANGER:"danger"}},"./packages/story-editor/src/components/tablist/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I$:()=>_styles__WEBPACK_IMPORTED_MODULE_2__.I$,KB:()=>_tablistPanel__WEBPACK_IMPORTED_MODULE_0__.A,od:()=>_constants__WEBPACK_IMPORTED_MODULE_1__.o});var _tablistPanel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/tablistPanel.js"),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js"),_styles__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tablist/styles.js")},"./packages/story-editor/src/components/tablist/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BD:()=>TabButtonWrapper,C3:()=>ButtonText,Ex:()=>Badge,I$:()=>Tablist,KM:()=>TabButton,Kp:()=>TabPanel,NQ:()=>ScrollableContent,Tu:()=>IconContainer,_X:()=>PanelText,ee:()=>PanelWrapper});var prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js");const Tablist=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.attrs({role:"tablist"}).withConfig({displayName:"tablist__Tablist",componentId:"sc-oyok4o-0"})(["background:",";*{user-select:text;}"],(({theme})=>theme.colors.bg.primary));Tablist.propTypes={"aria-label":prop_types__WEBPACK_IMPORTED_MODULE_2___default().string.isRequired};const PanelText=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.$).attrs({as:"h3",size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.$.XXXSmall}).withConfig({displayName:"tablist__PanelText",componentId:"sc-oyok4o-1"})(["transition:background-color 300ms ease-in;"]),TabButtonWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__TabButtonWrapper",componentId:"sc-oyok4o-2"})(["position:relative;height:60px;width:100%;padding:5px 4px;&,:hover,:focus-within,:focus-visible{background-color:",";}"],(({theme})=>theme.colors.bg.secondary)),TabButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.$).attrs({variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.Ak.PLAIN}).withConfig({displayName:"tablist__TabButton",componentId:"sc-oyok4o-3"})(["position:absolute;display:flex;justify-content:space-between;width:calc(100% - 8px);height:calc(100% - 10px);padding:16px;border-radius:0;&,:hover,:focus,:focus-visible{background-color:",";}",";","{opacity:0.8;}",";"],(({theme})=>theme.colors.bg.secondary),(({theme})=>_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Q(theme.colors.border.focus,theme.colors.bg.secondary)),PanelText,(({status})=>status===_constants__WEBPACK_IMPORTED_MODULE_0__.o.DANGER&&(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.AH)(["&,","{color:",";}","{background-color:",";}"],PanelText,(({theme})=>theme.colors.fg.negative),Badge,(({theme})=>theme.colors.fg.negative)))),PanelWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__PanelWrapper",componentId:"sc-oyok4o-4"})(["width:100%;background:",";&:not(:first-child) > ","{box-shadow:0px -1px 0 0 ",";margin-top:1px;}",";"],(({theme})=>theme.colors.bg.primary),TabButton,(({theme})=>theme.colors.divider.tertiary),(({isExpanded,theme})=>isExpanded&&(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.AH)(["& ",",& ","{:not(:last-child){box-shadow:none;}",";","{opacity:1;}&,:hover,:focus{background-color:",";}svg{transform:rotate(0);}}","{height:560px;","{visibility:visible;}}"],TabButton,TabButtonWrapper,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Q,PanelText,theme.colors.bg.primary,ScrollableContent,TabPanel))),ButtonText=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__ButtonText",componentId:"sc-oyok4o-5"})(["display:flex;align-items:center;justify-content:center;margin-left:-12px;"]),IconContainer=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__IconContainer",componentId:"sc-oyok4o-6"})(["height:32px;width:32px;color:",";svg{transform:rotate(-90deg);transition:transform 300ms ease-in-out;}"],(({theme})=>theme.colors.fg.primary)),Badge=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__Badge",componentId:"sc-oyok4o-7"})(["display:flex;align-items:center;justify-content:center;height:20px;width:20px;border-radius:",";background-color:",";","{color:",";line-height:20px;}"],(({theme})=>theme.borders.radius.round),(({theme})=>theme.colors.fg.primary),PanelText,(({theme})=>theme.colors.inverted.fg.primary)),ScrollableContent=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__ScrollableContent",componentId:"sc-oyok4o-8"})(["height:0;max-height:",";overflow-y:",";transition:height 300ms ease-in;"],(({maxHeight})=>maxHeight?`calc(${maxHeight})`:"none"),(({maxHeight})=>maxHeight?"scroll":"hidden")),TabPanel=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"tablist__TabPanel",componentId:"sc-oyok4o-9"})(["padding:0;visibility:hidden;overflow:hidden;background:",";transition:all 300ms ease-in;margin:0 0 16px 16px;",";"],(({theme})=>theme.colors.bg.primary),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.W)},"./packages/story-editor/src/components/tablist/tablistPanel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/sprintf.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/icons/chevron_down_small.svg"),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/tablist/constants.js"),_styles__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/components/tablist/styles.js");const TablistPanel=t0=>{const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(31),{badgeCount:t1,children,className,id,isExpanded,onClick,maxHeight,status:t2,title}=t0,badgeCount=void 0===t1?0:t1,status=void 0===t2?_constants__WEBPACK_IMPORTED_MODULE_3__.o.NORMAL:t2;let t3;$[0]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[0]=t3):t3=$[0];const backupId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)(uuid__WEBPACK_IMPORTED_MODULE_5__.A,t3),panelId=id||backupId;let t4;$[1]===Symbol.for("react.memo_cache_sentinel")?(t4=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.Tu,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.A,null)),$[1]=t4):t4=$[1];const t5=`${title}-${panelId}`;let t6,t7,t8,t9;$[2]!==badgeCount||$[3]!==title?(t6=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.A)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__._n)("%1$d %2$s issue","%1$d %2$s issues",badgeCount,"web-stories"),badgeCount,title),$[2]=badgeCount,$[3]=title,$[4]=t6):t6=$[4],$[5]!==t5||$[6]!==t6||$[7]!==title?(t7=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.C3,null,t4,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__._X,{id:t5,"aria-label":t6},title)),$[5]=t5,$[6]=t6,$[7]=title,$[8]=t7):t7=$[8],$[9]!==badgeCount?(t8=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.Ex,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__._X,{"aria-hidden":!0},badgeCount)),$[9]=badgeCount,$[10]=t8):t8=$[10],$[11]!==isExpanded||$[12]!==onClick||$[13]!==panelId||$[14]!==status||$[15]!==t7||$[16]!==t8?(t9=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.BD,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.KM,{"aria-controls":panelId,"aria-selected":isExpanded,onClick,role:"tab",status},t7,t8)),$[11]=isExpanded,$[12]=onClick,$[13]=panelId,$[14]=status,$[15]=t7,$[16]=t8,$[17]=t9):t9=$[17];const t10=!isExpanded,t11=`${title}-${panelId}`;let t12,t13,t14;return $[18]!==children||$[19]!==panelId||$[20]!==t11?(t12=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.Kp,{id:panelId,"aria-labelledby":t11,role:"tabpanel"},children),$[18]=children,$[19]=panelId,$[20]=t11,$[21]=t12):t12=$[21],$[22]!==maxHeight||$[23]!==t10||$[24]!==t12?(t13=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.NQ,{"aria-hidden":t10,maxHeight},t12),$[22]=maxHeight,$[23]=t10,$[24]=t12,$[25]=t13):t13=$[25],$[26]!==className||$[27]!==isExpanded||$[28]!==t13||$[29]!==t9?(t14=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_styles__WEBPACK_IMPORTED_MODULE_4__.ee,{className,isExpanded},t9,t13),$[26]=className,$[27]=isExpanded,$[28]=t13,$[29]=t9,$[30]=t14):t14=$[30],t14},__WEBPACK_DEFAULT_EXPORT__=TablistPanel;TablistPanel.__docgenInfo={description:"",methods:[],displayName:"TablistPanel",props:{badgeCount:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},status:{defaultValue:{value:"'normal'",computed:!1},description:"",type:{name:"enum",value:[{value:'"normal"',computed:!1},{value:'"danger"',computed:!1}]},required:!1},children:{description:"",type:{name:"node"},required:!1},className:{description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!1},isExpanded:{description:"",type:{name:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!0},maxHeight:{description:"",type:{name:"string"},required:!1},title:{description:"",type:{name:"string"},required:!0}}}},"./packages/story-editor/src/components/toggleButton/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>ToggleButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/theme/theme.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const Button=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.$).withConfig({displayName:"toggleButton__Button",componentId:"sc-1de7s10-0"})(["width:auto;display:flex;align-items:center;justify-content:space-between;border-width:1px;border-style:solid;padding:0 10px;white-space:nowrap;"," > :not(svg):last-child{margin-right:0;}.main-icon{height:","px;width:auto;margin:-8px;display:block;}"],(({isOpen,hasText,height=36,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.AH)(["height:","px;min-width:","px;color:",";border-color:",";background-color:",";",""],height,height,theme.colors.fg.primary,isOpen?theme.colors.bg.secondary:theme.colors.border.defaultNormal,isOpen?theme.colors.bg.secondary:theme.colors.bg.primary,hasText&&(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.AH)(["",";"],_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.s({preset:{...theme.typography.presets.paragraph[_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.$.Small]},theme})))),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.i.ICON_SIZE);Button.propTypes={hasText:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,isOpen:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,height:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string])};const badgeText=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.w.typography.presets.label[_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.$.Small],CountBadge=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__.E.Span).withConfig({displayName:"toggleButton__CountBadge",componentId:"sc-1de7s10-1"})(["",""],(({size=22,fontSize=badgeText.size,theme})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.AH)(["min-width:","px;width:auto;height:","px;padding:0 ","px;margin:0 8px;display:flex;align-items:center;justify-content:center;color:",";background-color:",";border-radius:9999px;font-size:","px;line-height:0;"],size,size,size/4,theme.colors.fg.primary,theme.colors.bg.quaternary,fontSize)));CountBadge.propTypes={size:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string]),fontSize:prop_types__WEBPACK_IMPORTED_MODULE_9___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,prop_types__WEBPACK_IMPORTED_MODULE_9___default().string])};const ToggleButton=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Rf)(((t0,ref)=>{const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(33);let MainIcon,copy,label,popupZIndexOverride,rest,shortcut,t1,t2,t3;$[0]!==t0?(({copy,isOpen:t1,notificationCount:t2,MainIcon,label,shortcut,popupZIndexOverride,hasMenuList:t3,...rest}=t0),$[0]=t0,$[1]=MainIcon,$[2]=copy,$[3]=label,$[4]=popupZIndexOverride,$[5]=rest,$[6]=shortcut,$[7]=t1,$[8]=t2,$[9]=t3):(MainIcon=$[1],copy=$[2],label=$[3],popupZIndexOverride=$[4],rest=$[5],shortcut=$[6],t1=$[7],t2=$[8],t3=$[9]);const isOpen=void 0!==t1&&t1,notificationCount=void 0===t2?0:t2,hasMenuList=void 0!==t3&&t3,hasNotifications=notificationCount>0,t4=Boolean(copy),t5=!hasNotifications;let t6,t7,t8,t9,t10;return $[10]!==MainIcon?(t6=MainIcon&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(MainIcon,{className:"main-icon"}),$[10]=MainIcon,$[11]=t6):t6=$[11],$[12]!==hasNotifications||$[13]!==notificationCount?(t7=hasNotifications&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(CountBadge,null,notificationCount),$[12]=hasNotifications,$[13]=notificationCount,$[14]=t7):t7=$[14],$[15]!==hasMenuList||$[16]!==isOpen?(t8=hasMenuList&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.A,{direction:"down",$isOpen:isOpen}),$[15]=hasMenuList,$[16]=isOpen,$[17]=t8):t8=$[17],$[18]!==copy||$[19]!==isOpen||$[20]!==ref||$[21]!==rest||$[22]!==t4||$[23]!==t5||$[24]!==t6||$[25]!==t7||$[26]!==t8?(t9=react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,_extends({ref,"aria-haspopup":!0,"aria-pressed":isOpen,"aria-expanded":isOpen,hasText:t4,isOpen,isSquare:t5,type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.VQ.Tertiary,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Ak.Rectangle,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Mp.Medium},rest),t6,copy,t7,t8),$[18]=copy,$[19]=isOpen,$[20]=ref,$[21]=rest,$[22]=t4,$[23]=t5,$[24]=t6,$[25]=t7,$[26]=t8,$[27]=t9):t9=$[27],$[28]!==label||$[29]!==popupZIndexOverride||$[30]!==shortcut||$[31]!==t9?(t10=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_3__.A,{hasTail:!0,title:label,placement:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_14__.W.Top,shortcut,popupZIndexOverride},t9),$[28]=label,$[29]=popupZIndexOverride,$[30]=shortcut,$[31]=t9,$[32]=t10):t10=$[32],t10}));ToggleButton.displayName="ToggleButton",ToggleButton.propTypes={copy:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,isOpen:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,label:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,MainIcon:prop_types__WEBPACK_IMPORTED_MODULE_9___default().any,notificationCount:prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,shortcut:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string,popupZIndexOverride:prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,hasMenuList:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool},ToggleButton.__docgenInfo={description:"",methods:[],displayName:"ToggleButton",props:{isOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},notificationCount:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},hasMenuList:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},copy:{description:"",type:{name:"string"},required:!1},label:{description:"",type:{name:"string"},required:!1},MainIcon:{description:"",type:{name:"any"},required:!1},shortcut:{description:"",type:{name:"string"},required:!1},popupZIndexOverride:{description:"",type:{name:"number"},required:!1}}}},"./packages/units/src/calcRotatedObjectPositionAndSize.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>calcRotatedObjectPositionAndSize});var _getCorners__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/units/src/getCorners.ts");function calcRotatedObjectPositionAndSize(angle=0,x,y,width,height){if(!angle)return{x,y,width,height};const{topLeftPoint,topRightPoint,bottomRightPoint,bottomLeftPoint}=(0,_getCorners__WEBPACK_IMPORTED_MODULE_0__.A)(angle,x,y,width,height),boundTopLeftX=Math.min(topLeftPoint.x,topRightPoint.x,bottomRightPoint.x,bottomLeftPoint.x),boundTopLeftY=Math.min(topLeftPoint.y,topRightPoint.y,bottomRightPoint.y,bottomLeftPoint.y);return{x:boundTopLeftX,y:boundTopLeftY,width:Math.max(topLeftPoint.x,topRightPoint.x,bottomRightPoint.x,bottomLeftPoint.x)-boundTopLeftX,height:Math.max(topLeftPoint.y,topRightPoint.y,bottomRightPoint.y,bottomLeftPoint.y)-boundTopLeftY}}},"./packages/units/src/getBoundRect.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _calcRotatedObjectPositionAndSize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/units/src/calcRotatedObjectPositionAndSize.ts");const __WEBPACK_DEFAULT_EXPORT__=function getBoundRect(list){const updatedList=list.map((el=>(0,_calcRotatedObjectPositionAndSize__WEBPACK_IMPORTED_MODULE_0__.A)(el.rotationAngle,el.x,el.y,el.width,el.height))),firstElement=updatedList[0];let startX=firstElement.x,startY=firstElement.y,endX=startX+firstElement.width,endY=startY+firstElement.height;return updatedList.slice(1).forEach((el=>{startX=Math.min(el.x,startX),startY=Math.min(el.y,startY),endX=Math.max(el.x+el.width,endX),endY=Math.max(el.y+el.height,endY)})),{startX,startY,endX,endY,width:endX-startX,height:endY-startY}}}}]);