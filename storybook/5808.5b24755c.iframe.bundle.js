"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[5808],{"./packages/design-system/src/components/contextMenu/components/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_visuallyHidden__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/visuallyHidden.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const IconWrapper=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-c43rae-0"})(["width:32px;height:32px;display:flex;align-items:center;justify-content:center;> *{flex:1;}"]);const __WEBPACK_DEFAULT_EXPORT__=function Icon({children,title,className="",...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_visuallyHidden__WEBPACK_IMPORTED_MODULE_3__.T,{children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(IconWrapper,{className,...props,children})]})}},"./packages/design-system/src/components/contextMenu/components/item.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>item});__webpack_require__("./node_modules/react/index.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./packages/react/src/index.ts"),components_button=__webpack_require__("./packages/design-system/src/components/contextMenu/components/button.tsx"),components_shortcut=__webpack_require__("./packages/design-system/src/components/contextMenu/components/shortcut.ts");const suffix=styled_components_browser_esm.ZP.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-xb7uiq-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(({theme})=>theme.colors.fg.secondary));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const StyledButton=(0,styled_components_browser_esm.ZP)(components_button.Z).withConfig({displayName:"item__StyledButton",componentId:"sc-1w2myxt-0"})(["",""],(({supportsIcon})=>supportsIcon&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  ")),item=(0,src.Gp)((function MenuItem({label,shortcut,icon,SuffixIcon,className,...buttonProps},ref){return(0,jsx_runtime.jsxs)(StyledButton,{className,ref,...buttonProps,children:[icon,label,shortcut&&(0,jsx_runtime.jsx)(components_shortcut.Z,{children:shortcut.display}),SuffixIcon&&(0,jsx_runtime.jsx)(suffix,{children:(0,jsx_runtime.jsx)(SuffixIcon,{})})]})}))},"./packages/design-system/src/components/contextMenu/components/shortcut.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_typography_text__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP)(_typography_text__WEBPACK_IMPORTED_MODULE_1__.x.Kbd).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_2__.TextSize.XSmall}).withConfig({displayName:"shortcut__Shortcut",componentId:"sc-1ru49ss-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary))},"./packages/design-system/src/components/visuallyHidden.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>VisuallyHidden});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts");const VisuallyHidden=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.span.withConfig({displayName:"visuallyHidden__VisuallyHidden",componentId:"sc-35d3te-0"})(["",";"],_theme_helpers__WEBPACK_IMPORTED_MODULE_1__.j)},"./packages/story-editor/src/app/media/utils/useVideoElementTranscoding.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_components_videoTrim_useVideoTrim__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/videoTrim/useVideoTrim.js"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/app/index.js"),_useFFmpeg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts");const __WEBPACK_DEFAULT_EXPORT__=function useVideoElementTranscoding({resource,elementId,isSingleElement=!0}){const{isTranscodingEnabled}=(0,_useFFmpeg__WEBPACK_IMPORTED_MODULE_3__.Z)(),{muteExistingVideo,isElementTrimming,isNewResourceMuting,canTranscodeResource}=(0,___WEBPACK_IMPORTED_MODULE_2__.EF)((({state:{canTranscodeResource,isNewResourceMuting,isElementTrimming},actions:{muteExistingVideo}})=>({canTranscodeResource,isNewResourceMuting,isElementTrimming,muteExistingVideo}))),{isMuted,id:resourceId=0}=resource,isTrimming=!!isSingleElement&&isElementTrimming(elementId),isMuting=isNewResourceMuting(resourceId),handleMute=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((()=>{muteExistingVideo({resource})}),[resource,muteExistingVideo]),shouldDisableVideoActions=!canTranscodeResource(resource),canMute=isTranscodingEnabled&&isSingleElement&&(!isMuted&&canTranscodeResource(resource)||isMuting),{hasTrimMode,toggleTrimMode}=(0,_components_videoTrim_useVideoTrim__WEBPACK_IMPORTED_MODULE_1__.Z)((({state:{hasTrimMode},actions:{toggleTrimMode}})=>({hasTrimMode,toggleTrimMode})));return{state:{canTrim:hasTrimMode,canMute,isTrimming,isMuting,isDisabled:shouldDisableVideoActions},actions:{handleMute,handleTrim:toggleTrimMode}}}},"./packages/story-editor/src/components/canvas/editLayerFocusManager/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HL:()=>constants,ZP:()=>provider,b0:()=>editLayerFocusManager_useEditLayerFocusManager,_n:()=>editLayerFocusManager_useFocusGroupRef});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var src=__webpack_require__("./packages/react/src/index.ts");const context=(0,src.kr)(null);__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");const INITIAL_STATE={cleanup:null,focusGroups:{},cleanupCallbacks:{}},reduction={addNodeToGroup:(state,action)=>{const{groupId,nodeTuple}=action.payload,nodeGroup=state.focusGroups[groupId]||[];let newNodeGroup=[];const index=nodeGroup.findIndex((_nodeTuple=>_nodeTuple[0]===nodeTuple[0]));return newNodeGroup=-1===index?[...nodeGroup,nodeTuple]:[...nodeGroup.slice(0,index),nodeTuple,...nodeGroup.slice(0,index+1)],{...state,focusGroups:{...state.focusGroups,[groupId]:newNodeGroup}}},removeNodeFromGroup:(state,action)=>{const{groupId,nodeTuple}=action.payload,newNodeGroup=(state.focusGroups[groupId]||[]).filter((_nodeTuple=>_nodeTuple[0]!==nodeTuple[0]));return{...state,focusGroups:{...state.focusGroups,[groupId]:newNodeGroup}}},setFocusGroupCleanup:(state,action)=>{const{groupId,cleanup}=action.payload;return{...state,activeGroupKey:groupId,cleanupCallbacks:{...state.cleanupCallbacks,[groupId]:cleanup}}}};var keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);function KeyBindings({uuid,node,focusGroup,exitFocusGroup}){const traverseFocusGroup=(0,src.I4)((e=>{e.preventDefault();const navigateFocusGroup=function createNavigateFocusGroup(uuid,focusGroup){return function navigateFocusGroup(step){if(!focusGroup)return;const currentIndex=focusGroup.findIndex((nodeTuple=>nodeTuple[0]===uuid));if(-1===currentIndex)return;const nextIndex=function wrapIndex(i,length){return(i%length+length)%length}(currentIndex+step,focusGroup.length),[,node]=focusGroup[nextIndex];node?.focus()}}(uuid,focusGroup);e.shiftKey?navigateFocusGroup(-1):navigateFocusGroup(1)}),[focusGroup,uuid]),handleEsc=(0,src.I4)((e=>{e.preventDefault(),exitFocusGroup?.()}),[exitFocusGroup]);return(0,keyboard.Ew)(node,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},traverseFocusGroup,[traverseFocusGroup]),(0,keyboard.Ew)(node,{key:["esc"],allowDefault:!0,editable:!0},handleEsc,[handleEsc]),null}KeyBindings.propTypes={uuid:prop_types_default().string.isRequired,node:"undefined"!=typeof Element?prop_types_default().instanceOf(Element).isRequired:prop_types_default().any.isRequired,focusGroup:prop_types_default().array.isRequired,exitFocusGroup:prop_types_default().func};const keyBindings=KeyBindings;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function EditLayerFocusManager({children}){const[state,actions]=(0,src.IG)(INITIAL_STATE,reduction),stateRef=(0,src.sO)(state);stateRef.current=state;const enterFocusGroup=(0,src.I4)((({groupId})=>{const nodeTuple=stateRef.current.focusGroups?.[groupId]?.[0];if(nodeTuple){const[,node]=nodeTuple;node.focus()}}),[stateRef]),focusGroups=Object.entries(state.focusGroups),focusGroupCleanupCallbacks=state.cleanupCallbacks;return(0,jsx_runtime.jsxs)(context.Provider,{value:{enterFocusGroup,setFocusGroupCleanup:actions.setFocusGroupCleanup,actions},children:[focusGroups.map((([groupId,focusGroup])=>focusGroup.map((([uuid,node])=>node&&(0,jsx_runtime.jsx)(keyBindings,{uuid,node,focusGroup,exitFocusGroup:focusGroupCleanupCallbacks[groupId]},uuid))))),children]})}EditLayerFocusManager.displayName="EditLayerFocusManager";const provider=EditLayerFocusManager;var v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js");const editLayerFocusManager_useFocusGroupRef=function useFocusGroupRef(groupId){const actions=(0,src.Sz)(context,(value=>value.actions)),uuid=(0,src.UX)(v4.Z);return(0,src.I4)((node=>{null!==node?actions.addNodeToGroup({groupId,nodeTuple:[uuid,node]}):actions.removeNodeFromGroup({groupId,nodeTuple:[uuid,node]})}),[actions,groupId,uuid])};const editLayerFocusManager_useEditLayerFocusManager=function useEditLayerFocusManager(selector){return(0,src.Sz)(context,selector??src.yR)},constants={EDIT_ELEMENT:"EDIT_ELEMENT",ELEMENT_SELECTION:"ELEMENT_SELECTION"}},"./packages/story-editor/src/components/floatingMenu/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NW:()=>SELECTED_ELEMENT_TYPES,f2:()=>hasDesignMenu,k0:()=>TOOLBAR_POSITIONS});var _googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/elements/src/index.ts");const SELECTED_ELEMENT_TYPES={..._googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__.Yj,MULTIPLE:"multiple",NONE:"none"},TOOLBAR_POSITIONS={ELEMENT:"FIXED_TO_ELEMENT",TOP:"FIXED_TO_TOP"};function hasDesignMenu(type){switch(type){case SELECTED_ELEMENT_TYPES.MULTIPLE:return!0;case SELECTED_ELEMENT_TYPES.NONE:return!1;default:return(0,_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__.Do)(type)?.hasDesignMenu}}},"./packages/story-editor/src/components/floatingMenu/menu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>menu});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),contextMenu=__webpack_require__("./packages/design-system/src/components/contextMenu/contextMenu.tsx"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),editLayerFocusManager=__webpack_require__("./packages/story-editor/src/components/canvas/editLayerFocusManager/index.js");const context=(0,src.kr)({state:{},actions:{}});const use=function useFloatingMenu(selector){return(0,src.Sz)(context,selector??src.yR)};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function FloatingMenuProvider({handleDismiss,children}){const value={state:{},actions:{handleDismiss}};return(0,jsx_runtime.jsx)(context.Provider,{value,children})}FloatingMenuProvider.displayName="FloatingMenuProvider";const provider=FloatingMenuProvider;var constants=__webpack_require__("./packages/story-editor/src/components/floatingMenu/constants.js"),border_box=__webpack_require__("./packages/design-system/src/icons/border_box.svg"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),masks_src=__webpack_require__("./packages/masks/src/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),shared=__webpack_require__("./packages/story-editor/src/components/panels/design/border/shared.js"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),color=__webpack_require__("./packages/story-editor/src/components/form/color/index.js");const EYEDROPPER_WIDTH=38,WIDTH_INCLUDING_INPUTS=184,WIDTH_EXCLUDING_INPUTS=60;function FloatingColor(props){const{hasInputs,hasEyedropper,allowsGradient=!0}=props,width=function getWidth(hasInputs,hasEyedropper){return(hasInputs?WIDTH_INCLUDING_INPUTS:WIDTH_EXCLUDING_INPUTS)+(hasEyedropper?EYEDROPPER_WIDTH:0)}(hasInputs,hasEyedropper);return(0,jsx_runtime.jsx)(color.Z,{width,maxHeight:362,pickerPlacement:popup_constants.ug.TopStart,isInDesignMenu:!0,allowsGradient,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!hasEyedropper,containerLabelBase:(0,i18n.__)("Color input (floating menu)","web-stories"),...props})}FloatingColor.displayName="FloatingColor";const shared_color=FloatingColor;var focusTrapButton=__webpack_require__("./packages/story-editor/src/components/floatingMenu/elements/shared/focusTrapButton.js"),icon=__webpack_require__("./packages/design-system/src/components/contextMenu/components/icon.tsx"),components_tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),button_constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),components_button=__webpack_require__("./packages/design-system/src/components/contextMenu/components/button.tsx");const toggleButton=(0,src.Gp)((function ToggleButton({isToggled,children,...rest},ref){const toggleProps="boolean"==typeof isToggled?{type:isToggled?button_constants.L$.Secondary:button_constants.L$.Tertiary,"aria-pressed":isToggled,role:"button"}:{};return(0,jsx_runtime.jsx)(components_button.Z,{ref,...toggleProps,...rest,children})})),shared_icon=(0,src.X$)((0,src.Gp)((function IconButton({Icon,title,hasTooltip=!0,...rest},ref){return(0,jsx_runtime.jsx)(components_tooltip.Z,{placement:popup_constants.ug.Bottom,title:hasTooltip?title:void 0,children:(0,jsx_runtime.jsx)(toggleButton,{"aria-label":title,ref,tabIndex:-1,...rest,children:(0,jsx_runtime.jsx)(icon.Z,{title,children:(0,jsx_runtime.jsx)(Icon,{})})})})})));var numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),contextMenu_constants=__webpack_require__("./packages/design-system/src/components/contextMenu/constants.ts");const input=(0,styled_components_browser_esm.ZP)(numericInput.Z).attrs({inputClassName:contextMenu_constants.r}).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);const shared_separator=__webpack_require__("./packages/design-system/src/components/contextMenu/components/separator.tsx").Z,Button=(0,styled_components_browser_esm.ZP)(components_button.Z).withConfig({displayName:"text__Button",componentId:"sc-fb6dx4-0"})(["font-size:14px;padding:0 12px;font-weight:normal;letter-spacing:normal;"]),shared_text=(0,src.X$)((function TextButton({text,...rest}){return(0,jsx_runtime.jsx)(Button,{forcePadding:!0,...rest,tabIndex:-1,children:text})}));var story=__webpack_require__("./packages/story-editor/src/app/story/index.ts"),objectPick=__webpack_require__("./packages/story-editor/src/utils/objectPick.ts");const shared_useProperties=function useProperties(propertyList){return(0,story.rB)((({state:{selectedElements}})=>(0,objectPick.Z)(selectedElements[0],propertyList)))};var useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js"),updateProperties=__webpack_require__("./packages/story-editor/src/components/style/updateProperties.js"),getUpdatedSizeAndPosition=__webpack_require__("./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js");const shared_useTextToggle=function useTextToggle({currentValue,handler,eventName}){const{content}=shared_useProperties(["content"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),pushUpdate=(0,src.I4)((update=>{(0,tracking_src.L9)("floating_menu",{name:eventName,element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.Z)(element,update,!0),sizeUpdates=(0,getUpdatedSizeAndPosition.Z)({...element,...updates});return{...updates,...sizeUpdates}}})}),[updateElementsById,selectedElementIds,eventName]),{textInfo,handlers}=(0,useRichTextFormatting.Z)([{content,type:"text"}],pushUpdate);return{isToggled:textInfo[currentValue],toggle:()=>{(0,handlers[handler])(!textInfo[currentValue])}}},Container=styled_components_browser_esm.ZP.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),Dash=styled_components_browser_esm.ZP.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(({theme})=>theme.colors.border.defaultNormal));const BLACK={color:{r:0,g:0,b:0}},WIDTH_LABEL=(0,i18n.__)("Border width","web-stories"),COLOR_LABEL=(0,i18n.__)("Border color","web-stories");function BorderWidthAndColor(){const inputRef=(0,src.sO)(),buttonRef=(0,src.sO)(),{border=shared.t,mask,type}=shared_useProperties(["border","mask","type"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),hasUniformBorder=border?.left===border?.right&&border?.left===border?.top&&border?.left===border?.bottom;if(!border?.lockedWidth&&!hasUniformBorder)return null;const canHaveBorderOpacity=(0,masks_src.e5)({mask}),hasBorderWidth=function getHasBorderWidth(border){if(!border)return!1;const{left,right,top,bottom}=border;return Boolean(left||right||top||bottom)}(border);return(0,jsx_runtime.jsxs)(Container,{children:[(0,jsx_runtime.jsx)(focusTrapButton.Z,{ref:buttonRef,inputRef,inputLabel:WIDTH_LABEL,children:(0,jsx_runtime.jsx)(input,{tabIndex:-1,ref:inputRef,suffix:(0,jsx_runtime.jsx)(border_box.Z,{}),value:border?.left||0,"aria-label":WIDTH_LABEL,onChange:(_,value)=>(value=>{(0,tracking_src.L9)("floating_menu",{name:"set_border_width",element:type}),updateElementsById({elementIds:selectedElementIds,properties:({border:oldBorder})=>({border:{locked:!0,color:border?.color,...oldBorder,left:value,right:value,top:value,bottom:value}})})})(value),onKeyDown:e=>{(0,focusTrapButton.y)(e,buttonRef)}})}),hasBorderWidth&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Dash,{}),(0,jsx_runtime.jsx)(shared_color,{tabIndex:-1,label:COLOR_LABEL,value:border?.color||BLACK,onChange:value=>{(0,tracking_src.L9)("floating_menu",{name:"set_border_color",element:type}),updateElementsById({elementIds:selectedElementIds,properties:({border:oldBorder})=>({border:{...oldBorder,color:value}})})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:canHaveBorderOpacity,allowsGradient:!1,allowsSavedColors:!1})]})]})}BorderWidthAndColor.displayName="BorderWidthAndColor";const borderWidthAndColor=BorderWidthAndColor;var corner=__webpack_require__("./packages/design-system/src/icons/corner.svg"),radius=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/radius.js");const CORNER_LABEL=(0,i18n.__)("Corner Radius","web-stories");function BorderRadius(){const inputRef=(0,src.sO)(),buttonRef=(0,src.sO)(),{borderRadius=radius.d,mask,type}=shared_useProperties(["borderRadius","mask","type"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),canHaveBorderRadius=(0,masks_src.e5)({mask}),hasUniformBorder=borderRadius.topLeft===borderRadius.topRight&&borderRadius.topLeft===borderRadius.bottomLeft&&borderRadius.topLeft===borderRadius.bottomRight;if(!canHaveBorderRadius||!borderRadius.locked&&!hasUniformBorder)return null;return(0,jsx_runtime.jsxs)(focusTrapButton.Z,{ref:buttonRef,inputRef,inputLabel:CORNER_LABEL,children:[(0,jsx_runtime.jsx)(input,{tabIndex:-1,ref:inputRef,suffix:(0,jsx_runtime.jsx)(corner.Z,{}),value:borderRadius.topLeft,"aria-label":CORNER_LABEL,onChange:(_,value)=>(value=>{(0,tracking_src.L9)("floating_menu",{name:"set_border_radius",element:type}),updateElementsById({elementIds:selectedElementIds,properties:{borderRadius:{locked:!0,topLeft:value,topRight:value,bottomRight:value,bottomLeft:value}}})})(value),onKeyDown:e=>{(0,focusTrapButton.y)(e,buttonRef)}}),(0,jsx_runtime.jsx)(shared_separator,{})]})}BorderRadius.displayName="BorderRadius";const borderRadius=BorderRadius;var cross=__webpack_require__("./packages/design-system/src/icons/cross.svg");function Dismiss({isMultiple}){const{type}=shared_useProperties(["type"]),{handleDismiss}=use((({actions:{handleDismiss}})=>({handleDismiss})));return(0,jsx_runtime.jsx)(shared_icon,{Icon:cross.Z,title:(0,i18n.__)("Dismiss menu","web-stories"),onClick:()=>{(0,tracking_src.L9)("floating_menu",{name:"dismiss_menu",element:isMultiple?"multiple":type}),handleDismiss()}})}Dismiss.displayName="Dismiss";const dismiss=Dismiss;var distribute_horizontal=__webpack_require__("./packages/design-system/src/icons/distribute_horizontal.svg"),distribute_vertical=__webpack_require__("./packages/design-system/src/icons/distribute_vertical.svg"),align_left=__webpack_require__("./packages/design-system/src/icons/align_left.svg"),align_center=__webpack_require__("./packages/design-system/src/icons/align_center.svg"),align_right=__webpack_require__("./packages/design-system/src/icons/align_right.svg"),align_top=__webpack_require__("./packages/design-system/src/icons/align_top.svg"),align_middle=__webpack_require__("./packages/design-system/src/icons/align_middle.svg"),align_bottom=__webpack_require__("./packages/design-system/src/icons/align_bottom.svg"),useAlignment=__webpack_require__("./packages/story-editor/src/components/panels/design/alignment/useAlignment.js");const elementAlignment=function ElementAlignment(){const{selectedElements,selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElements:state.selectedElements,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),{isDistributionEnabled,handleAlignLeft,handleAlignCenter,handleAlignRight,handleAlignTop,handleAlignMiddle,handleAlignBottom,handleHorizontalDistribution,handleVerticalDistribution}=(0,useAlignment.Z)({selectedElements,updateElements:callback=>{updateElementsById({elementIds:selectedElementIds,properties:callback})},isFloatingMenu:!0});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isDistributionEnabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shared_icon,{Icon:distribute_horizontal.Z,title:(0,i18n.__)("Distribute horizontally","web-stories"),onClick:handleHorizontalDistribution}),(0,jsx_runtime.jsx)(shared_icon,{Icon:distribute_vertical.Z,title:(0,i18n.__)("Distribute vertically","web-stories"),onClick:handleVerticalDistribution}),(0,jsx_runtime.jsx)(shared_separator,{})]}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_left.Z,title:(0,i18n.__)("Align left","web-stories"),onClick:handleAlignLeft}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_center.Z,title:(0,i18n.__)("Align center","web-stories"),onClick:handleAlignCenter}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_right.Z,title:(0,i18n.__)("Align right","web-stories"),onClick:handleAlignRight}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_top.Z,title:(0,i18n.__)("Align top","web-stories"),onClick:handleAlignTop}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_middle.Z,title:(0,i18n.__)("Align vertical center","web-stories"),onClick:handleAlignMiddle}),(0,jsx_runtime.jsx)(shared_icon,{Icon:align_bottom.Z,title:(0,i18n.__)("Align bottom","web-stories"),onClick:handleAlignBottom})]})};var mirror_leftright=__webpack_require__("./packages/design-system/src/icons/mirror_leftright.svg");const shared_useFlip=function useFlip(property){const{flip,type}=shared_useProperties(["flip","type"]),{selectedElementIds,updateElementsById}=(0,story.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return{[property]:flip?.[property]||!1,toggle:()=>{(0,tracking_src.L9)("floating_menu",{name:`set_flip_${property}`,element:type}),updateElementsById({elementIds:selectedElementIds,properties:oldElement=>({flip:{...oldElement.flip,[property]:Boolean(!oldElement.flip?.[property]||!1)}})})}}};function FlipHorizontal(){const{horizontal,toggle}=shared_useFlip("horizontal");return(0,jsx_runtime.jsx)(shared_icon,{Icon:mirror_leftright.Z,title:(0,i18n.__)("Flip horizontally","web-stories"),onClick:toggle,isToggled:horizontal})}FlipHorizontal.displayName="FlipHorizontal";const flipHorizontal=FlipHorizontal;var mirror_updown=__webpack_require__("./packages/design-system/src/icons/mirror_updown.svg");function FlipVertical(){const{vertical,toggle}=shared_useFlip("vertical");return(0,jsx_runtime.jsx)(shared_icon,{Icon:mirror_updown.Z,title:(0,i18n.__)("Flip vertically","web-stories"),onClick:toggle,isToggled:vertical})}FlipVertical.displayName="FlipVertical";const flipVertical=FlipVertical;var storyFontPicker=__webpack_require__("./packages/story-editor/src/components/storyFontPicker/index.js");const StyledFontPicker=(0,styled_components_browser_esm.ZP)(storyFontPicker.Z).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),listStyleOverrides=(0,styled_components_browser_esm.iv)(["max-height:200px;"]),containerStyleOverrides=(0,styled_components_browser_esm.iv)(["border:1px solid ",";"],(({theme})=>theme.colors.border.defaultNormal));function FontFamily(){const{selectedElements}=(0,story.rB)((({state})=>({selectedElements:state.selectedElements})));return(0,jsx_runtime.jsx)(StyledFontPicker,{tabIndex:-1,listStyleOverrides,containerStyleOverrides,selectedElements})}FontFamily.displayName="FontFamily";const fontFamily=FontFamily;var styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),font=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/font.js");const fontSize_Input=(0,styled_components_browser_esm.ZP)(numericInput.Z).attrs({inputClassName:contextMenu_constants.r}).withConfig({displayName:"fontSize__Input",componentId:"sc-17k2x26-0"})(["width:50px;flex:0 0 50px;"]),FONT_SIZE_LABEL=(0,i18n.__)("Font size","web-stories");function FontSize(){const inputRef=(0,src.sO)(),buttonRef=(0,src.sO)(),{fontSize,selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({fontSize:state.selectedElements[0].fontSize,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),onChange=(0,src.I4)((update=>{(0,tracking_src.L9)("floating_menu",{name:"set_font_size"}),updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.Z)(element,update,!0),sizeUpdates=(0,getUpdatedSizeAndPosition.Z)({...element,...updates});return{...updates,...sizeUpdates}}})}),[selectedElementIds,updateElementsById]);return(0,jsx_runtime.jsx)(focusTrapButton.Z,{ref:buttonRef,inputRef,inputLabel:FONT_SIZE_LABEL,children:(0,jsx_runtime.jsx)(fontSize_Input,{tabIndex:-1,ref:inputRef,"aria-label":FONT_SIZE_LABEL,isFloat:!0,value:fontSize,onChange:(evt,value)=>onChange({fontSize:value}),min:font.s.FONT_SIZE.MIN,max:font.s.FONT_SIZE.MAX,placeholder:fontSize,containerStyleOverride:styles.O,selectButtonStylesOverride:styles.j,onKeyDown:e=>{(0,focusTrapButton.y)(e,buttonRef)}})})}FontSize.displayName="FontSize";const fontSize=FontSize;var color_drop=__webpack_require__("./packages/design-system/src/icons/color_drop.svg"),sizePosition_opacity=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/opacity.js");const layerOpacity_Input=(0,styled_components_browser_esm.ZP)(numericInput.Z).withConfig({displayName:"layerOpacity__Input",componentId:"sc-1pptz1t-0"})(["width:82px;flex:0 0 82px;"]),OPACITY_LABEL=(0,i18n.__)("Opacity in percent","web-stories");function LayerOpacity(){const inputRef=(0,src.sO)(),buttonRef=(0,src.sO)(),{opacity,type}=shared_useProperties(["opacity","type"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return(0,jsx_runtime.jsx)(focusTrapButton.Z,{ref:buttonRef,inputRef,inputLabel:OPACITY_LABEL,children:(0,jsx_runtime.jsx)(layerOpacity_Input,{ref:inputRef,tabIndex:-1,suffix:(0,jsx_runtime.jsx)(color_drop.Z,{}),unit:(0,i18n._x)("%","Percentage","web-stories"),value:opacity||0,"aria-label":OPACITY_LABEL,onChange:(_,value)=>{(0,tracking_src.L9)("floating_menu",{name:"set_opacity",element:type}),updateElementsById({elementIds:selectedElementIds,properties:()=>({opacity:value??100})})},inputClassName:contextMenu_constants.r,onKeyDown:e=>{(0,focusTrapButton.y)(e,buttonRef)},min:sizePosition_opacity.s.OPACITY.MIN,max:sizePosition_opacity.s.OPACITY.MAX})})}LayerOpacity.displayName="LayerOpacity";const layerOpacity=LayerOpacity;var loopPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js");const StyledLoopContent=(0,styled_components_browser_esm.ZP)(loopPanelContent.Z).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);function Loop(){const{loop}=shared_useProperties(["loop"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return(0,jsx_runtime.jsx)(StyledLoopContent,{tabIndex:-1,loop,onChange:()=>{(0,tracking_src.L9)("floating_menu",{name:"set_loop"}),updateElementsById({elementIds:selectedElementIds,properties:({loop:oldLoop})=>({loop:!oldLoop})})}})}Loop.displayName="Loop";const loop=Loop;var highlights=__webpack_require__("./packages/story-editor/src/app/highlights/index.ts");function More(){const setHighlights=(0,highlights.QM)((({setHighlights})=>setHighlights)),selectedElementType=(0,app.rB)((({state})=>state.selectedElements[0].type));return(0,jsx_runtime.jsx)(shared_text,{text:(0,i18n._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{setHighlights({highlight:highlights.$q.StylePane}),(0,tracking_src.L9)("floating_menu",{name:"click_more_button",element:selectedElementType})}})}More.displayName="More";const more=More;var muted=__webpack_require__("./packages/design-system/src/icons/muted.svg"),useVideoElementTranscoding=__webpack_require__("./packages/story-editor/src/app/media/utils/useVideoElementTranscoding.js");function Mute(){const{id:elementId,resource}=shared_useProperties(["id","resource"]),{state:{canMute,isMuting,isDisabled},actions:{handleMute}}=(0,useVideoElementTranscoding.Z)({elementId,resource});if(!canMute)return null;const title=isMuting?(0,i18n.__)("Removing audio","web-stories"):(0,i18n.__)("Remove audio","web-stories");return(0,jsx_runtime.jsx)(shared_icon,{Icon:muted.Z,title,disabled:isDisabled||isMuting,onClick:e=>{(0,tracking_src.L9)("floating_menu",{name:"set_mute"}),handleMute(e)}})}Mute.displayName="Mute";const mute=Mute;function ShapeColor(){const{backgroundColor,selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({backgroundColor:state.selectedElements[0].backgroundColor,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),onChange=(0,src.I4)((value=>{(0,tracking_src.L9)("floating_menu",{name:"set_shape_color",element:"shape"}),updateElementsById({elementIds:selectedElementIds,properties:()=>({backgroundColor:value})})}),[selectedElementIds,updateElementsById]);return(0,jsx_runtime.jsx)(shared_color,{tabIndex:-1,label:(0,i18n.__)("Shape color","web-stories"),value:backgroundColor,allowsSavedColors:!0,onChange,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0,opacityFocusTrap:!0,colorFocusTrap:!0})}ShapeColor.displayName="ShapeColor";const shapeColor=ShapeColor;__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var item=__webpack_require__("./packages/design-system/src/components/contextMenu/components/item.tsx"),localStore=__webpack_require__("./packages/design-system/src/utils/localStore.ts"),checkmark_small=__webpack_require__("./packages/design-system/src/icons/checkmark_small.svg"),settings=__webpack_require__("./packages/design-system/src/icons/settings.svg");const MenuItem=(0,styled_components_browser_esm.ZP)(item.Z).withConfig({displayName:"settings__MenuItem",componentId:"sc-aqi6f7-0"})(["span{font-size:14px;font-weight:400;}"]),StyledIconButton=(0,styled_components_browser_esm.ZP)(shared_icon).withConfig({displayName:"settings__StyledIconButton",componentId:"sc-aqi6f7-1"})(["svg{width:24px;height:24px;}"]),SubMenuContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"settings__SubMenuContainer",componentId:"sc-aqi6f7-2"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),LOCAL_STORAGE_KEY=localStore.h.ELEMENT_TOOLBAR_SETTINGS;const elements_settings=function Settings(){const[isMenuOpen,setIsMenuOpen]=(0,src.eJ)(!1),{setFloatingMenuPosition,setDisplayFloatingMenu,floatingMenuPosition}=(0,app.$P)((({actions,state})=>({setFloatingMenuPosition:actions.setFloatingMenuPosition,setDisplayFloatingMenu:actions.setDisplayFloatingMenu,floatingMenuPosition:state.floatingMenuPosition}))),setHighlights=(0,highlights.QM)((({setHighlights})=>setHighlights)),buttonRef=(0,src.sO)(),subMenuRef=(0,src.sO)(),[offsetLeft,setOffsetLeft]=(0,src.eJ)(0);(0,src.d4)((()=>setOffsetLeft(buttonRef.current.parentNode.offsetLeft+-8)),[]);const handleCloseMenu=()=>setIsMenuOpen(!1),local=(0,src.Ye)((()=>localStore.W.getItemByKey(LOCAL_STORAGE_KEY)||{}),[]),handleToolbarPosition=position=>{setFloatingMenuPosition(position),localStore.W.setItemByKey(LOCAL_STORAGE_KEY,{...local,position}),(0,tracking_src.L9)("floating_menu",{name:"reposition_menu",position})},hideFloatingMenu=(0,src.I4)((()=>{setDisplayFloatingMenu(!1),localStore.W.setItemByKey(LOCAL_STORAGE_KEY,{...local,isDisplayed:!1}),setHighlights({highlight:highlights.$q.ElementToolbarToggle}),(0,tracking_src.L9)("floating_menu",{name:"persistent_menu_hide"})}),[local,setDisplayFloatingMenu,setHighlights]),subMenuItems=[{key:constants.k0.ELEMENT,label:(0,jsx_runtime.jsx)("span",{children:(0,i18n.__)("Fix to element","web-stories")}),onClick:()=>handleToolbarPosition(constants.k0.ELEMENT),supportsIcon:!0,icon:floatingMenuPosition&&floatingMenuPosition!==constants.k0.ELEMENT?null:(0,jsx_runtime.jsx)(checkmark_small.Z,{})},{key:constants.k0.TOP,label:(0,jsx_runtime.jsx)("span",{children:(0,i18n.__)("Fix to top","web-stories")}),onClick:()=>handleToolbarPosition(constants.k0.TOP),supportsIcon:!0,icon:floatingMenuPosition===constants.k0.TOP?(0,jsx_runtime.jsx)(checkmark_small.Z,{}):null},{key:"hide",label:(0,jsx_runtime.jsx)("span",{children:(0,i18n.__)("Always hide","web-stories")}),supportsIcon:!0,onClick:()=>hideFloatingMenu()}];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledIconButton,{ref:buttonRef,Icon:settings.Z,title:(0,i18n.__)("Menu settings","web-stories"),onClick:()=>setIsMenuOpen((value=>!value)),"aria-haspopup":"menu","aria-expanded":isMenuOpen,hasTooltip:!isMenuOpen}),(0,jsx_runtime.jsx)(SubMenuContainer,{ref:subMenuRef,style:{left:`${offsetLeft}px`},children:(0,jsx_runtime.jsx)(contextMenu.Z,{onDismiss:handleCloseMenu,isOpen:isMenuOpen,onCloseSubMenu:handleCloseMenu,"aria-label":(0,i18n.__)("Toolbar position options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:buttonRef,children:subMenuItems.map((({key,...menuItemProps})=>(0,jsx_runtime.jsx)(MenuItem,{...menuItemProps},key)))})})]})};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js");var align_text_left=__webpack_require__("./packages/design-system/src/icons/align_text_left.svg"),align_text_center=__webpack_require__("./packages/design-system/src/icons/align_text_center.svg"),align_text_right=__webpack_require__("./packages/design-system/src/icons/align_text_right.svg"),align_text_justified=__webpack_require__("./packages/design-system/src/icons/align_text_justified.svg"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),disclosure=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx");const textAlign_SubMenuContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),StyledMenuButton=(0,styled_components_browser_esm.ZP)(components_button.Z).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(({theme})=>theme.colors.border.defaultNormal)),StyledMenuIcon=(0,styled_components_browser_esm.ZP)(icon.Z).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),ALIGNMENTS=[{value:"left",icon:align_text_left.Z,label:(0,i18n.__)("Align text left","web-stories")},{value:"center",icon:align_text_center.Z,label:(0,i18n.__)("Align text center","web-stories")},{value:"right",icon:align_text_right.Z,label:(0,i18n.__)("Align text right","web-stories")},{value:"justify",icon:align_text_justified.Z,label:(0,i18n.__)("Align text justified","web-stories")}];const textAlign=function TextAlign(){const{textAlign="left"}=shared_useProperties(["textAlign"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),[isMenuOpen,setMenuOpen]=(0,src.eJ)(!1),subMenuRef=(0,src.sO)(),buttonRef=(0,src.sO)(),[offsetLeft,setOffsetLeft]=(0,src.eJ)(0);(0,src.d4)((()=>setOffsetLeft(buttonRef.current.parentNode.offsetLeft+-8)),[]);const currentIconMounted=node=>{node&&setTimeout((()=>node.focus()))},{icon:CurrentIcon,label:currentLabel}=ALIGNMENTS.find((({value})=>value===textAlign))||ALIGNMENTS[0],handleTextAlign=value=>()=>{(0,tracking_src.L9)("floating_menu",{name:`set_text_alignment_${value}`,element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:{textAlign:value}})},handleCloseMenu=()=>{setMenuOpen(!1),buttonRef.current.focus()},buttonLabel=(0,i18n.__)("Change text alignment","web-stories"),tooltip=isMenuOpen?"":buttonLabel;return(0,keyboard.Ew)(buttonRef,"down",(()=>setMenuOpen(!0)),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(components_tooltip.Z,{placement:popup_constants.ug.Bottom,title:tooltip,children:(0,jsx_runtime.jsx)(StyledMenuButton,{tabIndex:-1,ref:buttonRef,onClick:()=>setMenuOpen((value=>!value)),"aria-haspopup":"menu","aria-expanded":isMenuOpen,"aria-label":buttonLabel,children:(0,jsx_runtime.jsxs)(StyledMenuIcon,{title:tooltip,children:[(0,jsx_runtime.jsx)(CurrentIcon,{role:"img","aria-label":currentLabel}),(0,jsx_runtime.jsx)(disclosure.Z,{style:{marginLeft:-8,marginRight:0},$isOpen:isMenuOpen})]})})}),(0,jsx_runtime.jsx)(textAlign_SubMenuContainer,{ref:subMenuRef,style:{left:`${offsetLeft}px`},children:(0,jsx_runtime.jsx)(contextMenu.Z,{onDismiss:handleCloseMenu,isOpen:isMenuOpen,onCloseSubMenu:handleCloseMenu,"aria-label":(0,i18n.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:buttonRef,isHorizontal:!0,children:ALIGNMENTS.map((({value,icon,label})=>(0,jsx_runtime.jsx)(shared_icon,{isToggled:value===textAlign,ref:value===textAlign?currentIconMounted:null,Icon:icon,title:label,onClick:handleTextAlign(value)},value)))})})]})};var hasGradient=__webpack_require__("./packages/patterns/src/hasGradient.ts"),createSolid=__webpack_require__("./packages/patterns/src/createSolid.ts"),src_constants=__webpack_require__("./packages/patterns/src/constants.ts"),story_editor_src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts");function TextColor(){const{content}=shared_useProperties(["content"]),{selectedElementIds,updateElementsById}=(0,app.rB)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),pushUpdate=(0,src.I4)((update=>{(0,tracking_src.L9)("floating_menu",{name:"set_text_color",element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:element=>(0,updateProperties.Z)(element,update,!0)})}),[updateElementsById,selectedElementIds]),{textInfo:{color,gradientColor},handlers:{handleSetColor,handleSetGradientColor}}=(0,useRichTextFormatting.Z)([{content,type:"text"}],pushUpdate),colorInputValue=gradientColor===story_editor_src_constants.mh?story_editor_src_constants.mh:(0,hasGradient.Z)(gradientColor)?gradientColor:color;return(0,jsx_runtime.jsx)(shared_color,{tabIndex:-1,label:(0,i18n.__)("Text color","web-stories"),allowsSavedColors:!0,value:colorInputValue,onChange:color=>{(0,hasGradient.Z)(color)?(handleSetColor((0,createSolid.Z)(0,0,0)),handleSetGradientColor(color)):(handleSetGradientColor(src_constants.ob),handleSetColor(color))},hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0})}TextColor.displayName="TextColor";const textColor=TextColor;var letter_b_bold=__webpack_require__("./packages/design-system/src/icons/letter_b_bold.svg");function ToggleBold(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return(0,jsx_runtime.jsx)(shared_icon,{isToggled,Icon:letter_b_bold.Z,title:(0,i18n.__)("Toggle bold","web-stories"),onClick:toggle,tabIndex:-1})}ToggleBold.displayName="ToggleBold";const toggleBold=ToggleBold;var letter_i_italic=__webpack_require__("./packages/design-system/src/icons/letter_i_italic.svg");function ToggleItalics(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return(0,jsx_runtime.jsx)(shared_icon,{isToggled,Icon:letter_i_italic.Z,title:(0,i18n.__)("Toggle italic","web-stories"),onClick:toggle,tabIndex:-1})}ToggleItalics.displayName="ToggleItalics";const toggleItalics=ToggleItalics;var letter_u_underline=__webpack_require__("./packages/design-system/src/icons/letter_u_underline.svg");function ToggleUnderline(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return(0,jsx_runtime.jsx)(shared_icon,{isToggled,Icon:letter_u_underline.Z,title:(0,i18n.__)("Toggle underline","web-stories"),onClick:toggle,tabIndex:-1})}ToggleUnderline.displayName="ToggleUnderline";const toggleUnderline=ToggleUnderline;var scissors=__webpack_require__("./packages/design-system/src/icons/scissors.svg");function Trim(){const{id:elementId,resource}=shared_useProperties(["id","resource"]),{state:{canTrim,isTrimming,isDisabled},actions:{handleTrim}}=(0,useVideoElementTranscoding.Z)({elementId,resource});if(!canTrim)return null;const title=isTrimming?(0,i18n.__)("Trimming video","web-stories"):(0,i18n.__)("Trim video","web-stories");return(0,jsx_runtime.jsx)(shared_icon,{Icon:scissors.Z,title,disabled:isDisabled||isTrimming,onClick:e=>{(0,tracking_src.L9)("floating_menu",{name:"set_trim"}),handleTrim(e)}})}Trim.displayName="Trim";const trim=Trim;var trash=__webpack_require__("./packages/design-system/src/icons/trash.svg");function Trash({title,handleRemove}){return(0,jsx_runtime.jsx)(shared_icon,{Icon:trash.Z,title,onClick:handleRemove})}Trash.displayName="Trash";const elements_trash=Trash,menus_image=(0,src.X$)((function FloatingImageMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(layerOpacity,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(flipHorizontal,{}),(0,jsx_runtime.jsx)(flipVertical,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(borderWidthAndColor,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(more,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})})),multiple=(0,src.X$)((function FloatingMultipleMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(elementAlignment,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{isMultiple:!0})]})})),shape=(0,src.X$)((function FloatingShapeMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(shapeColor,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(borderRadius,{}),(0,jsx_runtime.jsx)(flipHorizontal,{}),(0,jsx_runtime.jsx)(flipVertical,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(borderWidthAndColor,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(more,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})})),sticker=(0,src.X$)((function FloatingStickerMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(layerOpacity,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(flipHorizontal,{}),(0,jsx_runtime.jsx)(flipVertical,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(more,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})})),menus_text=(0,src.X$)((function FloatingTextMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(fontFamily,{}),(0,jsx_runtime.jsx)(fontSize,{}),(0,jsx_runtime.jsx)(textAlign,{}),(0,jsx_runtime.jsx)(toggleBold,{}),(0,jsx_runtime.jsx)(toggleItalics,{}),(0,jsx_runtime.jsx)(toggleUnderline,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(textColor,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(more,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})})),video=(0,src.X$)((function FloatingVideoMenu(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(layerOpacity,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(flipHorizontal,{}),(0,jsx_runtime.jsx)(flipVertical,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(borderWidthAndColor,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(loop,{}),(0,jsx_runtime.jsx)(trim,{}),(0,jsx_runtime.jsx)(mute,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(more,{}),(0,jsx_runtime.jsx)(shared_separator,{}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})}));var config=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),productDropdown=__webpack_require__("./packages/story-editor/src/components/library/panes/shopping/productDropdown.js");const StyledDropDown=(0,styled_components_browser_esm.ZP)(productDropdown.Z).withConfig({displayName:"product__StyledDropDown",componentId:"sc-6kpcrl-0"})(["width:240px;"]),FloatingProductMenu=(0,src.X$)((function FloatingProductMenu(){const{selectedElement,updateSelectedElements,deleteSelectedElements}=(0,story.rB)((({actions,state})=>({updateSelectedElements:actions.updateSelectedElements,selectedElement:state.selectedElements[0],deleteSelectedElements:actions.deleteSelectedElements}))),{shoppingProvider}=(0,config.ZR)(),isShoppingEnabled="none"!==shoppingProvider,setProduct=(0,src.I4)((product=>updateSelectedElements({properties:{product}})),[updateSelectedElements]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isShoppingEnabled&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledDropDown,{product:selectedElement?.product,setProduct}),(0,jsx_runtime.jsx)(shared_separator,{})]}),(0,jsx_runtime.jsx)(elements_trash,{title:(0,i18n.__)("Remove product","web-stories"),handleRemove:deleteSelectedElements}),(0,jsx_runtime.jsx)(elements_settings,{}),(0,jsx_runtime.jsx)(dismiss,{})]})})),product=FloatingProductMenu,selector=(0,src.X$)((function FloatingMenuSelector({selectedElementType}){switch(selectedElementType){case constants.NW.MULTIPLE:return(0,jsx_runtime.jsx)(multiple,{});case constants.NW.GIF:case constants.NW.IMAGE:return(0,jsx_runtime.jsx)(menus_image,{});case constants.NW.SHAPE:return(0,jsx_runtime.jsx)(shape,{});case constants.NW.STICKER:return(0,jsx_runtime.jsx)(sticker,{});case constants.NW.TEXT:return(0,jsx_runtime.jsx)(menus_text,{});case constants.NW.VIDEO:return(0,jsx_runtime.jsx)(video,{});case constants.NW.PRODUCT:return(0,jsx_runtime.jsx)(product,{});default:return null}})),FLOATING_MENU_MESSAGE=(0,i18n.__)("To exit the floating menu, press Escape.","web-stories"),MenuWrapper=styled_components_browser_esm.ZP.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";visibility:",";transition:140ms opacity;"],zIndex.VW,(({visuallyHidden})=>visuallyHidden?"hidden":"visible")),FloatingMenu=(0,src.X$)((0,src.Gp)((function FloatingMenu({selectionIdentifier,selectedElementType,handleDismiss,visuallyHidden},ref){const focusGroupRef=(0,editLayerFocusManager._n)(editLayerFocusManager.HL.EDIT_ELEMENT),speak=(0,useLiveRegion.Z)(),announceKeyboardControls=(0,src.I4)((()=>{speak(FLOATING_MENU_MESSAGE)}),[speak]);return(0,src.bt)((()=>{const node=ref.current,updateSize=()=>{node.style.width="";const bounds=node.getBoundingClientRect();node.style.setProperty("--width",`${bounds.width.toFixed(2)}px`),node.style.setProperty("--height",`${bounds.height.toFixed(2)}px`),node.style.width="var(--width)"};updateSize();const observer=new MutationObserver(updateSize),menu=node.querySelector("[role=menu]");return observer.observe(menu,{childList:!0}),()=>observer.disconnect()}),[ref,selectionIdentifier]),(0,jsx_runtime.jsx)(MenuWrapper,{ref,"aria-label":(0,i18n.__)("Design menu","web-stories"),visuallyHidden,children:(0,jsx_runtime.jsx)(provider,{handleDismiss,children:(0,jsx_runtime.jsx)(contextMenu.Z,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,tabIndex:-1,ref:focusGroupRef,dismissOnEscape:!1,onFocus:announceKeyboardControls,"aria-label":(0,i18n.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:zIndex.VW,children:(0,jsx_runtime.jsx)(selector,{selectedElementType})})})})}))),menu=FloatingMenu},"./packages/story-editor/src/components/fontPicker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/datalist/list/styled.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/components/datalist/datalist.tsx"),_app__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/app/index.js"),_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Gp)((function FontPicker({zIndex,onChange,currentValue,highlightStylesOverride,showDropdownLabel,listStyleOverrides,containerStyleOverrides,className,tabIndex},ref){const{fonts=[],recentFonts=[],curatedFonts=[],customFonts=[],ensureMenuFontsLoaded,ensureCustomFontsLoaded,getFontsBySearch,loadCustomFonts,loadCuratedFonts}=(0,_app__WEBPACK_IMPORTED_MODULE_5__.jo)((({actions,state})=>({getFontsBySearch:actions.getFontsBySearch,ensureMenuFontsLoaded:actions.ensureMenuFontsLoaded,ensureCustomFontsLoaded:actions.ensureCustomFontsLoaded,loadCuratedFonts:actions.loadCuratedFonts,loadCustomFonts:actions.loadCustomFonts,recentFonts:state.recentFonts,curatedFonts:state.curatedFonts,fonts:state.fonts,customFonts:state.customFonts})));(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.d4)((()=>{loadCustomFonts(),loadCuratedFonts()}),[loadCustomFonts,loadCuratedFonts]);const fontMap=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>{const map=new Map;return fonts.forEach((f=>{map.set(f.id,f)})),customFonts?.forEach((f=>{map.set(f.id,f)})),map}),[fonts,customFonts]),onObserve=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((observedFonts=>{observedFonts.length&&(ensureMenuFontsLoaded(observedFonts.filter((fontName=>"fonts.google.com"===fontMap.get(fontName)?.service))),ensureCustomFontsLoaded(observedFonts.filter((fontName=>"custom"===fontMap.get(fontName)?.service))))}),[fontMap,ensureCustomFontsLoaded,ensureMenuFontsLoaded]),renderer=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((({option,...rest},_ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.GL,{ref:_ref,...rest,fontFamily:"fonts.google.com"===option.service?`'${option.name}::MENU'`:option.name,children:[currentValue===option.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Ne,{"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Selected","web-stories")}),option.name]})),[currentValue]),priorityOptionGroups=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>[...customFonts?.length?[{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Your fonts","web-stories"),options:customFonts}]:[],...recentFonts?.length?[{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Recently used","web-stories"),options:recentFonts}]:[]]),[customFonts,recentFonts]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.Z,{ref,zIndex,tabIndex,highlightStylesOverride,"data-testid":"font",title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Available font families","web-stories"),dropdownButtonLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Font family","web-stories"),options:fonts,primaryOptions:curatedFonts,primaryLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Recommended","web-stories"),priorityOptionGroups,searchResultsLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Search results","web-stories"),selectedId:_constants__WEBPACK_IMPORTED_MODULE_6__.mh===currentValue?"":currentValue,placeholder:_constants__WEBPACK_IMPORTED_MODULE_6__.mh===currentValue?_constants__WEBPACK_IMPORTED_MODULE_6__.nz:currentValue,hasSearch:!0,getOptionsByQuery:getFontsBySearch,onChange,onObserve,renderer:(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Gp)(renderer),disabled:!fonts?.length,dropDownLabel:showDropdownLabel?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Font","web-stories"):null,listStyleOverrides,containerStyleOverrides,className})}))},"./packages/story-editor/src/components/form/stackable/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>stackableGroup,H:()=>stackableInput});__webpack_require__("./node_modules/react/index.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx");const inputContainerStyleOverride=(0,styled_components_browser_esm.iv)(["position:relative;:focus-within{z-index:1;",";}"],(({theme})=>outline.R(theme.colors.border.focus,theme.colors.bg.secondary))),iconCss=(0,styled_components_browser_esm.iv)(["width:29px;height:29px;"]),stackableInput=(0,styled_components_browser_esm.ZP)(numericInput.Z).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],iconCss,inputContainerStyleOverride);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const StackableContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}",""],(({locked})=>locked?"106px":"none"),stackableInput,(({$stackableGroupStyleOverride})=>$stackableGroupStyleOverride));function StackableGroup({children,locked,className,stackableGroupStyleOverride}){return(0,jsx_runtime.jsx)(StackableContainer,{$stackableGroupStyleOverride:stackableGroupStyleOverride,locked,className,children})}StackableGroup.displayName="StackableGroup";const stackableGroup=StackableGroup},"./packages/story-editor/src/components/library/panes/shopping/productDropdown.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/datalist/datalist.tsx"),_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/elements/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/app/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ProductDropdown({product,setProduct,...rest}){const initialProducts=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>[{id:product?.productId,name:product?.productTitle,product}]),[product]),[isLoading,setIsLoading]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.eJ)(!1),[initialOptions,setInitialOptions]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.eJ)(initialProducts),{actions:{getProducts}}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.Ek)(),{isSaving,currentPageProductIds}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.rB)((({state:{meta:{isSaving},currentPage}})=>({isSaving,currentPageProductIds:currentPage?.elements?.filter((({type})=>type===_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_5__.Yj.PRODUCT)).filter((({product:p})=>p.productId!==product.productId)).map((({product:p})=>p?.productId))}))),getProductsByQuery=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)((async(value="")=>{const{products}=await getProducts(value);return products.filter((p=>p.productImages.length&&!currentPageProductIds.includes(p.productId))).map((p=>({name:p.productTitle,id:p.productId,product:p})))}),[currentPageProductIds,getProducts]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.d4)((()=>{(async()=>{try{setIsLoading(!0);const products=await getProductsByQuery();setInitialOptions(products)}catch(err){setInitialOptions(initialProducts)}finally{setIsLoading(!1)}})()}),[initialProducts]);const dropDownParams={hasSearch:!0,lightMode:!0,onChange:({product:newProduct})=>setProduct(newProduct),getOptionsByQuery:getProductsByQuery,selectedId:product?.productId,dropDownLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Product","web-stories"),disabled:isSaving,primaryOptions:isLoading?initialProducts:initialOptions,zIndex:10};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.Z,{options:initialOptions,searchResultsLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Search results","web-stories"),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Product","web-stories"),...dropDownParams,...rest})}ProductDropdown.displayName="ProductDropdown";const __WEBPACK_DEFAULT_EXPORT__=ProductDropdown},"./packages/story-editor/src/components/panels/design/alignment/useAlignment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/units/src/constants.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/units/src/calcRotatedObjectPositionAndSize.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/units/src/getBoundRect.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/units/src/dimensions.ts"),_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/tracking/src/index.ts");const PAGE_RECT={startX:0,startY:0,endX:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.JN,endY:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.r_,width:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.JN,height:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.r_},ALIGNMENT_LEFT="left",ALIGNMENT_RIGHT="right",ALIGNMENT_TOP="top",ALIGNMENT_BOTTOM="bottom";const __WEBPACK_DEFAULT_EXPORT__=function useAlignment({selectedElements,updateElements,isFloatingMenu}){const isDistributionEnabled=selectedElements.length>2,selectedElementsWithFrame=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_7__.Ye)((()=>selectedElements.map((item=>{const{id,groupId,x,y,width,height,rotationAngle}=item;let frameX=x,frameY=y,frameWidth=width,frameHeight=height;if(rotationAngle){const elementFrame=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_10__.Z)(rotationAngle,x,y,width,height);frameX=elementFrame.x,frameY=elementFrame.y,frameWidth=elementFrame.width,frameHeight=elementFrame.height}return{id,groupId,x,y,width,height,frameX,frameY,frameWidth,frameHeight}}))),[selectedElements]),selectedGroupId=selectedElements[0].groupId,isOnlyGroupSelected=selectedGroupId&&selectedElements.every((el=>el.groupId&&el.groupId===selectedGroupId)),boundRect=1===selectedElements.length||isOnlyGroupSelected?PAGE_RECT:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.Z)(selectedElements),handleTrackEvent=direction=>{(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_8__.L9)(isFloatingMenu?"floating_menu":"design_panel",{name:`set_alignment_${direction}`,element:"multiple"})},handleAlign=direction=>{handleTrackEvent(direction),updateElements((properties=>{const{id,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.Z)(selectedElements.filter((el=>el.groupId===groupId))):null,element=selectedElementsWithFrame.find((item=>item.id===id)),{width=0,height=0,frameWidth=0,frameHeight=0}=element||{},offset=direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?(frameWidth-width)/2:(frameHeight-height)/2,offsetInGroup=groupId?direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?element.frameX-groupRect.startX:element.frameY-groupRect.startY:0,calcWidth=groupId?groupRect.width:width,calcHeight=groupId?groupRect.height:height;return direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?{x:direction===ALIGNMENT_LEFT?boundRect.startX+offset+offsetInGroup:boundRect.endX-calcWidth-offset+offsetInGroup}:{y:direction===ALIGNMENT_TOP?boundRect.startY+offset+offsetInGroup:boundRect.endY-calcHeight-offset+offsetInGroup}}))};return{isDistributionEnabled,handleAlignLeft:()=>handleAlign(ALIGNMENT_LEFT),handleAlignCenter:()=>{handleTrackEvent("center");const centerX=(boundRect.endX+boundRect.startX)/2;updateElements((properties=>{const{id,width,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.Z)(selectedElements.filter((el=>el.groupId===groupId))):null,calcWidth=groupId?groupRect.width:width,element=selectedElementsWithFrame.find((item=>item.id===id)),offsetInGroup=groupId?element.frameX-groupRect.startX:0;return{x:centerX-calcWidth/2+offsetInGroup}}))},handleAlignRight:()=>handleAlign(ALIGNMENT_RIGHT),handleAlignTop:()=>handleAlign(ALIGNMENT_TOP),handleAlignMiddle:()=>{handleTrackEvent("middle");const centerY=(boundRect.endY+boundRect.startY)/2;updateElements((properties=>{const{id,height,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.Z)(selectedElements.filter((el=>el.groupId===groupId))):null,calcHeight=groupId?groupRect.height:height,element=selectedElementsWithFrame.find((item=>item.id===id)),offsetInGroup=groupId?element.frameY-groupRect.startY:0;return{y:centerY-calcHeight/2+offsetInGroup}}))},handleAlignBottom:()=>handleAlign(ALIGNMENT_BOTTOM),handleHorizontalDistribution:()=>{handleTrackEvent("horizontal_distribution");const sortedElementsWithFrame=[...selectedElementsWithFrame];sortedElementsWithFrame.sort(((a,b)=>(a.frameX+a.frameWidth)/2-(b.frameX+b.frameWidth)/2));const elementWidthSum=sortedElementsWithFrame.reduce(((sum,element)=>sum+element.frameWidth),0),commonSpaceWidth=boundRect.width-elementWidthSum,commonSpaceWidthPerElement=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__.RM)(commonSpaceWidth/(sortedElementsWithFrame.length-1)),updatedX={};let offsetX=0;sortedElementsWithFrame.forEach(((element,index)=>{const{id,x,width,frameWidth}=element;0===index||index===sortedElementsWithFrame.length-1?(updatedX[id]={x},offsetX=x):updatedX[id]={x:offsetX+(frameWidth-width)/2},offsetX+=frameWidth+commonSpaceWidthPerElement})),updateElements((({id})=>updatedX[id]))},handleVerticalDistribution:()=>{handleTrackEvent("vertical_distribution");const sortedElementsWithFrame=[...selectedElementsWithFrame];sortedElementsWithFrame.sort(((a,b)=>(a.frameY+a.frameHeight)/2-(b.frameY+b.frameHeight)/2));const elementHeightSum=sortedElementsWithFrame.reduce(((sum,element)=>sum+element.frameHeight),0),commonSpaceHeight=boundRect.height-elementHeightSum,commonSpaceHeightPerElement=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__.RM)(commonSpaceHeight/(sortedElementsWithFrame.length-1)),updatedY={};let offsetY=0;sortedElementsWithFrame.forEach(((element,index)=>{const{id,y,height,frameHeight}=element;0===index||index===sortedElementsWithFrame.length-1?(updatedY[id]={y},offsetY=y):updatedY[id]={y:offsetY+(frameHeight-height)/2},offsetY+=frameHeight+commonSpaceHeightPerElement})),updateElements((({id})=>updatedY[id]))}}}},"./packages/story-editor/src/components/panels/design/border/shared.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>DEFAULT_BORDER});const DEFAULT_BORDER={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,__webpack_require__("./packages/patterns/src/createSolid.ts").Z)(0,0,0)}},"./packages/story-editor/src/components/panels/design/sizePosition/opacity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,s:()=>MIN_MAX});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/icons/color_drop.svg"),_shared_getCommonValue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js"),_shared_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MIN_MAX={OPACITY:{MIN:0,MAX:100}};function defaultOpacity({opacity}){return void 0!==opacity?opacity:MIN_MAX.OPACITY.MAX}function OpacityControls({selectedElements,pushUpdate}){const opacity=(0,_shared_getCommonValue__WEBPACK_IMPORTED_MODULE_2__.Z)(selectedElements,defaultOpacity),handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)(((evt,value)=>pushUpdate({opacity:value??100},!0)),[pushUpdate]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.Z,{suffix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Z,{}),unit:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__._x)("%","Percentage","web-stories"),value:opacity,onChange:handleChange,min:MIN_MAX.OPACITY.MIN,max:MIN_MAX.OPACITY.MAX,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Opacity in percent","web-stories"),placeholder:opacity===_constants__WEBPACK_IMPORTED_MODULE_4__.mh?_constants__WEBPACK_IMPORTED_MODULE_4__.nz:"",isIndeterminate:opacity===_constants__WEBPACK_IMPORTED_MODULE_4__.mh,containerStyleOverride:_shared_styles__WEBPACK_IMPORTED_MODULE_3__.O})}OpacityControls.displayName="OpacityControls";const __WEBPACK_DEFAULT_EXPORT__=OpacityControls},"./packages/story-editor/src/components/panels/design/sizePosition/radius.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,d:()=>DEFAULT_BORDER_RADIUS});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/design-system/src/icons/corner.svg"),_googleforcreators_masks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/masks/src/index.ts"),_form_stackable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/components/form/stackable/index.js"),_shared_useCommonObjectValue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js"),_shared_styles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_constants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DEFAULT_BORDER_RADIUS={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},FlexContainer=styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),LockContainer=styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),StyledLockToggle=(0,styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.o).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],_shared_styles__WEBPACK_IMPORTED_MODULE_7__.j),TopLeft=(0,styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Z).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),TopRight=(0,styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Z).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),BottomRight=(0,styled_components__WEBPACK_IMPORTED_MODULE_11__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Z).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);function RadiusControls({selectedElements,pushUpdateForObject,stackableGroupStyleOverride}){const borderRadius=(0,_shared_useCommonObjectValue__WEBPACK_IMPORTED_MODULE_6__.Z)(selectedElements,"borderRadius",DEFAULT_BORDER_RADIUS),allSupportBorder=selectedElements.every((el=>(0,_googleforcreators_masks__WEBPACK_IMPORTED_MODULE_4__.e5)(el))),lockRadius=!0===borderRadius.locked,handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.I4)(((name,value)=>{pushUpdateForObject("borderRadius",lockRadius?{topLeft:value,topRight:value,bottomRight:value,bottomLeft:value}:{[name]:value},DEFAULT_BORDER_RADIUS,!0)}),[pushUpdateForObject,lockRadius]),handleLockChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.I4)((locked=>{const newRadius=locked?{locked,topLeft:borderRadius.topLeft,topRight:borderRadius.topLeft,bottomRight:borderRadius.topLeft,bottomLeft:borderRadius.topLeft}:{locked};pushUpdateForObject("borderRadius",newRadius,DEFAULT_BORDER_RADIUS,!0)}),[pushUpdateForObject,borderRadius]);if(!allSupportBorder)return null;const firstInputLabel=lockRadius?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Corner Radius","web-stories"):(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Top left corner radius","web-stories");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(FlexContainer,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.m,{stackableGroupStyleOverride,locked:lockRadius,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{suffix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(TopLeft,{}),value:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?"":borderRadius.topLeft,"aria-label":firstInputLabel,onChange:(_,value)=>handleChange("topLeft",value),placeholder:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?_constants__WEBPACK_IMPORTED_MODULE_9__.nz:"",isIndeterminate:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh}),!lockRadius&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{suffix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(TopRight,{}),value:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?"":borderRadius.topRight,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Top right corner radius","web-stories"),onChange:(_,value)=>handleChange("topRight",value),placeholder:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?_constants__WEBPACK_IMPORTED_MODULE_9__.nz:"",isIndeterminate:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{value:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?"":borderRadius.bottomLeft,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Bottom left corner radius","web-stories"),onChange:(_,value)=>handleChange("bottomLeft",value),placeholder:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?_constants__WEBPACK_IMPORTED_MODULE_9__.nz:"",suffix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_13__.Z,{}),isIndeterminate:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.mh}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{value:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?"":borderRadius.bottomRight,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Bottom right corner radius","web-stories"),onChange:(_,value)=>handleChange("bottomRight",value),placeholder:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh?_constants__WEBPACK_IMPORTED_MODULE_9__.nz:"",suffix:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(BottomRight,{}),isIndeterminate:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.mh})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(LockContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_8__.Z,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Toggle consistent corner radius","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(StyledLockToggle,{isLocked:borderRadius.locked,onClick:()=>handleLockChange(!borderRadius.locked),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_14__.__)("Toggle consistent corner radius","web-stories")})},borderRadius.locked.toString())})]})}RadiusControls.displayName="RadiusControls";const __WEBPACK_DEFAULT_EXPORT__=RadiusControls},"./packages/story-editor/src/components/panels/design/textStyle/font.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>MIN_MAX,Z:()=>textStyle_font});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),dropdown=__webpack_require__("./packages/design-system/src/components/dropDown/dropdown.tsx"),dom_src=__webpack_require__("./packages/dom/src/index.ts"),range=__webpack_require__("./packages/units/src/range.ts"),font=__webpack_require__("./packages/story-editor/src/app/font/index.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),shared=__webpack_require__("./packages/story-editor/src/components/panels/shared/index.js"),storyFontPicker=__webpack_require__("./packages/story-editor/src/components/storyFontPicker/index.js"),constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js");const textStyle_getFontWeights=function getFontWeights(font){const defaultFontWeights=[{label:constants.f5[400],value:"400"}];return font?.weights?font.weights.map((weight=>({label:constants.f5[weight],value:weight.toString()}))):defaultFontWeights};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const MIN_MAX={FONT_SIZE:{MIN:8,MAX:800}},Space=styled_components_browser_esm.ZP.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),StyledNumericInput=(0,styled_components_browser_esm.ZP)(numericInput.Z).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),StyledDropDown=(0,styled_components_browser_esm.ZP)(dropdown.Z).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const textStyle_font=function FontControls({selectedElements,pushUpdate,highlightStylesOverride,fontDropdownRef}){const fontFamily=(0,shared.d9)(selectedElements,(({font})=>font?.family)),fontSize=(0,shared.d9)(selectedElements,"fontSize"),{textInfo:{fontWeight,isItalic},handlers:{handleSelectFontWeight}}=(0,useRichTextFormatting.Z)(selectedElements,pushUpdate),{fonts=[],maybeEnqueueFontStyle,getFontByName}=(0,font.jo)((({actions:{maybeEnqueueFontStyle,getFontByName},state:{fonts}})=>({maybeEnqueueFontStyle,getFontByName,fonts}))),fontWeights=(0,src.Ye)((()=>textStyle_getFontWeights(getFontByName(fontFamily))),[getFontByName,fontFamily]),fontStyle=isItalic?"italic":"normal",handleFontWeightPickerChange=(0,src.I4)((async(evt,value)=>{await maybeEnqueueFontStyle(selectedElements.map((({font,content})=>({font,fontStyle,fontWeight:Number.parseInt(value),content:(0,dom_src.Cb)(content)})))),handleSelectFontWeight(value)}),[fontStyle,handleSelectFontWeight,maybeEnqueueFontStyle,selectedElements]);return(0,components_form.pz)((({fontSize:newFontSize})=>({fontSize:(0,range.uZ)(newFontSize,MIN_MAX.FONT_SIZE)})),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[fonts&&(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsx)(storyFontPicker.Z,{ref:fontDropdownRef,highlightStylesOverride,showDropdownLabel:!0,selectedElements})}),(0,jsx_runtime.jsxs)(components_form.X2,{children:[fontWeights&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledDropDown,{ariaLabel:(0,i18n.__)("Font weight","web-stories"),placeholder:constants.nz,options:fontWeights,selectedValue:constants.mh===fontWeight?"":fontWeight,onMenuItemClick:handleFontWeightPickerChange,selectButtonStylesOverride:styles.j}),(0,jsx_runtime.jsx)(Space,{})]}),(0,jsx_runtime.jsx)(StyledNumericInput,{"aria-label":(0,i18n.__)("Font size","web-stories"),isFloat:!0,value:fontSize,onChange:(evt,value)=>pushUpdate({fontSize:value},!0),min:MIN_MAX.FONT_SIZE.MIN,max:MIN_MAX.FONT_SIZE.MAX,isIndeterminate:constants.mh===fontSize,placeholder:constants.mh===fontSize?constants.nz:null,containerStyleOverride:styles.O})]})]})}},"./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/patterns/src/isPatternEqual.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/rich-text/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/app/index.js"),_constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/src/constants/index.ts");function reduceWithMultiple(reduced,info){return Object.fromEntries(Object.keys(info).map((key=>{const wasMultiple=reduced[key]===_constants__WEBPACK_IMPORTED_MODULE_7__.mh,areDifferent=void 0!==reduced[key]&&!function isEqual(a,b){const isAPattern=a&&"object"==typeof a&&(a.type||a.color),isBPattern=b&&"object"==typeof b&&(b.type||b.color);return isAPattern&&isBPattern?(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__.Z)(a,b):a===b}(reduced[key],info[key]);return wasMultiple||areDifferent?[key,_constants__WEBPACK_IMPORTED_MODULE_7__.mh]:[key,info[key]]})))}const __WEBPACK_DEFAULT_EXPORT__=function useRichTextFormatting(selectedElements,pushUpdate){const{hasCurrentEditor,selectionInfo,selectionActions}=(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.X1)((({state,actions})=>({hasCurrentEditor:state.hasCurrentEditor,selectionInfo:state.selectionInfo,selectionActions:actions.selectionActions}))),{clearEditing}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.$P)((({actions:{clearEditing}})=>({clearEditing}))),textInfo=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>hasCurrentEditor?selectionInfo:selectedElements.map((({content})=>content)).map(_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.$y).reduce(reduceWithMultiple,{})),[hasCurrentEditor,selectionInfo,selectedElements]),push=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)(((updater,...args)=>pushUpdate((({content})=>({content:updater(content,...args)})),!0)),[pushUpdate]),queuedPushRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.sO)(null),queuePush=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.I4)(((...args)=>{queuedPushRef.current=args}),[queuedPushRef]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.d4)((()=>{const pushArgs=queuedPushRef.current;pushArgs&&(push(...pushArgs),queuedPushRef.current=null)}),[selectedElements,queuedPushRef,push]);const handlers=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Ye)((()=>{const htmlFormatters=(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.l5)();return hasCurrentEditor?{handleClickBold:()=>selectionActions.toggleBoldInSelection(),handleSelectFontWeight:selectionActions.setFontWeightInSelection,handleClickItalic:selectionActions.toggleItalicInSelection,handleClickUnderline:selectionActions.toggleUnderlineInSelection,handleClickUppercase:selectionActions.toggleUppercaseInSelection,handleSetLetterSpacing:selectionActions.setLetterSpacingInSelection,handleSetColor:selectionActions.setColorInSelection,handleSetGradientColor:selectionActions.setGradientColorInSelection,handleResetFontWeight:async weight=>{await clearEditing(),queuePush(htmlFormatters.setFontWeight,weight)}}:{handleClickBold:flag=>push(htmlFormatters.toggleBold,flag),handleSelectFontWeight:weight=>push(htmlFormatters.setFontWeight,weight),handleClickItalic:flag=>push(htmlFormatters.toggleItalic,flag),handleClickUnderline:flag=>push(htmlFormatters.toggleUnderline,flag),handleClickUppercase:flag=>push(htmlFormatters.toggleUppercase,flag),handleSetLetterSpacing:letterSpacing=>push(htmlFormatters.setLetterSpacing,letterSpacing),handleSetColor:color=>push(htmlFormatters.setColor,color),handleSetGradientColor:color=>push(htmlFormatters.setGradientColor,color),handleResetFontWeight:weight=>push(htmlFormatters.setFontWeight,weight)}}),[hasCurrentEditor,selectionActions,push,clearEditing,queuePush]),hasText=selectedElements.find((({type})=>"text"===type));return(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.xb)({key:["mod+b","mod+u","mod+i"]},(({key})=>{if(hasText)switch(key){case"b":handlers.handleClickBold();break;case"i":handlers.handleClickItalic();break;case"u":handlers.handleClickUnderline()}}),[handlers,hasText]),{textInfo,handlers}}},"./packages/story-editor/src/components/panels/shared/flipControls.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/icons/mirror_leftright.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/design-system/src/icons/mirror_updown.svg"),_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ControlsContainer=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),Space=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),StyledToggleButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.C).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],_styles__WEBPACK_IMPORTED_MODULE_3__.j);function FlipControls({value,onChange}){const getCurrentFlipValue=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.I4)((prop=>!0===value[prop]),[value]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(ControlsContainer,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Flip horizontally","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledToggleButton,{variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Wu.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.qE.Small,isToggled:!0===value.horizontal,onClick:()=>onChange({...value,horizontal:!getCurrentFlipValue("horizontal")}),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Flip horizontally","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.Z,{})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Space,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Flip vertically","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledToggleButton,{variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Wu.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.qE.Small,isToggled:!0===value.vertical,onClick:()=>onChange({...value,vertical:!getCurrentFlipValue("vertical")}),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Flip vertically","web-stories"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_10__.Z,{})})})]})}FlipControls.displayName="FlipControls";const __WEBPACK_DEFAULT_EXPORT__=FlipControls},"./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _getCommonValue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js");const __WEBPACK_DEFAULT_EXPORT__=function getCommonObjectValue(list,property,defaultValue){const commonValue={},propertyObjects=list.map((element=>element[property]||defaultValue));return Object.keys(defaultValue).forEach((prop=>{commonValue[prop]=(0,_getCommonValue__WEBPACK_IMPORTED_MODULE_3__.Z)(propertyObjects,prop)})),commonValue}},"./packages/story-editor/src/components/panels/shared/getCommonValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js");var _constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/constants/index.ts");function ifDef(value,def){return void 0===value?def:value}const __WEBPACK_DEFAULT_EXPORT__=function getCommonValue(list,propertyOrFunc,def=void 0){const func="function"==typeof propertyOrFunc?propertyOrFunc:item=>item[propertyOrFunc],first=ifDef(func(list[0]),def);return list.every((el=>ifDef(func(el),def)===first))?first:_constants__WEBPACK_IMPORTED_MODULE_2__.mh}},"./packages/story-editor/src/components/panels/shared/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z0:()=>flipControls.Z,L7:()=>linkRelations,d9:()=>getCommonValue.Z,x2:()=>useCommonColorValue.Z,cn:()=>useCommonObjectValue.Z});var flipControls=__webpack_require__("./packages/story-editor/src/components/panels/shared/flipControls.js"),typography_text=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/typography/text/index.ts")),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),checkbox_checkbox=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const LinkTypes=[{key:"sponsored",title:(0,i18n.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,i18n.__)("Nofollow","web-stories")}],CheckboxWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),Label=styled_components_browser_esm.ZP.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),StyledText=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(({theme})=>theme.colors.fg.secondary));function LinkRelations({rel,onChangeRel}){const relHelpLink=(0,i18n.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),onChange=(0,src.I4)((value=>{const newRel=rel.includes(value)?rel.filter((el=>el!==value)):[...rel,value];onChangeRel(newRel)}),[onChangeRel,rel]);return(0,jsx_runtime.jsx)(components_form.X2,{children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(StyledText,{size:types.TextSize.Small,children:(0,i18n.__)("Qualify outbound links","web-stories")}),LinkTypes.map((({key,title})=>(0,jsx_runtime.jsxs)(CheckboxWrapper,{children:[(0,jsx_runtime.jsx)(checkbox_checkbox.Z,{id:key,name:key,checked:rel?.includes(key),onChange:()=>onChange(key)}),(0,jsx_runtime.jsx)(Label,{htmlFor:key,children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:title})})]},key))),(0,jsx_runtime.jsx)(typography_link.r,{rel:"noopener noreferrer",target:"_blank",href:relHelpLink,size:types.TextSize.XSmall,children:(0,i18n.__)("Learn more","web-stories")})]})})}LinkRelations.displayName="LinkRelations";const linkRelations=LinkRelations;var getCommonValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js"),useCommonColorValue=(__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js"),__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonColorValue.js")),useCommonObjectValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js")},"./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const StyledCheckbox=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.Z).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-4opv01-0"})(["",""],(({theme})=>`\n    input[type='checkbox']:focus-visible ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${theme.colors.bg.secondary}, 0px 0px 0 4px ${theme.colors.border.focus} !important;\n    }\n  `)),Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-4opv01-1"})(["display:flex;gap:12px;align-items:center;"]);function LoopPanelContent({loop,className="",onChange,...props}){const checkboxId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.UX)((()=>`cb-${(0,uuid__WEBPACK_IMPORTED_MODULE_5__.Z)()}`));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(Wrapper,{className,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StyledCheckbox,{id:checkboxId,checked:loop,onChange,...props}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.x.Label,{size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.TextSize.Small,htmlFor:checkboxId,children:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Loop","web-stories")})]})}LoopPanelContent.displayName="LoopPanelContent";const __WEBPACK_DEFAULT_EXPORT__=LoopPanelContent},"./packages/story-editor/src/components/panels/shared/useCommonColorValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/patterns/src/convertToCSS.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function useCommonColorValue(list,property){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Ye)((()=>{const allValues=list.map((element=>element[property]));if(0===allValues.length)return null;if(1===allValues.length)return allValues[0];const uniqueValues={};return allValues.forEach((value=>{const serialized=(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__.Z)(value));serialized in uniqueValues||(uniqueValues[serialized]=value)})),1===Object.keys(uniqueValues).length?Object.values(uniqueValues)[0]:_constants__WEBPACK_IMPORTED_MODULE_4__.mh}),[list,property])}},"./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_getCommonObjectValue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js");const __WEBPACK_DEFAULT_EXPORT__=function useCommonObjectValue(list,property,defaultValue){const commonValue=(0,_getCommonObjectValue__WEBPACK_IMPORTED_MODULE_2__.Z)(list,property,defaultValue),parts=Object.keys(defaultValue).map((prop=>commonValue[prop]));return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>commonValue),parts)}},"./packages/story-editor/src/components/storyFontPicker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>storyFontPicker});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var src=__webpack_require__("./packages/react/src/index.ts"),dom_src=__webpack_require__("./packages/dom/src/index.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),getUpdatedSizeAndPosition=__webpack_require__("./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js"),useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const textStyle_getClosestFontWeight=function getClosestFontWeight(existingWeight=400,availableWeights){return existingWeight=Number.parseInt(existingWeight),isNaN(Number.parseInt(existingWeight))?400:availableWeights&&0!==availableWeights.length?availableWeights.reduce(((a,b)=>{a=Number.parseInt(a),b=Number.parseInt(b);const aDiff=Math.abs(a-existingWeight),bDiff=Math.abs(b-existingWeight);return aDiff===bDiff?a<b?a:b:bDiff<aDiff?b:a})):existingWeight};var shared=__webpack_require__("./packages/story-editor/src/components/panels/shared/index.js"),fontPicker=__webpack_require__("./packages/story-editor/src/components/fontPicker/index.js"),updateProperties=__webpack_require__("./packages/story-editor/src/components/style/updateProperties.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const storyFontPicker=(0,src.Gp)((function StoryFontPicker({selectedElements,...rest},ref){const{updateElementsById}=(0,app.rB)((({actions})=>({updateElementsById:actions.updateElementsById}))),selectedElementIds=selectedElements.map((({id})=>id)),pushUpdate=(0,src.I4)(((update,commitValues)=>{updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.Z)(element,update,commitValues),sizeUpdates=(0,getUpdatedSizeAndPosition.Z)({...element,...updates});return{...updates,...sizeUpdates}}})}),[updateElementsById,selectedElementIds]),{textInfo:{fontWeight,isItalic},handlers:{handleResetFontWeight}}=(0,useRichTextFormatting.Z)(selectedElements,pushUpdate),{addRecentFont,maybeEnqueueFontStyle}=(0,app.jo)((({actions})=>({addRecentFont:actions.addRecentFont,maybeEnqueueFontStyle:actions.maybeEnqueueFontStyle}))),fontFamily=(0,shared.d9)(selectedElements,(({font})=>font?.family)),fontStyle=isItalic?"italic":"normal",onChange=(0,src.I4)((async newFont=>{const{id,name,value,...newFontFormatted}=newFont;(0,tracking_src.L9)("font_family_changed",{name}),await maybeEnqueueFontStyle(selectedElements.map((({content})=>({font:newFontFormatted,fontStyle,fontWeight,content:(0,dom_src.Cb)(content)})))),addRecentFont(newFont),pushUpdate({font:newFontFormatted},!0);const newFontWeight=textStyle_getClosestFontWeight(400,newFontFormatted.weights);await handleResetFontWeight(newFontWeight)}),[addRecentFont,fontStyle,fontWeight,maybeEnqueueFontStyle,pushUpdate,selectedElements,handleResetFontWeight]);return(0,jsx_runtime.jsx)(fontPicker.Z,{onChange,currentValue:fontFamily,...rest,ref})}))},"./packages/story-editor/src/components/style/updateProperties.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function updateProperties(currentProperties,newPropertiesOrUpdater,commitValues){const newProperties="function"==typeof newPropertiesOrUpdater?newPropertiesOrUpdater(currentProperties):newPropertiesOrUpdater;if(!newProperties)return{};let updatedKeys=Object.keys(newProperties);return updatedKeys=updatedKeys.filter((key=>newProperties[key]!==_constants__WEBPACK_IMPORTED_MODULE_3__.mh)),commitValues&&(updatedKeys=updatedKeys.filter((key=>""!==newProperties[key]))),0===updatedKeys.length?{}:Object.fromEntries(updatedKeys.map((key=>[key,newProperties[key]])))}},"./packages/story-editor/src/components/videoTrim/useVideoTrim.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_videoTrimContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/videoTrim/videoTrimContext.js");const __WEBPACK_DEFAULT_EXPORT__=function useVideoTrim(selector){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.Sz)(_videoTrimContext__WEBPACK_IMPORTED_MODULE_1__.Z,selector??_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.yR)}},"./packages/story-editor/src/components/videoTrim/videoTrimContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").kr)({state:{},actions:{}})},"./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/units/src/dimensions.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/units/src/calcRotatedResizeOffset.ts"),_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/element-library/src/index.js");const __WEBPACK_DEFAULT_EXPORT__=function getUpdatedSizeAndPosition(properties){const{width,height:oldHeight,rotationAngle,x,y}=properties,newHeight=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.RM)((0,_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_0__.XD)(properties,width)),[dx,dy]=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_2__.Z)(rotationAngle,0,0,0,newHeight-oldHeight);return{height:newHeight,x:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.RM)(x+dx),y:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.RM)(y+dy)}}}}]);