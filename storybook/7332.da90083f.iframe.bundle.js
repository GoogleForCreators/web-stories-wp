"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[7332],{"./packages/design-system/src/icons/arrow_left.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgArrowLeft=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.422 10.856a.5.5 0 0 0-.702-.712l-5.571 5.5a.5.5 0 0 0 0 .712l5.57 5.5a.5.5 0 0 0 .703-.711L10.718 16.5H22.5a.5.5 0 1 0 0-1H10.718l4.704-4.644Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgArrowLeft)},"./packages/design-system/src/icons/arrow_right_curved.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgArrowRightCurved=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M17.281 9.144a.5.5 0 0 0-.703.712l4.704 4.644H15.5A6.5 6.5 0 0 0 9 21v1.5a.5.5 0 1 0 1 0V21a5.5 5.5 0 0 1 5.5-5.5h5.783l-4.705 4.645a.5.5 0 0 0 .703.711l5.57-5.5a.5.5 0 0 0 0-.711l-5.57-5.5Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgArrowRightCurved)},"./packages/design-system/src/icons/arrows_leftright.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgArrowsLeftright=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.354 8.854a.5.5 0 0 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L5.707 12.5H17.5a.5.5 0 1 0 0-1H5.707l2.647-2.646ZM23.646 16.854a.5.5 0 1 1 .707-.707l3.5 3.5a.5.5 0 0 1 0 .707l-3.5 3.5a.5.5 0 0 1-.707-.708l2.647-2.646H14.5a.5.5 0 1 1 0-1h11.793l-2.647-2.646Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgArrowsLeftright)},"./packages/design-system/src/icons/color_drop.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgColorDrop=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",d:"M20.245 12.706 16 8.316l-4.245 4.39A6.346 6.346 0 0 0 10 17.087c0 1.554.585 3.193 1.755 4.404A5.89 5.89 0 0 0 16 23.317a5.89 5.89 0 0 0 4.245-1.826C21.415 20.28 22 18.641 22 17.087c0-1.554-.585-3.17-1.755-4.381Zm-9.166 4.66c.007-1.553.56-2.999 1.415-3.877L16 9.831l3.64 3.784c.855.87 1.341 2.198 1.349 3.752h-9.91Z"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgColorDrop)},"./packages/design-system/src/icons/lock_closed.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgLockClosed=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a3 3 0 0 0-3 3v3h-1.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5H19v-3a3 3 0 0 0-3-3Zm2 6v-3a2 2 0 1 0-4 0v3h4Zm-4.5 1h-2a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-7Zm2.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgLockClosed)},"./packages/design-system/src/icons/lock_open.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgLockOpen=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M17.816 8.415a3.023 3.023 0 0 0-4.161 1.129l-.255.447a.5.5 0 1 0 .87.494l.254-.447a2.023 2.023 0 0 1 2.786-.76 2.101 2.101 0 0 1 .75 2.844L16.964 14H11.5a1.5 1.5 0 0 0-1.5 1.5v7a1.5 1.5 0 0 0 1.5 1.5h9a1.5 1.5 0 0 0 1.5-1.5v-7a1.5 1.5 0 0 0-1.5-1.5h-2.379l.805-1.376.002-.005c.836-1.47.343-3.351-1.112-4.204ZM11.5 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-9Zm4.5 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgLockOpen)},"./packages/design-system/src/icons/pattern_linear.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,_defs,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPatternLinear=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),_defs||(_defs=react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("linearGradient",{id:"a",x1:16,x2:16,y1:4,y2:35.8,gradientUnits:"userSpaceOnUse"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop",{stopColor:"currentColor",stopOpacity:.52}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop",{offset:.802,stopColor:"currentColor",stopOpacity:0})))))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPatternLinear)},"./packages/design-system/src/icons/pattern_radial.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,_circle2,_defs,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPatternRadial=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:16,cy:16,r:12,fill:"url(#a)"})),_circle2||(_circle2=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:16,cy:16,r:11.5,stroke:"currentColor",strokeOpacity:.16})),_defs||(_defs=react__WEBPACK_IMPORTED_MODULE_0__.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientTransform:"rotate(90 0 16) scale(23.4)",gradientUnits:"userSpaceOnUse"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop",{stopColor:"currentColor",stopOpacity:.64}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("stop",{offset:.573,stopColor:"currentColor",stopOpacity:0})))))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPatternRadial)},"./packages/design-system/src/icons/pattern_solid.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _circle,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPatternSolid=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_circle||(_circle=react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:16,cy:16,r:11.5,fill:"currentColor",stroke:"currentColor"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPatternSolid)},"./packages/design-system/src/icons/pencil.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPencil=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m17.672 11.579-7.514 7.514a.5.5 0 0 0-.137.256l-.51 2.552a.5.5 0 0 0 .588.588l2.552-.51a.5.5 0 0 0 .255-.137l7.515-7.515-2.749-2.748Zm3.346-2.64a1.5 1.5 0 0 0-2.12 0L9.45 18.386a1.5 1.5 0 0 0-.41.766l-.511 2.552a1.5 1.5 0 0 0 1.765 1.766l2.552-.51a1.5 1.5 0 0 0 .767-.411l9.446-9.447a1.5 1.5 0 0 0 0-2.121L21.02 8.939Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPencil)},"./packages/design-system/src/icons/pipette.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPipette=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M23.247 8.753a2.571 2.571 0 0 0-3.636 0l-2.075 2.075-1.682-1.682a.5.5 0 1 0-.707.708l7 7a.5.5 0 0 0 .707-.708l-1.682-1.682 2.075-2.075a2.571 2.571 0 0 0 0-3.636Zm-2.783 5.004 2.076-2.075a1.571 1.571 0 1 0-2.222-2.222l-2.075 2.076 2.221 2.221Zm-5.05-.61a.5.5 0 0 1 0 .707L9.566 19.7a1.932 1.932 0 1 0 2.733 2.733l5.848-5.848a.5.5 0 1 1 .707.707l-5.848 5.848a2.932 2.932 0 1 1-4.147-4.147l5.848-5.848a.5.5 0 0 1 .707 0Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPipette)},"./packages/design-system/src/icons/plus.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPlus=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.5 9a.5.5 0 0 0-1 0v6.498h-7a.5.5 0 0 0 0 1h7v7.498a.5.5 0 1 0 1 0v-7.498h6.996a.5.5 0 1 0 0-1H16.5V9Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPlus)},"./packages/design-system/src/icons/plus_outline.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgPlusOutline=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 9a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-8 7a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm4 0a.5.5 0 0 1 .5-.5h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgPlusOutline)},"./packages/design-system/src/icons/tailed_rectangle.svg":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _path,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const SvgTailedRectangle=_ref=>{let{title,titleId,...props}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":titleId},props),title?react__WEBPACK_IMPORTED_MODULE_0__.createElement("title",{id:titleId},title):null,_path||(_path=react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{stroke:"currentColor",d:"M6.5 7.095c0-.854.743-1.595 1.722-1.595h15.556c.98 0 1.722.741 1.722 1.595v15.81c0 .854-.743 1.595-1.722 1.595H19.8c-.92 0-1.856.356-2.367 1.211l-.894 1.499c-.23.387-.847.387-1.078 0l-.895-1.499c-.488-.819-1.397-1.311-2.366-1.311H8.222c-.98 0-1.722-.742-1.722-1.595V7.095Z"})))},__WEBPACK_DEFAULT_EXPORT__=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(SvgTailedRectangle)},"./packages/design-system/src/components/button/toggleButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ToggleButton,o:()=>LockToggle});__webpack_require__("./node_modules/react/index.js");var _icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/icons/lock_closed.svg"),_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/icons/lock_open.svg"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ToggleButton(_ref){let{isToggled=!1,type,...rest}=_ref;const actualType=type===_constants__WEBPACK_IMPORTED_MODULE_2__.L$.Quaternary?type:isToggled?_constants__WEBPACK_IMPORTED_MODULE_2__.L$.Secondary:_constants__WEBPACK_IMPORTED_MODULE_2__.L$.Tertiary;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_button__WEBPACK_IMPORTED_MODULE_3__.z,{...rest,type:actualType,"aria-pressed":isToggled,isToggled})}function LockToggle(_ref2){let{isLocked=!1,...rest}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_button__WEBPACK_IMPORTED_MODULE_3__.z,{...rest,"aria-pressed":isLocked,type:_constants__WEBPACK_IMPORTED_MODULE_2__.L$.Tertiary,size:_constants__WEBPACK_IMPORTED_MODULE_2__.qE.Small,variant:_constants__WEBPACK_IMPORTED_MODULE_2__.Wu.Square,children:isLocked?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_icons__WEBPACK_IMPORTED_MODULE_4__.Z,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_icons__WEBPACK_IMPORTED_MODULE_5__.Z,{})})}ToggleButton.displayName="ToggleButton",LockToggle.displayName="LockToggle"},"./packages/design-system/src/components/checkbox/checkbox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/icons/checkmark.svg"),_theme_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Border=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"checkbox__Border",componentId:"sc-5lv9m4-0"})((_ref=>{let{theme}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["position:absolute;height:","px;width:","px;border-radius:",";border:","px solid ",";pointer-events:none;"],24,24,theme.borders.radius.small,1,theme.colors.border.defaultNormal)})),StyledCheckmark=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP)(_icons__WEBPACK_IMPORTED_MODULE_4__.Z).attrs({role:"img"}).withConfig({displayName:"checkbox__StyledCheckmark",componentId:"sc-5lv9m4-1"})(["height:auto;width:32px;color:",";"],(_ref2=>{let{theme}=_ref2;return theme.colors.fg.primary})),CheckboxContainer=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"checkbox__CheckboxContainer",componentId:"sc-5lv9m4-2"})((_ref3=>{let{theme}=_ref3;return(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["position:relative;display:flex;justify-content:center;align-items:center;height:","px;width:","px;min-height:","px;min-width:","px;input[type='checkbox']{position:absolute;width:","px;height:","px;margin:0;padding:0;opacity:0;cursor:pointer;:disabled{~ ","{border-color:",";}~ ","{color:",";}}&:focus-visible:not(:active) ~ ","{",";}:active ~ ","{border-color:",";box-shadow:0 0 0 8px ",";}}"],24,24,24,24,25,25,Border,theme.colors.border.disable,StyledCheckmark,theme.colors.fg.disable,Border,(0,_theme_helpers__WEBPACK_IMPORTED_MODULE_5__.R)(theme.colors.border.focus),Border,theme.colors.border.defaultNormal,theme.colors.shadow.active)})),__WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)(((_ref4,ref)=>{let{checked,disabled,className="",...props}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CheckboxContainer,{className,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"checkbox",ref,checked:Boolean(checked),disabled,"aria-checked":checked,...props}),checked&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StyledCheckmark,{"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Checked","web-stories")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Border,{})]})}))},"./packages/design-system/src/components/dialog/dialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_modal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/modal/modal.tsx"),_typography__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DialogBox=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"dialog__DialogBox",componentId:"sc-1p8gxmh-0"})(["display:flex;flex-direction:column;align-items:flex-start;max-width:512px;max-height:100%;color:",";background-color:",";overflow-y:auto;padding:12px 16px;border-radius:",";border:",";"],(_ref=>{let{theme}=_ref;return theme.colors.fg.primary}),(_ref2=>{let{theme}=_ref2;return theme.colors.bg.primary}),(_ref3=>{let{theme}=_ref3;return theme.borders.radius.medium}),(_ref4=>{let{theme}=_ref4;return`1px solid ${theme.colors.divider.primary}`})),DialogContent=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"dialog__DialogContent",componentId:"sc-1p8gxmh-1"})(["padding:8px 0 12px;margin:0;overflow-y:auto;color:",";"],(_ref5=>{let{theme}=_ref5;return theme.colors.fg.primary})),DialogActions=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"dialog__DialogActions",componentId:"sc-1p8gxmh-2"})(["display:flex;justify-content:flex-end;width:100%;& > button,& > a{margin-right:10px;margin-left:6px;&:last-child{margin-right:0;}}"]);function Dialog(_ref6){let{children,title,actions=[],isOpen=!1,onClose,contentLabel,...rest}=_ref6;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_modal__WEBPACK_IMPORTED_MODULE_3__.Z,{isOpen,onClose,contentLabel:contentLabel||title,...rest,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(DialogBox,{children:[Boolean(title)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_typography__WEBPACK_IMPORTED_MODULE_4__.s,{as:"h2",size:_theme__WEBPACK_IMPORTED_MODULE_5__.TextSize.XSmall,children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DialogContent,{children}),Boolean(actions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DialogActions,{children:actions})]})})}Dialog.displayName="Dialog";const __WEBPACK_DEFAULT_EXPORT__=Dialog},"./packages/design-system/src/components/hex/hex.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>hex});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),polished_esm=__webpack_require__("./node_modules/polished/dist/polished.esm.js"),getPreviewText=__webpack_require__("./packages/patterns/src/getPreviewText.ts");const src_getHexFromValue=function getHexFromValue(value){const val=(value||"").toUpperCase().trim().replace(/^#/,"");return/[^0-9a-f]/i.test(val)?null:6===val.length?val:1===val.length?val.repeat(6):2===val.length?val.repeat(3):3===val.length?val.replace(/./g,"$&$&"):4===val.length?`${val.substring(0,2).repeat(2)}${val.substring(2)}`:null};var keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const HexInput=(0,src.Gp)((function Hex(_ref,ref){let{value,placeholder,onChange,...rest}=_ref;const[inputValue,setInputValue]=(0,src.eJ)(null),inputRef=(0,src.sO)(null),skipValidationRef=(0,src.sO)(!1),previewText=(0,getPreviewText.Z)(value);(0,src.d4)((()=>setInputValue(previewText)),[previewText]);const handleInputChange=(0,src.I4)((evt=>{const val=evt.target.value.trim().replace(/^#/,"");setInputValue(val)}),[]),validateAndSubmitInput=(0,src.I4)((()=>{const hex=src_getHexFromValue(String(inputValue))??previewText;if(setInputValue(hex),hex!==previewText){const{red:r,green:g,blue:b}=(0,polished_esm.Oq)(`#${String(hex)}`),a=value.color.a;onChange({color:{r,g,b,a}})}}),[inputValue,previewText,onChange,value]),handleEnter=(0,src.I4)((()=>{validateAndSubmitInput()}),[validateAndSubmitInput]),handleInputBlur=(0,src.I4)((()=>{skipValidationRef.current||validateAndSubmitInput(),skipValidationRef.current=!1}),[validateAndSubmitInput]),handleEsc=(0,src.I4)((()=>{setInputValue(previewText),skipValidationRef.current=!0;const availableRef=ref&&"current"in ref?ref:inputRef;availableRef.current?.blur()}),[previewText,ref]);return(0,keyboard.Ew)(inputRef,{key:["escape"],editable:!0},handleEsc,[handleEsc]),(0,keyboard.Ew)(inputRef,{key:["enter"],editable:!0},handleEnter,[handleEnter]),(0,jsx_runtime.jsx)(input.Z,{ref:ref||inputRef,value:inputValue||"",onChange:handleInputChange,onBlur:handleInputBlur,placeholder,...rest})})),hex=HexInput},"./packages/design-system/src/components/input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_styled__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/input/styled.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InputContainer=styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP.div.withConfig({displayName:"input__InputContainer",componentId:"sc-3nq9b0-0"})((_ref=>{let{focused,hasError,theme,styleOverride}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["display:flex;align-items:center;justify-content:space-between;height:36px;padding:4px 12px;border:1px solid ",";border-radius:",";overflow:hidden;",";",";:focus-within{",";}",";"],theme.colors.border[hasError?"negativeNormal":"defaultNormal"],theme.borders.radius.small,focused&&!hasError&&(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["border-color:",";"],theme.colors.border.defaultActive),focused&&(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["","{color:",";}"],_styled__WEBPACK_IMPORTED_MODULE_4__.CM,theme.colors.fg.primary),(0,_theme_helpers__WEBPACK_IMPORTED_MODULE_5__.R)(theme.colors.border.focus),styleOverride)})),Input=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)(((_ref2,ref)=>{let{inputClassName,className,disabled,hasError,hint,id,label,onBlur,onFocus,hasFocus=!1,suffix,unit="",value="",isIndeterminate=!1,containerStyleOverride="",...props}=_ref2;const inputId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>id||(0,uuid__WEBPACK_IMPORTED_MODULE_6__.Z)()),[id]),[isFocused,setIsFocused]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(hasFocus),[hasBeenSelected,setHasBeenSelected]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.eJ)(!1);let displayedValue=value;unit&&"string"==typeof value&&value.length&&(displayedValue=`${value}${isFocused?"":`${unit}`}`),isIndeterminate&&(displayedValue="");const hasSuffix=Boolean(suffix);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_styled__WEBPACK_IMPORTED_MODULE_4__.W2,{className,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_styled__WEBPACK_IMPORTED_MODULE_4__.__,{htmlFor:inputId,disabled,children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(InputContainer,{focused:isFocused,hasError,styleOverride:containerStyleOverride,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_styled__WEBPACK_IMPORTED_MODULE_4__.Qc,{id:inputId,disabled,ref:input=>{"function"==typeof ref?ref(input):ref&&(ref.current=input),input&&isFocused&&!hasBeenSelected&&(input.select(),setHasBeenSelected(!0))},onFocus:e=>{onFocus?.(e),setIsFocused(!0),setHasBeenSelected(!1)},onBlur:e=>{onBlur?.(e),setIsFocused(!1)},value:displayedValue,hasSuffix,className:inputClassName,...props}),hasSuffix&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_styled__WEBPACK_IMPORTED_MODULE_4__.CM,{size:_theme__WEBPACK_IMPORTED_MODULE_7__.TextSize.Small,onClick:()=>setIsFocused(!0),children:suffix})]}),hint&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_styled__WEBPACK_IMPORTED_MODULE_4__.kW,{hasError,children:hint})]})}));Input.displayName="Input";const __WEBPACK_DEFAULT_EXPORT__=Input},"./packages/design-system/src/components/input/numericInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>numericInput});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),big=__webpack_require__("./node_modules/big.js/big.mjs");function parseInput(value,_ref){let{allowEmpty,isFloat,min,max}=_ref;if(`${String(value)}`.length>0){let boundedValue=isFloat?parseFloat(String(value)):parseInt(String(value));return void 0!==min&&(boundedValue=Math.max(min,boundedValue)),void 0!==max&&(boundedValue=Math.min(max,boundedValue)),isNaN(boundedValue)?null:boundedValue}return allowEmpty?"":null}const input_useNumericInput=_ref=>{let{allowEmpty,updateOnChange,isFloat,padZero,max,min,onChange,value,ref}=_ref;const _inputRef=(0,src.sO)(null),inputRef=ref&&"current"in ref?ref:_inputRef,oldValue=(0,src.sO)(value),revertToOriginal=(0,src.sO)(!1),[currentValue,setCurrentValue]=(0,src.eJ)(value),options=(0,src.Ye)((()=>({allowEmpty,isFloat,padZero,max,min})),[allowEmpty,isFloat,padZero,max,min]),handleBlur=(0,src.I4)((ev=>{let newValue=parseInput(oldValue.current,options);if(revertToOriginal.current||null===newValue)null!==currentValue&&(newValue=parseInput(currentValue,options));else{const parsedValue=parseInput(currentValue,options);null!==parsedValue&&(newValue=parsedValue)}revertToOriginal.current=!1,null!==newValue?(setCurrentValue(newValue),newValue!==oldValue.current&&onChange(ev,newValue)):void 0!==min?(setCurrentValue(min),onChange(ev,min)):allowEmpty?(setCurrentValue(""),onChange(ev,"")):(setCurrentValue("0"),onChange(ev,"0"))}),[allowEmpty,currentValue,min,onChange,options]),handleChange=(0,src.I4)((ev=>{const trimmedTargetValue=ev.target.value.trim();if(""===trimmedTargetValue)return setCurrentValue(""),void(updateOnChange&&allowEmpty&&onChange(ev,""));if(isNaN(Number(trimmedTargetValue)))"-"===trimmedTargetValue&&(setCurrentValue(trimmedTargetValue),updateOnChange&&onChange(ev,trimmedTargetValue));else{if(""===ev.target.value&&allowEmpty)return setCurrentValue(""),void(updateOnChange&&onChange(ev,""));const parsedValue=options.isFloat?parseFloat(ev.target.value):parseInt(ev.target.value);if(void 0!==max&&parsedValue>max)return void(parsedValue>max&&(setCurrentValue(trimmedTargetValue.charAt(trimmedTargetValue.length-1)),updateOnChange&&onChange(ev,Number(ev.target.value.trim().charAt(trimmedTargetValue.length-1)))));const maxPad=void 0!==max?String(max).length:0,paddedValue=!ev.target.value.endsWith(".")&&options.padZero?String(parsedValue).padStart(maxPad,"0"):trimmedTargetValue;setCurrentValue(paddedValue),updateOnChange&&onChange(ev,Number(paddedValue))}}),[allowEmpty,max,onChange,options,updateOnChange]),handleKeyUpAndDown=(0,src.I4)((ev=>{const{altKey,key}=ev,isCurrentValueValid=function isInputValid(value,_ref2){let{allowEmpty,isFloat,min,max}=_ref2;if(allowEmpty&&0===`${String(value)}`.length)return!0;const valueAsANumber=isFloat?parseFloat(String(value)):parseInt(String(value));return!(void 0!==min&&valueAsANumber<min||void 0!==max&&valueAsANumber>max||isNaN(valueAsANumber))}(currentValue,options);let newValue=isCurrentValueValid?parseInput(currentValue,options):0;newValue=null===newValue?"":newValue;const diff=(0,big.Z)(options.isFloat&&altKey?.1:1);"ArrowUp"===key?newValue=void 0!==max?Math.min(max,(0,big.Z)(newValue).plus(diff).toNumber()):(0,big.Z)(newValue).plus(diff).toNumber():"ArrowDown"===key&&(newValue=void 0!==min?Math.max(min,(0,big.Z)(newValue).minus(diff).toNumber()):(0,big.Z)(newValue).minus(diff).toNumber()),setCurrentValue(newValue),onChange(ev,Number(newValue))}),[currentValue,max,min,onChange,options]),handleEsc=(0,src.I4)((()=>{setCurrentValue(oldValue.current),revertToOriginal.current=!0,inputRef?.current?.blur()}),[inputRef]);return(0,src.d4)((()=>{oldValue.current=value,setCurrentValue(value)}),[value]),{currentValue,inputRef,handleBlur,handleChange,handleEsc,handleKeyUpAndDown,isIndeterminate:oldValue.current===currentValue}};var input=__webpack_require__("./packages/design-system/src/components/input/input.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const numericInput=(0,src.Gp)((function NumericInput(_ref,ref){let{allowEmpty,isFloat,onBlur,onChange,updateOnChange,max,min,value="",isIndeterminate:originalIsIndeterminate,padZero,...props}=_ref;const{currentValue,handleBlur,handleChange,handleEsc,handleKeyUpAndDown,inputRef,isIndeterminate}=input_useNumericInput({allowEmpty,isFloat,padZero,onChange,updateOnChange,max,min,value,ref});(0,keyboard.Ew)(inputRef,{key:["up","alt+up","down","alt+down"],editable:!0},handleKeyUpAndDown,[handleKeyUpAndDown]),(0,keyboard.Ew)(inputRef,{key:["escape"],editable:!0},handleEsc,[handleEsc]),(0,keyboard.Ew)(inputRef,{key:["enter"],editable:!0},handleBlur,[handleBlur]),value=String(value);let paddedValue=String(currentValue);if(""===value||""!==currentValue&&"-"!==currentValue)if(allowEmpty||""!==value||""!==currentValue){if(allowEmpty&&""===value)paddedValue="";else if(""!==currentValue&&void 0!==max){const maxPad=String(max).length;paddedValue=maxPad>=String(currentValue).length?padZero?String(currentValue).padStart(maxPad,"0"):String(currentValue):String(currentValue).replace(/^0+/,"")}}else paddedValue="0";else paddedValue=String(currentValue);return(0,jsx_runtime.jsx)(input.Z,{ref:inputRef,onBlur:ev=>{onBlur?.(ev),handleBlur(ev)},onChange:ev=>{updateOnChange&&onChange?.(ev),handleChange(ev)},value:paddedValue,isIndeterminate:isIndeterminate&&originalIsIndeterminate,...props})}))},"./packages/design-system/src/components/input/styled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CM:()=>Suffix,Qc:()=>BaseInput,W2:()=>Container,__:()=>Label,kW:()=>Hint});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_typography__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_theme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/types.ts");const Container=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.div.withConfig({displayName:"styled__Container",componentId:"sc-61rjdo-0"})(["position:relative;display:inline-block;width:100%;min-width:40px;"]),Label=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP)(_typography__WEBPACK_IMPORTED_MODULE_1__.x.Label).withConfig({displayName:"styled__Label",componentId:"sc-61rjdo-1"})(["margin-bottom:12px;display:inline-block;"]),Hint=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP)(_typography__WEBPACK_IMPORTED_MODULE_1__.x.Paragraph).withConfig({displayName:"styled__Hint",componentId:"sc-61rjdo-2"})(["display:inline-block;margin-top:12px;color:",";"],(_ref=>{let{hasError,theme}=_ref;return theme.colors.fg[hasError?"negative":"tertiary"]})),Suffix=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP)(_typography__WEBPACK_IMPORTED_MODULE_1__.x.Span).withConfig({displayName:"styled__Suffix",componentId:"sc-61rjdo-3"})(["background:transparent;color:",";white-space:nowrap;svg{width:32px;height:32px;margin:2px -10px;display:block;}"],(_ref2=>{let{theme}=_ref2;return theme.colors.fg.tertiary})),BaseInput=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.input.withConfig({displayName:"styled__BaseInput",componentId:"sc-61rjdo-4"})((_ref3=>{let{hasSuffix,theme}=_ref3;return(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)(["height:100%;width:100%;padding:0;"," background-color:inherit;border:none;outline:none;box-shadow:none;color:",";",";::placeholder{color:",";}:disabled{color:",";border-color:",";& ~ ","{color:",";}}:focus{box-shadow:none;}:active:enabled{color:",";}"],hasSuffix&&(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)(["padding-right:8px;"]),theme.colors.fg.primary,_theme__WEBPACK_IMPORTED_MODULE_2__._({preset:{...theme.typography.presets.paragraph[_theme__WEBPACK_IMPORTED_MODULE_3__.TextSize.Small]},theme}),theme.colors.fg.tertiary,theme.colors.fg.disable,theme.colors.border.disable,Suffix,theme.colors.fg.disable,theme.colors.fg.primary)}))},"./packages/design-system/src/components/modal/modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),react_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-modal/lib/index.js"),react_modal__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_2__),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/modal/constants.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const customStyles_overlay=theme=>({position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10,backgroundColor:theme.colors.interactiveBg.modalScrim,display:"flex",alignItems:"center",justifyContent:"center"}),customStyles_content={overflow:"auto",outline:"none",display:"flex",maxHeight:"100%",justifyContent:"center"};function Modal(_ref){let{closeTimeoutMS=100,children,contentStyles,modalStyles={},onClose,overlayStyles,...rest}=_ref;const theme=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.jX)(styled_components__WEBPACK_IMPORTED_MODULE_4__.Ni);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_modal__WEBPACK_IMPORTED_MODULE_2___default(),{className:_constants__WEBPACK_IMPORTED_MODULE_5__.G1,closeTimeoutMS,onRequestClose:onClose,overlayClassName:_constants__WEBPACK_IMPORTED_MODULE_5__.nL,bodyOpenClassName:_constants__WEBPACK_IMPORTED_MODULE_5__.RC,style:{maxHeight:"100vh",...modalStyles,overlay:{...customStyles_overlay(theme),...overlayStyles},content:{...customStyles_content,...contentStyles}},...rest,children})}Modal.displayName="Modal";const __WEBPACK_DEFAULT_EXPORT__=Modal},"./packages/design-system/src/components/swatch/swatch.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/patterns/src/hasOpacity.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/patterns/src/hasGradient.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/patterns/src/getOpaquePattern.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/transparentBg.ts"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Transparent=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"swatch__Transparent",componentId:"sc-103sems-0"})(["width:100%;height:100%;position:absolute;border-radius:100%;",""],_theme__WEBPACK_IMPORTED_MODULE_3__.R),SwatchButton=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.button.withConfig({displayName:"swatch__SwatchButton",componentId:"sc-103sems-1"})(["cursor:pointer;background-color:transparent;border-color:transparent;padding:0;border-width:0;display:block;width:","px;height:","px;border-radius:100%;overflow:hidden;position:relative;"," ",";::after{content:'';position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;border-radius:50%;border:1px solid ",";}"],24,24,(_ref=>{let{disabled}=_ref;return disabled&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.iv)(["opacity:0.4;cursor:default;pointer-events:none;"])}),(_ref2=>{let{theme}=_ref2;return _theme__WEBPACK_IMPORTED_MODULE_4__.L(theme.colors.border.focus)}),(_ref3=>{let{theme}=_ref3;return theme.colors.divider.primary})),SwatchPreview=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP)(SwatchButton).attrs({as:"div",type:void 0}).withConfig({displayName:"swatch__SwatchPreview",componentId:"sc-103sems-2"})([""]),SwatchItem=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"swatch__SwatchItem",componentId:"sc-103sems-3"})(["transform:rotate(","deg);display:block;width:100%;height:100%;font-size:13px;position:relative;svg{width:","px;height:","px;position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);filter:drop-shadow(0px 0px 4px rgba(0,0,0,0.4));color:",";transform:rotate(","deg);}"],(_ref4=>{let{displaySplit}=_ref4;return displaySplit?-45:0}),24,24,12,12,(_ref5=>{let{theme}=_ref5;return theme.colors.fg.primary}),(_ref6=>{let{displaySplit}=_ref6;return displaySplit?45:0})),OpaqueColorWrapper=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"swatch__OpaqueColorWrapper",componentId:"sc-103sems-4"})(["height:","px;width:50%;overflow:hidden;position:absolute;left:0;top:0;"],24),OpaqueColor=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div.withConfig({displayName:"swatch__OpaqueColor",componentId:"sc-103sems-5"})(["height:","px;width:","px;position:absolute;top:0;left:0;"],24,24);function Swatch(_ref7){let{pattern,children,isPreview=!1,isDisabled=!1,isIndeterminate=!1,className="",...props}=_ref7;if(!pattern)return null;const swatchHasTransparency=(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.Z)(pattern),swatchIsGradient=(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__.Z)(pattern),opaquePattern=swatchHasTransparency?(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_7__.Z)(pattern):pattern,displaySplit=!swatchIsGradient&&swatchHasTransparency&&!isIndeterminate,SwatchDisplay=isPreview?SwatchPreview:SwatchButton;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(SwatchDisplay,{disabled:isDisabled,className,...props,children:[swatchHasTransparency&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Transparent,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(SwatchItem,{style:(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__.Z)(pattern),displaySplit,children:[displaySplit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(OpaqueColorWrapper,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(OpaqueColor,{style:(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__.Z)(opaquePattern)})}),children]})]})}Swatch.displayName="Swatch";const __WEBPACK_DEFAULT_EXPORT__=Swatch},"./packages/design-system/src/components/typography/headline/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>Headline});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/theme/helpers/expandPresetStyles.ts"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),_styles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/typography/styles.ts");const Headline=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.h1.withConfig({displayName:"headline__Headline",componentId:"sc-yhwct1-0"})(["",";"," ",""],_styles__WEBPACK_IMPORTED_MODULE_1__.y,(_ref=>{let{theme,size=_theme__WEBPACK_IMPORTED_MODULE_2__.TextSize.Medium}=_ref;return _theme__WEBPACK_IMPORTED_MODULE_3__._({preset:theme.typography.presets.headline[size],theme})}),(_ref2=>{let{as,theme}=_ref2;return"a"===as&&(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)([":hover{color:",";}",""],theme.colors.fg.linkHover,_theme__WEBPACK_IMPORTED_MODULE_4__.L(theme.colors.border.focus))}))},"./packages/design-system/src/theme/helpers/transparentBg.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>transparentBg});const transparentBg=(0,__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").iv)(["background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn );background-size:8px 8px;"],(_ref=>{let{theme}=_ref;return theme.colors.fg.tertiary}),(_ref2=>{let{theme}=_ref2;return theme.colors.fg.tertiary}))},"./packages/patterns/src/getOpaquePattern.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/patterns/src/types.ts");const __WEBPACK_DEFAULT_EXPORT__=function getOpaquePattern(pattern){if(!pattern.type||pattern.type===_types__WEBPACK_IMPORTED_MODULE_0__.dl.Solid){const{color}=pattern;return{color:{...color,a:1}}}const{alpha,...opaquePattern}=pattern;return opaquePattern}},"./packages/patterns/src/getPreviewText.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/src/i18n.ts"),_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/patterns/src/types.ts");const __WEBPACK_DEFAULT_EXPORT__=function getPreviewText(pattern){if(!pattern)return null;switch(pattern.type){case _types__WEBPACK_IMPORTED_MODULE_0__.dl.Radial:return(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Radial","web-stories");case _types__WEBPACK_IMPORTED_MODULE_0__.dl.Linear:return(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Linear","web-stories");case _types__WEBPACK_IMPORTED_MODULE_0__.dl.Solid:default:{const{color:{r,g,b}}=pattern;return function printRGB(r,g,b){const hex=v=>v.toString(16).padStart(2,"0");return`${hex(r)}${hex(g)}${hex(b)}`.toUpperCase()}(r,g,b)}}}},"./packages/patterns/src/hasGradient.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/patterns/src/types.ts");const __WEBPACK_DEFAULT_EXPORT__=function hasGradient(pattern){return Boolean(pattern?.type)&&_types__WEBPACK_IMPORTED_MODULE_0__.dl.Solid!==pattern.type}},"./packages/patterns/src/hasOpacity.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function colorHasTransparency(color){return void 0!==color.a&&color.a<1}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function hasOpacity(pattern){if("color"in pattern)return Boolean(colorHasTransparency(pattern.color));if("number"==typeof pattern.alpha&&pattern.alpha<1)return!0;for(const colorStop of pattern.stops||[])if(colorHasTransparency(colorStop.color))return!0;return!1}},"./packages/story-editor/src/components/colorPicker/useDeleteColor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/app/index.js"),_utils_noop__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/utils/noop.ts");const __WEBPACK_DEFAULT_EXPORT__=function useDeleteColor(_ref){let{onEmpty=_utils_noop__WEBPACK_IMPORTED_MODULE_2__.Z}=_ref;const{currentStoryStyles,globalStoryStyles,updateStory}=(0,_app__WEBPACK_IMPORTED_MODULE_1__.rB)((_ref2=>{let{state:{story:{globalStoryStyles,currentStoryStyles}},actions:{updateStory}}=_ref2;return{currentStoryStyles,globalStoryStyles,updateStory}})),{colors:globalColors}=globalStoryStyles||{},{colors:localColors}=currentStoryStyles||{},hasLocalPresets=localColors?.length>0,deleteGlobalColor=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((toDelete=>{const updatedColors=globalColors.filter((color=>color!==toDelete));updateStory({properties:{globalStoryStyles:{...globalStoryStyles||{},colors:updatedColors}}}),0!==updatedColors.length||hasLocalPresets||onEmpty()}),[globalColors,updateStory,hasLocalPresets,globalStoryStyles,onEmpty]);return{deleteLocalColor:(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((toDelete=>{const updatedColors=localColors.filter((color=>color!==toDelete));updateStory({properties:{currentStoryStyles:{colors:updatedColors}}}),0===updatedColors.length&&0===globalColors.length&&onEmpty()}),[globalColors,localColors,updateStory,onEmpty]),deleteGlobalColor}}},"./packages/story-editor/src/components/dialog/dialog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/theme.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/colors.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/dialog/dialog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Dialog=_ref=>{let{onClose,onSecondary,onPrimary,primaryText,PrimaryComponent=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.z,secondaryText,primaryRest,secondaryRest,actions,children,...rest}=_ref;const _PrimaryButton=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>primaryText&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PrimaryComponent,{type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.L$.Primary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.qE.Small,onClick:evt=>onPrimary?.(evt),...primaryRest,children:primaryText})),[primaryText,primaryRest,onPrimary]),_SecondaryButton=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Ye)((()=>secondaryText&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.z,{type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.L$.Tertiary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.qE.Small,onClick:()=>onSecondary?.()||onClose(),...secondaryRest,children:secondaryText})),[secondaryText,secondaryRest,onSecondary,onClose]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(styled_components__WEBPACK_IMPORTED_MODULE_5__.f6,{theme:{..._googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.r,colors:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.R},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.Z,{onClose,...rest,actions:actions||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[_SecondaryButton,_PrimaryButton]}),children})})};Dialog.displayName="Dialog";const __WEBPACK_DEFAULT_EXPORT__=Dialog},"./packages/story-editor/src/components/dialog/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_dialog__WEBPACK_IMPORTED_MODULE_0__.Z});var _dialog__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/story-editor/src/components/dialog/dialog.js")},"./packages/story-editor/src/components/eyedropper/useEyeDropperApi.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/patterns/src/getSolidFromHex.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/utils/noop.ts"),polished__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/polished/dist/polished.esm.js");const __WEBPACK_DEFAULT_EXPORT__=function useEyeDropperApi(_ref){let{onChange=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__.Z,handleClose=_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__.Z}=_ref;const isEyeDropperApiSupported="undefined"!=typeof window&&"EyeDropper"in window,eyeDropper=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{isEyeDropperApiSupported&&!eyeDropper.current&&(eyeDropper.current=new window.EyeDropper)}),[isEyeDropperApiSupported]);const openEyeDropper=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((async()=>{if(eyeDropper.current&&isEyeDropperApiSupported)try{const{sRGBHex}=await eyeDropper.current.open(),hexColor="string"==typeof sRGBHex&&"#"===sRGBHex[0]?sRGBHex:(0,polished__WEBPACK_IMPORTED_MODULE_2__.EH)((0,polished__WEBPACK_IMPORTED_MODULE_2__.Oq)(sRGBHex));onChange((0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_3__.Z)(hexColor.substring(1)).color)}catch(e){console.log(e.message)}finally{handleClose()}}),[eyeDropper,isEyeDropperApiSupported,onChange,handleClose]);return{isEyeDropperApiSupported,openEyeDropper}}},"./packages/story-editor/src/components/floatingMenu/elements/shared/focusTrapButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,y:()=>handleReturnTrappedFocus});__webpack_require__("./node_modules/react/index.js");var prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/sprintf.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/i18n/src/i18n.ts"),uuid__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const _FocusTrapButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.ZP)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.z).attrs({type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.L$.Primary}).withConfig({displayName:"focusTrapButton___FocusTrapButton",componentId:"sc-1426fzg-0"})(["background-color:transparent;display:flex;align-items:center;justify-content:flex-start;outline:none;margin:0;padding:0;min-width:inherit;:hover,:focus{background-color:transparent;}",""],(_ref=>{let{styleOverride}=_ref;return(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.iv)(["",""],styleOverride)}));_FocusTrapButton.propTypes={styleOverride:prop_types__WEBPACK_IMPORTED_MODULE_6___default().array};const handleReturnTrappedFocus=(e,buttonRef)=>{"Tab"===e.key?(e.preventDefault(),buttonRef.current.focus()):e.stopPropagation()},__WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Gp)((function FocusTrapButton(_ref2,ref){let{inputRef,inputLabel,children,styleOverride}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_FocusTrapButton,{id:(0,uuid__WEBPACK_IMPORTED_MODULE_7__.Z)(),tabIndex:-1,ref,onClick:e=>{e.stopPropagation(),inputRef.current.focus()},onBlur:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{e.preventDefault(),"Enter"===e.key&&inputRef.current.focus()},"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.Z)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Press Enter to edit %s","web-stories"),inputLabel),styleOverride,children})}))},"./packages/story-editor/src/components/form/color/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>color});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),getPreviewText=__webpack_require__("./packages/patterns/src/getPreviewText.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),pipette=__webpack_require__("./packages/design-system/src/icons/pipette.svg"),v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),useEyeDropperApi=__webpack_require__("./packages/story-editor/src/components/eyedropper/useEyeDropperApi.js");const eyedropper=_ref=>{let{onChange}=_ref;const{fullbleedContainer,eyedropperPixelData,setEyedropperCallback,setIsEyedropperActive,setEyedropperImg,setEyedropperPixelData}=(0,app.$P)((_ref2=>{let{state:{fullbleedContainer,eyedropperPixelData},actions:{setEyedropperCallback,setIsEyedropperActive,setEyedropperImg,setEyedropperPixelData}}=_ref2;return{fullbleedContainer,setEyedropperCallback,eyedropperPixelData,setIsEyedropperActive,setEyedropperImg,setEyedropperPixelData}})),{isEyeDropperApiSupported,openEyeDropper}=(0,useEyeDropperApi.Z)({onChange,handleClose:(0,src.I4)((()=>{setIsEyedropperActive(!1)}),[setIsEyedropperActive])}),{zoomSetting,setZoomSetting}=(0,app.$Y)((_ref3=>{let{state:{zoomSetting},actions:{setZoomSetting}}=_ref3;return{zoomSetting,setZoomSetting}}));return{initEyedropper:(0,src.I4)((function(){let resetZoom=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return async()=>{if(isEyeDropperApiSupported)return void(resetZoom&&(setIsEyedropperActive(!0),openEyeDropper()));if(!resetZoom&&zoomSetting!==src_constants.uM.Fit)return;resetZoom&&setIsEyedropperActive(!0);eyedropperPixelData&&resetZoom||(resetZoom&&setZoomSetting(src_constants.uM.Fit),await new Promise((resolve=>{setTimeout((()=>{__webpack_require__.e(3182).then(__webpack_require__.bind(__webpack_require__,"./node_modules/html-to-image/es/index.js")).then((htmlToImage=>{htmlToImage.toCanvas(fullbleedContainer,{pixelRatio:1}).then((canvas=>{const pixelData=canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height).data;setEyedropperPixelData(pixelData),setEyedropperImg(canvas.toDataURL()),resolve()})).catch((()=>{resolve()}))}))}))}))),setEyedropperCallback((()=>rgbObject=>{onChange(rgbObject),setIsEyedropperActive(!1),setEyedropperImg(null),setEyedropperPixelData(null)}))}}),[fullbleedContainer,onChange,eyedropperPixelData,zoomSetting,setIsEyedropperActive,setEyedropperCallback,setEyedropperImg,setEyedropperPixelData,setZoomSetting,isEyeDropperApiSupported,openEyeDropper])}};var components_tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js");const color_applyOpacityChange=function applyOpacityChange(pattern,newOpacity){if(!pattern)return null;const{type}=pattern;if(!type||"solid"===type){const{color:{r,g,b}}=pattern;return{color:{r,g,b,a:newOpacity}}}return{...pattern,alpha:newOpacity}};var getOpaquePattern=__webpack_require__("./packages/patterns/src/getOpaquePattern.ts"),hex=__webpack_require__("./packages/design-system/src/components/hex/hex.tsx"),swatch=__webpack_require__("./packages/design-system/src/components/swatch/swatch.tsx"),contextMenu_constants=__webpack_require__("./packages/design-system/src/components/contextMenu/constants.ts"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),disclosure=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx"),popup=__webpack_require__("./packages/design-system/src/components/popup/popup.tsx"),focusTrapButton=__webpack_require__("./packages/story-editor/src/components/floatingMenu/elements/shared/focusTrapButton.js"),CSSTransition=__webpack_require__("./node_modules/react-transition-group/esm/CSSTransition.js"),hasGradient=__webpack_require__("./packages/patterns/src/hasGradient.ts"),theme_constants=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),transform_src=__webpack_require__("./packages/transform/src/index.ts"),useFocusTrapping=__webpack_require__("./packages/story-editor/src/utils/useFocusTrapping.js"),useStory=__webpack_require__("./packages/story-editor/src/app/story/useStory.ts"),noop=__webpack_require__("./packages/story-editor/src/utils/noop.ts"),createSolid=__webpack_require__("./packages/patterns/src/createSolid.ts"),arrow_left=__webpack_require__("./packages/design-system/src/icons/arrow_left.svg"),circular=__webpack_require__("./packages/design-system/src/components/circularProgress/circular.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const rgb=function(){let{r=0,g=0,b=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`rgb(${r},${g},${b})`},rgba=_ref=>{let{r,g,b,a}=_ref;const al=color=>255*(1-a)+a*color;return`rgb(${al(r)}, ${al(g)}, ${al(b)})`},PointerElement=styled_components_browser_esm.ZP.div.attrs((_ref2=>{let{currentColor={},withAlpha}=_ref2;return{style:{background:withAlpha?rgba(currentColor):rgb(currentColor)}}})).withConfig({displayName:"pointer__PointerElement",componentId:"sc-1444lan-0"})(["width:","px;height:","px;transform:translate( "," );background:transparent;border:","px solid ",";border-radius:100%;position:relative;&:before{content:'';display:block;width:","px;height:","px;position:absolute;top:-","px;left:-","px;}"],16,16,(_ref3=>{let{offsetX=0,offsetY=0,isRTL}=_ref3;return`${(isRTL?-1:1)*offsetX}px, ${offsetY}px`}),2,(_ref4=>{let{theme}=_ref4;return theme.colors.fg.primary}),32,32,10,10);function Pointer(props){const{isRTL}=(0,app.ZR)();return(0,jsx_runtime.jsx)(PointerElement,{...props,isRTL})}Pointer.displayName="Pointer";const pointer=Pointer,EditableInput=(0,src.Vo)((()=>__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")).then((module=>({default:module.EditableInput}))))),Preview=styled_components_browser_esm.ZP.button.withConfig({displayName:"editablePreview__Preview",componentId:"sc-cdmcf1-0"})(["margin:0;padding:5px 7px;border:1px solid ",";border-radius:4px;background:transparent;color:",";width:100%;",";"],(_ref=>{let{theme}=_ref;return theme.colors.border.defaultNormal}),(_ref2=>{let{theme}=_ref2;return theme.colors.fg.primary}),styles.j),Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"editablePreview__Wrapper",componentId:"sc-cdmcf1-1"})(["input{",";}"],styles.j);function EditablePreview(_ref3){let{label="",value="",width,format,onChange}=_ref3;const[isEditing,setIsEditing]=(0,src.eJ)(!1),enableEditing=(0,src.I4)((()=>setIsEditing(!0)),[]),disableEditing=(0,src.I4)((()=>setIsEditing(!1)),[]),wrapperRef=(0,src.sO)(null),editableRef=(0,src.sO)(),inputStyles=(0,src.Ye)((()=>({input:{textAlign:"center",textTransform:"lowercase",width:"100%",padding:"6px 12px",border:"1px solid #5E6668",color:"#E4E5E6",borderRadius:"4px",background:"transparent",lineHeight:"18px"},wrap:{lineHeight:0,maxWidth:`${width}px`}})),[width]);(0,keyboard.Ew)(wrapperRef,{key:"esc",editable:!0},disableEditing,[isEditing]);if((0,src.bt)((()=>{const timeout=setTimeout((()=>{isEditing&&editableRef.current&&(editableRef.current.input.focus(),editableRef.current.input.select(),editableRef.current.input.setAttribute("aria-label",label))}));return()=>clearTimeout(timeout)}),[isEditing,label]),!isEditing)return(0,jsx_runtime.jsx)(Preview,{"aria-label":label,onClick:enableEditing,onFocus:enableEditing,children:(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:format(value)})});const editValue="transparent"===value?"000000":value;return(0,jsx_runtime.jsx)(Wrapper,{ref:wrapperRef,tabIndex:-1,onBlur:evt=>{evt.currentTarget.contains(evt.relatedTarget)||disableEditing()},children:(0,jsx_runtime.jsx)(src.n4,{fallback:null,children:(0,jsx_runtime.jsx)(EditableInput,{value:editValue,ref:editableRef,onChange,onChangeComplete:disableEditing,style:inputStyles})})})}EditablePreview.displayName="EditablePreview";const editablePreview=EditablePreview,Saturation=(0,src.Vo)((()=>__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")).then((module=>({default:module.Saturation}))))),Hue=(0,src.Vo)((()=>__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")).then((module=>({default:module.Hue}))))),Alpha=(0,src.Vo)((()=>__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")).then((module=>({default:module.Alpha}))))),BodyFallback=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__BodyFallback",componentId:"sc-eqs4bc-0"})(["height:","px;display:flex;align-items:center;justify-content:center;"],240),SaturationWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__SaturationWrapper",componentId:"sc-eqs4bc-1"})(["position:relative;margin:0 16px;flex:0 1 ","px;"],116),wrapperCSS=(0,styled_components_browser_esm.iv)(["margin:0 16px;border:1px solid ",";flex:0 0 ","px;position:relative;border-radius:","px;background-clip:padding-box;"],(_ref=>{let{theme}=_ref;return theme.colors.shadow.active}),20,50),HueWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__HueWrapper",componentId:"sc-eqs4bc-2"})(["",""],wrapperCSS),AlphaWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__AlphaWrapper",componentId:"sc-eqs4bc-3"})([""," div:first-child div:first-child div:first-child{background-image:conic-gradient( "," 0.25turn,transparent 0turn 0.5turn,"," 0turn 0.75turn,transparent 0turn 1turn ) !important;background-size:8px 8px !important;}"],wrapperCSS,(_ref2=>{let{theme}=_ref2;return theme.colors.fg.tertiary}),(_ref3=>{let{theme}=_ref3;return theme.colors.fg.tertiary})),Footer=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__Footer",componentId:"sc-eqs4bc-4"})(["height:","px;line-height:19px;position:relative;margin:0 16px;display:flex;justify-content:space-between;"],36),HexValue=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__HexValue",componentId:"sc-eqs4bc-5"})(["width:","px;"],74),Opacity=styled_components_browser_esm.ZP.div.withConfig({displayName:"currentColorPicker__Opacity",componentId:"sc-eqs4bc-6"})(["width:","px;"],52);const CurrentColorPickerContext=(0,src.kr)([!1,!1]),currentColorPicker=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return function DynamicFetcher(_ref5){let{showOpacity,hasEyedropper,...props}=_ref5;const isMounted=(0,src.sO)(!1),[Picker,setPicker]=(0,src.eJ)(null);return(0,src.d4)((()=>(isMounted.current=!0,__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")).then((_ref6=>{let{CustomPicker}=_ref6;isMounted.current&&setPicker({component:CustomPicker(...args)})})),()=>{isMounted.current=!1})),[]),Picker?(0,jsx_runtime.jsx)(CurrentColorPickerContext.Provider,{value:[showOpacity,hasEyedropper],children:(0,jsx_runtime.jsx)(Picker.component,{...props})}):(0,jsx_runtime.jsx)(BodyFallback,{children:(0,jsx_runtime.jsx)(circular.Z,{})})}}((function CurrentColorPicker(_ref4){let{rgb,hsl,hsv,hex,onChange}=_ref4;const[showOpacity,hasEyedropper]=(0,src.qp)(CurrentColorPickerContext),alphaPercentage=String(Math.round(100*rgb.a)),hexValue="#"===hex[0]?hex.substr(1):hex,handleFormatHex=(0,src.I4)((v=>("transparent"===v&&(v="000000"),`#${v}`)),[]),handleFormatPercentage=(0,src.I4)((v=>`${v}%`),[]),handleHexInputChange=(0,src.I4)((value=>onChange({hex:value})),[onChange]),handleOpacityInputChange=(0,src.I4)((value=>onChange({...rgb,a:isNaN(value)?1:parseInt(value)/100})),[rgb,onChange]),{initEyedropper}=eyedropper({onChange});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(src.n4,{fallback:null,children:[(0,jsx_runtime.jsx)(SaturationWrapper,{children:(0,jsx_runtime.jsx)(Saturation,{radius:"8px",pointer:(0,jsx_runtime.jsx)(pointer,{offsetX:-8,offsetY:-8,currentColor:rgb}),hsl,hsv,onChange})}),(0,jsx_runtime.jsx)(HueWrapper,{children:(0,jsx_runtime.jsx)(Hue,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>(0,jsx_runtime.jsx)(pointer,{offsetX:-8,offsetY:1,currentColor:rgb}),hsl,onChange})}),showOpacity&&(0,jsx_runtime.jsx)(AlphaWrapper,{children:(0,jsx_runtime.jsx)(Alpha,{direction:"horizontal",height:"20px",radius:"50px",pointer:()=>(0,jsx_runtime.jsx)(pointer,{offsetX:-8,offsetY:1,currentColor:rgb,withAlpha:!0}),rgb,hsl,onChange})})]}),(0,jsx_runtime.jsxs)(Footer,{children:[hasEyedropper&&(0,jsx_runtime.jsx)(button_button.z,{variant:constants.Wu.Square,type:constants.L$.Quaternary,size:constants.qE.Small,"aria-label":(0,i18n.__)("Pick a color from canvas","web-stories"),onClick:initEyedropper(),onPointerEnter:initEyedropper(!1),children:(0,jsx_runtime.jsx)(pipette.Z,{})}),(0,jsx_runtime.jsx)(HexValue,{children:(0,jsx_runtime.jsx)(editablePreview,{label:(0,i18n.__)("Edit hex value","web-stories"),value:hexValue,onChange:handleHexInputChange,width:80,format:handleFormatHex})}),showOpacity&&(0,jsx_runtime.jsx)(Opacity,{children:(0,jsx_runtime.jsx)(editablePreview,{label:(0,i18n.__)("Edit opacity","web-stories"),value:alphaPercentage,width:52,format:handleFormatPercentage,onChange:handleOpacityInputChange})})]})]})}));var arrows_leftright=__webpack_require__("./packages/design-system/src/icons/arrows_leftright.svg"),arrow_right_curved=__webpack_require__("./packages/design-system/src/icons/arrow_right_curved.svg"),generatePatternStyles=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),transparentBg=__webpack_require__("./packages/design-system/src/theme/helpers/transparentBg.ts"),tailed_rectangle=__webpack_require__("./packages/design-system/src/icons/tailed_rectangle.svg"),createSolidFromString=__webpack_require__("./packages/patterns/src/createSolidFromString.ts");const TYPE_LINEAR="linear",TYPE_RADIAL="radial",c=hex=>(0,createSolidFromString.Z)(`#${hex}`),BASIC_COLORS=[c("00000000"),c("000000"),c("454545"),c("B6B6B6"),c("EEEEEE"),c("FFFFFF"),c("003BAD"),c("0044C9"),c("0354F2"),c("1263FF"),c("347EFF"),c("6D9FFF"),c("4B1283"),c("5A189A"),c("7B2CBF"),c("9D4EDD"),c("C77DFF"),c("E0AAFF"),c("E03568"),c("FF477E"),c("FF5C8A"),c("FF7096"),c("FF85A1"),c("FF99AC"),c("590D22"),c("800F2F"),c("A4133C"),c("C9184A"),c("FF4D6D"),c("FF758F"),c("DBCA09"),c("FFD900"),c("FFE747"),c("FFEE70"),c("FFF599"),c("FFFFB7"),c("E06E04"),c("EA7D00"),c("FF9500"),c("FFA811"),c("FFBC35"),c("FFCC4A"),c("607047"),c("79895D"),c("839568"),c("A5B98B"),c("C1D3AA"),c("D4E4C0"),c("603809"),c("603808"),c("6F4518"),c("8B5E34"),c("A47148"),c("BC8A5F")],Stop=styled_components_browser_esm.ZP.button.attrs((_ref=>{let{position}=_ref;return{style:{right:112*position-6+"px"}}})).withConfig({displayName:"gradientStop__Stop",componentId:"sc-1kqiqwc-0"})(["position:absolute;top:-","px;background:transparent;border:0;padding:0;&:focus{outline:none;}"],24),fillCss=(0,styled_components_browser_esm.iv)(["position:absolute;left:0;top:0;width:100%;height:100%;"]),Background=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientStop__Background",componentId:"sc-1kqiqwc-1"})([""," ",""],fillCss,(_ref2=>{let{color}=_ref2;return(0,generatePatternStyles.Z)(color)})),Transparent=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientStop__Transparent",componentId:"sc-1kqiqwc-2"})([""," width:100%;height:100%;position:absolute;top:0;"],transparentBg.R),StopPointer=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientStop__StopPointer",componentId:"sc-1kqiqwc-3"})(["transform:translate(",",0);width:","px;height:","px;border-radius:2px;overflow:hidden;"],(_ref3=>{let{offset}=_ref3;return`${offset}px`}),14,14),IconWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientStop__IconWrapper",componentId:"sc-1kqiqwc-4"})(["position:absolute;left:-","px;top:-8px;color:",";svg{width:32px;height:32px;}"],10,(_ref4=>{let{theme,isSelected}=_ref4;return isSelected?theme.colors.fg.primary:theme.colors.fg.tertiary}));function GradientStopWithRef(_ref5,ref){let{position,index,isSelected,color,onSelect}=_ref5;return(0,jsx_runtime.jsxs)(Stop,{ref,isSelected,position,onFocus:()=>onSelect(index),onClick:()=>onSelect(index),"aria-label":(0,sprintf.Z)((0,i18n.__)("Gradient stop at %d%%","web-stories"),Math.round(100-100*position)),children:[(0,jsx_runtime.jsx)(IconWrapper,{isSelected,children:(0,jsx_runtime.jsx)(tailed_rectangle.Z,{})}),(0,jsx_runtime.jsxs)(StopPointer,{offset:-1,children:[(0,jsx_runtime.jsx)(Transparent,{}),(0,jsx_runtime.jsx)(Background,{color})]})]},index)}GradientStopWithRef.displayName="GradientStopWithRef";const GradientStop=(0,src.Gp)(GradientStopWithRef);GradientStop.propTypes={position:prop_types_default().number.isRequired,index:prop_types_default().number.isRequired,isSelected:prop_types_default().bool.isRequired,color:prop_types_default().object.isRequired,onSelect:prop_types_default().func.isRequired};const gradientStop=GradientStop;const colorPicker_useKeyMoveStop=function useKeyMoveStop(ref,onMove){(0,keyboard.Ew)(ref,"left",(()=>onMove(.01)),[onMove]),(0,keyboard.Ew)(ref,"right",(()=>onMove(-.01)),[onMove])};const colorPicker_useKeyAddStop=function useKeyAddStop(ref,onAdd,stops,currentStopIndex){(0,keyboard.Ew)(ref,"enter",(()=>onAdd(function truncate(val,pos){return Number(val.toFixed(pos))}(function getNewStopPosition(stops,currentStopIndex){const isLastStopFocussed=currentStopIndex===stops.length-1;if(isLastStopFocussed&&stops[currentStopIndex].position<1)return 1;if(0===currentStopIndex&&stops[0].position>0)return 0;const preStop=isLastStopFocussed?stops[currentStopIndex-1]:stops[currentStopIndex],postStop=isLastStopFocussed?stops[currentStopIndex]:stops[currentStopIndex+1];return preStop.position+(postStop.position-preStop.position)/2}(stops,currentStopIndex),4))),[onAdd,stops,currentStopIndex])};const colorPicker_useKeyDeleteStop=function useKeyDeleteStop(ref,onDelete){(0,keyboard.Ew)(ref,"delete",(()=>{ref.current.focus(),onDelete()}),[onDelete,ref])};const colorPicker_useKeyFocus=function useKeyFocus(ref,stops,currentStopIndex){const numStops=stops.length,stopRefs=(0,src.Ye)((()=>Array.from({length:numStops}).map(src.Vf)),[numStops]);return(0,src.bt)((()=>{ref.current.contains(document.activeElement)&&stopRefs[currentStopIndex].current.focus()}),[currentStopIndex,stopRefs,numStops,ref]),stopRefs};function getPageX(evt){return evt.pageX||evt.clientX}const colorPicker_usePointerAddStop=function usePointerAddStop(ref,onAdd){const[tempPointerPosition,setTempPointerPosition]=(0,src.eJ)(null);return(0,src.bt)((()=>{const node=ref.current,nodeLeftEdge=node.getBoundingClientRect().left,onPointerDown=evt=>{if(evt.target!==node)return;const relativePosition=(getPageX(evt)-nodeLeftEdge+7)/112;onAdd(1.0625-relativePosition),setTempPointerPosition(null)},onPointerMove=evt=>{evt.target===node?setTempPointerPosition(getPageX(evt)-nodeLeftEdge):setTempPointerPosition(null)},onPointerLeave=evt=>{evt.target===node&&setTempPointerPosition(null)};return node.addEventListener("pointermove",onPointerMove),node.addEventListener("pointerleave",onPointerLeave),node.addEventListener("pointerdown",onPointerDown),()=>{node.removeEventListener("pointermove",onPointerMove),node.removeEventListener("pointerleave",onPointerLeave),node.removeEventListener("pointerdown",onPointerDown)}}),[ref,onAdd]),tempPointerPosition};const colorPicker_usePointerMoveStop=function usePointerMoveStop(ref,onMove){const lastPageX=(0,src.sO)(null);(0,src.bt)((()=>{const node=ref.current,onPointerMove=evt=>{const relativeDeltaX=getPageX(evt)-lastPageX.current;lastPageX.current=getPageX(evt),onMove(-relativeDeltaX/112)},onPointerUp=evt=>{lastPageX.current=null,function releasePointerCapture(evt){evt.target.releasePointerCapture&&evt.target.releasePointerCapture(evt.pointerId)}(evt),evt.target.removeEventListener("pointermove",onPointerMove),evt.target.removeEventListener("pointerup",onPointerUp)},onPointerDown=evt=>{evt.target!==node&&(lastPageX.current=getPageX(evt),function setPointerCapture(evt){evt.target.setPointerCapture&&evt.target.setPointerCapture(evt.pointerId)}(evt),evt.target.addEventListener("pointermove",onPointerMove),evt.target.addEventListener("pointerup",onPointerUp))};return node.addEventListener("pointerdown",onPointerDown),()=>node.removeEventListener("pointerdown",onPointerDown)}),[ref,onMove])},Line=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientLine__Line",componentId:"sc-1k22wp0-0"})([""," width:","px;height:","px;border-radius:2px;position:relative;&:focus{outline:none;}"],transparentBg.R,112,12),gradientLine_Background=styled_components_browser_esm.ZP.div.attrs((_ref=>{let{stops}=_ref;return{style:(0,generatePatternStyles.Z)({type:"linear",stops,rotation:.25})}})).withConfig({displayName:"gradientLine__Background",componentId:"sc-1k22wp0-1"})(["position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;"]),TempPointer=(0,styled_components_browser_esm.ZP)(pointer).attrs((_ref2=>{let{x}=_ref2;return{style:{left:`${x}px`},offsetX:-6}})).withConfig({displayName:"gradientLine__TempPointer",componentId:"sc-1k22wp0-2"})(["height:","px;width:","px;opacity:0.6;top:1px;pointer-events:none;"],10,10);function GradientLine(_ref3){let{stops,currentStopIndex,onSelect,onAdd,onDelete,onMove}=_ref3;const line=(0,src.sO)();colorPicker_useKeyMoveStop(line,onMove),colorPicker_useKeyAddStop(line,onAdd,stops,currentStopIndex),colorPicker_useKeyDeleteStop(line,onDelete);const stopRefs=colorPicker_useKeyFocus(line,stops,currentStopIndex);colorPicker_usePointerMoveStop(line,onMove);const tempPointerPosition=colorPicker_usePointerAddStop(line,onAdd);return(0,jsx_runtime.jsxs)(Line,{ref:line,"aria-label":(0,i18n.__)("Gradient line","web-stories"),tabIndex:"-1",children:[(0,jsx_runtime.jsx)(gradientLine_Background,{stops}),stops.map(((_ref4,index)=>{let{position,color}=_ref4;return(0,jsx_runtime.jsx)(gradientStop,{ref:ref=>stopRefs[index].current=ref,index,isSelected:index===currentStopIndex,position,onSelect,color:{color},children:(0,jsx_runtime.jsx)(pointer,{offsetX:-6})},index)})),tempPointerPosition&&(0,jsx_runtime.jsx)(TempPointer,{"aria-label":(0,sprintf.Z)((0,i18n.__)("Temporary gradient stop at %d%%","web-stories"),Math.round(tempPointerPosition/112*100)),x:tempPointerPosition})]})}GradientLine.displayName="GradientLine";const gradientLine=GradientLine,gradientPicker_Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientPicker__Wrapper",componentId:"sc-a6h8ls-0"})(["display:flex;justify-content:space-between;align-items:center;padding:16px 16px 0;height:60px;"]),Buttons=styled_components_browser_esm.ZP.div.withConfig({displayName:"gradientPicker__Buttons",componentId:"sc-a6h8ls-1"})(["display:flex;gap:8px;"]),SmallButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"gradientPicker__SmallButton",componentId:"sc-a6h8ls-2"})(["width:24px;height:24px;padding:0;svg{width:24px;height:24px;}"]);function GradientPicker(_ref){let{stops,currentStopIndex,type,onSelect,onAdd,onDelete,onMove,onRotate,onReverse}=_ref;const reverseLabel=(0,i18n.__)("Reverse gradient stops","web-stories"),rotateLabel=(0,i18n.__)("Rotate gradient","web-stories"),canRotate="radial"!==type;return(0,jsx_runtime.jsxs)(gradientPicker_Wrapper,{children:[(0,jsx_runtime.jsx)(gradientLine,{stops,currentStopIndex,onSelect,onAdd,onDelete,onMove}),(0,jsx_runtime.jsxs)(Buttons,{children:[(0,jsx_runtime.jsx)(components_tooltip.Z,{hasTail:!0,title:reverseLabel,children:(0,jsx_runtime.jsx)(SmallButton,{"aria-label":reverseLabel,onClick:onReverse,type:constants.L$.Quaternary,size:constants.qE.Small,variant:constants.Wu.Square,children:(0,jsx_runtime.jsx)(arrows_leftright.Z,{})})}),canRotate&&(0,jsx_runtime.jsx)(components_tooltip.Z,{hasTail:!0,title:rotateLabel,children:(0,jsx_runtime.jsx)(SmallButton,{onClick:onRotate,"aria-label":rotateLabel,type:constants.L$.Quaternary,size:constants.qE.Small,variant:constants.Wu.Square,children:(0,jsx_runtime.jsx)(arrow_right_curved.Z,{id:"gradient-rotator"})})})]})]})}GradientPicker.displayName="GradientPicker";const gradientPicker=GradientPicker;var pencil=__webpack_require__("./packages/design-system/src/icons/pencil.svg"),cross=__webpack_require__("./packages/design-system/src/icons/cross.svg");const header_Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"header__Wrapper",componentId:"sc-3jvjbz-0"})(["display:flex;justify-content:space-between;align-items:center;height:","px;padding:4px 8px 4px 8px;position:relative;border-bottom:1px solid ",";"],44,(_ref=>{let{theme}=_ref;return theme.colors.divider.tertiary})),Actions=styled_components_browser_esm.ZP.div.withConfig({displayName:"header__Actions",componentId:"sc-3jvjbz-1"})(["display:flex;margin-left:auto;"]),StyledButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"header__StyledButton",componentId:"sc-3jvjbz-2"})(["margin-left:8px;",";"],styles.j);function Header(_ref2){let{children,handleClose,isEditMode=!1,setIsEditMode=noop.Z,hasPresets=!1}=_ref2;const ref=(0,src.sO)();(0,src.d4)((()=>{ref.current?.focus()}),[]);const buttonProps={type:constants.L$.Tertiary,size:constants.qE.Small,variant:constants.Wu.Square,onClick:evt=>{evt.stopPropagation(),setIsEditMode(!isEditMode)},isEditMode};return(0,jsx_runtime.jsxs)(header_Wrapper,{children:[children,(0,jsx_runtime.jsxs)(Actions,{children:[hasPresets?isEditMode?(0,jsx_runtime.jsx)(StyledButton,{...buttonProps,variant:constants.Wu.Rectangle,"aria-label":(0,i18n.__)("Exit edit mode","web-stories"),children:(0,i18n.__)("Done","web-stories")}):(0,jsx_runtime.jsx)(StyledButton,{...buttonProps,variant:constants.Wu.Square,"aria-label":(0,i18n.__)("Edit colors","web-stories"),children:(0,jsx_runtime.jsx)(pencil.Z,{})}):null,(0,jsx_runtime.jsx)(StyledButton,{"aria-label":(0,i18n.__)("Close","web-stories"),onClick:handleClose,type:constants.L$.Tertiary,size:constants.qE.Small,variant:constants.Wu.Square,ref,children:(0,jsx_runtime.jsx)(cross.Z,{})})]})]})}Header.displayName="Header";const header=Header;var toggleButton=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),pattern_solid=__webpack_require__("./packages/design-system/src/icons/pattern_solid.svg"),pattern_linear=__webpack_require__("./packages/design-system/src/icons/pattern_linear.svg"),pattern_radial=__webpack_require__("./packages/design-system/src/icons/pattern_radial.svg");const patternTypePicker_Wrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"patternTypePicker__Wrapper",componentId:"sc-1mq6bg0-0"})(["display:flex;justify-content:flex-start;align-items:center;height:","px;padding:0 16px;position:relative;gap:8px;"],52);function PatternTypePicker(_ref){let{type,setToGradient,setToSolid}=_ref;const setToLinear=(0,src.I4)((()=>setToGradient("linear")),[setToGradient]),setToRadial=(0,src.I4)((()=>setToGradient("radial")),[setToGradient]);return(0,jsx_runtime.jsxs)(patternTypePicker_Wrapper,{children:[(0,jsx_runtime.jsx)(toggleButton.C,{"aria-label":(0,i18n.__)("Solid pattern type","web-stories"),onClick:setToSolid,type:constants.L$.Quaternary,size:constants.qE.Small,variant:constants.Wu.Square,isToggled:"solid"===type,children:(0,jsx_runtime.jsx)(pattern_solid.Z,{})}),(0,jsx_runtime.jsx)(toggleButton.C,{"aria-label":(0,i18n.__)("Linear gradient pattern type","web-stories"),onClick:setToLinear,type:constants.L$.Quaternary,size:constants.qE.Small,variant:constants.Wu.Square,isToggled:"linear"===type,children:(0,jsx_runtime.jsx)(pattern_linear.Z,{})}),(0,jsx_runtime.jsx)(toggleButton.C,{"aria-label":(0,i18n.__)("Radial gradient pattern type","web-stories"),onClick:setToRadial,type:constants.L$.Quaternary,size:constants.qE.Small,variant:constants.Wu.Square,isToggled:"radial"===type,children:(0,jsx_runtime.jsx)(pattern_radial.Z,{})})]})}PatternTypePicker.displayName="PatternTypePicker";const patternTypePicker=PatternTypePicker;const colorPicker_insertStop=function insertStop(stops,newPosition){const followingIndex=stops.findIndex((_ref=>{let{position}=_ref;return position>newPosition}));if(-1===followingIndex)return{index:stops.length,color:stops[stops.length-1].color};if(0===followingIndex)return{index:0,color:stops[0].color};const preceding=stops[followingIndex-1],following=stops[followingIndex],ratio=(newPosition-preceding.position)/(following.position-preceding.position),{color:{r:pr,g:pg,b:pb,a:pa=1}}=preceding,{color:{r:fr,g:fg,b:fb,a:fa=1}}=following,mix=(p,f)=>p+(f-p)*ratio,fullColor={r:Math.round(mix(pr,fr)),g:Math.round(mix(pg,fg)),b:Math.round(mix(pb,fb)),a:mix(pa,fa)};return{index:followingIndex,color:1===fullColor.a?{r:fullColor.r,g:fullColor.g,b:fullColor.b}:fullColor}};function regenerateStops(stops){return stops.map((_ref2=>{let{color:{r,g,b,a},position}=_ref2;return{color:(0,createSolid.Z)(r,g,b,a).color,position}}))}const colorPicker_regenerateColor=function regenerateColor(pattern){const{regenerate,type}=pattern;if(!regenerate)return null;switch(type){case"solid":return function regenerateSolid(_ref){let{currentColor:{r,g,b,a}}=_ref;return(0,createSolid.Z)(r,g,b,a)}(pattern);case TYPE_LINEAR:return function regenerateLinear(_ref3){let{stops,rotation,alpha}=_ref3;const minimal={type:TYPE_LINEAR,stops:regenerateStops(stops)};return 0!==rotation&&(minimal.rotation=rotation),1!==alpha&&void 0!==alpha&&(minimal.alpha=alpha),minimal}(pattern);case TYPE_RADIAL:return function regenerateRadial(_ref4){let{stops,center,size,alpha}=_ref4;const minimal={type:TYPE_RADIAL,stops:regenerateStops(stops)};return!center||.5===center.x&&.5===center.y||(minimal.center=center),!size||1===size.w&&1===size.h||(minimal.size=size),1!==alpha&&void 0!==alpha&&(minimal.alpha=alpha),minimal}(pattern);default:return null}},initialState={type:"solid",regenerate:!1,stops:[],currentColor:{r:0,g:0,b:0,a:0},currentStopIndex:0,rotation:.5,alpha:1,center:{x:.5,y:.5},size:{w:1,h:1}},reducer={load:(state,_ref)=>{let{payload}=_ref;const{type,color,stops,rotation,center,size,alpha}=payload,maybeReset=type&&"solid"!==type&&(state.type!==type||stops?.length!==state.stops?.length)?{currentColor:stops[0].color,currentStopIndex:0}:{};switch(type){case TYPE_LINEAR:return{...state,...maybeReset,type,regenerate:!1,stops,alpha:isNaN(alpha)?state.alpha:alpha,rotation:isNaN(rotation)?0:rotation};case TYPE_RADIAL:return{...state,...maybeReset,type,regenerate:!1,stops,center:void 0!==center?center:state.center,size:void 0!==size?size:state.size,alpha:isNaN(alpha)?state.alpha:alpha};default:return{...state,type:"solid",regenerate:!1,currentColor:color}}},setToSolid:state=>({...state,type:"solid",regenerate:!0}),setToGradient:(state,_ref2)=>{let{payload}=_ref2;const stops=state.stops&&state.stops.length>=2?state.stops:[{color:state.currentColor,position:0},{color:state.currentColor,position:1}];return{...state,regenerate:!0,type:payload,stops}},addStopAt:(state,_ref3)=>{let{payload:newPosition}=_ref3;if(newPosition=Number(newPosition.toFixed(2)),state.stops.some((_ref4=>{let{position}=_ref4;return position===newPosition})))return state;const{index,color}=colorPicker_insertStop(state.stops,newPosition),stops=[...state.stops.slice(0,index),{color,position:newPosition},...state.stops.slice(index)];return{...state,regenerate:!0,currentColor:color,currentStopIndex:index,stops}},moveCurrentStopBy:(state,_ref5)=>{let{payload:deltaPosition}=_ref5;const index=state.currentStopIndex,currentPosition=state.stops[index].position,desiredPosition=Math.max(0,Math.min(1,Number((currentPosition+deltaPosition).toFixed(2))));if(desiredPosition===currentPosition)return state;const stops=[...state.stops.slice(0,index),{...state.stops[index],position:desiredPosition},...state.stops.slice(index+1)];stops.sort(((a,b)=>a.position-b.position));const currentStopIndex=stops.findIndex((_ref6=>{let{position}=_ref6;return position===desiredPosition}));return{...state,regenerate:!0,stops,currentStopIndex}},removeCurrentStop:state=>{if(2===state.stops.length)return state;const index=state.currentStopIndex,stops=[...state.stops];stops.splice(index,1);const currentStopIndex=index===stops.length?index-1:index;return{...state,regenerate:!0,stops,currentColor:stops[currentStopIndex].color,currentStopIndex}},updateCurrentColor:(state,_ref7)=>{let{payload:{rgb}}=_ref7;const currentColor={...rgb},newState={...state,regenerate:!0,currentColor};return"solid"!==state.type&&(newState.stops=[...state.stops.slice(0,state.currentStopIndex),{...state.stops[state.currentStopIndex],color:currentColor},...state.stops.slice(state.currentStopIndex+1)]),newState},rotateClockwise:state=>({...state,rotation:(state.rotation+.25)%1,regenerate:!0}),selectStop:(state,_ref8)=>{let{payload:newIndex}=_ref8;const currentStopIndex=Math.max(0,Math.min(state.stops.length-1,newIndex)),currentColor=state.stops[currentStopIndex].color;return{...state,currentStopIndex,currentColor}},reverseStops:state=>{const stops=state.stops.map((_ref9=>{let{color,position}=_ref9;return{color,position:1-position}})).reverse(),currentStopIndex=stops.length-state.currentStopIndex-1;return{...state,stops,currentStopIndex,regenerate:!0}}};const colorPicker_useColor=function useColor(){const[state,actions]=(0,src.IG)(initialState,reducer),generatedColor=colorPicker_regenerateColor(state);return{state:{...state,generatedColor},actions}};var getUniquePresets=__webpack_require__("./packages/story-editor/src/utils/getUniquePresets.ts");const addCustomColor_StyledButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"addCustomColor__StyledButton",componentId:"sc-4t2ps2-0"})(["flex:0 0 32px;margin:0 16px 16px;"]);function AddCustomColor(_ref){let{color,onSave}=_ref;const{updateStory,globalStoryStyles}=(0,useStory.Z)((_ref2=>{let{state:{story:{globalStoryStyles}},actions:{updateStory}}=_ref2;return{globalStoryStyles,updateStory}})),handleAddSavedColor=(0,src.I4)((()=>{updateStory({properties:{globalStoryStyles:{...globalStoryStyles,colors:(0,getUniquePresets.Z)([...globalStoryStyles.colors,color].filter(Boolean))}}}),onSave()}),[onSave,color,globalStoryStyles,updateStory]);return(0,jsx_runtime.jsx)(addCustomColor_StyledButton,{onClick:handleAddSavedColor,type:constants.L$.Secondary,size:constants.qE.Small,variant:constants.Wu.Rectangle,children:(0,i18n.__)("Add to Saved Colors","web-stories")})}AddCustomColor.displayName="AddCustomColor";const addCustomColor=AddCustomColor;const customColorPicker=function CustomColorPicker(_ref){let{color,allowsGradient,allowsOpacity,handleColorChange,handleClose,hideCustomPicker,allowsSavedColors,hasEyedropper}=_ref;const{state:{type,stops,currentStopIndex,currentColor,generatedColor},actions:{load,updateCurrentColor,reverseStops,selectStop,addStopAt,removeCurrentStop,rotateClockwise,moveCurrentStopBy,setToSolid,setToGradient}}=colorPicker_useColor(),isMounted=(0,src.sO)(!0);(0,src.d4)((()=>()=>{isMounted.current=!1}),[]),(0,src.d4)((()=>{generatedColor&&handleColorChange(generatedColor)}),[handleColorChange,generatedColor]),(0,src.d4)((()=>{load(color||(0,createSolid.Z)(0,0,0))}),[color,load]);const handleColorPickerChange=(0,src.I4)((e=>{updateCurrentColor(e),!isMounted.current&&e?.rgb&&handleColorChange({color:e.rgb})}),[updateCurrentColor,handleColorChange]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(header,{handleClose,children:(0,jsx_runtime.jsx)(button_button.z,{"aria-label":(0,i18n.__)("Go back","web-stories"),onClick:hideCustomPicker,type:constants.L$.Tertiary,size:constants.qE.Small,variant:constants.Wu.Square,children:(0,jsx_runtime.jsx)(arrow_left.Z,{})})}),allowsGradient&&(0,jsx_runtime.jsx)(patternTypePicker,{type,setToGradient,setToSolid}),"solid"!==type&&(0,jsx_runtime.jsx)(gradientPicker,{stops,currentStopIndex,onSelect:selectStop,onReverse:reverseStops,onAdd:addStopAt,onDelete:removeCurrentStop,onRotate:rotateClockwise,onMove:moveCurrentStopBy,type}),(0,jsx_runtime.jsx)(currentColorPicker,{color:currentColor,onChange:handleColorPickerChange,showOpacity:allowsOpacity,hasEyedropper}),allowsSavedColors&&(0,jsx_runtime.jsx)(addCustomColor,{color:generatedColor||color,onSave:hideCustomPicker})]})};var scrollbar=__webpack_require__("./packages/design-system/src/theme/helpers/scrollbar.ts"),plus_outline=__webpack_require__("./packages/design-system/src/icons/plus_outline.svg"),localStore=__webpack_require__("./packages/design-system/src/utils/localStore.ts"),hasOpacity=__webpack_require__("./packages/patterns/src/hasOpacity.ts"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),useRovingTabIndex=__webpack_require__("./packages/story-editor/src/utils/useRovingTabIndex/index.js"),plus=__webpack_require__("./packages/design-system/src/icons/plus.svg"),useAddPreset=__webpack_require__("./packages/story-editor/src/utils/useAddPreset.js");const AddColorAction=styled_components_browser_esm.ZP.button.withConfig({displayName:"colorAdd__AddColorAction",componentId:"sc-1s3q8di-0"})(["cursor:pointer;background-color:transparent;color:",";border-color:",";border-width:1px;border-style:dashed;border-radius:50%;height:","px;width:","px;padding:0;svg{height:100%;width:100%;}:hover{border-color:",";}",";"],(_ref=>{let{theme}=_ref;return theme.colors.fg.primary}),(_ref2=>{let{theme}=_ref2;return theme.colors.border.defaultNormal}),24,24,(_ref3=>{let{theme}=_ref3;return theme.colors.border.defaultHover}),styles.j);function ColorAdd(_ref4){let{isLocal=!1,isGlobal=!1,isBackground=!1,...props}=_ref4;const{addGlobalPreset,addLocalPreset}=(0,useAddPreset.Z)({presetType:src_constants.SE.COLOR,isBackgroundColor:isBackground});if(!isLocal&&!isGlobal)return null;const label=isLocal?(0,i18n.__)("Add local color","web-stories"):(0,i18n.__)("Add global color","web-stories");return(0,jsx_runtime.jsx)(AddColorAction,{tabIndex:"0",onClick:isLocal?addLocalPreset:addGlobalPreset,"aria-label":label,...props,children:(0,jsx_runtime.jsx)(plus.Z,{})})}ColorAdd.displayName="ColorAdd";const colorAdd=ColorAdd,focusStyle=(0,styled_components_browser_esm.iv)(["",";"],(_ref=>{let{theme}=_ref;return outline.L(theme.colors.border.focus,theme.colors.bg.secondary)})),SwatchList=styled_components_browser_esm.ZP.div.attrs({role:"listbox"}).withConfig({displayName:"basicColorList__SwatchList",componentId:"sc-10h6tzp-0"})(["display:flex;max-width:100%;flex-wrap:wrap;gap:6px;"]),StyledSwatch=(0,styled_components_browser_esm.ZP)(swatch.Z).attrs((_ref2=>{let{isSelected}=_ref2;return{role:"option","aria-selected":isSelected}})).withConfig({displayName:"basicColorList__StyledSwatch",componentId:"sc-10h6tzp-1"})(["",";",""],focusStyle,(_ref3=>{let{isSelected,theme}=_ref3;return isSelected&&(0,styled_components_browser_esm.iv)(["border:2px solid ",";"],theme.colors.border.defaultActive)}));function getPatternAsString(pattern){if(!pattern)return"";const styles=(0,generatePatternStyles.Z)(pattern);return styles.backgroundColor||styles.backgroundImage}function ConditionalTooltip(_ref4){let{tooltip,children}=_ref4;return tooltip?(0,jsx_runtime.jsx)(components_tooltip.Z,{title:tooltip,children}):children}ConditionalTooltip.displayName="ConditionalTooltip";const basicColorList=function BasicColorList(_ref5){let{color,colors,handleClick,allowsOpacity,allowsGradient,isLocal=!1,isGlobal=!1,isEditMode,changedStyle,...rest}=_ref5;const colorAsBackground=getPatternAsString(color),listRef=(0,src.sO)(null);(0,useRovingTabIndex.Z)({ref:listRef});const selectedSwatchIndex=colors.map(getPatternAsString).findIndex((c=>colorAsBackground===c));let firstIndex=0;const colorType=isLocal?(0,i18n.__)("local","web-stories"):(0,i18n.__)("global","web-stories"),isBackground="background"===changedStyle;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[colors.length>0&&(0,jsx_runtime.jsxs)(SwatchList,{ref:listRef,...rest,children:[colors.map(((pattern,i)=>{const isTransparentAndInvalid=!allowsOpacity&&(0,hasOpacity.Z)(pattern),isGradientAndInvalid=!allowsGradient&&(0,hasGradient.Z)(pattern),isDisabled=(isTransparentAndInvalid||isGradientAndInvalid)&&!isEditMode;let tooltip=null;isDisabled&&!isEditMode&&(tooltip=isTransparentAndInvalid?(0,i18n.__)("Page background colors cannot have an opacity.","web-stories"):(0,i18n.__)("Gradient not allowed for Text","web-stories"));const patternAsBackground=getPatternAsString(pattern),title=isEditMode?(0,sprintf.Z)((0,i18n.__)("Delete %1$s color: %2$s","web-stories"),colorType,patternAsBackground):patternAsBackground,isSelected=colorAsBackground===patternAsBackground;let tabIndex=i===firstIndex?0:-1;return selectedSwatchIndex>=0?tabIndex=isSelected?0:-1:isDisabled&&i===firstIndex&&(firstIndex++,tabIndex=-1),(0,jsx_runtime.jsx)(ConditionalTooltip,{tooltip,children:(0,jsx_runtime.jsx)(StyledSwatch,{onClick:()=>handleClick(pattern,isLocal),pattern,isSelected,isDisabled,tabIndex,title,children:isEditMode&&(0,jsx_runtime.jsx)(cross.Z,{})})},patternAsBackground)})),(isLocal||isGlobal)&&(0,jsx_runtime.jsx)(colorAdd,{isLocal,isGlobal,isBackground})]}),!colors.length&&(isLocal||isGlobal)&&(0,jsx_runtime.jsx)(colorAdd,{isLocal,isGlobal,isBackground})]})};var checkbox_checkbox=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),dialog=__webpack_require__("./packages/story-editor/src/components/dialog/index.js");const Label=styled_components_browser_esm.ZP.label.withConfig({displayName:"confirmationDialog__Label",componentId:"sc-bvt4vo-0"})(["margin-left:12px;"]),CheckboxWrapper=styled_components_browser_esm.ZP.footer.withConfig({displayName:"confirmationDialog__CheckboxWrapper",componentId:"sc-bvt4vo-1"})(["display:flex;margin-top:12px;padding:14px 0 0 9px;border-top:1px solid ",";"],(_ref=>{let{theme}=_ref;return theme.colors.divider.primary}));function ConfirmationDialog(_ref2){let{onClose,onPrimary}=_ref2;const[isDialogDismissed,setIsDialogDismissed]=(0,src.eJ)(localStore.W.getItemByKey(localStore.h.DELETE_COLOR_PRESET_DIALOG_DISMISSED)),cbId=`cb-${(0,v4.Z)()}`;return(0,jsx_runtime.jsxs)(dialog.Z,{isOpen:!0,onClose,secondaryText:(0,i18n.__)("Cancel","web-stories"),onPrimary,primaryText:(0,i18n.__)("Delete","web-stories"),children:[(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:(0,i18n.__)("This is a global color. Deleting this color will remove it from the Saved Colors across all stories and the color will no longer be available to any other users on the site.","web-stories")}),(0,jsx_runtime.jsxs)(CheckboxWrapper,{children:[(0,jsx_runtime.jsx)(checkbox_checkbox.Z,{id:cbId,checked:isDialogDismissed,onChange:()=>{localStore.W.setItemByKey(localStore.h.DELETE_COLOR_PRESET_DIALOG_DISMISSED,!isDialogDismissed),setIsDialogDismissed(!isDialogDismissed)}}),(0,jsx_runtime.jsx)(Label,{htmlFor:cbId,children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:(0,i18n.__)("Don't ask for confirmation again.","web-stories")})})]})]})}ConfirmationDialog.displayName="ConfirmationDialog";const confirmationDialog=ConfirmationDialog;var useDeleteColor=__webpack_require__("./packages/story-editor/src/components/colorPicker/useDeleteColor.js");const Body=styled_components_browser_esm.ZP.div.withConfig({displayName:"basicColorPicker__Body",componentId:"sc-c2cm2c-0"})(["display:flex;flex-direction:column;padding:8px 16px 0;overflow:auto;",";"],scrollbar.d),basicColorPicker_Footer=styled_components_browser_esm.ZP.div.withConfig({displayName:"basicColorPicker__Footer",componentId:"sc-c2cm2c-1"})(["padding:8px 16px 16px;display:flex;flex-direction:column;"]),SavedColors=styled_components_browser_esm.ZP.div.withConfig({displayName:"basicColorPicker__SavedColors",componentId:"sc-c2cm2c-2"})(["border-bottom:1px solid ",";padding-bottom:16px;"],(_ref=>{let{theme}=_ref;return theme.colors.border.defaultNormal})),DefaultColors=styled_components_browser_esm.ZP.div.withConfig({displayName:"basicColorPicker__DefaultColors",componentId:"sc-c2cm2c-3"})([""]),basicColorPicker_Label=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).attrs({size:types.TextSize.Small}).withConfig({displayName:"basicColorPicker__Label",componentId:"sc-c2cm2c-4"})(["color:",";margin:12px 0 10px;"],(_ref2=>{let{theme}=_ref2;return theme.colors.fg.secondary})),DefaultText=(0,styled_components_browser_esm.ZP)(basicColorPicker_Label).withConfig({displayName:"basicColorPicker__DefaultText",componentId:"sc-c2cm2c-5"})(["margin:0 0 0 8px;color:",";"],(_ref3=>{let{theme}=_ref3;return theme.colors.fg.primary})),basicColorPicker_StyledButton=(0,styled_components_browser_esm.ZP)(button_button.z).withConfig({displayName:"basicColorPicker__StyledButton",componentId:"sc-c2cm2c-6"})(["display:flex;justify-content:center;align-items:center;gap:4px;flex-basis:100%;"]),StyledText=(0,styled_components_browser_esm.ZP)(typography_text.x.Paragraph).withConfig({displayName:"basicColorPicker__StyledText",componentId:"sc-c2cm2c-7"})(["padding:5px 10px;"]),StyledPlus=(0,styled_components_browser_esm.ZP)(plus_outline.Z).withConfig({displayName:"basicColorPicker__StyledPlus",componentId:"sc-c2cm2c-8"})(["width:32px;margin:-8px 0;"]),EyedropperWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"basicColorPicker__EyedropperWrapper",componentId:"sc-c2cm2c-9"})(["display:flex;"]);const basicColorPicker=function BasicColorPicker(_ref4){let{color,handleColorChange,allowsOpacity,allowsGradient,allowsSavedColors,showCustomPicker,handleClose,showDialog,setShowDialog,changedStyle,hasEyedropper,allowsSavedColorDeletion,shouldCloseOnSelection}=_ref4;const{savedColors,storyColors}=(0,useStory.Z)((state=>({savedColors:state.state.story?.globalStoryStyles?.colors||[],storyColors:state.state.story?.currentStoryStyles?.colors||[]}))),[isEditMode,setIsEditMode]=(0,src.eJ)(!1),[toDelete,setToDelete]=(0,src.eJ)(null),hasPresets=storyColors.length>0||savedColors.length>0,{initEyedropper}=eyedropper({onChange:(0,src.I4)((newColor=>handleColorChange({color:newColor})),[handleColorChange])}),{deleteLocalColor,deleteGlobalColor}=(0,useDeleteColor.Z)({onEmpty:()=>setIsEditMode(!1)}),handleSelect=pattern=>{handleColorChange(pattern),shouldCloseOnSelection&&handleClose()},handleClick=function(preset){let isLocal=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!isEditMode)return void handleSelect(preset);if(isLocal)return void deleteLocalColor(preset);localStore.W.getItemByKey(localStore.h.DELETE_COLOR_PRESET_DIALOG_DISMISSED)?deleteGlobalColor(preset):(setShowDialog(!0),setToDelete(preset))},hasHeader=!shouldCloseOnSelection||allowsSavedColorDeletion;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hasHeader&&(0,jsx_runtime.jsx)(header,{handleClose,isEditMode,setIsEditMode,hasPresets:hasPresets&&allowsSavedColors,children:(0,jsx_runtime.jsx)(DefaultText,{children:(0,i18n.__)("Color","web-stories")})}),(0,jsx_runtime.jsxs)(Body,{children:[hasEyedropper&&(0,jsx_runtime.jsxs)(EyedropperWrapper,{children:[(0,jsx_runtime.jsx)(button_button.z,{variant:constants.Wu.Square,type:constants.L$.Quaternary,size:constants.qE.Small,"aria-label":(0,i18n.__)("Pick a color from canvas","web-stories"),onClick:initEyedropper(),onPointerEnter:initEyedropper(!1),children:(0,jsx_runtime.jsx)(pipette.Z,{})}),(0,jsx_runtime.jsx)(StyledText,{size:types.TextSize.Small,children:(0,i18n.__)("Sample color","web-stories")})]}),allowsSavedColors&&(0,jsx_runtime.jsxs)(SavedColors,{children:[(0,jsx_runtime.jsx)(basicColorPicker_Label,{id:"colorpicker-story-colors-title",children:(0,i18n.__)("Current story","web-stories")}),(0,jsx_runtime.jsx)(basicColorList,{color,colors:storyColors,handleClick,isLocal:!0,allowsOpacity,allowsGradient,"aria-labelledby":"colorpicker-story-colors-title",isEditMode,"data-testid":"saved-story-colors",changedStyle}),(0,jsx_runtime.jsx)(basicColorPicker_Label,{id:"colorpicker-saved-colors-title",children:(0,i18n.__)("Saved colors","web-stories")}),(0,jsx_runtime.jsx)(basicColorList,{color,colors:savedColors,isGlobal:!0,handleClick,allowsOpacity,allowsGradient,"aria-labelledby":"colorpicker-saved-colors-title",isEditMode,changedStyle})]}),(0,jsx_runtime.jsxs)(DefaultColors,{children:[(0,jsx_runtime.jsx)(basicColorPicker_Label,{id:"colorpicker-default-colors-title",children:(0,i18n.__)("Default","web-stories")}),(0,jsx_runtime.jsx)(basicColorList,{color,colors:BASIC_COLORS,handleClick:pattern=>{handleSelect(pattern),setIsEditMode(!1)},allowsOpacity,allowsGradient,"aria-labelledby":"colorpicker-default-colors-title",isEditMode:!1})]})]}),(0,jsx_runtime.jsx)(basicColorPicker_Footer,{children:(0,jsx_runtime.jsxs)(basicColorPicker_StyledButton,{onClick:showCustomPicker,type:constants.L$.Secondary,size:constants.qE.Small,variant:constants.Wu.Rectangle,children:[(0,i18n.__)("Custom","web-stories"),(0,jsx_runtime.jsx)(StyledPlus,{})]})}),showDialog&&(0,jsx_runtime.jsx)(confirmationDialog,{onClose:()=>setShowDialog(!1),onPrimary:()=>{deleteGlobalColor(toDelete),setToDelete(null),setShowDialog(!1)}})]})},Container=styled_components_browser_esm.ZP.div.withConfig({displayName:"colorPicker__Container",componentId:"sc-1xsejx6-0"})(["border-radius:8px;background:",";user-select:none;display:flex;flex-direction:column;gap:12px;align-items:stretch;",";overflow:hidden;&.picker-appear{opacity:0.01;margin-top:-10px;&.picker-appear-active{opacity:1;margin-top:0;transition:300ms ease-out;transition-property:opacity,margin-top;}}"],(_ref=>{let{theme}=_ref;return theme.colors.bg.secondary}),(_ref2=>{let{maxHeight}=_ref2;return maxHeight?`\n          height: ${maxHeight}px;\n          width: ${208+theme_constants.Z.SCROLLBAR_WIDTH}px;\n        `:"\n          width: 208px;\n        "}));function ColorPicker(_ref3){let{onChange,isEyedropperActive=!1,color=null,allowsGradient=!1,allowsOpacity=!0,allowsSavedColors=!1,hasEyedropper=!0,maxHeight=null,onClose=noop.Z,changedStyle="background",onDimensionChange=noop.Z,allowsSavedColorDeletion=!0,shouldCloseOnSelection=!1}=_ref3;const[showDialog,setShowDialog]=(0,src.eJ)(!1),[isCustomPicker,setCustomPicker]=(0,src.eJ)((0,hasGradient.Z)(color)),showCustomPicker=(0,src.I4)((()=>{setCustomPicker(!0),onDimensionChange()}),[onDimensionChange]),hideCustomPicker=(0,src.I4)((()=>{setCustomPicker(!1),onDimensionChange()}),[onDimensionChange]),{actions:{pushTransform}}=(0,transform_src.Hm)(),{selectedElementIds=[]}=(0,useStory.Z)((_ref4=>{let{state:{selectedElementIds}}=_ref4;return{selectedElementIds}})),onDebouncedChange=(0,src.y1)(onChange,100,{leading:!0}),isMounted=(0,src.sO)(!0);(0,src.d4)((()=>()=>{isMounted.current=!1}),[]);const handleColorChange=(0,src.I4)((newColor=>{isMounted.current?onDebouncedChange(newColor):onChange(newColor),selectedElementIds.forEach((id=>{pushTransform(id,{color:newColor,style:changedStyle,staticTransformation:!0})}))}),[onChange,onDebouncedChange,selectedElementIds,changedStyle,pushTransform]),containerRef=(0,src.sO)();(0,src.FR)(containerRef,(()=>{isEyedropperActive||showDialog||onClose()}),[isEyedropperActive,showDialog]);const previousFocus=(0,src.sO)(document.activeElement),handleCloseAndRefocus=(0,src.I4)((evt=>{previousFocus.current&&previousFocus.current.focus(),onClose(evt)}),[onClose]);(0,keyboard.Ew)(containerRef,"esc",handleCloseAndRefocus),(0,useFocusTrapping.Z)({ref:containerRef});const ActualColorPicker=isCustomPicker?customColorPicker:basicColorPicker;return(0,jsx_runtime.jsx)(CSSTransition.Z,{nodeRef:containerRef,in:!0,appear:!0,classNames:"picker",timeout:300,children:(0,jsx_runtime.jsx)(Container,{role:"dialog","aria-label":(0,i18n.__)("Color and gradient picker","web-stories"),ref:containerRef,maxHeight,children:(0,jsx_runtime.jsx)(ActualColorPicker,{color,allowsGradient,allowsOpacity,handleColorChange,showCustomPicker,hideCustomPicker,handleClose:handleCloseAndRefocus,hasEyedropper,allowsSavedColors,showDialog,setShowDialog,changedStyle,allowsSavedColorDeletion,shouldCloseOnSelection})})})}ColorPicker.displayName="ColorPicker";const colorPicker=ColorPicker;var useSidebar=__webpack_require__("./packages/story-editor/src/components/sidebar/useSidebar.js");const colorInput_Preview=styled_components_browser_esm.ZP.div.withConfig({displayName:"colorInput__Preview",componentId:"sc-1h4cp44-0"})(["height:36px;color:",";cursor:pointer;position:relative;width:100%;padding:0;"],(_ref=>{let{theme}=_ref;return theme.colors.fg.primary})),Input=(0,styled_components_browser_esm.ZP)(hex.Z).withConfig({displayName:"colorInput__Input",componentId:"sc-1h4cp44-1"})(["min-width:100px;div{background-color:transparent;}input{padding-left:26px;}"]),Tooltip=(0,styled_components_browser_esm.ZP)(components_tooltip.Z).withConfig({displayName:"colorInput__Tooltip",componentId:"sc-1h4cp44-2"})(["width:100%;height:100%;"]),minimalInputContainerStyleOverride=(0,styled_components_browser_esm.iv)(["",";padding-right:6px;"],styles.O),ColorButton=(0,styled_components_browser_esm.ZP)(colorInput_Preview).attrs({as:"button",type:"button"}).withConfig({displayName:"colorInput__ColorButton",componentId:"sc-1h4cp44-3"})(["display:flex;overflow:hidden;border:1px solid ",";border-radius:4px;outline:none;background:transparent;&:focus{box-shadow:0 0 0 2px ",",0 0 0 4px ",";border-color:",";}"],(_ref2=>{let{theme}=_ref2;return theme.colors.border.defaultNormal}),(_ref3=>{let{theme}=_ref3;return theme.colors.bg.primary}),(_ref4=>{let{theme}=_ref4;return theme.colors.border.focus}),(_ref5=>{let{theme}=_ref5;return theme.colors.border.defaultHover})),ColorPreview=styled_components_browser_esm.ZP.div.withConfig({displayName:"colorInput__ColorPreview",componentId:"sc-1h4cp44-4"})(["position:absolute;top:6px;left:6px;padding:0;width:24px;height:24px;background:transparent;border-radius:50px;cursor:pointer;"]),TextualPreview=styled_components_browser_esm.ZP.div.withConfig({displayName:"colorInput__TextualPreview",componentId:"sc-1h4cp44-5"})(["padding:6px 12px 6px 38px;text-align:left;flex-grow:1;height:32px;"]),MixedLabel=(0,styled_components_browser_esm.ZP)(TextualPreview).withConfig({displayName:"colorInput__MixedLabel",componentId:"sc-1h4cp44-6"})(["align-self:center;padding:6px 6px 6px 38px;"]),colorInput_StyledSwatch=(0,styled_components_browser_esm.ZP)(swatch.Z).withConfig({displayName:"colorInput__StyledSwatch",componentId:"sc-1h4cp44-7"})(["",";"],styles.j),DisclosureContainer=styled_components_browser_esm.ZP.div.withConfig({displayName:"colorInput__DisclosureContainer",componentId:"sc-1h4cp44-8"})(["width:",";padding-right:8px;display:flex;justify-content:",";align-items:center;align-self:center;"],(_ref6=>{let{isSmall}=_ref6;return isSmall?"28px":"58px"}),(_ref7=>{let{isSmall}=_ref7;return isSmall?"center":"flex-end"})),loadReactColor=()=>__webpack_require__.e(341).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@hello-pangea/color-picker/dist/color-picker.esm.js")),colorInput=(0,src.Gp)((function ColorInput(_ref8,ref){let{onChange,value=null,label=null,changedStyle,pickerPlacement=popup_constants.ug.RightStart,isInDesignMenu=!1,hasInputs=!0,pickerProps,spacing,tooltipPlacement,colorFocusTrap=!1,...props}=_ref8;const focusTrapInputRef=(0,src.sO)(),colorFocusTrapButtonRef=(0,src.sO)(),isMixed=value===src_constants.mh;value=isMixed?"":value;const previewPattern=value?(0,getOpaquePattern.Z)(value):{color:{r:0,g:0,b:0,a:0}},previewText=(0,getPreviewText.Z)(value),[pickerOpen,setPickerOpen]=(0,src.eJ)(!1),previewRef=(0,src.sO)(null),{isEyedropperActive}=(0,app.$P)((_ref9=>{let{state:{isEyedropperActive}}=_ref9;return{isEyedropperActive}})),[dynamicPlacement,setDynamicPlacement]=(0,src.eJ)(pickerPlacement),{refs:{sidebar}}=(0,useSidebar.Z)(),{styleConstants:{topOffset}={}}=(0,app.ZR)(),positionPlacement=(0,src.I4)((popupRef=>{if(pickerPlacement?.startsWith("top")){const{top}=popupRef.current?.getBoundingClientRect()||{};top<=topOffset&&setDynamicPlacement(pickerPlacement.replace("top","bottom"))}}),[pickerPlacement,topOffset]),colorType=value?.type,isEditable=(!colorType||"solid"===colorType)&&hasInputs,buttonProps={onClick:()=>setPickerOpen(!0),"aria-label":label,onPointerEnter:()=>loadReactColor(),onFocus:()=>loadReactColor(),tabIndex:props.tabIndex},onClose=(0,src.I4)((()=>setPickerOpen(!1)),[]),tooltip=(0,i18n.__)("Open color picker","web-stories"),containerStyle=isInDesignMenu?minimalInputContainerStyleOverride:styles.O;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isEditable?(0,jsx_runtime.jsxs)(colorInput_Preview,{ref:previewRef,children:[colorFocusTrap?(0,jsx_runtime.jsx)(focusTrapButton.Z,{ref:colorFocusTrapButtonRef,inputRef:focusTrapInputRef,inputLabel:label,children:(0,jsx_runtime.jsx)(Input,{ref:focusTrapInputRef,"aria-label":label,value:isMixed?null:value,onChange,isIndeterminate:isMixed,placeholder:isMixed?src_constants.nz:"",containerStyleOverride:containerStyle,id:(0,v4.Z)(),onKeyDown:e=>(0,focusTrapButton.y)(e,colorFocusTrapButtonRef),inputClassName:contextMenu_constants.r,...props})}):(0,jsx_runtime.jsx)(Input,{ref,"aria-label":label,value:isMixed?null:value,onChange,isIndeterminate:isMixed,placeholder:isMixed?src_constants.nz:"",containerStyleOverride:containerStyle,id:(0,v4.Z)(),...props}),(0,jsx_runtime.jsx)(ColorPreview,{children:(0,jsx_runtime.jsx)(Tooltip,{title:tooltip,hasTail:!0,placement:tooltipPlacement,children:(0,jsx_runtime.jsx)(colorInput_StyledSwatch,{isSmall:!0,pattern:previewPattern,id:(0,v4.Z)(),...buttonProps})})})]}):(0,jsx_runtime.jsx)(Tooltip,{title:tooltip,hasTail:!0,placement:tooltipPlacement,children:(0,jsx_runtime.jsxs)(ColorButton,{ref:previewRef,id:(0,v4.Z)(),...buttonProps,children:[(0,jsx_runtime.jsx)(ColorPreview,{children:(0,jsx_runtime.jsx)(swatch.Z,{isPreview:!0,role:"status",tabIndex:"-1",pattern:previewPattern,isIndeterminate:isMixed})}),hasInputs?(0,jsx_runtime.jsx)(TextualPreview,{children:(0,jsx_runtime.jsx)(typography_text.x.Paragraph,{size:types.TextSize.Small,children:previewText})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isMixed&&(0,jsx_runtime.jsx)(MixedLabel,{children:(0,jsx_runtime.jsx)(typography_text.x.Span,{size:types.TextSize.Small,children:src_constants.nz})}),(0,jsx_runtime.jsx)(DisclosureContainer,{isSmall:isMixed,children:(0,jsx_runtime.jsx)(disclosure.Z,{$isOpen:pickerOpen})})]})]})}),(0,jsx_runtime.jsx)(popup.Z,{anchor:previewRef,dock:isInDesignMenu?null:sidebar,isOpen:pickerOpen&&!isEyedropperActive,placement:dynamicPlacement,spacing,refCallback:positionPlacement,renderContents:_ref10=>{let{propagateDimensionChange}=_ref10;return(0,jsx_runtime.jsx)(colorPicker,{color:isMixed?null:value,isEyedropperActive,onChange,onClose,changedStyle,onDimensionChange:propagateDimensionChange,...pickerProps})}})]})}));var numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),color_drop=__webpack_require__("./packages/design-system/src/icons/color_drop.svg");const color_getPreviewOpacity=function getPreviewOpacity(pattern){if(!pattern||pattern===src_constants.mh)return null;if(!("solid"===pattern.type||!pattern.type)){const{alpha=1}=pattern;return Math.round(100*alpha)}const{color:{a=1}}=pattern;return Math.round(100*a)},opacityInput_Input=(0,styled_components_browser_esm.ZP)(numericInput.Z).withConfig({displayName:"opacityInput__Input",componentId:"sc-xy6710-0"})(["min-width:100px;div{background-color:transparent;}"]),opacityInput_minimalInputContainerStyleOverride=(0,styled_components_browser_esm.iv)(["",";width:76px;padding-right:6px;"],styles.O),opacityInput=(0,src.Gp)((function OpacityInput(_ref,ref){let{value,onChange,isInDesignMenu,...props}=_ref;const[inputValue,setInputValue]=(0,src.eJ)(""),handleChange=(0,src.I4)(((evt,val)=>{setInputValue(val),isNaN(val)||onChange(val/100)}),[onChange]),updateFromValue=(0,src.I4)((()=>setInputValue(color_getPreviewOpacity(value))),[value]);(0,src.d4)((()=>updateFromValue()),[updateFromValue,value]);const containerStyle=isInDesignMenu?opacityInput_minimalInputContainerStyleOverride:styles.O;return(0,jsx_runtime.jsx)(opacityInput_Input,{ref,"aria-label":(0,i18n.__)("Opacity","web-stories"),onChange:handleChange,value:inputValue,unit:(0,i18n._x)("%","Percentage","web-stories"),suffix:(0,jsx_runtime.jsx)(color_drop.Z,{}),min:0,max:100,allowEmpty:!1,isFloat:!1,containerStyleOverride:containerStyle,id:(0,v4.Z)(),...props})})),OpacityWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"activeOpacity__OpacityWrapper",componentId:"sc-9gk8t7-0"})(["width:",";"],(_ref=>{let{isInDesignMenu}=_ref;return isInDesignMenu?"calc(39% - 10px)":"calc(47% - 10px)"})),activeOpacity=_ref2=>{let{handleOpacityChange,isInDesignMenu,opacityFocusTrap,tabIndex,value}=_ref2;const opacityFocusTrapButtonRef=(0,src.sO)(),opacityFocusTrapRef=(0,src.sO)();return opacityFocusTrap?(0,jsx_runtime.jsx)(focusTrapButton.Z,{ref:opacityFocusTrapButtonRef,inputRef:opacityFocusTrapRef,inputLabel:(0,i18n.__)("Opacity","web-stories"),styleOverride:(0,styled_components_browser_esm.iv)(["width:",";"],isInDesignMenu?"calc(35%)":"calc(45%)"),children:(0,jsx_runtime.jsx)(OpacityWrapper,{isInDesignMenu,children:(0,jsx_runtime.jsx)(opacityInput,{ref:opacityFocusTrapRef,tabIndex,inputClassName:contextMenu_constants.r,value,onChange:handleOpacityChange,isInDesignMenu,onKeyDown:e=>(0,focusTrapButton.y)(e,opacityFocusTrapButtonRef)})})}):(0,jsx_runtime.jsx)(OpacityWrapper,{isInDesignMenu,children:(0,jsx_runtime.jsx)(opacityInput,{tabIndex,value,onChange:handleOpacityChange,isInDesignMenu})})},SPACING={FLOATING_MENU:{x:0,y:12},DEFAULT_SIDEBAR:{x:12,y:0}},containerCss=(0,styled_components_browser_esm.iv)(["display:flex;align-items:center;"]),color_Container=styled_components_browser_esm.ZP.section.withConfig({displayName:"color__Container",componentId:"sc-c7i660-0"})([""," gap:","px;width:",";"],containerCss,(_ref=>{let{isInDesignMenu}=_ref;return isInDesignMenu?6:8}),(_ref2=>{let{width}=_ref2;return width?`${width}px`:"inherit"}));color_Container.propTypes={isInDesignMenu:prop_types_default().bool,width:prop_types_default().number};const ColorInputsWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"color__ColorInputsWrapper",componentId:"sc-c7i660-1"})([""," gap:","px;"],containerCss,(_ref3=>{let{isInDesignMenu}=_ref3;return isInDesignMenu?0:6})),Space=styled_components_browser_esm.ZP.div.withConfig({displayName:"color__Space",componentId:"sc-c7i660-2"})(["width:8px;height:1px;background-color:",";"],(_ref4=>{let{theme}=_ref4;return theme.colors.divider.primary})),InputWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"color__InputWrapper",componentId:"sc-c7i660-3"})(["",""],(_ref5=>{let{hasInputs}=_ref5;return hasInputs&&"width: calc(53% - 10px);"})),EyeDropperButton=(0,styled_components_browser_esm.ZP)(button_button.z).attrs({variant:constants.Wu.Square,type:constants.L$.Tertiary,size:constants.qE.Small}).withConfig({displayName:"color__EyeDropperButton",componentId:"sc-c7i660-4"})(["",";"],styles.j),DEFAULT_CONTAINER_LABEL_BASE=(0,i18n.__)("Color input","web-stories"),Color=(0,src.Gp)((function Color(_ref6,ref){let{onChange,allowsGradient=!1,allowsOpacity=!0,allowsSavedColors=!1,value=null,label=null,containerLabelBase=DEFAULT_CONTAINER_LABEL_BASE,changedStyle=null,hasEyedropper=!1,pickerHasEyedropper=!0,maxHeight=null,shouldCloseOnSelection=!1,allowsSavedColorDeletion=!0,pickerPlacement=popup_constants.ug.RightStart,isInDesignMenu=!1,hasInputs=!0,width,tabIndex,opacityFocusTrap,colorFocusTrap}=_ref6;const handleOpacityChange=(0,src.I4)((newOpacity=>onChange(color_applyOpacityChange(value,newOpacity))),[value,onChange]),containerLabel=(0,sprintf.Z)((0,i18n.__)("%1$s: %2$s","web-stories"),containerLabelBase,label),displayOpacity=value!==src_constants.mh&&Boolean((0,getPreviewText.Z)(value))&&hasInputs,{initEyedropper}=eyedropper({onChange:(0,src.I4)((color=>onChange({color})),[onChange])}),tooltip=(0,i18n.__)("Pick a color from canvas","web-stories"),tooltipPlacement=isInDesignMenu||hasEyedropper?popup_constants.ug.Bottom:popup_constants.ug.BottomStart,ignoreSetWidth=width&&value===src_constants.mh;return(0,jsx_runtime.jsxs)(color_Container,{"aria-label":containerLabel,isInDesignMenu,width:!ignoreSetWidth&&width?width:null,children:[hasEyedropper&&(0,jsx_runtime.jsx)(components_tooltip.Z,{title:tooltip,hasTail:!0,placement:isInDesignMenu?popup_constants.ug.Bottom:popup_constants.ug.BottomStart,children:(0,jsx_runtime.jsx)(EyeDropperButton,{id:(0,v4.Z)(),tabIndex,"aria-label":tooltip,onClick:initEyedropper(),onPointerEnter:initEyedropper(!1),children:(0,jsx_runtime.jsx)(pipette.Z,{})})}),(0,jsx_runtime.jsxs)(ColorInputsWrapper,{isInDesignMenu,children:[(0,jsx_runtime.jsx)(InputWrapper,{hasInputs,children:(0,jsx_runtime.jsx)(colorInput,{ref,tabIndex,onChange,value,label,changedStyle,pickerPlacement,hasInputs,isInDesignMenu,spacing:isInDesignMenu?SPACING.FLOATING_MENU:SPACING.DEFAULT_SIDEBAR,tooltipPlacement,colorFocusTrap,pickerProps:{allowsGradient,allowsOpacity,allowsSavedColors,hasEyedropper:pickerHasEyedropper,allowsSavedColorDeletion,maxHeight,shouldCloseOnSelection}})}),allowsOpacity&&displayOpacity&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Space,{}),(0,jsx_runtime.jsx)(activeOpacity,{handleOpacityChange,isInDesignMenu,opacityFocusTrap,tabIndex,value})]})]})]})})),color=Color},"./packages/story-editor/src/components/form/row.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div.withConfig({displayName:"row__Row",componentId:"sc-1olml0k-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin-bottom:16px;"," ",""],(_ref=>{let{spaceBetween=!0}=_ref;return spaceBetween&&"justify-content: space-between;"}),(_ref2=>{let{expand=!0}=_ref2;return expand&&"flex: 1;"}))},"./packages/story-editor/src/components/panels/shared/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>inputContainerStyleOverride,j:()=>focusStyle});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts");const focusStyle=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)(["",";"],(_ref=>{let{theme}=_ref;return _googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__.L(theme.colors.border.focus,theme.colors.bg.secondary)})),inputContainerStyleOverride=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.iv)([":focus-within{",";}"],(_ref2=>{let{theme}=_ref2;return _googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_1__.R(theme.colors.border.focus,theme.colors.bg.secondary)}))},"./packages/story-editor/src/components/sidebar/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").kr)({state:{},actions:{},tabs:{},refs:{}})},"./packages/story-editor/src/components/sidebar/useSidebar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/sidebar/context.js");const __WEBPACK_DEFAULT_EXPORT__=function useSidebar(selector){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.Sz)(_context__WEBPACK_IMPORTED_MODULE_1__.Z,selector??_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.yR)}},"./packages/story-editor/src/components/tooltip/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Tooltip});__webpack_require__("./node_modules/react/index.js");var constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),tooltip=__webpack_require__("./packages/design-system/src/components/tooltip/tooltip.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Tooltip(_ref){let{hasTail=!0,placement=constants.ug.Bottom,...props}=_ref;return(0,jsx_runtime.jsx)(tooltip.Z,{placement,hasTail,...props})}Tooltip.displayName="Tooltip"},"./packages/story-editor/src/utils/presetUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H4:()=>getTextInlineStyles,Qi:()=>getShapePresets,Sc:()=>getTextPresets,fH:()=>generatePresetStyle,rc:()=>areAllType,y3:()=>getPagePreset});var _googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/patterns/src/isPatternEqual.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/patterns/src/convertToCSS.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/patterns/src/createSolid.ts"),_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/rich-text/src/index.ts"),_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/element-library/src/index.js"),_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/elements/src/index.ts"),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/constants/index.ts"),_objectPick__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/story-editor/src/utils/objectPick.ts");const TEXT_PRESET_STYLES=["backgroundColor","backgroundTextMode","font","fontSize","lineHeight","padding","textAlign"];function findMatchingColor(color,storyStyles,isText){const colorsToMatch=storyStyles.colors,patternType=isText?"color":"background";return colorsToMatch.find((value=>{try{return(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_4__.Z)(value,color,patternType)}catch(e){return!1}}))}function generatePresetStyle(preset,prepareForCSS){const{color,backgroundColor,font,fontWeight,backgroundTextMode,textAlign,letterSpacing,lineHeight,isItalic,isUnderline,padding,fontSize}=preset;let style={textAlign,letterSpacing:letterSpacing/100+"em",fontWeight,textDecoration:isUnderline?"underline":null,fontStyle:isItalic?"italic":null,fontFamily:(0,_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_1__.V0)(font),...(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__.Z)(color,"color")};return prepareForCSS||(style={...style,fontSize,lineHeight,padding,backgroundTextMode}),backgroundTextMode===_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_2__.uG.NONE||prepareForCSS&&backgroundTextMode===_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_2__.uG.HIGHLIGHT||(style={...style,...(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__.Z)(backgroundColor,"background")}),style}function getExtractedInlineValue(value){return value!==_constants__WEBPACK_IMPORTED_MODULE_3__.mh?value:null}function getTextInlineStyles(content){const{color,fontWeight,isItalic,isUnderline,letterSpacing}=(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_0__.$y)(content);return{color:color!==_constants__WEBPACK_IMPORTED_MODULE_3__.mh?color:(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_7__.Z)(0,0,0),fontWeight:getExtractedInlineValue(fontWeight),isItalic:getExtractedInlineValue(isItalic),isUnderline:getExtractedInlineValue(isUnderline),letterSpacing:getExtractedInlineValue(letterSpacing)}}function getTextPresets(elements,storyStyles,type,isBackgroundColor){const colors=_constants__WEBPACK_IMPORTED_MODULE_3__.SE.STYLE===type?[]:elements.map((_ref=>{let{content,backgroundColor}=_ref;return isBackgroundColor?backgroundColor:(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_0__.$y)(content).color})).filter((color=>color!==_constants__WEBPACK_IMPORTED_MODULE_3__.mh)).filter((color=>color&&!findMatchingColor(color,storyStyles,!0))),textStyles=_constants__WEBPACK_IMPORTED_MODULE_3__.SE.COLOR===type?[]:elements.map((text=>({...(0,_objectPick__WEBPACK_IMPORTED_MODULE_8__.Z)(text,TEXT_PRESET_STYLES),...getTextInlineStyles(text.content)}))).filter((preset=>!function findMatchingStylePreset(preset,storyStyles){const stylesToMatch=storyStyles.textStyles,toAdd=(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.Z)(generatePresetStyle(preset));return stylesToMatch.find((value=>toAdd===(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.Z)(generatePresetStyle(value))))}(preset,storyStyles)));return{colors,textStyles}}function getShapePresets(elements,storyStyles){return{colors:elements.map((_ref2=>{let{backgroundColor}=_ref2;return backgroundColor||null})).filter((color=>color&&!findMatchingColor(color,storyStyles,!1)))}}function getPagePreset(page,storyStyles){return{colors:[page.backgroundColor].filter((color=>color&&!findMatchingColor(color,storyStyles,!1)))}}function areAllType(elType,selectedElements){return selectedElements.length>0&&selectedElements.every((_ref3=>{let{type}=_ref3;return elType===type}))}},"./packages/story-editor/src/utils/useAddPreset.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/app/index.js"),_getUniquePresets__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/utils/getUniquePresets.ts"),_presetUtils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/utils/presetUtils.js");const __WEBPACK_DEFAULT_EXPORT__=function useAddPreset(_ref){let{presetType,isBackgroundColor}=_ref;const{currentPage,currentStoryStyles={colors:[]},selectedElements,globalStoryStyles={colors:[],textStyles:[]},updateStory}=(0,_app__WEBPACK_IMPORTED_MODULE_1__.rB)((_ref2=>{let{state:{currentPage,selectedElements,story:{globalStoryStyles,currentStoryStyles}},actions:{updateStory}}=_ref2;return{currentPage,currentStoryStyles,selectedElements,globalStoryStyles,updateStory}})),{colors,textStyles}=globalStoryStyles,{colors:localColors}=currentStoryStyles,isText=(0,_presetUtils__WEBPACK_IMPORTED_MODULE_3__.rc)("text",selectedElements),isBackground=selectedElements?.[0]?.id===currentPage?.elements?.[0]?.id,getPresets=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)(((addedPresets,currentPresets)=>isText?{...addedPresets,...(0,_presetUtils__WEBPACK_IMPORTED_MODULE_3__.Sc)(selectedElements,currentPresets,presetType,isBackgroundColor)}:isBackground?{...addedPresets,...(0,_presetUtils__WEBPACK_IMPORTED_MODULE_3__.y3)(currentPage,currentPresets)}:{...addedPresets,...(0,_presetUtils__WEBPACK_IMPORTED_MODULE_3__.Qi)(selectedElements,currentPresets)}),[currentPage,isBackground,isText,presetType,selectedElements,isBackgroundColor]),updateLocalPresets=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((addedPresets=>{updateStory({properties:{currentStoryStyles:{colors:(0,_getUniquePresets__WEBPACK_IMPORTED_MODULE_2__.Z)([...localColors,...addedPresets.colors])}}})}),[localColors,updateStory]),updateGlobalPresets=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((addedPresets=>{updateStory({properties:{globalStoryStyles:{textStyles:(0,_getUniquePresets__WEBPACK_IMPORTED_MODULE_2__.Z)([...textStyles,...addedPresets.textStyles]),colors:(0,_getUniquePresets__WEBPACK_IMPORTED_MODULE_2__.Z)([...colors,...addedPresets.colors])}}})}),[colors,textStyles,updateStory]),handleAddPreset=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.I4)((function(addedPresets){let isLocal=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const currentPresets=isLocal?currentStoryStyles:globalStoryStyles;if(addedPresets=getPresets(addedPresets,currentPresets),addedPresets.colors?.length>0||addedPresets.textStyles?.length>0)return isLocal?updateLocalPresets(addedPresets,currentPresets):updateGlobalPresets(addedPresets,currentPresets),addedPresets}),[getPresets,currentStoryStyles,globalStoryStyles,updateGlobalPresets,updateLocalPresets]);return{addGlobalPreset:evt=>(evt.stopPropagation(),handleAddPreset({textStyles:[],colors:[]})),addLocalPreset:evt=>(evt.stopPropagation(),handleAddPreset({colors:[]},!0))}}},"./packages/story-editor/src/utils/useFocusTrapping.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx");const __WEBPACK_DEFAULT_EXPORT__=function useFocusTrapping(_ref){let{ref}=_ref;const handleTab=e=>{const focusableElements=(node=ref.current)?[...node.querySelectorAll('a[href], button, textarea, input[type]:not([type="hidden"]), select')].filter((el=>!el.hasAttribute("disabled")&&"-1"!==el.getAttribute("tabindex"))):[];var node;const firstEl=focusableElements[0],lastEl=focusableElements[focusableElements.length-1];e.shiftKey||document.activeElement!==lastEl?e.shiftKey&&document.activeElement===firstEl&&(lastEl.focus(),e.preventDefault()):(firstEl.focus(),e.preventDefault())};(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_0__.Ew)(ref,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},handleTab),(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_0__.Ew)(ref,{key:["tab"],allowDefault:!0,editable:!0},handleTab)}},"./packages/story-editor/src/utils/useRovingTabIndex/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useRovingTabIndex});var src=__webpack_require__("./packages/react/src/index.ts"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),config=__webpack_require__("./packages/story-editor/src/app/config/index.ts");const SELECTOR='[tabIndex="-1"]:not(:disabled)';function getAncestorByDepth(e,depth){let parentElement,counter=depth;for(;counter>0;)parentElement=parentElement?parentElement?.parentElement:e.parentElement,counter--;return parentElement}function getFocusableChild(element,depth){let childToGet=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"firstChild";return getAncestorByDepth(element,depth).parentNode[childToGet].querySelector(SELECTOR)}function getCenter(e){const rect=e.getBoundingClientRect();return{x:rect.left+rect.width/2,y:rect.top+rect.height/2}}function getNextElement(e,direction,depth){return depth>0?function getNextEnabledElement(e,direction,depth){const parentElement=getAncestorByDepth(e,depth);if(parentElement){const nextElementParent=parentElement[direction];return nextElementParent?nextElementParent.querySelector(SELECTOR):null}return null}(e,direction,depth):function getNextEnabledSibling(e,siblingDirection){let sibling=e[siblingDirection];for(;sibling&&sibling.disabled;)sibling=sibling[siblingDirection];return sibling}(e,direction)}function useRovingTabIndex(_ref){let{ref}=_ref,keyEventDeps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],depth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{isRTL}=(0,config.ZR)(),onKeyDown=(0,src.I4)((_ref2=>{let{key,target}=_ref2;const element=target,elementDirection=function getFocusableElementDirection(isRTL,key){return(isRTL?"ArrowRight"===key||"ArrowUp"===key||"PageUp"===key:"ArrowLeft"===key||"ArrowUp"===key||"PageUp"===key)?"previousSibling":"nextSibling"}(isRTL,key),switchFocusToElement=e=>{if(e){const elToScroll=depth>0?getAncestorByDepth(e,depth):e;element.tabIndex=-1,e.tabIndex=0,e.focus(),elToScroll.scrollIntoView("previousSibling"===elementDirection)}};if("ArrowLeft"===key||"ArrowRight"===key){const nextElement=getNextElement(element,elementDirection,depth);nextElement&&switchFocusToElement(nextElement)}else if("ArrowUp"===key||"ArrowDown"===key){const closestValidElement=function getClosestValidElement(element,direction,depth){const elementCenter=getCenter(element);let closestValidElement=null,closestValidElementCenter=null,closestValidElementDistanceSq=null;for(let nextElement=getNextElement(element,direction,depth);nextElement;nextElement=getNextElement(nextElement,direction,depth)){const nextElementCenter=getCenter(nextElement);if(Math.floor(nextElementCenter.y)===Math.floor(elementCenter.y))continue;if(closestValidElement&&Math.floor(nextElementCenter.y)>Math.floor(closestValidElementCenter.y))break;const distanceSq=(p1=elementCenter,p2=nextElementCenter,Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2));(!closestValidElementDistanceSq||distanceSq<closestValidElementDistanceSq)&&(closestValidElementDistanceSq=distanceSq,closestValidElementCenter=nextElementCenter,closestValidElement=nextElement)}var p1,p2;return closestValidElement}(element,elementDirection,depth);if(closestValidElement)element.tabIndex=-1,closestValidElement.tabIndex=0,closestValidElement.focus();else if("ArrowUp"===key){switchFocusToElement(depth>0?getFocusableChild(element,depth):element.parentNode.firstChild)}else{switchFocusToElement(depth>0?getFocusableChild(element,depth,"lastChild"):element.parentNode.lastChild)}}else if("Home"===key){switchFocusToElement(depth>0?getFocusableChild(element,depth):element.parentNode.firstChild)}else if("End"===key){switchFocusToElement(depth>0?getFocusableChild(element,depth,"lastChild"):element.parentNode.lastChild)}else if("PageDown"===key||"PageUp"===key){let sibling=element;for(let i=0;getNextElement(sibling,elementDirection,depth)&&i<5;sibling=getNextElement(sibling,elementDirection,depth))i++;switchFocusToElement(sibling)}}),[isRTL,depth]);(0,keyboard.Ew)(ref,{key:["up","down","left","right","pageup","pagedown","home","end"]},onKeyDown,[ref,onKeyDown,...keyEventDeps])}}}]);