"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[6621],{"./packages/dashboard/src/app/views/exploreTemplates/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>content});__webpack_require__("./node_modules/react/index.js");var src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),useGridViewKeys=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts")),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),grid_components=__webpack_require__("./packages/dashboard/src/app/views/shared/grid/components.js");const CardWrapper=styled_components_browser_esm.ZP.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],grid_components.ph,grid_components.ZM,grid_components.ph,grid_components.ZM,(({$isSelected})=>$isSelected?1:0)),TemplateDisplayContent=styled_components_browser_esm.ZP.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),PicturePoster=(0,styled_components_browser_esm.ZP)(grid_components.Wf).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme})=>theme.borders.radius.medium));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const SeeDetailsButton=(0,styled_components_browser_esm.ZP)(button_button.z).attrs({type:constants.L$.Tertiary,size:constants.qE.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme})=>theme.colors.standard.white)),TemplateGridItem=(0,src.Gp)((({onCreateStory,onFocus,height,id,isActive,posterSrc,slug,title,status,onSeeDetailsClick=noop.Z},ref)=>{const tabIndex=isActive?0:-1,posterAltText=(0,sprintf.Z)((0,i18n.__)("First page of %s template","web-stories"),title);return(0,jsx_runtime.jsx)(components.DT,{ref,id:`template-grid-item-${id}`,className:"templateGridItem","data-testid":`template-grid-item-${id}`,$posterHeight:height,onFocus,children:(0,jsx_runtime.jsx)(grid_components.W2,{children:(0,jsx_runtime.jsxs)(CardWrapper,{$isSelected:isActive,children:[(0,jsx_runtime.jsxs)(PicturePoster,{children:[(0,jsx_runtime.jsx)("source",{srcSet:posterSrc?.webp,type:"image/webp"}),(0,jsx_runtime.jsx)("source",{srcSet:posterSrc?.png,type:"image/png"}),(0,jsx_runtime.jsx)("img",{src:posterSrc?.png,alt:posterAltText,decoding:"async",width:src_constants.R8,height:src_constants.j$})]}),(0,jsx_runtime.jsx)(grid_components.ph,{}),(0,jsx_runtime.jsx)(grid_components.ZM,{"data-testid":"card-action-container","data-template-slug":slug,children:(0,jsx_runtime.jsxs)(TemplateDisplayContent,{children:[(0,jsx_runtime.jsx)(SeeDetailsButton,{ariaLabel:(0,sprintf.Z)((0,i18n.__)("Go to detail view of %s","web-stories"),title),onClick:()=>onSeeDetailsClick(id,title),className:"focus_template",tabIndex,children:src_constants.c1[status]}),onCreateStory&&(0,jsx_runtime.jsx)(button_button.z,{size:constants.qE.Small,type:constants.L$.Primary,onClick:onCreateStory,tabIndex,ariaLabel:(0,sprintf.Z)((0,i18n.__)("Create new story from %s","web-stories"),title),children:(0,i18n.__)("Use template","web-stories")})]})})]})})})}));TemplateGridItem.displayName="TemplateGridItem";const templateGridItem=TemplateGridItem;function TemplateGridView({pageSize,templates:filteredTemplates,templateActions}){const{isRTL,apiCallbacks}=(0,config.Z)(),containerRef=(0,src.sO)(),gridRef=(0,src.sO)(),itemRefs=(0,src.sO)({}),[activeGridItemId,setActiveGridItemId]=(0,src.eJ)(null),{handleDetailsToggle,createStoryFromTemplate}=templateActions||{},canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);(0,useGridViewKeys.Z)({containerRef,gridRef,itemRefs,isRTL,currentItemId:activeGridItemId,items:filteredTemplates}),(0,src.d4)((()=>{activeGridItemId&&itemRefs.current?.[activeGridItemId]?.querySelector(".focus_template")?.focus()}),[activeGridItemId]),(0,src.FR)(containerRef,(()=>setActiveGridItemId(null)),[]);const memoizedTemplateItems=(0,src.Ye)((()=>filteredTemplates.map((({id,slug,status,title,postersByPage})=>{const isActive=activeGridItemId===id,posterSrc=postersByPage?.[0];return(0,jsx_runtime.jsx)(templateGridItem,{onCreateStory:canCreateStory?()=>createStoryFromTemplate(id):utils.ZT,onFocus:()=>{setActiveGridItemId(id)},onSeeDetailsClick:handleDetailsToggle,height:pageSize.height,id,isActive,posterSrc,ref:el=>{itemRefs.current[id]=el},slug,status,title},slug)}))),[filteredTemplates,activeGridItemId,canCreateStory,handleDetailsToggle,pageSize.height,createStoryFromTemplate]);return(0,jsx_runtime.jsx)("div",{ref:containerRef,children:(0,jsx_runtime.jsx)(components.gy,{pageSize,role:"list",ref:gridRef,ariaLabel:(0,i18n.__)("Viewing available templates","web-stories"),children:memoizedTemplateItems})})}TemplateGridView.displayName="TemplateGridView";const templateGridView=TemplateGridView;function Content({allPagesFetched,isLoading,page,templates,view,totalTemplates,search,templateActions}){const{newStoryURL}=(0,config.Z)(),pageContent=(0,src.Ye)((()=>isLoading?(0,jsx_runtime.jsx)(components.ly,{children:(0,jsx_runtime.jsx)(loadingSpinner.Z,{})}):totalTemplates>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(templateGridView,{templates,pageSize:view.pageSize,templateActions}),(0,jsx_runtime.jsx)(infiniteScroller.Z,{canLoadMore:!allPagesFetched,isLoading,allDataLoadedMessage:(0,i18n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more templates","web-stories"),onLoadMore:page.requestNextPage})]}):(0,jsx_runtime.jsxs)(shared.Xr,{children:[(0,jsx_runtime.jsx)(headline.s,{size:types.TextSize.Small,as:"h3",children:search?(0,sprintf.Z)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):(0,i18n.__)("No templates currently available.","web-stories")}),!search&&(0,jsx_runtime.jsx)(button_button.i,{type:constants.L$.Primary,size:constants.qE.Medium,href:newStoryURL,children:(0,i18n.__)("Create New Story","web-stories")})]})),[allPagesFetched,isLoading,newStoryURL,page.requestNextPage,templateActions,search,templates,totalTemplates,view.pageSize]);return(0,jsx_runtime.jsx)(components.Ar.Scrollable,{children:(0,jsx_runtime.jsx)(components.wD,{children:pageContent})})}Content.displayName="Content";const content=Content},"./packages/dashboard/src/app/views/exploreTemplates/content/stories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NoSearchResults:()=>NoSearchResults,_default:()=>_default,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/dashboard/src/components/index.js"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dashboard/src/constants/index.ts"),_storybookUtils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dashboard/src/storybookUtils/index.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/src/utils/index.js"),___WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/content/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const StorybookLayoutContainer=styled_components__WEBPACK_IMPORTED_MODULE_7__.ZP.div.withConfig({displayName:"stories__StorybookLayoutContainer",componentId:"sc-pk1miz-0"})(["margin-top:40px;height:100vh;"]),__WEBPACK_DEFAULT_EXPORT__={title:"Dashboard/Views/ExploreTemplates/Content",component:___WEBPACK_IMPORTED_MODULE_5__.Z,args:{allPagesFetched:!1,isLoading:!1,pageValue:1,searchKeyword:"",templates:_storybookUtils__WEBPACK_IMPORTED_MODULE_3__.ZZ,viewStyle:_constants__WEBPACK_IMPORTED_MODULE_2__.$Y.GRID,totalTemplates:3},argTypes:{handleDetailsToggle:{action:"modal was toggled"},switchToTemplateByOffset:{action:"switched to prev/next template"},set:{action:"set page number"},requestNextPage:{action:"request next page clicked"},setKeyword:{action:"set search"},viewStyle:{options:_constants__WEBPACK_IMPORTED_MODULE_2__.$Y,control:"radio"}},parameters:{controls:{exclude:["pageValue","templates","page","search","view","templateActions"]}}},_default={render:function Render(args){const{pageSize}=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.jE)({isGrid:!0}),defaultNestedProps={templateActions:{handleDetailsToggle:args.handleDetailsToggle,switchToTemplateByOffset:args.switchToTemplateByOffset},page:{set:args.set,requestNextPage:args.requestNextPage,value:args.pageValue},search:{setKeyword:args.setKeyword,keyword:args.searchKeyword},view:{pageSize,style:args.viewStyle}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components__WEBPACK_IMPORTED_MODULE_1__.Ar.Provider,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StorybookLayoutContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(___WEBPACK_IMPORTED_MODULE_5__.Z,{...args,...defaultNestedProps})})})}},NoSearchResults={render:_default,args:{allPagesFetched:!0,totalTemplates:0,searchKeyword:"polar bears"}}},"./packages/dashboard/src/app/views/shared/grid/components.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W2:()=>Container,Wf:()=>Poster,ZM:()=>Scrim,ph:()=>Gradient});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const Gradient=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.gradient.posterOverlay)),Scrim=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.opacity.black3)),Container=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Poster=styled_components__WEBPACK_IMPORTED_MODULE_0__.ZP.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.gradient.placeholder))},"./packages/dashboard/src/dataUtils/formattedStoriesArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/date/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__=[{id:167,status:"publish",title:"ORANGE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:51.000Z"),modifiedGmt:"2020-05-21T23:25:51.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:51.000Z"),createdGmt:"2020-05-21T23:25:51.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[],author:{name:"Jango Fett",id:1},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=167",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=167",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=167"},{locked:!0,lockUser:{name:"batgirl",id:888877665,avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y&s=96"},id:168,status:"publish",title:"PURPLE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:35.000Z"),modifiedGmt:"2020-05-21T23:25:35.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:35.000Z"),createdGmt:"2020-05-21T23:25:35.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[{name:"Dagobah",id:1}],author:{name:"Jango Fett",id:1},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=168",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=168",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=168"},{id:165,status:"draft",title:"GREEN SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:22.000Z"),modifiedGmt:"2020-05-21T23:25:22.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:25:22.000Z"),createdGmt:"2020-05-21T23:25:22.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-2.png",tags:[],categories:[],author:{name:"Chewbacca",id:2},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=165",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=165",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=165"},{id:163,status:"draft",title:"RED SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:24:47.000Z"),modifiedGmt:"2020-05-21T23:24:47.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:24:47.000Z"),createdGmt:"2020-05-21T23:24:47.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-3.png",tags:[],categories:[],author:{name:"Luke Skywalker",id:3},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=163",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=163",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=163"},{id:161,status:"private",title:"BLUE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:24:06.000Z"),modifiedGmt:"2020-05-21T23:24:06.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.uq)("2020-05-21T23:24:06.000Z"),createdGmt:"2020-05-21T23:24:06.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[],author:{name:"Lando-Calrissian",id:4},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=161",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=161",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=161"}]},"./packages/dashboard/src/storybookUtils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QR:()=>STORYBOOK_PAGE_SIZE,ik:()=>formattedStoriesArray.Z,ZZ:()=>formattedTemplatesArray.Z});var formattedStoriesArray=__webpack_require__("./packages/dashboard/src/dataUtils/formattedStoriesArray.js"),formattedTemplatesArray=__webpack_require__("./packages/dashboard/src/dataUtils/formattedTemplatesArray.js");const STORYBOOK_PAGE_SIZE={width:212,height:318}},"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(({theme})=>theme.colors.fg.tertiary)),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_5__.ZP.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_6__.j);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;function InfiniteScroller({allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}){const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.sO)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.sO)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__._Y)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Ye)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.d4)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Ye)((()=>loadState===State.LoadingExternal?null:canLoadMore?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(LoadingContainer,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_loadingSpinner__WEBPACK_IMPORTED_MODULE_9__.Z,{...loadingSpinnerProps})}):allDataLoadedMessage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_typography__WEBPACK_IMPORTED_MODULE_7__.x.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_8__.TextSize.Small,children:allDataLoadedMessage}):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef,children:[loadingAlert&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(AriaOnlyAlert,{role:"status",children:loadingAlert}),loadingContent]})}InfiniteScroller.displayName="InfiniteScroller";const __WEBPACK_DEFAULT_EXPORT__=InfiniteScroller},"./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/i18n.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TAU=2*Math.PI,AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.span.withConfig({displayName:"loadingSpinner__AriaOnlyAlert",componentId:"sc-10eor9p-0"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_5__.j),Container=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"loadingSpinner__Container",componentId:"sc-10eor9p-1"})(["position:relative;height:","px;width:","px;color:",";"],(({animationSize})=>animationSize),(({animationSize})=>animationSize),(({theme})=>theme.colors.interactiveBg.brandNormal)),Circle=styled_components__WEBPACK_IMPORTED_MODULE_4__.ZP.div.withConfig({displayName:"loadingSpinner__Circle",componentId:"sc-10eor9p-2"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) ",";height:","px;width:","px;background-color:",";border-radius:",";animation-name:",";animation-fill-mode:both;animation-duration:","s;animation-iteration-count:infinite;animation-timing-function:",";"],(({$position:{x,y}})=>`translate(${x}px, ${y}px)`),(({circleSize})=>circleSize),(({circleSize})=>circleSize),(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.borders.radius.round),(({circleIndex,numCircles})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.F4)(["0%{opacity:1}","{opacity:1}","{opacity:0.3}","{opacity:1}"],100*circleIndex/numCircles+"%",100*(circleIndex+1)/numCircles+"%",100*(circleIndex+1)/numCircles+1+"%")),.85,_theme__WEBPACK_IMPORTED_MODULE_6__.s.inOutQuad);function LoadingSpinner({animationSize=95,circleSize=12,loadingMessage=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Loading","web-stories"),numCircles=11,...props}){const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Ye)((()=>new Array(numCircles).fill(1).map((()=>(0,uuid__WEBPACK_IMPORTED_MODULE_8__.Z)()))),[numCircles]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(Container,{animationSize,...props,children:[loadingMessage&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(AriaOnlyAlert,{role:"status",children:loadingMessage}),ids.map(((id,index)=>{const angle=((index,numCircles)=>TAU*index/numCircles)(index,numCircles),position=((angle,animationSize)=>{const radius=animationSize/2,x=Math.sin(angle)*radius,y=-Math.cos(angle)*radius;return{x:x.toFixed(1),y:y.toFixed(1)}})(angle,animationSize);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Circle,{circleIndex:index,circleSize,numCircles,$position:position},id)}))]})}LoadingSpinner.displayName="LoadingSpinner";const __WEBPACK_DEFAULT_EXPORT__=LoadingSpinner},"./node_modules/core-js/modules/esnext.iterator.find.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("./node_modules/core-js/internals/export.js"),iterate=__webpack_require__("./node_modules/core-js/internals/iterate.js"),aCallable=__webpack_require__("./node_modules/core-js/internals/a-callable.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),getIteratorDirect=__webpack_require__("./node_modules/core-js/internals/get-iterator-direct.js");$({target:"Iterator",proto:!0,real:!0},{find:function find(predicate){anObject(this),aCallable(predicate);var record=getIteratorDirect(this),counter=0;return iterate(record,(function(value,stop){if(predicate(value,counter++))return stop(value)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})}}]);