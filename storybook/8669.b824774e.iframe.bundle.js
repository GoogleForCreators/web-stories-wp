/*! For license information please see 8669.b824774e.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[8669],{"./node_modules/@wmik/use-media-recorder/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{const React=__webpack_require__("./node_modules/react/index.js");function isObject(o){return o&&!Array.isArray(o)&&Object(o)===o}function validateMediaTrackConstraints(mediaType){let supportedMediaConstraints=null;if(navigator.mediaDevices&&(supportedMediaConstraints=navigator.mediaDevices.getSupportedConstraints()),null===supportedMediaConstraints)return;let unSupportedMediaConstraints=Object.keys(mediaType).filter((constraint=>!supportedMediaConstraints[constraint]));if(0!==unSupportedMediaConstraints.length){let toText=unSupportedMediaConstraints.join(",");console.error(`The following constraints ${toText} are not supported on this browser.`)}}const noop=()=>{};module.exports=function useMediaRecorder({blobOptions,recordScreen,customMediaStream,onStop=noop,onStart=noop,onError=noop,mediaRecorderOptions,onDataAvailable=noop,mediaStreamConstraints={}}){let mediaChunks=React.useRef([]),mediaStream=React.useRef(null),mediaRecorder=React.useRef(null),[status,setStatus]=React.useState("idle"),[errorCache,cacheError]=React.useState(null),[mediaBlobCache,cacheMediaBlob]=React.useState(null),[isAudioMutedCache,cacheIsAudioMuted]=React.useState(!1);async function getMediaStream(){if(errorCache&&cacheError(null),setStatus("acquiring_media"),customMediaStream&&customMediaStream instanceof MediaStream)return mediaStream.current=customMediaStream,customMediaStream;try{let stream;if(stream=recordScreen?await window.navigator.mediaDevices.getDisplayMedia(mediaStreamConstraints):await window.navigator.mediaDevices.getUserMedia(mediaStreamConstraints),recordScreen&&mediaStreamConstraints.audio){(await window.navigator.mediaDevices.getUserMedia({audio:mediaStreamConstraints.audio})).getAudioTracks().forEach((audioTrack=>stream.addTrack(audioTrack)))}return mediaStream.current=stream,setStatus("ready"),stream}catch(err){cacheError(err),setStatus("failed")}}function clearMediaStream(){mediaStream.current&&(mediaStream.current.getTracks().forEach((track=>track.stop())),mediaStream.current=null,setStatus("idle"))}function handleDataAvailable(e){e.data.size&&mediaChunks.current.push(e.data),onDataAvailable(e.data)}function handleStop(){let blob=new Blob,sampleChunk=new Blob;if(mediaChunks.current.length){[sampleChunk]=mediaChunks.current;let blobPropertyBag=Object.assign({type:sampleChunk.type},blobOptions);blob=new Blob(mediaChunks.current,blobPropertyBag),cacheMediaBlob(blob)}setStatus("stopped"),onStop(blob)}function handleError(e){cacheError(e.error),setStatus("idle"),onError(e.error)}function muteAudio(mute){cacheIsAudioMuted(mute),mediaStream.current&&mediaStream.current.getAudioTracks().forEach((audioTrack=>{audioTrack.enabled=!mute}))}return React.useEffect((()=>{if(!window.MediaRecorder)throw new ReferenceError("MediaRecorder is not supported in this browser. Please ensure that you are running the latest version of chrome/firefox/edge.");if(recordScreen&&!window.navigator.mediaDevices.getDisplayMedia)throw new ReferenceError("This browser does not support screen capturing.");isObject(mediaStreamConstraints.video)&&validateMediaTrackConstraints(mediaStreamConstraints.video),isObject(mediaStreamConstraints.audio)&&validateMediaTrackConstraints(mediaStreamConstraints.audio),mediaRecorderOptions&&mediaRecorderOptions.mimeType&&(MediaRecorder.isTypeSupported(mediaRecorderOptions.mimeType)||console.error("The specified MIME type supplied to MediaRecorder is not supported by this browser."))}),[mediaStreamConstraints,mediaRecorderOptions,recordScreen]),{error:errorCache,status,mediaBlob:mediaBlobCache,isAudioMuted:isAudioMutedCache,stopRecording:function stopRecording(){mediaRecorder.current&&(setStatus("stopping"),mediaRecorder.current.stop(),mediaRecorder.current.removeEventListener("dataavailable",handleDataAvailable),mediaRecorder.current.removeEventListener("stop",handleStop),mediaRecorder.current.removeEventListener("error",handleError),mediaRecorder.current=null,customMediaStream||clearMediaStream())},getMediaStream,startRecording:async function startRecording(timeSlice){if(errorCache&&cacheError(null),mediaStream.current||await getMediaStream(),mediaChunks.current=[],mediaStream.current){mediaRecorder.current=new MediaRecorder(mediaStream.current,mediaRecorderOptions),mediaRecorder.current.addEventListener("dataavailable",handleDataAvailable),mediaRecorder.current.addEventListener("stop",handleStop),mediaRecorder.current.addEventListener("error",handleError);try{mediaRecorder.current.start(timeSlice),setStatus("recording"),onStart()}catch(error){handleError({error})}}},pauseRecording:function pauseRecording(){mediaRecorder.current&&"recording"===mediaRecorder.current.state&&(mediaRecorder.current.pause(),setStatus("paused"))},resumeRecording:function resumeRecording(){mediaRecorder.current&&"paused"===mediaRecorder.current.state&&(mediaRecorder.current.resume(),setStatus("recording"))},clearMediaStream,clearMediaBlob:function clearMediaBlob(){cacheMediaBlob(null)},muteAudio:()=>muteAudio(!0),unMuteAudio:()=>muteAudio(!1),get liveStream(){return mediaStream.current?new MediaStream(mediaStream.current.getTracks()):null}}}},"./node_modules/sat/SAT.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){var SAT={};function Vector(x,y){this.x=x||0,this.y=y||0}function Circle(pos,r){this.pos=pos||new Vector,this.r=r||0,this.offset=new Vector}function Polygon(pos,points){this.pos=pos||new Vector,this.angle=0,this.offset=new Vector,this.setPoints(points||[])}function Box(pos,w,h){this.pos=pos||new Vector,this.w=w||0,this.h=h||0}function Response(){this.a=null,this.b=null,this.overlapN=new Vector,this.overlapV=new Vector,this.clear()}SAT.Vector=Vector,SAT.V=Vector,Vector.prototype.copy=Vector.prototype.copy=function(other){return this.x=other.x,this.y=other.y,this},Vector.prototype.clone=Vector.prototype.clone=function(){return new Vector(this.x,this.y)},Vector.prototype.perp=Vector.prototype.perp=function(){var x=this.x;return this.x=this.y,this.y=-x,this},Vector.prototype.rotate=Vector.prototype.rotate=function(angle){var x=this.x,y=this.y;return this.x=x*Math.cos(angle)-y*Math.sin(angle),this.y=x*Math.sin(angle)+y*Math.cos(angle),this},Vector.prototype.reverse=Vector.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},Vector.prototype.normalize=Vector.prototype.normalize=function(){var d=this.len();return d>0&&(this.x=this.x/d,this.y=this.y/d),this},Vector.prototype.add=Vector.prototype.add=function(other){return this.x+=other.x,this.y+=other.y,this},Vector.prototype.sub=Vector.prototype.sub=function(other){return this.x-=other.x,this.y-=other.y,this},Vector.prototype.scale=Vector.prototype.scale=function(x,y){return this.x*=x,this.y*=void 0!==y?y:x,this},Vector.prototype.project=Vector.prototype.project=function(other){var amt=this.dot(other)/other.len2();return this.x=amt*other.x,this.y=amt*other.y,this},Vector.prototype.projectN=Vector.prototype.projectN=function(other){var amt=this.dot(other);return this.x=amt*other.x,this.y=amt*other.y,this},Vector.prototype.reflect=Vector.prototype.reflect=function(axis){var x=this.x,y=this.y;return this.project(axis).scale(2),this.x-=x,this.y-=y,this},Vector.prototype.reflectN=Vector.prototype.reflectN=function(axis){var x=this.x,y=this.y;return this.projectN(axis).scale(2),this.x-=x,this.y-=y,this},Vector.prototype.dot=Vector.prototype.dot=function(other){return this.x*other.x+this.y*other.y},Vector.prototype.len2=Vector.prototype.len2=function(){return this.dot(this)},Vector.prototype.len=Vector.prototype.len=function(){return Math.sqrt(this.len2())},SAT.Circle=Circle,Circle.prototype.getAABBAsBox=Circle.prototype.getAABBAsBox=function(){var r=this.r;return new Box(this.pos.clone().add(this.offset).sub(new Vector(r,r)),2*r,2*r)},Circle.prototype.getAABB=Circle.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},Circle.prototype.setOffset=Circle.prototype.setOffset=function(offset){return this.offset=offset,this},SAT.Polygon=Polygon,Polygon.prototype.setPoints=Polygon.prototype.setPoints=function(points){if(!this.points||this.points.length!==points.length){var i,calcPoints=this.calcPoints=[],edges=this.edges=[],normals=this.normals=[];for(i=0;i<points.length;i++){var p1=points[i],p2=i<points.length-1?points[i+1]:points[0];p1===p2||p1.x!==p2.x||p1.y!==p2.y?(calcPoints.push(new Vector),edges.push(new Vector),normals.push(new Vector)):(points.splice(i,1),i-=1)}}return this.points=points,this._recalc(),this},Polygon.prototype.setAngle=Polygon.prototype.setAngle=function(angle){return this.angle=angle,this._recalc(),this},Polygon.prototype.setOffset=Polygon.prototype.setOffset=function(offset){return this.offset=offset,this._recalc(),this},Polygon.prototype.rotate=Polygon.prototype.rotate=function(angle){for(var points=this.points,len=points.length,i=0;i<len;i++)points[i].rotate(angle);return this._recalc(),this},Polygon.prototype.translate=Polygon.prototype.translate=function(x,y){for(var points=this.points,len=points.length,i=0;i<len;i++)points[i].x+=x,points[i].y+=y;return this._recalc(),this},Polygon.prototype._recalc=function(){var i,calcPoints=this.calcPoints,edges=this.edges,normals=this.normals,points=this.points,offset=this.offset,angle=this.angle,len=points.length;for(i=0;i<len;i++){var calcPoint=calcPoints[i].copy(points[i]);calcPoint.x+=offset.x,calcPoint.y+=offset.y,0!==angle&&calcPoint.rotate(angle)}for(i=0;i<len;i++){var p1=calcPoints[i],p2=i<len-1?calcPoints[i+1]:calcPoints[0],e=edges[i].copy(p2).sub(p1);normals[i].copy(e).perp().normalize()}return this},Polygon.prototype.getAABBAsBox=Polygon.prototype.getAABBAsBox=function(){for(var points=this.calcPoints,len=points.length,xMin=points[0].x,yMin=points[0].y,xMax=points[0].x,yMax=points[0].y,i=1;i<len;i++){var point=points[i];point.x<xMin?xMin=point.x:point.x>xMax&&(xMax=point.x),point.y<yMin?yMin=point.y:point.y>yMax&&(yMax=point.y)}return new Box(this.pos.clone().add(new Vector(xMin,yMin)),xMax-xMin,yMax-yMin)},Polygon.prototype.getAABB=Polygon.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},Polygon.prototype.getCentroid=Polygon.prototype.getCentroid=function(){for(var points=this.calcPoints,len=points.length,cx=0,cy=0,ar=0,i=0;i<len;i++){var p1=points[i],p2=i===len-1?points[0]:points[i+1],a=p1.x*p2.y-p2.x*p1.y;cx+=(p1.x+p2.x)*a,cy+=(p1.y+p2.y)*a,ar+=a}return new Vector(cx/=ar*=3,cy/=ar)},SAT.Box=Box,Box.prototype.toPolygon=Box.prototype.toPolygon=function(){var pos=this.pos,w=this.w,h=this.h;return new Polygon(new Vector(pos.x,pos.y),[new Vector,new Vector(w,0),new Vector(w,h),new Vector(0,h)])},SAT.Response=Response,Response.prototype.clear=Response.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var T_VECTORS=[],i=0;i<10;i++)T_VECTORS.push(new Vector);var T_ARRAYS=[];for(i=0;i<5;i++)T_ARRAYS.push([]);var T_RESPONSE=new Response,TEST_POINT=new Box(new Vector,1e-6,1e-6).toPolygon();function flattenPointsOn(points,normal,result){for(var min=Number.MAX_VALUE,max=-Number.MAX_VALUE,len=points.length,i=0;i<len;i++){var dot=points[i].dot(normal);dot<min&&(min=dot),dot>max&&(max=dot)}result[0]=min,result[1]=max}function isSeparatingAxis(aPos,bPos,aPoints,bPoints,axis,response){var rangeA=T_ARRAYS.pop(),rangeB=T_ARRAYS.pop(),offsetV=T_VECTORS.pop().copy(bPos).sub(aPos),projectedOffset=offsetV.dot(axis);if(flattenPointsOn(aPoints,axis,rangeA),flattenPointsOn(bPoints,axis,rangeB),rangeB[0]+=projectedOffset,rangeB[1]+=projectedOffset,rangeA[0]>rangeB[1]||rangeB[0]>rangeA[1])return T_VECTORS.push(offsetV),T_ARRAYS.push(rangeA),T_ARRAYS.push(rangeB),!0;if(response){var option1,option2,overlap=0;if(rangeA[0]<rangeB[0])if(response.aInB=!1,rangeA[1]<rangeB[1])overlap=rangeA[1]-rangeB[0],response.bInA=!1;else overlap=(option1=rangeA[1]-rangeB[0])<(option2=rangeB[1]-rangeA[0])?option1:-option2;else if(response.bInA=!1,rangeA[1]>rangeB[1])overlap=rangeA[0]-rangeB[1],response.aInB=!1;else overlap=(option1=rangeA[1]-rangeB[0])<(option2=rangeB[1]-rangeA[0])?option1:-option2;var absOverlap=Math.abs(overlap);absOverlap<response.overlap&&(response.overlap=absOverlap,response.overlapN.copy(axis),overlap<0&&response.overlapN.reverse())}return T_VECTORS.push(offsetV),T_ARRAYS.push(rangeA),T_ARRAYS.push(rangeB),!1}function voronoiRegion(line,point){var len2=line.len2(),dp=point.dot(line);return dp<0?LEFT_VORONOI_REGION:dp>len2?RIGHT_VORONOI_REGION:MIDDLE_VORONOI_REGION}SAT.isSeparatingAxis=isSeparatingAxis;var LEFT_VORONOI_REGION=-1,MIDDLE_VORONOI_REGION=0,RIGHT_VORONOI_REGION=1;function pointInCircle(p,c){var differenceV=T_VECTORS.pop().copy(p).sub(c.pos).sub(c.offset),radiusSq=c.r*c.r,distanceSq=differenceV.len2();return T_VECTORS.push(differenceV),distanceSq<=radiusSq}function pointInPolygon(p,poly){TEST_POINT.pos.copy(p),T_RESPONSE.clear();var result=testPolygonPolygon(TEST_POINT,poly,T_RESPONSE);return result&&(result=T_RESPONSE.aInB),result}function testCircleCircle(a,b,response){var differenceV=T_VECTORS.pop().copy(b.pos).add(b.offset).sub(a.pos).sub(a.offset),totalRadius=a.r+b.r,totalRadiusSq=totalRadius*totalRadius,distanceSq=differenceV.len2();if(distanceSq>totalRadiusSq)return T_VECTORS.push(differenceV),!1;if(response){var dist=Math.sqrt(distanceSq);response.a=a,response.b=b,response.overlap=totalRadius-dist,response.overlapN.copy(differenceV.normalize()),response.overlapV.copy(differenceV).scale(response.overlap),response.aInB=a.r<=b.r&&dist<=b.r-a.r,response.bInA=b.r<=a.r&&dist<=a.r-b.r}return T_VECTORS.push(differenceV),!0}function testPolygonCircle(polygon,circle,response){for(var circlePos=T_VECTORS.pop().copy(circle.pos).add(circle.offset).sub(polygon.pos),radius=circle.r,radius2=radius*radius,points=polygon.calcPoints,len=points.length,edge=T_VECTORS.pop(),point=T_VECTORS.pop(),i=0;i<len;i++){var next=i===len-1?0:i+1,prev=0===i?len-1:i-1,overlap=0,overlapN=null;edge.copy(polygon.edges[i]),point.copy(circlePos).sub(points[i]),response&&point.len2()>radius2&&(response.aInB=!1);var region=voronoiRegion(edge,point);if(region===LEFT_VORONOI_REGION){edge.copy(polygon.edges[prev]);var point2=T_VECTORS.pop().copy(circlePos).sub(points[prev]);if((region=voronoiRegion(edge,point2))===RIGHT_VORONOI_REGION){if((dist=point.len())>radius)return T_VECTORS.push(circlePos),T_VECTORS.push(edge),T_VECTORS.push(point),T_VECTORS.push(point2),!1;response&&(response.bInA=!1,overlapN=point.normalize(),overlap=radius-dist)}T_VECTORS.push(point2)}else if(region===RIGHT_VORONOI_REGION){if(edge.copy(polygon.edges[next]),point.copy(circlePos).sub(points[next]),(region=voronoiRegion(edge,point))===LEFT_VORONOI_REGION){if((dist=point.len())>radius)return T_VECTORS.push(circlePos),T_VECTORS.push(edge),T_VECTORS.push(point),!1;response&&(response.bInA=!1,overlapN=point.normalize(),overlap=radius-dist)}}else{var normal=edge.perp().normalize(),dist=point.dot(normal),distAbs=Math.abs(dist);if(dist>0&&distAbs>radius)return T_VECTORS.push(circlePos),T_VECTORS.push(normal),T_VECTORS.push(point),!1;response&&(overlapN=normal,overlap=radius-dist,(dist>=0||overlap<2*radius)&&(response.bInA=!1))}overlapN&&response&&Math.abs(overlap)<Math.abs(response.overlap)&&(response.overlap=overlap,response.overlapN.copy(overlapN))}return response&&(response.a=polygon,response.b=circle,response.overlapV.copy(response.overlapN).scale(response.overlap)),T_VECTORS.push(circlePos),T_VECTORS.push(edge),T_VECTORS.push(point),!0}function testCirclePolygon(circle,polygon,response){var result=testPolygonCircle(polygon,circle,response);if(result&&response){var a=response.a,aInB=response.aInB;response.overlapN.reverse(),response.overlapV.reverse(),response.a=response.b,response.b=a,response.aInB=response.bInA,response.bInA=aInB}return result}function testPolygonPolygon(a,b,response){for(var aPoints=a.calcPoints,aLen=aPoints.length,bPoints=b.calcPoints,bLen=bPoints.length,i=0;i<aLen;i++)if(isSeparatingAxis(a.pos,b.pos,aPoints,bPoints,a.normals[i],response))return!1;for(i=0;i<bLen;i++)if(isSeparatingAxis(a.pos,b.pos,aPoints,bPoints,b.normals[i],response))return!1;return response&&(response.a=a,response.b=b,response.overlapV.copy(response.overlapN).scale(response.overlap)),!0}return SAT.pointInCircle=pointInCircle,SAT.pointInPolygon=pointInPolygon,SAT.testCircleCircle=testCircleCircle,SAT.testPolygonCircle=testPolygonCircle,SAT.testCirclePolygon=testCirclePolygon,SAT.testPolygonPolygon=testPolygonPolygon,SAT})?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./packages/story-editor/node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes="",i=0;i<arguments.length;i++){var arg=arguments[i];arg&&(classes=appendClass(classes,parseValue(arg)))}return classes}function parseValue(arg){if("string"==typeof arg||"number"==typeof arg)return arg;if("object"!=typeof arg)return"";if(Array.isArray(arg))return classNames.apply(null,arg);if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]"))return arg.toString();var classes="";for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&(classes=appendClass(classes,key));return classes}function appendClass(value,newClass){return newClass?value?value+" "+newClass:value+newClass:value}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);