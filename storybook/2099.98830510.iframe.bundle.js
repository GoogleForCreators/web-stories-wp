"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[2099],{"./packages/dashboard/src/app/api/useApiAlerts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),_useApi__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/dashboard/src/app/api/useApi.js");const __WEBPACK_DEFAULT_EXPORT__=function useApiAlerts(){const{storyError,templateError}=(0,_useApi__WEBPACK_IMPORTED_MODULE_1__.A)((({state:{stories:{error:storyError},templates:{error:templateError}}})=>({storyError,templateError}))),{showSnackbar}=(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_2__.d)(),debouncedShowSnackbar=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.YQ)((message=>showSnackbar({message,dismissible:!0})),200);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.vJ)((()=>{storyError?.id&&debouncedShowSnackbar(storyError.message)}),[storyError,debouncedShowSnackbar]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.vJ)((()=>{templateError?.id&&debouncedShowSnackbar(templateError.message)}),[templateError,debouncedShowSnackbar])}},"./packages/dashboard/src/app/views/exploreTemplates/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),useGridViewKeys=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts")),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),grid_components=__webpack_require__("./packages/dashboard/src/app/views/shared/grid/components.js");const CardWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],grid_components.Hf,grid_components.pk,grid_components.Hf,grid_components.pk,(({$isSelected})=>$isSelected?1:0)),TemplateDisplayContent=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),PicturePoster=(0,styled_components_browser_esm.Ay)(grid_components.O6).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme})=>theme.borders.radius.medium)),SeeDetailsButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme})=>theme.colors.standard.white)),TemplateGridItem=(0,src.Rf)((({onCreateStory,onFocus,height,id,isActive,posterSrc,slug,title,status,onSeeDetailsClick=noop.l},ref)=>{const tabIndex=isActive?0:-1,posterAltText=(0,sprintf.A)((0,i18n.__)("First page of %s template","web-stories"),title);return react.createElement(components.SG,{ref,id:`template-grid-item-${id}`,className:"templateGridItem","data-testid":`template-grid-item-${id}`,$posterHeight:height,onFocus},react.createElement(grid_components.mc,null,react.createElement(CardWrapper,{$isSelected:isActive},react.createElement(PicturePoster,null,react.createElement("source",{srcSet:posterSrc?.webp,type:"image/webp"}),react.createElement("source",{srcSet:posterSrc?.png,type:"image/png"}),react.createElement("img",{src:posterSrc?.png,alt:posterAltText,decoding:"async",width:src_constants.qs,height:src_constants.PO})),react.createElement(grid_components.Hf,null),react.createElement(grid_components.pk,{"data-testid":"card-action-container","data-template-slug":slug},react.createElement(TemplateDisplayContent,null,react.createElement(SeeDetailsButton,{ariaLabel:(0,sprintf.A)((0,i18n.__)("Go to detail view of %s","web-stories"),title),onClick:()=>onSeeDetailsClick(id,title),className:"focus_template",tabIndex},src_constants.ai[status]),onCreateStory&&react.createElement(button_button.$,{size:constants.Mp.Small,type:constants.VQ.Primary,onClick:onCreateStory,tabIndex,ariaLabel:(0,sprintf.A)((0,i18n.__)("Create new story from %s","web-stories"),title)},(0,i18n.__)("Use template","web-stories")))))))}));TemplateGridItem.displayName="TemplateGridItem";const templateGridItem=TemplateGridItem;const templateGridView=function TemplateGridView({pageSize,templates:filteredTemplates,templateActions}){const{isRTL,apiCallbacks}=(0,config.U)(),containerRef=(0,src.li)(),gridRef=(0,src.li)(),itemRefs=(0,src.li)({}),[activeGridItemId,setActiveGridItemId]=(0,src.J0)(null),{handleDetailsToggle,createStoryFromTemplate}=templateActions||{},canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);(0,useGridViewKeys.A)({containerRef,gridRef,itemRefs,isRTL,currentItemId:activeGridItemId,items:filteredTemplates}),(0,src.vJ)((()=>{activeGridItemId&&itemRefs.current?.[activeGridItemId]?.querySelector(".focus_template")?.focus()}),[activeGridItemId]),(0,src.g$)(containerRef,(()=>setActiveGridItemId(null)),[]);const memoizedTemplateItems=(0,src.Kr)((()=>filteredTemplates.map((({id,slug,status,title,postersByPage})=>{const isActive=activeGridItemId===id,posterSrc=postersByPage?.[0];return react.createElement(templateGridItem,{onCreateStory:canCreateStory?()=>createStoryFromTemplate(id):utils.lQ,onFocus:()=>{setActiveGridItemId(id)},onSeeDetailsClick:handleDetailsToggle,height:pageSize.height,id,isActive,key:slug,posterSrc,ref:el=>{itemRefs.current[id]=el},slug,status,title})}))),[filteredTemplates,activeGridItemId,canCreateStory,handleDetailsToggle,pageSize.height,createStoryFromTemplate]);return react.createElement("div",{ref:containerRef},react.createElement(components.pV,{pageSize,role:"list",ref:gridRef,ariaLabel:(0,i18n.__)("Viewing available templates","web-stories")},memoizedTemplateItems))};const content=function Content({allPagesFetched,isLoading,page,templates,view,totalTemplates,search,templateActions}){const{newStoryURL}=(0,config.U)(),pageContent=(0,src.Kr)((()=>isLoading?react.createElement(components.YM,null,react.createElement(loadingSpinner.A,null)):totalTemplates>0?react.createElement(react.Fragment,null,react.createElement(templateGridView,{templates,pageSize:view.pageSize,templateActions}),react.createElement(infiniteScroller.A,{canLoadMore:!allPagesFetched,isLoading,allDataLoadedMessage:(0,i18n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more templates","web-stories"),onLoadMore:page.requestNextPage})):react.createElement(shared.Gh,null,react.createElement(headline.$,{size:types.$.Small,as:"h3"},search?(0,sprintf.A)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):(0,i18n.__)("No templates currently available.","web-stories")),!search&&react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Medium,href:newStoryURL},(0,i18n.__)("Create New Story","web-stories")))),[allPagesFetched,isLoading,newStoryURL,page.requestNextPage,templateActions,search,templates,totalTemplates,view.pageSize]);return react.createElement(components.PE.Scrollable,null,react.createElement(components.Zo,null,pageContent))}},"./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>TemplateFiltersProvider,C:()=>filterContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_constants_templates__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dashboard/src/constants/templates.ts"),_filters_reducer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dashboard/src/app/views/filters/reducer.js"),_filters_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/src/app/views/filters/types.js");const filterContext=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.q6)({state:{},actions:{}}),{filters:defaultTemplateFilters,sort:defaultTemplateSort}=_constants_templates__WEBPACK_IMPORTED_MODULE_2__.dc;function TemplateFiltersProvider({children}){const[state,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.WO)(_filters_reducer__WEBPACK_IMPORTED_MODULE_3__.A,{filters:[],filtersObject:defaultTemplateFilters,sortObject:defaultTemplateSort}),updateFilter=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)(((key,value)=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_4__.bS,payload:{key,value}})}),[]),updateSort=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)((values=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_4__.HX,payload:{type:"template",values}})}),[]),registerFilters=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)((value=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_4__.ak,payload:{value}})}),[]),contextValue=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>({state,actions:{updateSort,updateFilter,registerFilters}})),[state,updateSort,updateFilter,registerFilters]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(filterContext.Provider,{value:contextValue},children)}},"./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useTemplateFilters});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_TemplateFiltersProvider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js");function useTemplateFilters(selector=_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.D_){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.i7)(_TemplateFiltersProvider__WEBPACK_IMPORTED_MODULE_1__.C,selector)}},"./packages/dashboard/src/app/views/exploreTemplates/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./packages/i18n/src/i18n.ts")),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),flagged__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/node_modules/flagged/dist/flagged.esm.js"),_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/dashboard/src/constants/index.ts"),_filters_useTemplateFilters__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js")),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/dashboard/src/utils/index.js"),_shared__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/dashboard/src/app/views/shared/index.js");const __WEBPACK_DEFAULT_EXPORT__=function Header({isLoading,totalTemplates,view,searchOptions=[]}){const enableInProgressTemplateActions=(0,flagged__WEBPACK_IMPORTED_MODULE_4__.iT)("enableInProgressTemplateActions"),{filters,sortObject,updateFilter,updateSort,registerFilters}=(0,_filters_useTemplateFilters__WEBPACK_IMPORTED_MODULE_7__.A)((({state:{filters,sortObject},actions:{updateFilter,updateSort,registerFilters}})=>({filters,sortObject,updateFilter,updateSort,registerFilters}))),[statusFilterValue,searchFilterValue]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>{const status=filters.find((({key})=>"status"===key)),search=filters.find((({key})=>"search"===key));return[status?.filterId,search?.filterId]}),[filters]),debouncedSearchChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.YQ)((value=>{updateFilter("search",{filterId:value})}),_constants__WEBPACK_IMPORTED_MODULE_5__.dQ);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{registerFilters([{key:"search"}]),registerFilters([{key:"status",filterId:_constants__WEBPACK_IMPORTED_MODULE_5__.dc.filters.status}])}),[registerFilters]);const clearSearch=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.hb)((()=>updateFilter("search",{filterId:null})),[updateFilter]),resultsLabel=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.qM)({totalResults:totalTemplates,currentFilter:statusFilterValue,view:_constants__WEBPACK_IMPORTED_MODULE_5__.eZ.TEMPLATES_GALLERY});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared__WEBPACK_IMPORTED_MODULE_9__.Av,{heading:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Explore Templates","web-stories"),searchPlaceholder:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Search Templates","web-stories"),showSearch:!0,searchOptions,searchValue:searchFilterValue,handleSearchChange:debouncedSearchChange,onClear:clearSearch}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared__WEBPACK_IMPORTED_MODULE_9__.WJ,{resultsLabel,layoutStyle:view.style,handleLayoutSelect:view.toggleStyle,isLoading,pageSortOptions:_constants__WEBPACK_IMPORTED_MODULE_5__.XS,pageSortDefaultOption:_constants__WEBPACK_IMPORTED_MODULE_5__.D4.POPULAR,currentSort:sortObject,handleSortChange:updateSort,showSortDropdown:enableInProgressTemplateActions,sortDropdownAriaLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_10__.__)("Choose sort option for display","web-stories")}))}},"./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),chip=__webpack_require__("./packages/design-system/src/components/chip/chip.tsx"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),arrow_left_large=__webpack_require__("./packages/design-system/src/icons/arrow_left_large.svg"),arrow_right_large=__webpack_require__("./packages/design-system/src/icons/arrow_right_large.svg"),display=__webpack_require__("./packages/design-system/src/components/typography/display/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js");__webpack_require__("./packages/dashboard/src/propTypes.js");const Panel=styled_components_browser_esm.Ay.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Inner=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),DetailContainer=styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),TemplateDetails=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),StyledPanel=(styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,styled_components_browser_esm.Ay)(Panel).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),ByLineText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(({theme})=>theme.colors.fg.tertiary)),DescriptionText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),PaginationContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(({alignLeft})=>alignLeft?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        ")),TemplateTag=(0,styled_components_browser_esm.Ay)(chip.A).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(({theme})=>theme.colors.fg.primary)),MetadataContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);const content=function DetailsContent({activeTemplateIndex,isRTL,filteredTemplatesLength,switchToTemplateByOffset,template}){const{postersByPage,title,description,tags,colors}=template||{},[galleryPosters,setGalleryPosters]=(0,src.J0)([]);(0,src.vJ)((()=>{postersByPage&&setGalleryPosters(Object.values(postersByPage).map(((poster,index)=>({id:index,...poster}))))}),[postersByPage]);const{NextButton,PrevButton}=(0,src.Kr)((()=>{const nextIndex=isRTL?activeTemplateIndex-1:activeTemplateIndex+1,previousIndex=isRTL?activeTemplateIndex+1:activeTemplateIndex-1,disablePrevious=isRTL?!filteredTemplatesLength||activeTemplateIndex===filteredTemplatesLength-1:!filteredTemplatesLength||0===activeTemplateIndex,disableNext=isRTL?!filteredTemplatesLength||0===activeTemplateIndex:!filteredTemplatesLength||activeTemplateIndex===filteredTemplatesLength-1,Previous=react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,"aria-label":(0,i18n.__)("View previous template","web-stories"),onClick:()=>{switchToTemplateByOffset(previousIndex),setGalleryPosters([])},disabled:disablePrevious},react.createElement(arrow_left_large.A,{height:32,width:32})),Next=react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,"aria-label":(0,i18n.__)("View next template","web-stories"),onClick:()=>{switchToTemplateByOffset(nextIndex),setGalleryPosters([])},disabled:disableNext},react.createElement(arrow_right_large.A,{height:32,width:32}));return isRTL?{NextButton:Previous,PrevButton:Next}:{NextButton:Next,PrevButton:Previous}}),[filteredTemplatesLength,activeTemplateIndex,isRTL,switchToTemplateByOffset]),byLine=template?(0,sprintf.A)((0,i18n.__)("By %s","web-stories"),template.createdBy):null;return react.createElement(StyledPanel,null,react.createElement(Container,null,react.createElement(PaginationContainer,{alignLeft:!0},PrevButton),react.createElement(Inner,null,react.createElement(components.PG,{galleryPosters,isRTL,galleryLabel:(0,i18n.__)("Template details by page","web-stories")}),react.createElement(TemplateDetails,null,react.createElement(DetailContainer,null,react.createElement(display.n,{size:types.$.Small,as:"h3","data-testid":"template-details-title"},title),react.createElement(ByLineText,{size:types.$.Medium},byLine),react.createElement(DescriptionText,{size:types.$.Medium},description),react.createElement(MetadataContainer,{role:"list","aria-label":(0,i18n.__)("Template tags","web-stories")},tags.map((tag=>react.createElement(TemplateTag,{key:tag,disabled:!0},tag)))),react.createElement(MetadataContainer,null,react.createElement(components.Q5,{colors,size:32,"aria-label":(0,i18n.__)("Template colors","web-stories")}))))),react.createElement(PaginationContainer,null,NextButton)))}},"./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/sprintf.ts"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/icons/cross_large.svg");__webpack_require__("./packages/dashboard/src/propTypes.js");const Nav=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),CTAButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.$).attrs({type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.VQ.Primary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.Mp.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);const __WEBPACK_DEFAULT_EXPORT__=function Header({templateTitle,templateId,templateActions,canCreateStory}){const{createStoryFromTemplate,handleDetailsToggle}=templateActions||{};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Nav,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.$,{type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.VQ.Tertiary,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.Ak.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.Mp.Small,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_5__.__)("Close","web-stories"),onClick:handleDetailsToggle},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.A,null)),canCreateStory&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(CTAButton,{onClick:()=>createStoryFromTemplate(templateId),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.A)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_5__.__)("Use %s template to create new story","web-stories"),templateTitle)},(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_5__.__)("Use template","web-stories")))}},"./packages/dashboard/src/app/views/myStories/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>header});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js"),__webpack_require__("./packages/react/src/index.ts")),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),utils=(__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/utils/useStoryView.js"),__webpack_require__("./packages/dashboard/src/utils/index.js")),shared=__webpack_require__("./packages/dashboard/src/app/views/shared/index.js"),views_utils=__webpack_require__("./packages/dashboard/src/app/views/utils/index.js"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),pill=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/pill/pill.tsx")),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts");const StyledPill=(0,__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").Ay)(pill.A).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(({theme,isActive})=>isActive?theme.colors.gray[20]:theme.colors.fg.tertiary));const storyStatusToggle=function StoryStatusToggle({initialPageReady,totalStoriesByStatus,currentStatus}){const{updateFilter,registerFilters}=(0,useStoryFilters.A)((({actions:{updateFilter,registerFilters}})=>({updateFilter,registerFilters}))),handleStatusChange=(0,src.hb)((value=>{updateFilter("status",{filterId:value})}),[updateFilter]);(0,src.vJ)((()=>{registerFilters([{key:"status",filterId:constants.q9.filters.status}])}),[registerFilters]);const totalStories=(0,src.Kr)((()=>Object.keys(totalStoriesByStatus).reduce(((prev,cur)=>prev+totalStoriesByStatus[cur]),0)),[totalStoriesByStatus]),statuses=(0,src.Kr)((()=>constants.h.filter((({status})=>Boolean(status in totalStoriesByStatus)&&totalStoriesByStatus[status]>0||status===currentStatus)).map((({label,status,value})=>{const count=totalStoriesByStatus[status],disabled=Boolean(!count);return{ariaLabel:(0,sprintf.A)((0,i18n.__)("Filter stories by %s","web-stories"),label),disabled,isActive:currentStatus===value,value,label,count}}))),[totalStoriesByStatus,currentStatus]);return!initialPageReady||!totalStories||totalStoriesByStatus&&0===Object.keys(totalStoriesByStatus).length?null:react.createElement(react.Fragment,null,statuses.map((({ariaLabel,disabled,isActive,value,label,count})=>react.createElement(StyledPill,{key:value,onClick:()=>handleStatusChange(value),isActive,disabled,"aria-label":ariaLabel},label,react.createElement("span",null,count)))))};const header=(0,src.ph)((function Header({initialPageReady,stories,totalStoriesByStatus,view}){const searchOptions=(0,src.Kr)((()=>(0,views_utils.Ds)(stories)),[stories]),{filters,sortObject,updateFilter,updateSort,registerFilters}=(0,useStoryFilters.A)((({state:{filters,sortObject},actions:{updateFilter,updateSort,registerFilters}})=>({filters,updateFilter,sortObject,updateSort,registerFilters}))),[dropDownFilters,statusFilterValue,searchFilterValue]=(0,src.Kr)((()=>{const status=filters.find((({key})=>"status"===key)),search=filters.find((({key})=>"search"===key));return[filters.filter((({key})=>!["status","search"].includes(key))),status?.filterId,search?.filterId]}),[filters]),totalResults=(0,src.Kr)((()=>(statusFilterValue?.split(",")||[]).reduce(((total,filterKey)=>total+(totalStoriesByStatus[filterKey]||0)),0)),[statusFilterValue,totalStoriesByStatus]),resultsLabel=(0,utils.qM)({currentFilter:statusFilterValue,isActiveSearch:Boolean(searchFilterValue),totalResults,view:constants.eZ.DASHBOARD}),debouncedSearchChange=(0,src.YQ)((async value=>{await(0,tracking_src.sx)("search",{search_type:"dashboard",search_term:value}),updateFilter("search",{filterId:value})}),constants.dQ);(0,src.vJ)((()=>{registerFilters([{key:"search"}])}),[registerFilters]);const clearSearch=(0,src.hb)((()=>updateFilter("search",{filterId:null})),[updateFilter]);return react.createElement(react.Fragment,null,react.createElement(shared.Av,{heading:(0,i18n.__)("Dashboard","web-stories"),searchPlaceholder:(0,i18n.__)("Search Stories","web-stories"),searchOptions,handleSearchChange:debouncedSearchChange,showSearch:initialPageReady,searchValue:searchFilterValue,onClear:clearSearch},react.createElement(storyStatusToggle,{initialPageReady,totalStoriesByStatus,currentStatus:statusFilterValue})),react.createElement(shared.WJ,{showGridToggle:!0,filters:dropDownFilters,showSortDropdown:!0,resultsLabel,layoutStyle:view.style,handleLayoutSelect:view.toggleStyle,pageSortOptions:constants.yA,pageSortDefaultOption:constants._r.LAST_MODIFIED,handleSortChange:updateSort,currentSort:sortObject}))}))},"./packages/dashboard/src/app/views/utils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hB:()=>utils_composeTemplateFilter,Ds:()=>utils_getSearchOptions,mK:()=>utils_getTemplateFilters});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const utils_getSearchOptions=function getSearchOptions(options){return options.reduce(((acc,option)=>!option.title||option?.title.trim().length<=0?acc:[...acc,{label:option.title,value:option.title}]),[])};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.flat-map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var uniqueEntriesByKey=__webpack_require__("./packages/design-system/src/utils/uniqueEntriesByKey.ts");const TEMPLATE_META_DATA_TYPES_VERTICAL="VERTICAL",TEMPLATE_META_DATA_TYPES_COLOR="COLOR",TEMPLATE_META_DATA_TYPES_TAG="TAG",TEMPLATE_META_DATA_TYPES_TITLE="TITLE";const utils_getTemplateFilters=function getTemplateFilters(templates){const templatesArr=Object.values(templates),colors=templatesArr.flatMap((t=>t.colors)).map((c=>({label:c.family,value:c.family,type:TEMPLATE_META_DATA_TYPES_COLOR}))),tags=templatesArr.flatMap((t=>t.tags)).map((tag=>({label:tag,value:tag,type:TEMPLATE_META_DATA_TYPES_TAG}))),verticals=templatesArr.map((t=>t.vertical)).map((vertical=>({label:vertical,value:vertical,type:TEMPLATE_META_DATA_TYPES_VERTICAL}))),title=templatesArr.map((t=>({label:t.title,value:t.title,type:TEMPLATE_META_DATA_TYPES_TITLE})));return[...(0,uniqueEntriesByKey.A)(tags,"label"),...(0,uniqueEntriesByKey.A)(colors,"label"),...(0,uniqueEntriesByKey.A)(verticals,"label"),...(0,uniqueEntriesByKey.A)(title,"label")]};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.some.js");const utils_composeTemplateFilter=function composeTemplateFilter(filters){return template=>!filters||filters.some((filter=>{switch(filter?.type){case TEMPLATE_META_DATA_TYPES_TAG:return template.tags.map((tag=>tag.toLowerCase())).includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_COLOR:return template.colors.map((color=>color.label.toLowerCase())).includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_VERTICAL:return template.vertical.toLowerCase().includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_TITLE:return template.title.toLowerCase().includes(filter.value.toLowerCase());default:return!0}}))}},"./packages/dashboard/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{sG:()=>app.sG,xh:()=>dashboard,ef:()=>components.ef,Du:()=>interfaceSkeleton,Zo:()=>components.Zo,dQ:()=>constants.dQ,m_:()=>components.m_,UK:()=>app.UK});var react=__webpack_require__("./node_modules/react/index.js"),deepMerge=__webpack_require__("./packages/design-system/src/utils/deepMerge.ts"),theme=__webpack_require__("./packages/design-system/src/theme/theme.ts"),colors=__webpack_require__("./packages/design-system/src/theme/colors.ts"),styles=__webpack_require__("./packages/design-system/src/theme/global/styles.ts"),modal_styles=__webpack_require__("./packages/design-system/src/components/modal/styles.ts"),snackbarProvider=__webpack_require__("./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx"),popupProvider=__webpack_require__("./packages/design-system/src/contexts/popup/popupProvider.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),stylis_rtl=__webpack_require__("./node_modules/stylis-plugin-rtl/dist/stylis-rtl.js"),flagged_esm=__webpack_require__("./packages/dashboard/node_modules/flagged/dist/flagged.esm.js"),app_config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),apiProvider=__webpack_require__("./packages/dashboard/src/app/api/apiProvider.js"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),router=__webpack_require__("./packages/dashboard/src/app/router/index.ts"),src_theme=__webpack_require__("./packages/dashboard/src/theme.js"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js");const src_getDefaultConfig=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});Object.defineProperty(stylis_rtl.Ay,"name",{value:"stylisRTLPlugin"});const dashboard=function Dashboard({config,children}){const _config=(0,deepMerge.A)(src_getDefaultConfig(),config),activeTheme={...theme.w,colors:colors.B},{isRTL,flags,styleConstants:{leftOffset,topOffset}={}}=_config;return react.createElement(flagged_esm.nT,{features:flags},react.createElement(styled_components_browser_esm.ID,{stylisPlugins:isRTL?[stylis_rtl.Ay]:[]},react.createElement(styled_components_browser_esm.NP,{theme:activeTheme},react.createElement(styles.P,null),react.createElement(modal_styles.E,null),react.createElement(app_config.s,{config:_config},react.createElement(apiProvider.A,null,react.createElement(components.Xk,null,react.createElement(router.pg,null,react.createElement(snackbarProvider.A,null,react.createElement(popupProvider.A,{value:{isRTL,leftOffset,topOffset}},react.createElement(src_theme.z,null),react.createElement(utils.eY,null),children)))))))))};var app=__webpack_require__("./packages/dashboard/src/app/index.js"),constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),src=(__webpack_require__("./packages/dashboard/src/app/views/shared/index.js"),__webpack_require__("./packages/dashboard/src/utils/keyboardOnlyOutline.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),snackbarContainer=__webpack_require__("./packages/design-system/src/components/snackbar/snackbarContainer.tsx"),useApi=__webpack_require__("./packages/dashboard/src/app/api/useApi.js"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),content=__webpack_require__("./packages/dashboard/src/app/views/myStories/content/index.js"),header=__webpack_require__("./packages/dashboard/src/app/views/myStories/header/index.js"),StoryFiltersProvider=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/StoryFiltersProvider/index.js");function MyStoriesView(){const{duplicateStory,fetchStories,trashStory,updateStory,allPagesFetched,isLoading,stories,storiesOrderById,totalPages,totalStoriesByStatus}=(0,useApi.A)((({actions:{storyApi:{duplicateStory,fetchStories,trashStory,updateStory}},state:{stories:{allPagesFetched,isLoading,stories,storiesOrderById,totalPages,totalStoriesByStatus}}})=>({duplicateStory,fetchStories,trashStory,updateStory,allPagesFetched,isLoading,stories,storiesOrderById,totalPages,totalStoriesByStatus}))),{filtersObject,sortObject}=(0,useStoryFilters.A)((({state:{filtersObject,sortObject}})=>({filtersObject,sortObject}))),{apiCallbacks,canViewDefaultTemplates}=(0,app_config.U)(),isMounted=(0,src.li)(!1);(0,src.vJ)((()=>(isMounted.current=!0,()=>{isMounted.current=!1})),[]);const{page,view,showStoriesWhileLoading,initialPageReady}=(0,utils.uO)({filtersObject,sortObject,isLoading,totalPages});(0,src.vJ)((()=>{fetchStories({page:page.value,filters:filtersObject,sort:sortObject})}),[fetchStories,filtersObject,sortObject,page.value,apiCallbacks]);const orderedStories=(0,src.Kr)((()=>storiesOrderById.map((storyId=>stories[storyId]))),[stories,storiesOrderById]);return react.createElement(components.PE.Provider,null,react.createElement(header.A,{initialPageReady,stories:orderedStories,totalStoriesByStatus,view}),react.createElement(content.A,{allPagesFetched,canViewDefaultTemplates,filtersObject,loading:{isLoading,showStoriesWhileLoading},page,stories:orderedStories,storyActions:{duplicateStory,trashStory,updateStory},view}),react.createElement(components.PE.Fixed,null,react.createElement(components.eq,null)))}function MyStories(){return react.createElement(StoryFiltersProvider.A,null,react.createElement(MyStoriesView,null))}__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.some.js");var useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),uniqueEntriesByKey=__webpack_require__("./packages/design-system/src/utils/uniqueEntriesByKey.ts"),useRouteHistory=__webpack_require__("./packages/dashboard/src/app/router/useRouteHistory.ts"),views_utils=__webpack_require__("./packages/dashboard/src/app/views/utils/index.js"),useTemplateFilters=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js"),exploreTemplates_content=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/content/index.js"),exploreTemplates_header=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/header/index.js"),modal=__webpack_require__("./packages/design-system/src/components/modal/modal.tsx"),templateDetails_header=(__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/header/index.js")),templateDetails_content=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/content/index.js");const exploreTemplates_modal=function TemplateDetailsModal({activeTemplateIndex,activeTemplate,filteredTemplatesLength,isDetailsViewOpen,templateActions}){const{isRTL,apiCallbacks}=(0,app_config.U)(),canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate),{handleDetailsToggle,switchToTemplateByOffset}=templateActions||{};return react.createElement(modal.A,{isOpen:isDetailsViewOpen,onClose:handleDetailsToggle,contentLabel:(0,sprintf.A)((0,i18n.__)("Template Details for %s","web-stories"),activeTemplate?.title),overlayStyles:{backgroundColor:`${theme.w.colors.opacity.overlayDark}`},contentStyles:{display:"block",height:"90vh",width:"90vw",backgroundColor:`${theme.w.colors.standard.white}`}},react.createElement(templateDetails_header.A,{templateTitle:activeTemplate?.title,templateId:activeTemplate?.id,templateActions,canCreateStory}),react.createElement(templateDetails_content.A,{activeTemplateIndex,isRTL,filteredTemplatesLength,switchToTemplateByOffset,template:activeTemplate}))};var TemplateFiltersProvider=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js");function ExploreTemplatesView(){const speak=(0,useLiveRegion.A)(),[isDetailsViewOpen,setIsDetailsViewOpen]=(0,src.J0)(!1),[activeTemplate,setActiveTemplate]=(0,src.J0)(null),[activeTemplateIndex,setActiveTemplateIndex]=(0,src.J0)(0),{templateIdParam,replace}=(0,useRouteHistory.A)((({actions,state})=>({templateIdParam:state.queryParams.id,replace:actions.replace}))),idRef=(0,src.li)(templateIdParam),{allPagesFetched,isLoading,templates,templatesOrderById,totalPages,totalTemplates,createStoryFromTemplate,fetchExternalTemplates}=(0,useApi.A)((({state:{templates:{allPagesFetched,isLoading,templates,templatesOrderById,totalPages,totalTemplates}},actions:{storyApi:{createStoryFromTemplate},templateApi:{fetchExternalTemplates}}})=>({allPagesFetched,isLoading,templates,templatesOrderById,totalPages,totalTemplates,createStoryFromTemplate,fetchExternalTemplates}))),{filters,sortObject,filtersObject}=(0,useTemplateFilters.A)((({state:{filters,sortObject,filtersObject}})=>({filters,sortObject,filtersObject}))),{page,view}=(0,utils.D)({filtersObject,sortObject,totalPages}),[searchFilterValue]=(0,src.Kr)((()=>{const search=filters.find((({key})=>"search"===key));return[search?.filterId]}),[filters]),templateFilters=(0,src.Kr)((()=>(0,views_utils.mK)(templates)),[templates]),selectFilters=(0,src.Kr)((()=>searchFilterValue?templateFilters.filter((opt=>opt.label.toLowerCase().includes(searchFilterValue.toLowerCase()))):templateFilters),[templateFilters,searchFilterValue]),orderedTemplates=(0,src.Kr)((()=>templatesOrderById.map((templateId=>templates[templateId])).filter((0,views_utils.hB)(selectFilters))),[templatesOrderById,templates,selectFilters]),totalVisibleTemplates=(0,src.Kr)((()=>totalTemplates!==orderedTemplates.length?orderedTemplates.length:totalTemplates),[orderedTemplates,totalTemplates]),searchOptions=(0,src.Kr)((()=>(0,uniqueEntriesByKey.A)(selectFilters,"label")),[selectFilters]),handleCreateStoryFromTemplate=(0,src.hb)((templateId=>{const template=templates[templateId];(0,tracking_src.sx)("use_template",{name:template.title,template_id:template.id}),createStoryFromTemplate(template)}),[createStoryFromTemplate,templates]),updateTemplateView=(0,src.hb)((id=>{const currentTemplate=orderedTemplates.find((templateItem=>templateItem.id===id));setActiveTemplate(currentTemplate),setActiveTemplateIndex(orderedTemplates.findIndex((template=>template.id===id))),idRef.current&&(idRef.current=void 0),replace(`?id=${currentTemplate.id}&isLocal=${currentTemplate.isLocal}`)}),[replace,orderedTemplates]),handleDetailsToggle=(0,src.hb)(((id,title)=>{setIsDetailsViewOpen((prevIsOpen=>{const newIsOpen=!prevIsOpen;return title&&(0,tracking_src.X3)(title),newIsOpen&&id&&updateTemplateView(id),newIsOpen||(replace(""),speak((0,i18n.__)("Exit detail templates view","web-stories"))),newIsOpen}))}),[replace,speak,updateTemplateView]),switchToTemplateByOffset=(0,src.hb)((offset=>{const newTemplate=orderedTemplates[offset];setActiveTemplate(newTemplate),setActiveTemplateIndex(offset),replace(`?id=${newTemplate.id}&isLocal=${newTemplate.isLocal}`),speak((0,sprintf.A)((0,i18n.__)("Viewing %s","web-stories"),newTemplate.title))}),[orderedTemplates,replace,speak]),templateActions=(0,src.Kr)((()=>({createStoryFromTemplate:handleCreateStoryFromTemplate,handleDetailsToggle,switchToTemplateByOffset})),[handleCreateStoryFromTemplate,handleDetailsToggle,switchToTemplateByOffset]);return(0,src.vJ)((()=>{fetchExternalTemplates()}),[fetchExternalTemplates]),(0,src.vJ)((()=>{if(idRef.current&&orderedTemplates.length){if(!orderedTemplates.some((template=>template.id===Number.parseInt(idRef.current))))return void replace("");setIsDetailsViewOpen(!0),updateTemplateView(Number.parseInt(idRef.current))}}),[orderedTemplates,replace,updateTemplateView]),react.createElement(components.PE.Provider,null,react.createElement(exploreTemplates_header.A,{isLoading:isLoading&&!totalTemplates,totalTemplates:totalVisibleTemplates,searchOptions,view}),react.createElement(exploreTemplates_content.A,{isLoading,allPagesFetched,page,templates:orderedTemplates,totalTemplates:totalVisibleTemplates,search:searchFilterValue,view,templateActions}),react.createElement(components.PE.Fixed,null,react.createElement(components.eq,null)),react.createElement(exploreTemplates_modal,{activeTemplate,activeTemplateIndex,isDetailsViewOpen,templateActions,filteredTemplatesLength:orderedTemplates.length}))}function ExploreTemplates(){return react.createElement(TemplateFiltersProvider.A,null,react.createElement(ExploreTemplatesView,null))}var pageStructure=__webpack_require__("./packages/dashboard/src/components/pageStructure/index.js"),useApiAlerts=__webpack_require__("./packages/dashboard/src/app/api/useApiAlerts.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const interfaceSkeleton=({additionalRoutes})=>{const{currentPath,templateId,availableRoutes}=(0,router.bG)((({state})=>({...state,templateId:state.queryParams.id}))),{push,setAvailableRoutes}=(0,router.bG)((({actions})=>actions)),{canViewDefaultTemplates,leftRailSecondaryNavigation=[],documentTitleSuffix=(0,i18n.__)("Web Stories","web-stories")}=(0,app_config.U)(),{addInitialFetchListener}=(0,useApi.A)((({actions:{storyApi:{addInitialFetchListener}},state:{templates:{templates}}})=>({currentTemplate:void 0!==templateId?templates[templateId]?.title:void 0,addInitialFetchListener}))),isFirstLoadOnMyStories=(0,src.li)(currentPath===constants.vc.DASHBOARD),[isRedirectComplete,setIsRedirectComplete]=(0,src.J0)(!isFirstLoadOnMyStories.current);(0,src.vJ)((()=>addInitialFetchListener?.((storyStatuses=>{storyStatuses?.all<=0&&isFirstLoadOnMyStories.current&&canViewDefaultTemplates&&(push(constants.vc.TEMPLATES_GALLERY),isFirstLoadOnMyStories.current=!1),setIsRedirectComplete(!0)}))),[addInitialFetchListener,push,currentPath,canViewDefaultTemplates]),(0,src.vJ)((()=>{if(availableRoutes.length>0)return;const additionalPaths=additionalRoutes?additionalRoutes.map((({path})=>path)):[];setAvailableRoutes([...Object.values(constants.vc),...additionalPaths])}),[additionalRoutes,availableRoutes.length,setAvailableRoutes]),(0,src.vJ)((()=>{if(!isRedirectComplete)return;const additionalRouteTitle=leftRailSecondaryNavigation.find((config=>config.value===currentPath)),dynamicPageTitle=constants.c9[currentPath]||additionalRouteTitle?.label||constants.c9.DEFAULT;document.title=(0,sprintf.A)((0,i18n.__)("%1$s â€¹ %2$s","web-stories"),dynamicPageTitle,documentTitleSuffix),(0,tracking_src.X3)(dynamicPageTitle)}),[currentPath,isRedirectComplete,leftRailSecondaryNavigation,documentTitleSuffix]),(0,useApiAlerts.A)();const{clearSnackbar,removeSnack,placement,currentSnacks}=(0,useSnackbar.d)(),prevPath=(0,src.ZC)(currentPath);return(0,src.vJ)((()=>{currentPath!==prevPath&&clearSnackbar()}),[clearSnackbar,currentPath,prevPath]),react.createElement(react.Fragment,null,react.createElement(pageStructure.Tv,null,react.createElement(pageStructure.IH,null),react.createElement(pageStructure.TK,null,availableRoutes.length>0&&react.createElement(react.Fragment,null,react.createElement(router.qh,{exact:!0,isDefault:!0,path:constants.vc.DASHBOARD,component:react.createElement(MyStories,null)}),canViewDefaultTemplates&&react.createElement(router.qh,{path:constants.vc.TEMPLATES_GALLERY,component:react.createElement(ExploreTemplates,null)}),additionalRoutes&&additionalRoutes.map((routeProps=>react.createElement(router.qh,_extends({key:routeProps.path},routeProps))))))),react.createElement(snackbarContainer.A,{notifications:currentSnacks,onRemove:removeSnack,placement,max:1}))}},"./packages/dashboard/node_modules/flagged/dist/flagged.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{iT:()=>useFeature,nT:()=>FlagsProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var FeatureFlagsContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function transformFlags(features){return Array.isArray(features)?Object.fromEntries(features.map((function(feature){return[feature,!0]}))):features}function FlagsProvider(_ref){var a,b,_ref$features=_ref.features,features=void 0===_ref$features?{}:_ref$features,children=_ref.children,currentFeatures=useFeatures();return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(FeatureFlagsContext.Provider,{value:(a=transformFlags(currentFeatures),b=transformFlags(features),_extends({},a,b))},children)}function useFeatures(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(FeatureFlagsContext)}function useFeature(name){var features=useFeatures();return Array.isArray(features)?features.includes(name):"boolean"==typeof features[name]?features[name]:name.split("/").reduce((function(featureGroup,featureName){return"boolean"==typeof featureGroup?featureGroup:void 0!==featureGroup[featureName]&&featureGroup[featureName]}),features)}}}]);