"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[926],{"./packages/dashboard/src/app/views/exploreTemplates/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),useGridViewKeys=__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),grid_components=__webpack_require__("./packages/dashboard/src/app/views/shared/grid/components.js");const CardWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],grid_components.Hf,grid_components.pk,grid_components.Hf,grid_components.pk,(({$isSelected})=>$isSelected?1:0)),TemplateDisplayContent=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),PicturePoster=(0,styled_components_browser_esm.Ay)(grid_components.O6).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme})=>theme.borders.radius.medium)),SeeDetailsButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme})=>theme.colors.standard.white)),TemplateGridItem=(0,src.Rf)(((t0,ref)=>{const $=(0,dist.c)(46),{onCreateStory,onFocus,height,id,isActive,posterSrc,slug,title,status,onSeeDetailsClick:t1}=t0,onSeeDetailsClick=void 0===t1?noop.l:t1,tabIndex=isActive?0:-1;let t2;$[0]!==title?(t2=(0,sprintf.A)((0,i18n.__)("First page of %s template","web-stories"),title),$[0]=title,$[1]=t2):t2=$[1];const posterAltText=t2,t3=`template-grid-item-${id}`,t4=`template-grid-item-${id}`,t5=posterSrc?.webp;let t6;$[2]!==t5?(t6=react.createElement("source",{srcSet:t5,type:"image/webp"}),$[2]=t5,$[3]=t6):t6=$[3];const t7=posterSrc?.png;let t8;$[4]!==t7?(t8=react.createElement("source",{srcSet:t7,type:"image/png"}),$[4]=t7,$[5]=t8):t8=$[5];const t9=posterSrc?.png;let t10,t11,t12,t13,t14;$[6]!==posterAltText||$[7]!==t9?(t10=react.createElement("img",{src:t9,alt:posterAltText,decoding:"async",width:src_constants.qs,height:src_constants.PO}),$[6]=posterAltText,$[7]=t9,$[8]=t10):t10=$[8],$[9]!==t10||$[10]!==t6||$[11]!==t8?(t11=react.createElement(PicturePoster,null,t6,t8,t10),$[9]=t10,$[10]=t6,$[11]=t8,$[12]=t11):t11=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t12=react.createElement(grid_components.Hf,null),$[13]=t12):t12=$[13],$[14]!==title?(t13=(0,sprintf.A)((0,i18n.__)("Go to detail view of %s","web-stories"),title),$[14]=title,$[15]=t13):t13=$[15],$[16]!==id||$[17]!==onSeeDetailsClick||$[18]!==title?(t14=()=>onSeeDetailsClick(id,title),$[16]=id,$[17]=onSeeDetailsClick,$[18]=title,$[19]=t14):t14=$[19];const t15=src_constants.ai[status];let t16,t17,t18,t19,t20,t21;return $[20]!==t13||$[21]!==t14||$[22]!==t15||$[23]!==tabIndex?(t16=react.createElement(SeeDetailsButton,{ariaLabel:t13,onClick:t14,className:"focus_template",tabIndex},t15),$[20]=t13,$[21]=t14,$[22]=t15,$[23]=tabIndex,$[24]=t16):t16=$[24],$[25]!==onCreateStory||$[26]!==tabIndex||$[27]!==title?(t17=onCreateStory&&react.createElement(button_button.$,{size:constants.Mp.Small,type:constants.VQ.Primary,onClick:onCreateStory,tabIndex,ariaLabel:(0,sprintf.A)((0,i18n.__)("Create new story from %s","web-stories"),title)},(0,i18n.__)("Use template","web-stories")),$[25]=onCreateStory,$[26]=tabIndex,$[27]=title,$[28]=t17):t17=$[28],$[29]!==t16||$[30]!==t17?(t18=react.createElement(TemplateDisplayContent,null,t16,t17),$[29]=t16,$[30]=t17,$[31]=t18):t18=$[31],$[32]!==slug||$[33]!==t18?(t19=react.createElement(grid_components.pk,{"data-testid":"card-action-container","data-template-slug":slug},t18),$[32]=slug,$[33]=t18,$[34]=t19):t19=$[34],$[35]!==isActive||$[36]!==t11||$[37]!==t19?(t20=react.createElement(grid_components.mc,null,react.createElement(CardWrapper,{$isSelected:isActive},t11,t12,t19)),$[35]=isActive,$[36]=t11,$[37]=t19,$[38]=t20):t20=$[38],$[39]!==height||$[40]!==onFocus||$[41]!==ref||$[42]!==t20||$[43]!==t3||$[44]!==t4?(t21=react.createElement(components.SG,{ref,id:t3,className:"templateGridItem","data-testid":t4,$posterHeight:height,onFocus},t20),$[39]=height,$[40]=onFocus,$[41]=ref,$[42]=t20,$[43]=t3,$[44]=t4,$[45]=t21):t21=$[45],t21}));TemplateGridItem.displayName="TemplateGridItem",TemplateGridItem.propTypes={detailLink:prop_types_default().string,onCreateStory:prop_types_default().func,onFocus:prop_types_default().func.isRequired,onSeeDetailsClick:prop_types_default().func,height:prop_types_default().number.isRequired,id:prop_types_default().number.isRequired,isActive:prop_types_default().bool,posterSrc:prop_types_default().shape({webp:prop_types_default().string.isRequired,png:prop_types_default().string.isRequired}),slug:prop_types_default().string.isRequired,status:prop_types_default().string.isRequired,title:prop_types_default().string.isRequired};const templateGridItem=TemplateGridItem;function TemplateGridView(t0){const $=(0,dist.c)(42),{pageSize,templates:filteredTemplates,templateActions}=t0,{isRTL,apiCallbacks}=(0,config.U)(),containerRef=(0,src.li)(),gridRef=(0,src.li)();let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1={},$[0]=t1):t1=$[0];const itemsRef=(0,src.li)(t1),[activeGridItemId,setActiveGridItemId]=(0,src.J0)(null);let t2;$[1]!==templateActions?(t2=templateActions||{},$[1]=templateActions,$[2]=t2):t2=$[2];const{handleDetailsToggle,createStoryFromTemplate}=t2,canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);let t3,t4,t5,t6,t7,t8,t9;$[3]!==activeGridItemId||$[4]!==containerRef||$[5]!==filteredTemplates||$[6]!==gridRef||$[7]!==isRTL||$[8]!==itemsRef?(t3={containerRef,gridRef,itemRefs:itemsRef,isRTL,currentItemId:activeGridItemId,items:filteredTemplates},$[3]=activeGridItemId,$[4]=containerRef,$[5]=filteredTemplates,$[6]=gridRef,$[7]=isRTL,$[8]=itemsRef,$[9]=t3):t3=$[9],(0,useGridViewKeys.A)(t3),$[10]!==activeGridItemId||$[11]!==itemsRef?(t4=()=>{activeGridItemId&&itemsRef.current?.[activeGridItemId]?.querySelector(".focus_template")?.focus()},$[10]=activeGridItemId,$[11]=itemsRef,$[12]=t4):t4=$[12],$[13]!==activeGridItemId?(t5=[activeGridItemId],$[13]=activeGridItemId,$[14]=t5):t5=$[14],(0,src.vJ)(t4,t5),$[15]!==setActiveGridItemId?(t6=()=>setActiveGridItemId(null),$[15]=setActiveGridItemId,$[16]=t6):t6=$[16],$[17]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[17]=t7):t7=$[17],(0,src.g$)(containerRef,t6,t7),$[18]!==activeGridItemId||$[19]!==canCreateStory||$[20]!==createStoryFromTemplate||$[21]!==filteredTemplates||$[22]!==handleDetailsToggle||$[23]!==itemsRef||$[24]!==pageSize.height||$[25]!==setActiveGridItemId?(t8=()=>filteredTemplates.map((t9=>{const{id,slug,status,title,postersByPage}=t9,isActive=activeGridItemId===id,posterSrc=postersByPage?.[0];return react.createElement(templateGridItem,{onCreateStory:canCreateStory?()=>createStoryFromTemplate(id):utils.lQ,onFocus:()=>{setActiveGridItemId(id)},onSeeDetailsClick:handleDetailsToggle,height:pageSize.height,id,isActive,key:slug,posterSrc,ref:el=>{itemsRef.current[id]=el},slug,status,title})})),$[18]=activeGridItemId,$[19]=canCreateStory,$[20]=createStoryFromTemplate,$[21]=filteredTemplates,$[22]=handleDetailsToggle,$[23]=itemsRef,$[24]=pageSize.height,$[25]=setActiveGridItemId,$[26]=t8):t8=$[26],$[27]!==activeGridItemId||$[28]!==canCreateStory||$[29]!==createStoryFromTemplate||$[30]!==filteredTemplates||$[31]!==handleDetailsToggle||$[32]!==pageSize.height?(t9=[filteredTemplates,activeGridItemId,canCreateStory,handleDetailsToggle,pageSize.height,createStoryFromTemplate],$[27]=activeGridItemId,$[28]=canCreateStory,$[29]=createStoryFromTemplate,$[30]=filteredTemplates,$[31]=handleDetailsToggle,$[32]=pageSize.height,$[33]=t9):t9=$[33];const memoizedTemplateItems=(0,src.Kr)(t8,t9);let t10,t11,t12;return $[34]===Symbol.for("react.memo_cache_sentinel")?(t10=(0,i18n.__)("Viewing available templates","web-stories"),$[34]=t10):t10=$[34],$[35]!==gridRef||$[36]!==memoizedTemplateItems||$[37]!==pageSize?(t11=react.createElement(components.pV,{pageSize,role:"list",ref:gridRef,ariaLabel:t10},memoizedTemplateItems),$[35]=gridRef,$[36]=memoizedTemplateItems,$[37]=pageSize,$[38]=t11):t11=$[38],$[39]!==containerRef||$[40]!==t11?(t12=react.createElement("div",{ref:containerRef},t11),$[39]=containerRef,$[40]=t11,$[41]=t12):t12=$[41],t12}TemplateGridItem.__docgenInfo={description:"",methods:[],displayName:"TemplateGridItem",props:{onSeeDetailsClick:{defaultValue:{value:"noop",computed:!0},description:"",type:{name:"func"},required:!1},detailLink:{description:"",type:{name:"string"},required:!1},onCreateStory:{description:"",type:{name:"func"},required:!1},onFocus:{description:"",type:{name:"func"},required:!0},height:{description:"",type:{name:"number"},required:!0},id:{description:"",type:{name:"number"},required:!0},isActive:{description:"",type:{name:"bool"},required:!1},posterSrc:{description:"",type:{name:"shape",value:{webp:{name:"string",required:!0},png:{name:"string",required:!0}}},required:!1},slug:{description:"",type:{name:"string"},required:!0},status:{description:"",type:{name:"string"},required:!0},title:{description:"",type:{name:"string"},required:!0}}};const templateGridView=TemplateGridView;function Content(t0){const $=(0,dist.c)(13),{allPagesFetched,isLoading,page,templates,view,totalTemplates,search,templateActions}=t0,{newStoryURL}=(0,config.U)();let t1,t2;$[0]!==allPagesFetched||$[1]!==isLoading||$[2]!==newStoryURL||$[3]!==page.requestNextPage||$[4]!==search||$[5]!==templateActions||$[6]!==templates||$[7]!==totalTemplates||$[8]!==view.pageSize?(t1=()=>isLoading?react.createElement(components.YM,null,react.createElement(loadingSpinner.A,null)):totalTemplates>0?react.createElement(react.Fragment,null,react.createElement(templateGridView,{templates,pageSize:view.pageSize,templateActions}),react.createElement(infiniteScroller.A,{canLoadMore:!allPagesFetched,isLoading,allDataLoadedMessage:(0,i18n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more templates","web-stories"),onLoadMore:page.requestNextPage})):react.createElement(shared.Gh,null,react.createElement(headline.$,{size:types.$.Small,as:"h3"},search?(0,sprintf.A)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):(0,i18n.__)("No templates currently available.","web-stories")),!search&&react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Medium,href:newStoryURL},(0,i18n.__)("Create New Story","web-stories"))),t2=[allPagesFetched,isLoading,newStoryURL,page.requestNextPage,templateActions,search,templates,totalTemplates,view.pageSize],$[0]=allPagesFetched,$[1]=isLoading,$[2]=newStoryURL,$[3]=page.requestNextPage,$[4]=search,$[5]=templateActions,$[6]=templates,$[7]=totalTemplates,$[8]=view.pageSize,$[9]=t1,$[10]=t2):(t1=$[9],t2=$[10]);const pageContent=(0,src.Kr)(t1,t2);let t3;return $[11]!==pageContent?(t3=react.createElement(components.PE.Scrollable,null,react.createElement(components.Zo,null,pageContent)),$[11]=pageContent,$[12]=t3):t3=$[12],t3}TemplateGridView.__docgenInfo={description:"",methods:[],displayName:"TemplateGridView",props:{pageSize:{description:"",type:{name:"shape",value:{width:{name:"number",required:!1},height:{name:"number",required:!1}}},required:!1},templates:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"TemplatePropType"}},required:!0},templateActions:{description:"",type:{name:"shape",value:{createStoryFromTemplate:{name:"func",required:!1},handleDetailsToggle:{name:"func",required:!1},switchToTemplateByOffset:{name:"func",required:!1}}},required:!1}}};const content=Content;Content.__docgenInfo={description:"",methods:[],displayName:"Content",props:{allPagesFetched:{description:"",type:{name:"bool"},required:!1},isLoading:{description:"",type:{name:"bool"},required:!1},page:{description:"",type:{name:"shape",value:{value:{name:"number",required:!1},set:{name:"func",required:!1},requestNextPage:{name:"func",required:!1}}},required:!1},templates:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"TemplatePropType"}},required:!0},totalTemplates:{description:"",type:{name:"number"},required:!1},search:{description:"",type:{name:"string"},required:!1},templateActions:{description:"",type:{name:"shape",value:{createStoryFromTemplate:{name:"func",required:!1},handleDetailsToggle:{name:"func",required:!1},switchToTemplateByOffset:{name:"func",required:!1}}},required:!1},view:{description:"",type:{name:"shape",value:{style:{name:"enum",value:[{value:'"grid"',computed:!1},{value:'"list"',computed:!1}],required:!1},pageSize:{name:"custom",raw:"PageSizePropType",required:!1}}},required:!1}}}}}]);