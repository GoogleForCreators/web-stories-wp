/*! For license information please see 4422.9fba97ed.iframe.bundle.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[4422],{"./node_modules/opentype.js/dist/opentype.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var defineProperty,codePointAt;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BoundingBox:()=>BoundingBox,Font:()=>Font,Glyph:()=>Glyph,Path:()=>Path,_parse:()=>parse,default:()=>__WEBPACK_DEFAULT_EXPORT__,load:()=>load,loadSync:()=>loadSync,parse:()=>parseBuffer}),String.prototype.codePointAt||(defineProperty=function(){try{var object={},$defineProperty=Object.defineProperty,result=$defineProperty(object,object,object)&&$defineProperty}catch(error){}return result}(),codePointAt=function(position){if(null==this)throw TypeError();var string=String(this),size=string.length,index=position?Number(position):0;if(index!=index&&(index=0),!(index<0||index>=size)){var second,first=string.charCodeAt(index);return first>=55296&&first<=56319&&size>index+1&&(second=string.charCodeAt(index+1))>=56320&&second<=57343?1024*(first-55296)+second-56320+65536:first}},defineProperty?defineProperty(String.prototype,"codePointAt",{value:codePointAt,configurable:!0,writable:!0}):String.prototype.codePointAt=codePointAt);function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Data(source,dest){this.source=source,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=dest,this.destLen=0,this.ltree=new Tree,this.dtree=new Tree}var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30),clcidx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),code_tree=new Tree,lengths=new Uint8Array(320);function tinf_build_bits_base(bits,base,delta,first){var i,sum;for(i=0;i<delta;++i)bits[i]=0;for(i=0;i<30-delta;++i)bits[i+delta]=i/delta|0;for(sum=first,i=0;i<30;++i)base[i]=sum,sum+=1<<bits[i]}var offs=new Uint16Array(16);function tinf_build_tree(t,lengths,off,num){var i,sum;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<num;++i)t.table[lengths[off+i]]++;for(t.table[0]=0,sum=0,i=0;i<16;++i)offs[i]=sum,sum+=t.table[i];for(i=0;i<num;++i)lengths[off+i]&&(t.trans[offs[lengths[off+i]]++]=i)}function tinf_getbit(d){d.bitcount--||(d.tag=d.source[d.sourceIndex++],d.bitcount=7);var bit=1&d.tag;return d.tag>>>=1,bit}function tinf_read_bits(d,num,base){if(!num)return base;for(;d.bitcount<24;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var val=d.tag&65535>>>16-num;return d.tag>>>=num,d.bitcount-=num,val+base}function tinf_decode_symbol(d,t){for(;d.bitcount<24;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var sum=0,cur=0,len=0,tag=d.tag;do{cur=2*cur+(1&tag),tag>>>=1,++len,sum+=t.table[len],cur-=t.table[len]}while(cur>=0);return d.tag=tag,d.bitcount-=len,t.trans[sum+cur]}function tinf_decode_trees(d,lt,dt){var hlit,hdist,hclen,i,num,length;for(hlit=tinf_read_bits(d,5,257),hdist=tinf_read_bits(d,5,1),hclen=tinf_read_bits(d,4,4),i=0;i<19;++i)lengths[i]=0;for(i=0;i<hclen;++i){var clen=tinf_read_bits(d,3,0);lengths[clcidx[i]]=clen}for(tinf_build_tree(code_tree,lengths,0,19),num=0;num<hlit+hdist;){var sym=tinf_decode_symbol(d,code_tree);switch(sym){case 16:var prev=lengths[num-1];for(length=tinf_read_bits(d,2,3);length;--length)lengths[num++]=prev;break;case 17:for(length=tinf_read_bits(d,3,3);length;--length)lengths[num++]=0;break;case 18:for(length=tinf_read_bits(d,7,11);length;--length)lengths[num++]=0;break;default:lengths[num++]=sym}}tinf_build_tree(lt,lengths,0,hlit),tinf_build_tree(dt,lengths,hlit,hdist)}function tinf_inflate_block_data(d,lt,dt){for(;;){var length,dist,offs,i,sym=tinf_decode_symbol(d,lt);if(256===sym)return 0;if(sym<256)d.dest[d.destLen++]=sym;else for(length=tinf_read_bits(d,length_bits[sym-=257],length_base[sym]),dist=tinf_decode_symbol(d,dt),i=offs=d.destLen-tinf_read_bits(d,dist_bits[dist],dist_base[dist]);i<offs+length;++i)d.dest[d.destLen++]=d.dest[i]}}function tinf_inflate_uncompressed_block(d){for(var length,i;d.bitcount>8;)d.sourceIndex--,d.bitcount-=8;if((length=256*(length=d.source[d.sourceIndex+1])+d.source[d.sourceIndex])!==(65535&~(256*d.source[d.sourceIndex+3]+d.source[d.sourceIndex+2])))return-3;for(d.sourceIndex+=4,i=length;i;--i)d.dest[d.destLen++]=d.source[d.sourceIndex++];return d.bitcount=0,0}!function tinf_build_fixed_trees(lt,dt){var i;for(i=0;i<7;++i)lt.table[i]=0;for(lt.table[7]=24,lt.table[8]=152,lt.table[9]=112,i=0;i<24;++i)lt.trans[i]=256+i;for(i=0;i<144;++i)lt.trans[24+i]=i;for(i=0;i<8;++i)lt.trans[168+i]=280+i;for(i=0;i<112;++i)lt.trans[176+i]=144+i;for(i=0;i<5;++i)dt.table[i]=0;for(dt.table[5]=32,i=0;i<32;++i)dt.trans[i]=i}(sltree,sdtree),tinf_build_bits_base(length_bits,length_base,4,3),tinf_build_bits_base(dist_bits,dist_base,2,1),length_bits[28]=0,length_base[28]=258;var tinyInflate=function tinf_uncompress(source,dest){var bfinal,res,d=new Data(source,dest);do{switch(bfinal=tinf_getbit(d),tinf_read_bits(d,2,0)){case 0:res=tinf_inflate_uncompressed_block(d);break;case 1:res=tinf_inflate_block_data(d,sltree,sdtree);break;case 2:tinf_decode_trees(d,d.ltree,d.dtree),res=tinf_inflate_block_data(d,d.ltree,d.dtree);break;default:res=-3}if(0!==res)throw new Error("Data error")}while(!bfinal);return d.destLen<d.dest.length?"function"==typeof d.dest.slice?d.dest.slice(0,d.destLen):d.dest.subarray(0,d.destLen):d.dest};function derive(v0,v1,v2,v3,t){return Math.pow(1-t,3)*v0+3*Math.pow(1-t,2)*t*v1+3*(1-t)*Math.pow(t,2)*v2+Math.pow(t,3)*v3}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function fail(message){throw new Error(message)}function argument(predicate,message){predicate||fail(message)}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},BoundingBox.prototype.addPoint=function(x,y){"number"==typeof x&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=x,this.x2=x),x<this.x1&&(this.x1=x),x>this.x2&&(this.x2=x)),"number"==typeof y&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=y,this.y2=y),y<this.y1&&(this.y1=y),y>this.y2&&(this.y2=y))},BoundingBox.prototype.addX=function(x){this.addPoint(x,null)},BoundingBox.prototype.addY=function(y){this.addPoint(null,y)},BoundingBox.prototype.addBezier=function(x0,y0,x1,y1,x2,y2,x,y){var p0=[x0,y0],p1=[x1,y1],p2=[x2,y2],p3=[x,y];this.addPoint(x0,y0),this.addPoint(x,y);for(var i=0;i<=1;i++){var b=6*p0[i]-12*p1[i]+6*p2[i],a=-3*p0[i]+9*p1[i]-9*p2[i]+3*p3[i],c=3*p1[i]-3*p0[i];if(0!==a){var b2ac=Math.pow(b,2)-4*c*a;if(!(b2ac<0)){var t1=(-b+Math.sqrt(b2ac))/(2*a);0<t1&&t1<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t1)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t1)));var t2=(-b-Math.sqrt(b2ac))/(2*a);0<t2&&t2<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t2)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t2)))}}else{if(0===b)continue;var t=-c/b;0<t&&t<1&&(0===i&&this.addX(derive(p0[i],p1[i],p2[i],p3[i],t)),1===i&&this.addY(derive(p0[i],p1[i],p2[i],p3[i],t)))}}},BoundingBox.prototype.addQuad=function(x0,y0,x1,y1,x,y){var cp1x=x0+2/3*(x1-x0),cp1y=y0+2/3*(y1-y0),cp2x=cp1x+1/3*(x-x0),cp2y=cp1y+1/3*(y-y0);this.addBezier(x0,y0,cp1x,cp1y,cp2x,cp2y,x,y)},Path.prototype.moveTo=function(x,y){this.commands.push({type:"M",x,y})},Path.prototype.lineTo=function(x,y){this.commands.push({type:"L",x,y})},Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(x1,y1,x2,y2,x,y){this.commands.push({type:"C",x1,y1,x2,y2,x,y})},Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(x1,y1,x,y){this.commands.push({type:"Q",x1,y1,x,y})},Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})},Path.prototype.extend=function(pathOrCommands){if(pathOrCommands.commands)pathOrCommands=pathOrCommands.commands;else if(pathOrCommands instanceof BoundingBox){var box=pathOrCommands;return this.moveTo(box.x1,box.y1),this.lineTo(box.x2,box.y1),this.lineTo(box.x2,box.y2),this.lineTo(box.x1,box.y2),void this.close()}Array.prototype.push.apply(this.commands,pathOrCommands)},Path.prototype.getBoundingBox=function(){for(var box=new BoundingBox,startX=0,startY=0,prevX=0,prevY=0,i=0;i<this.commands.length;i++){var cmd=this.commands[i];switch(cmd.type){case"M":box.addPoint(cmd.x,cmd.y),startX=prevX=cmd.x,startY=prevY=cmd.y;break;case"L":box.addPoint(cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"Q":box.addQuad(prevX,prevY,cmd.x1,cmd.y1,cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"C":box.addBezier(prevX,prevY,cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y),prevX=cmd.x,prevY=cmd.y;break;case"Z":prevX=startX,prevY=startY;break;default:throw new Error("Unexpected path command "+cmd.type)}}return box.isEmpty()&&box.addPoint(0,0),box},Path.prototype.draw=function(ctx){ctx.beginPath();for(var i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?ctx.moveTo(cmd.x,cmd.y):"L"===cmd.type?ctx.lineTo(cmd.x,cmd.y):"C"===cmd.type?ctx.bezierCurveTo(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?ctx.quadraticCurveTo(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&ctx.closePath()}this.fill&&(ctx.fillStyle=this.fill,ctx.fill()),this.stroke&&(ctx.strokeStyle=this.stroke,ctx.lineWidth=this.strokeWidth,ctx.stroke())},Path.prototype.toPathData=function(decimalPlaces){function floatToString(v){return Math.round(v)===v?""+Math.round(v):v.toFixed(decimalPlaces)}function packValues(){for(var arguments$1=arguments,s="",i=0;i<arguments.length;i+=1){var v=arguments$1[i];v>=0&&i>0&&(s+=" "),s+=floatToString(v)}return s}decimalPlaces=void 0!==decimalPlaces?decimalPlaces:2;for(var d="",i=0;i<this.commands.length;i+=1){var cmd=this.commands[i];"M"===cmd.type?d+="M"+packValues(cmd.x,cmd.y):"L"===cmd.type?d+="L"+packValues(cmd.x,cmd.y):"C"===cmd.type?d+="C"+packValues(cmd.x1,cmd.y1,cmd.x2,cmd.y2,cmd.x,cmd.y):"Q"===cmd.type?d+="Q"+packValues(cmd.x1,cmd.y1,cmd.x,cmd.y):"Z"===cmd.type&&(d+="Z")}return d},Path.prototype.toSVG=function(decimalPlaces){var svg='<path d="';return svg+=this.toPathData(decimalPlaces),svg+='"',this.fill&&"black"!==this.fill&&(null===this.fill?svg+=' fill="none"':svg+=' fill="'+this.fill+'"'),this.stroke&&(svg+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),svg+="/>"},Path.prototype.toDOMElement=function(decimalPlaces){var temporaryPath=this.toPathData(decimalPlaces),newPath=document.createElementNS("http://www.w3.org/2000/svg","path");return newPath.setAttribute("d",temporaryPath),newPath};var check={fail,argument,assert:argument},decode={},encode={},sizeOf={};function constant(v){return function(){return v}}encode.BYTE=function(v){return check.argument(v>=0&&v<=255,"Byte value should be between 0 and 255."),[v]},sizeOf.BYTE=constant(1),encode.CHAR=function(v){return[v.charCodeAt(0)]},sizeOf.CHAR=constant(1),encode.CHARARRAY=function(v){void 0===v&&(v="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var b=[],i=0;i<v.length;i+=1)b[i]=v.charCodeAt(i);return b},sizeOf.CHARARRAY=function(v){return void 0===v?0:v.length},encode.USHORT=function(v){return[v>>8&255,255&v]},sizeOf.USHORT=constant(2),encode.SHORT=function(v){return v>=32768&&(v=-(65536-v)),[v>>8&255,255&v]},sizeOf.SHORT=constant(2),encode.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},sizeOf.UINT24=constant(3),encode.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.ULONG=constant(4),encode.LONG=function(v){return v>=2147483648&&(v=-(4294967296-v)),[v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.LONG=constant(4),encode.FIXED=encode.ULONG,sizeOf.FIXED=sizeOf.ULONG,encode.FWORD=encode.SHORT,sizeOf.FWORD=sizeOf.SHORT,encode.UFWORD=encode.USHORT,sizeOf.UFWORD=sizeOf.USHORT,encode.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.LONGDATETIME=constant(8),encode.TAG=function(v){return check.argument(4===v.length,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},sizeOf.TAG=constant(4),encode.Card8=encode.BYTE,sizeOf.Card8=sizeOf.BYTE,encode.Card16=encode.USHORT,sizeOf.Card16=sizeOf.USHORT,encode.OffSize=encode.BYTE,sizeOf.OffSize=sizeOf.BYTE,encode.SID=encode.USHORT,sizeOf.SID=sizeOf.USHORT,encode.NUMBER=function(v){return v>=-107&&v<=107?[v+139]:v>=108&&v<=1131?[247+((v-=108)>>8),255&v]:v>=-1131&&v<=-108?[251+((v=-v-108)>>8),255&v]:v>=-32768&&v<=32767?encode.NUMBER16(v):encode.NUMBER32(v)},sizeOf.NUMBER=function(v){return encode.NUMBER(v).length},encode.NUMBER16=function(v){return[28,v>>8&255,255&v]},sizeOf.NUMBER16=constant(3),encode.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},sizeOf.NUMBER32=constant(5),encode.REAL=function(v){var value=v.toString(),m=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(value);if(m){var epsilon=parseFloat("1e"+((m[2]?+m[2]:0)+m[1].length));value=(Math.round(v*epsilon)/epsilon).toString()}for(var nibbles="",i=0,ii=value.length;i<ii;i+=1){var c=value[i];nibbles+="e"===c?"-"===value[++i]?"c":"b":"."===c?"a":"-"===c?"e":c}for(var out=[30],i$1=0,ii$1=(nibbles+=1&nibbles.length?"f":"ff").length;i$1<ii$1;i$1+=2)out.push(parseInt(nibbles.substr(i$1,2),16));return out},sizeOf.REAL=function(v){return encode.REAL(v).length},encode.NAME=encode.CHARARRAY,sizeOf.NAME=sizeOf.CHARARRAY,encode.STRING=encode.CHARARRAY,sizeOf.STRING=sizeOf.CHARARRAY,decode.UTF8=function(data,offset,numBytes){for(var codePoints=[],numChars=numBytes,j=0;j<numChars;j++,offset+=1)codePoints[j]=data.getUint8(offset);return String.fromCharCode.apply(null,codePoints)},decode.UTF16=function(data,offset,numBytes){for(var codePoints=[],numChars=numBytes/2,j=0;j<numChars;j++,offset+=2)codePoints[j]=data.getUint16(offset);return String.fromCharCode.apply(null,codePoints)},encode.UTF16=function(v){for(var b=[],i=0;i<v.length;i+=1){var codepoint=v.charCodeAt(i);b[b.length]=codepoint>>8&255,b[b.length]=255&codepoint}return b},sizeOf.UTF16=function(v){return 2*v.length};var eightBitMacEncodings={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};decode.MACSTRING=function(dataView,offset,dataLength,encoding){var table=eightBitMacEncodings[encoding];if(void 0!==table){for(var result="",i=0;i<dataLength;i++){var c=dataView.getUint8(offset+i);result+=c<=127?String.fromCharCode(c):table[127&c]}return result}};var macEncodingCacheKeys,macEncodingTableCache="function"==typeof WeakMap&&new WeakMap;function isByteEncodable(value){return value>=-128&&value<=127}function encodeVarDeltaRunAsZeroes(deltas,pos,result){for(var runLength=0,numDeltas=deltas.length;pos<numDeltas&&runLength<64&&0===deltas[pos];)++pos,++runLength;return result.push(128|runLength-1),pos}function encodeVarDeltaRunAsBytes(deltas,offset,result){for(var runLength=0,numDeltas=deltas.length,pos=offset;pos<numDeltas&&runLength<64;){var value=deltas[pos];if(!isByteEncodable(value))break;if(0===value&&pos+1<numDeltas&&0===deltas[pos+1])break;++pos,++runLength}result.push(runLength-1);for(var i=offset;i<pos;++i)result.push(deltas[i]+256&255);return pos}function encodeVarDeltaRunAsWords(deltas,offset,result){for(var runLength=0,numDeltas=deltas.length,pos=offset;pos<numDeltas&&runLength<64;){var value=deltas[pos];if(0===value)break;if(isByteEncodable(value)&&pos+1<numDeltas&&isByteEncodable(deltas[pos+1]))break;++pos,++runLength}result.push(64|runLength-1);for(var i=offset;i<pos;++i){var val=deltas[i];result.push(val+65536>>8&255,val+256&255)}return pos}encode.MACSTRING=function(str,encoding){var table=function(encoding){if(!macEncodingCacheKeys)for(var e in macEncodingCacheKeys={},eightBitMacEncodings)macEncodingCacheKeys[e]=new String(e);var cacheKey=macEncodingCacheKeys[encoding];if(void 0!==cacheKey){if(macEncodingTableCache){var cachedTable=macEncodingTableCache.get(cacheKey);if(void 0!==cachedTable)return cachedTable}var decodingTable=eightBitMacEncodings[encoding];if(void 0!==decodingTable){for(var encodingTable={},i=0;i<decodingTable.length;i++)encodingTable[decodingTable.charCodeAt(i)]=i+128;return macEncodingTableCache&&macEncodingTableCache.set(cacheKey,encodingTable),encodingTable}}}(encoding);if(void 0!==table){for(var result=[],i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c>=128&&void 0===(c=table[c]))return;result[i]=c}return result}},sizeOf.MACSTRING=function(str,encoding){var b=encode.MACSTRING(str,encoding);return void 0!==b?b.length:0},encode.VARDELTAS=function(deltas){for(var pos=0,result=[];pos<deltas.length;){var value=deltas[pos];pos=0===value?encodeVarDeltaRunAsZeroes(deltas,pos,result):value>=-128&&value<=127?encodeVarDeltaRunAsBytes(deltas,pos,result):encodeVarDeltaRunAsWords(deltas,pos,result)}return result},encode.INDEX=function(l){for(var offset=1,offsets=[offset],data=[],i=0;i<l.length;i+=1){var v=encode.OBJECT(l[i]);Array.prototype.push.apply(data,v),offset+=v.length,offsets.push(offset)}if(0===data.length)return[0,0];for(var encodedOffsets=[],offSize=1+Math.floor(Math.log(offset)/Math.log(2))/8|0,offsetEncoder=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][offSize],i$1=0;i$1<offsets.length;i$1+=1){var encodedOffset=offsetEncoder(offsets[i$1]);Array.prototype.push.apply(encodedOffsets,encodedOffset)}return Array.prototype.concat(encode.Card16(l.length),encode.OffSize(offSize),encodedOffsets,data)},sizeOf.INDEX=function(v){return encode.INDEX(v).length},encode.DICT=function(m){for(var d=[],keys=Object.keys(m),length=keys.length,i=0;i<length;i+=1){var k=parseInt(keys[i],0),v=m[k];d=(d=d.concat(encode.OPERAND(v.value,v.type))).concat(encode.OPERATOR(k))}return d},sizeOf.DICT=function(m){return encode.DICT(m).length},encode.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},encode.OPERAND=function(v,type){var d=[];if(Array.isArray(type))for(var i=0;i<type.length;i+=1)check.argument(v.length===type.length,"Not enough arguments given for type"+type),d=d.concat(encode.OPERAND(v[i],type[i]));else if("SID"===type)d=d.concat(encode.NUMBER(v));else if("offset"===type)d=d.concat(encode.NUMBER32(v));else if("number"===type)d=d.concat(encode.NUMBER(v));else{if("real"!==type)throw new Error("Unknown operand type "+type);d=d.concat(encode.REAL(v))}return d},encode.OP=encode.BYTE,sizeOf.OP=sizeOf.BYTE;var wmm="function"==typeof WeakMap&&new WeakMap;function Table(tableName,fields,options){if(fields.length&&("coverageFormat"!==fields[0].name||1===fields[0].value))for(var i=0;i<fields.length;i+=1){var field=fields[i];this[field.name]=field.value}if(this.tableName=tableName,this.fields=fields,options)for(var optionKeys=Object.keys(options),i$1=0;i$1<optionKeys.length;i$1+=1){var k=optionKeys[i$1],v=options[k];void 0!==this[k]&&(this[k]=v)}}function ushortList(itemName,list,count){void 0===count&&(count=list.length);var fields=new Array(list.length+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<list.length;i++)fields[i+1]={name:itemName+i,type:"USHORT",value:list[i]};return fields}function tableList(itemName,records,itemCallback){var count=records.length,fields=new Array(count+1);fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<count;i++)fields[i+1]={name:itemName+i,type:"TABLE",value:itemCallback(records[i],i)};return fields}function recordList(itemName,records,itemCallback){var count=records.length,fields=[];fields[0]={name:itemName+"Count",type:"USHORT",value:count};for(var i=0;i<count;i++)fields=fields.concat(itemCallback(records[i],i));return fields}function Coverage(coverageTable){1===coverageTable.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",coverageTable.glyphs))):2===coverageTable.format?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(recordList("rangeRecord",coverageTable.ranges,(function(RangeRecord){return[{name:"startGlyphID",type:"USHORT",value:RangeRecord.start},{name:"endGlyphID",type:"USHORT",value:RangeRecord.end},{name:"startCoverageIndex",type:"USHORT",value:RangeRecord.index}]})))):check.assert(!1,"Coverage format must be 1 or 2.")}function ScriptList(scriptListTable){Table.call(this,"scriptListTable",recordList("scriptRecord",scriptListTable,(function(scriptRecord,i){var script=scriptRecord.script,defaultLangSys=script.defaultLangSys;return check.assert(!!defaultLangSys,"Unable to write GSUB: script "+scriptRecord.tag+" has no default language system."),[{name:"scriptTag"+i,type:"TAG",value:scriptRecord.tag},{name:"script"+i,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:defaultLangSys.reqFeatureIndex}].concat(ushortList("featureIndex",defaultLangSys.featureIndexes)))}].concat(recordList("langSys",script.langSysRecords,(function(langSysRecord,i){var langSys=langSysRecord.langSys;return[{name:"langSysTag"+i,type:"TAG",value:langSysRecord.tag},{name:"langSys"+i,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:langSys.reqFeatureIndex}].concat(ushortList("featureIndex",langSys.featureIndexes)))}]}))))}]})))}function FeatureList(featureListTable){Table.call(this,"featureListTable",recordList("featureRecord",featureListTable,(function(featureRecord,i){var feature=featureRecord.feature;return[{name:"featureTag"+i,type:"TAG",value:featureRecord.tag},{name:"feature"+i,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:feature.featureParams}].concat(ushortList("lookupListIndex",feature.lookupListIndexes)))}]})))}function LookupList(lookupListTable,subtableMakers){Table.call(this,"lookupListTable",tableList("lookup",lookupListTable,(function(lookupTable){var subtableCallback=subtableMakers[lookupTable.lookupType];return check.assert(!!subtableCallback,"Unable to write GSUB lookup type "+lookupTable.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:lookupTable.lookupType},{name:"lookupFlag",type:"USHORT",value:lookupTable.lookupFlag}].concat(tableList("subtable",lookupTable.subtables,subtableCallback)))})))}encode.CHARSTRING=function(ops){if(wmm){var cachedValue=wmm.get(ops);if(void 0!==cachedValue)return cachedValue}for(var d=[],length=ops.length,i=0;i<length;i+=1){var op=ops[i];d=d.concat(encode[op.type](op.value))}return wmm&&wmm.set(ops,d),d},sizeOf.CHARSTRING=function(ops){return encode.CHARSTRING(ops).length},encode.OBJECT=function(v){var encodingFunction=encode[v.type];return check.argument(void 0!==encodingFunction,"No encoding function for type "+v.type),encodingFunction(v.value)},sizeOf.OBJECT=function(v){var sizeOfFunction=sizeOf[v.type];return check.argument(void 0!==sizeOfFunction,"No sizeOf function for type "+v.type),sizeOfFunction(v.value)},encode.TABLE=function(table){for(var d=[],length=table.fields.length,subtables=[],subtableOffsets=[],i=0;i<length;i+=1){var field=table.fields[i],encodingFunction=encode[field.type];check.argument(void 0!==encodingFunction,"No encoding function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value);var bytes=encodingFunction(value);"TABLE"===field.type?(subtableOffsets.push(d.length),d=d.concat([0,0]),subtables.push(bytes)):d=d.concat(bytes)}for(var i$1=0;i$1<subtables.length;i$1+=1){var o=subtableOffsets[i$1],offset=d.length;check.argument(offset<65536,"Table "+table.tableName+" too big."),d[o]=offset>>8,d[o+1]=255&offset,d=d.concat(subtables[i$1])}return d},sizeOf.TABLE=function(table){for(var numBytes=0,length=table.fields.length,i=0;i<length;i+=1){var field=table.fields[i],sizeOfFunction=sizeOf[field.type];check.argument(void 0!==sizeOfFunction,"No sizeOf function for field type "+field.type+" ("+field.name+")");var value=table[field.name];void 0===value&&(value=field.value),numBytes+=sizeOfFunction(value),"TABLE"===field.type&&(numBytes+=2)}return numBytes},encode.RECORD=encode.TABLE,sizeOf.RECORD=sizeOf.TABLE,encode.LITERAL=function(v){return v},sizeOf.LITERAL=function(v){return v.length},Table.prototype.encode=function(){return encode.TABLE(this)},Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)},Coverage.prototype=Object.create(Table.prototype),Coverage.prototype.constructor=Coverage,ScriptList.prototype=Object.create(Table.prototype),ScriptList.prototype.constructor=ScriptList,FeatureList.prototype=Object.create(Table.prototype),FeatureList.prototype.constructor=FeatureList,LookupList.prototype=Object.create(Table.prototype),LookupList.prototype.constructor=LookupList;var table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(dataView,offset){return dataView.getUint8(offset)}function getUShort(dataView,offset){return dataView.getUint16(offset,!1)}function getULong(dataView,offset){return dataView.getUint32(offset,!1)}function getFixed(dataView,offset){return dataView.getInt16(offset,!1)+dataView.getUint16(offset+2,!1)/65535}var typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser(data,offset){this.data=data,this.offset=offset,this.relativeOffset=0}Parser.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},Parser.prototype.parseCard8=Parser.prototype.parseByte,Parser.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseCard16=Parser.prototype.parseUShort,Parser.prototype.parseSID=Parser.prototype.parseUShort,Parser.prototype.parseOffset16=Parser.prototype.parseUShort,Parser.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},Parser.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},Parser.prototype.parseULong=function(){var v=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseOffset32=Parser.prototype.parseULong,Parser.prototype.parseFixed=function(){var v=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},Parser.prototype.parseString=function(length){var dataView=this.data,offset=this.offset+this.relativeOffset,string="";this.relativeOffset+=length;for(var i=0;i<length;i++)string+=String.fromCharCode(dataView.getUint8(offset+i));return string},Parser.prototype.parseTag=function(){return this.parseString(4)},Parser.prototype.parseLongDateTime=function(){var v=getULong(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},Parser.prototype.parseVersion=function(minorBase){var major=getUShort(this.data,this.offset+this.relativeOffset),minor=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===minorBase&&(minorBase=4096),major+minor/minorBase/10},Parser.prototype.skip=function(type,amount){void 0===amount&&(amount=1),this.relativeOffset+=typeOffsets[type]*amount},Parser.prototype.parseULongList=function(count){void 0===count&&(count=this.parseULong());for(var offsets=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint32(offset),offset+=4;return this.relativeOffset+=4*count,offsets},Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(count){void 0===count&&(count=this.parseUShort());for(var offsets=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)offsets[i]=dataView.getUint16(offset),offset+=2;return this.relativeOffset+=2*count,offsets},Parser.prototype.parseShortList=function(count){for(var list=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getInt16(offset),offset+=2;return this.relativeOffset+=2*count,list},Parser.prototype.parseByteList=function(count){for(var list=new Array(count),dataView=this.data,offset=this.offset+this.relativeOffset,i=0;i<count;i++)list[i]=dataView.getUint8(offset++);return this.relativeOffset+=count,list},Parser.prototype.parseList=function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseUShort());for(var list=new Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list},Parser.prototype.parseList32=function(count,itemCallback){itemCallback||(itemCallback=count,count=this.parseULong());for(var list=new Array(count),i=0;i<count;i++)list[i]=itemCallback.call(this);return list},Parser.prototype.parseRecordList=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseUShort());for(var records=new Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=recordDescription[fieldName];rec[fieldName]=fieldType.call(this)}records[i]=rec}return records},Parser.prototype.parseRecordList32=function(count,recordDescription){recordDescription||(recordDescription=count,count=this.parseULong());for(var records=new Array(count),fields=Object.keys(recordDescription),i=0;i<count;i++){for(var rec={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=recordDescription[fieldName];rec[fieldName]=fieldType.call(this)}records[i]=rec}return records},Parser.prototype.parseStruct=function(description){if("function"==typeof description)return description.call(this);for(var fields=Object.keys(description),struct={},j=0;j<fields.length;j++){var fieldName=fields[j],fieldType=description[fieldName];struct[fieldName]=fieldType.call(this)}return struct},Parser.prototype.parseValueRecord=function(valueFormat){if(void 0===valueFormat&&(valueFormat=this.parseUShort()),0!==valueFormat){var valueRecord={};return 1&valueFormat&&(valueRecord.xPlacement=this.parseShort()),2&valueFormat&&(valueRecord.yPlacement=this.parseShort()),4&valueFormat&&(valueRecord.xAdvance=this.parseShort()),8&valueFormat&&(valueRecord.yAdvance=this.parseShort()),16&valueFormat&&(valueRecord.xPlaDevice=void 0,this.parseShort()),32&valueFormat&&(valueRecord.yPlaDevice=void 0,this.parseShort()),64&valueFormat&&(valueRecord.xAdvDevice=void 0,this.parseShort()),128&valueFormat&&(valueRecord.yAdvDevice=void 0,this.parseShort()),valueRecord}},Parser.prototype.parseValueRecordList=function(){for(var valueFormat=this.parseUShort(),valueCount=this.parseUShort(),values=new Array(valueCount),i=0;i<valueCount;i++)values[i]=this.parseValueRecord(valueFormat);return values},Parser.prototype.parsePointer=function(description){var structOffset=this.parseOffset16();if(structOffset>0)return new Parser(this.data,this.offset+structOffset).parseStruct(description)},Parser.prototype.parsePointer32=function(description){var structOffset=this.parseOffset32();if(structOffset>0)return new Parser(this.data,this.offset+structOffset).parseStruct(description)},Parser.prototype.parseListOfLists=function(itemCallback){for(var offsets=this.parseOffset16List(),count=offsets.length,relativeOffset=this.relativeOffset,list=new Array(count),i=0;i<count;i++){var start=offsets[i];if(0!==start)if(this.relativeOffset=start,itemCallback){for(var subOffsets=this.parseOffset16List(),subList=new Array(subOffsets.length),j=0;j<subOffsets.length;j++)this.relativeOffset=start+subOffsets[j],subList[j]=itemCallback.call(this);list[i]=subList}else list[i]=this.parseUShortList();else list[i]=void 0}return this.relativeOffset=relativeOffset,list},Parser.prototype.parseCoverage=function(){var startOffset=this.offset+this.relativeOffset,format=this.parseUShort(),count=this.parseUShort();if(1===format)return{format:1,glyphs:this.parseUShortList(count)};if(2===format){for(var ranges=new Array(count),i=0;i<count;i++)ranges[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges}}throw new Error("0x"+startOffset.toString(16)+": Coverage format must be 1 or 2.")},Parser.prototype.parseClassDef=function(){var startOffset=this.offset+this.relativeOffset,format=this.parseUShort();if(1===format)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===format)return{format:2,ranges:this.parseRecordList({start:Parser.uShort,end:Parser.uShort,classId:Parser.uShort})};throw new Error("0x"+startOffset.toString(16)+": ClassDef format must be 1 or 2.")},Parser.list=function(count,itemCallback){return function(){return this.parseList(count,itemCallback)}},Parser.list32=function(count,itemCallback){return function(){return this.parseList32(count,itemCallback)}},Parser.recordList=function(count,recordDescription){return function(){return this.parseRecordList(count,recordDescription)}},Parser.recordList32=function(count,recordDescription){return function(){return this.parseRecordList32(count,recordDescription)}},Parser.pointer=function(description){return function(){return this.parsePointer(description)}},Parser.pointer32=function(description){return function(){return this.parsePointer32(description)}},Parser.tag=Parser.prototype.parseTag,Parser.byte=Parser.prototype.parseByte,Parser.uShort=Parser.offset16=Parser.prototype.parseUShort,Parser.uShortList=Parser.prototype.parseUShortList,Parser.uLong=Parser.offset32=Parser.prototype.parseULong,Parser.uLongList=Parser.prototype.parseULongList,Parser.struct=Parser.prototype.parseStruct,Parser.coverage=Parser.prototype.parseCoverage,Parser.classDef=Parser.prototype.parseClassDef;var langSysTable={reserved:Parser.uShort,reqFeatureIndex:Parser.uShort,featureIndexes:Parser.uShortList};Parser.prototype.parseScriptList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,script:Parser.pointer({defaultLangSys:Parser.pointer(langSysTable),langSysRecords:Parser.recordList({tag:Parser.tag,langSys:Parser.pointer(langSysTable)})})}))||[]},Parser.prototype.parseFeatureList=function(){return this.parsePointer(Parser.recordList({tag:Parser.tag,feature:Parser.pointer({featureParams:Parser.offset16,lookupListIndexes:Parser.uShortList})}))||[]},Parser.prototype.parseLookupList=function(lookupTableParsers){return this.parsePointer(Parser.list(Parser.pointer((function(){var lookupType=this.parseUShort();check.argument(1<=lookupType&&lookupType<=9,"GPOS/GSUB lookup type "+lookupType+" unknown.");var lookupFlag=this.parseUShort(),useMarkFilteringSet=16&lookupFlag;return{lookupType,lookupFlag,subtables:this.parseList(Parser.pointer(lookupTableParsers[lookupType])),markFilteringSet:useMarkFilteringSet?this.parseUShort():void 0}}))))||[]},Parser.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var majorVersion=this.parseUShort(),minorVersion=this.parseUShort();return check.argument(1===majorVersion&&minorVersion<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Parser.offset32,featureTableSubstitutionOffset:Parser.offset32})}))||[]};var parse={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort:function getShort(dataView,offset){return dataView.getInt16(offset,!1)},getULong,getFixed,getTag:function getTag(dataView,offset){for(var tag="",i=offset;i<offset+4;i+=1)tag+=String.fromCharCode(dataView.getInt8(i));return tag},getOffset:function getOffset(dataView,offset,offSize){for(var v=0,i=0;i<offSize;i+=1)v<<=8,v+=dataView.getUint8(offset+i);return v},getBytes:function getBytes(dataView,startOffset,endOffset){for(var bytes=[],i=startOffset;i<endOffset;i+=1)bytes.push(dataView.getUint8(i));return bytes},bytesToString:function bytesToString(bytes){for(var s="",i=0;i<bytes.length;i+=1)s+=String.fromCharCode(bytes[i]);return s},Parser};function addSegment(t,code,glyphIndex){t.segments.push({end:code,start:code,delta:-(code-glyphIndex),offset:0,glyphIndex})}var cmap={parse:function parseCmapTable(data,start){var cmap={};cmap.version=parse.getUShort(data,start),check.argument(0===cmap.version,"cmap table version should be 0."),cmap.numTables=parse.getUShort(data,start+2);for(var offset=-1,i=cmap.numTables-1;i>=0;i-=1){var platformId=parse.getUShort(data,start+4+8*i),encodingId=parse.getUShort(data,start+4+8*i+2);if(3===platformId&&(0===encodingId||1===encodingId||10===encodingId)||0===platformId&&(0===encodingId||1===encodingId||2===encodingId||3===encodingId||4===encodingId)){offset=parse.getULong(data,start+4+8*i+4);break}}if(-1===offset)throw new Error("No valid cmap sub-tables found.");var p=new parse.Parser(data,start+offset);if(cmap.format=p.parseUShort(),12===cmap.format)!function parseCmapTableFormat12(cmap,p){var groupCount;p.parseUShort(),cmap.length=p.parseULong(),cmap.language=p.parseULong(),cmap.groupCount=groupCount=p.parseULong(),cmap.glyphIndexMap={};for(var i=0;i<groupCount;i+=1)for(var startCharCode=p.parseULong(),endCharCode=p.parseULong(),startGlyphId=p.parseULong(),c=startCharCode;c<=endCharCode;c+=1)cmap.glyphIndexMap[c]=startGlyphId,startGlyphId++}(cmap,p);else{if(4!==cmap.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+cmap.format+").");!function parseCmapTableFormat4(cmap,p,data,start,offset){var segCount;cmap.length=p.parseUShort(),cmap.language=p.parseUShort(),cmap.segCount=segCount=p.parseUShort()>>1,p.skip("uShort",3),cmap.glyphIndexMap={};for(var endCountParser=new parse.Parser(data,start+offset+14),startCountParser=new parse.Parser(data,start+offset+16+2*segCount),idDeltaParser=new parse.Parser(data,start+offset+16+4*segCount),idRangeOffsetParser=new parse.Parser(data,start+offset+16+6*segCount),glyphIndexOffset=start+offset+16+8*segCount,i=0;i<segCount-1;i+=1)for(var glyphIndex=void 0,endCount=endCountParser.parseUShort(),startCount=startCountParser.parseUShort(),idDelta=idDeltaParser.parseShort(),idRangeOffset=idRangeOffsetParser.parseUShort(),c=startCount;c<=endCount;c+=1)0!==idRangeOffset?(glyphIndexOffset=idRangeOffsetParser.offset+idRangeOffsetParser.relativeOffset-2,glyphIndexOffset+=idRangeOffset,glyphIndexOffset+=2*(c-startCount),0!==(glyphIndex=parse.getUShort(data,glyphIndexOffset))&&(glyphIndex=glyphIndex+idDelta&65535)):glyphIndex=c+idDelta&65535,cmap.glyphIndexMap[c]=glyphIndex}(cmap,p,data,start,offset)}return cmap},make:function makeCmapTable(glyphs){var i,isPlan0Only=!0;for(i=glyphs.length-1;i>0;i-=1){if(glyphs.get(i).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),isPlan0Only=!1;break}}var cmapTable=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:isPlan0Only?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:isPlan0Only?12:20}];isPlan0Only||(cmapTable=cmapTable.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),cmapTable=cmapTable.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var t=new table.Table("cmap",cmapTable);for(t.segments=[],i=0;i<glyphs.length;i+=1){for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)addSegment(t,glyph.unicodes[j],i);t.segments=t.segments.sort((function(a,b){return a.start-b.start}))}!function addTerminatorSegment(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}(t);var segCount=t.segments.length,segCountToRemove=0,endCounts=[],startCounts=[],idDeltas=[],idRangeOffsets=[],glyphIds=[],cmap12Groups=[];for(i=0;i<segCount;i+=1){var segment=t.segments[i];segment.end<=65535&&segment.start<=65535?(endCounts=endCounts.concat({name:"end_"+i,type:"USHORT",value:segment.end}),startCounts=startCounts.concat({name:"start_"+i,type:"USHORT",value:segment.start}),idDeltas=idDeltas.concat({name:"idDelta_"+i,type:"SHORT",value:segment.delta}),idRangeOffsets=idRangeOffsets.concat({name:"idRangeOffset_"+i,type:"USHORT",value:segment.offset}),void 0!==segment.glyphId&&(glyphIds=glyphIds.concat({name:"glyph_"+i,type:"USHORT",value:segment.glyphId}))):segCountToRemove+=1,isPlan0Only||void 0===segment.glyphIndex||(cmap12Groups=(cmap12Groups=(cmap12Groups=cmap12Groups.concat({name:"cmap12Start_"+i,type:"ULONG",value:segment.start})).concat({name:"cmap12End_"+i,type:"ULONG",value:segment.end})).concat({name:"cmap12Glyph_"+i,type:"ULONG",value:segment.glyphIndex}))}if(t.segCountX2=2*(segCount-segCountToRemove),t.searchRange=2*Math.pow(2,Math.floor(Math.log(segCount-segCountToRemove)/Math.log(2))),t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange,t.fields=t.fields.concat(endCounts),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(startCounts),t.fields=t.fields.concat(idDeltas),t.fields=t.fields.concat(idRangeOffsets),t.fields=t.fields.concat(glyphIds),t.cmap4Length=14+2*endCounts.length+2+2*startCounts.length+2*idDeltas.length+2*idRangeOffsets.length+2*glyphIds.length,!isPlan0Only){var cmap12Length=16+4*cmap12Groups.length;t.cmap12Offset=20+t.cmap4Length,t.fields=t.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:cmap12Length},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:cmap12Groups.length/3}]),t.fields=t.fields.concat(cmap12Groups)}return t}},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(font){this.font=font}function CmapEncoding(cmap){this.cmap=cmap}function CffEncoding(encoding,charset){this.encoding=encoding,this.charset=charset}function GlyphNames(post){switch(post.version){case 1:this.names=standardNames.slice();break;case 2:this.names=new Array(post.numberOfGlyphs);for(var i=0;i<post.numberOfGlyphs;i++)post.glyphNameIndex[i]<standardNames.length?this.names[i]=standardNames[post.glyphNameIndex[i]]:this.names[i]=post.names[post.glyphNameIndex[i]-standardNames.length];break;case 2.5:this.names=new Array(post.numberOfGlyphs);for(var i$1=0;i$1<post.numberOfGlyphs;i$1++)this.names[i$1]=standardNames[i$1+post.glyphNameIndex[i$1]];break;default:this.names=[]}}function addGlyphNames(font,opt){opt.lowMemory?function addGlyphNamesToUnicodeMap(font){font._IndexToUnicodeMap={};for(var glyphIndexMap=font.tables.cmap.glyphIndexMap,charCodes=Object.keys(glyphIndexMap),i=0;i<charCodes.length;i+=1){var c=charCodes[i],glyphIndex=glyphIndexMap[c];void 0===font._IndexToUnicodeMap[glyphIndex]?font._IndexToUnicodeMap[glyphIndex]={unicodes:[parseInt(c)]}:font._IndexToUnicodeMap[glyphIndex].unicodes.push(parseInt(c))}}(font):function addGlyphNamesAll(font){for(var glyph,glyphIndexMap=font.tables.cmap.glyphIndexMap,charCodes=Object.keys(glyphIndexMap),i=0;i<charCodes.length;i+=1){var c=charCodes[i],glyphIndex=glyphIndexMap[c];(glyph=font.glyphs.get(glyphIndex)).addUnicode(parseInt(c))}for(var i$1=0;i$1<font.glyphs.length;i$1+=1)glyph=font.glyphs.get(i$1),font.cffEncoding?font.isCIDFont?glyph.name="gid"+i$1:glyph.name=font.cffEncoding.charset[i$1]:font.glyphNames.names&&(glyph.name=font.glyphNames.glyphIndexToName(i$1))}(font)}DefaultEncoding.prototype.charToGlyphIndex=function(c){var code=c.codePointAt(0),glyphs=this.font.glyphs;if(glyphs)for(var i=0;i<glyphs.length;i+=1)for(var glyph=glyphs.get(i),j=0;j<glyph.unicodes.length;j+=1)if(glyph.unicodes[j]===code)return i;return null},CmapEncoding.prototype.charToGlyphIndex=function(c){return this.cmap.glyphIndexMap[c.codePointAt(0)]||0},CffEncoding.prototype.charToGlyphIndex=function(s){var code=s.codePointAt(0),charName=this.encoding[code];return this.charset.indexOf(charName)},GlyphNames.prototype.nameToGlyphIndex=function(name){return this.names.indexOf(name)},GlyphNames.prototype.glyphIndexToName=function(gid){return this.names[gid]};var draw={line:function line(ctx,x1,y1,x2,y2){ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke()}};function Glyph(options){this.bindConstructorValues(options)}function defineDependentProperty(glyph,externalName,internalName){Object.defineProperty(glyph,externalName,{get:function(){return glyph.path,glyph[internalName]},set:function(newValue){glyph[internalName]=newValue},enumerable:!0,configurable:!0})}function GlyphSet(font,glyphs){if(this.font=font,this.glyphs={},Array.isArray(glyphs))for(var i=0;i<glyphs.length;i++){var glyph=glyphs[i];glyph.path.unitsPerEm=font.unitsPerEm,this.glyphs[i]=glyph}this.length=glyphs&&glyphs.length||0}Glyph.prototype.bindConstructorValues=function(options){this.index=options.index||0,this.name=options.name||null,this.unicode=options.unicode||void 0,this.unicodes=options.unicodes||void 0!==options.unicode?[options.unicode]:[],"xMin"in options&&(this.xMin=options.xMin),"yMin"in options&&(this.yMin=options.yMin),"xMax"in options&&(this.xMax=options.xMax),"yMax"in options&&(this.yMax=options.yMax),"advanceWidth"in options&&(this.advanceWidth=options.advanceWidth),Object.defineProperty(this,"path",function getPathDefinition(glyph,path){var _path=path||new Path;return{configurable:!0,get:function(){return"function"==typeof _path&&(_path=_path()),_path},set:function(p){_path=p}}}(0,options.path))},Glyph.prototype.addUnicode=function(unicode){0===this.unicodes.length&&(this.unicode=unicode),this.unicodes.push(unicode)},Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Glyph.prototype.getPath=function(x,y,fontSize,options,font){var commands,hPoints;x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72,options||(options={});var xScale=options.xScale,yScale=options.yScale;if(options.hinting&&font&&font.hinting&&(hPoints=this.path&&font.hinting.exec(this,fontSize)),hPoints)commands=font.hinting.getCommands(hPoints),x=Math.round(x),y=Math.round(y),xScale=yScale=1;else{commands=this.path.commands;var scale=1/(this.path.unitsPerEm||1e3)*fontSize;void 0===xScale&&(xScale=scale),void 0===yScale&&(yScale=scale)}for(var p=new Path,i=0;i<commands.length;i+=1){var cmd=commands[i];"M"===cmd.type?p.moveTo(x+cmd.x*xScale,y+-cmd.y*yScale):"L"===cmd.type?p.lineTo(x+cmd.x*xScale,y+-cmd.y*yScale):"Q"===cmd.type?p.quadraticCurveTo(x+cmd.x1*xScale,y+-cmd.y1*yScale,x+cmd.x*xScale,y+-cmd.y*yScale):"C"===cmd.type?p.curveTo(x+cmd.x1*xScale,y+-cmd.y1*yScale,x+cmd.x2*xScale,y+-cmd.y2*yScale,x+cmd.x*xScale,y+-cmd.y*yScale):"Z"===cmd.type&&p.closePath()}return p},Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var contours=[],currentContour=[],i=0;i<this.points.length;i+=1){var pt=this.points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours},Glyph.prototype.getMetrics=function(){for(var commands=this.path.commands,xCoords=[],yCoords=[],i=0;i<commands.length;i+=1){var cmd=commands[i];"Z"!==cmd.type&&(xCoords.push(cmd.x),yCoords.push(cmd.y)),"Q"!==cmd.type&&"C"!==cmd.type||(xCoords.push(cmd.x1),yCoords.push(cmd.y1)),"C"===cmd.type&&(xCoords.push(cmd.x2),yCoords.push(cmd.y2))}var metrics={xMin:Math.min.apply(null,xCoords),yMin:Math.min.apply(null,yCoords),xMax:Math.max.apply(null,xCoords),yMax:Math.max.apply(null,yCoords),leftSideBearing:this.leftSideBearing};return isFinite(metrics.xMin)||(metrics.xMin=0),isFinite(metrics.xMax)||(metrics.xMax=this.advanceWidth),isFinite(metrics.yMin)||(metrics.yMin=0),isFinite(metrics.yMax)||(metrics.yMax=0),metrics.rightSideBearing=this.advanceWidth-metrics.leftSideBearing-(metrics.xMax-metrics.xMin),metrics},Glyph.prototype.draw=function(ctx,x,y,fontSize,options){this.getPath(x,y,fontSize,options).draw(ctx)},Glyph.prototype.drawPoints=function(ctx,x,y,fontSize){function drawCircles(l,x,y,scale){ctx.beginPath();for(var j=0;j<l.length;j+=1)ctx.moveTo(x+l[j].x*scale,y+l[j].y*scale),ctx.arc(x+l[j].x*scale,y+l[j].y*scale,2,0,2*Math.PI,!1);ctx.closePath(),ctx.fill()}x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24;for(var scale=1/this.path.unitsPerEm*fontSize,blueCircles=[],redCircles=[],path=this.path,i=0;i<path.commands.length;i+=1){var cmd=path.commands[i];void 0!==cmd.x&&blueCircles.push({x:cmd.x,y:-cmd.y}),void 0!==cmd.x1&&redCircles.push({x:cmd.x1,y:-cmd.y1}),void 0!==cmd.x2&&redCircles.push({x:cmd.x2,y:-cmd.y2})}ctx.fillStyle="blue",drawCircles(blueCircles,x,y,scale),ctx.fillStyle="red",drawCircles(redCircles,x,y,scale)},Glyph.prototype.drawMetrics=function(ctx,x,y,fontSize){var scale;x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:24,scale=1/this.path.unitsPerEm*fontSize,ctx.lineWidth=1,ctx.strokeStyle="black",draw.line(ctx,x,-1e4,x,1e4),draw.line(ctx,-1e4,y,1e4,y);var xMin=this.xMin||0,yMin=this.yMin||0,xMax=this.xMax||0,yMax=this.yMax||0,advanceWidth=this.advanceWidth||0;ctx.strokeStyle="blue",draw.line(ctx,x+xMin*scale,-1e4,x+xMin*scale,1e4),draw.line(ctx,x+xMax*scale,-1e4,x+xMax*scale,1e4),draw.line(ctx,-1e4,y+-yMin*scale,1e4,y+-yMin*scale),draw.line(ctx,-1e4,y+-yMax*scale,1e4,y+-yMax*scale),ctx.strokeStyle="green",draw.line(ctx,x+advanceWidth*scale,-1e4,x+advanceWidth*scale,1e4)},GlyphSet.prototype.get=function(index){if(void 0===this.glyphs[index]){this.font._push(index),"function"==typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]());var glyph=this.glyphs[index],unicodeObj=this.font._IndexToUnicodeMap[index];if(unicodeObj)for(var j=0;j<unicodeObj.unicodes.length;j++)glyph.addUnicode(unicodeObj.unicodes[j]);this.font.cffEncoding?this.font.isCIDFont?glyph.name="gid"+index:glyph.name=this.font.cffEncoding.charset[index]:this.font.glyphNames.names&&(glyph.name=this.font.glyphNames.glyphIndexToName(index)),this.glyphs[index].advanceWidth=this.font._hmtxTableData[index].advanceWidth,this.glyphs[index].leftSideBearing=this.font._hmtxTableData[index].leftSideBearing}else"function"==typeof this.glyphs[index]&&(this.glyphs[index]=this.glyphs[index]());return this.glyphs[index]},GlyphSet.prototype.push=function(index,loader){this.glyphs[index]=loader,this.length++};var glyphset={GlyphSet,glyphLoader:function glyphLoader(font,index){return new Glyph({index,font})},ttfGlyphLoader:function ttfGlyphLoader(font,index,parseGlyph,data,position,buildPath){return function(){var glyph=new Glyph({index,font});return glyph.path=function(){parseGlyph(glyph,data,position);var path=buildPath(font.glyphs,glyph);return path.unitsPerEm=font.unitsPerEm,path},defineDependentProperty(glyph,"xMin","_xMin"),defineDependentProperty(glyph,"xMax","_xMax"),defineDependentProperty(glyph,"yMin","_yMin"),defineDependentProperty(glyph,"yMax","_yMax"),glyph}},cffGlyphLoader:function cffGlyphLoader(font,index,parseCFFCharstring,charstring){return function(){var glyph=new Glyph({index,font});return glyph.path=function(){var path=parseCFFCharstring(font,glyph,charstring);return path.unitsPerEm=font.unitsPerEm,path},glyph}}};function equals(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var i=0;i<a.length;i+=1)if(!equals(a[i],b[i]))return!1;return!0}return!1}function calcCFFSubroutineBias(subrs){return subrs.length<1240?107:subrs.length<33900?1131:32768}function parseCFFIndex(data,start,conversionFn){var objectOffset,endOffset,offsets=[],objects=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;endOffset=objectOffset+offsets[count]}else endOffset=start+2;for(var i$1=0;i$1<offsets.length-1;i$1+=1){var value=parse.getBytes(data,objectOffset+offsets[i$1],objectOffset+offsets[i$1+1]);conversionFn&&(value=conversionFn(value)),objects.push(value)}return{objects,startOffset:start,endOffset}}function parseOperand(parser,b0){if(28===b0)return parser.parseByte()<<8|parser.parseByte();if(29===b0)return parser.parseByte()<<24|parser.parseByte()<<16|parser.parseByte()<<8|parser.parseByte();if(30===b0)return function parseFloatOperand(parser){for(var s="",lookup=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var b=parser.parseByte(),n1=b>>4,n2=15&b;if(15===n1)break;if(s+=lookup[n1],15===n2)break;s+=lookup[n2]}return parseFloat(s)}(parser);if(b0>=32&&b0<=246)return b0-139;if(b0>=247&&b0<=250)return 256*(b0-247)+parser.parseByte()+108;if(b0>=251&&b0<=254)return 256*-(b0-251)-parser.parseByte()-108;throw new Error("Invalid b0 "+b0)}function parseCFFDict(data,start,size){start=void 0!==start?start:0;var parser=new parse.Parser(data,start),entries=[],operands=[];for(size=void 0!==size?size:data.length;parser.relativeOffset<size;){var op=parser.parseByte();op<=21?(12===op&&(op=1200+parser.parseByte()),entries.push([op,operands]),operands=[]):operands.push(parseOperand(parser,op))}return function entriesToObject(entries){for(var o={},i=0;i<entries.length;i+=1){var key=entries[i][0],values=entries[i][1],value=void 0;if(value=1===values.length?values[0]:values,o.hasOwnProperty(key)&&!isNaN(o[key]))throw new Error("Object "+o+" already has key "+key);o[key]=value}return o}(entries)}function getCFFString(strings,index){return index=index<=390?cffStandardStrings[index]:strings[index-391]}function interpretDict(dict,meta,strings){for(var value,newDict={},i=0;i<meta.length;i+=1){var m=meta[i];if(Array.isArray(m.type)){var values=[];values.length=m.type.length;for(var j=0;j<m.type.length;j++)void 0===(value=void 0!==dict[m.op]?dict[m.op][j]:void 0)&&(value=void 0!==m.value&&void 0!==m.value[j]?m.value[j]:null),"SID"===m.type[j]&&(value=getCFFString(strings,value)),values[j]=value;newDict[m.name]=values}else void 0===(value=dict[m.op])&&(value=void 0!==m.value?m.value:null),"SID"===m.type&&(value=getCFFString(strings,value)),newDict[m.name]=value}return newDict}var TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(data,strings){return interpretDict(parseCFFDict(data,0,data.byteLength),TOP_DICT_META,strings)}function parseCFFPrivateDict(data,start,size,strings){return interpretDict(parseCFFDict(data,start,size),PRIVATE_DICT_META,strings)}function gatherCFFTopDicts(data,start,cffIndex,strings){for(var topDictArray=[],iTopDict=0;iTopDict<cffIndex.length;iTopDict+=1){var topDict=parseCFFTopDict(new DataView(new Uint8Array(cffIndex[iTopDict]).buffer),strings);topDict._subrs=[],topDict._subrsBias=0,topDict._defaultWidthX=0,topDict._nominalWidthX=0;var privateSize=topDict.private[0],privateOffset=topDict.private[1];if(0!==privateSize&&0!==privateOffset){var privateDict=parseCFFPrivateDict(data,privateOffset+start,privateSize,strings);if(topDict._defaultWidthX=privateDict.defaultWidthX,topDict._nominalWidthX=privateDict.nominalWidthX,0!==privateDict.subrs){var subrIndex=parseCFFIndex(data,privateOffset+privateDict.subrs+start);topDict._subrs=subrIndex.objects,topDict._subrsBias=calcCFFSubroutineBias(topDict._subrs)}topDict._privateDict=privateDict}topDictArray.push(topDict)}return topDictArray}function parseCFFCharstring(font,glyph,code){var c1x,c1y,c2x,c2y,subrs,subrsBias,defaultWidthX,nominalWidthX,p=new Path,stack=[],nStems=0,haveWidth=!1,open=!1,x=0,y=0;if(font.isCIDFont){var fdIndex=font.tables.cff.topDict._fdSelect[glyph.index],fdDict=font.tables.cff.topDict._fdArray[fdIndex];subrs=fdDict._subrs,subrsBias=fdDict._subrsBias,defaultWidthX=fdDict._defaultWidthX,nominalWidthX=fdDict._nominalWidthX}else subrs=font.tables.cff.topDict._subrs,subrsBias=font.tables.cff.topDict._subrsBias,defaultWidthX=font.tables.cff.topDict._defaultWidthX,nominalWidthX=font.tables.cff.topDict._nominalWidthX;var width=defaultWidthX;function newContour(x,y){open&&p.closePath(),p.moveTo(x,y),open=!0}function parseStems(){stack.length%2!=0&&!haveWidth&&(width=stack.shift()+nominalWidthX),nStems+=stack.length>>1,stack.length=0,haveWidth=!0}return function parse(code){for(var b1,b2,b3,b4,codeIndex,subrCode,jpx,jpy,c3x,c3y,c4x,c4y,i=0;i<code.length;){var v=code[i];switch(i+=1,v){case 1:case 3:case 18:case 23:parseStems();break;case 4:stack.length>1&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),y+=stack.pop(),newContour(x,y);break;case 5:for(;stack.length>0;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 6:for(;stack.length>0&&(x+=stack.shift(),p.lineTo(x,y),0!==stack.length);)y+=stack.shift(),p.lineTo(x,y);break;case 7:for(;stack.length>0&&(y+=stack.shift(),p.lineTo(x,y),0!==stack.length);)x+=stack.shift(),p.lineTo(x,y);break;case 8:for(;stack.length>0;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 10:codeIndex=stack.pop()+subrsBias,(subrCode=subrs[codeIndex])&&parse(subrCode);break;case 11:return;case 12:switch(v=code[i],i+=1,v){case 35:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),y=c4y+stack.shift(),stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 34:c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=y,x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 36:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y,c3x=jpx+stack.shift(),c3y=c2y,c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),x=c4x+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;case 37:c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),jpx=c2x+stack.shift(),jpy=c2y+stack.shift(),c3x=jpx+stack.shift(),c3y=jpy+stack.shift(),c4x=c3x+stack.shift(),c4y=c3y+stack.shift(),Math.abs(c4x-x)>Math.abs(c4y-y)?x=c4x+stack.shift():y=c4y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,jpx,jpy),p.curveTo(c3x,c3y,c4x,c4y,x,y);break;default:console.log("Glyph "+glyph.index+": unknown operator 1200"+v),stack.length=0}break;case 14:stack.length>0&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),open&&(p.closePath(),open=!1);break;case 19:case 20:parseStems(),i+=nStems+7>>3;break;case 21:stack.length>2&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),y+=stack.pop(),newContour(x+=stack.pop(),y);break;case 22:stack.length>1&&!haveWidth&&(width=stack.shift()+nominalWidthX,haveWidth=!0),newContour(x+=stack.pop(),y);break;case 24:for(;stack.length>2;)c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);break;case 25:for(;stack.length>6;)x+=stack.shift(),y+=stack.shift(),p.lineTo(x,y);c1x=x+stack.shift(),c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 26:for(stack.length%2&&(x+=stack.shift());stack.length>0;)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x,y=c2y+stack.shift(),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 27:for(stack.length%2&&(y+=stack.shift());stack.length>0;)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y,p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 28:b1=code[i],b2=code[i+1],stack.push((b1<<24|b2<<16)>>16),i+=2;break;case 29:codeIndex=stack.pop()+font.gsubrsBias,(subrCode=font.gsubrs[codeIndex])&&parse(subrCode);break;case 30:for(;stack.length>0&&(c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;case 31:for(;stack.length>0&&(c1x=x+stack.shift(),c1y=y,c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),y=c2y+stack.shift(),x=c2x+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y),0!==stack.length);)c1x=x,c1y=y+stack.shift(),c2x=c1x+stack.shift(),c2y=c1y+stack.shift(),x=c2x+stack.shift(),y=c2y+(1===stack.length?stack.shift():0),p.curveTo(c1x,c1y,c2x,c2y,x,y);break;default:v<32?console.log("Glyph "+glyph.index+": unknown operator "+v):v<247?stack.push(v-139):v<251?(b1=code[i],i+=1,stack.push(256*(v-247)+b1+108)):v<255?(b1=code[i],i+=1,stack.push(256*-(v-251)-b1-108)):(b1=code[i],b2=code[i+1],b3=code[i+2],b4=code[i+3],i+=4,stack.push((b1<<24|b2<<16|b3<<8|b4)/65536))}}}(code),glyph.advanceWidth=width,p}function encodeString(s,strings){var sid,i=cffStandardStrings.indexOf(s);return i>=0&&(sid=i),(i=strings.indexOf(s))>=0?sid=i+cffStandardStrings.length:(sid=cffStandardStrings.length+strings.length,strings.push(s)),sid}function makeDict(meta,attrs,strings){for(var m={},i=0;i<meta.length;i+=1){var entry=meta[i],value=attrs[entry.name];void 0===value||equals(value,entry.value)||("SID"===entry.type&&(value=encodeString(value,strings)),m[entry.op]={name:entry.name,type:entry.type,value})}return m}function makeTopDict(attrs,strings){var t=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(TOP_DICT_META,attrs,strings),t}function makeTopDictIndex(topDict){var t=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:topDict}],t}function glyphToOps(glyph){var ops=[],path=glyph.path;ops.push({name:"width",type:"NUMBER",value:glyph.advanceWidth});for(var x=0,y=0,i=0;i<path.commands.length;i+=1){var dx=void 0,dy=void 0,cmd=path.commands[i];if("Q"===cmd.type){var _13=1/3,_23=2/3;cmd={type:"C",x:cmd.x,y:cmd.y,x1:Math.round(_13*x+_23*cmd.x1),y1:Math.round(_13*y+_23*cmd.y1),x2:Math.round(_13*cmd.x+_23*cmd.x1),y2:Math.round(_13*cmd.y+_23*cmd.y1)}}if("M"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rmoveto",type:"OP",value:21}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("L"===cmd.type)dx=Math.round(cmd.x-x),dy=Math.round(cmd.y-y),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rlineto",type:"OP",value:5}),x=Math.round(cmd.x),y=Math.round(cmd.y);else if("C"===cmd.type){var dx1=Math.round(cmd.x1-x),dy1=Math.round(cmd.y1-y),dx2=Math.round(cmd.x2-cmd.x1),dy2=Math.round(cmd.y2-cmd.y1);dx=Math.round(cmd.x-cmd.x2),dy=Math.round(cmd.y-cmd.y2),ops.push({name:"dx1",type:"NUMBER",value:dx1}),ops.push({name:"dy1",type:"NUMBER",value:dy1}),ops.push({name:"dx2",type:"NUMBER",value:dx2}),ops.push({name:"dy2",type:"NUMBER",value:dy2}),ops.push({name:"dx",type:"NUMBER",value:dx}),ops.push({name:"dy",type:"NUMBER",value:dy}),ops.push({name:"rrcurveto",type:"OP",value:8}),x=Math.round(cmd.x),y=Math.round(cmd.y)}}return ops.push({name:"endchar",type:"OP",value:14}),ops}var cff={parse:function parseCFFTable(data,start,font,opt){font.tables.cff={};var header=function parseCFFHeader(data,start){var header={};return header.formatMajor=parse.getCard8(data,start),header.formatMinor=parse.getCard8(data,start+1),header.size=parse.getCard8(data,start+2),header.offsetSize=parse.getCard8(data,start+3),header.startOffset=start,header.endOffset=start+4,header}(data,start),nameIndex=parseCFFIndex(data,header.endOffset,parse.bytesToString),topDictIndex=parseCFFIndex(data,nameIndex.endOffset),stringIndex=parseCFFIndex(data,topDictIndex.endOffset,parse.bytesToString),globalSubrIndex=parseCFFIndex(data,stringIndex.endOffset);font.gsubrs=globalSubrIndex.objects,font.gsubrsBias=calcCFFSubroutineBias(font.gsubrs);var topDictArray=gatherCFFTopDicts(data,start,topDictIndex.objects,stringIndex.objects);if(1!==topDictArray.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+topDictArray.length);var topDict=topDictArray[0];if(font.tables.cff.topDict=topDict,topDict._privateDict&&(font.defaultWidthX=topDict._privateDict.defaultWidthX,font.nominalWidthX=topDict._privateDict.nominalWidthX),void 0!==topDict.ros[0]&&void 0!==topDict.ros[1]&&(font.isCIDFont=!0),font.isCIDFont){var fdArrayOffset=topDict.fdArray,fdSelectOffset=topDict.fdSelect;if(0===fdArrayOffset||0===fdSelectOffset)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var fdArrayIndex=parseCFFIndex(data,fdArrayOffset+=start),fdArray=gatherCFFTopDicts(data,start,fdArrayIndex.objects,stringIndex.objects);topDict._fdArray=fdArray,fdSelectOffset+=start,topDict._fdSelect=function parseCFFFDSelect(data,start,nGlyphs,fdArrayCount){var fdIndex,fdSelect=[],parser=new parse.Parser(data,start),format=parser.parseCard8();if(0===format)for(var iGid=0;iGid<nGlyphs;iGid++){if((fdIndex=parser.parseCard8())>=fdArrayCount)throw new Error("CFF table CID Font FDSelect has bad FD index value "+fdIndex+" (FD count "+fdArrayCount+")");fdSelect.push(fdIndex)}else{if(3!==format)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+format);var next,nRanges=parser.parseCard16(),first=parser.parseCard16();if(0!==first)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+first);for(var iRange=0;iRange<nRanges;iRange++){if(fdIndex=parser.parseCard8(),next=parser.parseCard16(),fdIndex>=fdArrayCount)throw new Error("CFF table CID Font FDSelect has bad FD index value "+fdIndex+" (FD count "+fdArrayCount+")");if(next>nGlyphs)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+next);for(;first<next;first++)fdSelect.push(fdIndex);first=next}if(next!==nGlyphs)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+next)}return fdSelect}(data,fdSelectOffset,font.numGlyphs,fdArray.length)}var charStringsIndex,privateDictOffset=start+topDict.private[1],privateDict=parseCFFPrivateDict(data,privateDictOffset,topDict.private[0],stringIndex.objects);if(font.defaultWidthX=privateDict.defaultWidthX,font.nominalWidthX=privateDict.nominalWidthX,0!==privateDict.subrs){var subrOffset=privateDictOffset+privateDict.subrs,subrIndex=parseCFFIndex(data,subrOffset);font.subrs=subrIndex.objects,font.subrsBias=calcCFFSubroutineBias(font.subrs)}else font.subrs=[],font.subrsBias=0;opt.lowMemory?(charStringsIndex=function parseCFFIndexLowMemory(data,start){var objectOffset,endOffset,offsets=[],count=parse.getCard16(data,start);if(0!==count){var offsetSize=parse.getByte(data,start+2);objectOffset=start+(count+1)*offsetSize+2;for(var pos=start+3,i=0;i<count+1;i+=1)offsets.push(parse.getOffset(data,pos,offsetSize)),pos+=offsetSize;endOffset=objectOffset+offsets[count]}else endOffset=start+2;return{offsets,startOffset:start,endOffset}}(data,start+topDict.charStrings),font.nGlyphs=charStringsIndex.offsets.length):(charStringsIndex=parseCFFIndex(data,start+topDict.charStrings),font.nGlyphs=charStringsIndex.objects.length);var charset=function parseCFFCharset(data,start,nGlyphs,strings){var sid,count,parser=new parse.Parser(data,start);nGlyphs-=1;var charset=[".notdef"],format=parser.parseCard8();if(0===format)for(var i=0;i<nGlyphs;i+=1)sid=parser.parseSID(),charset.push(getCFFString(strings,sid));else if(1===format)for(;charset.length<=nGlyphs;){sid=parser.parseSID(),count=parser.parseCard8();for(var i$1=0;i$1<=count;i$1+=1)charset.push(getCFFString(strings,sid)),sid+=1}else{if(2!==format)throw new Error("Unknown charset format "+format);for(;charset.length<=nGlyphs;){sid=parser.parseSID(),count=parser.parseCard16();for(var i$2=0;i$2<=count;i$2+=1)charset.push(getCFFString(strings,sid)),sid+=1}}return charset}(data,start+topDict.charset,font.nGlyphs,stringIndex.objects);if(0===topDict.encoding?font.cffEncoding=new CffEncoding(cffStandardEncoding,charset):1===topDict.encoding?font.cffEncoding=new CffEncoding(cffExpertEncoding,charset):font.cffEncoding=function parseCFFEncoding(data,start,charset){var code,enc={},parser=new parse.Parser(data,start),format=parser.parseCard8();if(0===format)for(var nCodes=parser.parseCard8(),i=0;i<nCodes;i+=1)enc[code=parser.parseCard8()]=i;else{if(1!==format)throw new Error("Unknown encoding format "+format);var nRanges=parser.parseCard8();code=1;for(var i$1=0;i$1<nRanges;i$1+=1)for(var first=parser.parseCard8(),nLeft=parser.parseCard8(),j=first;j<=first+nLeft;j+=1)enc[j]=code,code+=1}return new CffEncoding(enc,charset)}(data,start+topDict.encoding,charset),font.encoding=font.encoding||font.cffEncoding,font.glyphs=new glyphset.GlyphSet(font),opt.lowMemory)font._push=function(i){var charString=function getCffIndexObject(i,offsets,data,start,conversionFn){var count=parse.getCard16(data,start),objectOffset=0;0!==count&&(objectOffset=start+(count+1)*parse.getByte(data,start+2)+2);var value=parse.getBytes(data,objectOffset+offsets[i],objectOffset+offsets[i+1]);return conversionFn&&(value=conversionFn(value)),value}(i,charStringsIndex.offsets,data,start+topDict.charStrings);font.glyphs.push(i,glyphset.cffGlyphLoader(font,i,parseCFFCharstring,charString))};else for(var i=0;i<font.nGlyphs;i+=1){var charString=charStringsIndex.objects[i];font.glyphs.push(i,glyphset.cffGlyphLoader(font,i,parseCFFCharstring,charString))}},make:function makeCFFTable(glyphs,options){for(var glyph,t=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),fontScale=1/options.unitsPerEm,attrs={version:options.version,fullName:options.fullName,familyName:options.familyName,weight:options.weightName,fontBBox:options.fontBBox||[0,0,0,0],fontMatrix:[fontScale,0,0,fontScale,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},glyphNames=[],i=1;i<glyphs.length;i+=1)glyph=glyphs.get(i),glyphNames.push(glyph.name);var strings=[];t.header=function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}(),t.nameIndex=function makeNameIndex(fontNames){var t=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var i=0;i<fontNames.length;i+=1)t.names.push({name:"name_"+i,type:"NAME",value:fontNames[i]});return t}([options.postScriptName]);var topDict=makeTopDict(attrs,strings);t.topDictIndex=makeTopDictIndex(topDict),t.globalSubrIndex=function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}(),t.charsets=function makeCharsets(glyphNames,strings){for(var t=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<glyphNames.length;i+=1){var glyphSID=encodeString(glyphNames[i],strings);t.fields.push({name:"glyph_"+i,type:"SID",value:glyphSID})}return t}(glyphNames,strings),t.charStringsIndex=function makeCharStringsIndex(glyphs){for(var t=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),ops=glyphToOps(glyph);t.charStrings.push({name:glyph.name,type:"CHARSTRING",value:ops})}return t}(glyphs),t.privateDict=function makePrivateDict(attrs,strings){var t=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=makeDict(PRIVATE_DICT_META,attrs,strings),t}({},strings),t.stringIndex=function makeStringIndex(strings){var t=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var i=0;i<strings.length;i+=1)t.strings.push({name:"string_"+i,type:"STRING",value:strings[i]});return t}(strings);var startOffset=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return attrs.charset=startOffset,attrs.encoding=0,attrs.charStrings=attrs.charset+t.charsets.sizeOf(),attrs.private[1]=attrs.charStrings+t.charStringsIndex.sizeOf(),topDict=makeTopDict(attrs,strings),t.topDictIndex=makeTopDictIndex(topDict),t}};var head={parse:function parseHeadTable(data,start){var head={},p=new parse.Parser(data,start);return head.version=p.parseVersion(),head.fontRevision=Math.round(1e3*p.parseFixed())/1e3,head.checkSumAdjustment=p.parseULong(),head.magicNumber=p.parseULong(),check.argument(1594834165===head.magicNumber,"Font header has wrong magic number."),head.flags=p.parseUShort(),head.unitsPerEm=p.parseUShort(),head.created=p.parseLongDateTime(),head.modified=p.parseLongDateTime(),head.xMin=p.parseShort(),head.yMin=p.parseShort(),head.xMax=p.parseShort(),head.yMax=p.parseShort(),head.macStyle=p.parseUShort(),head.lowestRecPPEM=p.parseUShort(),head.fontDirectionHint=p.parseShort(),head.indexToLocFormat=p.parseShort(),head.glyphDataFormat=p.parseShort(),head},make:function makeHeadTable(options){var timestamp=Math.round((new Date).getTime()/1e3)+2082844800,createdTimestamp=timestamp;return options.createdTimestamp&&(createdTimestamp=options.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:createdTimestamp},{name:"modified",type:"LONGDATETIME",value:timestamp},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],options)}};var hhea={parse:function parseHheaTable(data,start){var hhea={},p=new parse.Parser(data,start);return hhea.version=p.parseVersion(),hhea.ascender=p.parseShort(),hhea.descender=p.parseShort(),hhea.lineGap=p.parseShort(),hhea.advanceWidthMax=p.parseUShort(),hhea.minLeftSideBearing=p.parseShort(),hhea.minRightSideBearing=p.parseShort(),hhea.xMaxExtent=p.parseShort(),hhea.caretSlopeRise=p.parseShort(),hhea.caretSlopeRun=p.parseShort(),hhea.caretOffset=p.parseShort(),p.relativeOffset+=8,hhea.metricDataFormat=p.parseShort(),hhea.numberOfHMetrics=p.parseUShort(),hhea},make:function makeHheaTable(options){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],options)}};var hmtx={parse:function parseHmtxTable(font,data,start,numMetrics,numGlyphs,glyphs,opt){opt.lowMemory?function parseHmtxTableOnLowMemory(font,data,start,numMetrics,numGlyphs){var advanceWidth,leftSideBearing;font._hmtxTableData={};for(var p=new parse.Parser(data,start),i=0;i<numGlyphs;i+=1)i<numMetrics&&(advanceWidth=p.parseUShort(),leftSideBearing=p.parseShort()),font._hmtxTableData[i]={advanceWidth,leftSideBearing}}(font,data,start,numMetrics,numGlyphs):function parseHmtxTableAll(data,start,numMetrics,numGlyphs,glyphs){for(var advanceWidth,leftSideBearing,p=new parse.Parser(data,start),i=0;i<numGlyphs;i+=1){i<numMetrics&&(advanceWidth=p.parseUShort(),leftSideBearing=p.parseShort());var glyph=glyphs.get(i);glyph.advanceWidth=advanceWidth,glyph.leftSideBearing=leftSideBearing}}(data,start,numMetrics,numGlyphs,glyphs)},make:function makeHmtxTable(glyphs){for(var t=new table.Table("hmtx",[]),i=0;i<glyphs.length;i+=1){var glyph=glyphs.get(i),advanceWidth=glyph.advanceWidth||0,leftSideBearing=glyph.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+i,type:"USHORT",value:advanceWidth}),t.fields.push({name:"leftSideBearing_"+i,type:"SHORT",value:leftSideBearing})}return t}};var ltag={make:function makeLtagTable(tags){for(var result=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:tags.length}]),stringPool="",stringPoolOffset=12+4*tags.length,i=0;i<tags.length;++i){var pos=stringPool.indexOf(tags[i]);pos<0&&(pos=stringPool.length,stringPool+=tags[i]),result.fields.push({name:"offset "+i,type:"USHORT",value:stringPoolOffset+pos}),result.fields.push({name:"length "+i,type:"USHORT",value:tags[i].length})}return result.fields.push({name:"stringPool",type:"CHARARRAY",value:stringPool}),result},parse:function parseLtagTable(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported ltag table version."),p.skip("uLong",1);for(var numTags=p.parseULong(),tags=[],i=0;i<numTags;i++){for(var tag="",offset=start+p.parseUShort(),length=p.parseUShort(),j=offset;j<offset+length;++j)tag+=String.fromCharCode(data.getInt8(j));tags.push(tag)}return tags}};var maxp={parse:function parseMaxpTable(data,start){var maxp={},p=new parse.Parser(data,start);return maxp.version=p.parseVersion(),maxp.numGlyphs=p.parseUShort(),1===maxp.version&&(maxp.maxPoints=p.parseUShort(),maxp.maxContours=p.parseUShort(),maxp.maxCompositePoints=p.parseUShort(),maxp.maxCompositeContours=p.parseUShort(),maxp.maxZones=p.parseUShort(),maxp.maxTwilightPoints=p.parseUShort(),maxp.maxStorage=p.parseUShort(),maxp.maxFunctionDefs=p.parseUShort(),maxp.maxInstructionDefs=p.parseUShort(),maxp.maxStackElements=p.parseUShort(),maxp.maxSizeOfInstructions=p.parseUShort(),maxp.maxComponentElements=p.parseUShort(),maxp.maxComponentDepth=p.parseUShort()),maxp},make:function makeMaxpTable(numGlyphs){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:numGlyphs}])}},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(platformID,languageID,ltag){switch(platformID){case 0:if(65535===languageID)return"und";if(ltag)return ltag[languageID];break;case 1:return macLanguages[languageID];case 3:return windowsLanguages[languageID]}}var macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(platformID,encodingID,languageID){switch(platformID){case 0:return"utf-16";case 1:return macLanguageEncodings[languageID]||macScriptEncodings[encodingID];case 3:if(1===encodingID||10===encodingID)return"utf-16"}}function reverseDict(dict){var result={};for(var key in dict)result[dict[key]]=parseInt(key);return result}function makeNameRecord(platformID,encodingID,languageID,nameID,length,offset){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:platformID},{name:"encodingID",type:"USHORT",value:encodingID},{name:"languageID",type:"USHORT",value:languageID},{name:"nameID",type:"USHORT",value:nameID},{name:"length",type:"USHORT",value:length},{name:"offset",type:"USHORT",value:offset}])}function addStringToPool(s,pool){var offset=function findSubArray(needle,haystack){var needleLength=needle.length,limit=haystack.length-needleLength+1;loop:for(var pos=0;pos<limit;pos++)for(;pos<limit;pos++){for(var k=0;k<needleLength;k++)if(haystack[pos+k]!==needle[k])continue loop;return pos}return-1}(s,pool);if(offset<0){offset=pool.length;for(var i=0,len=s.length;i<len;++i)pool.push(s[i])}return offset}var _name={parse:function parseNameTable(data,start,ltag){for(var name={},p=new parse.Parser(data,start),format=p.parseUShort(),count=p.parseUShort(),stringOffset=p.offset+p.parseUShort(),i=0;i<count;i++){var platformID=p.parseUShort(),encodingID=p.parseUShort(),languageID=p.parseUShort(),nameID=p.parseUShort(),property=nameTableNames[nameID]||nameID,byteLength=p.parseUShort(),offset=p.parseUShort(),language=getLanguageCode(platformID,languageID,ltag),encoding=getEncoding(platformID,encodingID,languageID);if(void 0!==encoding&&void 0!==language){var text=void 0;if(text="utf-16"===encoding?decode.UTF16(data,stringOffset+offset,byteLength):decode.MACSTRING(data,stringOffset+offset,byteLength,encoding)){var translations=name[property];void 0===translations&&(translations=name[property]={}),translations[language]=text}}}return 1===format&&p.parseUShort(),name},make:function makeNameTable(names,ltag){var nameID,nameIDs=[],namesWithNumericKeys={},nameTableIds=reverseDict(nameTableNames);for(var key in names){var id=nameTableIds[key];if(void 0===id&&(id=key),nameID=parseInt(id),isNaN(nameID))throw new Error('Name table entry "'+key+'" does not exist, see nameTableNames for complete list.');namesWithNumericKeys[nameID]=names[key],nameIDs.push(nameID)}for(var macLanguageIds=reverseDict(macLanguages),windowsLanguageIds=reverseDict(windowsLanguages),nameRecords=[],stringPool=[],i=0;i<nameIDs.length;i++){var translations=namesWithNumericKeys[nameID=nameIDs[i]];for(var lang in translations){var text=translations[lang],macPlatform=1,macLanguage=macLanguageIds[lang],macScript=macLanguageToScript[macLanguage],macEncoding=getEncoding(macPlatform,macScript,macLanguage),macName=encode.MACSTRING(text,macEncoding);void 0===macName&&(macPlatform=0,(macLanguage=ltag.indexOf(lang))<0&&(macLanguage=ltag.length,ltag.push(lang)),macScript=4,macName=encode.UTF16(text));var macNameOffset=addStringToPool(macName,stringPool);nameRecords.push(makeNameRecord(macPlatform,macScript,macLanguage,nameID,macName.length,macNameOffset));var winLanguage=windowsLanguageIds[lang];if(void 0!==winLanguage){var winName=encode.UTF16(text),winNameOffset=addStringToPool(winName,stringPool);nameRecords.push(makeNameRecord(3,1,winLanguage,nameID,winName.length,winNameOffset))}}}nameRecords.sort((function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID}));for(var t=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:nameRecords.length},{name:"stringOffset",type:"USHORT",value:6+12*nameRecords.length}]),r=0;r<nameRecords.length;r++)t.fields.push({name:"record_"+r,type:"RECORD",value:nameRecords[r]});return t.fields.push({name:"strings",type:"LITERAL",value:stringPool}),t}},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var os2={parse:function parseOS2Table(data,start){var os2={},p=new parse.Parser(data,start);os2.version=p.parseUShort(),os2.xAvgCharWidth=p.parseShort(),os2.usWeightClass=p.parseUShort(),os2.usWidthClass=p.parseUShort(),os2.fsType=p.parseUShort(),os2.ySubscriptXSize=p.parseShort(),os2.ySubscriptYSize=p.parseShort(),os2.ySubscriptXOffset=p.parseShort(),os2.ySubscriptYOffset=p.parseShort(),os2.ySuperscriptXSize=p.parseShort(),os2.ySuperscriptYSize=p.parseShort(),os2.ySuperscriptXOffset=p.parseShort(),os2.ySuperscriptYOffset=p.parseShort(),os2.yStrikeoutSize=p.parseShort(),os2.yStrikeoutPosition=p.parseShort(),os2.sFamilyClass=p.parseShort(),os2.panose=[];for(var i=0;i<10;i++)os2.panose[i]=p.parseByte();return os2.ulUnicodeRange1=p.parseULong(),os2.ulUnicodeRange2=p.parseULong(),os2.ulUnicodeRange3=p.parseULong(),os2.ulUnicodeRange4=p.parseULong(),os2.achVendID=String.fromCharCode(p.parseByte(),p.parseByte(),p.parseByte(),p.parseByte()),os2.fsSelection=p.parseUShort(),os2.usFirstCharIndex=p.parseUShort(),os2.usLastCharIndex=p.parseUShort(),os2.sTypoAscender=p.parseShort(),os2.sTypoDescender=p.parseShort(),os2.sTypoLineGap=p.parseShort(),os2.usWinAscent=p.parseUShort(),os2.usWinDescent=p.parseUShort(),os2.version>=1&&(os2.ulCodePageRange1=p.parseULong(),os2.ulCodePageRange2=p.parseULong()),os2.version>=2&&(os2.sxHeight=p.parseShort(),os2.sCapHeight=p.parseShort(),os2.usDefaultChar=p.parseUShort(),os2.usBreakChar=p.parseUShort(),os2.usMaxContent=p.parseUShort()),os2},make:function makeOS2Table(options){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],options)},unicodeRanges,getUnicodeRange:function getUnicodeRange(unicode){for(var i=0;i<unicodeRanges.length;i+=1){var range=unicodeRanges[i];if(unicode>=range.begin&&unicode<range.end)return i}return-1}};var post={parse:function parsePostTable(data,start){var post={},p=new parse.Parser(data,start);switch(post.version=p.parseVersion(),post.italicAngle=p.parseFixed(),post.underlinePosition=p.parseShort(),post.underlineThickness=p.parseShort(),post.isFixedPitch=p.parseULong(),post.minMemType42=p.parseULong(),post.maxMemType42=p.parseULong(),post.minMemType1=p.parseULong(),post.maxMemType1=p.parseULong(),post.version){case 1:post.names=standardNames.slice();break;case 2:post.numberOfGlyphs=p.parseUShort(),post.glyphNameIndex=new Array(post.numberOfGlyphs);for(var i=0;i<post.numberOfGlyphs;i++)post.glyphNameIndex[i]=p.parseUShort();post.names=[];for(var i$1=0;i$1<post.numberOfGlyphs;i$1++)if(post.glyphNameIndex[i$1]>=standardNames.length){var nameLength=p.parseChar();post.names.push(p.parseString(nameLength))}break;case 2.5:post.numberOfGlyphs=p.parseUShort(),post.offset=new Array(post.numberOfGlyphs);for(var i$2=0;i$2<post.numberOfGlyphs;i$2++)post.offset[i$2]=p.parseChar()}return post},make:function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},subtableParsers=new Array(9);subtableParsers[1]=function parseLookup1(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();return 1===substFormat?{substFormat:1,coverage:this.parsePointer(Parser.coverage),deltaGlyphId:this.parseUShort()}:2===substFormat?{substFormat:2,coverage:this.parsePointer(Parser.coverage),substitute:this.parseOffset16List()}:void check.assert(!1,"0x"+start.toString(16)+": lookup type 1 format must be 1 or 2.")},subtableParsers[2]=function parseLookup2(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat,coverage:this.parsePointer(Parser.coverage),sequences:this.parseListOfLists()}},subtableParsers[3]=function parseLookup3(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat,coverage:this.parsePointer(Parser.coverage),alternateSets:this.parseListOfLists()}},subtableParsers[4]=function parseLookup4(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB ligature table identifier-format must be 1"),{substFormat,coverage:this.parsePointer(Parser.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var lookupRecordDesc={sequenceIndex:Parser.uShort,lookupListIndex:Parser.uShort};subtableParsers[5]=function parseLookup5(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();if(1===substFormat)return{substFormat,coverage:this.parsePointer(Parser.coverage),ruleSets:this.parseListOfLists((function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{input:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}))};if(2===substFormat)return{substFormat,coverage:this.parsePointer(Parser.coverage),classDef:this.parsePointer(Parser.classDef),classSets:this.parseListOfLists((function(){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{classes:this.parseUShortList(glyphCount-1),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}))};if(3===substFormat){var glyphCount=this.parseUShort(),substCount=this.parseUShort();return{substFormat,coverages:this.parseList(glyphCount,Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(substCount,lookupRecordDesc)}}check.assert(!1,"0x"+start.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},subtableParsers[6]=function parseLookup6(){var start=this.offset+this.relativeOffset,substFormat=this.parseUShort();return 1===substFormat?{substFormat:1,coverage:this.parsePointer(Parser.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}}))}:2===substFormat?{substFormat:2,coverage:this.parsePointer(Parser.coverage),backtrackClassDef:this.parsePointer(Parser.classDef),inputClassDef:this.parsePointer(Parser.classDef),lookaheadClassDef:this.parsePointer(Parser.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}}))}:3===substFormat?{substFormat:3,backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),inputCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)}:void check.assert(!1,"0x"+start.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},subtableParsers[7]=function parseLookup7(){var substFormat=this.parseUShort();check.argument(1===substFormat,"GSUB Extension Substitution subtable identifier-format must be 1");var extensionLookupType=this.parseUShort(),extensionParser=new Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:extensionLookupType,extension:subtableParsers[extensionLookupType].call(extensionParser)}},subtableParsers[8]=function parseLookup8(){var substFormat=this.parseUShort();return check.argument(1===substFormat,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat,coverage:this.parsePointer(Parser.coverage),backtrackCoverage:this.parseList(Parser.pointer(Parser.coverage)),lookaheadCoverage:this.parseList(Parser.pointer(Parser.coverage)),substitutes:this.parseUShortList()}};var subtableMakers=new Array(9);subtableMakers[1]=function makeLookup1(subtable){return 1===subtable.substFormat?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)},{name:"deltaGlyphID",type:"USHORT",value:subtable.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.ushortList("substitute",subtable.substitute)))},subtableMakers[2]=function makeLookup2(subtable){return check.assert(1===subtable.substFormat,"Lookup type 2 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("seqSet",subtable.sequences,(function(sequenceSet){return new table.Table("sequenceSetTable",table.ushortList("sequence",sequenceSet))}))))},subtableMakers[3]=function makeLookup3(subtable){return check.assert(1===subtable.substFormat,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("altSet",subtable.alternateSets,(function(alternateSet){return new table.Table("alternateSetTable",table.ushortList("alternate",alternateSet))}))))},subtableMakers[4]=function makeLookup4(subtable){return check.assert(1===subtable.substFormat,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("ligSet",subtable.ligatureSets,(function(ligatureSet){return new table.Table("ligatureSetTable",table.tableList("ligature",ligatureSet,(function(ligature){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:ligature.ligGlyph}].concat(table.ushortList("component",ligature.components,ligature.components.length+1)))})))}))))},subtableMakers[6]=function makeLookup6(subtable){if(1===subtable.substFormat){var returnTable=new table.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:subtable.substFormat},{name:"coverage",type:"TABLE",value:new table.Coverage(subtable.coverage)}].concat(table.tableList("chainRuleSet",subtable.chainRuleSets,(function(chainRuleSet){return new table.Table("chainRuleSetTable",table.tableList("chainRule",chainRuleSet,(function(chainRule){var tableData=table.ushortList("backtrackGlyph",chainRule.backtrack,chainRule.backtrack.length).concat(table.ushortList("inputGlyph",chainRule.input,chainRule.input.length+1)).concat(table.ushortList("lookaheadGlyph",chainRule.lookahead,chainRule.lookahead.length)).concat(table.ushortList("substitution",[],chainRule.lookupRecords.length));return chainRule.lookupRecords.forEach((function(record,i){tableData=tableData.concat({name:"sequenceIndex"+i,type:"USHORT",value:record.sequenceIndex}).concat({name:"lookupListIndex"+i,type:"USHORT",value:record.lookupListIndex})})),new table.Table("chainRuleTable",tableData)})))}))));return returnTable}if(2===subtable.substFormat)check.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(3===subtable.substFormat){var tableData=[{name:"substFormat",type:"USHORT",value:subtable.substFormat}];return tableData.push({name:"backtrackGlyphCount",type:"USHORT",value:subtable.backtrackCoverage.length}),subtable.backtrackCoverage.forEach((function(coverage,i){tableData.push({name:"backtrackCoverage"+i,type:"TABLE",value:new table.Coverage(coverage)})})),tableData.push({name:"inputGlyphCount",type:"USHORT",value:subtable.inputCoverage.length}),subtable.inputCoverage.forEach((function(coverage,i){tableData.push({name:"inputCoverage"+i,type:"TABLE",value:new table.Coverage(coverage)})})),tableData.push({name:"lookaheadGlyphCount",type:"USHORT",value:subtable.lookaheadCoverage.length}),subtable.lookaheadCoverage.forEach((function(coverage,i){tableData.push({name:"lookaheadCoverage"+i,type:"TABLE",value:new table.Coverage(coverage)})})),tableData.push({name:"substitutionCount",type:"USHORT",value:subtable.lookupRecords.length}),subtable.lookupRecords.forEach((function(record,i){tableData=tableData.concat({name:"sequenceIndex"+i,type:"USHORT",value:record.sequenceIndex}).concat({name:"lookupListIndex"+i,type:"USHORT",value:record.lookupListIndex})})),new table.Table("chainContextTable",tableData)}check.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};var gsub={parse:function parseGsubTable(data,start){var p=new Parser(data,start=start||0),tableVersion=p.parseVersion(1);return check.argument(1===tableVersion||1.1===tableVersion,"Unsupported GSUB table version."),1===tableVersion?{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers)}:{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers),variations:p.parseFeatureVariationsList()}},make:function makeGsubTable(gsub){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gsub.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gsub.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gsub.lookups,subtableMakers)}])}};var meta={parse:function parseMetaTable(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(1===tableVersion,"Unsupported META table version."),p.parseULong(),p.parseULong();for(var numDataMaps=p.parseULong(),tags={},i=0;i<numDataMaps;i++){var tag=p.parseTag(),dataOffset=p.parseULong(),dataLength=p.parseULong(),text=decode.UTF8(data,start+dataOffset,dataLength);tags[tag]=text}return tags},make:function makeMetaTable(tags){var numTags=Object.keys(tags).length,stringPool="",stringPoolOffset=16+12*numTags,result=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:stringPoolOffset},{name:"numTags",type:"ULONG",value:numTags}]);for(var tag in tags){var pos=stringPool.length;stringPool+=tags[tag],result.fields.push({name:"tag "+tag,type:"TAG",value:tag}),result.fields.push({name:"offset "+tag,type:"ULONG",value:stringPoolOffset+pos}),result.fields.push({name:"length "+tag,type:"ULONG",value:tags[tag].length})}return result.fields.push({name:"stringPool",type:"CHARARRAY",value:stringPool}),result}};function log2(v){return Math.log(v)/Math.log(2)|0}function computeCheckSum(bytes){for(;bytes.length%4!=0;)bytes.push(0);for(var sum=0,i=0;i<bytes.length;i+=4)sum+=(bytes[i]<<24)+(bytes[i+1]<<16)+(bytes[i+2]<<8)+bytes[i+3];return sum%=Math.pow(2,32)}function makeTableRecord(tag,checkSum,offset,length){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==tag?tag:""},{name:"checkSum",type:"ULONG",value:void 0!==checkSum?checkSum:0},{name:"offset",type:"ULONG",value:void 0!==offset?offset:0},{name:"length",type:"ULONG",value:void 0!==length?length:0}])}function makeSfntTable(tables){var sfnt=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);sfnt.tables=tables,sfnt.numTables=tables.length;var highestPowerOf2=Math.pow(2,log2(sfnt.numTables));sfnt.searchRange=16*highestPowerOf2,sfnt.entrySelector=log2(highestPowerOf2),sfnt.rangeShift=16*sfnt.numTables-sfnt.searchRange;for(var recordFields=[],tableFields=[],offset=sfnt.sizeOf()+makeTableRecord().sizeOf()*sfnt.numTables;offset%4!=0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<tables.length;i+=1){var t=tables[i];check.argument(4===t.tableName.length,"Table name"+t.tableName+" is invalid.");var tableLength=t.sizeOf(),tableRecord=makeTableRecord(t.tableName,computeCheckSum(t.encode()),offset,tableLength);for(recordFields.push({name:tableRecord.tag+" Table Record",type:"RECORD",value:tableRecord}),tableFields.push({name:t.tableName+" table",type:"RECORD",value:t}),offset+=tableLength,check.argument(!isNaN(offset),"Something went wrong calculating the offset.");offset%4!=0;)offset+=1,tableFields.push({name:"padding",type:"BYTE",value:0})}return recordFields.sort((function(r1,r2){return r1.value.tag>r2.value.tag?1:-1})),sfnt.fields=sfnt.fields.concat(recordFields),sfnt.fields=sfnt.fields.concat(tableFields),sfnt}function metricsForChar(font,chars,notFoundMetrics){for(var i=0;i<chars.length;i+=1){var glyphIndex=font.charToGlyphIndex(chars[i]);if(glyphIndex>0)return font.glyphs.get(glyphIndex).getMetrics()}return notFoundMetrics}function average(vs){for(var sum=0,i=0;i<vs.length;i+=1)sum+=vs[i];return sum/vs.length}var sfnt={make:makeSfntTable,fontToTable:function fontToSfntTable(font){for(var firstCharIndex,xMins=[],yMins=[],xMaxs=[],yMaxs=[],advanceWidths=[],leftSideBearings=[],rightSideBearings=[],lastCharIndex=0,ulUnicodeRange1=0,ulUnicodeRange2=0,ulUnicodeRange3=0,ulUnicodeRange4=0,i=0;i<font.glyphs.length;i+=1){var glyph=font.glyphs.get(i),unicode=0|glyph.unicode;if(isNaN(glyph.advanceWidth))throw new Error("Glyph "+glyph.name+" ("+i+"): advanceWidth is not a number.");(firstCharIndex>unicode||void 0===firstCharIndex)&&unicode>0&&(firstCharIndex=unicode),lastCharIndex<unicode&&(lastCharIndex=unicode);var position=os2.getUnicodeRange(unicode);if(position<32)ulUnicodeRange1|=1<<position;else if(position<64)ulUnicodeRange2|=1<<position-32;else if(position<96)ulUnicodeRange3|=1<<position-64;else{if(!(position<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ulUnicodeRange4|=1<<position-96}if(".notdef"!==glyph.name){var metrics=glyph.getMetrics();xMins.push(metrics.xMin),yMins.push(metrics.yMin),xMaxs.push(metrics.xMax),yMaxs.push(metrics.yMax),leftSideBearings.push(metrics.leftSideBearing),rightSideBearings.push(metrics.rightSideBearing),advanceWidths.push(glyph.advanceWidth)}}var globals={xMin:Math.min.apply(null,xMins),yMin:Math.min.apply(null,yMins),xMax:Math.max.apply(null,xMaxs),yMax:Math.max.apply(null,yMaxs),advanceWidthMax:Math.max.apply(null,advanceWidths),advanceWidthAvg:average(advanceWidths),minLeftSideBearing:Math.min.apply(null,leftSideBearings),maxLeftSideBearing:Math.max.apply(null,leftSideBearings),minRightSideBearing:Math.min.apply(null,rightSideBearings)};globals.ascender=font.ascender,globals.descender=font.descender;var headTable=head.make({flags:3,unitsPerEm:font.unitsPerEm,xMin:globals.xMin,yMin:globals.yMin,xMax:globals.xMax,yMax:globals.yMax,lowestRecPPEM:3,createdTimestamp:font.createdTimestamp}),hheaTable=hhea.make({ascender:globals.ascender,descender:globals.descender,advanceWidthMax:globals.advanceWidthMax,minLeftSideBearing:globals.minLeftSideBearing,minRightSideBearing:globals.minRightSideBearing,xMaxExtent:globals.maxLeftSideBearing+(globals.xMax-globals.xMin),numberOfHMetrics:font.glyphs.length}),maxpTable=maxp.make(font.glyphs.length),os2Table=os2.make(Object.assign({xAvgCharWidth:Math.round(globals.advanceWidthAvg),usFirstCharIndex:firstCharIndex,usLastCharIndex:lastCharIndex,ulUnicodeRange1,ulUnicodeRange2,ulUnicodeRange3,ulUnicodeRange4,sTypoAscender:globals.ascender,sTypoDescender:globals.descender,sTypoLineGap:0,usWinAscent:globals.yMax,usWinDescent:Math.abs(globals.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(font,"xyvw",{yMax:Math.round(globals.ascender/2)}).yMax,sCapHeight:metricsForChar(font,"HIKLEFJMNTZBDPRAGOQSUVWXY",globals).yMax,usDefaultChar:font.hasChar(" ")?32:0,usBreakChar:font.hasChar(" ")?32:0},font.tables.os2)),hmtxTable=hmtx.make(font.glyphs),cmapTable=cmap.make(font.glyphs),englishFamilyName=font.getEnglishName("fontFamily"),englishStyleName=font.getEnglishName("fontSubfamily"),englishFullName=englishFamilyName+" "+englishStyleName,postScriptName=font.getEnglishName("postScriptName");postScriptName||(postScriptName=englishFamilyName.replace(/\s/g,"")+"-"+englishStyleName);var names={};for(var n in font.names)names[n]=font.names[n];names.uniqueID||(names.uniqueID={en:font.getEnglishName("manufacturer")+":"+englishFullName}),names.postScriptName||(names.postScriptName={en:postScriptName}),names.preferredFamily||(names.preferredFamily=font.names.fontFamily),names.preferredSubfamily||(names.preferredSubfamily=font.names.fontSubfamily);var languageTags=[],nameTable=_name.make(names,languageTags),ltagTable=languageTags.length>0?ltag.make(languageTags):void 0,postTable=post.make(),cffTable=cff.make(font.glyphs,{version:font.getEnglishName("version"),fullName:englishFullName,familyName:englishFamilyName,weightName:englishStyleName,postScriptName,unitsPerEm:font.unitsPerEm,fontBBox:[0,globals.yMin,globals.ascender,globals.advanceWidthMax]}),metaTable=font.metas&&Object.keys(font.metas).length>0?meta.make(font.metas):void 0,tables=[headTable,hheaTable,maxpTable,os2Table,nameTable,cmapTable,postTable,cffTable,hmtxTable];ltagTable&&tables.push(ltagTable),font.tables.gsub&&tables.push(gsub.make(font.tables.gsub)),metaTable&&tables.push(metaTable);for(var sfntTable=makeSfntTable(tables),checkSum=computeCheckSum(sfntTable.encode()),tableFields=sfntTable.fields,checkSumAdjusted=!1,i$1=0;i$1<tableFields.length;i$1+=1)if("head table"===tableFields[i$1].name){tableFields[i$1].value.checkSumAdjustment=2981146554-checkSum,checkSumAdjusted=!0;break}if(!checkSumAdjusted)throw new Error("Could not find head table with checkSum to adjust.");return sfntTable},computeCheckSum};function searchTag(arr,tag){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid].tag;if(val===tag)return imid;val<tag?imin=imid+1:imax=imid-1}return-imin-1}function binSearch(arr,value){for(var imin=0,imax=arr.length-1;imin<=imax;){var imid=imin+imax>>>1,val=arr[imid];if(val===value)return imid;val<value?imin=imid+1:imax=imid-1}return-imin-1}function searchRange(ranges,value){for(var range,imin=0,imax=ranges.length-1;imin<=imax;){var imid=imin+imax>>>1,start=(range=ranges[imid]).start;if(start===value)return range;start<value?imin=imid+1:imax=imid-1}if(imin>0)return value>(range=ranges[imin-1]).end?0:range}function Layout(font,tableName){this.font=font,this.tableName=tableName}function Position(font){Layout.call(this,font,"gpos")}function Substitution(font){Layout.call(this,font,"gsub")}function arraysEqual(ar1,ar2){var n=ar1.length;if(n!==ar2.length)return!1;for(var i=0;i<n;i++)if(ar1[i]!==ar2[i])return!1;return!0}function getSubstFormat(lookupTable,format,defaultSubtable){for(var subtables=lookupTable.subtables,i=0;i<subtables.length;i++){var subtable=subtables[i];if(subtable.substFormat===format)return subtable}if(defaultSubtable)return subtables.push(defaultSubtable),defaultSubtable}function nodeBufferToArrayBuffer(buffer){for(var ab=new ArrayBuffer(buffer.length),view=new Uint8Array(ab),i=0;i<buffer.length;++i)view[i]=buffer[i];return ab}function checkArgument(expression,message){if(!expression)throw message}function parseGlyphCoordinate(p,flag,previousValue,shortVectorBitMask,sameBitMask){var v;return(flag&shortVectorBitMask)>0?(v=p.parseByte(),0==(flag&sameBitMask)&&(v=-v),v=previousValue+v):v=(flag&sameBitMask)>0?previousValue:previousValue+p.parseShort(),v}function parseGlyph(glyph,data,start){var flags,flag,p=new parse.Parser(data,start);if(glyph.numberOfContours=p.parseShort(),glyph._xMin=p.parseShort(),glyph._yMin=p.parseShort(),glyph._xMax=p.parseShort(),glyph._yMax=p.parseShort(),glyph.numberOfContours>0){for(var endPointIndices=glyph.endPointIndices=[],i=0;i<glyph.numberOfContours;i+=1)endPointIndices.push(p.parseUShort());glyph.instructionLength=p.parseUShort(),glyph.instructions=[];for(var i$1=0;i$1<glyph.instructionLength;i$1+=1)glyph.instructions.push(p.parseByte());var numberOfCoordinates=endPointIndices[endPointIndices.length-1]+1;flags=[];for(var i$2=0;i$2<numberOfCoordinates;i$2+=1)if(flag=p.parseByte(),flags.push(flag),(8&flag)>0)for(var repeatCount=p.parseByte(),j=0;j<repeatCount;j+=1)flags.push(flag),i$2+=1;if(check.argument(flags.length===numberOfCoordinates,"Bad flags."),endPointIndices.length>0){var point,points=[];if(numberOfCoordinates>0){for(var i$3=0;i$3<numberOfCoordinates;i$3+=1)flag=flags[i$3],(point={}).onCurve=!!(1&flag),point.lastPointOfContour=endPointIndices.indexOf(i$3)>=0,points.push(point);for(var px=0,i$4=0;i$4<numberOfCoordinates;i$4+=1)flag=flags[i$4],(point=points[i$4]).x=parseGlyphCoordinate(p,flag,px,2,16),px=point.x;for(var py=0,i$5=0;i$5<numberOfCoordinates;i$5+=1)flag=flags[i$5],(point=points[i$5]).y=parseGlyphCoordinate(p,flag,py,4,32),py=point.y}glyph.points=points}else glyph.points=[]}else if(0===glyph.numberOfContours)glyph.points=[];else{glyph.isComposite=!0,glyph.points=[],glyph.components=[];for(var moreComponents=!0;moreComponents;){flags=p.parseUShort();var component={glyphIndex:p.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&flags)>0?(2&flags)>0?(component.dx=p.parseShort(),component.dy=p.parseShort()):component.matchedPoints=[p.parseUShort(),p.parseUShort()]:(2&flags)>0?(component.dx=p.parseChar(),component.dy=p.parseChar()):component.matchedPoints=[p.parseByte(),p.parseByte()],(8&flags)>0?component.xScale=component.yScale=p.parseF2Dot14():(64&flags)>0?(component.xScale=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()):(128&flags)>0&&(component.xScale=p.parseF2Dot14(),component.scale01=p.parseF2Dot14(),component.scale10=p.parseF2Dot14(),component.yScale=p.parseF2Dot14()),glyph.components.push(component),moreComponents=!!(32&flags)}if(256&flags){glyph.instructionLength=p.parseUShort(),glyph.instructions=[];for(var i$6=0;i$6<glyph.instructionLength;i$6+=1)glyph.instructions.push(p.parseByte())}}}function transformPoints(points,transform){for(var newPoints=[],i=0;i<points.length;i+=1){var pt=points[i],newPt={x:transform.xScale*pt.x+transform.scale01*pt.y+transform.dx,y:transform.scale10*pt.x+transform.yScale*pt.y+transform.dy,onCurve:pt.onCurve,lastPointOfContour:pt.lastPointOfContour};newPoints.push(newPt)}return newPoints}function getPath(points){var p=new Path;if(!points)return p;for(var contours=function getContours(points){for(var contours=[],currentContour=[],i=0;i<points.length;i+=1){var pt=points[i];currentContour.push(pt),pt.lastPointOfContour&&(contours.push(currentContour),currentContour=[])}return check.argument(0===currentContour.length,"There are still points left in the current contour."),contours}(points),contourIndex=0;contourIndex<contours.length;++contourIndex){var contour=contours[contourIndex],prev=null,curr=contour[contour.length-1],next=contour[0];if(curr.onCurve)p.moveTo(curr.x,curr.y);else if(next.onCurve)p.moveTo(next.x,next.y);else{var start={x:.5*(curr.x+next.x),y:.5*(curr.y+next.y)};p.moveTo(start.x,start.y)}for(var i=0;i<contour.length;++i)if(prev=curr,curr=next,next=contour[(i+1)%contour.length],curr.onCurve)p.lineTo(curr.x,curr.y);else{var next2=next;prev.onCurve||{x:.5*(curr.x+prev.x),y:.5*(curr.y+prev.y)},next.onCurve||(next2={x:.5*(curr.x+next.x),y:.5*(curr.y+next.y)}),p.quadraticCurveTo(curr.x,curr.y,next2.x,next2.y)}p.closePath()}return p}function buildPath(glyphs,glyph){if(glyph.isComposite)for(var j=0;j<glyph.components.length;j+=1){var component=glyph.components[j],componentGlyph=glyphs.get(component.glyphIndex);if(componentGlyph.getPath(),componentGlyph.points){var transformedPoints=void 0;if(void 0===component.matchedPoints)transformedPoints=transformPoints(componentGlyph.points,component);else{if(component.matchedPoints[0]>glyph.points.length-1||component.matchedPoints[1]>componentGlyph.points.length-1)throw Error("Matched points out of range in "+glyph.name);var firstPt=glyph.points[component.matchedPoints[0]],secondPt=componentGlyph.points[component.matchedPoints[1]],transform={xScale:component.xScale,scale01:component.scale01,scale10:component.scale10,yScale:component.yScale,dx:0,dy:0};secondPt=transformPoints([secondPt],transform)[0],transform.dx=firstPt.x-secondPt.x,transform.dy=firstPt.y-secondPt.y,transformedPoints=transformPoints(componentGlyph.points,transform)}glyph.points=glyph.points.concat(transformedPoints)}}return getPath(glyph.points)}Layout.prototype={searchTag,binSearch,getTable:function(create){var layout=this.font.tables[this.tableName];return!layout&&create&&(layout=this.font.tables[this.tableName]=this.createDefaultTable()),layout},getScriptNames:function(){var layout=this.getTable();return layout?layout.scripts.map((function(script){return script.tag})):[]},getDefaultScriptName:function(){var layout=this.getTable();if(layout){for(var hasLatn=!1,i=0;i<layout.scripts.length;i++){var name=layout.scripts[i].tag;if("DFLT"===name)return name;"latn"===name&&(hasLatn=!0)}return hasLatn?"latn":void 0}},getScriptTable:function(script,create){var layout=this.getTable(create);if(layout){script=script||"DFLT";var scripts=layout.scripts,pos=searchTag(layout.scripts,script);if(pos>=0)return scripts[pos].script;if(create){var scr={tag:script,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return scripts.splice(-1-pos,0,scr),scr.script}}},getLangSysTable:function(script,language,create){var scriptTable=this.getScriptTable(script,create);if(scriptTable){if(!language||"dflt"===language||"DFLT"===language)return scriptTable.defaultLangSys;var pos=searchTag(scriptTable.langSysRecords,language);if(pos>=0)return scriptTable.langSysRecords[pos].langSys;if(create){var langSysRecord={tag:language,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return scriptTable.langSysRecords.splice(-1-pos,0,langSysRecord),langSysRecord.langSys}}},getFeatureTable:function(script,language,feature,create){var langSysTable=this.getLangSysTable(script,language,create);if(langSysTable){for(var featureRecord,featIndexes=langSysTable.featureIndexes,allFeatures=this.font.tables[this.tableName].features,i=0;i<featIndexes.length;i++)if((featureRecord=allFeatures[featIndexes[i]]).tag===feature)return featureRecord.feature;if(create){var index=allFeatures.length;return check.assert(0===index||feature>=allFeatures[index-1].tag,"Features must be added in alphabetical order."),featureRecord={tag:feature,feature:{params:0,lookupListIndexes:[]}},allFeatures.push(featureRecord),featIndexes.push(index),featureRecord.feature}}},getLookupTables:function(script,language,feature,lookupType,create){var featureTable=this.getFeatureTable(script,language,feature,create),tables=[];if(featureTable){for(var lookupTable,lookupListIndexes=featureTable.lookupListIndexes,allLookups=this.font.tables[this.tableName].lookups,i=0;i<lookupListIndexes.length;i++)(lookupTable=allLookups[lookupListIndexes[i]]).lookupType===lookupType&&tables.push(lookupTable);if(0===tables.length&&create){lookupTable={lookupType,lookupFlag:0,subtables:[],markFilteringSet:void 0};var index=allLookups.length;return allLookups.push(lookupTable),lookupListIndexes.push(index),[lookupTable]}}return tables},getGlyphClass:function(classDefTable,glyphIndex){switch(classDefTable.format){case 1:return classDefTable.startGlyph<=glyphIndex&&glyphIndex<classDefTable.startGlyph+classDefTable.classes.length?classDefTable.classes[glyphIndex-classDefTable.startGlyph]:0;case 2:var range=searchRange(classDefTable.ranges,glyphIndex);return range?range.classId:0}},getCoverageIndex:function(coverageTable,glyphIndex){switch(coverageTable.format){case 1:var index=binSearch(coverageTable.glyphs,glyphIndex);return index>=0?index:-1;case 2:var range=searchRange(coverageTable.ranges,glyphIndex);return range?range.index+glyphIndex-range.start:-1}},expandCoverage:function(coverageTable){if(1===coverageTable.format)return coverageTable.glyphs;for(var glyphs=[],ranges=coverageTable.ranges,i=0;i<ranges.length;i++)for(var range=ranges[i],start=range.start,end=range.end,j=start;j<=end;j++)glyphs.push(j);return glyphs}},Position.prototype=Layout.prototype,Position.prototype.init=function(){var script=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(script)},Position.prototype.getKerningValue=function(kerningLookups,leftIndex,rightIndex){for(var i=0;i<kerningLookups.length;i++)for(var subtables=kerningLookups[i].subtables,j=0;j<subtables.length;j++){var subtable=subtables[j],covIndex=this.getCoverageIndex(subtable.coverage,leftIndex);if(!(covIndex<0))switch(subtable.posFormat){case 1:for(var pairSet=subtable.pairSets[covIndex],k=0;k<pairSet.length;k++){var pair=pairSet[k];if(pair.secondGlyph===rightIndex)return pair.value1&&pair.value1.xAdvance||0}break;case 2:var class1=this.getGlyphClass(subtable.classDef1,leftIndex),class2=this.getGlyphClass(subtable.classDef2,rightIndex),pair$1=subtable.classRecords[class1][class2];return pair$1.value1&&pair$1.value1.xAdvance||0}}return 0},Position.prototype.getKerningTables=function(script,language){if(this.font.tables.gpos)return this.getLookupTables(script,language,"kern",2)},Substitution.prototype=Layout.prototype,Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Substitution.prototype.getSingle=function(feature,script,language){for(var substitutions=[],lookupTables=this.getLookupTables(script,language,feature,1),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++){var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),j=void 0;if(1===subtable.substFormat){var delta=subtable.deltaGlyphId;for(j=0;j<glyphs.length;j++){var glyph=glyphs[j];substitutions.push({sub:glyph,by:glyph+delta})}}else{var substitute=subtable.substitute;for(j=0;j<glyphs.length;j++)substitutions.push({sub:glyphs[j],by:substitute[j]})}}return substitutions},Substitution.prototype.getMultiple=function(feature,script,language){for(var substitutions=[],lookupTables=this.getLookupTables(script,language,feature,2),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++){var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),j=void 0;for(j=0;j<glyphs.length;j++){var glyph=glyphs[j],replacements=subtable.sequences[j];substitutions.push({sub:glyph,by:replacements})}}return substitutions},Substitution.prototype.getAlternates=function(feature,script,language){for(var alternates=[],lookupTables=this.getLookupTables(script,language,feature,3),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++)for(var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),alternateSets=subtable.alternateSets,j=0;j<glyphs.length;j++)alternates.push({sub:glyphs[j],by:alternateSets[j]});return alternates},Substitution.prototype.getLigatures=function(feature,script,language){for(var ligatures=[],lookupTables=this.getLookupTables(script,language,feature,4),idx=0;idx<lookupTables.length;idx++)for(var subtables=lookupTables[idx].subtables,i=0;i<subtables.length;i++)for(var subtable=subtables[i],glyphs=this.expandCoverage(subtable.coverage),ligatureSets=subtable.ligatureSets,j=0;j<glyphs.length;j++)for(var startGlyph=glyphs[j],ligSet=ligatureSets[j],k=0;k<ligSet.length;k++){var lig=ligSet[k];ligatures.push({sub:[startGlyph].concat(lig.components),by:lig.ligGlyph})}return ligatures},Substitution.prototype.addSingle=function(feature,substitution,script,language){var subtable=getSubstFormat(this.getLookupTables(script,language,feature,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(1===subtable.coverage.format,"Single: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=substitution.sub,pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);pos<0&&(pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.substitute.splice(pos,0,0)),subtable.substitute[pos]=substitution.by},Substitution.prototype.addMultiple=function(feature,substitution,script,language){check.assert(substitution.by instanceof Array&&substitution.by.length>1,'Multiple: "by" must be an array of two or more ids');var subtable=getSubstFormat(this.getLookupTables(script,language,feature,2,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});check.assert(1===subtable.coverage.format,"Multiple: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=substitution.sub,pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);pos<0&&(pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.sequences.splice(pos,0,0)),subtable.sequences[pos]=substitution.by},Substitution.prototype.addAlternate=function(feature,substitution,script,language){var subtable=getSubstFormat(this.getLookupTables(script,language,feature,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(1===subtable.coverage.format,"Alternate: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=substitution.sub,pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);pos<0&&(pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.alternateSets.splice(pos,0,0)),subtable.alternateSets[pos]=substitution.by},Substitution.prototype.addLigature=function(feature,ligature,script,language){var lookupTable=this.getLookupTables(script,language,feature,4,!0)[0],subtable=lookupTable.subtables[0];subtable||(subtable={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},lookupTable.subtables[0]=subtable),check.assert(1===subtable.coverage.format,"Ligature: unable to modify coverage table format "+subtable.coverage.format);var coverageGlyph=ligature.sub[0],ligComponents=ligature.sub.slice(1),ligatureTable={ligGlyph:ligature.by,components:ligComponents},pos=this.binSearch(subtable.coverage.glyphs,coverageGlyph);if(pos>=0){for(var ligatureSet=subtable.ligatureSets[pos],i=0;i<ligatureSet.length;i++)if(arraysEqual(ligatureSet[i].components,ligComponents))return;ligatureSet.push(ligatureTable)}else pos=-1-pos,subtable.coverage.glyphs.splice(pos,0,coverageGlyph),subtable.ligatureSets.splice(pos,0,[ligatureTable])},Substitution.prototype.getFeature=function(feature,script,language){if(/ss\d\d/.test(feature))return this.getSingle(feature,script,language);switch(feature){case"aalt":case"salt":return this.getSingle(feature,script,language).concat(this.getAlternates(feature,script,language));case"dlig":case"liga":case"rlig":return this.getLigatures(feature,script,language);case"ccmp":return this.getMultiple(feature,script,language).concat(this.getLigatures(feature,script,language));case"stch":return this.getMultiple(feature,script,language)}},Substitution.prototype.add=function(feature,sub,script,language){if(/ss\d\d/.test(feature))return this.addSingle(feature,sub,script,language);switch(feature){case"aalt":case"salt":return"number"==typeof sub.by?this.addSingle(feature,sub,script,language):this.addAlternate(feature,sub,script,language);case"dlig":case"liga":case"rlig":return this.addLigature(feature,sub,script,language);case"ccmp":return sub.by instanceof Array?this.addMultiple(feature,sub,script,language):this.addLigature(feature,sub,script,language)}};var instructionTable,exec,execGlyph,execComponent,glyf={getPath,parse:function parseGlyfTable(data,start,loca,font,opt){return opt.lowMemory?function parseGlyfTableOnLowMemory(data,start,loca,font){var glyphs=new glyphset.GlyphSet(font);return font._push=function(i){var offset=loca[i];offset!==loca[i+1]?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,glyphset.glyphLoader(font,i))},glyphs}(data,start,loca,font):function parseGlyfTableAll(data,start,loca,font){for(var glyphs=new glyphset.GlyphSet(font),i=0;i<loca.length-1;i+=1){var offset=loca[i];offset!==loca[i+1]?glyphs.push(i,glyphset.ttfGlyphLoader(font,i,parseGlyph,data,start+offset,buildPath)):glyphs.push(i,glyphset.glyphLoader(font,i))}return glyphs}(data,start,loca,font)}};function Hinting(font){this.font=font,this.getCommands=function(hPoints){return glyf.getPath(hPoints).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(v){return v}function roundToGrid(v){return Math.sign(v)*Math.round(Math.abs(v))}function roundToDoubleGrid(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function roundToHalfGrid(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function roundUpToGrid(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function roundDownToGrid(v){return Math.sign(v)*Math.floor(Math.abs(v))}var roundSuper=function(v){var period=this.srPeriod,phase=this.srPhase,sign=1;return v<0&&(v=-v,sign=-1),v+=this.srThreshold-phase,v=Math.trunc(v/period)*period,(v+=phase)<0?phase*sign:v*sign},xUnitVector={x:1,y:0,axis:"x",distance:function(p1,p2,o1,o2){return(o1?p1.xo:p1.x)-(o2?p2.xo:p2.x)},interpolate:function(p,rp1,rp2,pv){var do1,do2,doa1,doa2,dm1,dm2,dt;if(!pv||pv===this)return do1=p.xo-rp1.xo,do2=p.xo-rp2.xo,dm1=rp1.x-rp1.xo,dm2=rp2.x-rp2.xo,0===(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?void(p.x=p.xo+(dm1+dm2)/2):void(p.x=p.xo+(dm1*doa2+dm2*doa1)/dt);do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?xUnitVector.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):xUnitVector.setRelative(p,p,(dm1+dm2)/2,pv,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(p,rp,d,pv,org){if(pv&&pv!==this){var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y;p.x=rpdx+(p.y-rpdy)/pv.normalSlope}else p.x=(org?rp.xo:rp.x)+d},slope:0,touch:function(p){p.xTouched=!0},touched:function(p){return p.xTouched},untouch:function(p){p.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(p1,p2,o1,o2){return(o1?p1.yo:p1.y)-(o2?p2.yo:p2.y)},interpolate:function(p,rp1,rp2,pv){var do1,do2,doa1,doa2,dm1,dm2,dt;if(!pv||pv===this)return do1=p.yo-rp1.yo,do2=p.yo-rp2.yo,dm1=rp1.y-rp1.yo,dm2=rp2.y-rp2.yo,0===(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?void(p.y=p.yo+(dm1+dm2)/2):void(p.y=p.yo+(dm1*doa2+dm2*doa1)/dt);do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?yUnitVector.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):yUnitVector.setRelative(p,p,(dm1+dm2)/2,pv,!0)},normalSlope:0,setRelative:function(p,rp,d,pv,org){if(pv&&pv!==this){var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y;p.y=rpdy+pv.normalSlope*(p.x-rpdx)}else p.y=(org?rp.yo:rp.y)+d},slope:Number.POSITIVE_INFINITY,touch:function(p){p.yTouched=!0},touched:function(p){return p.yTouched},untouch:function(p){p.yTouched=!1}};function UnitVector(x,y){this.x=x,this.y=y,this.axis=void 0,this.slope=y/x,this.normalSlope=-x/y,Object.freeze(this)}function getUnitVector(x,y){var d=Math.sqrt(x*x+y*y);return y/=d,1===(x/=d)&&0===y?xUnitVector:0===x&&1===y?yUnitVector:new UnitVector(x,y)}function HPoint(x,y,lastPointOfContour,onCurve){this.x=this.xo=Math.round(64*x)/64,this.y=this.yo=Math.round(64*y)/64,this.lastPointOfContour=lastPointOfContour,this.onCurve=onCurve,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(xUnitVector),Object.freeze(yUnitVector),UnitVector.prototype.distance=function(p1,p2,o1,o2){return this.x*xUnitVector.distance(p1,p2,o1,o2)+this.y*yUnitVector.distance(p1,p2,o1,o2)},UnitVector.prototype.interpolate=function(p,rp1,rp2,pv){var dm1,dm2,do1,do2,doa1,doa2,dt;do1=pv.distance(p,rp1,!0,!0),do2=pv.distance(p,rp2,!0,!0),dm1=pv.distance(rp1,rp1,!1,!0),dm2=pv.distance(rp2,rp2,!1,!0),0!==(dt=(doa1=Math.abs(do1))+(doa2=Math.abs(do2)))?this.setRelative(p,p,(dm1*doa2+dm2*doa1)/dt,pv,!0):this.setRelative(p,p,(dm1+dm2)/2,pv,!0)},UnitVector.prototype.setRelative=function(p,rp,d,pv,org){pv=pv||this;var rpx=org?rp.xo:rp.x,rpy=org?rp.yo:rp.y,rpdx=rpx+d*pv.x,rpdy=rpy+d*pv.y,pvns=pv.normalSlope,fvs=this.slope,px=p.x,py=p.y;p.x=(fvs*px-pvns*rpdx+rpdy-py)/(fvs-pvns),p.y=fvs*(p.x-px)+py},UnitVector.prototype.touch=function(p){p.xTouched=!0,p.yTouched=!0},HPoint.prototype.nextTouched=function(v){for(var p=this.nextPointOnContour;!v.touched(p)&&p!==this;)p=p.nextPointOnContour;return p},HPoint.prototype.prevTouched=function(v){for(var p=this.prevPointOnContour;!v.touched(p)&&p!==this;)p=p.prevPointOnContour;return p};var HPZero=Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(env,prog){switch(this.env=env,this.stack=[],this.prog=prog,env){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}function initTZone(state){for(var tZone=state.tZone=new Array(state.gZone.length),i=0;i<tZone.length;i++)tZone[i]=new HPoint(0,0)}function skip(state,handleElse){var ins,prog=state.prog,ip=state.ip,nesting=1;do{if(88===(ins=prog[++ip]))nesting++;else if(89===ins)nesting--;else if(64===ins)ip+=prog[ip+1]+1;else if(65===ins)ip+=2*prog[ip+1]+1;else if(ins>=176&&ins<=183)ip+=ins-176+1;else if(ins>=184&&ins<=191)ip+=2*(ins-184+1);else if(handleElse&&1===nesting&&27===ins)break}while(nesting>0);state.ip=ip}function SVTCA(v,state){exports.DEBUG&&console.log(state.step,"SVTCA["+v.axis+"]"),state.fv=state.pv=state.dpv=v}function SPVTCA(v,state){exports.DEBUG&&console.log(state.step,"SPVTCA["+v.axis+"]"),state.pv=state.dpv=v}function SFVTCA(v,state){exports.DEBUG&&console.log(state.step,"SFVTCA["+v.axis+"]"),state.fv=v}function SPVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log("SPVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.pv=state.dpv=getUnitVector(dx,dy)}function SFVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log("SFVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.fv=getUnitVector(dx,dy)}function POP(state){exports.DEBUG&&console.log(state.step,"POP[]"),state.stack.pop()}function MDAP(round,state){var pi=state.stack.pop(),p=state.z0[pi],fv=state.fv,pv=state.pv;exports.DEBUG&&console.log(state.step,"MDAP["+round+"]",pi);var d=pv.distance(p,HPZero);round&&(d=state.round(d)),fv.setRelative(p,HPZero,d,pv),fv.touch(p),state.rp0=state.rp1=pi}function IUP(v,state){var cp,pp,np,z2=state.z2,pLen=z2.length-2;exports.DEBUG&&console.log(state.step,"IUP["+v.axis+"]");for(var i=0;i<pLen;i++)cp=z2[i],v.touched(cp)||(pp=cp.prevTouched(v))!==cp&&(pp===(np=cp.nextTouched(v))&&v.setRelative(cp,cp,v.distance(pp,pp,!1,!0),v,!0),v.interpolate(cp,pp,np,v))}function SHP(a,state){for(var stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,loop=state.loop,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi],d=pv.distance(rp,rp,!1,!0);fv.setRelative(p,p,d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"SHP["+(a?"rp1":"rp2")+"]",pi)}state.loop=1}function SHC(a,state){var stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,ci=stack.pop(),sp=state.z2[state.contours[ci]],p=sp;exports.DEBUG&&console.log(state.step,"SHC["+a+"]",ci);var d=pv.distance(rp,rp,!1,!0);do{p!==rp&&fv.setRelative(p,p,d,pv),p=p.nextPointOnContour}while(p!==sp)}function SHZ(a,state){var z,p,stack=state.stack,rpi=a?state.rp1:state.rp2,rp=(a?state.z0:state.z1)[rpi],fv=state.fv,pv=state.pv,e=stack.pop();switch(exports.DEBUG&&console.log(state.step,"SHZ["+a+"]",e),e){case 0:z=state.tZone;break;case 1:z=state.gZone;break;default:throw new Error("Invalid zone")}for(var d=pv.distance(rp,rp,!1,!0),pLen=z.length-2,i=0;i<pLen;i++)p=z[i],fv.setRelative(p,p,d,pv)}function MSIRP(a,state){var stack=state.stack,d=stack.pop()/64,pi=stack.pop(),p=state.z1[pi],rp0=state.z0[state.rp0],fv=state.fv,pv=state.pv;fv.setRelative(p,rp0,d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,"MSIRP["+a+"]",d,pi),state.rp1=state.rp0,state.rp2=pi,a&&(state.rp0=pi)}function MIAP(round,state){var stack=state.stack,n=stack.pop(),pi=stack.pop(),p=state.z0[pi],fv=state.fv,pv=state.pv,cv=state.cvt[n];exports.DEBUG&&console.log(state.step,"MIAP["+round+"]",n,"(",cv,")",pi);var d=pv.distance(p,HPZero);round&&(Math.abs(d-cv)<state.cvCutIn&&(d=cv),d=state.round(d)),fv.setRelative(p,HPZero,d,pv),0===state.zp0&&(p.xo=p.x,p.yo=p.y),fv.touch(p),state.rp0=state.rp1=pi}function GC(a,state){var stack=state.stack,pi=stack.pop(),p=state.z2[pi];exports.DEBUG&&console.log(state.step,"GC["+a+"]",pi),stack.push(64*state.dpv.distance(p,HPZero,a,!1))}function MD(a,state){var stack=state.stack,pi2=stack.pop(),pi1=stack.pop(),p2=state.z1[pi2],p1=state.z0[pi1],d=state.dpv.distance(p1,p2,a,a);exports.DEBUG&&console.log(state.step,"MD["+a+"]",pi2,pi1,"->",d),state.stack.push(Math.round(64*d))}function DELTAP123(b,state){var stack=state.stack,n=stack.pop(),fv=state.fv,pv=state.pv,ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift,z0=state.z0;exports.DEBUG&&console.log(state.step,"DELTAP["+b+"]",n,stack);for(var i=0;i<n;i++){var pi=stack.pop(),arg=stack.pop();if(base+((240&arg)>>4)===ppem){var mag=(15&arg)-8;mag>=0&&mag++,exports.DEBUG&&console.log(state.step,"DELTAPFIX",pi,"by",mag*ds);var p=z0[pi];fv.setRelative(p,p,mag*ds,pv)}}}function ROUND(dt,state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ROUND[]"),stack.push(64*state.round(n/64))}function DELTAC123(b,state){var stack=state.stack,n=stack.pop(),ppem=state.ppem,base=state.deltaBase+16*(b-1),ds=state.deltaShift;exports.DEBUG&&console.log(state.step,"DELTAC["+b+"]",n,stack);for(var i=0;i<n;i++){var c=stack.pop(),arg=stack.pop();if(base+((240&arg)>>4)===ppem){var mag=(15&arg)-8;mag>=0&&mag++;var delta=mag*ds;exports.DEBUG&&console.log(state.step,"DELTACFIX",c,"by",delta),state.cvt[c]+=delta}}}function SDPVTL(a,state){var dx,dy,stack=state.stack,p2i=stack.pop(),p1i=stack.pop(),p2=state.z2[p2i],p1=state.z1[p1i];exports.DEBUG&&console.log(state.step,"SDPVTL["+a+"]",p2i,p1i),a?(dx=p2.y-p1.y,dy=p1.x-p2.x):(dx=p1.x-p2.x,dy=p1.y-p2.y),state.dpv=getUnitVector(dx,dy)}function PUSHB(n,state){var stack=state.stack,prog=state.prog,ip=state.ip;exports.DEBUG&&console.log(state.step,"PUSHB["+n+"]");for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip}function PUSHW(n,state){var ip=state.ip,prog=state.prog,stack=state.stack;exports.DEBUG&&console.log(state.ip,"PUSHW["+n+"]");for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];32768&w&&(w=-(1+(65535^w))),stack.push(w)}state.ip=ip}function MDRP_MIRP(indirect,setRp0,keepD,ro,dt,state){var od,d,sign,cv,stack=state.stack,cvte=indirect&&stack.pop(),pi=stack.pop(),rp0i=state.rp0,rp=state.z0[rp0i],p=state.z1[pi],md=state.minDis,fv=state.fv,pv=state.dpv;sign=(d=od=pv.distance(p,rp,!0,!0))>=0?1:-1,d=Math.abs(d),indirect&&(cv=state.cvt[cvte],ro&&Math.abs(d-cv)<state.cvCutIn&&(d=cv)),keepD&&d<md&&(d=md),ro&&(d=state.round(d)),fv.setRelative(p,rp,sign*d,pv),fv.touch(p),exports.DEBUG&&console.log(state.step,(indirect?"MIRP[":"MDRP[")+(setRp0?"M":"m")+(keepD?">":"_")+(ro?"R":"_")+(0===dt?"Gr":1===dt?"Bl":2===dt?"Wh":"")+"]",indirect?cvte+"("+state.cvt[cvte]+","+cv+")":"",pi,"(d =",od,"->",sign*d,")"),state.rp1=state.rp0,state.rp2=pi,setRp0&&(state.rp0=pi)}function Token(char){this.char=char,this.state={},this.activeState=null}function ContextRange(startIndex,endOffset,contextName){this.contextName=contextName,this.startIndex=startIndex,this.endOffset=endOffset}function ContextChecker(contextName,checkStart,checkEnd){this.contextName=contextName,this.openRange=null,this.ranges=[],this.checkStart=checkStart,this.checkEnd=checkEnd}function ContextParams(context,currentIndex){this.context=context,this.index=currentIndex,this.length=context.length,this.current=context[currentIndex],this.backtrack=context.slice(0,currentIndex),this.lookahead=context.slice(currentIndex+1)}function Event(eventId){this.eventId=eventId,this.subscribers=[]}function initializeCoreEvents(events){var this$1=this,coreEvents=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];coreEvents.forEach((function(eventId){Object.defineProperty(this$1.events,eventId,{value:new Event(eventId)})})),events&&coreEvents.forEach((function(eventId){var event=events[eventId];"function"==typeof event&&this$1.events[eventId].subscribe(event)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(eventId){this$1.events[eventId].subscribe(this$1.updateContextsRanges)}))}function Tokenizer(events){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,events)}function isArabicChar(c){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(c)}function isIsolatedArabicChar(char){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(char)}function isTashkeelArabicChar(char){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(char)}function isLatinChar(c){return/[A-z]/.test(c)}function FeatureQuery(font){this.font=font,this.features={}}function SubstitutionAction(action){this.id=action.id,this.tag=action.tag,this.substitution=action.substitution}function lookupCoverage(glyphIndex,coverage){if(!glyphIndex)return-1;switch(coverage.format){case 1:return coverage.glyphs.indexOf(glyphIndex);case 2:for(var ranges=coverage.ranges,i=0;i<ranges.length;i++){var range=ranges[i];if(glyphIndex>=range.start&&glyphIndex<=range.end){var offset=glyphIndex-range.start;return range.index+offset}}break;default:return-1}return-1}function singleSubstitutionFormat1(glyphIndex,subtable){return-1===lookupCoverage(glyphIndex,subtable.coverage)?null:glyphIndex+subtable.deltaGlyphId}function singleSubstitutionFormat2(glyphIndex,subtable){var substituteIndex=lookupCoverage(glyphIndex,subtable.coverage);return-1===substituteIndex?null:subtable.substitute[substituteIndex]}function lookupCoverageList(coverageList,contextParams){for(var lookupList=[],i=0;i<coverageList.length;i++){var coverage=coverageList[i],glyphIndex=contextParams.current,lookupIndex=lookupCoverage(glyphIndex=Array.isArray(glyphIndex)?glyphIndex[0]:glyphIndex,coverage);-1!==lookupIndex&&lookupList.push(lookupIndex)}return lookupList.length!==coverageList.length?-1:lookupList}function chainingSubstitutionFormat3(contextParams,subtable){var lookupsCount=subtable.inputCoverage.length+subtable.lookaheadCoverage.length+subtable.backtrackCoverage.length;if(contextParams.context.length<lookupsCount)return[];var inputLookups=lookupCoverageList(subtable.inputCoverage,contextParams);if(-1===inputLookups)return[];var lookaheadOffset=subtable.inputCoverage.length-1;if(contextParams.lookahead.length<subtable.lookaheadCoverage.length)return[];for(var lookaheadContext=contextParams.lookahead.slice(lookaheadOffset);lookaheadContext.length&&isTashkeelArabicChar(lookaheadContext[0].char);)lookaheadContext.shift();var lookaheadParams=new ContextParams(lookaheadContext,0),lookaheadLookups=lookupCoverageList(subtable.lookaheadCoverage,lookaheadParams),backtrackContext=[].concat(contextParams.backtrack);for(backtrackContext.reverse();backtrackContext.length&&isTashkeelArabicChar(backtrackContext[0].char);)backtrackContext.shift();if(backtrackContext.length<subtable.backtrackCoverage.length)return[];var backtrackParams=new ContextParams(backtrackContext,0),backtrackLookups=lookupCoverageList(subtable.backtrackCoverage,backtrackParams),substitutions=[];if(inputLookups.length===subtable.inputCoverage.length&&lookaheadLookups.length===subtable.lookaheadCoverage.length&&backtrackLookups.length===subtable.backtrackCoverage.length)for(var i=0;i<subtable.lookupRecords.length;i++)for(var lookupListIndex=subtable.lookupRecords[i].lookupListIndex,lookupTable=this.getLookupByIndex(lookupListIndex),s=0;s<lookupTable.subtables.length;s++){var subtable$1=lookupTable.subtables[s],lookup=this.getLookupMethod(lookupTable,subtable$1);if("12"===this.getSubstitutionType(lookupTable,subtable$1))for(var n=0;n<inputLookups.length;n++){var substitution=lookup(contextParams.get(n));substitution&&substitutions.push(substitution)}}return substitutions}function ligatureSubstitutionFormat1(contextParams,subtable){var ligature,ligSetIndex=lookupCoverage(contextParams.current,subtable.coverage);if(-1===ligSetIndex)return null;for(var ligatureSet=subtable.ligatureSets[ligSetIndex],s=0;s<ligatureSet.length;s++){ligature=ligatureSet[s];for(var l=0;l<ligature.components.length;l++){if(contextParams.lookahead[l]!==ligature.components[l])break;if(l===ligature.components.length-1)return ligature}}return null}function decompositionSubstitutionFormat1(glyphIndex,subtable){var substituteIndex=lookupCoverage(glyphIndex,subtable.coverage);return-1===substituteIndex?null:subtable.sequences[substituteIndex]}Hinting.prototype.exec=function(glyph,ppem){if("number"!=typeof ppem)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var font=this.font,prepState=this._prepState;if(!prepState||prepState.ppem!==ppem){var fpgmState=this._fpgmState;if(!fpgmState){State.prototype=defaultState,(fpgmState=this._fpgmState=new State("fpgm",font.tables.fpgm)).funcs=[],fpgmState.font=font,exports.DEBUG&&(console.log("---EXEC FPGM---"),fpgmState.step=-1);try{exec(fpgmState)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}State.prototype=fpgmState,(prepState=this._prepState=new State("prep",font.tables.prep)).ppem=ppem;var oCvt=font.tables.cvt;if(oCvt)for(var cvt=prepState.cvt=new Array(oCvt.length),scale=ppem/font.unitsPerEm,c=0;c<oCvt.length;c++)cvt[c]=oCvt[c]*scale;else prepState.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),prepState.step=-1);try{exec(prepState)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(glyph,prepState)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},execGlyph=function(glyph,prepState){var contours,gZone,state,xScale=prepState.ppem/prepState.font.unitsPerEm,yScale=xScale,components=glyph.components;if(State.prototype=prepState,components){var font=prepState.font;gZone=[],contours=[];for(var i=0;i<components.length;i++){var c=components[i],cg=font.glyphs.get(c.glyphIndex);state=new State("glyf",cg.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+i+"---"),state.step=-1),execComponent(cg,state,xScale,yScale);for(var dx=Math.round(c.dx*xScale),dy=Math.round(c.dy*yScale),gz=state.gZone,cc=state.contours,pi=0;pi<gz.length;pi++){var p=gz[pi];p.xTouched=p.yTouched=!1,p.xo=p.x=p.x+dx,p.yo=p.y=p.y+dy}var gLen=gZone.length;gZone.push.apply(gZone,gz);for(var j=0;j<cc.length;j++)contours.push(cc[j]+gLen)}glyph.instructions&&!state.inhibitGridFit&&((state=new State("glyf",glyph.instructions)).gZone=state.z0=state.z1=state.z2=gZone,state.contours=contours,gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),state.step=-1),exec(state),gZone.length-=2)}else state=new State("glyf",glyph.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),state.step=-1),execComponent(glyph,state,xScale,yScale),gZone=state.gZone;return gZone},execComponent=function(glyph,state,xScale,yScale){for(var cp,sp,np,points=glyph.points||[],pLen=points.length,gZone=state.gZone=state.z0=state.z1=state.z2=[],contours=state.contours=[],i=0;i<pLen;i++)cp=points[i],gZone[i]=new HPoint(cp.x*xScale,cp.y*yScale,cp.lastPointOfContour,cp.onCurve);for(var i$1=0;i$1<pLen;i$1++)cp=gZone[i$1],sp||(sp=cp,contours.push(i$1)),cp.lastPointOfContour?(cp.nextPointOnContour=sp,sp.prevPointOnContour=cp,sp=void 0):(np=gZone[i$1+1],cp.nextPointOnContour=np,np.prevPointOnContour=cp);if(!state.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",state.stack);for(var i$2=0;i$2<pLen;i$2++)console.log(i$2,gZone[i$2].x,gZone[i$2].y)}if(gZone.push(new HPoint(0,0),new HPoint(Math.round(glyph.advanceWidth*xScale),0)),exec(state),gZone.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",state.stack);for(var i$3=0;i$3<pLen;i$3++)console.log(i$3,gZone[i$3].x,gZone[i$3].y)}}},exec=function(state){var prog=state.prog;if(prog){var ins,pLen=prog.length;for(state.ip=0;state.ip<pLen;state.ip++){if(exports.DEBUG&&state.step++,!(ins=instructionTable[prog[state.ip]]))throw new Error("unknown instruction: 0x"+Number(prog[state.ip]).toString(16));ins(state)}}},instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),function SPVFS(state){var stack=state.stack,y=stack.pop(),x=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,x),state.pv=state.dpv=getUnitVector(x,y)},function SFVFS(state){var stack=state.stack,y=stack.pop(),x=stack.pop();exports.DEBUG&&console.log(state.step,"SPVFS[]",y,x),state.fv=getUnitVector(x,y)},function GPV(state){var stack=state.stack,pv=state.pv;exports.DEBUG&&console.log(state.step,"GPV[]"),stack.push(16384*pv.x),stack.push(16384*pv.y)},function GFV(state){var stack=state.stack,fv=state.fv;exports.DEBUG&&console.log(state.step,"GFV[]"),stack.push(16384*fv.x),stack.push(16384*fv.y)},function SFVTPV(state){state.fv=state.pv,exports.DEBUG&&console.log(state.step,"SFVTPV[]")},function ISECT(state){var stack=state.stack,pa0i=stack.pop(),pa1i=stack.pop(),pb0i=stack.pop(),pb1i=stack.pop(),pi=stack.pop(),z0=state.z0,z1=state.z1,pa0=z0[pa0i],pa1=z0[pa1i],pb0=z1[pb0i],pb1=z1[pb1i],p=state.z2[pi];exports.DEBUG&&console.log("ISECT[], ",pa0i,pa1i,pb0i,pb1i,pi);var x1=pa0.x,y1=pa0.y,x2=pa1.x,y2=pa1.y,x3=pb0.x,y3=pb0.y,x4=pb1.x,y4=pb1.y,div=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4),f1=x1*y2-y1*x2,f2=x3*y4-y3*x4;p.x=(f1*(x3-x4)-f2*(x1-x2))/div,p.y=(f1*(y3-y4)-f2*(y1-y2))/div},function SRP0(state){state.rp0=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP0[]",state.rp0)},function SRP1(state){state.rp1=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP1[]",state.rp1)},function SRP2(state){state.rp2=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SRP2[]",state.rp2)},function SZP0(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP0[]",n),state.zp0=n,n){case 0:state.tZone||initTZone(state),state.z0=state.tZone;break;case 1:state.z0=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function SZP1(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP1[]",n),state.zp1=n,n){case 0:state.tZone||initTZone(state),state.z1=state.tZone;break;case 1:state.z1=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function SZP2(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZP2[]",n),state.zp2=n,n){case 0:state.tZone||initTZone(state),state.z2=state.tZone;break;case 1:state.z2=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function SZPS(state){var n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SZPS[]",n),state.zp0=state.zp1=state.zp2=n,n){case 0:state.tZone||initTZone(state),state.z0=state.z1=state.z2=state.tZone;break;case 1:state.z0=state.z1=state.z2=state.gZone;break;default:throw new Error("Invalid zone pointer")}},function SLOOP(state){state.loop=state.stack.pop(),exports.DEBUG&&console.log(state.step,"SLOOP[]",state.loop)},function RTG(state){exports.DEBUG&&console.log(state.step,"RTG[]"),state.round=roundToGrid},function RTHG(state){exports.DEBUG&&console.log(state.step,"RTHG[]"),state.round=roundToHalfGrid},function SMD(state){var d=state.stack.pop();exports.DEBUG&&console.log(state.step,"SMD[]",d),state.minDis=d/64},function ELSE(state){exports.DEBUG&&console.log(state.step,"ELSE[]"),skip(state,!1)},function JMPR(state){var o=state.stack.pop();exports.DEBUG&&console.log(state.step,"JMPR[]",o),state.ip+=o-1},function SCVTCI(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCVTCI[]",n),state.cvCutIn=n/64},void 0,void 0,function DUP(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DUP[]"),stack.push(stack[stack.length-1])},POP,function CLEAR(state){exports.DEBUG&&console.log(state.step,"CLEAR[]"),state.stack.length=0},function SWAP(state){var stack=state.stack,a=stack.pop(),b=stack.pop();exports.DEBUG&&console.log(state.step,"SWAP[]"),stack.push(a),stack.push(b)},function DEPTH(state){var stack=state.stack;exports.DEBUG&&console.log(state.step,"DEPTH[]"),stack.push(stack.length)},function CINDEX(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"CINDEX[]",k),stack.push(stack[stack.length-k])},function MINDEX(state){var stack=state.stack,k=stack.pop();exports.DEBUG&&console.log(state.step,"MINDEX[]",k),stack.push(stack.splice(stack.length-k,1)[0])},void 0,void 0,void 0,function LOOPCALL(state){var stack=state.stack,fn=stack.pop(),c=stack.pop();exports.DEBUG&&console.log(state.step,"LOOPCALL[]",fn,c);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn];for(var i=0;i<c;i++)exec(state),exports.DEBUG&&console.log(++state.step,i+1<c?"next loopcall":"done loopcall",i);state.ip=cip,state.prog=cprog},function CALL(state){var fn=state.stack.pop();exports.DEBUG&&console.log(state.step,"CALL[]",fn);var cip=state.ip,cprog=state.prog;state.prog=state.funcs[fn],exec(state),state.ip=cip,state.prog=cprog,exports.DEBUG&&console.log(++state.step,"returning from",fn)},function FDEF(state){if("fpgm"!==state.env)throw new Error("FDEF not allowed here");var stack=state.stack,prog=state.prog,ip=state.ip,fn=stack.pop(),ipBegin=ip;for(exports.DEBUG&&console.log(state.step,"FDEF[]",fn);45!==prog[++ip];);state.ip=ip,state.funcs[fn]=prog.slice(ipBegin+1,ip)},void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),function SHPIX(state){for(var stack=state.stack,loop=state.loop,fv=state.fv,d=stack.pop()/64,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"SHPIX[]",pi,d),fv.setRelative(p,p,d),fv.touch(p)}state.loop=1},function IP(state){for(var stack=state.stack,rp1i=state.rp1,rp2i=state.rp2,loop=state.loop,rp1=state.z0[rp1i],rp2=state.z1[rp2i],fv=state.fv,pv=state.dpv,z2=state.z2;loop--;){var pi=stack.pop(),p=z2[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"IP[]",pi,rp1i,"<->",rp2i),fv.interpolate(p,rp1,rp2,pv),fv.touch(p)}state.loop=1},MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),function ALIGNRP(state){for(var stack=state.stack,rp0i=state.rp0,rp0=state.z0[rp0i],loop=state.loop,fv=state.fv,pv=state.pv,z1=state.z1;loop--;){var pi=stack.pop(),p=z1[pi];exports.DEBUG&&console.log(state.step,(state.loop>1?"loop "+(state.loop-loop)+": ":"")+"ALIGNRP[]",pi),fv.setRelative(p,rp0,0,pv),fv.touch(p)}state.loop=1},function RTDG(state){exports.DEBUG&&console.log(state.step,"RTDG[]"),state.round=roundToDoubleGrid},MIAP.bind(void 0,0),MIAP.bind(void 0,1),function NPUSHB(state){var prog=state.prog,ip=state.ip,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHB[]",n);for(var i=0;i<n;i++)stack.push(prog[++ip]);state.ip=ip},function NPUSHW(state){var ip=state.ip,prog=state.prog,stack=state.stack,n=prog[++ip];exports.DEBUG&&console.log(state.step,"NPUSHW[]",n);for(var i=0;i<n;i++){var w=prog[++ip]<<8|prog[++ip];32768&w&&(w=-(1+(65535^w))),stack.push(w)}state.ip=ip},function WS(state){var stack=state.stack,store=state.store;store||(store=state.store=[]);var v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WS",v,l),store[l]=v},function RS(state){var stack=state.stack,store=state.store,l=stack.pop();exports.DEBUG&&console.log(state.step,"RS",l);var v=store&&store[l]||0;stack.push(v)},function WCVTP(state){var stack=state.stack,v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTP",v,l),state.cvt[l]=v/64},function RCVT(state){var stack=state.stack,cvte=stack.pop();exports.DEBUG&&console.log(state.step,"RCVT",cvte),stack.push(64*state.cvt[cvte])},GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),function MPPEM(state){exports.DEBUG&&console.log(state.step,"MPPEM[]"),state.stack.push(state.ppem)},void 0,function FLIPON(state){exports.DEBUG&&console.log(state.step,"FLIPON[]"),state.autoFlip=!0},void 0,void 0,function LT(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LT[]",e2,e1),stack.push(e1<e2?1:0)},function LTEQ(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"LTEQ[]",e2,e1),stack.push(e1<=e2?1:0)},function GT(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"GT[]",e2,e1),stack.push(e1>e2?1:0)},function GTEQ(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"GTEQ[]",e2,e1),stack.push(e1>=e2?1:0)},function EQ(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"EQ[]",e2,e1),stack.push(e2===e1?1:0)},function NEQ(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"NEQ[]",e2,e1),stack.push(e2!==e1?1:0)},function ODD(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ODD[]",n),stack.push(Math.trunc(n)%2?1:0)},function EVEN(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"EVEN[]",n),stack.push(Math.trunc(n)%2?0:1)},function IF(state){var test=state.stack.pop();exports.DEBUG&&console.log(state.step,"IF[]",test),test||(skip(state,!0),exports.DEBUG&&console.log(state.step,"EIF[]"))},function EIF(state){exports.DEBUG&&console.log(state.step,"EIF[]")},function AND(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"AND[]",e2,e1),stack.push(e2&&e1?1:0)},function OR(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"OR[]",e2,e1),stack.push(e2||e1?1:0)},function NOT(state){var stack=state.stack,e=stack.pop();exports.DEBUG&&console.log(state.step,"NOT[]",e),stack.push(e?0:1)},DELTAP123.bind(void 0,1),function SDB(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SDB[]",n),state.deltaBase=n},function SDS(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SDS[]",n),state.deltaShift=Math.pow(.5,n)},function ADD(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"ADD[]",n2,n1),stack.push(n1+n2)},function SUB(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"SUB[]",n2,n1),stack.push(n1-n2)},function DIV(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"DIV[]",n2,n1),stack.push(64*n1/n2)},function MUL(state){var stack=state.stack,n2=stack.pop(),n1=stack.pop();exports.DEBUG&&console.log(state.step,"MUL[]",n2,n1),stack.push(n1*n2/64)},function ABS(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"ABS[]",n),stack.push(Math.abs(n))},function NEG(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"NEG[]",n),stack.push(-n)},function FLOOR(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"FLOOR[]",n),stack.push(64*Math.floor(n/64))},function CEILING(state){var stack=state.stack,n=stack.pop();exports.DEBUG&&console.log(state.step,"CEILING[]",n),stack.push(64*Math.ceil(n/64))},ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,function WCVTF(state){var stack=state.stack,v=stack.pop(),l=stack.pop();exports.DEBUG&&console.log(state.step,"WCVTF[]",v,l),state.cvt[l]=v*state.ppem/state.font.unitsPerEm},DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),function SROUND(state){var period,n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"SROUND[]",n),state.round=roundSuper,192&n){case 0:period=.5;break;case 64:period=1;break;case 128:period=2;break;default:throw new Error("invalid SROUND value")}switch(state.srPeriod=period,48&n){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;case 32:state.srPhase=.5*period;break;case 48:state.srPhase=.75*period;break;default:throw new Error("invalid SROUND value")}n&=15,state.srThreshold=0===n?0:(n/8-.5)*period},function S45ROUND(state){var period,n=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"S45ROUND[]",n),state.round=roundSuper,192&n){case 0:period=Math.sqrt(2)/2;break;case 64:period=Math.sqrt(2);break;case 128:period=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(state.srPeriod=period,48&n){case 0:state.srPhase=0;break;case 16:state.srPhase=.25*period;break;case 32:state.srPhase=.5*period;break;case 48:state.srPhase=.75*period;break;default:throw new Error("invalid S45ROUND value")}n&=15,state.srThreshold=0===n?0:(n/8-.5)*period},void 0,void 0,function ROFF(state){exports.DEBUG&&console.log(state.step,"ROFF[]"),state.round=roundOff},void 0,function RUTG(state){exports.DEBUG&&console.log(state.step,"RUTG[]"),state.round=roundUpToGrid},function RDTG(state){exports.DEBUG&&console.log(state.step,"RDTG[]"),state.round=roundDownToGrid},POP,POP,void 0,void 0,void 0,void 0,void 0,function SCANCTRL(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANCTRL[]",n)},SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),function GETINFO(state){var stack=state.stack,sel=stack.pop(),r=0;exports.DEBUG&&console.log(state.step,"GETINFO[]",sel),1&sel&&(r=35),32&sel&&(r|=4096),stack.push(r)},void 0,function ROLL(state){var stack=state.stack,a=stack.pop(),b=stack.pop(),c=stack.pop();exports.DEBUG&&console.log(state.step,"ROLL[]"),stack.push(b),stack.push(a),stack.push(c)},function MAX(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MAX[]",e2,e1),stack.push(Math.max(e1,e2))},function MIN(state){var stack=state.stack,e2=stack.pop(),e1=stack.pop();exports.DEBUG&&console.log(state.step,"MIN[]",e2,e1),stack.push(Math.min(e1,e2))},function SCANTYPE(state){var n=state.stack.pop();exports.DEBUG&&console.log(state.step,"SCANTYPE[]",n)},function INSTCTRL(state){var s=state.stack.pop(),v=state.stack.pop();switch(exports.DEBUG&&console.log(state.step,"INSTCTRL[]",s,v),s){case 1:return void(state.inhibitGridFit=!!v);case 2:return void(state.ignoreCvt=!!v);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)],Token.prototype.setState=function(key,value){return this.state[key]=value,this.activeState={key,value:this.state[key]},this.activeState},Token.prototype.getState=function(stateId){return this.state[stateId]||null},Tokenizer.prototype.inboundIndex=function(index){return index>=0&&index<this.tokens.length},Tokenizer.prototype.composeRUD=function(RUDs){var this$1=this,state=RUDs.map((function(RUD){return this$1[RUD[0]].apply(this$1,RUD.slice(1).concat(true))})),hasFAILObject=function(obj){return"object"==typeof obj&&obj.hasOwnProperty("FAIL")};if(state.every(hasFAILObject))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:state.filter(hasFAILObject)};this.dispatch("composeRUD",[state.filter((function(op){return!hasFAILObject(op)}))])},Tokenizer.prototype.replaceRange=function(startIndex,offset,tokens,silent){offset=null!==offset?offset:this.tokens.length;var isTokenType=tokens.every((function(token){return token instanceof Token}));if(!isNaN(startIndex)&&this.inboundIndex(startIndex)&&isTokenType){var replaced=this.tokens.splice.apply(this.tokens,[startIndex,offset].concat(tokens));return silent||this.dispatch("replaceToken",[startIndex,offset,tokens]),[replaced,tokens]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Tokenizer.prototype.replaceToken=function(index,token,silent){if(!isNaN(index)&&this.inboundIndex(index)&&token instanceof Token){var replaced=this.tokens.splice(index,1,token);return silent||this.dispatch("replaceToken",[index,token]),[replaced[0],token]}return{FAIL:"replaceToken: invalid token or index."}},Tokenizer.prototype.removeRange=function(startIndex,offset,silent){offset=isNaN(offset)?this.tokens.length:offset;var tokens=this.tokens.splice(startIndex,offset);return silent||this.dispatch("removeRange",[tokens,startIndex,offset]),tokens},Tokenizer.prototype.removeToken=function(index,silent){if(!isNaN(index)&&this.inboundIndex(index)){var token=this.tokens.splice(index,1);return silent||this.dispatch("removeToken",[token,index]),token}return{FAIL:"removeToken: invalid token index."}},Tokenizer.prototype.insertToken=function(tokens,index,silent){return tokens.every((function(token){return token instanceof Token}))?(this.tokens.splice.apply(this.tokens,[index,0].concat(tokens)),silent||this.dispatch("insertToken",[tokens,index]),tokens):{FAIL:"insertToken: invalid token(s)."}},Tokenizer.prototype.registerModifier=function(modifierId,condition,modifier){this.events.newToken.subscribe((function(token,contextParams){var conditionParams=[token,contextParams],modifierParams=[token,contextParams];if(null===condition||!0===condition.apply(this,conditionParams)){var newStateValue=modifier.apply(this,modifierParams);token.setState(modifierId,newStateValue)}})),this.registeredModifiers.push(modifierId)},Event.prototype.subscribe=function(eventHandler){return"function"==typeof eventHandler?this.subscribers.push(eventHandler)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},Event.prototype.unsubscribe=function(subsId){this.subscribers.splice(subsId,1)},ContextParams.prototype.setCurrentIndex=function(index){this.index=index,this.current=this.context[index],this.backtrack=this.context.slice(0,index),this.lookahead=this.context.slice(index+1)},ContextParams.prototype.get=function(offset){switch(!0){case 0===offset:return this.current;case offset<0&&Math.abs(offset)<=this.backtrack.length:return this.backtrack.slice(offset)[0];case offset>0&&offset<=this.lookahead.length:return this.lookahead[offset-1];default:return null}},Tokenizer.prototype.rangeToText=function(range){if(range instanceof ContextRange)return this.getRangeTokens(range).map((function(token){return token.char})).join("")},Tokenizer.prototype.getText=function(){return this.tokens.map((function(token){return token.char})).join("")},Tokenizer.prototype.getContext=function(contextName){var context=this.registeredContexts[contextName];return context||null},Tokenizer.prototype.on=function(eventName,eventHandler){var event=this.events[eventName];return event?event.subscribe(eventHandler):null},Tokenizer.prototype.dispatch=function(eventName,args){var this$1=this,event=this.events[eventName];event instanceof Event&&event.subscribers.forEach((function(subscriber){subscriber.apply(this$1,args||[])}))},Tokenizer.prototype.registerContextChecker=function(contextName,contextStartCheck,contextEndCheck){if(this.getContext(contextName))return{FAIL:"context name '"+contextName+"' is already registered."};if("function"!=typeof contextStartCheck)return{FAIL:"missing context start check."};if("function"!=typeof contextEndCheck)return{FAIL:"missing context end check."};var contextCheckers=new ContextChecker(contextName,contextStartCheck,contextEndCheck);return this.registeredContexts[contextName]=contextCheckers,this.contextCheckers.push(contextCheckers),contextCheckers},Tokenizer.prototype.getRangeTokens=function(range){var endIndex=range.startIndex+range.endOffset;return[].concat(this.tokens.slice(range.startIndex,endIndex))},Tokenizer.prototype.getContextRanges=function(contextName){var context=this.getContext(contextName);return context?context.ranges:{FAIL:"context checker '"+contextName+"' is not registered."}},Tokenizer.prototype.resetContextsRanges=function(){var registeredContexts=this.registeredContexts;for(var contextName in registeredContexts){if(registeredContexts.hasOwnProperty(contextName))registeredContexts[contextName].ranges=[]}},Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var chars=this.tokens.map((function(token){return token.char})),i=0;i<chars.length;i++){var contextParams=new ContextParams(chars,i);this.runContextCheck(contextParams)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Tokenizer.prototype.setEndOffset=function(offset,contextName){var range=new ContextRange(this.getContext(contextName).openRange.startIndex,offset,contextName),ranges=this.getContext(contextName).ranges;return range.rangeId=contextName+"."+ranges.length,ranges.push(range),this.getContext(contextName).openRange=null,range},Tokenizer.prototype.runContextCheck=function(contextParams){var this$1=this,index=contextParams.index;this.contextCheckers.forEach((function(contextChecker){var contextName=contextChecker.contextName,openRange=this$1.getContext(contextName).openRange;if(!openRange&&contextChecker.checkStart(contextParams)&&(openRange=new ContextRange(index,null,contextName),this$1.getContext(contextName).openRange=openRange,this$1.dispatch("contextStart",[contextName,index])),openRange&&contextChecker.checkEnd(contextParams)){var offset=index-openRange.startIndex+1,range=this$1.setEndOffset(offset,contextName);this$1.dispatch("contextEnd",[contextName,range])}}))},Tokenizer.prototype.tokenize=function(text){this.tokens=[],this.resetContextsRanges();var chars=Array.from(text);this.dispatch("start");for(var i=0;i<chars.length;i++){var char=chars[i],contextParams=new ContextParams(chars,i);this.dispatch("next",[contextParams]),this.runContextCheck(contextParams);var token=new Token(char);this.tokens.push(token),this.dispatch("newToken",[token,contextParams])}return this.dispatch("end",[this.tokens]),this.tokens},FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var scripts=this.font.tables.gsub.scripts,s=0;s<scripts.length;s++){var script=scripts[s];if("DFLT"===script.tag)return script.script.defaultLangSys.featureIndexes}return[]},FeatureQuery.prototype.getScriptFeaturesIndexes=function(scriptTag){if(!this.font.tables.gsub)return[];if(!scriptTag)return this.getDefaultScriptFeaturesIndexes();for(var scripts=this.font.tables.gsub.scripts,i=0;i<scripts.length;i++){var script=scripts[i];if(script.tag===scriptTag&&script.script.defaultLangSys)return script.script.defaultLangSys.featureIndexes;var langSysRecords=script.langSysRecords;if(langSysRecords)for(var j=0;j<langSysRecords.length;j++){var langSysRecord=langSysRecords[j];if(langSysRecord.tag===scriptTag)return langSysRecord.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},FeatureQuery.prototype.mapTagsToFeatures=function(features,scriptTag){for(var tags={},i=0;i<features.length;i++){var tag=features[i].tag,feature=features[i].feature;tags[tag]=feature}this.features[scriptTag].tags=tags},FeatureQuery.prototype.getScriptFeatures=function(scriptTag){var features=this.features[scriptTag];if(this.features.hasOwnProperty(scriptTag))return features;var featuresIndexes=this.getScriptFeaturesIndexes(scriptTag);if(!featuresIndexes)return null;var gsub=this.font.tables.gsub;return features=featuresIndexes.map((function(index){return gsub.features[index]})),this.features[scriptTag]=features,this.mapTagsToFeatures(features,scriptTag),features},FeatureQuery.prototype.getSubstitutionType=function(lookupTable,subtable){return lookupTable.lookupType.toString()+subtable.substFormat.toString()},FeatureQuery.prototype.getLookupMethod=function(lookupTable,subtable){var this$1=this;switch(this.getSubstitutionType(lookupTable,subtable)){case"11":return function(glyphIndex){return singleSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};case"12":return function(glyphIndex){return singleSubstitutionFormat2.apply(this$1,[glyphIndex,subtable])};case"63":return function(contextParams){return chainingSubstitutionFormat3.apply(this$1,[contextParams,subtable])};case"41":return function(contextParams){return ligatureSubstitutionFormat1.apply(this$1,[contextParams,subtable])};case"21":return function(glyphIndex){return decompositionSubstitutionFormat1.apply(this$1,[glyphIndex,subtable])};default:throw new Error("lookupType: "+lookupTable.lookupType+" - substFormat: "+subtable.substFormat+" is not yet supported")}},FeatureQuery.prototype.lookupFeature=function(query){var contextParams=query.contextParams,currentIndex=contextParams.index,feature=this.getFeature({tag:query.tag,script:query.script});if(!feature)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+query.tag+"' for script '"+query.script+"'.");for(var lookups=this.getFeatureLookups(feature),substitutions=[].concat(contextParams.context),l=0;l<lookups.length;l++)for(var lookupTable=lookups[l],subtables=this.getLookupSubtables(lookupTable),s=0;s<subtables.length;s++){var subtable=subtables[s],substType=this.getSubstitutionType(lookupTable,subtable),lookup=this.getLookupMethod(lookupTable,subtable),substitution=void 0;switch(substType){case"11":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:11,tag:query.tag,substitution}));break;case"12":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:12,tag:query.tag,substitution}));break;case"63":substitution=lookup(contextParams),Array.isArray(substitution)&&substitution.length&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:63,tag:query.tag,substitution}));break;case"41":(substitution=lookup(contextParams))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:41,tag:query.tag,substitution}));break;case"21":(substitution=lookup(contextParams.current))&&substitutions.splice(currentIndex,1,new SubstitutionAction({id:21,tag:query.tag,substitution}))}contextParams=new ContextParams(substitutions,currentIndex),Array.isArray(substitution)&&!substitution.length||(substitution=null)}return substitutions.length?substitutions:null},FeatureQuery.prototype.supports=function(query){if(!query.script)return!1;this.getScriptFeatures(query.script);var supportedScript=this.features.hasOwnProperty(query.script);if(!query.tag)return supportedScript;var supportedFeature=this.features[query.script].some((function(feature){return feature.tag===query.tag}));return supportedScript&&supportedFeature},FeatureQuery.prototype.getLookupSubtables=function(lookupTable){return lookupTable.subtables||null},FeatureQuery.prototype.getLookupByIndex=function(index){return this.font.tables.gsub.lookups[index]||null},FeatureQuery.prototype.getFeatureLookups=function(feature){return feature.lookupListIndexes.map(this.getLookupByIndex.bind(this))},FeatureQuery.prototype.getFeature=function getFeature(query){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(query.script)||this.getScriptFeatures(query.script);var scriptFeatures=this.features[query.script];return scriptFeatures?scriptFeatures.tags[query.tag]?this.features[query.script].tags[query.tag]:null:{FAIL:"No feature for script "+query.script}};var arabicWordCheck={startCheck:function arabicWordStartCheck(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return null===prevChar&&isArabicChar(char)||!isArabicChar(prevChar)&&isArabicChar(char)},endCheck:function arabicWordEndCheck(contextParams){var nextChar=contextParams.get(1);return null===nextChar||!isArabicChar(nextChar)}};var arabicSentenceCheck={startCheck:function arabicSentenceStartCheck(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return(isArabicChar(char)||isTashkeelArabicChar(char))&&!isArabicChar(prevChar)},endCheck:function arabicSentenceEndCheck(contextParams){var nextChar=contextParams.get(1);switch(!0){case null===nextChar:return!0;case!isArabicChar(nextChar)&&!isTashkeelArabicChar(nextChar):var nextIsWhitespace=function isWhiteSpace(c){return/\s/.test(c)}(nextChar);if(!nextIsWhitespace)return!0;if(nextIsWhitespace){if(!contextParams.lookahead.some((function(c){return isArabicChar(c)||isTashkeelArabicChar(c)})))return!0}break;default:return!1}}};var SUBSTITUTIONS={11:function singleSubstitutionFormat1$1(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},12:function singleSubstitutionFormat2$1(action,tokens,index){tokens[index].setState(action.tag,action.substitution)},63:function chainingSubstitutionFormat3$1(action,tokens,index){action.substitution.forEach((function(subst,offset){tokens[index+offset].setState(action.tag,subst)}))},41:function ligatureSubstitutionFormat1$1(action,tokens,index){var token=tokens[index];token.setState(action.tag,action.substitution.ligGlyph);for(var compsCount=action.substitution.components.length,i=0;i<compsCount;i++)(token=tokens[index+i+1]).setState("deleted",!0)}};function applySubstitution(action,tokens,index){action instanceof SubstitutionAction&&SUBSTITUTIONS[action.id]&&SUBSTITUTIONS[action.id](action,tokens,index)}function arabicPresentationForms(range){var this$1=this,tags=this.featuresTags.arab,tokens=this.tokenizer.getRangeTokens(range);if(1!==tokens.length){var contextParams=new ContextParams(tokens.map((function(token){return token.getState("glyphIndex")})),0),charContextParams=new ContextParams(tokens.map((function(token){return token.char})),0);tokens.forEach((function(token,index){if(!isTashkeelArabicChar(token.char)){contextParams.setCurrentIndex(index),charContextParams.setCurrentIndex(index);var tag,CONNECT=0;switch(function willConnectPrev(charContextParams){for(var backtrack=[].concat(charContextParams.backtrack),i=backtrack.length-1;i>=0;i--){var prevChar=backtrack[i],isolated=isIsolatedArabicChar(prevChar),tashkeel=isTashkeelArabicChar(prevChar);if(!isolated&&!tashkeel)return!0;if(isolated)return!1}return!1}(charContextParams)&&(CONNECT|=1),function willConnectNext(charContextParams){if(isIsolatedArabicChar(charContextParams.current))return!1;for(var i=0;i<charContextParams.lookahead.length;i++)if(!isTashkeelArabicChar(charContextParams.lookahead[i]))return!0;return!1}(charContextParams)&&(CONNECT|=2),CONNECT){case 1:tag="fina";break;case 2:tag="init";break;case 3:tag="medi"}if(-1!==tags.indexOf(tag)){var substitutions=this$1.query.lookupFeature({tag,script:"arab",contextParams});if(substitutions instanceof Error)return console.info(substitutions.message);substitutions.forEach((function(action,index){action instanceof SubstitutionAction&&(applySubstitution(action,tokens,index),contextParams.context[index]=action.substitution)}))}}}))}}function getContextParams(tokens,index){return new ContextParams(tokens.map((function(token){return token.activeState.value})),index||0)}function arabicRequiredLigatures(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),contextParams=getContextParams(tokens);contextParams.context.forEach((function(glyphIndex,index){contextParams.setCurrentIndex(index);var substitutions=this$1.query.lookupFeature({tag:"rlig",script:"arab",contextParams});substitutions.length&&(substitutions.forEach((function(action){return applySubstitution(action,tokens,index)})),contextParams=getContextParams(tokens))}))}var latinWordCheck={startCheck:function latinWordStartCheck(contextParams){var char=contextParams.current,prevChar=contextParams.get(-1);return null===prevChar&&isLatinChar(char)||!isLatinChar(prevChar)&&isLatinChar(char)},endCheck:function latinWordEndCheck(contextParams){var nextChar=contextParams.get(1);return null===nextChar||!isLatinChar(nextChar)}};function getContextParams$1(tokens,index){return new ContextParams(tokens.map((function(token){return token.activeState.value})),index||0)}function latinLigature(range){var this$1=this,tokens=this.tokenizer.getRangeTokens(range),contextParams=getContextParams$1(tokens);contextParams.context.forEach((function(glyphIndex,index){contextParams.setCurrentIndex(index);var substitutions=this$1.query.lookupFeature({tag:"liga",script:"latn",contextParams});substitutions.length&&(substitutions.forEach((function(action){return applySubstitution(action,tokens,index)})),contextParams=getContextParams$1(tokens))}))}function Bidi(baseDir){this.baseDir=baseDir||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}function registerContextChecker(checkId){var check=this.contextChecks[checkId+"Check"];return this.tokenizer.registerContextChecker(checkId,check.startCheck,check.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var this$1=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(range){var rangeTokens=this$1.tokenizer.getRangeTokens(range);this$1.tokenizer.replaceRange(range.startIndex,range.endOffset,rangeTokens.reverse())}))}function checkGlyphIndexStatus(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(range){arabicPresentationForms.call(this$1,range)})))}function applyArabicRequireLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("arab")&&(-1!==this.featuresTags.arab.indexOf("rlig")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(range){arabicRequiredLigatures.call(this$1,range)}))))}function applyLatinLigatures(){var this$1=this;this.featuresTags.hasOwnProperty("latn")&&(-1!==this.featuresTags.latn.indexOf("liga")&&(checkGlyphIndexStatus.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(range){latinLigature.call(this$1,range)}))))}function Font(options){(options=options||{}).tables=options.tables||{},options.empty||(checkArgument(options.familyName,"When creating a new Font object, familyName is required."),checkArgument(options.styleName,"When creating a new Font object, styleName is required."),checkArgument(options.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(options.ascender,"When creating a new Font object, ascender is required."),checkArgument(options.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:options.familyName||" "},fontSubfamily:{en:options.styleName||" "},fullName:{en:options.fullName||options.familyName+" "+options.styleName},postScriptName:{en:options.postScriptName||(options.familyName+options.styleName).replace(/\s/g,"")},designer:{en:options.designer||" "},designerURL:{en:options.designerURL||" "},manufacturer:{en:options.manufacturer||" "},manufacturerURL:{en:options.manufacturerURL||" "},license:{en:options.license||" "},licenseURL:{en:options.licenseURL||" "},version:{en:options.version||"Version 0.1"},description:{en:options.description||" "},copyright:{en:options.copyright||" "},trademark:{en:options.trademark||" "}},this.unitsPerEm=options.unitsPerEm||1e3,this.ascender=options.ascender,this.descender=options.descender,this.createdTimestamp=options.createdTimestamp,this.tables=Object.assign(options.tables,{os2:Object.assign({usWeightClass:options.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:options.widthClass||this.usWidthClasses.MEDIUM,fsSelection:options.fsSelection||this.fsSelectionValues.REGULAR},options.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,options.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Hinting(this):void 0}})}function addName(name,names){var nameString=JSON.stringify(name),nameID=256;for(var nameKey in names){var n=parseInt(nameKey);if(n&&!(n<256)){if(JSON.stringify(names[nameKey])===nameString)return n;nameID<=n&&(nameID=n+1)}}return names[nameID]=name,nameID}function makeFvarAxis(n,axis,names){var nameID=addName(axis.name,names);return[{name:"tag_"+n,type:"TAG",value:axis.tag},{name:"minValue_"+n,type:"FIXED",value:axis.minValue<<16},{name:"defaultValue_"+n,type:"FIXED",value:axis.defaultValue<<16},{name:"maxValue_"+n,type:"FIXED",value:axis.maxValue<<16},{name:"flags_"+n,type:"USHORT",value:0},{name:"nameID_"+n,type:"USHORT",value:nameID}]}function parseFvarAxis(data,start,names){var axis={},p=new parse.Parser(data,start);return axis.tag=p.parseTag(),axis.minValue=p.parseFixed(),axis.defaultValue=p.parseFixed(),axis.maxValue=p.parseFixed(),p.skip("uShort",1),axis.name=names[p.parseUShort()]||{},axis}function makeFvarInstance(n,inst,axes,names){for(var fields=[{name:"nameID_"+n,type:"USHORT",value:addName(inst.name,names)},{name:"flags_"+n,type:"USHORT",value:0}],i=0;i<axes.length;++i){var axisTag=axes[i].tag;fields.push({name:"axis_"+n+" "+axisTag,type:"FIXED",value:inst.coordinates[axisTag]<<16})}return fields}function parseFvarInstance(data,start,axes,names){var inst={},p=new parse.Parser(data,start);inst.name=names[p.parseUShort()]||{},p.skip("uShort",1),inst.coordinates={};for(var i=0;i<axes.length;++i)inst.coordinates[axes[i].tag]=p.parseFixed();return inst}Bidi.prototype.setText=function(text){this.text=text},Bidi.prototype.contextChecks={latinWordCheck,arabicWordCheck,arabicSentenceCheck},Bidi.prototype.registerFeatures=function(script,tags){var this$1=this,supportedTags=tags.filter((function(tag){return this$1.query.supports({script,tag})}));this.featuresTags.hasOwnProperty(script)?this.featuresTags[script]=this.featuresTags[script].concat(supportedTags):this.featuresTags[script]=supportedTags},Bidi.prototype.applyFeatures=function(font,features){if(!font)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(font));for(var f=0;f<features.length;f++){var feature=features[f];this.query.supports({script:feature.script})&&this.registerFeatures(feature.script,feature.tags)}},Bidi.prototype.registerModifier=function(modifierId,condition,modifier){this.tokenizer.registerModifier(modifierId,condition,modifier)},Bidi.prototype.checkContextReady=function(contextId){return!!this.tokenizer.getContext(contextId)},Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)},Bidi.prototype.processText=function(text){this.text&&this.text===text||(this.setText(text),tokenizeText.call(this),this.applyFeaturesToContexts())},Bidi.prototype.getBidiText=function(text){return this.processText(text),this.tokenizer.getText()},Bidi.prototype.getTextGlyphs=function(text){this.processText(text);for(var indexes=[],i=0;i<this.tokenizer.tokens.length;i++){var token=this.tokenizer.tokens[i];if(!token.state.deleted){var index=token.activeState.value;indexes.push(Array.isArray(index)?index[0]:index)}}return indexes},Font.prototype.hasChar=function(c){return null!==this.encoding.charToGlyphIndex(c)},Font.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)},Font.prototype.charToGlyph=function(c){var glyphIndex=this.charToGlyphIndex(c),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.updateFeatures=function(options){return this.defaultRenderOptions.features.map((function(feature){return"latn"===feature.script?{script:"latn",tags:feature.tags.filter((function(tag){return options[tag]}))}:feature}))},Font.prototype.stringToGlyphs=function(s,options){var this$1=this,bidi=new Bidi;bidi.registerModifier("glyphIndex",null,(function(token){return this$1.charToGlyphIndex(token.char)}));var features=options?this.updateFeatures(options.features):this.defaultRenderOptions.features;bidi.applyFeatures(this,features);for(var indexes=bidi.getTextGlyphs(s),length=indexes.length,glyphs=new Array(length),notdef=this.glyphs.get(0),i=0;i<length;i+=1)glyphs[i]=this.glyphs.get(indexes[i])||notdef;return glyphs},Font.prototype.nameToGlyphIndex=function(name){return this.glyphNames.nameToGlyphIndex(name)},Font.prototype.nameToGlyph=function(name){var glyphIndex=this.nameToGlyphIndex(name),glyph=this.glyphs.get(glyphIndex);return glyph||(glyph=this.glyphs.get(0)),glyph},Font.prototype.glyphIndexToName=function(gid){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(gid):""},Font.prototype.getKerningValue=function(leftGlyph,rightGlyph){leftGlyph=leftGlyph.index||leftGlyph,rightGlyph=rightGlyph.index||rightGlyph;var gposKerning=this.position.defaultKerningTables;return gposKerning?this.position.getKerningValue(gposKerning,leftGlyph,rightGlyph):this.kerningPairs[leftGlyph+","+rightGlyph]||0},Font.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Font.prototype.forEachGlyph=function(text,x,y,fontSize,options,callback){x=void 0!==x?x:0,y=void 0!==y?y:0,fontSize=void 0!==fontSize?fontSize:72,options=Object.assign({},this.defaultRenderOptions,options);var kerningLookups,fontScale=1/this.unitsPerEm*fontSize,glyphs=this.stringToGlyphs(text,options);if(options.kerning){var script=options.script||this.position.getDefaultScriptName();kerningLookups=this.position.getKerningTables(script,options.language)}for(var i=0;i<glyphs.length;i+=1){var glyph=glyphs[i];if(callback.call(this,glyph,x,y,fontSize,options),glyph.advanceWidth&&(x+=glyph.advanceWidth*fontScale),options.kerning&&i<glyphs.length-1)x+=(kerningLookups?this.position.getKerningValue(kerningLookups,glyph.index,glyphs[i+1].index):this.getKerningValue(glyph,glyphs[i+1]))*fontScale;options.letterSpacing?x+=options.letterSpacing*fontSize:options.tracking&&(x+=options.tracking/1e3*fontSize)}return x},Font.prototype.getPath=function(text,x,y,fontSize,options){var fullPath=new Path;return this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){var glyphPath=glyph.getPath(gX,gY,gFontSize,options,this);fullPath.extend(glyphPath)})),fullPath},Font.prototype.getPaths=function(text,x,y,fontSize,options){var glyphPaths=[];return this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){var glyphPath=glyph.getPath(gX,gY,gFontSize,options,this);glyphPaths.push(glyphPath)})),glyphPaths},Font.prototype.getAdvanceWidth=function(text,fontSize,options){return this.forEachGlyph(text,0,0,fontSize,options,(function(){}))},Font.prototype.draw=function(ctx,text,x,y,fontSize,options){this.getPath(text,x,y,fontSize,options).draw(ctx)},Font.prototype.drawPoints=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){glyph.drawPoints(ctx,gX,gY,gFontSize)}))},Font.prototype.drawMetrics=function(ctx,text,x,y,fontSize,options){this.forEachGlyph(text,x,y,fontSize,options,(function(glyph,gX,gY,gFontSize){glyph.drawMetrics(ctx,gX,gY,gFontSize)}))},Font.prototype.getEnglishName=function(name){var translations=this.names[name];if(translations)return translations.en},Font.prototype.validate=function(){var _this=this;function assertNamePresent(name){var englishName=_this.getEnglishName(name);englishName&&englishName.trim().length}assertNamePresent("fontFamily"),assertNamePresent("weightName"),assertNamePresent("manufacturer"),assertNamePresent("copyright"),assertNamePresent("version"),this.unitsPerEm},Font.prototype.toTables=function(){return sfnt.fontToTable(this)},Font.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Font.prototype.toArrayBuffer=function(){for(var bytes=this.toTables().encode(),buffer=new ArrayBuffer(bytes.length),intArray=new Uint8Array(buffer),i=0;i<bytes.length;i++)intArray[i]=bytes[i];return buffer},Font.prototype.download=function(fileName){var familyName=this.getEnglishName("fontFamily"),styleName=this.getEnglishName("fontSubfamily");fileName=fileName||familyName.replace(/\s/g,"")+"-"+styleName+".otf";var arrayBuffer=this.toArrayBuffer();if(function isBrowser(){return"undefined"!=typeof window}())if(window.URL=window.URL||window.webkitURL,window.URL){var dataView=new DataView(arrayBuffer),blob=new Blob([dataView],{type:"font/opentype"}),link=document.createElement("a");link.href=window.URL.createObjectURL(blob),link.download=fileName;var event=document.createEvent("MouseEvents");event.initEvent("click",!0,!1),link.dispatchEvent(event)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var fs=__webpack_require__("?4db5"),buffer=function arrayBufferToNodeBuffer(ab){for(var buffer=new Buffer(ab.byteLength),view=new Uint8Array(ab),i=0;i<buffer.length;++i)buffer[i]=view[i];return buffer}(arrayBuffer);fs.writeFileSync(fileName,buffer)}},Font.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Font.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Font.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var fvar={make:function makeFvarTable(fvar,names){var result=new table.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:fvar.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:fvar.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*fvar.axes.length}]);result.offsetToData=result.sizeOf();for(var i=0;i<fvar.axes.length;i++)result.fields=result.fields.concat(makeFvarAxis(i,fvar.axes[i],names));for(var j=0;j<fvar.instances.length;j++)result.fields=result.fields.concat(makeFvarInstance(j,fvar.instances[j],fvar.axes,names));return result},parse:function parseFvarTable(data,start,names){var p=new parse.Parser(data,start),tableVersion=p.parseULong();check.argument(65536===tableVersion,"Unsupported fvar table version.");var offsetToData=p.parseOffset16();p.skip("uShort",1);for(var axisCount=p.parseUShort(),axisSize=p.parseUShort(),instanceCount=p.parseUShort(),instanceSize=p.parseUShort(),axes=[],i=0;i<axisCount;i++)axes.push(parseFvarAxis(data,start+offsetToData+i*axisSize,names));for(var instances=[],instanceStart=start+offsetToData+axisCount*axisSize,j=0;j<instanceCount;j++)instances.push(parseFvarInstance(data,instanceStart+j*instanceSize,axes,names));return{axes,instances}}},attachList=function(){return{coverage:this.parsePointer(Parser.coverage),attachPoints:this.parseList(Parser.pointer(Parser.uShortList))}},caretValue=function(){var format=this.parseUShort();return check.argument(1===format||2===format||3===format,"Unsupported CaretValue table version."),1===format?{coordinate:this.parseShort()}:2===format?{pointindex:this.parseShort()}:3===format?{coordinate:this.parseShort()}:void 0},ligGlyph=function(){return this.parseList(Parser.pointer(caretValue))},ligCaretList=function(){return{coverage:this.parsePointer(Parser.coverage),ligGlyphs:this.parseList(Parser.pointer(ligGlyph))}},markGlyphSets=function(){return this.parseUShort(),this.parseList(Parser.pointer(Parser.coverage))};var gdef={parse:function parseGDEFTable(data,start){var p=new Parser(data,start=start||0),tableVersion=p.parseVersion(1);check.argument(1===tableVersion||1.2===tableVersion||1.3===tableVersion,"Unsupported GDEF table version.");var gdef={version:tableVersion,classDef:p.parsePointer(Parser.classDef),attachList:p.parsePointer(attachList),ligCaretList:p.parsePointer(ligCaretList),markAttachClassDef:p.parsePointer(Parser.classDef)};return tableVersion>=1.2&&(gdef.markGlyphSets=p.parsePointer(markGlyphSets)),gdef}},subtableParsers$1=new Array(10);subtableParsers$1[1]=function parseLookup1(){var start=this.offset+this.relativeOffset,posformat=this.parseUShort();return 1===posformat?{posFormat:1,coverage:this.parsePointer(Parser.coverage),value:this.parseValueRecord()}:2===posformat?{posFormat:2,coverage:this.parsePointer(Parser.coverage),values:this.parseValueRecordList()}:void check.assert(!1,"0x"+start.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},subtableParsers$1[2]=function parseLookup2(){var start=this.offset+this.relativeOffset,posFormat=this.parseUShort();check.assert(1===posFormat||2===posFormat,"0x"+start.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var coverage=this.parsePointer(Parser.coverage),valueFormat1=this.parseUShort(),valueFormat2=this.parseUShort();if(1===posFormat)return{posFormat,coverage,valueFormat1,valueFormat2,pairSets:this.parseList(Parser.pointer(Parser.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}}))))};if(2===posFormat){var classDef1=this.parsePointer(Parser.classDef),classDef2=this.parsePointer(Parser.classDef),class1Count=this.parseUShort(),class2Count=this.parseUShort();return{posFormat,coverage,valueFormat1,valueFormat2,classDef1,classDef2,class1Count,class2Count,classRecords:this.parseList(class1Count,Parser.list(class2Count,(function(){return{value1:this.parseValueRecord(valueFormat1),value2:this.parseValueRecord(valueFormat2)}})))}}},subtableParsers$1[3]=function parseLookup3(){return{error:"GPOS Lookup 3 not supported"}},subtableParsers$1[4]=function parseLookup4(){return{error:"GPOS Lookup 4 not supported"}},subtableParsers$1[5]=function parseLookup5(){return{error:"GPOS Lookup 5 not supported"}},subtableParsers$1[6]=function parseLookup6(){return{error:"GPOS Lookup 6 not supported"}},subtableParsers$1[7]=function parseLookup7(){return{error:"GPOS Lookup 7 not supported"}},subtableParsers$1[8]=function parseLookup8(){return{error:"GPOS Lookup 8 not supported"}},subtableParsers$1[9]=function parseLookup9(){return{error:"GPOS Lookup 9 not supported"}};var subtableMakers$1=new Array(10);var gpos={parse:function parseGposTable(data,start){var p=new Parser(data,start=start||0),tableVersion=p.parseVersion(1);return check.argument(1===tableVersion||1.1===tableVersion,"Unsupported GPOS table version "+tableVersion),1===tableVersion?{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers$1)}:{version:tableVersion,scripts:p.parseScriptList(),features:p.parseFeatureList(),lookups:p.parseLookupList(subtableParsers$1),variations:p.parseFeatureVariationsList()}},make:function makeGposTable(gpos){return new table.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(gpos.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(gpos.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(gpos.lookups,subtableMakers$1)}])}};var kern={parse:function parseKernTable(data,start){var p=new parse.Parser(data,start),tableVersion=p.parseUShort();if(0===tableVersion)return function parseWindowsKernTable(p){var pairs={};p.skip("uShort");var subtableVersion=p.parseUShort();check.argument(0===subtableVersion,"Unsupported kern sub-table version."),p.skip("uShort",2);var nPairs=p.parseUShort();p.skip("uShort",3);for(var i=0;i<nPairs;i+=1){var leftIndex=p.parseUShort(),rightIndex=p.parseUShort(),value=p.parseShort();pairs[leftIndex+","+rightIndex]=value}return pairs}(p);if(1===tableVersion)return function parseMacKernTable(p){var pairs={};p.skip("uShort"),p.parseULong()>1&&console.warn("Only the first kern subtable is supported."),p.skip("uLong");var subtableVersion=255&p.parseUShort();if(p.skip("uShort"),0===subtableVersion){var nPairs=p.parseUShort();p.skip("uShort",3);for(var i=0;i<nPairs;i+=1){var leftIndex=p.parseUShort(),rightIndex=p.parseUShort(),value=p.parseShort();pairs[leftIndex+","+rightIndex]=value}}return pairs}(p);throw new Error("Unsupported kern table version ("+tableVersion+").")}};var loca={parse:function parseLocaTable(data,start,numGlyphs,shortVersion){for(var p=new parse.Parser(data,start),parseFn=shortVersion?p.parseUShort:p.parseULong,glyphOffsets=[],i=0;i<numGlyphs+1;i+=1){var glyphOffset=parseFn.call(p);shortVersion&&(glyphOffset*=2),glyphOffsets.push(glyphOffset)}return glyphOffsets}};function loadFromFile(path,callback){__webpack_require__("?4db5").readFile(path,(function(err,buffer){if(err)return callback(err.message);callback(null,nodeBufferToArrayBuffer(buffer))}))}function loadFromUrl(url,callback){var request=new XMLHttpRequest;request.open("get",url,!0),request.responseType="arraybuffer",request.onload=function(){return request.response?callback(null,request.response):callback("Font could not be loaded: "+request.statusText)},request.onerror=function(){callback("Font could not be loaded")},request.send()}function parseOpenTypeTableEntries(data,numTables){for(var tableEntries=[],p=12,i=0;i<numTables;i+=1){var tag=parse.getTag(data,p),checksum=parse.getULong(data,p+4),offset=parse.getULong(data,p+8),length=parse.getULong(data,p+12);tableEntries.push({tag,checksum,offset,length,compression:!1}),p+=16}return tableEntries}function uncompressTable(data,tableEntry){if("WOFF"===tableEntry.compression){var inBuffer=new Uint8Array(data.buffer,tableEntry.offset+2,tableEntry.compressedLength-2),outBuffer=new Uint8Array(tableEntry.length);if(tinyInflate(inBuffer,outBuffer),outBuffer.byteLength!==tableEntry.length)throw new Error("Decompression error: "+tableEntry.tag+" decompressed length doesn't match recorded length");return{data:new DataView(outBuffer.buffer,0),offset:0}}return{data,offset:tableEntry.offset}}function parseBuffer(buffer,opt){var indexToLocFormat,ltagTable;opt=null==opt?{}:opt;var numTables,cffTableEntry,fvarTableEntry,glyfTableEntry,gdefTableEntry,gposTableEntry,gsubTableEntry,hmtxTableEntry,kernTableEntry,locaTableEntry,nameTableEntry,metaTableEntry,p,font=new Font({empty:!0}),data=new DataView(buffer,0),tableEntries=[],signature=parse.getTag(data,0);if(signature===String.fromCharCode(0,1,0,0)||"true"===signature||"typ1"===signature)font.outlinesFormat="truetype",tableEntries=parseOpenTypeTableEntries(data,numTables=parse.getUShort(data,4));else if("OTTO"===signature)font.outlinesFormat="cff",tableEntries=parseOpenTypeTableEntries(data,numTables=parse.getUShort(data,4));else{if("wOFF"!==signature)throw new Error("Unsupported OpenType signature "+signature);var flavor=parse.getTag(data,4);if(flavor===String.fromCharCode(0,1,0,0))font.outlinesFormat="truetype";else{if("OTTO"!==flavor)throw new Error("Unsupported OpenType flavor "+signature);font.outlinesFormat="cff"}tableEntries=function parseWOFFTableEntries(data,numTables){for(var tableEntries=[],p=44,i=0;i<numTables;i+=1){var tag=parse.getTag(data,p),offset=parse.getULong(data,p+4),compLength=parse.getULong(data,p+8),origLength=parse.getULong(data,p+12),compression=void 0;compression=compLength<origLength&&"WOFF",tableEntries.push({tag,offset,compression,compressedLength:compLength,length:origLength}),p+=20}return tableEntries}(data,numTables=parse.getUShort(data,12))}for(var i=0;i<numTables;i+=1){var tableEntry=tableEntries[i],table=void 0;switch(tableEntry.tag){case"cmap":table=uncompressTable(data,tableEntry),font.tables.cmap=cmap.parse(table.data,table.offset),font.encoding=new CmapEncoding(font.tables.cmap);break;case"cvt ":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.cvt=p.parseShortList(tableEntry.length/2);break;case"fvar":fvarTableEntry=tableEntry;break;case"fpgm":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.fpgm=p.parseByteList(tableEntry.length);break;case"head":table=uncompressTable(data,tableEntry),font.tables.head=head.parse(table.data,table.offset),font.unitsPerEm=font.tables.head.unitsPerEm,indexToLocFormat=font.tables.head.indexToLocFormat;break;case"hhea":table=uncompressTable(data,tableEntry),font.tables.hhea=hhea.parse(table.data,table.offset),font.ascender=font.tables.hhea.ascender,font.descender=font.tables.hhea.descender,font.numberOfHMetrics=font.tables.hhea.numberOfHMetrics;break;case"hmtx":hmtxTableEntry=tableEntry;break;case"ltag":table=uncompressTable(data,tableEntry),ltagTable=ltag.parse(table.data,table.offset);break;case"maxp":table=uncompressTable(data,tableEntry),font.tables.maxp=maxp.parse(table.data,table.offset),font.numGlyphs=font.tables.maxp.numGlyphs;break;case"name":nameTableEntry=tableEntry;break;case"OS/2":table=uncompressTable(data,tableEntry),font.tables.os2=os2.parse(table.data,table.offset);break;case"post":table=uncompressTable(data,tableEntry),font.tables.post=post.parse(table.data,table.offset),font.glyphNames=new GlyphNames(font.tables.post);break;case"prep":table=uncompressTable(data,tableEntry),p=new parse.Parser(table.data,table.offset),font.tables.prep=p.parseByteList(tableEntry.length);break;case"glyf":glyfTableEntry=tableEntry;break;case"loca":locaTableEntry=tableEntry;break;case"CFF ":cffTableEntry=tableEntry;break;case"kern":kernTableEntry=tableEntry;break;case"GDEF":gdefTableEntry=tableEntry;break;case"GPOS":gposTableEntry=tableEntry;break;case"GSUB":gsubTableEntry=tableEntry;break;case"meta":metaTableEntry=tableEntry}}var nameTable=uncompressTable(data,nameTableEntry);if(font.tables.name=_name.parse(nameTable.data,nameTable.offset,ltagTable),font.names=font.tables.name,glyfTableEntry&&locaTableEntry){var shortVersion=0===indexToLocFormat,locaTable=uncompressTable(data,locaTableEntry),locaOffsets=loca.parse(locaTable.data,locaTable.offset,font.numGlyphs,shortVersion),glyfTable=uncompressTable(data,glyfTableEntry);font.glyphs=glyf.parse(glyfTable.data,glyfTable.offset,locaOffsets,font,opt)}else{if(!cffTableEntry)throw new Error("Font doesn't contain TrueType or CFF outlines.");var cffTable=uncompressTable(data,cffTableEntry);cff.parse(cffTable.data,cffTable.offset,font,opt)}var hmtxTable=uncompressTable(data,hmtxTableEntry);if(hmtx.parse(font,hmtxTable.data,hmtxTable.offset,font.numberOfHMetrics,font.numGlyphs,font.glyphs,opt),addGlyphNames(font,opt),kernTableEntry){var kernTable=uncompressTable(data,kernTableEntry);font.kerningPairs=kern.parse(kernTable.data,kernTable.offset)}else font.kerningPairs={};if(gdefTableEntry){var gdefTable=uncompressTable(data,gdefTableEntry);font.tables.gdef=gdef.parse(gdefTable.data,gdefTable.offset)}if(gposTableEntry){var gposTable=uncompressTable(data,gposTableEntry);font.tables.gpos=gpos.parse(gposTable.data,gposTable.offset),font.position.init()}if(gsubTableEntry){var gsubTable=uncompressTable(data,gsubTableEntry);font.tables.gsub=gsub.parse(gsubTable.data,gsubTable.offset)}if(fvarTableEntry){var fvarTable=uncompressTable(data,fvarTableEntry);font.tables.fvar=fvar.parse(fvarTable.data,fvarTable.offset,font.names)}if(metaTableEntry){var metaTable=uncompressTable(data,metaTableEntry);font.tables.meta=meta.parse(metaTable.data,metaTable.offset),font.metas=font.tables.meta}return font}function load(url,callback,opt){opt=null==opt?{}:opt;var loadFn="undefined"==typeof window&&!opt.isUrl?loadFromFile:loadFromUrl;return new Promise((function(resolve,reject){loadFn(url,(function(err,arrayBuffer){if(err){if(callback)return callback(err);reject(err)}var font;try{font=parseBuffer(arrayBuffer,opt)}catch(e){if(callback)return callback(e,null);reject(e)}if(callback)return callback(null,font);resolve(font)}))}))}function loadSync(url,opt){return parseBuffer(nodeBufferToArrayBuffer(__webpack_require__("?4db5").readFileSync(url)),opt)}const __WEBPACK_DEFAULT_EXPORT__=Object.freeze({__proto__:null,Font,Glyph,Path,BoundingBox,_parse:parse,parse:parseBuffer,load,loadSync})}}]);