"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[369],{"./packages/animation/src/components/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AMPAnimations:()=>components_AMPAnimations,AMPKeyframes:()=>components_AMPKeyframes,AMPWrapper:()=>components_AMPWrapper,AnimationProvider:()=>provider,WAAPIWrapper:()=>components_WAAPIWrapper,useStoryAnimationContext:()=>components_useStoryAnimationContext});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),range=__webpack_require__("./packages/units/src/range.ts"),v4=__webpack_require__("./packages/animation/node_modules/uuid/dist/esm-browser/v4.js"),parts=__webpack_require__("./packages/animation/src/parts/index.tsx");const context=(0,src.q6)({state:{providerId:"",animationTargets:[]},actions:{getAnimationParts:()=>[],hoistWAAPIAnimation:()=>()=>{},WAAPIAnimationMethods:{play:()=>{},pause:()=>{},setCurrentTime:()=>{},reset:()=>{}}}});let AnimationMachineState=function(AnimationMachineState){return AnimationMachineState.Idle="idle",AnimationMachineState.Complete="complete",AnimationMachineState}({}),AnimationMachineTransition=function(AnimationMachineTransition){return AnimationMachineTransition.Complete="complete",AnimationMachineTransition.Reset="reset",AnimationMachineTransition}({});const AnimationMachine={[AnimationMachineState.Idle]:{[AnimationMachineTransition.Complete]:AnimationMachineState.Complete},[AnimationMachineState.Complete]:{[AnimationMachineTransition.Reset]:AnimationMachineState.Idle}},animationStateReducer=(state,action)=>AnimationMachine[state][action]||state;const animationMachine=function useAnimationMachine(){const[animationState,dispatchWAAPIAnimationState]=(0,src.WO)(animationStateReducer,AnimationMachineState.Idle);return{animationState,reset:(0,src.hb)((()=>dispatchWAAPIAnimationState(AnimationMachineTransition.Reset)),[]),complete:(0,src.hb)((()=>dispatchWAAPIAnimationState(AnimationMachineTransition.Complete)),[])}},STABLE=[];function mapHasReferentialEntry(map,[key,val]){return map?.has(key)&&map.get(key)===val}const provider=function Provider({animations=STABLE,elements=STABLE,children,onWAAPIFinish,selectedElementIds=[]}){const elementsInstanceMapRef=(0,src.li)(null),elementsInstanceMap=(0,src.Kr)((()=>new Map(elements.map((element=>[element.id,element])))),[elements]),animationsInstanceMapRef=(0,src.li)(null),animationsInstanceMap=(0,src.Kr)((()=>new Map(animations.map((animation=>[animation.id,animation])))),[animations]),animationPartsMapRef=(0,src.li)(null),animationPartsMap=(0,src.Kr)((()=>{const{current:oldAnimationsInstanceMap}=animationsInstanceMapRef,{current:oldElementsInstanceMap}=elementsInstanceMapRef,{current:oldAnimationPartsMap}=animationPartsMapRef,_animationPartsMap=new Map;for(const[animationId,animation]of animationsInstanceMap.entries()){const isAnimationRefentiallyStable=mapHasReferentialEntry(oldAnimationsInstanceMap,[animationId,animation]),areAnimationTargetElementsReferentiallyStable=animation.targets.every((elementId=>mapHasReferentialEntry(oldElementsInstanceMap,[elementId,elementsInstanceMap.get(elementId)])));if(isAnimationRefentiallyStable&&areAnimationTargetElementsReferentiallyStable&&null!==oldAnimationPartsMap)animation.targets.forEach((elementId=>{const element=elementsInstanceMap.get(elementId);element?.isHidden||_animationPartsMap.set(elementId,oldAnimationPartsMap.get(elementId)||[])}));else{const{targets}=animation;(targets||[]).forEach((elementId=>{const generatedParts=_animationPartsMap.get(elementId)||[],element=elementsInstanceMap.get(elementId);element&&(element.isHidden||_animationPartsMap.set(elementId,[...generatedParts,(0,parts.aI)(animation,element)]))}))}}return animationsInstanceMapRef.current=animationsInstanceMap,elementsInstanceMapRef.current=elementsInstanceMap,animationPartsMapRef.current=_animationPartsMap,_animationPartsMap}),[animationsInstanceMap,elementsInstanceMap]),providerId=(0,src.Kr)((()=>(0,v4.A)()),[]),animationTargets=(0,src.Kr)((()=>Array.from(animationPartsMap.keys()||[])),[animationPartsMap]),getAnimationParts=(0,src.hb)((target=>animationPartsMap.get(target)||STABLE),[animationPartsMap]),onWAAPIFinishRef=(0,src.li)(onWAAPIFinish),{animationState,reset,complete}=animationMachine(),WAAPIAnimationRef=(0,src.li)(new Map),[WAAPIAnimations,setWAAPIAnimations]=(0,src.J0)([]),filteredWAAPIAnimations=(0,src.Kr)((()=>((animations,selectedElementIds)=>selectedElementIds.length>0?animations.filter((({elementId})=>selectedElementIds.includes(elementId))):animations)(WAAPIAnimations,selectedElementIds)),[selectedElementIds,WAAPIAnimations]),hoistWAAPIAnimation=(0,src.hb)((({animation,elementId})=>{const symbol=Symbol();return WAAPIAnimationRef.current.set(symbol,{animation,elementId}),setWAAPIAnimations(Array.from(WAAPIAnimationRef.current.values())),()=>{animation?.cancel(),WAAPIAnimationRef.current.delete(symbol),setWAAPIAnimations(Array.from(WAAPIAnimationRef.current.values()))}}),[]),WAAPIAnimationMethods=(0,src.Kr)((()=>{const pause=()=>filteredWAAPIAnimations.forEach((({animation})=>animation?.pause())),setCurrentTime=time=>filteredWAAPIAnimations.forEach((({animation})=>{const{duration=0,delay=0}=animation.effect?.getTiming()??{},animationEndTime=delay+("string"==typeof duration?0:duration);animation.currentTime="end"===time?animationEndTime:(0,range.qE)(time,{MIN:0,MAX:animationEndTime})}));return{play:()=>filteredWAAPIAnimations.forEach((({animation})=>{animation?.cancel(),animation?.play()})),pause,setCurrentTime,reset:()=>{pause(),requestAnimationFrame((()=>{setCurrentTime("end")}))}}}),[filteredWAAPIAnimations]);(0,src.vJ)((()=>{let cancel=()=>{};return AnimationMachineState.Idle===animationState&&filteredWAAPIAnimations.length&&new Promise(((resolve,reject)=>{cancel=reject,Promise.all(filteredWAAPIAnimations.map((({animation})=>(animation=>new Promise((resolve=>{animation.onfinish=resolve})))(animation)))).then((()=>{cancel=()=>{},resolve()}))})).then(complete).catch((()=>{})),cancel}),[filteredWAAPIAnimations,animationState,complete]),onWAAPIFinishRef.current=onWAAPIFinish,(0,src.vJ)((()=>{AnimationMachineState.Complete===animationState&&(onWAAPIFinishRef.current?.(),reset())}),[animationState,reset]);const value=(0,src.Kr)((()=>({state:{providerId,animationTargets},actions:{getAnimationParts,hoistWAAPIAnimation,WAAPIAnimationMethods}})),[providerId,getAnimationParts,animationTargets,hoistWAAPIAnimation,WAAPIAnimationMethods]);return react.createElement(context.Provider,{value},children)};const utils_createKeyframeEffect=function createKeyframeEffect(target,keyframes,timings){const convertedTimings={...timings,iterations:"infinity"===timings.iterations?Number.POSITIVE_INFINITY:timings.iterations};return new KeyframeEffect(target,keyframes,convertedTimings)};var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const fullSizeAbsolute=styled_components_browser_esm.Ay.div.withConfig({displayName:"fullSizeAbsolute",componentId:"sc-1wmzg8a-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;transform-origin:50% 50%;",";"],(({overflowHidden})=>overflowHidden&&(0,styled_components_browser_esm.AH)(["overflow:hidden;"])));const components_useStoryAnimationContext=function useStoryAnimationContext(selector=src.D_){return(0,src.i7)(context,selector)};function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function WAAPIAnimationWrapper({children,hoistAnimation,keyframes,timings,targetLeafElement=!1}){const target=(0,src.li)(null);return(0,src.vJ)((()=>{if(!keyframes)return()=>{};const targetEl=targetLeafElement?target.current?.querySelector('[data-leaf-element="true"]'):target.current;if(!targetEl)return()=>{};const effect=utils_createKeyframeEffect(targetEl,keyframes,timings);return hoistAnimation(new Animation(effect,document.timeline))}),[hoistAnimation,keyframes,targetLeafElement,timings]),react.createElement(fullSizeAbsolute,{ref:target},children)}const components_WAAPIWrapper=function WAAPIWrapper({children,target}){const{hoistWAAPIAnimation,animationParts}=components_useStoryAnimationContext((({actions})=>({hoistWAAPIAnimation:actions.hoistWAAPIAnimation,animationParts:actions.getAnimationParts(target)}))),WAAPIAnimationParts=animationParts?.map((anim=>anim.WAAPIAnimation)),hoistAnimation=(0,src.hb)((animation=>hoistWAAPIAnimation({animation,elementId:target})),[target,hoistWAAPIAnimation]);return react.createElement(WAAPIAnimationWrapper,_extends({hoistAnimation},WAAPIAnimationParts[0]),react.createElement(WAAPIAnimationWrapper,_extends({hoistAnimation},WAAPIAnimationParts[1]),react.createElement(WAAPIAnimationWrapper,_extends({hoistAnimation},WAAPIAnimationParts[2]),children)))};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const fullSizeAbsoluteStyles={width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0};function ComposableWrapper({animationParts,children}){const root=props=>props.children,ComposedWrapper=(0,src.Kr)((()=>animationParts.reduce(((Composable,animationPart)=>{const{AMPTarget}=animationPart;return props=>react.createElement(Composable,null,react.createElement(AMPTarget,{style:fullSizeAbsoluteStyles},props.children))}),root)),[animationParts]);return react.createElement(ComposedWrapper,null,children)}const components_AMPWrapper=function AMPWrapper({target,children}){const{actions:{getAnimationParts}}=components_useStoryAnimationContext();return react.createElement(ComposableWrapper,{animationParts:getAnimationParts(target)},children)};var outputs=__webpack_require__("./packages/animation/src/outputs/index.ts");const components_generateKeyframesMap=function generateKeyframesMap(targets,getAnimationParts){const allKeyframeEntries=targets.map((target=>getAnimationParts(target).map((part=>Object.entries(part.generatedKeyframes))))).flat(2),keyframesAsMap=new Map(allKeyframeEntries);return Object.fromEntries(keyframesAsMap)};const components_AMPKeyframes=function AMPKeyframes(){const{state:{providerId,animationTargets},actions:{getAnimationParts}}=components_useStoryAnimationContext(),keyframesMap=(0,src.Kr)((()=>components_generateKeyframesMap(animationTargets,getAnimationParts)),[animationTargets,getAnimationParts]);return Object.keys(keyframesMap).map((animationName=>react.createElement(outputs.hL,{key:animationName,id:`${providerId}-${animationName}`,keyframes:keyframesMap[animationName]})))};const components_AMPAnimations=function AMPAnimations(){const{state:{providerId,animationTargets},actions:{getAnimationParts}}=components_useStoryAnimationContext();return react.createElement(react.Fragment,null,animationTargets.map((target=>[getAnimationParts(target).map((({id,AMPAnimation})=>react.createElement(AMPAnimation,{key:id,prefixId:providerId})))])).flat(2))}},"./packages/animation/src/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{UD:()=>BG_MIN_SCALE,Ug:()=>BEZIER,eC:()=>SCALE_DIRECTIONS,gb:()=>ANIMATION_PARTS,oQ:()=>BG_MAX_SCALE,rd:()=>BACKGROUND_ANIMATION_EFFECTS,uw:()=>ANIMATION_EFFECTS});var _googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/src/i18n.ts"),_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/animation/src/types/index.ts");const BEZIER={linear:"linear",in:"ease-in",out:"ease-out",inOut:"ease-in-out",inQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",outQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",inOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)",inCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",outCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",inOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1)",inQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",outQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",inOutQuart:"cubic-bezier(0.77, 0, 0.175, 1)",inQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",outQuint:"cubic-bezier(0.23, 1, 0.32, 1)",inOutQuint:"cubic-bezier(0.86, 0, 0.07, 1)",inSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",outSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",inOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",inExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",outExpo:"cubic-bezier(0.19, 1, 0.22, 1)",inOutExpo:"cubic-bezier(1, 0, 0, 1)",inCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",outCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",inOutCirc:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",default:"cubic-bezier(0.4, 0.4, 0.0, 1)"},ANIMATION_EFFECTS={DROP:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectDrop,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Drop","animation effect","web-stories")},FADE_IN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectFadeIn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Fade In","animation effect","web-stories")},FLY_IN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectFlyIn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Fly In","animation effect","web-stories")},PAN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectPan,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Pan","animation effect","web-stories")},PULSE:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectPulse,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Pulse","animation effect","web-stories")},TWIRL_IN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectTwirlIn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Twirl In","animation effect","web-stories")},WHOOSH_IN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectWhooshIn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Whoosh In","animation effect","web-stories")},ZOOM:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectZoom,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Scale","animation effect","web-stories")},ROTATE_IN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectRotateIn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Rotate In","animation effect","web-stories")}},BACKGROUND_ANIMATION_EFFECTS={ZOOM:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectBackgroundZoom,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Zoom","animation effect","web-stories")},PAN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectBackgroundPan,name:ANIMATION_EFFECTS.PAN.name},PAN_AND_ZOOM:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.EffectBackgroundPanAndZoom,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Pan and Zoom","animation effect","web-stories")}},ANIMATION_PARTS={BLINK_ON:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.BlinkOn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Blink On","animation effect","web-stories")},BOUNCE:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Bounce,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Bounce","animation effect","web-stories")},FADE:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Fade,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Fade","animation effect","web-stories")},FLIP:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Flip,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Flip","animation effect","web-stories")},FLOAT_ON:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.FloatOn,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Float On","animation effect","web-stories")},MOVE:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Move,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Move","animation effect","web-stories")},PULSE:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Pulse,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Pulse","animation effect","web-stories")},SPIN:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Spin,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Spin","animation effect","web-stories")},ZOOM:{value:_types__WEBPACK_IMPORTED_MODULE_0__.J6.Zoom,name:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_1__._x)("Zoom","animation effect","web-stories")}},SCALE_DIRECTIONS={IN:[_types__WEBPACK_IMPORTED_MODULE_0__.ON.ScaleInTopLeft,_types__WEBPACK_IMPORTED_MODULE_0__.ON.ScaleInBottomRight],OUT:[_types__WEBPACK_IMPORTED_MODULE_0__.ON.ScaleOutTopRight,_types__WEBPACK_IMPORTED_MODULE_0__.ON.ScaleOutBottomLeft]},BG_MIN_SCALE=100,BG_MAX_SCALE=400},"./packages/animation/src/outputs/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Go:()=>animationOutput,hL:()=>keyframesOutput,nX:()=>output});var react=__webpack_require__("./node_modules/react/index.js");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");const animationOutput=function AnimationOutput({config}){const configs=Array.isArray(config)?config:[config];return react.createElement("amp-story-animation",{layout:"nodisplay",trigger:"visibility"},react.createElement("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(configs.map((({selector,animation,keyframes,delay,direction,duration,easing,endDelay,fill,iterationStart,iterations})=>({selector,animation,keyframes,delay,direction,duration,easing,endDelay,fill,iterationStart,iterations}))))}}))};const keyframesOutput=function KeyframesOutput({id,keyframes,...options}){return react.createElement("amp-animation",{id,layout:"nodisplay"},react.createElement("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify({keyframes,...options})}}))};const output=function WithAnimation({id,className,style,animationStyle,useClippingContainer,children}){return useClippingContainer?react.createElement("div",{style:{clipPath:"inset(0)",...style}},react.createElement("div",{id,className,style:{width:"100%",height:"100%",...animationStyle}},children)):react.createElement("div",{id,className,style:{...style,...animationStyle}},children)}},"./packages/animation/src/parts/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aI:()=>parts_createAnimationPart,g9:()=>getAnimationEffectDefaults,$G:()=>getAnimationEffectFields});var constants=__webpack_require__("./packages/animation/src/constants.ts"),types=__webpack_require__("./packages/animation/src/types/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),react=__webpack_require__("./node_modules/react/index.js"),v4=__webpack_require__("./packages/animation/node_modules/uuid/dist/esm-browser/v4.js"),outputs=__webpack_require__("./packages/animation/src/outputs/index.ts");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js");const ALLOWLIST=["opacity","transform"];const utils_getInitialStyleFromKeyframes=function getInitialStyleFromKeyframes(keyframes){const initialStyle={};let frame=null;return Array.isArray(keyframes)?frame=keyframes[0]:"object"==typeof keyframes&&(frame=keyframes),frame?(initialStyle["--initial-opacity"]=1,initialStyle["--initial-transform"]="none",Object.entries(frame).forEach((([key,value])=>{ALLOWLIST.includes(key.toLowerCase())&&(Array.isArray(value)?initialStyle[`--initial-${key}`]=value[0]:initialStyle[`--initial-${key}`]=value)})),initialStyle):initialStyle};const utils_sanitizeTimings=function sanitizeTimings({easing,duration,delay,...rest}){return{easing:easing||"linear",duration:"number"==typeof duration?Math.max(duration,0):0,delay:"number"==typeof delay?Math.max(delay,0):0,...rest}};const parts_createAnimation=function createAnimation(keyframes,timings,useClippingContainer=!1,targetLeafElement=!1){const id=`anim-${(0,v4.A)()}`,WAAPIAnimation={timings:utils_sanitizeTimings(timings),keyframes,targetLeafElement,useClippingContainer},animationStyle=targetLeafElement?{}:utils_getInitialStyleFromKeyframes(keyframes),selector=targetLeafElement?`#${id} [data-leaf-element="true"]`:`#${id}`;return{id,keyframes,generatedKeyframes:{[id]:keyframes},WAAPIAnimation,AMPTarget:({children,style={}})=>react.createElement(outputs.nX,{id,className:"animation-wrapper",useClippingContainer,style,animationStyle},children),AMPAnimation:()=>react.createElement(outputs.Go,{config:{selector,keyframes,...timings}})}};var utils=__webpack_require__("./packages/animation/src/utils/index.ts");function getDropKeyframes(element){const minTop=function getMinTopOffset(element){return(0,utils.oL)({...element,y:160}).offsetTop}(element),{offsetTop}=(0,utils.oL)(element),global=(0,utils.Wr)(element),maxBounceHeight=-Math.max(Math.abs(minTop),Math.abs(offsetTop));return[{offset:0,transform:global`translate3d(0, ${maxBounceHeight}%, 0)`,easing:"cubic-bezier(.5, 0, 1, 1)"},{offset:.29,transform:global`translate3d(0, 0%, 0)`,easing:"cubic-bezier(0, 0, .5, 1)"},{offset:.45,transform:global`translate3d(0, ${.2812*maxBounceHeight}%, 0)`,easing:"cubic-bezier(.5, 0, 1, 1)"},{offset:.61,transform:global`translate3d(0, 0%, 0)`,easing:"cubic-bezier(0, 0, .5, 1)"},{offset:.71,transform:global`translate3d(0, ${.0956*maxBounceHeight}%, 0)`,easing:"cubic-bezier(.5, 0, 1, 1)"},{offset:.8,transform:global`translate3d(0, 0%, 0)`,easing:"cubic-bezier(0, 0, .5, 1)"},{offset:.85,transform:global`translate3d(0, ${.0359*maxBounceHeight}%, 0)`,easing:"cubic-bezier(.5, 0, 1, 1)"},{offset:.92,transform:global`translate3d(0, 0%, 0)`,easing:"cubic-bezier(0, 0, .5, 1)"},{offset:.96,transform:global`translate3d(0, ${.0156*maxBounceHeight}%, 0)`,easing:"cubic-bezier(.5, 0, 1, 1)"},{offset:1,transform:global`translate3d(0, 0%, 0)`,easing:"cubic-bezier(0, 0, .5, 1)"}]}const drop_fields={duration:{tooltip:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}},defaults={fill:"both",duration:1e3};function AnimationFade({fadeFrom=0,fadeTo=1,type,...args}){const timings={...defaults,...args};return parts_createAnimation({opacity:[fadeFrom,fadeTo]},timings)}types.PU.Float,types.PU.Float;const fadeIn_fields={duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}},move_defaults={fill:"both",duration:1e3};function AnimationMove({overflowHidden=!1,offsetX=0,offsetY=0,type,...args},element){const global=(0,utils.Wr)(element),timings={...move_defaults,...args},keyframes={transform:[global`translate3d(${(0,utils.We)(offsetX,"px")}, ${(0,utils.We)(offsetY,"px")}, 0)`,global`translate3d(${(0,utils.We)(0,"px")}, ${(0,utils.We)(0,"px")}, 0)`]};return parts_createAnimation(keyframes,timings,overflowHidden)}types.PU.Checkbox,types.PU.Text,types.PU.Text;const flyIn_fields={flyInDir:{label:(0,i18n.__)("Direction","web-stories"),type:types.PU.DirectionPicker,values:[types.m3.TopToBottom,types.m3.BottomToTop,types.m3.LeftToRight,types.m3.RightToLeft],defaultValue:types.m3.BottomToTop},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var src_constants=__webpack_require__("./packages/units/src/constants.ts"),dimensions=__webpack_require__("./packages/units/src/dimensions.ts");function EffectPan({panDir=types.m3.RightToLeft,duration=1e3,delay,easing},element){const timings={fill:"both",duration,delay,easing},scale=function getTargetScale({width,height}){if(width<src_constants.bj||height<src_constants._b){const scaleFactor=1.25,widthScale=width<src_constants.bj?src_constants.bj/width:1,heightScale=height<src_constants._b?src_constants._b/height:1;return Math.max(widthScale,heightScale)*scaleFactor}return 1}(element),scaledElement={x:element.x,y:element.y,width:element.width*scale,height:element.height*scale,rotationAngle:element.rotationAngle},{x,y,width,height}=(0,dimensions.YH)(scaledElement,100,100),dangerZoneOffset=(0,dimensions.y6)(src_constants.vT,100),alignTop=-(dangerZoneOffset+y)/height*100,alignRight=(100-(x+width))/width*100,alignLeft=-x/width*100,alignBottom=(100-(y+height)+dangerZoneOffset)/height*100;let startX,startY,endX,endY;switch(panDir){case types.m3.TopToBottom:startX=(alignLeft+alignRight)/2,startY=alignTop,endX=(alignLeft+alignRight)/2,endY=alignBottom;break;case types.m3.BottomToTop:startX=(alignLeft+alignRight)/2,startY=alignBottom,endX=(alignLeft+alignRight)/2,endY=alignTop;break;case types.m3.LeftToRight:startX=alignLeft,startY=alignTop,endX=alignRight,endY=alignTop;break;case types.m3.RightToLeft:default:startX=alignRight,startY=alignTop,endX=alignLeft,endY=alignTop}return parts_createAnimation({transform:[`translate(${startX}%, ${startY}%) scale(${scale})`,`translate(${endX}%, ${endY}%) scale(${scale})`],"transform-origin":"left top"},timings,!1)}const pan_fields={panDir:{label:(0,i18n.__)("Direction","web-stories"),type:types.PU.DirectionPicker,values:[types.m3.TopToBottom,types.m3.BottomToTop,types.m3.LeftToRight,types.m3.RightToLeft],defaultValue:types.m3.BottomToTop}};const pulse_defaults={fill:"both",duration:400};function AnimationPulse({iterations=1,scale=.5,easing="cubic-bezier(0.3, 0.0, 0.0, 1)",type,...args}){const timings={...pulse_defaults,...args,iterations,easing},keyframes=function generatePulseKeyframes(scale){return{transform:["scale(1)",`scale(${1+scale})`,`scale(${1-scale/10})`,"scale(1)"],offset:[0,.33,.66,1]}}(scale);return parts_createAnimation(keyframes,timings)}const pulse_fields={scale:{label:(0,i18n.__)("Scale","web-stories"),tooltip:"Valid values are greater than or equal to 0",type:types.PU.Float,defaultValue:.5},iterations:{label:(0,i18n._x)("Pulses","number of pulses","web-stories"),type:types.PU.Float,defaultValue:1},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:1450}},defaultTimings={delay:0,duration:1e3,fill:"both",iterations:1,easing:"cubic-bezier(0.4, 0.4, 0.0, 1)"};const zoom_defaults={fill:"forwards",duration:1e3};function AnimationZoom({zoomFrom=0,zoomTo=1,targetLeafElement=!1,transformOrigin,type,...args}){const timings={...zoom_defaults,...args},keyframes={transform:[`scale(${zoomFrom})`,`scale(${zoomTo})`]};if(transformOrigin){const originRelativeToCenter={x:50-transformOrigin.horizontal,y:50-transformOrigin.vertical},counterScaleTranslate={x:(zoomFrom-1)*originRelativeToCenter.x,y:(zoomFrom-1)*originRelativeToCenter.y};keyframes.transform=[`translate(${counterScaleTranslate.x}%, ${counterScaleTranslate.y}%) ${keyframes.transform[0]}`,`translate(0%, 0%) ${keyframes.transform[1]}`]}return parts_createAnimation(keyframes,timings,!1,targetLeafElement)}types.PU.Float,types.PU.Float;var getOffPageOffset=__webpack_require__("./packages/animation/src/utils/getOffPageOffset.ts");const whooshIn_fields={whooshInDir:{label:(0,i18n.__)("Direction","web-stories"),type:types.PU.DirectionPicker,values:[types.m3.LeftToRight,types.m3.RightToLeft],defaultValue:types.m3.LeftToRight},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:600}};var sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts");const effects_zoom_fields={scaleDirection:{label:(0,i18n.__)("Direction","web-stories"),tooltip:(0,sprintf.A)((0,i18n.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:types.PU.DirectionPicker,values:[types.ON.ScaleIn,types.ON.ScaleOut],defaultValue:types.ON.ScaleIn},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},spin_defaults={fill:"forwards",duration:1e3};function AnimationSpin({rotation=0,stopAngle=0,type,...args},element){const global=(0,utils.Wr)(element),timings={...spin_defaults,...args},keyframes={transform:[global`rotateZ(${(0,utils.We)(rotation,"deg")})`,global`rotateZ(${(0,utils.We)(stopAngle,"deg")})`]};return parts_createAnimation(keyframes,timings)}types.PU.Text,types.PU.Text;const numberOfRotations=1,stopAngle=0;const rotateIn_fields={rotateInDir:{label:(0,i18n.__)("Direction","web-stories"),type:types.PU.DirectionPicker,values:[types.m3.LeftToRight,types.m3.RightToLeft],defaultValue:types.m3.LeftToRight}};var src_range=__webpack_require__("./packages/units/src/range.ts");function EffectBackgroundZoom({zoomDirection=types.ON.ScaleOut,transformOrigin,duration=2e3,delay=0,easing="cubic-bezier(.3,0,.55,1)"},element){if(!(0,types.dq)(element))throw new Error("Should not happen");const range={MIN:constants.UD/(element.scale||1),MAX:constants.oQ/(element.scale||1)},normalizedDelta=(0,src_range.qB)(50,{MIN:0,MAX:constants.oQ}),delta=(0,src_range.Cc)(normalizedDelta,{MIN:0,MAX:range.MAX}),zoomFrom=1+(zoomDirection===types.ON.ScaleOut?1:-1)*delta;return AnimationZoom({type:types.J6.Zoom,zoomFrom:(0,src_range.qE)(zoomFrom,range),zoomTo:1,duration,delay,easing,targetLeafElement:!0,transformOrigin:transformOrigin||(0,utils.jK)(element&&(0,utils.n)(element))})}const backgroundZoom_fields={zoomDirection:{label:(0,i18n.__)("Direction","web-stories"),tooltip:(0,sprintf.A)((0,i18n.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:types.PU.DirectionPicker,values:[types.ON.ScaleIn,types.ON.ScaleOut],defaultValue:types.ON.ScaleOut},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}};function EffectBackgroundPan({panDir=types.m3.RightToLeft,duration=2e3,easing="cubic-bezier(.3,0,.55,1)",type,...args},element){const timings={fill:"both",duration,easing,...args},offsets=element?(0,utils.n)(element):{top:0,right:0,bottom:0,left:0},translate={from:{[types.m3.RightToLeft]:`translate3d(${offsets.left}%, 0, 0)`,[types.m3.LeftToRight]:`translate3d(${offsets.right}%, 0, 0)`,[types.m3.BottomToTop]:`translate3d(0, ${offsets.top}%, 0)`,[types.m3.TopToBottom]:`translate3d(0, ${offsets.bottom}%, 0)`},to:{[types.m3.RightToLeft]:"translate3d(0%, 0, 0)",[types.m3.LeftToRight]:"translate3d(0%, 0, 0)",[types.m3.BottomToTop]:"translate3d(0, 0%, 0)",[types.m3.TopToBottom]:"translate3d(0, 0%, 0)"}},keyframes={transform:[translate.from[panDir],translate.to[panDir]]};return parts_createAnimation(keyframes,timings,!1,!0)}const backgroundPan_fields={panDir:{label:(0,i18n.__)("Direction","web-stories"),tooltip:(0,sprintf.A)((0,i18n.__)("Valid values are %1$s or %2$s","web-stories"),"scaleIn","scaleOut"),type:types.PU.DirectionPicker,values:[types.m3.TopToBottom,types.m3.BottomToTop,types.m3.LeftToRight,types.m3.RightToLeft],defaultValue:types.m3.RightToLeft},duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:2e3}},backgroundPanAndZoom_defaults={fill:"forwards",duration:2e3,easing:"cubic-bezier(.14,.34,.47,.9)"};const keyframes=[{transform:"scale(0)",offset:0},{transform:"scale(1.27)",offset:.18},{transform:"scale(0.84)",offset:.28},{transform:"scale(0.84)",offset:.29},{transform:"scale(1.1)",offset:.4},{transform:"scale(1.1)",offset:.41},{transform:"scale(0.95)",offset:.52},{transform:"scale(0.95)",offset:.53},{transform:"scale(1.03)",offset:.6},{transform:"scale(1.03)",offset:.61},{transform:"scale(0.98)",offset:.7},{transform:"scale(0.98)",offset:.71},{transform:"scale(1.02)",offset:.8},{transform:"scale(1.02)",offset:.81},{transform:"scale(0.99)",offset:.9},{transform:"scale(0.99)",offset:.91},{transform:"scale(1)",offset:1}],bounce_defaults={fill:"both",duration:1500};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const utils_generateLookupMap=function generateLookupMap(values){return values.reduce(((acc,currentValue)=>({...acc,[currentValue]:values.filter((opacity=>opacity!==currentValue))})),{})};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.flat-map.js");const utils_padArray=function padArray(values,padCount){return values.flatMap((val=>Array(padCount).fill(val)))},DEFAULT_BLINKS=10,AVAILABLE_OPACITY=[0,.25,.75,1],blinkOn_defaults={fill:"forwards"};function generateOpacityFrames(blinkCount=DEFAULT_BLINKS){const lookup=utils_generateLookupMap(AVAILABLE_OPACITY);let lastOpacity=null;const opacityFrames=function range(i){return Array(i).fill(0).map(((_v,k)=>k))}(blinkCount-2).map((()=>{const opacities=null!==lastOpacity?lookup[lastOpacity]:AVAILABLE_OPACITY,opacity=opacities[Math.floor(Math.random()*opacities.length)];return lastOpacity=opacity,opacity}));return utils_padArray(opacityFrames,3)}types.PU.Number;const flip_defaults={fill:"both",duration:1e3},keyframesLookup={[types.pL.Clockwise]:{[types._0.X]:{transform:["rotateX(90deg)","rotateX(0deg)"]},[types._0.Y]:{transform:["rotateY(90deg)","rotateY(0deg)"]}},[types.pL.CounterClockwise]:{[types._0.X]:{transform:["rotateX(-90deg)","rotateX(0deg)"]},[types._0.Y]:{transform:["rotateY(-90deg)","rotateY(0deg)"]}},[types.pL.PingPong]:{[types._0.X]:{transform:[]},[types._0.Y]:{transform:[]}}};types.PU.Dropdown,types._0.X,types._0.Y,types._0.Y,types.PU.Dropdown,types.pL.Clockwise,types.pL.CounterClockwise,types.pL.Clockwise;const floatOn_defaults={fill:"both",duration:1e3},floatOn_keyframesLookup={[types.m3.TopToBottom]:{transform:["translateY(-100%)","translateY(0%)"]},[types.m3.BottomToTop]:{transform:["translateY(100%)","translateY(0%)"]},[types.m3.LeftToRight]:{transform:["translateX(-100%)","translateX(0%)"]},[types.m3.RightToLeft]:{transform:["translateX(100%)","translateX(0%)"]}};types.PU.Dropdown,types.m3.TopToBottom,types.m3.BottomToTop,types.m3.LeftToRight,types.m3.RightToLeft,types.m3.BottomToTop;function EmptyAMPTarget({children,...rest}){return react.createElement("div",rest,children)}const parts_emptyAnimationPart=function emptyAnimationPart(){return{id:"-1",keyframes:{},generatedKeyframes:{},WAAPIAnimation:{keyframes:{},timings:{}},AMPTarget:EmptyAMPTarget,AMPAnimation:()=>null}};const parts_createAnimationPart=function createAnimationPart(animationWithPreset,element){const animation=function convertEasingPreset({easingPreset,easing,...rest}){return{...rest,easing:easing||(easingPreset?constants.Ug[easingPreset]:void 0)}}(animationWithPreset);switch(animation.type){case types.J6.BlinkOn:return function AnimationBlinkOn({blinkCount=DEFAULT_BLINKS,type,...args}){const timings={...blinkOn_defaults,...args},keyframes={opacity:[0,...generateOpacityFrames(blinkCount),1]};return parts_createAnimation(keyframes,timings)}(animation);case types.J6.Bounce:return function AnimationBounce({type,...args}){const timings={...bounce_defaults,...args};return parts_createAnimation(keyframes,timings)}(animation);case types.J6.Fade:return AnimationFade(animation);case types.J6.Flip:return function AnimationFlip({axis=types._0.Y,rotation=types.pL.Clockwise,type,...args}){const timings={...flip_defaults,...args},keyframes=keyframesLookup[rotation][axis];return parts_createAnimation(keyframes,timings)}(animation);case types.J6.FloatOn:return function AnimationFloatOn({floatOnDir=types.m3.BottomToTop,type,...args}){const timings={...floatOn_defaults,...args},keyframes=floatOn_keyframesLookup[floatOnDir];return parts_createAnimation(keyframes,timings)}(animation);case types.J6.Move:return AnimationMove(animation,element);case types.J6.Pulse:return AnimationPulse(animation);case types.J6.Spin:return AnimationSpin(animation,element);case types.J6.Zoom:return AnimationZoom(animation);case types.J6.EffectDrop:return function EffectDrop({fill="both",duration=1600,delay=0},element){const timings={fill,duration,delay},keyframes=getDropKeyframes(element);return parts_createAnimation(keyframes,timings)}(animation,element);case types.J6.EffectFadeIn:return function EffectFadeIn({duration=600,delay=0,easing="cubic-bezier(0.4, 0.4, 0.0, 1)"}){return AnimationFade({fadeFrom:0,fadeTo:1,duration,delay,easing,type:types.J6.Fade})}(animation);case types.J6.EffectFlyIn:return function EffectFlyIn({flyInDir=types.m3.TopToBottom,duration=600,delay=0,easing="cubic-bezier(0.2, 0.6, 0.0, 1)"},element){const id=(0,v4.A)(),{offsetTop,offsetLeft,offsetRight,offsetBottom}=(0,utils.oL)(element),offsetLookup={[types.m3.TopToBottom]:{offsetY:`${offsetTop}%`},[types.m3.BottomToTop]:{offsetY:`${offsetBottom}%`},[types.m3.LeftToRight]:{offsetX:`${offsetLeft}%`},[types.m3.RightToLeft]:{offsetX:`${offsetRight}%`}},fade=AnimationFade({fadeFrom:0,fadeTo:1,duration,delay,easing,type:types.J6.Fade}),move=AnimationMove({...offsetLookup[flyInDir],duration,delay,easing,type:types.J6.Move},element),keyframes={...move.keyframes,...fade.keyframes};return{id,keyframes,WAAPIAnimation:{...move.WAAPIAnimation,keyframes},AMPTarget:function AMPTarget({children,style}){return react.createElement(fade.AMPTarget,{style},react.createElement(move.AMPTarget,{style},children))},AMPAnimation:function AMPAnimation(){return react.createElement(react.Fragment,null,react.createElement(fade.AMPAnimation,null),react.createElement(move.AMPAnimation,null))},generatedKeyframes:{...fade.generatedKeyframes,...move.generatedKeyframes}}}(animation,element);case types.J6.EffectPan:return EffectPan(animation,element);case types.J6.EffectPulse:return function EffectPulse({iterations=1,scale=.5,duration=1450,delay,easing="ease-in-out"}){return AnimationPulse({scale,duration,delay,easing,iterations,type:types.J6.Pulse})}(animation);case types.J6.EffectRotateIn:return function EffectRotateIn({rotateInDir=types.m3.LeftToRight,duration=1e3,easing="cubic-bezier(.2, 0, .8, 1)",delay},element){const id=(0,v4.A)(),{offsetLeft,offsetRight}=(0,utils.oL)(element),move=AnimationMove({offsetX:rotateInDir===types.m3.RightToLeft?`${offsetRight}%`:`${offsetLeft}%`,duration,delay,easing,type:types.J6.Move},element),spin=AnimationSpin({rotation:""+180*(rotateInDir===types.m3.LeftToRight?-1:1)*numberOfRotations,stopAngle,duration,delay,easing:"cubic-bezier(.2, 0, .5, 1)",type:types.J6.Spin},element),[moveTransformStart,moveTransformEnd]=move.keyframes.transform,[spinTransformStart,spinTransformEnd]=spin.keyframes.transform,keyframes={transform:[`${moveTransformStart} ${spinTransformStart}`,`${moveTransformEnd} ${spinTransformEnd}`]};return{id,keyframes,WAAPIAnimation:{...spin.WAAPIAnimation,keyframes},AMPTarget:function AMPTarget({children,style}){return react.createElement(move.AMPTarget,{style},react.createElement(spin.AMPTarget,{style},children))},AMPAnimation:function AMPAnimation(){return react.createElement(react.Fragment,null,react.createElement(move.AMPAnimation,null),react.createElement(spin.AMPAnimation,null))},generatedKeyframes:{...move.generatedKeyframes,...spin.generatedKeyframes}}}(animation,element);case types.J6.EffectTwirlIn:return function EffectTwirlIn({type,...args},element){const keyframes={transform:[(0,utils.Wr)(element)`rotate(-540deg) scale(0.1)`,"none"],opacity:[0,1]},timings={...defaultTimings,...args};return parts_createAnimation(keyframes,timings)}(animation,element);case types.J6.EffectWhooshIn:return function EffectWhooshIn({whooshInDir=types.m3.LeftToRight,duration=600,easing="cubic-bezier(0.4, 0.4, 0.0, 1)",delay},element){const id=(0,v4.A)(),{offsetLeft,offsetRight}=(0,getOffPageOffset.A)(element),move=AnimationMove({offsetX:whooshInDir===types.m3.RightToLeft?`${offsetRight}%`:`${offsetLeft}%`,duration,delay,easing,type:types.J6.Move},element),fade=AnimationFade({fadeFrom:0,fadeTo:1,duration,delay,easing,type:types.J6.Fade}),zoom=AnimationZoom({zoomFrom:.15,zoomTo:1,duration,delay,easing,type:types.J6.Zoom}),[moveTransformStart,moveTransformEnd]=move.keyframes.transform,[zoomTransformStart,zoomTransformEnd]=zoom.keyframes.transform,keyframes={transform:[`${moveTransformStart} ${zoomTransformStart}`,`${moveTransformEnd} ${zoomTransformEnd}`],opacity:fade.keyframes.opacity};return{id,keyframes,WAAPIAnimation:{...zoom.WAAPIAnimation,keyframes},AMPTarget:function AMPTarget({children,style}){return react.createElement(move.AMPTarget,{style},react.createElement(fade.AMPTarget,{style},react.createElement(zoom.AMPTarget,{style},children)))},AMPAnimation:function AMPAnimation(){return react.createElement(react.Fragment,null,react.createElement(move.AMPAnimation,null),react.createElement(fade.AMPAnimation,null),react.createElement(zoom.AMPAnimation,null))},generatedKeyframes:{...move.generatedKeyframes,...fade.generatedKeyframes,...zoom.generatedKeyframes}}}(animation,element);case types.J6.EffectZoom:return function EffectZoom({scaleDirection=types.ON.ScaleIn,duration=1e3,delay=0,easing="cubic-bezier(.3,0,.55,1)"}){const id=(0,v4.A)(),zoom=AnimationZoom({zoomFrom:scaleDirection===types.ON.ScaleOut?3:1/3,zoomTo:1,duration,delay,easing,type:types.J6.Zoom}),fade=AnimationFade({fadeFrom:scaleDirection===types.ON.ScaleOut?1:0,fadeTo:1,duration,delay,easing,type:types.J6.Fade}),keyframes={transform:zoom.keyframes.transform,opacity:fade.keyframes.opacity};return{id,keyframes,WAAPIAnimation:{...zoom.WAAPIAnimation,keyframes},AMPTarget:function AMPTarget({children,style}){return react.createElement(fade.AMPTarget,{style},react.createElement(zoom.AMPTarget,{style},children))},AMPAnimation:function AMPAnimation(){return react.createElement(react.Fragment,null,react.createElement(fade.AMPAnimation,null),react.createElement(zoom.AMPAnimation,null))},generatedKeyframes:{...fade.generatedKeyframes,...zoom.generatedKeyframes}}}(animation);case types.J6.EffectBackgroundPan:return EffectBackgroundPan(animation,element);case types.J6.EffectBackgroundPanAndZoom:return function EffectBackgroundPanAndZoom({zoomDirection=types.ON.ScaleIn,panDir=types.m3.RightToLeft,type,...args},element){const timings={...backgroundPanAndZoom_defaults,...args},origin=(0,utils.jK)(element&&(0,utils.n)(element)),bgZoom=EffectBackgroundZoom({zoomDirection,transformOrigin:{[types.m3.RightToLeft]:{horizontal:0,vertical:origin.vertical},[types.m3.LeftToRight]:{horizontal:100,vertical:origin.vertical},[types.m3.BottomToTop]:{horizontal:origin.horizontal,vertical:0},[types.m3.TopToBottom]:{horizontal:origin.horizontal,vertical:100}}[panDir]||[],type:types.J6.EffectBackgroundZoom,...args},element),bgPan=EffectBackgroundPan({panDir,type:types.J6.EffectBackgroundPan,...args},element),startTransform=`${bgPan.keyframes.transform[0]} ${bgZoom.keyframes.transform[0]}`,zoomLastTransformIndex=(bgZoom.keyframes.transform.length||1)-1,panLastTransformIndex=(bgPan.keyframes.transform.length||1)-1,endTransform=`${bgPan.keyframes.transform[zoomLastTransformIndex]} ${bgZoom.keyframes.transform[panLastTransformIndex]}`;return parts_createAnimation({transform:[startTransform,endTransform]},timings,!1,!0)}(animation,element);case types.J6.EffectBackgroundZoom:return EffectBackgroundZoom(animation,element);default:return parts_emptyAnimationPart()}},utils_getDefaultFieldValue=fieldType=>{switch(fieldType){case types.PU.Checkbox:return!1;case types.PU.Number:case types.PU.Float:case types.PU.Range:return 0;default:return""}},basicAnimationFields={duration:{label:(0,i18n.__)("Duration","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:1e3},delay:{label:(0,i18n.__)("Delay","web-stories"),type:types.PU.Number,unit:(0,i18n._x)("ms","Time in milliseconds","web-stories"),defaultValue:0}};types.PU.Hidden,(0,i18n.__)("Animation Type","web-stories"),types.PU.Dropdown,types.y3,types.PU.Dropdown,(0,i18n.__)("Easing Presets","web-stories"),types.PU.Dropdown,Object.keys(constants.Ug),Object.keys(constants.Ug)[0],types.PU.Text,types.PU.Dropdown,(0,i18n.__)('Valid values are numerical or the word "infinity"',"web-stories"),types.PU.Text;function getAnimationEffectFields(type){const customFieldsByType={[types.J6.EffectFadeIn]:fadeIn_fields,[types.J6.EffectFlyIn]:flyIn_fields,[types.J6.EffectPan]:pan_fields,[types.J6.EffectPulse]:pulse_fields,[types.J6.EffectWhooshIn]:whooshIn_fields,[types.J6.EffectZoom]:effects_zoom_fields,[types.J6.EffectDrop]:drop_fields,[types.J6.EffectRotateIn]:rotateIn_fields,[types.J6.EffectBackgroundZoom]:backgroundZoom_fields,[types.J6.EffectBackgroundPan]:backgroundPan_fields,[types.J6.EffectBackgroundPanAndZoom]:backgroundPan_fields},customFields=type&&customFieldsByType[type]||{},allFields={...basicAnimationFields,...customFields},allFieldsOrder={...customFields,...basicAnimationFields};let fieldOrder=Object.keys(allFieldsOrder);type===types.J6.EffectBackgroundPanAndZoom&&fieldOrder.includes("zoomDirection")&&(fieldOrder=fieldOrder.filter((field=>"zoomDirection"!==field)).concat(["zoomDirection"]));return(0,utils.Mo)(allFields,fieldOrder)}function getAnimationEffectDefaults(type){const fields=getAnimationEffectFields(type);return Object.fromEntries(Object.entries(fields).map((([key,value])=>[key,value.defaultValue??utils_getDefaultFieldValue(value.type)])))}},"./packages/animation/src/types/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m3:()=>AnimationDirection,zd:()=>AnimationProps,J6:()=>AnimationType,_0:()=>Axis,PU:()=>FieldType,y3:()=>NonBackgroundAnimationType,pL:()=>Rotation,ON:()=>ScaleDirection,TR:()=>StoryAnimationState,dq:()=>isScaledElement});let AnimationType=function(AnimationType){return AnimationType.BlinkOn="blinkOn",AnimationType.Bounce="bounce",AnimationType.Fade="fade",AnimationType.Flip="flip",AnimationType.FloatOn="floatOn",AnimationType.Move="move",AnimationType.Pulse="pulse",AnimationType.Spin="spin",AnimationType.Zoom="zoom",AnimationType.EffectDrop="effect-drop",AnimationType.EffectFadeIn="effect-fade-in",AnimationType.EffectFlyIn="effect-fly-in",AnimationType.EffectPan="effect-pan",AnimationType.EffectPulse="effect-pulse",AnimationType.EffectRotateIn="effect-rotate-in",AnimationType.EffectTwirlIn="effect-twirl-in",AnimationType.EffectWhooshIn="effect-whoosh-in",AnimationType.EffectZoom="effect-zoom",AnimationType.EffectBackgroundPan="effect-background-pan",AnimationType.EffectBackgroundPanAndZoom="effect-background-pan-and-zoom",AnimationType.EffectBackgroundZoom="effect-background-zoom",AnimationType}({});const{EffectBackgroundPan,EffectBackgroundPanAndZoom,EffectBackgroundZoom,...NonBackgroundAnimationType}={...AnimationType};let AnimationDirection=function(AnimationDirection){return AnimationDirection.LeftToRight="leftToRight",AnimationDirection.TopToBottom="topToBottom",AnimationDirection.RightToLeft="rightToLeft",AnimationDirection.BottomToTop="bottomToTop",AnimationDirection}({}),StoryAnimationState=function(StoryAnimationState){return StoryAnimationState.Reset="reset",StoryAnimationState.Paused="paused",StoryAnimationState.Scrubbing="scrubbing",StoryAnimationState.Playing="playing",StoryAnimationState.PlayingSelected="playing-selected",StoryAnimationState}({}),ScaleDirection=function(ScaleDirection){return ScaleDirection.DynamicPropertyValue="dynamicPropertyValue",ScaleDirection.ScaleIn="scaleIn",ScaleDirection.ScaleOut="scaleOut",ScaleDirection.ScaleOutTopRight="scaleOutTopRight",ScaleDirection.ScaleOutBottomLeft="scaleOutBottomLeft",ScaleDirection.ScaleInTopLeft="scaleInTopLeft",ScaleDirection.ScaleInBottomRight="scaleInBottomRight",ScaleDirection}({}),Rotation=function(Rotation){return Rotation.Clockwise="clockwise",Rotation.CounterClockwise="counterClockwise",Rotation.PingPong="pingPong",Rotation}({}),Axis=function(Axis){return Axis.X="x",Axis.Y="y",Axis}({}),FieldType=function(FieldType){return FieldType.Dropdown="dropdown",FieldType.Hidden="hidden",FieldType.RotationPicker="rotation_picker",FieldType.DirectionPicker="direction_picker",FieldType.Number="number",FieldType.Float="float",FieldType.Text="text",FieldType.Checkbox="checkbox",FieldType.Range="range",FieldType}({});function isScaledElement(e){return"scale"in e}var prop_types=__webpack_require__("./node_modules/prop-types/index.js");prop_types.object;const GeneralAnimationPropTypes={delay:prop_types.number,direction:prop_types.oneOf(["normal","reverse","alternate","alternate-reverse"]),duration:prop_types.number,easing:prop_types.string,easingPreset:prop_types.string,endDelay:prop_types.number,fill:prop_types.oneOf(["backwards","forwards","both","none"]),iterationStart:prop_types.number,iterations:prop_types.oneOfType([prop_types.number,prop_types.oneOf(["infinity",""])])},AnimationProps={id:prop_types.string.isRequired,type:prop_types.oneOf(Object.values(AnimationType)),targets:prop_types.arrayOf(prop_types.string),...GeneralAnimationPropTypes}},"./packages/animation/src/utils/getOffPageOffset.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_units__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/units/src/dimensions.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/units/src/constants.ts");function calcTopOffset(box,dangerZoneOffset){const{y,height}=box;return-Number((dangerZoneOffset+y)/height*100+100).toFixed(5)}function calcBottomOffset(box,dangerZoneOffset){const{y,height}=box;return Number((100-y+dangerZoneOffset)/height*100).toFixed(5)}function calcLeftOffset(box){const{x,width}=box;return-Number(x/width*100+100).toFixed(5)}function calcRightOffset(box){const{x,width}=box;return Number((100-x)/width*100).toFixed(5)}const __WEBPACK_DEFAULT_EXPORT__=function getOffPageOffset(element){const box=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_0__.YH)(element,100,100),dangerZoneOffset=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_0__.y6)(_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.vT,100);return{offsetTop:calcTopOffset(box,dangerZoneOffset),offsetBottom:calcBottomOffset(box,dangerZoneOffset),offsetLeft:calcLeftOffset(box),offsetRight:calcRightOffset(box)}}},"./packages/animation/src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{kc:()=>DEFAULT_HAS_OFFSETS,We:()=>defaultUnit,n:()=>getElementOffsets,jK:()=>getElementOrigin,Wr:()=>getGlobalSpace,VS:()=>getHasElementOffsets,oL:()=>getOffPageOffset.A,t1:()=>getTotalDuration,Mo:()=>orderByKeys});const defaultUnit=(input,unit)=>/\d$/.test(String(input))?`${input}${unit}`:input;__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");function literal(strings,...args){return strings.reduce(((accum,str,i)=>accum.concat([str,args[i]])),[]).join("")}function getGlobalSpace(element={}){const angle=element?.rotationAngle||0;return 0!==angle?function global(strings,...args){return`rotate(${-1*angle}deg) ${literal(strings,...args)} rotate(${angle}deg)`}:literal}var getOffPageOffset=__webpack_require__("./packages/animation/src/utils/getOffPageOffset.ts");function getTotalDuration(animations=[]){return animations.reduce(((total,{duration=0,delay=0})=>Math.max(total,duration+delay)),0)}function orderByKeys(obj={},keys=[]){const entries=Object.entries(obj),pos=s=>keys.includes(s)?keys.indexOf(s):Number.MAX_SAFE_INTEGER;return entries.sort((([a],[b])=>pos(a)-pos(b))),Object.fromEntries(entries)}__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.some.js");var getMediaSizePositionProps=__webpack_require__("./packages/media/src/getMediaSizePositionProps.ts"),dimensions=__webpack_require__("./packages/units/src/dimensions.ts"),constants=__webpack_require__("./packages/units/src/constants.ts");const PRECISION=1;function getElementOffsets(element){if(!function isMediaElement(e){return"resource"in e}(element))return{top:0,bottom:0,left:0,right:0};const box=(0,dimensions.YH)(element,constants.bj,constants.WY),media=(0,getMediaSizePositionProps.A)(element.resource,box.width,box.height,element.scale??1,element.focalX??50,element.focalY??50);return{top:media.offsetY/media.height*100,right:(media.width-(media.offsetX+constants.bj))/media.width*-1*100,left:media.offsetX/media.width*100,bottom:(media.height-(media.offsetY+constants._b))/media.height*-1*100}}const DEFAULT_HAS_OFFSETS={top:!1,bottom:!1,left:!1,right:!1};function getHasElementOffsets(element){const offsets=getElementOffsets(element);return Object.fromEntries(Object.entries(offsets).map((([key,offset])=>[key,Math.abs(offset)>PRECISION])))}function getElementOrigin(offsets={top:0,right:0,bottom:0,left:0}){const progress={vertical:50,horizontal:50},absOffsets=Object.fromEntries(Object.entries(offsets).map((([key,val])=>[key,Math.abs(val)]))),isSignificant=val=>val>=.01;return[absOffsets.top,absOffsets.bottom].some(isSignificant)&&(progress.vertical=100*absOffsets.top/(absOffsets.top+absOffsets.bottom)),[absOffsets.left,absOffsets.right].some(isSignificant)&&(progress.horizontal=100*absOffsets.left/(absOffsets.left+absOffsets.right)),progress}},"./packages/media/src/getMediaSizePositionProps.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function getMediaSizePositionProps(resource,width,height,scale=100,focalX,focalY){const ratio=width/height,oRatio=resource.width&&resource.height?resource.width/resource.height:1;focalX="number"==typeof focalX?focalX:50,focalY="number"==typeof focalY?focalY:50;const mediaWidth=(oRatio<=ratio?width:height*oRatio)*(scale=Math.max(scale||100,100))*.01,mediaHeight=(oRatio<=ratio?width/oRatio:height)*scale*.01;return{width:mediaWidth,height:mediaHeight,offsetX:Math.max(0,Math.min(mediaWidth*focalX*.01-.5*width,mediaWidth-width)),offsetY:Math.max(0,Math.min(mediaHeight*focalY*.01-.5*height,mediaHeight-height)),scale,focalX,focalY}}},"./packages/units/src/calcRotatedResizeOffset.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function calcRotatedResizeOffset(degree,left,right,top,bottom){const rad=degree*Math.PI/180,cos=Math.cos(rad),sin=Math.sin(rad);return[((right-left)*cos+(top-bottom)*sin)/2-(right+left)/2,((bottom-top)*cos+(right-left)*sin)/2-(bottom+top)/2]}},"./packages/units/src/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{VX:()=>DEFAULT_DPR,WY:()=>PAGE_HEIGHT,_b:()=>FULLBLEED_HEIGHT,bj:()=>PAGE_WIDTH,d_:()=>DEFAULT_EM,iZ:()=>PAGE_RATIO,vT:()=>DANGER_ZONE_HEIGHT,yK:()=>FULLBLEED_RATIO});const PAGE_RATIO=2/3,PAGE_WIDTH=412,PAGE_HEIGHT=618,FULLBLEED_RATIO=9/16,FULLBLEED_HEIGHT=PAGE_WIDTH/FULLBLEED_RATIO,DANGER_ZONE_HEIGHT=(FULLBLEED_HEIGHT-PAGE_HEIGHT)/2,DEFAULT_EM=.02186*PAGE_HEIGHT,DEFAULT_DPR=.5},"./packages/units/src/dimensions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fl:()=>dataToFontSizeY,GC:()=>editorToDataY,GU:()=>dataPixels,Vc:()=>editorPixels,YH:()=>getBox,YK:()=>getBoxWithBorder,Yy:()=>dataFontEm,rs:()=>dataToEditorX,y6:()=>dataToEditorY,z0:()=>editorToDataX});var _calcRotatedResizeOffset__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/units/src/calcRotatedResizeOffset.ts"),_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/units/src/constants.ts");function dataPixels(v){return Number(v.toFixed(0))}function dataFontEm(v){return Number((v*_constants__WEBPACK_IMPORTED_MODULE_0__.d_).toFixed(1))}function editorPixels(v){return Number(v.toFixed(5))}function dataToEditorX(x,pageWidth){return editorPixels(x*pageWidth/_constants__WEBPACK_IMPORTED_MODULE_0__.bj)}function dataToEditorY(y,pageHeight){return editorPixels(y*pageHeight/_constants__WEBPACK_IMPORTED_MODULE_0__.WY)}function dataToFontSizeY(v,pageHeight){return(dataToEditorY(v,pageHeight)/10).toFixed(6)}function editorToDataX(x,pageWidth,withRounding=!0){const v=x*_constants__WEBPACK_IMPORTED_MODULE_0__.bj/pageWidth;return withRounding?dataPixels(v):v}function editorToDataY(y,pageHeight,withRounding=!0){const v=y*_constants__WEBPACK_IMPORTED_MODULE_0__.WY/pageHeight;return withRounding?dataPixels(v):v}function getBox({x,y,width,height,rotationAngle,isBackground},pageWidth,pageHeight){return{x:dataToEditorX(isBackground?0:x,pageWidth),y:dataToEditorY(isBackground?-_constants__WEBPACK_IMPORTED_MODULE_0__.vT:y,pageHeight),width:dataToEditorX(isBackground?_constants__WEBPACK_IMPORTED_MODULE_0__.bj:width,pageWidth),height:dataToEditorY(isBackground?_constants__WEBPACK_IMPORTED_MODULE_0__._b:height,pageHeight),rotationAngle:isBackground?0:rotationAngle}}function getBoxWithBorder(element,pageWidth,pageHeight){const{rotationAngle,border}=element,box=getBox(element,pageWidth,pageHeight);if(!border)return box;const{left=0,right=0,top=0,bottom=0}=border,[diffX,diffY]=(0,_calcRotatedResizeOffset__WEBPACK_IMPORTED_MODULE_1__.A)(rotationAngle,left,right,top,bottom);return{...box,x:box.x+diffX,y:box.y+diffY,width:box.width+left+right,height:box.height+top+bottom}}},"./packages/units/src/range.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cc:()=>lerp,qB:()=>progress,qE:()=>clamp});const lerp=(progress,range)=>(1-progress)*range.MIN+progress*range.MAX,progress=(v,range)=>{const delta=clamp(v,range)-range.MIN,difference=range.MAX-range.MIN;return Math.abs(delta/difference)},clamp=(value,{MIN,MAX})=>Math.min(Math.max(value,MIN),MAX)}}]);