"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[3907],{"./packages/design-system/src/components/contextMenu/components/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_visuallyHidden__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/components/visuallyHidden.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const IconWrapper=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div.withConfig({displayName:"icon__IconWrapper",componentId:"sc-c43rae-0"})(["width:32px;height:32px;display:flex;align-items:center;justify-content:center;> *{flex:1;}"]);const __WEBPACK_DEFAULT_EXPORT__=function Icon({children,title,className="",...props}){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_visuallyHidden__WEBPACK_IMPORTED_MODULE_2__.s,null,title),react__WEBPACK_IMPORTED_MODULE_0__.createElement(IconWrapper,_extends({className},props),children))}},"./packages/design-system/src/components/contextMenu/components/item.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>item});var react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./packages/react/src/index.ts"),components_button=__webpack_require__("./packages/design-system/src/components/contextMenu/components/button.tsx"),components_shortcut=__webpack_require__("./packages/design-system/src/components/contextMenu/components/shortcut.ts");const suffix=styled_components_browser_esm.Ay.div.withConfig({displayName:"suffix__Suffix",componentId:"sc-xb7uiq-0"})(["position:relative;svg{width:32px;color:",";position:absolute;right:-14px;top:-16px;}"],(({theme})=>theme.colors.fg.secondary));function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const StyledButton=(0,styled_components_browser_esm.Ay)(components_button.A).withConfig({displayName:"item__StyledButton",componentId:"sc-1w2myxt-0"})(["",""],(({supportsIcon})=>supportsIcon&&"\n    svg {\n      width: 32px;\n      position: absolute;\n      margin-left: -12px;\n    }\n    span {\n      padding-left: 18px;\n      font-size: 12px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  ")),item=(0,src.Rf)((function MenuItem({label,shortcut,icon,SuffixIcon,className,...buttonProps},ref){return react.createElement(StyledButton,_extends({className,ref},buttonProps),icon,label,shortcut&&react.createElement(components_shortcut.A,null,shortcut.display),SuffixIcon&&react.createElement(suffix,null,react.createElement(SuffixIcon,null)))}))},"./packages/design-system/src/components/contextMenu/components/shortcut.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_typography_text__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_typography_text__WEBPACK_IMPORTED_MODULE_1__.E.Kbd).attrs({size:_theme__WEBPACK_IMPORTED_MODULE_2__.$.XSmall}).withConfig({displayName:"shortcut__Shortcut",componentId:"sc-1ru49ss-0"})(["color:",";"],(({theme})=>theme.colors.fg.secondary))},"./packages/design-system/src/components/visuallyHidden.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>VisuallyHidden});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts");const VisuallyHidden=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.span.withConfig({displayName:"visuallyHidden__VisuallyHidden",componentId:"sc-35d3te-0"})(["",";"],_theme_helpers__WEBPACK_IMPORTED_MODULE_1__.Q)},"./packages/story-editor/src/app/media/utils/useVideoElementTranscoding.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_components_videoTrim_useVideoTrim__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/videoTrim/useVideoTrim.js"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/app/index.js"),_useFFmpeg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/app/media/utils/useFFmpeg.ts");const __WEBPACK_DEFAULT_EXPORT__=function useVideoElementTranscoding({resource,elementId,isSingleElement=!0}){const{isTranscodingEnabled}=(0,_useFFmpeg__WEBPACK_IMPORTED_MODULE_3__.A)(),{muteExistingVideo,isElementTrimming,isNewResourceMuting,canTranscodeResource}=(0,___WEBPACK_IMPORTED_MODULE_2__.HZ)((({state:{canTranscodeResource,isNewResourceMuting,isElementTrimming},actions:{muteExistingVideo}})=>({canTranscodeResource,isNewResourceMuting,isElementTrimming,muteExistingVideo}))),{isMuted,id:resourceId=0}=resource,isTrimming=!!isSingleElement&&isElementTrimming(elementId),isMuting=isNewResourceMuting(resourceId),handleMute=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.hb)((()=>{muteExistingVideo({resource})}),[resource,muteExistingVideo]),shouldDisableVideoActions=!canTranscodeResource(resource),canMute=isTranscodingEnabled&&isSingleElement&&(!isMuted&&canTranscodeResource(resource)||isMuting),{hasTrimMode,toggleTrimMode}=(0,_components_videoTrim_useVideoTrim__WEBPACK_IMPORTED_MODULE_1__.A)((({state:{hasTrimMode},actions:{toggleTrimMode}})=>({hasTrimMode,toggleTrimMode})));return{state:{canTrim:hasTrimMode,canMute,isTrimming,isMuting,isDisabled:shouldDisableVideoActions},actions:{handleMute,handleTrim:toggleTrimMode}}}},"./packages/story-editor/src/components/canvas/editLayerFocusManager/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{wn:()=>constants,Ay:()=>provider,in:()=>editLayerFocusManager_useEditLayerFocusManager,ec:()=>editLayerFocusManager_useFocusGroupRef});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts"));const context=(0,src.q6)(null);__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js");const INITIAL_STATE={cleanup:null,focusGroups:{},cleanupCallbacks:{}},reduction={addNodeToGroup:(state,action)=>{const{groupId,nodeTuple}=action.payload,nodeGroup=state.focusGroups[groupId]||[];let newNodeGroup=[];const index=nodeGroup.findIndex((_nodeTuple=>_nodeTuple[0]===nodeTuple[0]));return newNodeGroup=-1===index?[...nodeGroup,nodeTuple]:[...nodeGroup.slice(0,index),nodeTuple,...nodeGroup.slice(0,index+1)],{...state,focusGroups:{...state.focusGroups,[groupId]:newNodeGroup}}},removeNodeFromGroup:(state,action)=>{const{groupId,nodeTuple}=action.payload,newNodeGroup=(state.focusGroups[groupId]||[]).filter((_nodeTuple=>_nodeTuple[0]!==nodeTuple[0]));return{...state,focusGroups:{...state.focusGroups,[groupId]:newNodeGroup}}},setFocusGroupCleanup:(state,action)=>{const{groupId,cleanup}=action.payload;return{...state,activeGroupKey:groupId,cleanupCallbacks:{...state.cleanupCallbacks,[groupId]:cleanup}}}};var keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);function KeyBindings({uuid,node,focusGroup,exitFocusGroup}){const traverseFocusGroup=(0,src.hb)((e=>{e.preventDefault();const navigateFocusGroup=function createNavigateFocusGroup(uuid,focusGroup){return function navigateFocusGroup(step){if(!focusGroup)return;const currentIndex=focusGroup.findIndex((nodeTuple=>nodeTuple[0]===uuid));if(-1===currentIndex)return;const nextIndex=function wrapIndex(i,length){return(i%length+length)%length}(currentIndex+step,focusGroup.length),[,node]=focusGroup[nextIndex];node?.focus()}}(uuid,focusGroup);e.shiftKey?navigateFocusGroup(-1):navigateFocusGroup(1)}),[focusGroup,uuid]),handleEsc=(0,src.hb)((e=>{e.preventDefault(),exitFocusGroup?.()}),[exitFocusGroup]);return(0,keyboard._h)(node,{key:["tab"],allowDefault:!0,editable:!0,shift:!0},traverseFocusGroup,[traverseFocusGroup]),(0,keyboard._h)(node,{key:["esc"],allowDefault:!0,editable:!0},handleEsc,[handleEsc]),null}KeyBindings.propTypes={uuid:prop_types_default().string.isRequired,node:"undefined"!=typeof Element?prop_types_default().instanceOf(Element).isRequired:prop_types_default().any.isRequired,focusGroup:prop_types_default().array.isRequired,exitFocusGroup:prop_types_default().func};const keyBindings=KeyBindings;const provider=function EditLayerFocusManager({children}){const[state,actions]=(0,src.Fm)(INITIAL_STATE,reduction),stateRef=(0,src.li)(state);stateRef.current=state;const enterFocusGroup=(0,src.hb)((({groupId})=>{const nodeTuple=stateRef.current.focusGroups?.[groupId]?.[0];if(nodeTuple){const[,node]=nodeTuple;node.focus()}}),[stateRef]),focusGroups=Object.entries(state.focusGroups),focusGroupCleanupCallbacks=state.cleanupCallbacks;return react.createElement(context.Provider,{value:{enterFocusGroup,setFocusGroupCleanup:actions.setFocusGroupCleanup,actions}},focusGroups.map((([groupId,focusGroup])=>focusGroup.map((([uuid,node])=>node&&react.createElement(keyBindings,{key:uuid,uuid,node,focusGroup,exitFocusGroup:focusGroupCleanupCallbacks[groupId]}))))),children)};var v4=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js");const editLayerFocusManager_useFocusGroupRef=function useFocusGroupRef(groupId){const actions=(0,src.i7)(context,(value=>value.actions)),uuid=(0,src.FF)(v4.A);return(0,src.hb)((node=>{null!==node?actions.addNodeToGroup({groupId,nodeTuple:[uuid,node]}):actions.removeNodeFromGroup({groupId,nodeTuple:[uuid,node]})}),[actions,groupId,uuid])};const editLayerFocusManager_useEditLayerFocusManager=function useEditLayerFocusManager(selector){return(0,src.i7)(context,selector??src.D_)},constants={EDIT_ELEMENT:"EDIT_ELEMENT",ELEMENT_SELECTION:"ELEMENT_SELECTION"}},"./packages/story-editor/src/components/floatingMenu/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$7:()=>SELECTED_ELEMENT_TYPES,Vd:()=>TOOLBAR_POSITIONS,iN:()=>hasDesignMenu});var _googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/elements/src/index.ts");const SELECTED_ELEMENT_TYPES={..._googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__.bV,MULTIPLE:"multiple",NONE:"none"},TOOLBAR_POSITIONS={ELEMENT:"FIXED_TO_ELEMENT",TOP:"FIXED_TO_TOP"};function hasDesignMenu(type){switch(type){case SELECTED_ELEMENT_TYPES.MULTIPLE:return!0;case SELECTED_ELEMENT_TYPES.NONE:return!1;default:return(0,_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_0__.zh)(type)?.hasDesignMenu}}},"./packages/story-editor/src/components/floatingMenu/menu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>menu});var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),contextMenu=__webpack_require__("./packages/design-system/src/components/contextMenu/contextMenu.tsx"),zIndex=__webpack_require__("./packages/story-editor/src/constants/zIndex.ts"),editLayerFocusManager=__webpack_require__("./packages/story-editor/src/components/canvas/editLayerFocusManager/index.js");const context=(0,src.q6)({state:{},actions:{}});const use=function useFloatingMenu(selector){return(0,src.i7)(context,selector??src.D_)};const provider=function FloatingMenuProvider({handleDismiss,children}){const value={state:{},actions:{handleDismiss}};return react.createElement(context.Provider,{value},children)};var constants=__webpack_require__("./packages/story-editor/src/components/floatingMenu/constants.js"),border_box=__webpack_require__("./packages/design-system/src/icons/border_box.svg"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),masks_src=__webpack_require__("./packages/masks/src/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),shared=__webpack_require__("./packages/story-editor/src/components/panels/design/border/shared.js"),popup_constants=__webpack_require__("./packages/design-system/src/components/popup/constants.ts"),color=__webpack_require__("./packages/story-editor/src/components/form/color/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const EYEDROPPER_WIDTH=38,WIDTH_INCLUDING_INPUTS=184,WIDTH_EXCLUDING_INPUTS=60;const shared_color=function FloatingColor(props){const{hasInputs,hasEyedropper,allowsGradient=!0}=props,width=function getWidth(hasInputs,hasEyedropper){return(hasInputs?WIDTH_INCLUDING_INPUTS:WIDTH_EXCLUDING_INPUTS)+(hasEyedropper?EYEDROPPER_WIDTH:0)}(hasInputs,hasEyedropper);return react.createElement(color.A,_extends({width,maxHeight:362,pickerPlacement:popup_constants.W.TopStart,isInDesignMenu:!0,allowsGradient,allowsSavedColors:!0,allowsSavedColorDeletion:!1,pickerHasEyedropper:!hasEyedropper,containerLabelBase:(0,i18n.__)("Color input (floating menu)","web-stories")},props))};var focusTrapButton=__webpack_require__("./packages/story-editor/src/components/floatingMenu/elements/shared/focusTrapButton.js"),icon=__webpack_require__("./packages/design-system/src/components/contextMenu/components/icon.tsx"),components_tooltip=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),button_constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),components_button=__webpack_require__("./packages/design-system/src/components/contextMenu/components/button.tsx");function toggleButton_extends(){return toggleButton_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},toggleButton_extends.apply(this,arguments)}const toggleButton=(0,src.Rf)((function ToggleButton({isToggled,children,...rest},ref){const toggleProps="boolean"==typeof isToggled?{type:isToggled?button_constants.VQ.Secondary:button_constants.VQ.Tertiary,"aria-pressed":isToggled,role:"button"}:{};return react.createElement(components_button.A,toggleButton_extends({ref},toggleProps,rest),children)}));function icon_extends(){return icon_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},icon_extends.apply(this,arguments)}const shared_icon=(0,src.ph)((0,src.Rf)((function IconButton({Icon,title,hasTooltip=!0,...rest},ref){return react.createElement(components_tooltip.A,{placement:popup_constants.W.Bottom,title:hasTooltip?title:void 0},react.createElement(toggleButton,icon_extends({"aria-label":title,ref,tabIndex:-1},rest),react.createElement(icon.A,{title},react.createElement(Icon,null))))})));var numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),contextMenu_constants=__webpack_require__("./packages/design-system/src/components/contextMenu/constants.ts");const input=(0,styled_components_browser_esm.Ay)(numericInput.A).attrs({inputClassName:contextMenu_constants.D}).withConfig({displayName:"input__Input",componentId:"sc-79zl03-0"})(["width:70px;flex:0 0 70px;"]);const shared_separator=__webpack_require__("./packages/design-system/src/components/contextMenu/components/separator.tsx").A;function text_extends(){return text_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},text_extends.apply(this,arguments)}const Button=(0,styled_components_browser_esm.Ay)(components_button.A).withConfig({displayName:"text__Button",componentId:"sc-fb6dx4-0"})(["font-size:14px;padding:0 12px;font-weight:normal;letter-spacing:normal;"]),shared_text=(0,src.ph)((function TextButton({text,...rest}){return react.createElement(Button,text_extends({forcePadding:!0},rest,{tabIndex:-1}),text)}));var story=__webpack_require__("./packages/story-editor/src/app/story/index.ts"),objectPick=__webpack_require__("./packages/story-editor/src/utils/objectPick.ts");const shared_useProperties=function useProperties(propertyList){return(0,story.P3)((({state:{selectedElements}})=>(0,objectPick.A)(selectedElements[0],propertyList)))};var useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js"),updateProperties=__webpack_require__("./packages/story-editor/src/components/style/updateProperties.js"),getUpdatedSizeAndPosition=__webpack_require__("./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js");const shared_useTextToggle=function useTextToggle({currentValue,handler,eventName}){const{content}=shared_useProperties(["content"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),pushUpdate=(0,src.hb)((update=>{(0,tracking_src.sx)("floating_menu",{name:eventName,element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.A)(element,update,!0),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...element,...updates});return{...updates,...sizeUpdates}}})}),[updateElementsById,selectedElementIds,eventName]),{textInfo,handlers}=(0,useRichTextFormatting.A)([{content,type:"text"}],pushUpdate);return{isToggled:textInfo[currentValue],toggle:()=>{(0,handlers[handler])(!textInfo[currentValue])}}},Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"borderWidthAndColor__Container",componentId:"sc-1qijom4-0"})(["display:flex;align-items:center;"]),Dash=styled_components_browser_esm.Ay.div.withConfig({displayName:"borderWidthAndColor__Dash",componentId:"sc-1qijom4-1"})(["width:8px;height:1px;background-color:",";"],(({theme})=>theme.colors.border.defaultNormal));const BLACK={color:{r:0,g:0,b:0}},WIDTH_LABEL=(0,i18n.__)("Border width","web-stories"),COLOR_LABEL=(0,i18n.__)("Border color","web-stories");const borderWidthAndColor=function BorderWidthAndColor(){const inputRef=(0,src.li)(),buttonRef=(0,src.li)(),{border=shared.$,mask,type}=shared_useProperties(["border","mask","type"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),hasUniformBorder=border?.left===border?.right&&border?.left===border?.top&&border?.left===border?.bottom;if(!border?.lockedWidth&&!hasUniformBorder)return null;const canHaveBorderOpacity=(0,masks_src.Fn)({mask}),hasBorderWidth=function getHasBorderWidth(border){if(!border)return!1;const{left,right,top,bottom}=border;return Boolean(left||right||top||bottom)}(border);return react.createElement(Container,null,react.createElement(focusTrapButton.A,{ref:buttonRef,inputRef,inputLabel:WIDTH_LABEL},react.createElement(input,{tabIndex:-1,ref:inputRef,suffix:react.createElement(border_box.A,null),value:border?.left||0,"aria-label":WIDTH_LABEL,onChange:(_,value)=>(value=>{(0,tracking_src.sx)("floating_menu",{name:"set_border_width",element:type}),updateElementsById({elementIds:selectedElementIds,properties:({border:oldBorder})=>({border:{locked:!0,color:border?.color,...oldBorder,left:value,right:value,top:value,bottom:value}})})})(value),onKeyDown:e=>{(0,focusTrapButton.t)(e,buttonRef)}})),hasBorderWidth&&react.createElement(react.Fragment,null,react.createElement(Dash,null),react.createElement(shared_color,{tabIndex:-1,label:COLOR_LABEL,value:border?.color||BLACK,onChange:value=>{(0,tracking_src.sx)("floating_menu",{name:"set_border_color",element:type}),updateElementsById({elementIds:selectedElementIds,properties:({border:oldBorder})=>({border:{...oldBorder,color:value}})})},hasInputs:!1,hasEyedropper:!1,allowsOpacity:canHaveBorderOpacity,allowsGradient:!1,allowsSavedColors:!1})))};var corner=__webpack_require__("./packages/design-system/src/icons/corner.svg"),radius=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/radius.js");const CORNER_LABEL=(0,i18n.__)("Corner Radius","web-stories");const borderRadius=function BorderRadius(){const inputRef=(0,src.li)(),buttonRef=(0,src.li)(),{borderRadius=radius.w,mask,type}=shared_useProperties(["borderRadius","mask","type"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),canHaveBorderRadius=(0,masks_src.Fn)({mask}),hasUniformBorder=borderRadius.topLeft===borderRadius.topRight&&borderRadius.topLeft===borderRadius.bottomLeft&&borderRadius.topLeft===borderRadius.bottomRight;return canHaveBorderRadius&&(borderRadius.locked||hasUniformBorder)?react.createElement(focusTrapButton.A,{ref:buttonRef,inputRef,inputLabel:CORNER_LABEL},react.createElement(input,{tabIndex:-1,ref:inputRef,suffix:react.createElement(corner.A,null),value:borderRadius.topLeft,"aria-label":CORNER_LABEL,onChange:(_,value)=>(value=>{(0,tracking_src.sx)("floating_menu",{name:"set_border_radius",element:type}),updateElementsById({elementIds:selectedElementIds,properties:{borderRadius:{locked:!0,topLeft:value,topRight:value,bottomRight:value,bottomLeft:value}}})})(value),onKeyDown:e=>{(0,focusTrapButton.t)(e,buttonRef)}}),react.createElement(shared_separator,null)):null};var cross=__webpack_require__("./packages/design-system/src/icons/cross.svg");const dismiss=function Dismiss({isMultiple}){const{type}=shared_useProperties(["type"]),{handleDismiss}=use((({actions:{handleDismiss}})=>({handleDismiss})));return react.createElement(shared_icon,{Icon:cross.A,title:(0,i18n.__)("Dismiss menu","web-stories"),onClick:()=>{(0,tracking_src.sx)("floating_menu",{name:"dismiss_menu",element:isMultiple?"multiple":type}),handleDismiss()}})};var distribute_horizontal=__webpack_require__("./packages/design-system/src/icons/distribute_horizontal.svg"),distribute_vertical=__webpack_require__("./packages/design-system/src/icons/distribute_vertical.svg"),align_left=__webpack_require__("./packages/design-system/src/icons/align_left.svg"),align_center=__webpack_require__("./packages/design-system/src/icons/align_center.svg"),align_right=__webpack_require__("./packages/design-system/src/icons/align_right.svg"),align_top=__webpack_require__("./packages/design-system/src/icons/align_top.svg"),align_middle=__webpack_require__("./packages/design-system/src/icons/align_middle.svg"),align_bottom=__webpack_require__("./packages/design-system/src/icons/align_bottom.svg"),useAlignment=__webpack_require__("./packages/story-editor/src/components/panels/design/alignment/useAlignment.js");const elementAlignment=function ElementAlignment(){const{selectedElements,selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElements:state.selectedElements,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),{isDistributionEnabled,handleAlignLeft,handleAlignCenter,handleAlignRight,handleAlignTop,handleAlignMiddle,handleAlignBottom,handleHorizontalDistribution,handleVerticalDistribution}=(0,useAlignment.A)({selectedElements,updateElements:callback=>{updateElementsById({elementIds:selectedElementIds,properties:callback})},isFloatingMenu:!0});return react.createElement(react.Fragment,null,isDistributionEnabled&&react.createElement(react.Fragment,null,react.createElement(shared_icon,{Icon:distribute_horizontal.A,title:(0,i18n.__)("Distribute horizontally","web-stories"),onClick:handleHorizontalDistribution}),react.createElement(shared_icon,{Icon:distribute_vertical.A,title:(0,i18n.__)("Distribute vertically","web-stories"),onClick:handleVerticalDistribution}),react.createElement(shared_separator,null)),react.createElement(shared_icon,{Icon:align_left.A,title:(0,i18n.__)("Align left","web-stories"),onClick:handleAlignLeft}),react.createElement(shared_icon,{Icon:align_center.A,title:(0,i18n.__)("Align center","web-stories"),onClick:handleAlignCenter}),react.createElement(shared_icon,{Icon:align_right.A,title:(0,i18n.__)("Align right","web-stories"),onClick:handleAlignRight}),react.createElement(shared_icon,{Icon:align_top.A,title:(0,i18n.__)("Align top","web-stories"),onClick:handleAlignTop}),react.createElement(shared_icon,{Icon:align_middle.A,title:(0,i18n.__)("Align vertical center","web-stories"),onClick:handleAlignMiddle}),react.createElement(shared_icon,{Icon:align_bottom.A,title:(0,i18n.__)("Align bottom","web-stories"),onClick:handleAlignBottom}))};var mirror_leftright=__webpack_require__("./packages/design-system/src/icons/mirror_leftright.svg");const shared_useFlip=function useFlip(property){const{flip,type}=shared_useProperties(["flip","type"]),{selectedElementIds,updateElementsById}=(0,story.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return{[property]:flip?.[property]||!1,toggle:()=>{(0,tracking_src.sx)("floating_menu",{name:`set_flip_${property}`,element:type}),updateElementsById({elementIds:selectedElementIds,properties:oldElement=>({flip:{...oldElement.flip,[property]:Boolean(!oldElement.flip?.[property]||!1)}})})}}};const flipHorizontal=function FlipHorizontal(){const{horizontal,toggle}=shared_useFlip("horizontal");return react.createElement(shared_icon,{Icon:mirror_leftright.A,title:(0,i18n.__)("Flip horizontally","web-stories"),onClick:toggle,isToggled:horizontal})};var mirror_updown=__webpack_require__("./packages/design-system/src/icons/mirror_updown.svg");const flipVertical=function FlipVertical(){const{vertical,toggle}=shared_useFlip("vertical");return react.createElement(shared_icon,{Icon:mirror_updown.A,title:(0,i18n.__)("Flip vertically","web-stories"),onClick:toggle,isToggled:vertical})};var storyFontPicker=__webpack_require__("./packages/story-editor/src/components/storyFontPicker/index.js");const StyledFontPicker=(0,styled_components_browser_esm.Ay)(storyFontPicker.A).withConfig({displayName:"fontFamily__StyledFontPicker",componentId:"sc-sk3dxe-0"})(["width:164px;"]),listStyleOverrides=(0,styled_components_browser_esm.AH)(["max-height:200px;"]),containerStyleOverrides=(0,styled_components_browser_esm.AH)(["border:1px solid ",";"],(({theme})=>theme.colors.border.defaultNormal));const fontFamily=function FontFamily(){const{selectedElements}=(0,story.P3)((({state})=>({selectedElements:state.selectedElements})));return react.createElement(StyledFontPicker,{tabIndex:-1,listStyleOverrides,containerStyleOverrides,selectedElements})};var styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),font=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/font.js");const fontSize_Input=(0,styled_components_browser_esm.Ay)(numericInput.A).attrs({inputClassName:contextMenu_constants.D}).withConfig({displayName:"fontSize__Input",componentId:"sc-17k2x26-0"})(["width:50px;flex:0 0 50px;"]),FONT_SIZE_LABEL=(0,i18n.__)("Font size","web-stories");const fontSize=function FontSize(){const inputRef=(0,src.li)(),buttonRef=(0,src.li)(),{fontSize,selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({fontSize:state.selectedElements[0].fontSize,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),onChange=(0,src.hb)((update=>{(0,tracking_src.sx)("floating_menu",{name:"set_font_size"}),updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.A)(element,update,!0),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...element,...updates});return{...updates,...sizeUpdates}}})}),[selectedElementIds,updateElementsById]);return react.createElement(focusTrapButton.A,{ref:buttonRef,inputRef,inputLabel:FONT_SIZE_LABEL},react.createElement(fontSize_Input,{tabIndex:-1,ref:inputRef,"aria-label":FONT_SIZE_LABEL,isFloat:!0,value:fontSize,onChange:(evt,value)=>onChange({fontSize:value}),min:font.s.FONT_SIZE.MIN,max:font.s.FONT_SIZE.MAX,placeholder:fontSize,containerStyleOverride:styles.t,selectButtonStylesOverride:styles.Y,onKeyDown:e=>{(0,focusTrapButton.t)(e,buttonRef)}}))};var color_drop=__webpack_require__("./packages/design-system/src/icons/color_drop.svg"),sizePosition_opacity=__webpack_require__("./packages/story-editor/src/components/panels/design/sizePosition/opacity.js");const layerOpacity_Input=(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"layerOpacity__Input",componentId:"sc-1pptz1t-0"})(["width:82px;flex:0 0 82px;"]),OPACITY_LABEL=(0,i18n.__)("Opacity in percent","web-stories");const layerOpacity=function LayerOpacity(){const inputRef=(0,src.li)(),buttonRef=(0,src.li)(),{opacity,type}=shared_useProperties(["opacity","type"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return react.createElement(focusTrapButton.A,{ref:buttonRef,inputRef,inputLabel:OPACITY_LABEL},react.createElement(layerOpacity_Input,{ref:inputRef,tabIndex:-1,suffix:react.createElement(color_drop.A,null),unit:(0,i18n._x)("%","Percentage","web-stories"),value:opacity||0,"aria-label":OPACITY_LABEL,onChange:(_,value)=>{(0,tracking_src.sx)("floating_menu",{name:"set_opacity",element:type}),updateElementsById({elementIds:selectedElementIds,properties:()=>({opacity:value??100})})},inputClassName:contextMenu_constants.D,onKeyDown:e=>{(0,focusTrapButton.t)(e,buttonRef)},min:sizePosition_opacity.s.OPACITY.MIN,max:sizePosition_opacity.s.OPACITY.MAX}))};var loopPanelContent=__webpack_require__("./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js");const StyledLoopContent=(0,styled_components_browser_esm.Ay)(loopPanelContent.A).withConfig({displayName:"loop__StyledLoopContent",componentId:"sc-154lze5-0"})(["gap:8px;"]);const loop=function Loop(){const{loop}=shared_useProperties(["loop"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById})));return react.createElement(StyledLoopContent,{tabIndex:-1,loop,onChange:()=>{(0,tracking_src.sx)("floating_menu",{name:"set_loop"}),updateElementsById({elementIds:selectedElementIds,properties:({loop:oldLoop})=>({loop:!oldLoop})})}})};var highlights=__webpack_require__("./packages/story-editor/src/app/highlights/index.ts");const more=function More(){const setHighlights=(0,highlights.N)((({setHighlights})=>setHighlights)),selectedElementType=(0,app.P3)((({state})=>state.selectedElements[0].type));return react.createElement(shared_text,{text:(0,i18n._x)("More","Link to more options in design panel for selected element","web-stories"),onClick:()=>{setHighlights({highlight:highlights.xP.StylePane}),(0,tracking_src.sx)("floating_menu",{name:"click_more_button",element:selectedElementType})}})};var muted=__webpack_require__("./packages/design-system/src/icons/muted.svg"),useVideoElementTranscoding=__webpack_require__("./packages/story-editor/src/app/media/utils/useVideoElementTranscoding.js");const mute=function Mute(){const{id:elementId,resource}=shared_useProperties(["id","resource"]),{state:{canMute,isMuting,isDisabled},actions:{handleMute}}=(0,useVideoElementTranscoding.A)({elementId,resource});if(!canMute)return null;const title=isMuting?(0,i18n.__)("Removing audio","web-stories"):(0,i18n.__)("Remove audio","web-stories");return react.createElement(shared_icon,{Icon:muted.A,title,disabled:isDisabled||isMuting,onClick:e=>{(0,tracking_src.sx)("floating_menu",{name:"set_mute"}),handleMute(e)}})};const shapeColor=function ShapeColor(){const{backgroundColor,selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({backgroundColor:state.selectedElements[0].backgroundColor,selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),onChange=(0,src.hb)((value=>{(0,tracking_src.sx)("floating_menu",{name:"set_shape_color",element:"shape"}),updateElementsById({elementIds:selectedElementIds,properties:()=>({backgroundColor:value})})}),[selectedElementIds,updateElementsById]);return react.createElement(shared_color,{tabIndex:-1,label:(0,i18n.__)("Shape color","web-stories"),value:backgroundColor,allowsSavedColors:!0,onChange,hasInputs:!0,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0,opacityFocusTrap:!0,colorFocusTrap:!0})};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var item=__webpack_require__("./packages/design-system/src/components/contextMenu/components/item.tsx"),localStore=__webpack_require__("./packages/design-system/src/utils/localStore.ts"),checkmark_small=__webpack_require__("./packages/design-system/src/icons/checkmark_small.svg"),settings=__webpack_require__("./packages/design-system/src/icons/settings.svg");function settings_extends(){return settings_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},settings_extends.apply(this,arguments)}const MenuItem=(0,styled_components_browser_esm.Ay)(item.A).withConfig({displayName:"settings__MenuItem",componentId:"sc-aqi6f7-0"})(["span{font-size:14px;font-weight:400;}"]),StyledIconButton=(0,styled_components_browser_esm.Ay)(shared_icon).withConfig({displayName:"settings__StyledIconButton",componentId:"sc-aqi6f7-1"})(["svg{width:24px;height:24px;}"]),SubMenuContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"settings__SubMenuContainer",componentId:"sc-aqi6f7-2"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),LOCAL_STORAGE_KEY=localStore.$.ELEMENT_TOOLBAR_SETTINGS;const elements_settings=function Settings(){const[isMenuOpen,setIsMenuOpen]=(0,src.J0)(!1),{setFloatingMenuPosition,setDisplayFloatingMenu,floatingMenuPosition}=(0,app.yu)((({actions,state})=>({setFloatingMenuPosition:actions.setFloatingMenuPosition,setDisplayFloatingMenu:actions.setDisplayFloatingMenu,floatingMenuPosition:state.floatingMenuPosition}))),setHighlights=(0,highlights.N)((({setHighlights})=>setHighlights)),buttonRef=(0,src.li)(),subMenuRef=(0,src.li)(),[offsetLeft,setOffsetLeft]=(0,src.J0)(0);(0,src.vJ)((()=>setOffsetLeft(buttonRef.current.parentNode.offsetLeft+-8)),[]);const handleCloseMenu=()=>setIsMenuOpen(!1),local=(0,src.Kr)((()=>localStore.x.getItemByKey(LOCAL_STORAGE_KEY)||{}),[]),handleToolbarPosition=position=>{setFloatingMenuPosition(position),localStore.x.setItemByKey(LOCAL_STORAGE_KEY,{...local,position}),(0,tracking_src.sx)("floating_menu",{name:"reposition_menu",position})},hideFloatingMenu=(0,src.hb)((()=>{setDisplayFloatingMenu(!1),localStore.x.setItemByKey(LOCAL_STORAGE_KEY,{...local,isDisplayed:!1}),setHighlights({highlight:highlights.xP.ElementToolbarToggle}),(0,tracking_src.sx)("floating_menu",{name:"persistent_menu_hide"})}),[local,setDisplayFloatingMenu,setHighlights]),subMenuItems=[{key:constants.Vd.ELEMENT,label:react.createElement("span",null,(0,i18n.__)("Fix to element","web-stories")),onClick:()=>handleToolbarPosition(constants.Vd.ELEMENT),supportsIcon:!0,icon:floatingMenuPosition&&floatingMenuPosition!==constants.Vd.ELEMENT?null:react.createElement(checkmark_small.A,null)},{key:constants.Vd.TOP,label:react.createElement("span",null,(0,i18n.__)("Fix to top","web-stories")),onClick:()=>handleToolbarPosition(constants.Vd.TOP),supportsIcon:!0,icon:floatingMenuPosition===constants.Vd.TOP?react.createElement(checkmark_small.A,null):null},{key:"hide",label:react.createElement("span",null,(0,i18n.__)("Always hide","web-stories")),supportsIcon:!0,onClick:()=>hideFloatingMenu()}];return react.createElement(react.Fragment,null,react.createElement(StyledIconButton,{ref:buttonRef,Icon:settings.A,title:(0,i18n.__)("Menu settings","web-stories"),onClick:()=>setIsMenuOpen((value=>!value)),"aria-haspopup":"menu","aria-expanded":isMenuOpen,hasTooltip:!isMenuOpen}),react.createElement(SubMenuContainer,{ref:subMenuRef,style:{left:`${offsetLeft}px`}},react.createElement(contextMenu.A,{onDismiss:handleCloseMenu,isOpen:isMenuOpen,onCloseSubMenu:handleCloseMenu,"aria-label":(0,i18n.__)("Toolbar position options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:buttonRef},subMenuItems.map((({key,...menuItemProps})=>react.createElement(MenuItem,settings_extends({key},menuItemProps)))))))};__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js");var align_text_left=__webpack_require__("./packages/design-system/src/icons/align_text_left.svg"),align_text_center=__webpack_require__("./packages/design-system/src/icons/align_text_center.svg"),align_text_right=__webpack_require__("./packages/design-system/src/icons/align_text_right.svg"),align_text_justified=__webpack_require__("./packages/design-system/src/icons/align_text_justified.svg"),keyboard=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),disclosure=__webpack_require__("./packages/design-system/src/components/disclosure/disclosure.tsx");const textAlign_SubMenuContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"textAlign__SubMenuContainer",componentId:"sc-1i0z5qr-0"})(["position:absolute;top:calc(var(--height) + ","px);z-index:9999;"],3),StyledMenuButton=(0,styled_components_browser_esm.Ay)(components_button.A).withConfig({displayName:"textAlign__StyledMenuButton",componentId:"sc-1i0z5qr-1"})(["flex:0 0 60px;height:36px;border:1px solid ",";padding:2px 0;border-radius:4px;"],(({theme})=>theme.colors.border.defaultNormal)),StyledMenuIcon=(0,styled_components_browser_esm.Ay)(icon.A).withConfig({displayName:"textAlign__StyledMenuIcon",componentId:"sc-1i0z5qr-2"})(["width:auto;display:flex;overflow:hidden;svg{width:32px;}svg:last-child{margin-left:-8px;}"]),ALIGNMENTS=[{value:"left",icon:align_text_left.A,label:(0,i18n.__)("Align text left","web-stories")},{value:"center",icon:align_text_center.A,label:(0,i18n.__)("Align text center","web-stories")},{value:"right",icon:align_text_right.A,label:(0,i18n.__)("Align text right","web-stories")},{value:"justify",icon:align_text_justified.A,label:(0,i18n.__)("Align text justified","web-stories")}];const textAlign=function TextAlign(){const{textAlign="left"}=shared_useProperties(["textAlign"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),[isMenuOpen,setMenuOpen]=(0,src.J0)(!1),subMenuRef=(0,src.li)(),buttonRef=(0,src.li)(),[offsetLeft,setOffsetLeft]=(0,src.J0)(0);(0,src.vJ)((()=>setOffsetLeft(buttonRef.current.parentNode.offsetLeft+-8)),[]);const currentIconMounted=node=>{node&&setTimeout((()=>node.focus()))},{icon:CurrentIcon,label:currentLabel}=ALIGNMENTS.find((({value})=>value===textAlign))||ALIGNMENTS[0],handleTextAlign=value=>()=>{(0,tracking_src.sx)("floating_menu",{name:`set_text_alignment_${value}`,element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:{textAlign:value}})},handleCloseMenu=()=>{setMenuOpen(!1),buttonRef.current.focus()},buttonLabel=(0,i18n.__)("Change text alignment","web-stories"),tooltip=isMenuOpen?"":buttonLabel;return(0,keyboard._h)(buttonRef,"down",(()=>setMenuOpen(!0)),[]),react.createElement(react.Fragment,null,react.createElement(components_tooltip.A,{placement:popup_constants.W.Bottom,title:tooltip},react.createElement(StyledMenuButton,{tabIndex:-1,ref:buttonRef,onClick:()=>setMenuOpen((value=>!value)),"aria-haspopup":"menu","aria-expanded":isMenuOpen,"aria-label":buttonLabel},react.createElement(StyledMenuIcon,{title:tooltip},react.createElement(CurrentIcon,{role:"img","aria-label":currentLabel}),react.createElement(disclosure.A,{style:{marginLeft:-8,marginRight:0},$isOpen:isMenuOpen})))),react.createElement(textAlign_SubMenuContainer,{ref:subMenuRef,style:{left:`${offsetLeft}px`}},react.createElement(contextMenu.A,{onDismiss:handleCloseMenu,isOpen:isMenuOpen,onCloseSubMenu:handleCloseMenu,"aria-label":(0,i18n.__)("Text alignment options","web-stories"),isSubMenu:!0,isSecondary:!0,parentMenuRef:buttonRef,isHorizontal:!0},ALIGNMENTS.map((({value,icon,label})=>react.createElement(shared_icon,{isToggled:value===textAlign,ref:value===textAlign?currentIconMounted:null,key:value,Icon:icon,title:label,onClick:handleTextAlign(value)}))))))};var hasGradient=__webpack_require__("./packages/patterns/src/hasGradient.ts"),createSolid=__webpack_require__("./packages/patterns/src/createSolid.ts"),src_constants=__webpack_require__("./packages/patterns/src/constants.ts"),story_editor_src_constants=__webpack_require__("./packages/story-editor/src/constants/index.ts");const textColor=function TextColor(){const{content}=shared_useProperties(["content"]),{selectedElementIds,updateElementsById}=(0,app.P3)((({state,actions})=>({selectedElementIds:state.selectedElementIds,updateElementsById:actions.updateElementsById}))),pushUpdate=(0,src.hb)((update=>{(0,tracking_src.sx)("floating_menu",{name:"set_text_color",element:"text"}),updateElementsById({elementIds:selectedElementIds,properties:element=>(0,updateProperties.A)(element,update,!0)})}),[updateElementsById,selectedElementIds]),{textInfo:{color,gradientColor},handlers:{handleSetColor,handleSetGradientColor}}=(0,useRichTextFormatting.A)([{content,type:"text"}],pushUpdate),colorInputValue=gradientColor===story_editor_src_constants.jW?story_editor_src_constants.jW:(0,hasGradient.A)(gradientColor)?gradientColor:color;return react.createElement(shared_color,{tabIndex:-1,label:(0,i18n.__)("Text color","web-stories"),allowsSavedColors:!0,value:colorInputValue,onChange:color=>{(0,hasGradient.A)(color)?(handleSetColor((0,createSolid.A)(0,0,0)),handleSetGradientColor(color)):(handleSetGradientColor(src_constants.vK),handleSetColor(color))},hasInputs:!1,hasEyedropper:!0,allowsOpacity:!0,allowsGradient:!0})};var letter_b_bold=__webpack_require__("./packages/design-system/src/icons/letter_b_bold.svg");const toggleBold=function ToggleBold(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isBold",handler:"handleClickBold",eventName:"set_bold"});return react.createElement(shared_icon,{isToggled,Icon:letter_b_bold.A,title:(0,i18n.__)("Toggle bold","web-stories"),onClick:toggle,tabIndex:-1})};var letter_i_italic=__webpack_require__("./packages/design-system/src/icons/letter_i_italic.svg");const toggleItalics=function ToggleItalics(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isItalic",handler:"handleClickItalic",eventName:"set_italic"});return react.createElement(shared_icon,{isToggled,Icon:letter_i_italic.A,title:(0,i18n.__)("Toggle italic","web-stories"),onClick:toggle,tabIndex:-1})};var letter_u_underline=__webpack_require__("./packages/design-system/src/icons/letter_u_underline.svg");const toggleUnderline=function ToggleUnderline(){const{isToggled,toggle}=shared_useTextToggle({currentValue:"isUnderline",handler:"handleClickUnderline",eventName:"set_underline"});return react.createElement(shared_icon,{isToggled,Icon:letter_u_underline.A,title:(0,i18n.__)("Toggle underline","web-stories"),onClick:toggle,tabIndex:-1})};var scissors=__webpack_require__("./packages/design-system/src/icons/scissors.svg");const trim=function Trim(){const{id:elementId,resource}=shared_useProperties(["id","resource"]),{state:{canTrim,isTrimming,isDisabled},actions:{handleTrim}}=(0,useVideoElementTranscoding.A)({elementId,resource});if(!canTrim)return null;const title=isTrimming?(0,i18n.__)("Trimming video","web-stories"):(0,i18n.__)("Trim video","web-stories");return react.createElement(shared_icon,{Icon:scissors.A,title,disabled:isDisabled||isTrimming,onClick:e=>{(0,tracking_src.sx)("floating_menu",{name:"set_trim"}),handleTrim(e)}})};var trash=__webpack_require__("./packages/design-system/src/icons/trash.svg");const elements_trash=function Trash({title,handleRemove}){return react.createElement(shared_icon,{Icon:trash.A,title,onClick:handleRemove})},menus_image=(0,src.ph)((function FloatingImageMenu(){return react.createElement(react.Fragment,null,react.createElement(layerOpacity,null),react.createElement(shared_separator,null),react.createElement(flipHorizontal,null),react.createElement(flipVertical,null),react.createElement(shared_separator,null),react.createElement(borderWidthAndColor,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),multiple=(0,src.ph)((function FloatingMultipleMenu(){return react.createElement(react.Fragment,null,react.createElement(elementAlignment,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,{isMultiple:!0}))})),shape=(0,src.ph)((function FloatingShapeMenu(){return react.createElement(react.Fragment,null,react.createElement(shapeColor,null),react.createElement(shared_separator,null),react.createElement(borderRadius,null),react.createElement(flipHorizontal,null),react.createElement(flipVertical,null),react.createElement(shared_separator,null),react.createElement(borderWidthAndColor,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),sticker=(0,src.ph)((function FloatingStickerMenu(){return react.createElement(react.Fragment,null,react.createElement(layerOpacity,null),react.createElement(shared_separator,null),react.createElement(flipHorizontal,null),react.createElement(flipVertical,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),menus_text=(0,src.ph)((function FloatingTextMenu(){return react.createElement(react.Fragment,null,react.createElement(fontFamily,null),react.createElement(fontSize,null),react.createElement(textAlign,null),react.createElement(toggleBold,null),react.createElement(toggleItalics,null),react.createElement(toggleUnderline,null),react.createElement(shared_separator,null),react.createElement(textColor,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),video=(0,src.ph)((function FloatingVideoMenu(){return react.createElement(react.Fragment,null,react.createElement(layerOpacity,null),react.createElement(shared_separator,null),react.createElement(flipHorizontal,null),react.createElement(flipVertical,null),react.createElement(shared_separator,null),react.createElement(borderWidthAndColor,null),react.createElement(shared_separator,null),react.createElement(loop,null),react.createElement(trim,null),react.createElement(mute,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))}));var config=__webpack_require__("./packages/story-editor/src/app/config/index.ts"),productDropdown=__webpack_require__("./packages/story-editor/src/components/library/panes/shopping/productDropdown.js");const StyledDropDown=(0,styled_components_browser_esm.Ay)(productDropdown.A).withConfig({displayName:"product__StyledDropDown",componentId:"sc-6kpcrl-0"})(["width:240px;"]),FloatingProductMenu=(0,src.ph)((function FloatingProductMenu(){const{selectedElement,updateSelectedElements,deleteSelectedElements}=(0,story.P3)((({actions,state})=>({updateSelectedElements:actions.updateSelectedElements,selectedElement:state.selectedElements[0],deleteSelectedElements:actions.deleteSelectedElements}))),{shoppingProvider}=(0,config.UK)(),isShoppingEnabled="none"!==shoppingProvider,setProduct=(0,src.hb)((product=>updateSelectedElements({properties:{product}})),[updateSelectedElements]);return react.createElement(react.Fragment,null,isShoppingEnabled&&react.createElement(react.Fragment,null,react.createElement(StyledDropDown,{product:selectedElement?.product,setProduct}),react.createElement(shared_separator,null)),react.createElement(elements_trash,{title:(0,i18n.__)("Remove product","web-stories"),handleRemove:deleteSelectedElements}),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),product=FloatingProductMenu,audioSticker=(0,src.ph)((function FloatingAudioStickerMenu(){return react.createElement(react.Fragment,null,react.createElement(layerOpacity,null),react.createElement(shared_separator,null),react.createElement(flipHorizontal,null),react.createElement(flipVertical,null),react.createElement(shared_separator,null),react.createElement(more,null),react.createElement(shared_separator,null),react.createElement(elements_settings,null),react.createElement(dismiss,null))})),selector=(0,src.ph)((function FloatingMenuSelector({selectedElementType}){switch(selectedElementType){case constants.$7.MULTIPLE:return react.createElement(multiple,null);case constants.$7.GIF:case constants.$7.IMAGE:return react.createElement(menus_image,null);case constants.$7.SHAPE:return react.createElement(shape,null);case constants.$7.STICKER:return react.createElement(sticker,null);case constants.$7.TEXT:return react.createElement(menus_text,null);case constants.$7.VIDEO:return react.createElement(video,null);case constants.$7.PRODUCT:return react.createElement(product,null);case constants.$7.AUDIO_STICKER:return react.createElement(audioSticker,null);default:return null}})),FLOATING_MENU_MESSAGE=(0,i18n.__)("To exit the floating menu, press Escape.","web-stories"),MenuWrapper=styled_components_browser_esm.Ay.section.withConfig({displayName:"menu__MenuWrapper",componentId:"sc-pi2qzl-0"})(["display:flex;position:absolute;z-index:",";visibility:",";transition:140ms opacity;"],zIndex.Ry,(({visuallyHidden})=>visuallyHidden?"hidden":"visible")),FloatingMenu=(0,src.ph)((0,src.Rf)((function FloatingMenu({selectionIdentifier,selectedElementType,handleDismiss,visuallyHidden},ref){const focusGroupRef=(0,editLayerFocusManager.ec)(editLayerFocusManager.wn.EDIT_ELEMENT),speak=(0,useLiveRegion.A)(),announceKeyboardControls=(0,src.hb)((()=>{speak(FLOATING_MENU_MESSAGE)}),[speak]);return(0,src.Nf)((()=>{const node=ref.current,updateSize=()=>{node.style.width="";const bounds=node.getBoundingClientRect();node.style.setProperty("--width",`${bounds.width.toFixed(2)}px`),node.style.setProperty("--height",`${bounds.height.toFixed(2)}px`),node.style.width="var(--width)"};updateSize();const observer=new MutationObserver(updateSize),menu=node.querySelector("[role=menu]");return observer.observe(menu,{childList:!0}),()=>observer.disconnect()}),[ref,selectionIdentifier]),react.createElement(MenuWrapper,{ref,"aria-label":(0,i18n.__)("Design menu","web-stories"),visuallyHidden},react.createElement(provider,{handleDismiss},react.createElement(contextMenu.A,{isInline:!0,isHorizontal:!0,isSecondary:!0,isAlwaysVisible:!0,tabIndex:-1,ref:focusGroupRef,dismissOnEscape:!1,onFocus:announceKeyboardControls,"aria-label":(0,i18n.__)("Design options for selected element","web-stories"),onMouseDown:e=>{e.stopPropagation()},popoverZIndex:zIndex.Ry},react.createElement(selector,{selectedElementType}))))}))),menu=FloatingMenu},"./packages/story-editor/src/components/fontPicker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./packages/react/src/index.ts")),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/datalist/list/styled.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/datalist/datalist.tsx"),_app__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/app/index.js"),_constants__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/constants/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const __WEBPACK_DEFAULT_EXPORT__=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Rf)((function FontPicker({zIndex,onChange,currentValue,highlightStylesOverride,showDropdownLabel,listStyleOverrides,containerStyleOverrides,className,tabIndex},ref){const{fonts=[],recentFonts=[],curatedFonts=[],customFonts=[],ensureMenuFontsLoaded,ensureCustomFontsLoaded,getFontsBySearch,loadCustomFonts,loadCuratedFonts}=(0,_app__WEBPACK_IMPORTED_MODULE_5__.Ln)((({actions,state})=>({getFontsBySearch:actions.getFontsBySearch,ensureMenuFontsLoaded:actions.ensureMenuFontsLoaded,ensureCustomFontsLoaded:actions.ensureCustomFontsLoaded,loadCuratedFonts:actions.loadCuratedFonts,loadCustomFonts:actions.loadCustomFonts,recentFonts:state.recentFonts,curatedFonts:state.curatedFonts,fonts:state.fonts,customFonts:state.customFonts})));(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.vJ)((()=>{loadCustomFonts(),loadCuratedFonts()}),[loadCustomFonts,loadCuratedFonts]);const fontMap=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>{const map=new Map;return fonts.forEach((f=>{map.set(f.id,f)})),customFonts?.forEach((f=>{map.set(f.id,f)})),map}),[fonts,customFonts]),onObserve=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((observedFonts=>{observedFonts.length&&(ensureMenuFontsLoaded(observedFonts.filter((fontName=>"fonts.google.com"===fontMap.get(fontName)?.service))),ensureCustomFontsLoaded(observedFonts.filter((fontName=>"custom"===fontMap.get(fontName)?.service))))}),[fontMap,ensureCustomFontsLoaded,ensureMenuFontsLoaded]),renderer=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((({option,...rest},_ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.ph,_extends({ref:_ref},rest,{fontFamily:"fonts.google.com"===option.service?`'${option.name}::MENU'`:option.name}),currentValue===option.id&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.cp,{"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Selected","web-stories")}),option.name)),[currentValue]),priorityOptionGroups=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>[...customFonts?.length?[{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Your fonts","web-stories"),options:customFonts}]:[],...recentFonts?.length?[{label:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Recently used","web-stories"),options:recentFonts}]:[]]),[customFonts,recentFonts]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.A,{ref,zIndex,tabIndex,highlightStylesOverride,"data-testid":"font",title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Available font families","web-stories"),dropdownButtonLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Font family","web-stories"),options:fonts,primaryOptions:curatedFonts,primaryLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Recommended","web-stories"),priorityOptionGroups,searchResultsLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Search results","web-stories"),selectedId:_constants__WEBPACK_IMPORTED_MODULE_6__.jW===currentValue?"":currentValue,placeholder:_constants__WEBPACK_IMPORTED_MODULE_6__.jW===currentValue?_constants__WEBPACK_IMPORTED_MODULE_6__.Q6:currentValue,hasSearch:!0,getOptionsByQuery:getFontsBySearch,onChange,onObserve,renderer:(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Rf)(renderer),disabled:!fonts?.length,dropDownLabel:showDropdownLabel?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.__)("Font","web-stories"):null,listStyleOverrides,containerStyleOverrides,className})}))},"./packages/story-editor/src/components/form/stackable/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>stackableGroup,H:()=>stackableInput});var react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),outline=__webpack_require__("./packages/design-system/src/theme/helpers/outline.ts"),numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx");const inputContainerStyleOverride=(0,styled_components_browser_esm.AH)(["position:relative;:focus-within{z-index:1;",";}"],(({theme})=>outline.g(theme.colors.border.focus,theme.colors.bg.secondary))),iconCss=(0,styled_components_browser_esm.AH)(["width:29px;height:29px;"]),stackableInput=(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"stackableInput__StackableInput",componentId:"sc-bgp531-0"})(["svg{","}& > div{border-radius:0;margin-left:-1px;padding:2px 7px 2px 12px;",";}"],iconCss,inputContainerStyleOverride),StackableContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"stackableGroup__StackableContainer",componentId:"sc-ogfpu5-0"})(["display:flex;max-width:",";& > ","{border-radius:0;&:first-of-type > div{border-top-left-radius:4px;border-bottom-left-radius:4px;margin-left:0;}&:last-of-type > div{border-top-right-radius:4px;border-bottom-right-radius:4px;}}",""],(({locked})=>locked?"106px":"none"),stackableInput,(({$stackableGroupStyleOverride})=>$stackableGroupStyleOverride));const stackableGroup=function StackableGroup({children,locked,className,stackableGroupStyleOverride}){return react.createElement(StackableContainer,{$stackableGroupStyleOverride:stackableGroupStyleOverride,locked,className},children)}},"./packages/story-editor/src/components/library/panes/shopping/productDropdown.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/i18n/src/i18n.ts")),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/datalist/datalist.tsx"),_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/elements/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/app/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const __WEBPACK_DEFAULT_EXPORT__=function ProductDropdown({product,setProduct,...rest}){const initialProducts=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>[{id:product?.productId,name:product?.productTitle,product}]),[product]),[isLoading,setIsLoading]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.J0)(!1),[initialOptions,setInitialOptions]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.J0)(initialProducts),{actions:{getProducts}}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.M1)(),{isSaving,currentPageProductIds}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.P3)((({state:{meta:{isSaving},currentPage}})=>({isSaving,currentPageProductIds:currentPage?.elements?.filter((({type})=>type===_googleforcreators_elements__WEBPACK_IMPORTED_MODULE_5__.bV.PRODUCT)).filter((({product:p})=>p.productId!==product.productId)).map((({product:p})=>p?.productId))}))),getProductsByQuery=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)((async(value="")=>{const{products}=await getProducts(value);return products.filter((p=>p.productImages.length&&!currentPageProductIds.includes(p.productId))).map((p=>({name:p.productTitle,id:p.productId,product:p})))}),[currentPageProductIds,getProducts]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.vJ)((()=>{(async()=>{try{setIsLoading(!0);const products=await getProductsByQuery();setInitialOptions(products)}catch(err){setInitialOptions(initialProducts)}finally{setIsLoading(!1)}})()}),[initialProducts]);const dropDownParams={hasSearch:!0,lightMode:!0,onChange:({product:newProduct})=>setProduct(newProduct),getOptionsByQuery:getProductsByQuery,selectedId:product?.productId,dropDownLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Product","web-stories"),disabled:isSaving,primaryOptions:isLoading?initialProducts:initialOptions,zIndex:10};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.A,_extends({options:initialOptions,searchResultsLabel:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Search results","web-stories"),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Product","web-stories")},dropDownParams,rest))}},"./packages/story-editor/src/components/panels/design/alignment/useAlignment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/units/src/constants.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/units/src/calcRotatedObjectPositionAndSize.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/units/src/getBoundRect.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/units/src/dimensions.ts"),_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/tracking/src/index.ts");const PAGE_RECT={startX:0,startY:0,endX:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.bj,endY:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.WY,width:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.bj,height:_googleforcreators_units__WEBPACK_IMPORTED_MODULE_9__.WY},ALIGNMENT_LEFT="left",ALIGNMENT_RIGHT="right",ALIGNMENT_TOP="top",ALIGNMENT_BOTTOM="bottom";const __WEBPACK_DEFAULT_EXPORT__=function useAlignment({selectedElements,updateElements,isFloatingMenu}){const isDistributionEnabled=selectedElements.length>2,selectedElementsWithFrame=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_7__.Kr)((()=>selectedElements.map((item=>{const{id,groupId,x,y,width,height,rotationAngle}=item;let frameX=x,frameY=y,frameWidth=width,frameHeight=height;if(rotationAngle){const elementFrame=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_10__.A)(rotationAngle,x,y,width,height);frameX=elementFrame.x,frameY=elementFrame.y,frameWidth=elementFrame.width,frameHeight=elementFrame.height}return{id,groupId,x,y,width,height,frameX,frameY,frameWidth,frameHeight}}))),[selectedElements]),selectedGroupId=selectedElements[0].groupId,isOnlyGroupSelected=selectedGroupId&&selectedElements.every((el=>el.groupId&&el.groupId===selectedGroupId)),boundRect=1===selectedElements.length||isOnlyGroupSelected?PAGE_RECT:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.A)(selectedElements),handleTrackEvent=direction=>{(0,_googleforcreators_tracking__WEBPACK_IMPORTED_MODULE_8__.sx)(isFloatingMenu?"floating_menu":"design_panel",{name:`set_alignment_${direction}`,element:"multiple"})},handleAlign=direction=>{handleTrackEvent(direction),updateElements((properties=>{const{id,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.A)(selectedElements.filter((el=>el.groupId===groupId))):null,element=selectedElementsWithFrame.find((item=>item.id===id)),{width=0,height=0,frameWidth=0,frameHeight=0}=element||{},offset=direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?(frameWidth-width)/2:(frameHeight-height)/2,offsetInGroup=groupId?direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?element.frameX-groupRect.startX:element.frameY-groupRect.startY:0,calcWidth=groupId?groupRect.width:width,calcHeight=groupId?groupRect.height:height;return direction===ALIGNMENT_LEFT||direction===ALIGNMENT_RIGHT?{x:direction===ALIGNMENT_LEFT?boundRect.startX+offset+offsetInGroup:boundRect.endX-calcWidth-offset+offsetInGroup}:{y:direction===ALIGNMENT_TOP?boundRect.startY+offset+offsetInGroup:boundRect.endY-calcHeight-offset+offsetInGroup}}))};return{isDistributionEnabled,handleAlignLeft:()=>handleAlign(ALIGNMENT_LEFT),handleAlignCenter:()=>{handleTrackEvent("center");const centerX=(boundRect.endX+boundRect.startX)/2;updateElements((properties=>{const{id,width,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.A)(selectedElements.filter((el=>el.groupId===groupId))):null,calcWidth=groupId?groupRect.width:width,element=selectedElementsWithFrame.find((item=>item.id===id)),offsetInGroup=groupId?element.frameX-groupRect.startX:0;return{x:centerX-calcWidth/2+offsetInGroup}}))},handleAlignRight:()=>handleAlign(ALIGNMENT_RIGHT),handleAlignTop:()=>handleAlign(ALIGNMENT_TOP),handleAlignMiddle:()=>{handleTrackEvent("middle");const centerY=(boundRect.endY+boundRect.startY)/2;updateElements((properties=>{const{id,height,groupId}=properties,groupRect=groupId?(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_11__.A)(selectedElements.filter((el=>el.groupId===groupId))):null,calcHeight=groupId?groupRect.height:height,element=selectedElementsWithFrame.find((item=>item.id===id)),offsetInGroup=groupId?element.frameY-groupRect.startY:0;return{y:centerY-calcHeight/2+offsetInGroup}}))},handleAlignBottom:()=>handleAlign(ALIGNMENT_BOTTOM),handleHorizontalDistribution:()=>{handleTrackEvent("horizontal_distribution");const sortedElementsWithFrame=[...selectedElementsWithFrame];sortedElementsWithFrame.sort(((a,b)=>(a.frameX+a.frameWidth)/2-(b.frameX+b.frameWidth)/2));const elementWidthSum=sortedElementsWithFrame.reduce(((sum,element)=>sum+element.frameWidth),0),commonSpaceWidth=boundRect.width-elementWidthSum,commonSpaceWidthPerElement=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__.GU)(commonSpaceWidth/(sortedElementsWithFrame.length-1)),updatedX={};let offsetX=0;sortedElementsWithFrame.forEach(((element,index)=>{const{id,x,width,frameWidth}=element;0===index||index===sortedElementsWithFrame.length-1?(updatedX[id]={x},offsetX=x):updatedX[id]={x:offsetX+(frameWidth-width)/2},offsetX+=frameWidth+commonSpaceWidthPerElement})),updateElements((({id})=>updatedX[id]))},handleVerticalDistribution:()=>{handleTrackEvent("vertical_distribution");const sortedElementsWithFrame=[...selectedElementsWithFrame];sortedElementsWithFrame.sort(((a,b)=>(a.frameY+a.frameHeight)/2-(b.frameY+b.frameHeight)/2));const elementHeightSum=sortedElementsWithFrame.reduce(((sum,element)=>sum+element.frameHeight),0),commonSpaceHeight=boundRect.height-elementHeightSum,commonSpaceHeightPerElement=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_12__.GU)(commonSpaceHeight/(sortedElementsWithFrame.length-1)),updatedY={};let offsetY=0;sortedElementsWithFrame.forEach(((element,index)=>{const{id,y,height,frameHeight}=element;0===index||index===sortedElementsWithFrame.length-1?(updatedY[id]={y},offsetY=y):updatedY[id]={y:offsetY+(frameHeight-height)/2},offsetY+=frameHeight+commonSpaceHeightPerElement})),updateElements((({id})=>updatedY[id]))}}}},"./packages/story-editor/src/components/panels/design/border/shared.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>DEFAULT_BORDER});const DEFAULT_BORDER={left:0,right:0,top:0,bottom:0,lockedWidth:!0,color:(0,__webpack_require__("./packages/patterns/src/createSolid.ts").A)(0,0,0)}},"./packages/story-editor/src/components/panels/design/sizePosition/opacity.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,s:()=>MIN_MAX});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/icons/color_drop.svg"),_shared_getCommonValue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js"),_shared_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const MIN_MAX={OPACITY:{MIN:0,MAX:100}};function defaultOpacity({opacity}){return void 0!==opacity?opacity:MIN_MAX.OPACITY.MAX}const __WEBPACK_DEFAULT_EXPORT__=function OpacityControls({selectedElements,pushUpdate}){const opacity=(0,_shared_getCommonValue__WEBPACK_IMPORTED_MODULE_2__.A)(selectedElements,defaultOpacity),handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)(((evt,value)=>pushUpdate({opacity:value??100},!0)),[pushUpdate]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.A,{suffix:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.A,null),unit:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__._x)("%","Percentage","web-stories"),value:opacity,onChange:handleChange,min:MIN_MAX.OPACITY.MIN,max:MIN_MAX.OPACITY.MAX,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Opacity in percent","web-stories"),placeholder:opacity===_constants__WEBPACK_IMPORTED_MODULE_4__.jW?_constants__WEBPACK_IMPORTED_MODULE_4__.Q6:"",isIndeterminate:opacity===_constants__WEBPACK_IMPORTED_MODULE_4__.jW,containerStyleOverride:_shared_styles__WEBPACK_IMPORTED_MODULE_3__.t})}},"./packages/story-editor/src/components/panels/design/sizePosition/radius.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,w:()=>DEFAULT_BORDER_RADIUS});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/design-system/src/icons/corner.svg"),_googleforcreators_masks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/masks/src/index.ts"),_form_stackable__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/story-editor/src/components/form/stackable/index.js"),_shared_useCommonObjectValue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js"),_shared_styles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_constants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const DEFAULT_BORDER_RADIUS={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,locked:!0},FlexContainer=styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay.div.withConfig({displayName:"radius__FlexContainer",componentId:"sc-10ryvqs-0"})(["display:flex;"]),LockContainer=styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay.div.withConfig({displayName:"radius__LockContainer",componentId:"sc-10ryvqs-1"})(["position:relative;display:flex;align-items:center;width:32px;margin-left:8px;"]),StyledLockToggle=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_11__.m).withConfig({displayName:"radius__StyledLockToggle",componentId:"sc-10ryvqs-2"})(["",";"],_shared_styles__WEBPACK_IMPORTED_MODULE_7__.Y),TopLeft=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.A).withConfig({displayName:"radius__TopLeft",componentId:"sc-10ryvqs-3"})(["transform:rotate(90deg);"]),TopRight=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.A).withConfig({displayName:"radius__TopRight",componentId:"sc-10ryvqs-4"})(["transform:rotate(180deg);"]),BottomRight=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.A).withConfig({displayName:"radius__BottomRight",componentId:"sc-10ryvqs-5"})(["transform:rotate(270deg);"]);const __WEBPACK_DEFAULT_EXPORT__=function RadiusControls({selectedElements,pushUpdateForObject,stackableGroupStyleOverride}){const borderRadius=(0,_shared_useCommonObjectValue__WEBPACK_IMPORTED_MODULE_6__.A)(selectedElements,"borderRadius",DEFAULT_BORDER_RADIUS),allSupportBorder=selectedElements.every((el=>(0,_googleforcreators_masks__WEBPACK_IMPORTED_MODULE_4__.Fn)(el))),lockRadius=!0===borderRadius.locked,handleChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.hb)(((name,value)=>{pushUpdateForObject("borderRadius",lockRadius?{topLeft:value,topRight:value,bottomRight:value,bottomLeft:value}:{[name]:value},DEFAULT_BORDER_RADIUS,!0)}),[pushUpdateForObject,lockRadius]),handleLockChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.hb)((locked=>{const newRadius=locked?{locked,topLeft:borderRadius.topLeft,topRight:borderRadius.topLeft,bottomRight:borderRadius.topLeft,bottomLeft:borderRadius.topLeft}:{locked};pushUpdateForObject("borderRadius",newRadius,DEFAULT_BORDER_RADIUS,!0)}),[pushUpdateForObject,borderRadius]);if(!allSupportBorder)return null;const firstInputLabel=lockRadius?(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Corner Radius","web-stories"):(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Top left corner radius","web-stories");return react__WEBPACK_IMPORTED_MODULE_0__.createElement(FlexContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.U,{stackableGroupStyleOverride,locked:lockRadius},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{suffix:react__WEBPACK_IMPORTED_MODULE_0__.createElement(TopLeft,null),value:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?"":borderRadius.topLeft,"aria-label":firstInputLabel,onChange:(_,value)=>handleChange("topLeft",value),placeholder:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?_constants__WEBPACK_IMPORTED_MODULE_9__.Q6:"",isIndeterminate:borderRadius.topLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW}),!lockRadius&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{suffix:react__WEBPACK_IMPORTED_MODULE_0__.createElement(TopRight,null),value:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?"":borderRadius.topRight,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Top right corner radius","web-stories"),onChange:(_,value)=>handleChange("topRight",value),placeholder:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?_constants__WEBPACK_IMPORTED_MODULE_9__.Q6:"",isIndeterminate:borderRadius.topRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{value:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?"":borderRadius.bottomLeft,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Bottom left corner radius","web-stories"),onChange:(_,value)=>handleChange("bottomLeft",value),placeholder:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?_constants__WEBPACK_IMPORTED_MODULE_9__.Q6:"",suffix:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_12__.A,null),isIndeterminate:borderRadius.bottomLeft===_constants__WEBPACK_IMPORTED_MODULE_9__.jW}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_form_stackable__WEBPACK_IMPORTED_MODULE_5__.H,{value:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?"":borderRadius.bottomRight,"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Bottom right corner radius","web-stories"),onChange:(_,value)=>handleChange("bottomRight",value),placeholder:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW?_constants__WEBPACK_IMPORTED_MODULE_9__.Q6:"",suffix:react__WEBPACK_IMPORTED_MODULE_0__.createElement(BottomRight,null),isIndeterminate:borderRadius.bottomRight===_constants__WEBPACK_IMPORTED_MODULE_9__.jW}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(LockContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_8__.A,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Toggle consistent corner radius","web-stories"),key:borderRadius.locked.toString()},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledLockToggle,{isLocked:borderRadius.locked,onClick:()=>handleLockChange(!borderRadius.locked),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_13__.__)("Toggle consistent corner radius","web-stories")}))))}},"./packages/story-editor/src/components/panels/design/textStyle/font.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>MIN_MAX,A:()=>textStyle_font});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),numericInput=__webpack_require__("./packages/design-system/src/components/input/numericInput.tsx"),dropdown=__webpack_require__("./packages/design-system/src/components/dropDown/dropdown.tsx"),dom_src=__webpack_require__("./packages/dom/src/index.ts"),range=__webpack_require__("./packages/units/src/range.ts"),font=__webpack_require__("./packages/story-editor/src/app/font/index.ts"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js"),styles=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js"),shared=__webpack_require__("./packages/story-editor/src/components/panels/shared/index.js"),storyFontPicker=__webpack_require__("./packages/story-editor/src/components/storyFontPicker/index.js"),constants=__webpack_require__("./packages/story-editor/src/constants/index.ts"),useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js");const textStyle_getFontWeights=function getFontWeights(font){const defaultFontWeights=[{label:constants.UE[400],value:"400"}];return font?.weights?font.weights.map((weight=>({label:constants.UE[weight],value:weight.toString()}))):defaultFontWeights},MIN_MAX={FONT_SIZE:{MIN:8,MAX:800}},Space=styled_components_browser_esm.Ay.div.withConfig({displayName:"font__Space",componentId:"sc-1upk4a3-0"})(["flex:0 0 10px;"]),StyledNumericInput=(0,styled_components_browser_esm.Ay)(numericInput.A).withConfig({displayName:"font__StyledNumericInput",componentId:"sc-1upk4a3-1"})(["flex-basis:80px;text-align:center;"]),StyledDropDown=(0,styled_components_browser_esm.Ay)(dropdown.A).withConfig({displayName:"font__StyledDropDown",componentId:"sc-1upk4a3-2"})(["background-color:transparent;"]);const textStyle_font=function FontControls({selectedElements,pushUpdate,highlightStylesOverride,fontDropdownRef}){const fontFamily=(0,shared.Bl)(selectedElements,(({font})=>font?.family)),fontSize=(0,shared.Bl)(selectedElements,"fontSize"),{textInfo:{fontWeight,isItalic},handlers:{handleSelectFontWeight}}=(0,useRichTextFormatting.A)(selectedElements,pushUpdate),{fonts=[],maybeEnqueueFontStyle,getFontByName}=(0,font.Ln)((({actions:{maybeEnqueueFontStyle,getFontByName},state:{fonts}})=>({maybeEnqueueFontStyle,getFontByName,fonts}))),fontWeights=(0,src.Kr)((()=>textStyle_getFontWeights(getFontByName(fontFamily))),[getFontByName,fontFamily]),fontStyle=isItalic?"italic":"normal",handleFontWeightPickerChange=(0,src.hb)((async(evt,value)=>{await maybeEnqueueFontStyle(selectedElements.map((({font,content})=>({font,fontStyle,fontWeight:Number.parseInt(value),content:(0,dom_src._e)(content)})))),handleSelectFontWeight(value)}),[fontStyle,handleSelectFontWeight,maybeEnqueueFontStyle,selectedElements]);return(0,components_form.jm)((({fontSize:newFontSize})=>({fontSize:(0,range.qE)(newFontSize,MIN_MAX.FONT_SIZE)})),[]),react.createElement(react.Fragment,null,fonts&&react.createElement(components_form.fI,null,react.createElement(storyFontPicker.A,{ref:fontDropdownRef,highlightStylesOverride,showDropdownLabel:!0,selectedElements})),react.createElement(components_form.fI,null,fontWeights&&react.createElement(react.Fragment,null,react.createElement(StyledDropDown,{ariaLabel:(0,i18n.__)("Font weight","web-stories"),placeholder:constants.Q6,options:fontWeights,selectedValue:constants.jW===fontWeight?"":fontWeight,onMenuItemClick:handleFontWeightPickerChange,selectButtonStylesOverride:styles.Y}),react.createElement(Space,null)),react.createElement(StyledNumericInput,{"aria-label":(0,i18n.__)("Font size","web-stories"),isFloat:!0,value:fontSize,onChange:(evt,value)=>pushUpdate({fontSize:value},!0),min:MIN_MAX.FONT_SIZE.MIN,max:MIN_MAX.FONT_SIZE.MAX,isIndeterminate:constants.jW===fontSize,placeholder:constants.jW===fontSize?constants.Q6:null,containerStyleOverride:styles.t})))}},"./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.find.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/patterns/src/isPatternEqual.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/components/keyboard/keyboard.tsx"),_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/rich-text/src/index.ts"),_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/story-editor/src/app/index.js"),_constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/story-editor/src/constants/index.ts");function reduceWithMultiple(reduced,info){return Object.fromEntries(Object.keys(info).map((key=>{const wasMultiple=reduced[key]===_constants__WEBPACK_IMPORTED_MODULE_7__.jW,areDifferent=void 0!==reduced[key]&&!function isEqual(a,b){const isAPattern=a&&"object"==typeof a&&(a.type||a.color),isBPattern=b&&"object"==typeof b&&(b.type||b.color);return isAPattern&&isBPattern?(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_8__.A)(a,b):a===b}(reduced[key],info[key]);return wasMultiple||areDifferent?[key,_constants__WEBPACK_IMPORTED_MODULE_7__.jW]:[key,info[key]]})))}const __WEBPACK_DEFAULT_EXPORT__=function useRichTextFormatting(selectedElements,pushUpdate){const{hasCurrentEditor,selectionInfo,selectionActions}=(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.z$)((({state,actions})=>({hasCurrentEditor:state.hasCurrentEditor,selectionInfo:state.selectionInfo,selectionActions:actions.selectionActions}))),{clearEditing}=(0,_app__WEBPACK_IMPORTED_MODULE_6__.yu)((({actions:{clearEditing}})=>({clearEditing}))),textInfo=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>hasCurrentEditor?selectionInfo:selectedElements.map((({content})=>content)).map(_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.cM).reduce(reduceWithMultiple,{})),[hasCurrentEditor,selectionInfo,selectedElements]),push=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)(((updater,...args)=>pushUpdate((({content})=>({content:updater(content,...args)})),!0)),[pushUpdate]),queuedPushRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.li)(null),queuePush=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.hb)(((...args)=>{queuedPushRef.current=args}),[queuedPushRef]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.vJ)((()=>{const pushArgs=queuedPushRef.current;pushArgs&&(push(...pushArgs),queuedPushRef.current=null)}),[selectedElements,queuedPushRef,push]);const handlers=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_4__.Kr)((()=>{const htmlFormatters=(0,_googleforcreators_rich_text__WEBPACK_IMPORTED_MODULE_5__.$d)();return hasCurrentEditor?{handleClickBold:()=>selectionActions.toggleBoldInSelection(),handleSelectFontWeight:selectionActions.setFontWeightInSelection,handleClickItalic:selectionActions.toggleItalicInSelection,handleClickUnderline:selectionActions.toggleUnderlineInSelection,handleClickUppercase:selectionActions.toggleUppercaseInSelection,handleSetLetterSpacing:selectionActions.setLetterSpacingInSelection,handleSetColor:selectionActions.setColorInSelection,handleSetGradientColor:selectionActions.setGradientColorInSelection,handleResetFontWeight:async weight=>{await clearEditing(),queuePush(htmlFormatters.setFontWeight,weight)}}:{handleClickBold:flag=>push(htmlFormatters.toggleBold,flag),handleSelectFontWeight:weight=>push(htmlFormatters.setFontWeight,weight),handleClickItalic:flag=>push(htmlFormatters.toggleItalic,flag),handleClickUnderline:flag=>push(htmlFormatters.toggleUnderline,flag),handleClickUppercase:flag=>push(htmlFormatters.toggleUppercase,flag),handleSetLetterSpacing:letterSpacing=>push(htmlFormatters.setLetterSpacing,letterSpacing),handleSetColor:color=>push(htmlFormatters.setColor,color),handleSetGradientColor:color=>push(htmlFormatters.setGradientColor,color),handleResetFontWeight:weight=>push(htmlFormatters.setFontWeight,weight)}}),[hasCurrentEditor,selectionActions,push,clearEditing,queuePush]),hasText=selectedElements.find((({type})=>"text"===type));return(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.pP)({key:["mod+b","mod+u","mod+i"]},(({key})=>{if(hasText)switch(key){case"b":handlers.handleClickBold();break;case"i":handlers.handleClickItalic();break;case"u":handlers.handleClickUnderline()}}),[handlers,hasText]),{textInfo,handlers}}},"./packages/story-editor/src/components/panels/shared/flipControls.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/toggleButton.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/icons/mirror_leftright.svg"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/design-system/src/icons/mirror_updown.svg"),_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/tooltip/index.js"),_styles__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/styles.js");const ControlsContainer=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"flipControls__ControlsContainer",componentId:"sc-1gcq876-0"})(["display:flex;justify-content:left;align-items:flex-start;"]),Space=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"flipControls__Space",componentId:"sc-1gcq876-1"})(["width:8px;"]),StyledToggleButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.f).withConfig({displayName:"flipControls__StyledToggleButton",componentId:"sc-1gcq876-2"})(["",";"],_styles__WEBPACK_IMPORTED_MODULE_3__.Y);const __WEBPACK_DEFAULT_EXPORT__=function FlipControls({value,onChange}){const getCurrentFlipValue=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.hb)((prop=>!0===value[prop]),[value]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ControlsContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_2__.A,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Flip horizontally","web-stories")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledToggleButton,{variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Ak.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Mp.Small,isToggled:!0===value.horizontal,onClick:()=>onChange({...value,horizontal:!getCurrentFlipValue("horizontal")}),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Flip horizontally","web-stories")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_8__.A,null))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Space,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_tooltip__WEBPACK_IMPORTED_MODULE_2__.A,{title:(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Flip vertically","web-stories")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledToggleButton,{variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Ak.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.Mp.Small,isToggled:!0===value.vertical,onClick:()=>onChange({...value,vertical:!getCurrentFlipValue("vertical")}),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Flip vertically","web-stories")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_9__.A,null))))}},"./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _getCommonValue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js");const __WEBPACK_DEFAULT_EXPORT__=function getCommonObjectValue(list,property,defaultValue){const commonValue={},propertyObjects=list.map((element=>element[property]||defaultValue));return Object.keys(defaultValue).forEach((prop=>{commonValue[prop]=(0,_getCommonValue__WEBPACK_IMPORTED_MODULE_3__.A)(propertyObjects,prop)})),commonValue}},"./packages/story-editor/src/components/panels/shared/getCommonValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.every.js");var _constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/constants/index.ts");function ifDef(value,def){return void 0===value?def:value}const __WEBPACK_DEFAULT_EXPORT__=function getCommonValue(list,propertyOrFunc,def=void 0){const func="function"==typeof propertyOrFunc?propertyOrFunc:item=>item[propertyOrFunc],first=ifDef(func(list[0]),def);return list.every((el=>ifDef(func(el),def)===first))?first:_constants__WEBPACK_IMPORTED_MODULE_2__.jW}},"./packages/story-editor/src/components/panels/shared/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yb:()=>flipControls.A,uF:()=>linkRelations,Bl:()=>getCommonValue.A,VY:()=>useCommonColorValue.A,dP:()=>useCommonObjectValue.A});var flipControls=__webpack_require__("./packages/story-editor/src/components/panels/shared/flipControls.js"),react=__webpack_require__("./node_modules/react/index.js"),typography_text=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/typography/text/index.ts")),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),checkbox_checkbox=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),typography_link=__webpack_require__("./packages/design-system/src/components/typography/link/index.tsx"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),src=__webpack_require__("./packages/react/src/index.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),components_form=__webpack_require__("./packages/story-editor/src/components/form/index.js");const LinkTypes=[{key:"sponsored",title:(0,i18n.__)("Sponsored","web-stories")},{key:"nofollow",title:(0,i18n.__)("Nofollow","web-stories")}],CheckboxWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"linkRelations__CheckboxWrapper",componentId:"sc-123e3hl-0"})(["display:flex;padding:9px 0;"]),Label=styled_components_browser_esm.Ay.label.withConfig({displayName:"linkRelations__Label",componentId:"sc-123e3hl-1"})(["margin-left:12px;"]),StyledText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"linkRelations__StyledText",componentId:"sc-123e3hl-2"})(["color:",";padding:8px 0;"],(({theme})=>theme.colors.fg.secondary));const linkRelations=function LinkRelations({rel,onChangeRel}){const relHelpLink=(0,i18n.__)("https://developers.google.com/search/docs/advanced/guidelines/qualify-outbound-links?hl=en","web-stories"),onChange=(0,src.hb)((value=>{const newRel=rel.includes(value)?rel.filter((el=>el!==value)):[...rel,value];onChangeRel(newRel)}),[onChangeRel,rel]);return react.createElement(components_form.fI,null,react.createElement("div",null,react.createElement(StyledText,{size:types.$.Small},(0,i18n.__)("Qualify outbound links","web-stories")),LinkTypes.map((({key,title})=>react.createElement(CheckboxWrapper,{key},react.createElement(checkbox_checkbox.A,{id:key,name:key,checked:rel?.includes(key),onChange:()=>onChange(key)}),react.createElement(Label,{htmlFor:key},react.createElement(typography_text.E.Span,{size:types.$.Small},title))))),react.createElement(typography_link.N,{rel:"noreferrer",target:"_blank",href:relHelpLink,size:types.$.XSmall},(0,i18n.__)("Learn more","web-stories"))))};var getCommonValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonValue.js"),useCommonColorValue=(__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js"),__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonColorValue.js")),useCommonObjectValue=__webpack_require__("./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js")},"./packages/story-editor/src/components/panels/shared/media/loopPanelContent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),uuid__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/components/checkbox/checkbox.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/theme/types.ts"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const StyledCheckbox=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.A).withConfig({displayName:"loopPanelContent__StyledCheckbox",componentId:"sc-4opv01-0"})(["",""],(({theme})=>`\n    input[type='checkbox']:focus-visible ~ div, input[type='checkbox']:focus ~ div {\n      box-shadow: 0px 0px 0 2px ${theme.colors.bg.secondary}, 0px 0px 0 4px ${theme.colors.border.focus} !important;\n    }\n  `)),Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_2__.Ay.div.withConfig({displayName:"loopPanelContent__Wrapper",componentId:"sc-4opv01-1"})(["display:flex;gap:12px;align-items:center;"]);const __WEBPACK_DEFAULT_EXPORT__=function LoopPanelContent({loop,className="",onChange,...props}){const checkboxId=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.FF)((()=>`cb-${(0,uuid__WEBPACK_IMPORTED_MODULE_4__.A)()}`));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Wrapper,{className},react__WEBPACK_IMPORTED_MODULE_0__.createElement(StyledCheckbox,_extends({id:checkboxId,checked:loop,onChange},props)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.E.Label,{size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_6__.$.Small,htmlFor:checkboxId},(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_7__.__)("Loop","web-stories")))}},"./packages/story-editor/src/components/panels/shared/useCommonColorValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/patterns/src/convertToCSS.ts"),_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/patterns/src/generatePatternStyles.ts"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function useCommonColorValue(list,property){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>{const allValues=list.map((element=>element[property]));if(0===allValues.length)return null;if(1===allValues.length)return allValues[0];const uniqueValues={};return allValues.forEach((value=>{const serialized=(0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_5__.A)((0,_googleforcreators_patterns__WEBPACK_IMPORTED_MODULE_6__.A)(value));serialized in uniqueValues||(uniqueValues[serialized]=value)})),1===Object.keys(uniqueValues).length?Object.values(uniqueValues)[0]:_constants__WEBPACK_IMPORTED_MODULE_4__.jW}),[list,property])}},"./packages/story-editor/src/components/panels/shared/useCommonObjectValue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_getCommonObjectValue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/story-editor/src/components/panels/shared/getCommonObjectValue.js");const __WEBPACK_DEFAULT_EXPORT__=function useCommonObjectValue(list,property,defaultValue){const commonValue=(0,_getCommonObjectValue__WEBPACK_IMPORTED_MODULE_2__.A)(list,property,defaultValue),parts=Object.keys(defaultValue).map((prop=>commonValue[prop]));return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.Kr)((()=>commonValue),parts)}},"./packages/story-editor/src/components/storyFontPicker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>storyFontPicker});var react=__webpack_require__("./node_modules/react/index.js"),src=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),dom_src=__webpack_require__("./packages/dom/src/index.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),app=__webpack_require__("./packages/story-editor/src/app/index.js"),getUpdatedSizeAndPosition=__webpack_require__("./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js"),useRichTextFormatting=__webpack_require__("./packages/story-editor/src/components/panels/design/textStyle/useRichTextFormatting.js");__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.reduce.js");const textStyle_getClosestFontWeight=function getClosestFontWeight(existingWeight=400,availableWeights){return existingWeight=Number.parseInt(existingWeight),isNaN(Number.parseInt(existingWeight))?400:availableWeights&&0!==availableWeights.length?availableWeights.reduce(((a,b)=>{a=Number.parseInt(a),b=Number.parseInt(b);const aDiff=Math.abs(a-existingWeight),bDiff=Math.abs(b-existingWeight);return aDiff===bDiff?a<b?a:b:bDiff<aDiff?b:a})):existingWeight};var shared=__webpack_require__("./packages/story-editor/src/components/panels/shared/index.js"),fontPicker=__webpack_require__("./packages/story-editor/src/components/fontPicker/index.js"),updateProperties=__webpack_require__("./packages/story-editor/src/components/style/updateProperties.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const storyFontPicker=(0,src.Rf)((function StoryFontPicker({selectedElements,...rest},ref){const{updateElementsById}=(0,app.P3)((({actions})=>({updateElementsById:actions.updateElementsById}))),selectedElementIds=selectedElements.map((({id})=>id)),pushUpdate=(0,src.hb)(((update,commitValues)=>{updateElementsById({elementIds:selectedElementIds,properties:element=>{const updates=(0,updateProperties.A)(element,update,commitValues),sizeUpdates=(0,getUpdatedSizeAndPosition.A)({...element,...updates});return{...updates,...sizeUpdates}}})}),[updateElementsById,selectedElementIds]),{textInfo:{fontWeight,isItalic},handlers:{handleResetFontWeight}}=(0,useRichTextFormatting.A)(selectedElements,pushUpdate),{addRecentFont,maybeEnqueueFontStyle}=(0,app.Ln)((({actions})=>({addRecentFont:actions.addRecentFont,maybeEnqueueFontStyle:actions.maybeEnqueueFontStyle}))),fontFamily=(0,shared.Bl)(selectedElements,(({font})=>font?.family)),fontStyle=isItalic?"italic":"normal",onChange=(0,src.hb)((async newFont=>{const{id,name,value,...newFontFormatted}=newFont;(0,tracking_src.sx)("font_family_changed",{name}),await maybeEnqueueFontStyle(selectedElements.map((({content})=>({font:newFontFormatted,fontStyle,fontWeight,content:(0,dom_src._e)(content)})))),addRecentFont(newFont),pushUpdate({font:newFontFormatted},!0);const newFontWeight=textStyle_getClosestFontWeight(400,newFontFormatted.weights);await handleResetFontWeight(newFontWeight)}),[addRecentFont,fontStyle,fontWeight,maybeEnqueueFontStyle,pushUpdate,selectedElements,handleResetFontWeight]);return react.createElement(fontPicker.A,_extends({onChange,currentValue:fontFamily},rest,{ref}))}))},"./packages/story-editor/src/components/style/updateProperties.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.filter.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js");var _constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/story-editor/src/constants/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function updateProperties(currentProperties,newPropertiesOrUpdater,commitValues){const newProperties="function"==typeof newPropertiesOrUpdater?newPropertiesOrUpdater(currentProperties):newPropertiesOrUpdater;if(!newProperties)return{};let updatedKeys=Object.keys(newProperties);return updatedKeys=updatedKeys.filter((key=>newProperties[key]!==_constants__WEBPACK_IMPORTED_MODULE_3__.jW)),commitValues&&(updatedKeys=updatedKeys.filter((key=>""!==newProperties[key]))),0===updatedKeys.length?{}:Object.fromEntries(updatedKeys.map((key=>[key,newProperties[key]])))}},"./packages/story-editor/src/components/videoTrim/useVideoTrim.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_videoTrimContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/story-editor/src/components/videoTrim/videoTrimContext.js");const __WEBPACK_DEFAULT_EXPORT__=function useVideoTrim(selector){return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.i7)(_videoTrimContext__WEBPACK_IMPORTED_MODULE_1__.A,selector??_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.D_)}},"./packages/story-editor/src/components/videoTrim/videoTrimContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/react/src/index.ts").q6)({state:{},actions:{}})},"./packages/story-editor/src/utils/getUpdatedSizeAndPosition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/units/src/dimensions.ts"),_googleforcreators_units__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/units/src/calcRotatedResizeOffset.ts"),_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/element-library/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__=function getUpdatedSizeAndPosition(properties){const{width,height:oldHeight,rotationAngle,x,y}=properties,newHeight=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.GU)((0,_googleforcreators_element_library__WEBPACK_IMPORTED_MODULE_0__.ru)(properties,width)),[dx,dy]=(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_2__.A)(rotationAngle,0,0,0,newHeight-oldHeight);return{height:newHeight,x:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.GU)(x+dx),y:(0,_googleforcreators_units__WEBPACK_IMPORTED_MODULE_1__.GU)(y+dy)}}}}]);