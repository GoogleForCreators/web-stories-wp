"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[436],{"./packages/dashboard/src/app/views/exploreTemplates/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),useGridViewKeys=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts")),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),grid_components=__webpack_require__("./packages/dashboard/src/app/views/shared/grid/components.js");const CardWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],grid_components.Hf,grid_components.pk,grid_components.Hf,grid_components.pk,(({$isSelected})=>$isSelected?1:0)),TemplateDisplayContent=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),PicturePoster=(0,styled_components_browser_esm.Ay)(grid_components.O6).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme})=>theme.borders.radius.medium)),SeeDetailsButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme})=>theme.colors.standard.white)),TemplateGridItem=(0,src.Rf)((({onCreateStory,onFocus,height,id,isActive,posterSrc,slug,title,status,onSeeDetailsClick=noop.l},ref)=>{const tabIndex=isActive?0:-1,posterAltText=(0,sprintf.A)((0,i18n.__)("First page of %s template","web-stories"),title);return react.createElement(components.SG,{ref,id:`template-grid-item-${id}`,className:"templateGridItem","data-testid":`template-grid-item-${id}`,$posterHeight:height,onFocus},react.createElement(grid_components.mc,null,react.createElement(CardWrapper,{$isSelected:isActive},react.createElement(PicturePoster,null,react.createElement("source",{srcSet:posterSrc?.webp,type:"image/webp"}),react.createElement("source",{srcSet:posterSrc?.png,type:"image/png"}),react.createElement("img",{src:posterSrc?.png,alt:posterAltText,decoding:"async",width:src_constants.qs,height:src_constants.PO})),react.createElement(grid_components.Hf,null),react.createElement(grid_components.pk,{"data-testid":"card-action-container","data-template-slug":slug},react.createElement(TemplateDisplayContent,null,react.createElement(SeeDetailsButton,{ariaLabel:(0,sprintf.A)((0,i18n.__)("Go to detail view of %s","web-stories"),title),onClick:()=>onSeeDetailsClick(id,title),className:"focus_template",tabIndex},src_constants.ai[status]),onCreateStory&&react.createElement(button_button.$,{size:constants.Mp.Small,type:constants.VQ.Primary,onClick:onCreateStory,tabIndex,ariaLabel:(0,sprintf.A)((0,i18n.__)("Create new story from %s","web-stories"),title)},(0,i18n.__)("Use template","web-stories")))))))}));TemplateGridItem.displayName="TemplateGridItem";const templateGridItem=TemplateGridItem;const templateGridView=function TemplateGridView({pageSize,templates:filteredTemplates,templateActions}){const{isRTL,apiCallbacks}=(0,config.U)(),containerRef=(0,src.li)(),gridRef=(0,src.li)(),itemRefs=(0,src.li)({}),[activeGridItemId,setActiveGridItemId]=(0,src.J0)(null),{handleDetailsToggle,createStoryFromTemplate}=templateActions||{},canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);(0,useGridViewKeys.A)({containerRef,gridRef,itemRefs,isRTL,currentItemId:activeGridItemId,items:filteredTemplates}),(0,src.vJ)((()=>{activeGridItemId&&itemRefs.current?.[activeGridItemId]?.querySelector(".focus_template")?.focus()}),[activeGridItemId]),(0,src.g$)(containerRef,(()=>setActiveGridItemId(null)),[]);const memoizedTemplateItems=(0,src.Kr)((()=>filteredTemplates.map((({id,slug,status,title,postersByPage})=>{const isActive=activeGridItemId===id,posterSrc=postersByPage?.[0];return react.createElement(templateGridItem,{onCreateStory:canCreateStory?()=>createStoryFromTemplate(id):utils.lQ,onFocus:()=>{setActiveGridItemId(id)},onSeeDetailsClick:handleDetailsToggle,height:pageSize.height,id,isActive,key:slug,posterSrc,ref:el=>{itemRefs.current[id]=el},slug,status,title})}))),[filteredTemplates,activeGridItemId,canCreateStory,handleDetailsToggle,pageSize.height,createStoryFromTemplate]);return react.createElement("div",{ref:containerRef},react.createElement(components.pV,{pageSize,role:"list",ref:gridRef,ariaLabel:(0,i18n.__)("Viewing available templates","web-stories")},memoizedTemplateItems))};const content=function Content({allPagesFetched,isLoading,page,templates,view,totalTemplates,search,templateActions}){const{newStoryURL}=(0,config.U)(),pageContent=(0,src.Kr)((()=>isLoading?react.createElement(components.YM,null,react.createElement(loadingSpinner.A,null)):totalTemplates>0?react.createElement(react.Fragment,null,react.createElement(templateGridView,{templates,pageSize:view.pageSize,templateActions}),react.createElement(infiniteScroller.A,{canLoadMore:!allPagesFetched,isLoading,allDataLoadedMessage:(0,i18n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more templates","web-stories"),onLoadMore:page.requestNextPage})):react.createElement(shared.Gh,null,react.createElement(headline.$,{size:types.$.Small,as:"h3"},search?(0,sprintf.A)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):(0,i18n.__)("No templates currently available.","web-stories")),!search&&react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Medium,href:newStoryURL},(0,i18n.__)("Create New Story","web-stories")))),[allPagesFetched,isLoading,newStoryURL,page.requestNextPage,templateActions,search,templates,totalTemplates,view.pageSize]);return react.createElement(components.PE.Scrollable,null,react.createElement(components.Zo,null,pageContent))}},"./packages/dashboard/src/app/views/exploreTemplates/content/stories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NoSearchResults:()=>NoSearchResults,_default:()=>_default,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/dashboard/src/components/index.js"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dashboard/src/constants/index.ts"),_storybookUtils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dashboard/src/storybookUtils/index.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/src/utils/index.js"),___WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/content/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const StorybookLayoutContainer=styled_components__WEBPACK_IMPORTED_MODULE_6__.Ay.div.withConfig({displayName:"stories__StorybookLayoutContainer",componentId:"sc-pk1miz-0"})(["margin-top:40px;height:100vh;"]),__WEBPACK_DEFAULT_EXPORT__={title:"Dashboard/Views/ExploreTemplates/Content",component:___WEBPACK_IMPORTED_MODULE_5__.A,args:{allPagesFetched:!1,isLoading:!1,pageValue:1,searchKeyword:"",templates:_storybookUtils__WEBPACK_IMPORTED_MODULE_3__.th,viewStyle:_constants__WEBPACK_IMPORTED_MODULE_2__._D.GRID,totalTemplates:3},argTypes:{handleDetailsToggle:{action:"modal was toggled"},switchToTemplateByOffset:{action:"switched to prev/next template"},set:{action:"set page number"},requestNextPage:{action:"request next page clicked"},setKeyword:{action:"set search"},viewStyle:{options:_constants__WEBPACK_IMPORTED_MODULE_2__._D,control:"radio"}},parameters:{controls:{exclude:["pageValue","templates","page","search","view","templateActions"]}}},_default={render:function Render(args){const{pageSize}=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.yO)({isGrid:!0}),defaultNestedProps={templateActions:{handleDetailsToggle:args.handleDetailsToggle,switchToTemplateByOffset:args.switchToTemplateByOffset},page:{set:args.set,requestNextPage:args.requestNextPage,value:args.pageValue},search:{setKeyword:args.setKeyword,keyword:args.searchKeyword},view:{pageSize,style:args.viewStyle}};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components__WEBPACK_IMPORTED_MODULE_1__.PE.Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(StorybookLayoutContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_5__.A,_extends({},args,defaultNestedProps))))}},NoSearchResults={render:_default,args:{allPagesFetched:!0,totalTemplates:0,searchKeyword:"polar bears"}}},"./packages/dashboard/src/app/views/shared/grid/components.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Hf:()=>Gradient,O6:()=>Poster,mc:()=>Container,pk:()=>Scrim});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const Gradient=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.gradient.posterOverlay)),Scrim=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.opacity.black3)),Container=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),Poster=styled_components__WEBPACK_IMPORTED_MODULE_0__.Ay.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(({theme})=>theme.borders.radius.medium),(({theme})=>theme.colors.gradient.placeholder))},"./packages/dashboard/src/dataUtils/formattedStoriesArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/date/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__=[{id:167,status:"publish",title:"ORANGE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:51.000Z"),modifiedGmt:"2020-05-21T23:25:51.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:51.000Z"),createdGmt:"2020-05-21T23:25:51.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[],author:{name:"Jango Fett",id:1},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=167",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=167",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=167"},{locked:!0,lockUser:{name:"batgirl",id:888877665,avatar:"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y&s=96"},id:168,status:"publish",title:"PURPLE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:35.000Z"),modifiedGmt:"2020-05-21T23:25:35.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:35.000Z"),createdGmt:"2020-05-21T23:25:35.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[{name:"Dagobah",id:1}],author:{name:"Jango Fett",id:1},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=168",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=168",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=168"},{id:165,status:"draft",title:"GREEN SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:22.000Z"),modifiedGmt:"2020-05-21T23:25:22.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:25:22.000Z"),createdGmt:"2020-05-21T23:25:22.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-2.png",tags:[],categories:[],author:{name:"Chewbacca",id:2},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=165",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=165",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=165"},{id:163,status:"draft",title:"RED SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:24:47.000Z"),modifiedGmt:"2020-05-21T23:24:47.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:24:47.000Z"),createdGmt:"2020-05-21T23:24:47.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-3.png",tags:[],categories:[],author:{name:"Luke Skywalker",id:3},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=163",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=163",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=163"},{id:161,status:"private",title:"BLUE SHAPES",modified:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:24:06.000Z"),modifiedGmt:"2020-05-21T23:24:06.000Z",created:(0,_googleforcreators_date__WEBPACK_IMPORTED_MODULE_0__.mb)("2020-05-21T23:24:06.000Z"),createdGmt:"2020-05-21T23:24:06.000Z",featuredMediaUrl:"http://localhost:9876/__static__/featured-media-1.png",tags:[],categories:[],author:{name:"Lando-Calrissian",id:4},bottomTargetAction:"http://localhost:8899/wp-admin/post.php?action=edit&post=161",capabilities:{hasEditAction:!0,hasDeleteAction:!0},editStoryLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=161",previewLink:"http://localhost:8899/wp-admin/post.php?action=edit&post=161"}]},"./packages/dashboard/src/storybookUtils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{rX:()=>STORYBOOK_PAGE_SIZE,Fw:()=>formattedStoriesArray.A,th:()=>formattedTemplatesArray.A});var formattedStoriesArray=__webpack_require__("./packages/dashboard/src/dataUtils/formattedStoriesArray.js"),formattedTemplatesArray=__webpack_require__("./packages/dashboard/src/dataUtils/formattedTemplatesArray.js");const STORYBOOK_PAGE_SIZE={width:212,height:318}},"./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.constructor.js"),__webpack_require__("./node_modules/core-js/modules/esnext.iterator.for-each.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/theme/types.ts"),_loadingSpinner__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),_typography__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts");const ScrollMessage=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"infiniteScroller__ScrollMessage",componentId:"sc-smx7an-0"})(["width:100%;padding:140px 0 40px;margin:-100px auto 0;text-align:center;p{color:",";}"],(({theme})=>theme.colors.fg.tertiary)),LoadingContainer=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.div.withConfig({displayName:"infiniteScroller__LoadingContainer",componentId:"sc-smx7an-1"})(["display:flex;justify-content:center;"]),AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_4__.Ay.span.withConfig({displayName:"infiniteScroller__AriaOnlyAlert",componentId:"sc-smx7an-2"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_5__.Q);var State=function(State){return State.Loadable="loadable",State.LoadingInternal="loading_internal",State.LoadingExternal="loading_external",State.Complete="complete",State}(State||{}),Action=function(Action){return Action.OnInternalLoad="internal on load",Action.OnExternalLoad="external on load",Action.OnAllLoaded="all loaded",Action.OnLoadSuccess="load success",Action.OnCanLoadMore="can load more",Action}(Action||{});const machine={[State.Loadable]:{[Action.OnInternalLoad]:State.LoadingInternal,[Action.OnExternalLoad]:State.LoadingExternal},[State.LoadingInternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.LoadingExternal]:{[Action.OnAllLoaded]:State.Complete,[Action.OnLoadSuccess]:State.Loadable},[State.Complete]:{[Action.OnCanLoadMore]:State.Loadable}},loadReducer=(state,action)=>machine[state][action]||state;const __WEBPACK_DEFAULT_EXPORT__=function InfiniteScroller({allDataLoadedMessage,allDataLoadedAriaMessage,onLoadMore,canLoadMore,isLoading,loadingAriaMessage,loadingSpinnerProps={animationSize:50,circleSize:6}}){const loadingRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.li)(null),onLoadMoreRef=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.li)(onLoadMore);onLoadMoreRef.current=onLoadMore;const[loadState,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.WO)(loadReducer,State.Loadable),loadingAlert=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>loadState===State.LoadingInternal?loadingAriaMessage:loadState===State.LoadingExternal||canLoadMore?null:allDataLoadedAriaMessage),[allDataLoadedAriaMessage,loadingAriaMessage,loadState,canLoadMore]);(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{loadState===State.LoadingInternal&&onLoadMoreRef.current?.()}),[loadState]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{isLoading&&dispatch(Action.OnExternalLoad)}),[isLoading]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{isLoading||dispatch(canLoadMore?Action.OnLoadSuccess:Action.OnAllLoaded)}),[isLoading,canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{canLoadMore&&dispatch(Action.OnCanLoadMore)}),[canLoadMore]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.vJ)((()=>{if(!loadingRef.current)return;const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{entry.isIntersecting&&dispatch(Action.OnInternalLoad)}))}),{rootMargin:"0px",threshold:0}),triggerEl=loadingRef.current;return observer.observe(triggerEl),()=>{observer.unobserve(triggerEl)}}),[]);const loadingContent=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_3__.Kr)((()=>loadState===State.LoadingExternal?null:canLoadMore?react__WEBPACK_IMPORTED_MODULE_0__.createElement(LoadingContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_loadingSpinner__WEBPACK_IMPORTED_MODULE_8__.A,loadingSpinnerProps)):allDataLoadedMessage?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_typography__WEBPACK_IMPORTED_MODULE_6__.E.Paragraph,{size:_theme__WEBPACK_IMPORTED_MODULE_7__.$.Small},allDataLoadedMessage):null),[allDataLoadedMessage,canLoadMore,loadState,loadingSpinnerProps]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ScrollMessage,{"data-testid":"load-more-on-scroll",ref:loadingRef},loadingAlert&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(AriaOnlyAlert,{role:"status"},loadingAlert),loadingContent)}},"./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/core-js/modules/esnext.iterator.map.js"),__webpack_require__("./packages/react/src/index.ts")),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),uuid__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/node_modules/uuid/dist/esm-browser/v4.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_theme__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/theme/helpers/visuallyHidden.ts"),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/theme/constants/index.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const TAU=2*Math.PI,AriaOnlyAlert=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.span.withConfig({displayName:"loadingSpinner__AriaOnlyAlert",componentId:"sc-10eor9p-0"})(["",""],_theme__WEBPACK_IMPORTED_MODULE_4__.Q),Container=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"loadingSpinner__Container",componentId:"sc-10eor9p-1"})(["position:relative;height:","px;width:","px;color:",";"],(({animationSize})=>animationSize),(({animationSize})=>animationSize),(({theme})=>theme.colors.interactiveBg.brandNormal)),Circle=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.div.withConfig({displayName:"loadingSpinner__Circle",componentId:"sc-10eor9p-2"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) ",";height:","px;width:","px;background-color:",";border-radius:",";animation-name:",";animation-fill-mode:both;animation-duration:","s;animation-iteration-count:infinite;animation-timing-function:",";"],(({$position:{x,y}})=>`translate(${x}px, ${y}px)`),(({circleSize})=>circleSize),(({circleSize})=>circleSize),(({theme})=>theme.colors.interactiveBg.brandNormal),(({theme})=>theme.borders.radius.round),(({circleIndex,numCircles})=>(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.i7)(["0%{opacity:1}","{opacity:1}","{opacity:0.3}","{opacity:1}"],100*circleIndex/numCircles+"%",100*(circleIndex+1)/numCircles+"%",100*(circleIndex+1)/numCircles+1+"%")),.85,_theme__WEBPACK_IMPORTED_MODULE_5__.U.inOutQuad);const __WEBPACK_DEFAULT_EXPORT__=function LoadingSpinner({animationSize=95,circleSize=12,loadingMessage=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Loading","web-stories"),numCircles=11,...props}){const ids=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)((()=>Array.from({length:numCircles}).fill(1).map((()=>(0,uuid__WEBPACK_IMPORTED_MODULE_7__.A)()))),[numCircles]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Container,_extends({animationSize},props),loadingMessage&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(AriaOnlyAlert,{role:"status"},loadingMessage),ids.map(((id,index)=>{const angle=((index,numCircles)=>TAU*index/numCircles)(index,numCircles),position=((angle,animationSize)=>{const radius=animationSize/2,x=Math.sin(angle)*radius,y=-Math.cos(angle)*radius;return{x:x.toFixed(1),y:y.toFixed(1)}})(angle,animationSize);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Circle,{key:id,circleIndex:index,circleSize,numCircles,$position:position})})))}},"./node_modules/core-js/modules/esnext.iterator.find.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("./node_modules/core-js/internals/export.js"),iterate=__webpack_require__("./node_modules/core-js/internals/iterate.js"),aCallable=__webpack_require__("./node_modules/core-js/internals/a-callable.js"),anObject=__webpack_require__("./node_modules/core-js/internals/an-object.js"),getIteratorDirect=__webpack_require__("./node_modules/core-js/internals/get-iterator-direct.js");$({target:"Iterator",proto:!0,real:!0},{find:function find(predicate){anObject(this),aCallable(predicate);var record=getIteratorDirect(this),counter=0;return iterate(record,(function(value,stop){if(predicate(value,counter++))return stop(value)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})}}]);