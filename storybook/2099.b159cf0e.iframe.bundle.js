"use strict";(globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[]).push([[2099],{"./packages/dashboard/node_modules/flagged/dist/flagged.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{iT:()=>useFeature,nT:()=>FlagsProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var FeatureFlagsContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function transformFlags(features){return Array.isArray(features)?Object.fromEntries(features.map((function(feature){return[feature,!0]}))):features}function FlagsProvider(_ref){var a,b,_ref$features=_ref.features,features=void 0===_ref$features?{}:_ref$features,children=_ref.children,currentFeatures=useFeatures();return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(FeatureFlagsContext.Provider,{value:(a=transformFlags(currentFeatures),b=transformFlags(features),_extends({},a,b))},children)}function useFeatures(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(FeatureFlagsContext)}function useFeature(name){var features=useFeatures();return Array.isArray(features)?features.includes(name):"boolean"==typeof features[name]?features[name]:name.split("/").reduce((function(featureGroup,featureName){return"boolean"==typeof featureGroup?featureGroup:void 0!==featureGroup[featureName]&&featureGroup[featureName]}),features)}},"./packages/dashboard/src/app/api/useApiAlerts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/react/src/index.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),_useApi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dashboard/src/app/api/useApi.js");function _temp(t0){const{state:t1}=t0,{stories:t2,templates:t3}=t1,{error:storyError}=t2,{error:templateError}=t3;return{storyError,templateError}}const __WEBPACK_DEFAULT_EXPORT__=function useApiAlerts(){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__.c)(10),{storyError:storyError_0,templateError:templateError_0}=(0,_useApi__WEBPACK_IMPORTED_MODULE_2__.A)(_temp),{showSnackbar}=(0,_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_3__.d)();let t0;$[0]!==showSnackbar?(t0=message=>showSnackbar({message,dismissible:!0}),$[0]=showSnackbar,$[1]=t0):t0=$[1];const debouncedShowSnackbar=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.YQ)(t0,200);let t1,t2,t3,t4;$[2]!==debouncedShowSnackbar||$[3]!==storyError_0?(t1=()=>{storyError_0?.id&&debouncedShowSnackbar(storyError_0.message)},t2=[storyError_0,debouncedShowSnackbar],$[2]=debouncedShowSnackbar,$[3]=storyError_0,$[4]=t1,$[5]=t2):(t1=$[4],t2=$[5]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)(t1,t2),$[6]!==debouncedShowSnackbar||$[7]!==templateError_0?(t3=()=>{templateError_0?.id&&debouncedShowSnackbar(templateError_0.message)},t4=[templateError_0,debouncedShowSnackbar],$[6]=debouncedShowSnackbar,$[7]=templateError_0,$[8]=t3,$[9]=t4):(t3=$[8],t4=$[9]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_1__.vJ)(t3,t4)}},"./packages/dashboard/src/app/views/exploreTemplates/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),loadingSpinner=__webpack_require__("./packages/design-system/src/components/loadingSpinner/loadingSpinner.tsx"),infiniteScroller=__webpack_require__("./packages/design-system/src/components/infiniteScroller/infiniteScroller.tsx"),headline=__webpack_require__("./packages/design-system/src/components/typography/headline/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),shared=(__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),__webpack_require__("./packages/dashboard/src/propTypes.js"),__webpack_require__("./packages/dashboard/src/app/views/shared/index.js")),useGridViewKeys=__webpack_require__("./packages/design-system/src/components/keyboard/gridview/useGridViewKeys.ts"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),noop=__webpack_require__("./packages/design-system/src/utils/noop.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src_constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),grid_components=__webpack_require__("./packages/dashboard/src/app/views/shared/grid/components.js");const CardWrapper=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],grid_components.Hf,grid_components.pk,grid_components.Hf,grid_components.pk,(({$isSelected})=>$isSelected?1:0)),TemplateDisplayContent=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),PicturePoster=(0,styled_components_browser_esm.Ay)(grid_components.O6).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme})=>theme.borders.radius.medium)),SeeDetailsButton=(0,styled_components_browser_esm.Ay)(button_button.$).attrs({type:constants.VQ.Tertiary,size:constants.Mp.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme})=>theme.colors.standard.white)),TemplateGridItem=(0,src.Rf)(((t0,ref)=>{const $=(0,dist.c)(46),{onCreateStory,onFocus,height,id,isActive,posterSrc,slug,title,status,onSeeDetailsClick:t1}=t0,onSeeDetailsClick=void 0===t1?noop.l:t1,tabIndex=isActive?0:-1;let t2;$[0]!==title?(t2=(0,sprintf.A)((0,i18n.__)("First page of %s template","web-stories"),title),$[0]=title,$[1]=t2):t2=$[1];const posterAltText=t2,t3=`template-grid-item-${id}`,t4=`template-grid-item-${id}`,t5=posterSrc?.webp;let t6;$[2]!==t5?(t6=react.createElement("source",{srcSet:t5,type:"image/webp"}),$[2]=t5,$[3]=t6):t6=$[3];const t7=posterSrc?.png;let t8;$[4]!==t7?(t8=react.createElement("source",{srcSet:t7,type:"image/png"}),$[4]=t7,$[5]=t8):t8=$[5];const t9=posterSrc?.png;let t10,t11,t12,t13,t14;$[6]!==posterAltText||$[7]!==t9?(t10=react.createElement("img",{src:t9,alt:posterAltText,decoding:"async",width:src_constants.qs,height:src_constants.PO}),$[6]=posterAltText,$[7]=t9,$[8]=t10):t10=$[8],$[9]!==t10||$[10]!==t6||$[11]!==t8?(t11=react.createElement(PicturePoster,null,t6,t8,t10),$[9]=t10,$[10]=t6,$[11]=t8,$[12]=t11):t11=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t12=react.createElement(grid_components.Hf,null),$[13]=t12):t12=$[13],$[14]!==title?(t13=(0,sprintf.A)((0,i18n.__)("Go to detail view of %s","web-stories"),title),$[14]=title,$[15]=t13):t13=$[15],$[16]!==id||$[17]!==onSeeDetailsClick||$[18]!==title?(t14=()=>onSeeDetailsClick(id,title),$[16]=id,$[17]=onSeeDetailsClick,$[18]=title,$[19]=t14):t14=$[19];const t15=src_constants.ai[status];let t16,t17,t18,t19,t20,t21;return $[20]!==t13||$[21]!==t14||$[22]!==t15||$[23]!==tabIndex?(t16=react.createElement(SeeDetailsButton,{ariaLabel:t13,onClick:t14,className:"focus_template",tabIndex},t15),$[20]=t13,$[21]=t14,$[22]=t15,$[23]=tabIndex,$[24]=t16):t16=$[24],$[25]!==onCreateStory||$[26]!==tabIndex||$[27]!==title?(t17=onCreateStory&&react.createElement(button_button.$,{size:constants.Mp.Small,type:constants.VQ.Primary,onClick:onCreateStory,tabIndex,ariaLabel:(0,sprintf.A)((0,i18n.__)("Create new story from %s","web-stories"),title)},(0,i18n.__)("Use template","web-stories")),$[25]=onCreateStory,$[26]=tabIndex,$[27]=title,$[28]=t17):t17=$[28],$[29]!==t16||$[30]!==t17?(t18=react.createElement(TemplateDisplayContent,null,t16,t17),$[29]=t16,$[30]=t17,$[31]=t18):t18=$[31],$[32]!==slug||$[33]!==t18?(t19=react.createElement(grid_components.pk,{"data-testid":"card-action-container","data-template-slug":slug},t18),$[32]=slug,$[33]=t18,$[34]=t19):t19=$[34],$[35]!==isActive||$[36]!==t11||$[37]!==t19?(t20=react.createElement(grid_components.mc,null,react.createElement(CardWrapper,{$isSelected:isActive},t11,t12,t19)),$[35]=isActive,$[36]=t11,$[37]=t19,$[38]=t20):t20=$[38],$[39]!==height||$[40]!==onFocus||$[41]!==ref||$[42]!==t20||$[43]!==t3||$[44]!==t4?(t21=react.createElement(components.SG,{ref,id:t3,className:"templateGridItem","data-testid":t4,$posterHeight:height,onFocus},t20),$[39]=height,$[40]=onFocus,$[41]=ref,$[42]=t20,$[43]=t3,$[44]=t4,$[45]=t21):t21=$[45],t21}));TemplateGridItem.displayName="TemplateGridItem",TemplateGridItem.propTypes={detailLink:prop_types_default().string,onCreateStory:prop_types_default().func,onFocus:prop_types_default().func.isRequired,onSeeDetailsClick:prop_types_default().func,height:prop_types_default().number.isRequired,id:prop_types_default().number.isRequired,isActive:prop_types_default().bool,posterSrc:prop_types_default().shape({webp:prop_types_default().string.isRequired,png:prop_types_default().string.isRequired}),slug:prop_types_default().string.isRequired,status:prop_types_default().string.isRequired,title:prop_types_default().string.isRequired};const templateGridItem=TemplateGridItem;const templateGridView=function TemplateGridView({pageSize,templates:filteredTemplates,templateActions}){const{isRTL,apiCallbacks}=(0,config.U)(),containerRef=(0,src.li)(),gridRef=(0,src.li)(),itemsRef=(0,src.li)({}),[activeGridItemId,setActiveGridItemId]=(0,src.J0)(null),{handleDetailsToggle,createStoryFromTemplate}=templateActions||{},canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);(0,useGridViewKeys.A)({containerRef,gridRef,itemRefs:itemsRef,isRTL,currentItemId:activeGridItemId,items:filteredTemplates}),(0,src.vJ)((()=>{activeGridItemId&&itemsRef.current?.[activeGridItemId]?.querySelector(".focus_template")?.focus()}),[activeGridItemId]),(0,src.g$)(containerRef,(()=>setActiveGridItemId(null)),[]);const memoizedTemplateItems=(0,src.Kr)((()=>filteredTemplates.map((({id,slug,status,title,postersByPage})=>{const isActive=activeGridItemId===id,posterSrc=postersByPage?.[0];return react.createElement(templateGridItem,{onCreateStory:canCreateStory?()=>createStoryFromTemplate(id):utils.lQ,onFocus:()=>{setActiveGridItemId(id)},onSeeDetailsClick:handleDetailsToggle,height:pageSize.height,id,isActive,key:slug,posterSrc,ref:el=>{itemsRef.current[id]=el},slug,status,title})}))),[filteredTemplates,activeGridItemId,canCreateStory,handleDetailsToggle,pageSize.height,createStoryFromTemplate]);return react.createElement("div",{ref:containerRef},react.createElement(components.pV,{pageSize,role:"list",ref:gridRef,ariaLabel:(0,i18n.__)("Viewing available templates","web-stories")},memoizedTemplateItems))};const content=function Content(t0){const $=(0,dist.c)(13),{allPagesFetched,isLoading,page,templates,view,totalTemplates,search,templateActions}=t0,{newStoryURL}=(0,config.U)();let t1,t2;$[0]!==allPagesFetched||$[1]!==isLoading||$[2]!==newStoryURL||$[3]!==page.requestNextPage||$[4]!==search||$[5]!==templateActions||$[6]!==templates||$[7]!==totalTemplates||$[8]!==view.pageSize?(t1=()=>isLoading?react.createElement(components.YM,null,react.createElement(loadingSpinner.A,null)):totalTemplates>0?react.createElement(react.Fragment,null,react.createElement(templateGridView,{templates,pageSize:view.pageSize,templateActions}),react.createElement(infiniteScroller.A,{canLoadMore:!allPagesFetched,isLoading,allDataLoadedMessage:(0,i18n.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,i18n.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,i18n.__)("Loading more templates","web-stories"),onLoadMore:page.requestNextPage})):react.createElement(shared.Gh,null,react.createElement(headline.$,{size:types.$.Small,as:"h3"},search?(0,sprintf.A)((0,i18n.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),search):(0,i18n.__)("No templates currently available.","web-stories")),!search&&react.createElement(button_button.x,{type:constants.VQ.Primary,size:constants.Mp.Medium,href:newStoryURL},(0,i18n.__)("Create New Story","web-stories"))),t2=[allPagesFetched,isLoading,newStoryURL,page.requestNextPage,templateActions,search,templates,totalTemplates,view.pageSize],$[0]=allPagesFetched,$[1]=isLoading,$[2]=newStoryURL,$[3]=page.requestNextPage,$[4]=search,$[5]=templateActions,$[6]=templates,$[7]=totalTemplates,$[8]=view.pageSize,$[9]=t1,$[10]=t2):(t1=$[9],t2=$[10]);const pageContent=(0,src.Kr)(t1,t2);let t3;return $[11]!==pageContent?(t3=react.createElement(components.PE.Scrollable,null,react.createElement(components.Zo,null,pageContent)),$[11]=pageContent,$[12]=t3):t3=$[12],t3}},"./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>TemplateFiltersProvider,C:()=>filterContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_constants_templates__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dashboard/src/constants/templates.ts"),_filters_reducer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/src/app/views/filters/reducer.js"),_filters_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/dashboard/src/app/views/filters/types.js");const filterContext=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.q6)({state:{},actions:{}}),{filters:defaultTemplateFilters,sort:defaultTemplateSort}=_constants_templates__WEBPACK_IMPORTED_MODULE_3__.dc;function TemplateFiltersProvider(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(19),{children}=t0;let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1={filters:[],filtersObject:defaultTemplateFilters,sortObject:defaultTemplateSort},$[0]=t1):t1=$[0];const[state,dispatch]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.WO)(_filters_reducer__WEBPACK_IMPORTED_MODULE_4__.A,t1);let t2,t3;$[1]!==dispatch?(t2=(key,value)=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_5__.bS,payload:{key,value}})},$[1]=dispatch,$[2]=t2):t2=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t3=[],$[3]=t3):t3=$[3];const updateFilter=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t2,t3);let t4,t5;$[4]!==dispatch?(t4=values=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_5__.HX,payload:{type:"template",values}})},$[4]=dispatch,$[5]=t4):t4=$[5],$[6]===Symbol.for("react.memo_cache_sentinel")?(t5=[],$[6]=t5):t5=$[6];const updateSort=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t4,t5);let t6,t7;$[7]!==dispatch?(t6=value_0=>{dispatch({type:_filters_types__WEBPACK_IMPORTED_MODULE_5__.ak,payload:{value:value_0}})},$[7]=dispatch,$[8]=t6):t6=$[8],$[9]===Symbol.for("react.memo_cache_sentinel")?(t7=[],$[9]=t7):t7=$[9];const registerFilters=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t6,t7);let t8,t9;$[10]!==registerFilters||$[11]!==state||$[12]!==updateFilter||$[13]!==updateSort?(t8=()=>({state,actions:{updateSort,updateFilter,registerFilters}}),t9=[state,updateSort,updateFilter,registerFilters],$[10]=registerFilters,$[11]=state,$[12]=updateFilter,$[13]=updateSort,$[14]=t8,$[15]=t9):(t8=$[14],t9=$[15]);const contextValue=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)(t8,t9);let t10;return $[16]!==children||$[17]!==contextValue?(t10=react__WEBPACK_IMPORTED_MODULE_0__.createElement(filterContext.Provider,{value:contextValue},children),$[16]=children,$[17]=contextValue,$[18]=t10):t10=$[18],t10}TemplateFiltersProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_6___default().node}},"./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useTemplateFilters});var _googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/react/src/index.ts"),_TemplateFiltersProvider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js");function useTemplateFilters(t0){const selector=void 0===t0?_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.D_:t0;return(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_0__.i7)(_TemplateFiltersProvider__WEBPACK_IMPORTED_MODULE_1__.C,selector)}},"./packages/dashboard/src/app/views/exploreTemplates/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),flagged__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/dashboard/node_modules/flagged/dist/flagged.esm.js"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dashboard/src/constants/index.ts"),_utils_useTemplateView__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/dashboard/src/utils/useTemplateView.js"),_filters_useTemplateFilters__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/dashboard/src/utils/index.js"),_shared__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/dashboard/src/app/views/shared/index.js");function Header(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(35),{isLoading,totalTemplates,view,searchOptions:t1}=t0;let t2;$[0]!==t1?(t2=void 0===t1?[]:t1,$[0]=t1,$[1]=t2):t2=$[1];const searchOptions=t2,enableInProgressTemplateActions=(0,flagged__WEBPACK_IMPORTED_MODULE_3__.iT)("enableInProgressTemplateActions"),{filters:filters_0,sortObject:sortObject_0,updateFilter:updateFilter_0,updateSort:updateSort_0,registerFilters:registerFilters_0}=(0,_filters_useTemplateFilters__WEBPACK_IMPORTED_MODULE_6__.A)(_temp);let t3,t4;$[2]!==filters_0?(t3=()=>{const status=filters_0.find(_temp2),search=filters_0.find(_temp3);return[status?.filterId,search?.filterId]},t4=[filters_0],$[2]=filters_0,$[3]=t3,$[4]=t4):(t3=$[3],t4=$[4]);const[statusFilterValue,searchFilterValue]=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.Kr)(t3,t4);let t5;$[5]!==updateFilter_0?(t5=value=>{updateFilter_0("search",{filterId:value})},$[5]=updateFilter_0,$[6]=t5):t5=$[6];const debouncedSearchChange=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.YQ)(t5,_constants__WEBPACK_IMPORTED_MODULE_4__.dQ);let t6,t7,t8,t9;$[7]!==registerFilters_0?(t6=()=>{registerFilters_0([{key:"search"}]),registerFilters_0([{key:"status",filterId:_constants__WEBPACK_IMPORTED_MODULE_4__.dc.filters.status}])},t7=[registerFilters_0],$[7]=registerFilters_0,$[8]=t6,$[9]=t7):(t6=$[8],t7=$[9]),(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.vJ)(t6,t7),$[10]!==updateFilter_0?(t8=()=>updateFilter_0("search",{filterId:null}),t9=[updateFilter_0],$[10]=updateFilter_0,$[11]=t8,$[12]=t9):(t8=$[11],t9=$[12]);const clearSearch=(0,_googleforcreators_react__WEBPACK_IMPORTED_MODULE_2__.hb)(t8,t9);let t10;$[13]!==statusFilterValue||$[14]!==totalTemplates?(t10={totalResults:totalTemplates,currentFilter:statusFilterValue,view:_constants__WEBPACK_IMPORTED_MODULE_4__.eZ.TEMPLATES_GALLERY},$[13]=statusFilterValue,$[14]=totalTemplates,$[15]=t10):t10=$[15];const resultsLabel=(0,_utils__WEBPACK_IMPORTED_MODULE_7__.qM)(t10);let t11,t12,t13;$[16]===Symbol.for("react.memo_cache_sentinel")?(t11=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Explore Templates","web-stories"),t12=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Search Templates","web-stories"),$[16]=t11,$[17]=t12):(t11=$[16],t12=$[17]),$[18]!==clearSearch||$[19]!==debouncedSearchChange||$[20]!==searchFilterValue||$[21]!==searchOptions?(t13=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared__WEBPACK_IMPORTED_MODULE_8__.Av,{heading:t11,searchPlaceholder:t12,showSearch:!0,searchOptions,searchValue:searchFilterValue,handleSearchChange:debouncedSearchChange,onClear:clearSearch}),$[18]=clearSearch,$[19]=debouncedSearchChange,$[20]=searchFilterValue,$[21]=searchOptions,$[22]=t13):t13=$[22];const t14=view.style,t15=view.toggleStyle;let t16,t17,t18;return $[23]===Symbol.for("react.memo_cache_sentinel")?(t16=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_9__.__)("Choose sort option for display","web-stories"),$[23]=t16):t16=$[23],$[24]!==enableInProgressTemplateActions||$[25]!==isLoading||$[26]!==resultsLabel||$[27]!==sortObject_0||$[28]!==updateSort_0||$[29]!==view.style||$[30]!==view.toggleStyle?(t17=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared__WEBPACK_IMPORTED_MODULE_8__.WJ,{resultsLabel,layoutStyle:t14,handleLayoutSelect:t15,isLoading,pageSortOptions:_constants__WEBPACK_IMPORTED_MODULE_4__.XS,pageSortDefaultOption:_constants__WEBPACK_IMPORTED_MODULE_4__.D4.POPULAR,currentSort:sortObject_0,handleSortChange:updateSort_0,showSortDropdown:enableInProgressTemplateActions,sortDropdownAriaLabel:t16}),$[24]=enableInProgressTemplateActions,$[25]=isLoading,$[26]=resultsLabel,$[27]=sortObject_0,$[28]=updateSort_0,$[29]=view.style,$[30]=view.toggleStyle,$[31]=t17):t17=$[31],$[32]!==t13||$[33]!==t17?(t18=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,t13,t17),$[32]=t13,$[33]=t17,$[34]=t18):t18=$[34],t18}function _temp3(t0){const{key:key_0}=t0;return"search"===key_0}function _temp2(t0){const{key}=t0;return"status"===key}function _temp(t0){const{state:t1,actions:t2}=t0,{filters,sortObject}=t1,{updateFilter,updateSort,registerFilters}=t2;return{filters,sortObject,updateFilter,updateSort,registerFilters}}Header.propTypes={isLoading:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,totalTemplates:prop_types__WEBPACK_IMPORTED_MODULE_10___default().number,view:_utils_useTemplateView__WEBPACK_IMPORTED_MODULE_5__.Q8.isRequired,searchOptions:prop_types__WEBPACK_IMPORTED_MODULE_10___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_10___default().object)};const __WEBPACK_DEFAULT_EXPORT__=Header},"./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/content/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>content});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),src=__webpack_require__("./packages/react/src/index.ts"),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),typography_text=__webpack_require__("./packages/design-system/src/components/typography/text/index.ts"),chip=__webpack_require__("./packages/design-system/src/components/chip/chip.tsx"),button_button=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),constants=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),arrow_left_large=__webpack_require__("./packages/design-system/src/icons/arrow_left_large.svg"),arrow_right_large=__webpack_require__("./packages/design-system/src/icons/arrow_right_large.svg"),display=__webpack_require__("./packages/design-system/src/components/typography/display/index.ts"),types=__webpack_require__("./packages/design-system/src/theme/types.ts"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),propTypes=__webpack_require__("./packages/dashboard/src/propTypes.js");const Panel=styled_components_browser_esm.Ay.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Container=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Inner=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),DetailContainer=styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),TemplateDetails=styled_components_browser_esm.Ay.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),StyledPanel=(styled_components_browser_esm.Ay.section.attrs({"aria-label":(0,i18n.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,styled_components_browser_esm.Ay)(Panel).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),ByLineText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(({theme})=>theme.colors.fg.tertiary)),DescriptionText=(0,styled_components_browser_esm.Ay)(typography_text.E.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),PaginationContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(({alignLeft})=>alignLeft?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        ")),TemplateTag=(0,styled_components_browser_esm.Ay)(chip.A).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(({theme})=>theme.colors.fg.primary)),MetadataContainer=styled_components_browser_esm.Ay.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);function DetailsContent(t0){const $=(0,dist.c)(56),{activeTemplateIndex,isRTL,filteredTemplatesLength,switchToTemplateByOffset,template}=t0;let t1;$[0]!==template?(t1=template||{},$[0]=template,$[1]=t1):t1=$[1];const{postersByPage,title,description,tags,colors}=t1;let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2=[],$[2]=t2):t2=$[2];const[galleryPosters,setGalleryPosters]=(0,src.J0)(t2);let t3,t4,t5,t6;$[3]!==postersByPage||$[4]!==setGalleryPosters?(t3=()=>{postersByPage&&setGalleryPosters(Object.values(postersByPage).map(_temp))},$[3]=postersByPage,$[4]=setGalleryPosters,$[5]=t3):t3=$[5],$[6]!==postersByPage?(t4=[postersByPage],$[6]=postersByPage,$[7]=t4):t4=$[7],(0,src.vJ)(t3,t4),$[8]!==activeTemplateIndex||$[9]!==filteredTemplatesLength||$[10]!==isRTL||$[11]!==setGalleryPosters||$[12]!==switchToTemplateByOffset?(t5=()=>{const nextIndex=isRTL?activeTemplateIndex-1:activeTemplateIndex+1,previousIndex=isRTL?activeTemplateIndex+1:activeTemplateIndex-1,disablePrevious=isRTL?!filteredTemplatesLength||activeTemplateIndex===filteredTemplatesLength-1:!filteredTemplatesLength||0===activeTemplateIndex,disableNext=isRTL?!filteredTemplatesLength||0===activeTemplateIndex:!filteredTemplatesLength||activeTemplateIndex===filteredTemplatesLength-1,Previous=react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,"aria-label":(0,i18n.__)("View previous template","web-stories"),onClick:()=>{switchToTemplateByOffset(previousIndex),setGalleryPosters([])},disabled:disablePrevious},react.createElement(arrow_left_large.A,{height:32,width:32})),Next=react.createElement(button_button.$,{type:constants.VQ.Tertiary,size:constants.Mp.Small,variant:constants.Ak.Square,"aria-label":(0,i18n.__)("View next template","web-stories"),onClick:()=>{switchToTemplateByOffset(nextIndex),setGalleryPosters([])},disabled:disableNext},react.createElement(arrow_right_large.A,{height:32,width:32}));return isRTL?{NextButton:Previous,PrevButton:Next}:{NextButton:Next,PrevButton:Previous}},$[8]=activeTemplateIndex,$[9]=filteredTemplatesLength,$[10]=isRTL,$[11]=setGalleryPosters,$[12]=switchToTemplateByOffset,$[13]=t5):t5=$[13],$[14]!==activeTemplateIndex||$[15]!==filteredTemplatesLength||$[16]!==isRTL||$[17]!==switchToTemplateByOffset?(t6=[filteredTemplatesLength,activeTemplateIndex,isRTL,switchToTemplateByOffset],$[14]=activeTemplateIndex,$[15]=filteredTemplatesLength,$[16]=isRTL,$[17]=switchToTemplateByOffset,$[18]=t6):t6=$[18];const{NextButton,PrevButton}=(0,src.Kr)(t5,t6);let t7;$[19]!==template?(t7=template?(0,sprintf.A)((0,i18n.__)("By %s","web-stories"),template.createdBy):null,$[19]=template,$[20]=t7):t7=$[20];const byLine=t7;let t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18,t19,t20,t21,t22;return $[21]!==PrevButton?(t8=react.createElement(PaginationContainer,{alignLeft:!0},PrevButton),$[21]=PrevButton,$[22]=t8):t8=$[22],$[23]===Symbol.for("react.memo_cache_sentinel")?(t9=(0,i18n.__)("Template details by page","web-stories"),$[23]=t9):t9=$[23],$[24]!==galleryPosters||$[25]!==isRTL?(t10=react.createElement(components.PG,{galleryPosters,isRTL,galleryLabel:t9}),$[24]=galleryPosters,$[25]=isRTL,$[26]=t10):t10=$[26],$[27]!==title?(t11=react.createElement(display.n,{size:types.$.Small,as:"h3","data-testid":"template-details-title"},title),$[27]=title,$[28]=t11):t11=$[28],$[29]!==byLine?(t12=react.createElement(ByLineText,{size:types.$.Medium},byLine),$[29]=byLine,$[30]=t12):t12=$[30],$[31]!==description?(t13=react.createElement(DescriptionText,{size:types.$.Medium},description),$[31]=description,$[32]=t13):t13=$[32],$[33]===Symbol.for("react.memo_cache_sentinel")?(t14=(0,i18n.__)("Template tags","web-stories"),$[33]=t14):t14=$[33],$[34]!==tags?(t15=tags.map(_temp2),$[34]=tags,$[35]=t15):t15=$[35],$[36]!==t15?(t16=react.createElement(MetadataContainer,{role:"list","aria-label":t14},t15),$[36]=t15,$[37]=t16):t16=$[37],$[38]===Symbol.for("react.memo_cache_sentinel")?(t17=(0,i18n.__)("Template colors","web-stories"),$[38]=t17):t17=$[38],$[39]!==colors?(t18=react.createElement(MetadataContainer,null,react.createElement(components.Q5,{colors,size:32,"aria-label":t17})),$[39]=colors,$[40]=t18):t18=$[40],$[41]!==t11||$[42]!==t12||$[43]!==t13||$[44]!==t16||$[45]!==t18?(t19=react.createElement(TemplateDetails,null,react.createElement(DetailContainer,null,t11,t12,t13,t16,t18)),$[41]=t11,$[42]=t12,$[43]=t13,$[44]=t16,$[45]=t18,$[46]=t19):t19=$[46],$[47]!==t10||$[48]!==t19?(t20=react.createElement(Inner,null,t10,t19),$[47]=t10,$[48]=t19,$[49]=t20):t20=$[49],$[50]!==NextButton?(t21=react.createElement(PaginationContainer,null,NextButton),$[50]=NextButton,$[51]=t21):t21=$[51],$[52]!==t20||$[53]!==t21||$[54]!==t8?(t22=react.createElement(StyledPanel,null,react.createElement(Container,null,t8,t20,t21)),$[52]=t20,$[53]=t21,$[54]=t8,$[55]=t22):t22=$[55],t22}function _temp2(tag){return react.createElement(TemplateTag,{key:tag,disabled:!0},tag)}function _temp(poster,index){return{id:index,...poster}}DetailsContent.propTypes={activeTemplateIndex:prop_types_default().number,isRTL:prop_types_default().bool,filteredTemplatesLength:prop_types_default().number,switchToTemplateByOffset:prop_types_default().func,template:propTypes.Ms};const content=DetailsContent},"./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_9__),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/i18n/src/i18n.ts"),_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/i18n/src/sprintf.ts"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/design-system/src/components/button/button.tsx"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/design-system/src/components/button/constants.ts"),_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/design-system/src/icons/cross_large.svg"),_propTypes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dashboard/src/propTypes.js");const Nav=styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),CTAButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.Ay)(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.$).attrs({type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.VQ.Primary,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.Mp.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);function Header(t0){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(14),{templateTitle,templateId,templateActions,canCreateStory}=t0;let t1;$[0]!==templateActions?(t1=templateActions||{},$[0]=templateActions,$[1]=t1):t1=$[1];const{createStoryFromTemplate,handleDetailsToggle}=t1;let t2,t3,t4,t5,t6;return $[2]===Symbol.for("react.memo_cache_sentinel")?(t2=(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Close","web-stories"),$[2]=t2):t2=$[2],$[3]===Symbol.for("react.memo_cache_sentinel")?(t3=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_7__.A,null),$[3]=t3):t3=$[3],$[4]!==handleDetailsToggle?(t4=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_4__.$,{type:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.VQ.Tertiary,variant:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.Ak.Square,size:_googleforcreators_design_system__WEBPACK_IMPORTED_MODULE_5__.Mp.Small,"aria-label":t2,onClick:handleDetailsToggle},t3),$[4]=handleDetailsToggle,$[5]=t4):t4=$[5],$[6]!==canCreateStory||$[7]!==createStoryFromTemplate||$[8]!==templateId||$[9]!==templateTitle?(t5=canCreateStory&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(CTAButton,{onClick:()=>createStoryFromTemplate(templateId),"aria-label":(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_8__.A)((0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Use %s template to create new story","web-stories"),templateTitle)},(0,_googleforcreators_i18n__WEBPACK_IMPORTED_MODULE_6__.__)("Use template","web-stories")),$[6]=canCreateStory,$[7]=createStoryFromTemplate,$[8]=templateId,$[9]=templateTitle,$[10]=t5):t5=$[10],$[11]!==t4||$[12]!==t5?(t6=react__WEBPACK_IMPORTED_MODULE_0__.createElement(Nav,null,t4,t5),$[11]=t4,$[12]=t5,$[13]=t6):t6=$[13],t6}Header.propTypes={canCreateStory:prop_types__WEBPACK_IMPORTED_MODULE_9___default().bool,templateActions:_propTypes__WEBPACK_IMPORTED_MODULE_2__.zk,templateId:prop_types__WEBPACK_IMPORTED_MODULE_9___default().number,templateTitle:prop_types__WEBPACK_IMPORTED_MODULE_9___default().string};const __WEBPACK_DEFAULT_EXPORT__=Header},"./packages/dashboard/src/app/views/myStories/header/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>header});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),src=__webpack_require__("./packages/react/src/index.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),propTypes=__webpack_require__("./packages/dashboard/src/propTypes.js"),useStoryView=__webpack_require__("./packages/dashboard/src/utils/useStoryView.js"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js"),shared=__webpack_require__("./packages/dashboard/src/app/views/shared/index.js"),views_utils=__webpack_require__("./packages/dashboard/src/app/views/utils/index.js"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),pill=__webpack_require__("./packages/design-system/src/components/pill/pill.tsx"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts");const StyledPill=(0,__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").Ay)(pill.A).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(({theme,isActive})=>isActive?theme.colors.gray[20]:theme.colors.fg.tertiary));function _temp(t0){const{actions:t1}=t0,{updateFilter,registerFilters}=t1;return{updateFilter,registerFilters}}const storyStatusToggle=function StoryStatusToggle(t0){const $=(0,dist.c)(20),{initialPageReady,totalStoriesByStatus,currentStatus}=t0,{updateFilter:updateFilter_0,registerFilters:registerFilters_0}=(0,useStoryFilters.A)(_temp);let t1,t2;$[0]!==updateFilter_0?(t1=value=>{updateFilter_0("status",{filterId:value})},t2=[updateFilter_0],$[0]=updateFilter_0,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const handleStatusChange=(0,src.hb)(t1,t2);let t3,t4,t5,t6;$[3]!==registerFilters_0?(t3=()=>{registerFilters_0([{key:"status",filterId:constants.q9.filters.status}])},t4=[registerFilters_0],$[3]=registerFilters_0,$[4]=t3,$[5]=t4):(t3=$[4],t4=$[5]),(0,src.vJ)(t3,t4),$[6]!==totalStoriesByStatus?(t5=()=>Object.keys(totalStoriesByStatus).reduce(((prev,cur)=>prev+totalStoriesByStatus[cur]),0),t6=[totalStoriesByStatus],$[6]=totalStoriesByStatus,$[7]=t5,$[8]=t6):(t5=$[7],t6=$[8]);const totalStories=(0,src.Kr)(t5,t6);let t7,t8;$[9]!==currentStatus||$[10]!==totalStoriesByStatus?(t7=()=>constants.h.filter((t9=>{const{status}=t9;return Boolean(status in totalStoriesByStatus)&&totalStoriesByStatus[status]>0||status===currentStatus})).map((t10=>{const{label,status:status_0,value:value_0}=t10,count=totalStoriesByStatus[status_0],disabled=Boolean(!count);return{ariaLabel:(0,sprintf.A)((0,i18n.__)("Filter stories by %s","web-stories"),label),disabled,isActive:currentStatus===value_0,value:value_0,label,count}})),t8=[totalStoriesByStatus,currentStatus],$[9]=currentStatus,$[10]=totalStoriesByStatus,$[11]=t7,$[12]=t8):(t7=$[11],t8=$[12]);const statuses=(0,src.Kr)(t7,t8);if(!initialPageReady||!totalStories||totalStoriesByStatus&&0===Object.keys(totalStoriesByStatus).length)return null;let t9,t10;if($[13]!==handleStatusChange||$[14]!==statuses){let t10;$[16]!==handleStatusChange?(t10=t11=>{const{ariaLabel:ariaLabel_0,disabled:disabled_0,isActive:isActive_0,value:value_1,label:label_0,count:count_0}=t11;return react.createElement(StyledPill,{key:value_1,onClick:()=>handleStatusChange(value_1),isActive:isActive_0,disabled:disabled_0,"aria-label":ariaLabel_0},label_0,react.createElement("span",null,count_0))},$[16]=handleStatusChange,$[17]=t10):t10=$[17],t9=statuses.map(t10),$[13]=handleStatusChange,$[14]=statuses,$[15]=t9}else t9=$[15];return $[18]!==t9?(t10=react.createElement(react.Fragment,null,t9),$[18]=t9,$[19]=t10):t10=$[19],t10};function Header(t0){const $=(0,dist.c)(45),{initialPageReady,stories,totalStoriesByStatus,view}=t0;let t1,t2;$[0]!==stories?(t1=()=>(0,views_utils.Ds)(stories),t2=[stories],$[0]=stories,$[1]=t1,$[2]=t2):(t1=$[1],t2=$[2]);const searchOptions=(0,src.Kr)(t1,t2),{filters:filters_0,sortObject:sortObject_0,updateFilter:updateFilter_0,updateSort:updateSort_0,registerFilters:registerFilters_0}=(0,useStoryFilters.A)(header_temp);let t3,t4;$[3]!==filters_0?(t3=()=>{const status=filters_0.find(_temp2),search=filters_0.find(_temp3);return[filters_0.filter(_temp4),status?.filterId,search?.filterId]},t4=[filters_0],$[3]=filters_0,$[4]=t3,$[5]=t4):(t3=$[4],t4=$[5]);const[dropDownFilters,statusFilterValue,searchFilterValue]=(0,src.Kr)(t3,t4);let t5,t6;$[6]!==statusFilterValue||$[7]!==totalStoriesByStatus?(t5=()=>(statusFilterValue?.split(",")||[]).reduce(((total,filterKey)=>total+=totalStoriesByStatus[filterKey]||0),0),t6=[statusFilterValue,totalStoriesByStatus],$[6]=statusFilterValue,$[7]=totalStoriesByStatus,$[8]=t5,$[9]=t6):(t5=$[8],t6=$[9]);const totalResults=(0,src.Kr)(t5,t6),t7=Boolean(searchFilterValue);let t8;$[10]!==statusFilterValue||$[11]!==t7||$[12]!==totalResults?(t8={currentFilter:statusFilterValue,isActiveSearch:t7,totalResults,view:constants.eZ.DASHBOARD},$[10]=statusFilterValue,$[11]=t7,$[12]=totalResults,$[13]=t8):t8=$[13];const resultsLabel=(0,utils.qM)(t8);let t9;$[14]!==updateFilter_0?(t9=async value=>{await(0,tracking_src.sx)("search",{search_type:"dashboard",search_term:value}),updateFilter_0("search",{filterId:value})},$[14]=updateFilter_0,$[15]=t9):t9=$[15];const debouncedSearchChange=(0,src.YQ)(t9,constants.dQ);let t10,t11,t12,t13;$[16]!==registerFilters_0?(t10=()=>{registerFilters_0([{key:"search"}])},t11=[registerFilters_0],$[16]=registerFilters_0,$[17]=t10,$[18]=t11):(t10=$[17],t11=$[18]),(0,src.vJ)(t10,t11),$[19]!==updateFilter_0?(t12=()=>updateFilter_0("search",{filterId:null}),t13=[updateFilter_0],$[19]=updateFilter_0,$[20]=t12,$[21]=t13):(t12=$[20],t13=$[21]);const clearSearch=(0,src.hb)(t12,t13);let t14,t15,t16,t17,t18,t19;return $[22]===Symbol.for("react.memo_cache_sentinel")?(t14=(0,i18n.__)("Dashboard","web-stories"),t15=(0,i18n.__)("Search Stories","web-stories"),$[22]=t14,$[23]=t15):(t14=$[22],t15=$[23]),$[24]!==initialPageReady||$[25]!==statusFilterValue||$[26]!==totalStoriesByStatus?(t16=react.createElement(storyStatusToggle,{initialPageReady,totalStoriesByStatus,currentStatus:statusFilterValue}),$[24]=initialPageReady,$[25]=statusFilterValue,$[26]=totalStoriesByStatus,$[27]=t16):t16=$[27],$[28]!==clearSearch||$[29]!==debouncedSearchChange||$[30]!==initialPageReady||$[31]!==searchFilterValue||$[32]!==searchOptions||$[33]!==t16?(t17=react.createElement(shared.Av,{heading:t14,searchPlaceholder:t15,searchOptions,handleSearchChange:debouncedSearchChange,showSearch:initialPageReady,searchValue:searchFilterValue,onClear:clearSearch},t16),$[28]=clearSearch,$[29]=debouncedSearchChange,$[30]=initialPageReady,$[31]=searchFilterValue,$[32]=searchOptions,$[33]=t16,$[34]=t17):t17=$[34],$[35]!==dropDownFilters||$[36]!==resultsLabel||$[37]!==sortObject_0||$[38]!==updateSort_0||$[39]!==view.style||$[40]!==view.toggleStyle?(t18=react.createElement(shared.WJ,{showGridToggle:!0,filters:dropDownFilters,showSortDropdown:!0,resultsLabel,layoutStyle:view.style,handleLayoutSelect:view.toggleStyle,pageSortOptions:constants.yA,pageSortDefaultOption:constants._r.LAST_MODIFIED,handleSortChange:updateSort_0,currentSort:sortObject_0}),$[35]=dropDownFilters,$[36]=resultsLabel,$[37]=sortObject_0,$[38]=updateSort_0,$[39]=view.style,$[40]=view.toggleStyle,$[41]=t18):t18=$[41],$[42]!==t17||$[43]!==t18?(t19=react.createElement(react.Fragment,null,t17,t18),$[42]=t17,$[43]=t18,$[44]=t19):t19=$[44],t19}function _temp4(t0){const{key:key_1}=t0;return!["status","search"].includes(key_1)}function _temp3(t0){const{key:key_0}=t0;return"search"===key_0}function _temp2(t0){const{key}=t0;return"status"===key}function header_temp(t0){const{state:t1,actions:t2}=t0,{filters,sortObject}=t1,{updateFilter,updateSort,registerFilters}=t2;return{filters,updateFilter,sortObject,updateSort,registerFilters}}Header.propTypes={initialPageReady:prop_types_default().bool,stories:propTypes.Py,totalStoriesByStatus:propTypes.g3,view:useStoryView.Q8.isRequired};const header=(0,src.ph)(Header)},"./packages/dashboard/src/app/views/utils/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hB:()=>utils_composeTemplateFilter,Ds:()=>utils_getSearchOptions,mK:()=>utils_getTemplateFilters});const utils_getSearchOptions=function getSearchOptions(options){return options.reduce(((acc,option)=>!option.title||option?.title.trim().length<=0?acc:[...acc,{label:option.title,value:option.title}]),[])};var uniqueEntriesByKey=__webpack_require__("./packages/design-system/src/utils/uniqueEntriesByKey.ts");const TEMPLATE_META_DATA_TYPES_VERTICAL="VERTICAL",TEMPLATE_META_DATA_TYPES_COLOR="COLOR",TEMPLATE_META_DATA_TYPES_TAG="TAG",TEMPLATE_META_DATA_TYPES_TITLE="TITLE";const utils_getTemplateFilters=function getTemplateFilters(templates){const templatesArr=Object.values(templates),colors=templatesArr.flatMap((t=>t.colors)).map((c=>({label:c.family,value:c.family,type:TEMPLATE_META_DATA_TYPES_COLOR}))),tags=templatesArr.flatMap((t=>t.tags)).map((tag=>({label:tag,value:tag,type:TEMPLATE_META_DATA_TYPES_TAG}))),verticals=templatesArr.map((t=>t.vertical)).map((vertical=>({label:vertical,value:vertical,type:TEMPLATE_META_DATA_TYPES_VERTICAL}))),title=templatesArr.map((t=>({label:t.title,value:t.title,type:TEMPLATE_META_DATA_TYPES_TITLE})));return[...(0,uniqueEntriesByKey.A)(tags,"label"),...(0,uniqueEntriesByKey.A)(colors,"label"),...(0,uniqueEntriesByKey.A)(verticals,"label"),...(0,uniqueEntriesByKey.A)(title,"label")]};const utils_composeTemplateFilter=function composeTemplateFilter(filters){return template=>!filters||filters.some((filter=>{switch(filter?.type){case TEMPLATE_META_DATA_TYPES_TAG:return template.tags.map((tag=>tag.toLowerCase())).includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_COLOR:return template.colors.map((color=>color.label.toLowerCase())).includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_VERTICAL:return template.vertical.toLowerCase().includes(filter.value.toLowerCase());case TEMPLATE_META_DATA_TYPES_TITLE:return template.title.toLowerCase().includes(filter.value.toLowerCase());default:return!0}}))}},"./packages/dashboard/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{sG:()=>app.sG,xh:()=>dashboard,ef:()=>components.ef,Du:()=>interfaceSkeleton,Zo:()=>components.Zo,dQ:()=>constants.dQ,m_:()=>components.m_,UK:()=>app.UK});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/react-compiler-runtime/dist/index.js"),deepMerge=__webpack_require__("./packages/design-system/src/utils/deepMerge.ts"),theme=__webpack_require__("./packages/design-system/src/theme/theme.ts"),colors=__webpack_require__("./packages/design-system/src/theme/colors.ts"),styles=__webpack_require__("./packages/design-system/src/theme/global/styles.ts"),modal_styles=__webpack_require__("./packages/design-system/src/components/modal/styles.ts"),snackbarProvider=__webpack_require__("./packages/design-system/src/contexts/snackbar/snackbarProvider.tsx"),popupProvider=__webpack_require__("./packages/design-system/src/contexts/popup/popupProvider.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),stylis_rtl=__webpack_require__("./node_modules/stylis-plugin-rtl/dist/stylis-rtl.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),flagged_esm=__webpack_require__("./packages/dashboard/node_modules/flagged/dist/flagged.esm.js"),app_config=__webpack_require__("./packages/dashboard/src/app/config/index.ts"),apiProvider=__webpack_require__("./packages/dashboard/src/app/api/apiProvider.js"),components=__webpack_require__("./packages/dashboard/src/components/index.js"),router=__webpack_require__("./packages/dashboard/src/app/router/index.ts"),src_theme=__webpack_require__("./packages/dashboard/src/theme.js"),utils=__webpack_require__("./packages/dashboard/src/utils/index.js");const src_getDefaultConfig=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});function Dashboard(t0){const $=(0,dist.c)(27),{config,children}=t0;let t1;$[0]!==config?(t1=(0,deepMerge.A)(src_getDefaultConfig(),config),$[0]=config,$[1]=t1):t1=$[1];const _config=t1;let t2;$[2]===Symbol.for("react.memo_cache_sentinel")?(t2={...theme.w,colors:colors.B},$[2]=t2):t2=$[2];const activeTheme=t2,{isRTL,flags,styleConstants:t3}=_config;let t4;$[3]!==t3?(t4=void 0===t3?{}:t3,$[3]=t3,$[4]=t4):t4=$[4];const{leftOffset,topOffset}=t4;let t5,t6,t7,t8,t10,t9,t11,t12,t13,t14;return $[5]!==isRTL?(t5=isRTL?[stylis_rtl.Ay]:[],$[5]=isRTL,$[6]=t5):t5=$[6],$[7]===Symbol.for("react.memo_cache_sentinel")?(t6=react.createElement(styles.P,null),t7=react.createElement(modal_styles.E,null),$[7]=t6,$[8]=t7):(t6=$[7],t7=$[8]),$[9]!==isRTL||$[10]!==leftOffset||$[11]!==topOffset?(t8={isRTL,leftOffset,topOffset},$[9]=isRTL,$[10]=leftOffset,$[11]=topOffset,$[12]=t8):t8=$[12],$[13]===Symbol.for("react.memo_cache_sentinel")?(t9=react.createElement(src_theme.z,null),t10=react.createElement(utils.eY,null),$[13]=t10,$[14]=t9):(t10=$[13],t9=$[14]),$[15]!==children||$[16]!==t8?(t11=react.createElement(apiProvider.A,null,react.createElement(components.Xk,null,react.createElement(router.pg,null,react.createElement(snackbarProvider.A,null,react.createElement(popupProvider.A,{value:t8},t9,t10,children))))),$[15]=children,$[16]=t8,$[17]=t11):t11=$[17],$[18]!==_config||$[19]!==t11?(t12=react.createElement(styled_components_browser_esm.NP,{theme:activeTheme},t6,t7,react.createElement(app_config.s,{config:_config},t11)),$[18]=_config,$[19]=t11,$[20]=t12):t12=$[20],$[21]!==t12||$[22]!==t5?(t13=react.createElement(styled_components_browser_esm.ID,{stylisPlugins:t5},t12),$[21]=t12,$[22]=t5,$[23]=t13):t13=$[23],$[24]!==flags||$[25]!==t13?(t14=react.createElement(flagged_esm.nT,{features:flags},t13),$[24]=flags,$[25]=t13,$[26]=t14):t14=$[26],t14}Object.defineProperty(stylis_rtl.Ay,"name",{value:"stylisRTLPlugin"}),Dashboard.propTypes={config:prop_types_default().object.isRequired,children:prop_types_default().node};const dashboard=Dashboard;var app=__webpack_require__("./packages/dashboard/src/app/index.js"),constants=__webpack_require__("./packages/dashboard/src/constants/index.ts"),src=(__webpack_require__("./packages/dashboard/src/app/views/shared/index.js"),__webpack_require__("./packages/dashboard/src/utils/keyboardOnlyOutline.js"),__webpack_require__("./packages/react/src/index.ts")),i18n=__webpack_require__("./packages/i18n/src/i18n.ts"),sprintf=__webpack_require__("./packages/i18n/src/sprintf.ts"),tracking_src=__webpack_require__("./packages/tracking/src/index.ts"),useSnackbar=__webpack_require__("./packages/design-system/src/contexts/snackbar/useSnackbar.ts"),snackbarContainer=__webpack_require__("./packages/design-system/src/components/snackbar/snackbarContainer.tsx"),useApi=__webpack_require__("./packages/dashboard/src/app/api/useApi.js"),useStoryFilters=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/useStoryFilters.js"),content=__webpack_require__("./packages/dashboard/src/app/views/myStories/content/index.js"),header=__webpack_require__("./packages/dashboard/src/app/views/myStories/header/index.js"),StoryFiltersProvider=__webpack_require__("./packages/dashboard/src/app/views/myStories/filters/StoryFiltersProvider/index.js");function MyStoriesView(){const{duplicateStory:duplicateStory_0,fetchStories:fetchStories_0,trashStory:trashStory_0,updateStory:updateStory_0,allPagesFetched:allPagesFetched_0,isLoading:isLoading_0,stories:stories_0,storiesOrderById:storiesOrderById_0,totalPages:totalPages_0,totalStoriesByStatus:totalStoriesByStatus_0}=(0,useApi.A)((({actions:{storyApi:{duplicateStory,fetchStories,trashStory,updateStory}},state:{stories:{allPagesFetched,isLoading,stories,storiesOrderById,totalPages,totalStoriesByStatus}}})=>({duplicateStory,fetchStories,trashStory,updateStory,allPagesFetched,isLoading,stories,storiesOrderById,totalPages,totalStoriesByStatus}))),{filtersObject:filtersObject_0,sortObject:sortObject_0}=(0,useStoryFilters.A)((({state:{filtersObject,sortObject}})=>({filtersObject,sortObject}))),{apiCallbacks,canViewDefaultTemplates}=(0,app_config.U)(),isMountedRef=(0,src.li)(!1);(0,src.vJ)((()=>(isMountedRef.current=!0,()=>{isMountedRef.current=!1})),[]);const{page,view,showStoriesWhileLoading,initialPageReady}=(0,utils.uO)({filtersObject:filtersObject_0,sortObject:sortObject_0,isLoading:isLoading_0,totalPages:totalPages_0});(0,src.vJ)((()=>{fetchStories_0({page:page.value,filters:filtersObject_0,sort:sortObject_0})}),[fetchStories_0,filtersObject_0,sortObject_0,page.value,apiCallbacks]);const orderedStories=(0,src.Kr)((()=>storiesOrderById_0.map((storyId=>stories_0[storyId]))),[stories_0,storiesOrderById_0]);return react.createElement(components.PE.Provider,null,react.createElement(header.A,{initialPageReady,stories:orderedStories,totalStoriesByStatus:totalStoriesByStatus_0,view}),react.createElement(content.A,{allPagesFetched:allPagesFetched_0,canViewDefaultTemplates,filtersObject:filtersObject_0,loading:{isLoading:isLoading_0,showStoriesWhileLoading},page,stories:orderedStories,storyActions:{duplicateStory:duplicateStory_0,trashStory:trashStory_0,updateStory:updateStory_0},view}),react.createElement(components.PE.Fixed,null,react.createElement(components.eq,null)))}function MyStories(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(StoryFiltersProvider.A,null,react.createElement(MyStoriesView,null)),$[0]=t0):t0=$[0],t0}var useLiveRegion=__webpack_require__("./packages/design-system/src/utils/useLiveRegion.ts"),uniqueEntriesByKey=__webpack_require__("./packages/design-system/src/utils/uniqueEntriesByKey.ts"),useRouteHistory=__webpack_require__("./packages/dashboard/src/app/router/useRouteHistory.ts"),views_utils=__webpack_require__("./packages/dashboard/src/app/views/utils/index.js"),useTemplateFilters=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/useTemplateFilters.js"),exploreTemplates_content=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/content/index.js"),exploreTemplates_header=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/header/index.js"),modal=__webpack_require__("./packages/design-system/src/components/modal/modal.tsx"),propTypes=__webpack_require__("./packages/dashboard/src/propTypes.js"),templateDetails_header=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/header/index.js"),templateDetails_content=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/modal/templateDetails/content/index.js");function TemplateDetailsModal(t0){const $=(0,dist.c)(23),{activeTemplateIndex,activeTemplate,filteredTemplatesLength,isDetailsViewOpen,templateActions}=t0,{isRTL,apiCallbacks}=(0,app_config.U)(),canCreateStory=Boolean(apiCallbacks?.createStoryFromTemplate);let t1;$[0]!==templateActions?(t1=templateActions||{},$[0]=templateActions,$[1]=t1):t1=$[1];const{handleDetailsToggle,switchToTemplateByOffset}=t1;let t2,t3,t4;$[2]!==activeTemplate?.title?(t2=(0,sprintf.A)((0,i18n.__)("Template Details for %s","web-stories"),activeTemplate?.title),$[2]=activeTemplate?.title,$[3]=t2):t2=$[3],$[4]===Symbol.for("react.memo_cache_sentinel")?(t3={backgroundColor:`${theme.w.colors.opacity.overlayDark}`},t4={display:"block",height:"90vh",width:"90vw",backgroundColor:`${theme.w.colors.standard.white}`},$[4]=t3,$[5]=t4):(t3=$[4],t4=$[5]);const t5=activeTemplate?.title,t6=activeTemplate?.id;let t7,t8,t9;return $[6]!==canCreateStory||$[7]!==t5||$[8]!==t6||$[9]!==templateActions?(t7=react.createElement(templateDetails_header.A,{templateTitle:t5,templateId:t6,templateActions,canCreateStory}),$[6]=canCreateStory,$[7]=t5,$[8]=t6,$[9]=templateActions,$[10]=t7):t7=$[10],$[11]!==activeTemplate||$[12]!==activeTemplateIndex||$[13]!==filteredTemplatesLength||$[14]!==isRTL||$[15]!==switchToTemplateByOffset?(t8=react.createElement(templateDetails_content.A,{activeTemplateIndex,isRTL,filteredTemplatesLength,switchToTemplateByOffset,template:activeTemplate}),$[11]=activeTemplate,$[12]=activeTemplateIndex,$[13]=filteredTemplatesLength,$[14]=isRTL,$[15]=switchToTemplateByOffset,$[16]=t8):t8=$[16],$[17]!==handleDetailsToggle||$[18]!==isDetailsViewOpen||$[19]!==t2||$[20]!==t7||$[21]!==t8?(t9=react.createElement(modal.A,{isOpen:isDetailsViewOpen,onClose:handleDetailsToggle,contentLabel:t2,overlayStyles:t3,contentStyles:t4},t7,t8),$[17]=handleDetailsToggle,$[18]=isDetailsViewOpen,$[19]=t2,$[20]=t7,$[21]=t8,$[22]=t9):t9=$[22],t9}TemplateDetailsModal.propTypes={activeTemplateIndex:prop_types_default().number,activeTemplate:propTypes.Ms,filteredTemplatesLength:prop_types_default().number,isDetailsViewOpen:prop_types_default().bool,templateActions:propTypes.zk};const exploreTemplates_modal=TemplateDetailsModal;var TemplateFiltersProvider=__webpack_require__("./packages/dashboard/src/app/views/exploreTemplates/filters/TemplateFiltersProvider/index.js");function ExploreTemplatesView(){const speak=(0,useLiveRegion.A)(),[isDetailsViewOpen,setIsDetailsViewOpen]=(0,src.J0)(!1),[activeTemplate,setActiveTemplate]=(0,src.J0)(null),[activeTemplateIndex,setActiveTemplateIndex]=(0,src.J0)(0),{templateIdParam,replace}=(0,useRouteHistory.A)((({actions,state})=>({templateIdParam:state.queryParams.id,replace:actions.replace}))),idRef=(0,src.li)(templateIdParam),{allPagesFetched:allPagesFetched_0,isLoading:isLoading_0,templates:templates_0,templatesOrderById:templatesOrderById_0,totalPages:totalPages_0,totalTemplates:totalTemplates_0,createStoryFromTemplate:createStoryFromTemplate_0,fetchExternalTemplates:fetchExternalTemplates_0}=(0,useApi.A)((({state:{templates:{allPagesFetched,isLoading,templates,templatesOrderById,totalPages,totalTemplates}},actions:{storyApi:{createStoryFromTemplate},templateApi:{fetchExternalTemplates}}})=>({allPagesFetched,isLoading,templates,templatesOrderById,totalPages,totalTemplates,createStoryFromTemplate,fetchExternalTemplates}))),{filters:filters_0,sortObject:sortObject_0,filtersObject:filtersObject_0}=(0,useTemplateFilters.A)((({state:{filters,sortObject,filtersObject}})=>({filters,sortObject,filtersObject}))),{page,view}=(0,utils.D)({filtersObject:filtersObject_0,sortObject:sortObject_0,totalPages:totalPages_0}),[searchFilterValue]=(0,src.Kr)((()=>{const search=filters_0.find((({key})=>"search"===key));return[search?.filterId]}),[filters_0]),templateFilters=(0,src.Kr)((()=>(0,views_utils.mK)(templates_0)),[templates_0]),selectFilters=(0,src.Kr)((()=>searchFilterValue?templateFilters.filter((opt=>opt.label.toLowerCase().includes(searchFilterValue.toLowerCase()))):templateFilters),[templateFilters,searchFilterValue]),orderedTemplates=(0,src.Kr)((()=>templatesOrderById_0.map((templateId=>templates_0[templateId])).filter((0,views_utils.hB)(selectFilters))),[templatesOrderById_0,templates_0,selectFilters]),totalVisibleTemplates=(0,src.Kr)((()=>totalTemplates_0!==orderedTemplates.length?orderedTemplates.length:totalTemplates_0),[orderedTemplates,totalTemplates_0]),searchOptions=(0,src.Kr)((()=>(0,uniqueEntriesByKey.A)(selectFilters,"label")),[selectFilters]),handleCreateStoryFromTemplate=(0,src.hb)((templateId_0=>{const template=templates_0[templateId_0];(0,tracking_src.sx)("use_template",{name:template.title,template_id:template.id}),createStoryFromTemplate_0(template)}),[createStoryFromTemplate_0,templates_0]),updateTemplateView=(0,src.hb)((id=>{const currentTemplate=orderedTemplates.find((templateItem=>templateItem.id===id));setActiveTemplate(currentTemplate),setActiveTemplateIndex(orderedTemplates.findIndex((template_0=>template_0.id===id))),idRef.current&&(idRef.current=void 0),replace(`?id=${currentTemplate.id}&isLocal=${currentTemplate.isLocal}`)}),[replace,orderedTemplates]),handleDetailsToggle=(0,src.hb)(((id_0,title)=>{setIsDetailsViewOpen((prevIsOpen=>{const newIsOpen=!prevIsOpen;return title&&(0,tracking_src.X3)(title),newIsOpen&&id_0&&updateTemplateView(id_0),newIsOpen||(replace(""),speak((0,i18n.__)("Exit detail templates view","web-stories"))),newIsOpen}))}),[replace,speak,updateTemplateView]),switchToTemplateByOffset=(0,src.hb)((offset=>{const newTemplate=orderedTemplates[offset];setActiveTemplate(newTemplate),setActiveTemplateIndex(offset),replace(`?id=${newTemplate.id}&isLocal=${newTemplate.isLocal}`),speak((0,sprintf.A)((0,i18n.__)("Viewing %s","web-stories"),newTemplate.title))}),[orderedTemplates,replace,speak]),templateActions=(0,src.Kr)((()=>({createStoryFromTemplate:handleCreateStoryFromTemplate,handleDetailsToggle,switchToTemplateByOffset})),[handleCreateStoryFromTemplate,handleDetailsToggle,switchToTemplateByOffset]);return(0,src.vJ)((()=>{fetchExternalTemplates_0()}),[fetchExternalTemplates_0]),(0,src.vJ)((()=>{if(idRef.current&&orderedTemplates.length){if(!orderedTemplates.some((template_1=>template_1.id===Number.parseInt(idRef.current))))return void replace("");setIsDetailsViewOpen(!0),updateTemplateView(Number.parseInt(idRef.current))}}),[orderedTemplates,replace,updateTemplateView]),react.createElement(components.PE.Provider,null,react.createElement(exploreTemplates_header.A,{isLoading:isLoading_0&&!totalTemplates_0,totalTemplates:totalVisibleTemplates,searchOptions,view}),react.createElement(exploreTemplates_content.A,{isLoading:isLoading_0,allPagesFetched:allPagesFetched_0,page,templates:orderedTemplates,totalTemplates:totalVisibleTemplates,search:searchFilterValue,view,templateActions}),react.createElement(components.PE.Fixed,null,react.createElement(components.eq,null)),react.createElement(exploreTemplates_modal,{activeTemplate,activeTemplateIndex,isDetailsViewOpen,templateActions,filteredTemplatesLength:orderedTemplates.length}))}function ExploreTemplates(){const $=(0,dist.c)(1);let t0;return $[0]===Symbol.for("react.memo_cache_sentinel")?(t0=react.createElement(TemplateFiltersProvider.A,null,react.createElement(ExploreTemplatesView,null)),$[0]=t0):t0=$[0],t0}var pageStructure=__webpack_require__("./packages/dashboard/src/components/pageStructure/index.js"),useApiAlerts=__webpack_require__("./packages/dashboard/src/app/api/useApiAlerts.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const interfaceSkeleton=({additionalRoutes})=>{const{currentPath,templateId,availableRoutes}=(0,router.bG)((({state})=>({...state,templateId:state.queryParams.id}))),{push,setAvailableRoutes}=(0,router.bG)((({actions})=>actions)),{canViewDefaultTemplates,leftRailSecondaryNavigation=[],documentTitleSuffix=(0,i18n.__)("Web Stories","web-stories")}=(0,app_config.U)(),{addInitialFetchListener:addInitialFetchListener_0}=(0,useApi.A)((({actions:{storyApi:{addInitialFetchListener}},state:{templates:{templates}}})=>({currentTemplate:void 0!==templateId?templates[templateId]?.title:void 0,addInitialFetchListener}))),isFirstLoadOnMyStoriesRef=(0,src.li)(currentPath===constants.vc.DASHBOARD),[isRedirectComplete,setIsRedirectComplete]=(0,src.J0)(!isFirstLoadOnMyStoriesRef.current);(0,src.vJ)((()=>addInitialFetchListener_0?.((storyStatuses=>{storyStatuses?.all<=0&&isFirstLoadOnMyStoriesRef.current&&canViewDefaultTemplates&&(push(constants.vc.TEMPLATES_GALLERY),isFirstLoadOnMyStoriesRef.current=!1),setIsRedirectComplete(!0)}))),[addInitialFetchListener_0,push,currentPath,canViewDefaultTemplates]),(0,src.vJ)((()=>{if(availableRoutes.length>0)return;const additionalPaths=additionalRoutes?additionalRoutes.map((({path})=>path)):[];setAvailableRoutes([...Object.values(constants.vc),...additionalPaths])}),[additionalRoutes,availableRoutes.length,setAvailableRoutes]),(0,src.vJ)((()=>{if(!isRedirectComplete)return;const additionalRouteTitle=leftRailSecondaryNavigation.find((config=>config.value===currentPath)),dynamicPageTitle=constants.c9[currentPath]||additionalRouteTitle?.label||constants.c9.DEFAULT;document.title=(0,sprintf.A)((0,i18n.__)("%1$s  %2$s","web-stories"),dynamicPageTitle,documentTitleSuffix),(0,tracking_src.X3)(dynamicPageTitle)}),[currentPath,isRedirectComplete,leftRailSecondaryNavigation,documentTitleSuffix]),(0,useApiAlerts.A)();const{clearSnackbar,removeSnack,placement,currentSnacks}=(0,useSnackbar.d)(),prevPath=(0,src.ZC)(currentPath);return(0,src.vJ)((()=>{currentPath!==prevPath&&clearSnackbar()}),[clearSnackbar,currentPath,prevPath]),react.createElement(react.Fragment,null,react.createElement(pageStructure.Tv,null,react.createElement(pageStructure.IH,null),react.createElement(pageStructure.TK,null,availableRoutes.length>0&&react.createElement(react.Fragment,null,react.createElement(router.qh,{exact:!0,isDefault:!0,path:constants.vc.DASHBOARD,component:react.createElement(MyStories,null)}),canViewDefaultTemplates&&react.createElement(router.qh,{path:constants.vc.TEMPLATES_GALLERY,component:react.createElement(ExploreTemplates,null)}),additionalRoutes&&additionalRoutes.map((routeProps=>react.createElement(router.qh,_extends({key:routeProps.path},routeProps))))))),react.createElement(snackbarContainer.A,{notifications:currentSnacks,onRemove:removeSnack,placement,max:1}))}}}]);